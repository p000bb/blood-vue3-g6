var g9=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var b4e=g9((aa,oa)=>{function m9(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const L_=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ho},get Circle(){return w0e},get Ellipse(){return x0e},get Image(){return S0e},get Line(){return _0e},get Marker(){return M0e},get Path(){return R2},get Polygon(){return O0e},get Polyline(){return N0e},get Rect(){return R0e},get Text(){return P0e}},Symbol.toStringTag,{value:"Module"})),I_=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return Fa},get Circle(){return G0e},get Dom(){return j0e},get Ellipse(){return U0e},get Image(){return W0e},get Line(){return H0e},get Marker(){return V0e},get Path(){return Y0e},get Polygon(){return X0e},get Polyline(){return K0e},get Rect(){return Z0e},get Text(){return tme}},Symbol.toStringTag,{value:"Module"}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function O_(r,e){const t=new Set(r.split(","));return n=>t.has(n)}const sn={},pf=[],Pr=()=>{},y9=()=>!1,ny=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),N_=r=>r.startsWith("onUpdate:"),jn=Object.assign,$_=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},b9=Object.prototype.hasOwnProperty,Nr=(r,e)=>b9.call(r,e),Jt=Array.isArray,gf=r=>Nv(r)==="[object Map]",iR=r=>Nv(r)==="[object Set]",KA=r=>Nv(r)==="[object Date]",rr=r=>typeof r=="function",Sr=r=>typeof r=="string",Ko=r=>typeof r=="symbol",Gr=r=>r!==null&&typeof r=="object",G0=r=>(Gr(r)||rr(r))&&rr(r.then)&&rr(r.catch),aR=Object.prototype.toString,Nv=r=>aR.call(r),w9=r=>Nv(r).slice(8,-1),j0=r=>Nv(r)==="[object Object]",D_=r=>Sr(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,wd=O_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),iy=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},x9=/-(\w)/g,ao=iy(r=>r.replace(x9,(e,t)=>t?t.toUpperCase():"")),S9=/\B([A-Z])/g,Kl=iy(r=>r.replace(S9,"-$1").toLowerCase()),ay=iy(r=>r.charAt(0).toUpperCase()+r.slice(1)),Eb=iy(r=>r?`on${ay(r)}`:""),Bl=(r,e)=>!Object.is(r,e),u0=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},oR=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},_9=r=>{const e=parseFloat(r);return isNaN(e)?r:e},E9=r=>{const e=Sr(r)?Number(r):NaN;return isNaN(e)?r:e};let qA;const sR=()=>qA||(qA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ln(r){if(Jt(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=Sr(n)?T9(n):ln(n);if(i)for(const a in i)e[a]=i[a]}return e}else if(Sr(r)||Gr(r))return r}const M9=/;(?![^(]*\))/g,C9=/:([^]+)/,A9=/\/\*[^]*?\*\//g;function T9(r){const e={};return r.replace(A9,"").split(M9).forEach(t=>{if(t){const n=t.split(C9);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function dt(r){let e="";if(Sr(r))e=r;else if(Jt(r))for(let t=0;t<r.length;t++){const n=dt(r[t]);n&&(e+=n+" ")}else if(Gr(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const k9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",L9=O_(k9);function lR(r){return!!r||r===""}function I9(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=U0(r[n],e[n]);return t}function U0(r,e){if(r===e)return!0;let t=KA(r),n=KA(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=Ko(r),n=Ko(e),t||n)return r===e;if(t=Jt(r),n=Jt(e),t||n)return t&&n?I9(r,e):!1;if(t=Gr(r),n=Gr(e),t||n){if(!t||!n)return!1;const i=Object.keys(r).length,a=Object.keys(e).length;if(i!==a)return!1;for(const o in r){const s=r.hasOwnProperty(o),l=e.hasOwnProperty(o);if(s&&!l||!s&&l||!U0(r[o],e[o]))return!1}}return String(r)===String(e)}const uR=r=>!!(r&&r.__v_isRef===!0),xn=r=>Sr(r)?r:r==null?"":Jt(r)||Gr(r)&&(r.toString===aR||!rr(r.toString))?uR(r)?xn(r.value):JSON.stringify(r,cR,2):String(r),cR=(r,e)=>uR(e)?cR(r,e.value):gf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],a)=>(t[Mb(n,a)+" =>"]=i,t),{})}:iR(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Mb(t))}:Ko(e)?Mb(e):Gr(e)&&!Jt(e)&&!j0(e)?String(e):e,Mb=(r,e="")=>{var t;return Ko(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xi;class O9{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Xi,!e&&Xi&&(this.index=(Xi.scopes||(Xi.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Xi;try{return Xi=this,e()}finally{Xi=t}}}on(){Xi=this}off(){Xi=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function N9(r,e=Xi){e&&e.active&&e.effects.push(r)}function fR(){return Xi}function $9(r){Xi&&Xi.cleanups.push(r)}let Yu;class R_{constructor(e,t,n,i){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,N9(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ql();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(D9(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Zl()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Dl,t=Yu;try{return Dl=!0,Yu=this,this._runnings++,ZA(this),this.fn()}finally{QA(this),this._runnings--,Yu=t,Dl=e}}stop(){this.active&&(ZA(this),QA(this),this.onStop&&this.onStop(),this.active=!1)}}function D9(r){return r.value}function ZA(r){r._trackId++,r._depsLength=0}function QA(r){if(r.deps.length>r._depsLength){for(let e=r._depsLength;e<r.deps.length;e++)hR(r.deps[e],r);r.deps.length=r._depsLength}}function hR(r,e){const t=r.get(e);t!==void 0&&e._trackId!==t&&(r.delete(e),r.size===0&&r.cleanup())}let Dl=!0,cx=0;const dR=[];function ql(){dR.push(Dl),Dl=!1}function Zl(){const r=dR.pop();Dl=r===void 0?!0:r}function P_(){cx++}function F_(){for(cx--;!cx&&fx.length;)fx.shift()()}function vR(r,e,t){if(e.get(r)!==r._trackId){e.set(r,r._trackId);const n=r.deps[r._depsLength];n!==e?(n&&hR(n,r),r.deps[r._depsLength++]=e):r._depsLength++}}const fx=[];function pR(r,e,t){P_();for(const n of r.keys()){let i;n._dirtyLevel<e&&(i??(i=r.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(i??(i=r.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&fx.push(n.scheduler)))}F_()}const gR=(r,e)=>{const t=new Map;return t.cleanup=r,t.computed=e,t},W0=new WeakMap,Xu=Symbol(""),hx=Symbol("");function Fi(r,e,t){if(Dl&&Yu){let n=W0.get(r);n||W0.set(r,n=new Map);let i=n.get(t);i||n.set(t,i=gR(()=>n.delete(t))),vR(Yu,i)}}function Ns(r,e,t,n,i,a){const o=W0.get(r);if(!o)return;let s=[];if(e==="clear")s=[...o.values()];else if(t==="length"&&Jt(r)){const l=Number(n);o.forEach((u,c)=>{(c==="length"||!Ko(c)&&c>=l)&&s.push(u)})}else switch(t!==void 0&&s.push(o.get(t)),e){case"add":Jt(r)?D_(t)&&s.push(o.get("length")):(s.push(o.get(Xu)),gf(r)&&s.push(o.get(hx)));break;case"delete":Jt(r)||(s.push(o.get(Xu)),gf(r)&&s.push(o.get(hx)));break;case"set":gf(r)&&s.push(o.get(Xu));break}P_();for(const l of s)l&&pR(l,4);F_()}function R9(r,e){const t=W0.get(r);return t&&t.get(e)}const P9=O_("__proto__,__v_isRef,__isVue"),mR=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Ko)),JA=F9();function F9(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const n=Br(this);for(let a=0,o=this.length;a<o;a++)Fi(n,"get",a+"");const i=n[e](...t);return i===-1||i===!1?n[e](...t.map(Br)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){ql(),P_();const n=Br(this)[e].apply(this,t);return F_(),Zl(),n}}),r}function B9(r){Ko(r)||(r=String(r));const e=Br(this);return Fi(e,"has",r),e.hasOwnProperty(r)}class yR{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const i=this._isReadonly,a=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return a;if(t==="__v_raw")return n===(i?a?Q9:SR:a?xR:wR).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Jt(e);if(!i){if(o&&Nr(JA,t))return Reflect.get(JA,t,n);if(t==="hasOwnProperty")return B9}const s=Reflect.get(e,t,n);return(Ko(t)?mR.has(t):P9(t))||(i||Fi(e,"get",t),a)?s:Un(s)?o&&D_(t)?s:s.value:Gr(s)?i?G_(s):Ql(s):s}}class bR extends yR{constructor(e=!1){super(!1,e)}set(e,t,n,i){let a=e[t];if(!this._isShallow){const l=nc(a);if(!kf(n)&&!nc(n)&&(a=Br(a),n=Br(n)),!Jt(e)&&Un(a)&&!Un(n))return l?!1:(a.value=n,!0)}const o=Jt(e)&&D_(t)?Number(t)<e.length:Nr(e,t),s=Reflect.set(e,t,n,i);return e===Br(i)&&(o?Bl(n,a)&&Ns(e,"set",t,n):Ns(e,"add",t,n)),s}deleteProperty(e,t){const n=Nr(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Ns(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Ko(t)||!mR.has(t))&&Fi(e,"has",t),n}ownKeys(e){return Fi(e,"iterate",Jt(e)?"length":Xu),Reflect.ownKeys(e)}}class z9 extends yR{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const G9=new bR,j9=new z9,U9=new bR(!0),B_=r=>r,oy=r=>Reflect.getPrototypeOf(r);function Xp(r,e,t=!1,n=!1){r=r.__v_raw;const i=Br(r),a=Br(e);t||(Bl(e,a)&&Fi(i,"get",e),Fi(i,"get",a));const{has:o}=oy(i),s=n?B_:t?U_:Yd;if(o.call(i,e))return s(r.get(e));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(e)}function Kp(r,e=!1){const t=this.__v_raw,n=Br(t),i=Br(r);return e||(Bl(r,i)&&Fi(n,"has",r),Fi(n,"has",i)),r===i?t.has(r):t.has(r)||t.has(i)}function qp(r,e=!1){return r=r.__v_raw,!e&&Fi(Br(r),"iterate",Xu),Reflect.get(r,"size",r)}function eT(r,e=!1){!e&&!kf(r)&&!nc(r)&&(r=Br(r));const t=Br(this);return oy(t).has.call(t,r)||(t.add(r),Ns(t,"add",r,r)),this}function tT(r,e,t=!1){!t&&!kf(e)&&!nc(e)&&(e=Br(e));const n=Br(this),{has:i,get:a}=oy(n);let o=i.call(n,r);o||(r=Br(r),o=i.call(n,r));const s=a.call(n,r);return n.set(r,e),o?Bl(e,s)&&Ns(n,"set",r,e):Ns(n,"add",r,e),this}function rT(r){const e=Br(this),{has:t,get:n}=oy(e);let i=t.call(e,r);i||(r=Br(r),i=t.call(e,r)),n&&n.call(e,r);const a=e.delete(r);return i&&Ns(e,"delete",r,void 0),a}function nT(){const r=Br(this),e=r.size!==0,t=r.clear();return e&&Ns(r,"clear",void 0,void 0),t}function Zp(r,e){return function(n,i){const a=this,o=a.__v_raw,s=Br(o),l=e?B_:r?U_:Yd;return!r&&Fi(s,"iterate",Xu),o.forEach((u,c)=>n.call(i,l(u),l(c),a))}}function Qp(r,e,t){return function(...n){const i=this.__v_raw,a=Br(i),o=gf(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=i[r](...n),c=t?B_:e?U_:Yd;return!e&&Fi(a,"iterate",l?hx:Xu),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function il(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function W9(){const r={get(a){return Xp(this,a)},get size(){return qp(this)},has:Kp,add:eT,set:tT,delete:rT,clear:nT,forEach:Zp(!1,!1)},e={get(a){return Xp(this,a,!1,!0)},get size(){return qp(this)},has:Kp,add(a){return eT.call(this,a,!0)},set(a,o){return tT.call(this,a,o,!0)},delete:rT,clear:nT,forEach:Zp(!1,!0)},t={get(a){return Xp(this,a,!0)},get size(){return qp(this,!0)},has(a){return Kp.call(this,a,!0)},add:il("add"),set:il("set"),delete:il("delete"),clear:il("clear"),forEach:Zp(!0,!1)},n={get(a){return Xp(this,a,!0,!0)},get size(){return qp(this,!0)},has(a){return Kp.call(this,a,!0)},add:il("add"),set:il("set"),delete:il("delete"),clear:il("clear"),forEach:Zp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=Qp(a,!1,!1),t[a]=Qp(a,!0,!1),e[a]=Qp(a,!1,!0),n[a]=Qp(a,!0,!0)}),[r,t,e,n]}const[H9,V9,Y9,X9]=W9();function z_(r,e){const t=e?r?X9:Y9:r?V9:H9;return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Nr(t,i)&&i in n?t:n,i,a)}const K9={get:z_(!1,!1)},q9={get:z_(!1,!0)},Z9={get:z_(!0,!1)},wR=new WeakMap,xR=new WeakMap,SR=new WeakMap,Q9=new WeakMap;function J9(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eH(r){return r.__v_skip||!Object.isExtensible(r)?0:J9(w9(r))}function Ql(r){return nc(r)?r:j_(r,!1,G9,K9,wR)}function tH(r){return j_(r,!1,U9,q9,xR)}function G_(r){return j_(r,!0,j9,Z9,SR)}function j_(r,e,t,n,i){if(!Gr(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const a=i.get(r);if(a)return a;const o=eH(r);if(o===0)return r;const s=new Proxy(r,o===2?n:t);return i.set(r,s),s}function xd(r){return nc(r)?xd(r.__v_raw):!!(r&&r.__v_isReactive)}function nc(r){return!!(r&&r.__v_isReadonly)}function kf(r){return!!(r&&r.__v_isShallow)}function _R(r){return r?!!r.__v_raw:!1}function Br(r){const e=r&&r.__v_raw;return e?Br(e):r}function rH(r){return Object.isExtensible(r)&&oR(r,"__v_skip",!0),r}const Yd=r=>Gr(r)?Ql(r):r,U_=r=>Gr(r)?G_(r):r;class ER{constructor(e,t,n,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new R_(()=>e(this._value),()=>c0(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=Br(this);return(!e._cacheable||e.effect.dirty)&&Bl(e._value,e._value=e.effect.run())&&c0(e,4),MR(e),e.effect._dirtyLevel>=2&&c0(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function nH(r,e,t=!1){let n,i;const a=rr(r);return a?(n=r,i=Pr):(n=r.get,i=r.set),new ER(n,i,a||!i,t)}function MR(r){var e;Dl&&Yu&&(r=Br(r),vR(Yu,(e=r.dep)!=null?e:r.dep=gR(()=>r.dep=void 0,r instanceof ER?r:void 0)))}function c0(r,e=4,t,n){r=Br(r);const i=r.dep;i&&pR(i,e)}function Un(r){return!!(r&&r.__v_isRef===!0)}function ut(r){return CR(r,!1)}function Uo(r){return CR(r,!0)}function CR(r,e){return Un(r)?r:new iH(r,e)}class iH{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Br(e),this._value=t?e:Yd(e)}get value(){return MR(this),this._value}set value(e){const t=this.__v_isShallow||kf(e)||nc(e);e=t?e:Br(e),Bl(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:Yd(e),c0(this,4))}}function U(r){return Un(r)?r.value:r}const aH={get:(r,e,t)=>U(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return Un(i)&&!Un(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function AR(r){return xd(r)?r:new Proxy(r,aH)}function W_(r){const e=Jt(r)?new Array(r.length):{};for(const t in r)e[t]=TR(r,t);return e}class oH{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return R9(Br(this._object),this._key)}}class sH{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Do(r,e,t){return Un(r)?r:rr(r)?new sH(r):Gr(r)&&arguments.length>1?TR(r,e,t):ut(r)}function TR(r,e,t){const n=r[e];return Un(n)?n:new oH(r,e,t)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rl(r,e,t,n){try{return n?r(...n):r()}catch(i){sy(i,e,t)}}function Ca(r,e,t,n){if(rr(r)){const i=Rl(r,e,t,n);return i&&G0(i)&&i.catch(a=>{sy(a,e,t)}),i}if(Jt(r)){const i=[];for(let a=0;a<r.length;a++)i.push(Ca(r[a],e,t,n));return i}}function sy(r,e,t,n=!0){const i=e?e.vnode:null;if(e){let a=e.parent;const o=e.proxy,s=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](r,o,s)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){ql(),Rl(l,null,10,[r,o,s]),Zl();return}}lH(r,t,i,n)}function lH(r,e,t,n=!0){console.error(r)}let Xd=!1,dx=!1;const gi=[];let Oo=0;const mf=[];let wl=null,Pu=0;const kR=Promise.resolve();let H_=null;function Ln(r){const e=H_||kR;return r?e.then(this?r.bind(this):r):e}function uH(r){let e=Oo+1,t=gi.length;for(;e<t;){const n=e+t>>>1,i=gi[n],a=Kd(i);a<r||a===r&&i.pre?e=n+1:t=n}return e}function V_(r){(!gi.length||!gi.includes(r,Xd&&r.allowRecurse?Oo+1:Oo))&&(r.id==null?gi.push(r):gi.splice(uH(r.id),0,r),LR())}function LR(){!Xd&&!dx&&(dx=!0,H_=kR.then(OR))}function cH(r){const e=gi.indexOf(r);e>Oo&&gi.splice(e,1)}function fH(r){Jt(r)?mf.push(...r):(!wl||!wl.includes(r,r.allowRecurse?Pu+1:Pu))&&mf.push(r),LR()}function iT(r,e,t=Xd?Oo+1:0){for(;t<gi.length;t++){const n=gi[t];if(n&&n.pre){if(r&&n.id!==r.uid)continue;gi.splice(t,1),t--,n()}}}function IR(r){if(mf.length){const e=[...new Set(mf)].sort((t,n)=>Kd(t)-Kd(n));if(mf.length=0,wl){wl.push(...e);return}for(wl=e,Pu=0;Pu<wl.length;Pu++){const t=wl[Pu];t.active!==!1&&t()}wl=null,Pu=0}}const Kd=r=>r.id==null?1/0:r.id,hH=(r,e)=>{const t=Kd(r)-Kd(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function OR(r){dx=!1,Xd=!0,gi.sort(hH);try{for(Oo=0;Oo<gi.length;Oo++){const e=gi[Oo];e&&e.active!==!1&&Rl(e,e.i,e.i?15:14)}}finally{Oo=0,gi.length=0,IR(),Xd=!1,H_=null,(gi.length||mf.length)&&OR()}}let ri=null,NR=null;function H0(r){const e=ri;return ri=r,NR=r&&r.type.__scopeId||null,e}function Nt(r,e=ri,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&mT(-1);const a=H0(e);let o;try{o=r(...i)}finally{H0(a),n._d&&mT(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function $s(r,e){if(ri===null)return r;const t=dy(ri),n=r.dirs||(r.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,s,l=sn]=e[i];a&&(rr(a)&&(a={mounted:a,updated:a}),a.deep&&Al(o),n.push({dir:a,instance:t,value:o,oldValue:void 0,arg:s,modifiers:l}))}return r}function Su(r,e,t,n){const i=r.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[n];l&&(ql(),Ca(l,t,8,[r.el,s,r,e]),Zl())}}const xl=Symbol("_leaveCb"),Jp=Symbol("_enterCb");function $R(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rn(()=>{r.isMounted=!0}),ji(()=>{r.isUnmounting=!0}),r}const pa=[Function,Array],DR={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pa,onEnter:pa,onAfterEnter:pa,onEnterCancelled:pa,onBeforeLeave:pa,onLeave:pa,onAfterLeave:pa,onLeaveCancelled:pa,onBeforeAppear:pa,onAppear:pa,onAfterAppear:pa,onAppearCancelled:pa},RR=r=>{const e=r.subTree;return e.component?RR(e.component):e},dH={name:"BaseTransition",props:DR,setup(r,{slots:e}){const t=ai(),n=$R();return()=>{const i=e.default&&Y_(e.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){for(const h of i)if(h.type!==Ei){a=h;break}}const o=Br(r),{mode:s}=o;if(n.isLeaving)return Cb(a);const l=aT(a);if(!l)return Cb(a);let u=qd(l,o,n,t,h=>u=h);Lf(l,u);const c=t.subTree,f=c&&aT(c);if(f&&f.type!==Ei&&!Fu(l,f)&&RR(t).type!==Ei){const h=qd(f,o,n,t);if(Lf(f,h),s==="out-in"&&l.type!==Ei)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,t.update.active!==!1&&(t.effect.dirty=!0,t.update())},Cb(a);s==="in-out"&&l.type!==Ei&&(h.delayLeave=(d,v,p)=>{const g=PR(n,f);g[String(f.key)]=f,d[xl]=()=>{v(),d[xl]=void 0,delete u.delayedLeave},u.delayedLeave=p})}return a}}},vH=dH;function PR(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function qd(r,e,t,n,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:v,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:y,onAppearCancelled:w}=e,b=String(r.key),x=PR(t,r),S=(A,E)=>{A&&Ca(A,n,9,E)},_=(A,E)=>{const T=E[1];S(A,E),Jt(A)?A.every(C=>C.length<=1)&&T():A.length<=1&&T()},M={mode:o,persisted:s,beforeEnter(A){let E=l;if(!t.isMounted)if(a)E=g||l;else return;A[xl]&&A[xl](!0);const T=x[b];T&&Fu(r,T)&&T.el[xl]&&T.el[xl](),S(E,[A])},enter(A){let E=u,T=c,C=f;if(!t.isMounted)if(a)E=m||u,T=y||c,C=w||f;else return;let k=!1;const L=A[Jp]=I=>{k||(k=!0,I?S(C,[A]):S(T,[A]),M.delayedLeave&&M.delayedLeave(),A[Jp]=void 0)};E?_(E,[A,L]):L()},leave(A,E){const T=String(r.key);if(A[Jp]&&A[Jp](!0),t.isUnmounting)return E();S(h,[A]);let C=!1;const k=A[xl]=L=>{C||(C=!0,E(),L?S(p,[A]):S(v,[A]),A[xl]=void 0,x[T]===r&&delete x[T])};x[T]=r,d?_(d,[A,k]):k()},clone(A){const E=qd(A,e,t,n,i);return i&&i(E),E}};return M}function Cb(r){if(ly(r))return r=Fs(r),r.children=null,r}function aT(r){if(!ly(r))return r;const{shapeFlag:e,children:t}=r;if(t){if(e&16)return t[0];if(e&32&&rr(t.default))return t.default()}}function Lf(r,e){r.shapeFlag&6&&r.component?Lf(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function Y_(r,e=!1,t){let n=[],i=0;for(let a=0;a<r.length;a++){let o=r[a];const s=t==null?o.key:String(t)+String(o.key!=null?o.key:a);o.type===wn?(o.patchFlag&128&&i++,n=n.concat(Y_(o.children,e,s))):(e||o.type!==Ei)&&n.push(s!=null?Fs(o,{key:s}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function _t(r,e){return rr(r)?jn({name:r.name},e,{setup:r}):r}const Sd=r=>!!r.type.__asyncLoader,ly=r=>r.type.__isKeepAlive;function pH(r,e){BR(r,"a",e)}function FR(r,e){BR(r,"da",e)}function BR(r,e,t=ci){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(uy(e,n,t),t){let i=t.parent;for(;i&&i.parent;)ly(i.parent.vnode)&&gH(n,e,t,i),i=i.parent}}function gH(r,e,t,n){const i=uy(e,r,n,!0);cy(()=>{$_(n[e],i)},t)}function uy(r,e,t=ci,n=!1){if(t){const i=t[r]||(t[r]=[]),a=e.__weh||(e.__weh=(...o)=>{ql();const s=$v(t),l=Ca(e,t,r,o);return s(),Zl(),l});return n?i.unshift(a):i.push(a),a}}const js=r=>(e,t=ci)=>{(!hy||r==="sp")&&uy(r,(...n)=>e(...n),t)},zR=js("bm"),rn=js("m"),mH=js("bu"),X_=js("u"),ji=js("bum"),cy=js("um"),yH=js("sp"),bH=js("rtg"),wH=js("rtc");function xH(r,e=ci){uy("ec",r,e)}const SH="components",GR=Symbol.for("v-ndc");function _i(r){return Sr(r)?_H(SH,r,!1)||r:r||GR}function _H(r,e,t=!0,n=!1){const i=ri||ci;if(i){const a=i.type;{const s=dV(a,!1);if(s&&(s===e||s===ao(e)||s===ay(ao(e))))return a}const o=oT(i[r]||a[r],e)||oT(i.appContext[r],e);return!o&&n?a:o}}function oT(r,e){return r&&(r[e]||r[ao(e)]||r[ay(ao(e))])}function K_(r,e,t,n){let i;const a=t;if(Jt(r)||Sr(r)){i=new Array(r.length);for(let o=0,s=r.length;o<s;o++)i[o]=e(r[o],o,void 0,a)}else if(typeof r=="number"){i=new Array(r);for(let o=0;o<r;o++)i[o]=e(o+1,o,void 0,a)}else if(Gr(r))if(r[Symbol.iterator])i=Array.from(r,(o,s)=>e(o,s,void 0,a));else{const o=Object.keys(r);i=new Array(o.length);for(let s=0,l=o.length;s<l;s++){const u=o[s];i[s]=e(r[u],u,s,a)}}else i=[];return i}function sT(r,e){for(let t=0;t<e.length;t++){const n=e[t];if(Jt(n))for(let i=0;i<n.length;i++)r[n[i].name]=n[i].fn;else n&&(r[n.name]=n.key?(...i)=>{const a=n.fn(...i);return a&&(a.key=n.key),a}:n.fn)}return r}function fr(r,e,t={},n,i){if(ri.isCE||ri.parent&&Sd(ri.parent)&&ri.parent.isCE)return e!=="default"&&(t.name=e),St("slot",t,n&&n());let a=r[e];a&&a._c&&(a._d=!1),We();const o=a&&jR(a(t)),s=or(wn,{key:(t.key||o&&o.key||`_${e}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&r._===1?64:-2);return s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function jR(r){return r.some(e=>Y0(e)?!(e.type===Ei||e.type===wn&&!jR(e.children)):!0)?r:null}const vx=r=>r?c3(r)?dy(r):vx(r.parent):null,_d=jn(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>vx(r.parent),$root:r=>vx(r.root),$emit:r=>r.emit,$options:r=>Z_(r),$forceUpdate:r=>r.f||(r.f=()=>{r.effect.dirty=!0,V_(r.update)}),$nextTick:r=>r.n||(r.n=Ln.bind(r.proxy)),$watch:r=>KH.bind(r)}),Ab=(r,e)=>r!==sn&&!r.__isScriptSetup&&Nr(r,e),EH={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return a[e]}else{if(Ab(n,e))return o[e]=1,n[e];if(i!==sn&&Nr(i,e))return o[e]=2,i[e];if((u=r.propsOptions[0])&&Nr(u,e))return o[e]=3,a[e];if(t!==sn&&Nr(t,e))return o[e]=4,t[e];px&&(o[e]=0)}}const c=_d[e];let f,h;if(c)return e==="$attrs"&&Fi(r.attrs,"get",""),c(r);if((f=s.__cssModules)&&(f=f[e]))return f;if(t!==sn&&Nr(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,Nr(h,e))return h[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:a}=r;return Ab(i,e)?(i[e]=t,!0):n!==sn&&Nr(n,e)?(n[e]=t,!0):Nr(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(a[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!t[o]||r!==sn&&Nr(r,o)||Ab(e,o)||(s=a[0])&&Nr(s,o)||Nr(n,o)||Nr(_d,o)||Nr(i.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:Nr(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function q_(){return UR().slots}function MH(){return UR().attrs}function UR(){const r=ai();return r.setupContext||(r.setupContext=h3(r))}function lT(r){return Jt(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let px=!0;function CH(r){const e=Z_(r),t=r.proxy,n=r.ctx;px=!1,e.beforeCreate&&uT(e.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:v,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:w,unmounted:b,render:x,renderTracked:S,renderTriggered:_,errorCaptured:M,serverPrefetch:A,expose:E,inheritAttrs:T,components:C,directives:k,filters:L}=e;if(u&&AH(u,n,null),o)for(const N in o){const D=o[N];rr(D)&&(n[N]=D.bind(t))}if(i){const N=i.call(t,t);Gr(N)&&(r.data=Ql(N))}if(px=!0,a)for(const N in a){const D=a[N],$=rr(D)?D.bind(t,t):rr(D.get)?D.get.bind(t,t):Pr,R=!rr(D)&&rr(D.set)?D.set.bind(t):Pr,B=Le({get:$,set:R});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>B.value,set:j=>B.value=j})}if(s)for(const N in s)WR(s[N],n,t,N);if(l){const N=rr(l)?l.call(t):l;Reflect.ownKeys(N).forEach(D=>{Ci(D,N[D])})}c&&uT(c,r,"c");function O(N,D){Jt(D)?D.forEach($=>N($.bind(t))):D&&N(D.bind(t))}if(O(zR,f),O(rn,h),O(mH,d),O(X_,v),O(pH,p),O(FR,g),O(xH,M),O(wH,S),O(bH,_),O(ji,y),O(cy,b),O(yH,A),Jt(E))if(E.length){const N=r.exposed||(r.exposed={});E.forEach(D=>{Object.defineProperty(N,D,{get:()=>t[D],set:$=>t[D]=$})})}else r.exposed||(r.exposed={});x&&r.render===Pr&&(r.render=x),T!=null&&(r.inheritAttrs=T),C&&(r.components=C),k&&(r.directives=k)}function AH(r,e,t=Pr){Jt(r)&&(r=gx(r));for(const n in r){const i=r[n];let a;Gr(i)?"default"in i?a=zr(i.from||n,i.default,!0):a=zr(i.from||n):a=zr(i),Un(a)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function uT(r,e,t){Ca(Jt(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function WR(r,e,t,n){const i=n.includes(".")?o3(t,n):()=>t[n];if(Sr(r)){const a=e[r];rr(a)&&qt(i,a)}else if(rr(r))qt(i,r.bind(t));else if(Gr(r))if(Jt(r))r.forEach(a=>WR(a,e,t,n));else{const a=rr(r.handler)?r.handler.bind(t):e[r.handler];rr(a)&&qt(i,a,r)}}function Z_(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(e);let l;return s?l=s:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(u=>V0(l,u,o,!0)),V0(l,e,o)),Gr(e)&&a.set(e,l),l}function V0(r,e,t,n=!1){const{mixins:i,extends:a}=e;a&&V0(r,a,t,!0),i&&i.forEach(o=>V0(r,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const s=TH[o]||t&&t[o];r[o]=s?s(r[o],e[o]):e[o]}return r}const TH={data:cT,props:fT,emits:fT,methods:ad,computed:ad,beforeCreate:xi,created:xi,beforeMount:xi,mounted:xi,beforeUpdate:xi,updated:xi,beforeDestroy:xi,beforeUnmount:xi,destroyed:xi,unmounted:xi,activated:xi,deactivated:xi,errorCaptured:xi,serverPrefetch:xi,components:ad,directives:ad,watch:LH,provide:cT,inject:kH};function cT(r,e){return e?r?function(){return jn(rr(r)?r.call(this,this):r,rr(e)?e.call(this,this):e)}:e:r}function kH(r,e){return ad(gx(r),gx(e))}function gx(r){if(Jt(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function xi(r,e){return r?[...new Set([].concat(r,e))]:e}function ad(r,e){return r?jn(Object.create(null),r,e):e}function fT(r,e){return r?Jt(r)&&Jt(e)?[...new Set([...r,...e])]:jn(Object.create(null),lT(r),lT(e??{})):e}function LH(r,e){if(!r)return e;if(!e)return r;const t=jn(Object.create(null),r);for(const n in e)t[n]=xi(r[n],e[n]);return t}function HR(){return{app:null,config:{isNativeTag:y9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IH=0;function OH(r,e){return function(n,i=null){rr(n)||(n=jn({},n)),i!=null&&!Gr(i)&&(i=null);const a=HR(),o=new WeakSet;let s=!1;const l=a.app={_uid:IH++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:gV,get config(){return a.config},set config(u){},use(u,...c){return o.has(u)||(u&&rr(u.install)?(o.add(u),u.install(l,...c)):rr(u)&&(o.add(u),u(l,...c))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,c){return c?(a.components[u]=c,l):a.components[u]},directive(u,c){return c?(a.directives[u]=c,l):a.directives[u]},mount(u,c,f){if(!s){const h=St(n,i);return h.appContext=a,f===!0?f="svg":f===!1&&(f=void 0),c&&e?e(h,u):r(h,u,f),s=!0,l._container=u,u.__vue_app__=l,dy(h.component)}},unmount(){s&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,c){return a.provides[u]=c,l},runWithContext(u){const c=yf;yf=l;try{return u()}finally{yf=c}}};return l}}let yf=null;function Ci(r,e){if(ci){let t=ci.provides;const n=ci.parent&&ci.parent.provides;n===t&&(t=ci.provides=Object.create(n)),t[r]=e}}function zr(r,e,t=!1){const n=ci||ri;if(n||yf){const i=yf?yf._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return t&&rr(e)?e.call(n&&n.proxy):e}}const VR={},YR=()=>Object.create(VR),XR=r=>Object.getPrototypeOf(r)===VR;function NH(r,e,t,n=!1){const i={},a=YR();r.propsDefaults=Object.create(null),KR(r,e,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);t?r.props=n?i:tH(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function $H(r,e,t,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=Br(i),[l]=r.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=r.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(fy(r.emitsOptions,h))continue;const d=e[h];if(l)if(Nr(a,h))d!==a[h]&&(a[h]=d,u=!0);else{const v=ao(h);i[v]=mx(l,s,v,d,r,!1)}else d!==a[h]&&(a[h]=d,u=!0)}}}else{KR(r,e,i,a)&&(u=!0);let c;for(const f in s)(!e||!Nr(e,f)&&((c=Kl(f))===f||!Nr(e,c)))&&(l?t&&(t[f]!==void 0||t[c]!==void 0)&&(i[f]=mx(l,s,f,void 0,r,!0)):delete i[f]);if(a!==s)for(const f in a)(!e||!Nr(e,f))&&(delete a[f],u=!0)}u&&Ns(r.attrs,"set","")}function KR(r,e,t,n){const[i,a]=r.propsOptions;let o=!1,s;if(e)for(let l in e){if(wd(l))continue;const u=e[l];let c;i&&Nr(i,c=ao(l))?!a||!a.includes(c)?t[c]=u:(s||(s={}))[c]=u:fy(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(a){const l=Br(t),u=s||sn;for(let c=0;c<a.length;c++){const f=a[c];t[f]=mx(i,l,f,u[f],r,!Nr(u,f))}}return o}function mx(r,e,t,n,i,a){const o=r[t];if(o!=null){const s=Nr(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rr(l)){const{propsDefaults:u}=i;if(t in u)n=u[t];else{const c=$v(i);n=u[t]=l.call(null,e),c()}}else n=l}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Kl(t))&&(n=!0))}return n}const DH=new WeakMap;function qR(r,e,t=!1){const n=t?DH:e.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let l=!1;if(!rr(r)){const c=f=>{l=!0;const[h,d]=qR(f,e,!0);jn(o,h),d&&s.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!a&&!l)return Gr(r)&&n.set(r,pf),pf;if(Jt(a))for(let c=0;c<a.length;c++){const f=ao(a[c]);hT(f)&&(o[f]=sn)}else if(a)for(const c in a){const f=ao(c);if(hT(f)){const h=a[c],d=o[f]=Jt(h)||rr(h)?{type:h}:jn({},h),v=d.type;let p=!1,g=!0;if(Jt(v))for(let m=0;m<v.length;++m){const y=v[m],w=rr(y)&&y.name;if(w==="Boolean"){p=!0;break}else w==="String"&&(g=!1)}else p=rr(v)&&v.name==="Boolean";d[0]=p,d[1]=g,(p||Nr(d,"default"))&&s.push(f)}}const u=[o,s];return Gr(r)&&n.set(r,u),u}function hT(r){return r[0]!=="$"&&!wd(r)}const ZR=r=>r[0]==="_"||r==="$stable",Q_=r=>Jt(r)?r.map(Lo):[Lo(r)],RH=(r,e,t)=>{if(e._n)return e;const n=Nt((...i)=>Q_(e(...i)),t);return n._c=!1,n},QR=(r,e,t)=>{const n=r._ctx;for(const i in r){if(ZR(i))continue;const a=r[i];if(rr(a))e[i]=RH(i,a,n);else if(a!=null){const o=Q_(a);e[i]=()=>o}}},JR=(r,e)=>{const t=Q_(e);r.slots.default=()=>t},e3=(r,e,t)=>{for(const n in e)(t||n!=="_")&&(r[n]=e[n])},PH=(r,e,t)=>{const n=r.slots=YR();if(r.vnode.shapeFlag&32){const i=e._;i?(e3(n,e,t),t&&oR(n,"_",i,!0)):QR(e,n)}else e&&JR(r,e)},FH=(r,e,t)=>{const{vnode:n,slots:i}=r;let a=!0,o=sn;if(n.shapeFlag&32){const s=e._;s?t&&s===1?a=!1:e3(i,e,t):(a=!e.$stable,QR(e,i)),o=e}else e&&(JR(r,e),o={default:1});if(a)for(const s in i)!ZR(s)&&o[s]==null&&delete i[s]};function yx(r,e,t,n,i=!1){if(Jt(r)){r.forEach((h,d)=>yx(h,e&&(Jt(e)?e[d]:e),t,n,i));return}if(Sd(n)&&!i)return;const a=n.shapeFlag&4?dy(n.component):n.el,o=i?null:a,{i:s,r:l}=r,u=e&&e.r,c=s.refs===sn?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(Sr(u)?(c[u]=null,Nr(f,u)&&(f[u]=null)):Un(u)&&(u.value=null)),rr(l))Rl(l,s,12,[o,c]);else{const h=Sr(l),d=Un(l);if(h||d){const v=()=>{if(r.f){const p=h?Nr(f,l)?f[l]:c[l]:l.value;i?Jt(p)&&$_(p,a):Jt(p)?p.includes(a)||p.push(a):h?(c[l]=[a],Nr(f,l)&&(f[l]=c[l])):(l.value=[a],r.k&&(c[r.k]=l.value))}else h?(c[l]=o,Nr(f,l)&&(f[l]=o)):d&&(l.value=o,r.k&&(c[r.k]=o))};o?(v.id=-1,Ii(v,t)):v()}}}const t3=Symbol("_vte"),BH=r=>r.__isTeleport,Ed=r=>r&&(r.disabled||r.disabled===""),dT=r=>typeof SVGElement<"u"&&r instanceof SVGElement,vT=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,bx=(r,e)=>{const t=r&&r.to;return Sr(t)?e?e(t):null:t},zH={name:"Teleport",__isTeleport:!0,process(r,e,t,n,i,a,o,s,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:v,createText:p,createComment:g}}=u,m=Ed(e.props);let{shapeFlag:y,children:w,dynamicChildren:b}=e;if(r==null){const x=e.el=p(""),S=e.anchor=p("");d(x,t,n),d(S,t,n);const _=e.target=bx(e.props,v),M=n3(_,e,p,d);_&&(o==="svg"||dT(_)?o="svg":(o==="mathml"||vT(_))&&(o="mathml"));const A=(E,T)=>{y&16&&c(w,E,T,i,a,o,s,l)};m?A(t,S):_&&A(_,M)}else{e.el=r.el,e.targetStart=r.targetStart;const x=e.anchor=r.anchor,S=e.target=r.target,_=e.targetAnchor=r.targetAnchor,M=Ed(r.props),A=M?t:S,E=M?x:_;if(o==="svg"||dT(S)?o="svg":(o==="mathml"||vT(S))&&(o="mathml"),b?(h(r.dynamicChildren,b,A,i,a,o,s),J_(r,e,!0)):l||f(r,e,A,E,i,a,o,s,!1),m)M?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):eg(e,t,x,u,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const T=e.target=bx(e.props,v);T&&eg(e,T,null,u,0)}else M&&eg(e,S,_,u,1)}r3(e)},remove(r,e,t,{um:n,o:{remove:i}},a){const{shapeFlag:o,children:s,anchor:l,targetStart:u,targetAnchor:c,target:f,props:h}=r;if(f&&(i(u),i(c)),a&&i(l),o&16){const d=a||!Ed(h);for(let v=0;v<s.length;v++){const p=s[v];n(p,e,t,d,!!p.dynamicChildren)}}},move:eg,hydrate:GH};function eg(r,e,t,{o:{insert:n},m:i},a=2){a===0&&n(r.targetAnchor,e,t);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=r,f=a===2;if(f&&n(o,e,t),(!f||Ed(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,t,2);f&&n(s,e,t)}function GH(r,e,t,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l,insert:u,createText:c}},f){const h=e.target=bx(e.props,l);if(h){const d=h._lpa||h.firstChild;if(e.shapeFlag&16)if(Ed(e.props))e.anchor=f(o(r),e,s(r),t,n,i,a),e.targetStart=d,e.targetAnchor=d&&o(d);else{e.anchor=o(r);let v=d;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}v=o(v)}e.targetAnchor||n3(h,e,c,u),f(d&&o(d),e,h,t,n,i,a)}r3(e)}return e.anchor&&o(e.anchor)}const jH=zH;function r3(r){const e=r.ctx;if(e&&e.ut){let t=r.children[0].el;for(;t&&t!==r.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}function n3(r,e,t,n){const i=e.targetStart=t(""),a=e.targetAnchor=t("");return i[t3]=a,r&&(n(i,r),n(a,r)),a}const Ii=nV;function UH(r){return WH(r)}function WH(r,e){const t=sR();t.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Pr,insertStaticContent:v}=r,p=(ee,ne,me,Fe=null,Re=null,$e=null,Ke=void 0,at=null,Me=!!ne.dynamicChildren)=>{if(ee===ne)return;ee&&!Fu(ee,ne)&&(Fe=ie(ee),j(ee,Re,$e,!0),ee=null),ne.patchFlag===-2&&(Me=!1,ne.dynamicChildren=null);const{type:J,ref:F,shapeFlag:be}=ne;switch(J){case ih:g(ee,ne,me,Fe);break;case Ei:m(ee,ne,me,Fe);break;case Lb:ee==null&&y(ne,me,Fe,Ke);break;case wn:C(ee,ne,me,Fe,Re,$e,Ke,at,Me);break;default:be&1?x(ee,ne,me,Fe,Re,$e,Ke,at,Me):be&6?k(ee,ne,me,Fe,Re,$e,Ke,at,Me):(be&64||be&128)&&J.process(ee,ne,me,Fe,Re,$e,Ke,at,Me,pe)}F!=null&&Re&&yx(F,ee&&ee.ref,$e,ne||ee,!ne)},g=(ee,ne,me,Fe)=>{if(ee==null)n(ne.el=s(ne.children),me,Fe);else{const Re=ne.el=ee.el;ne.children!==ee.children&&u(Re,ne.children)}},m=(ee,ne,me,Fe)=>{ee==null?n(ne.el=l(ne.children||""),me,Fe):ne.el=ee.el},y=(ee,ne,me,Fe)=>{[ee.el,ee.anchor]=v(ee.children,ne,me,Fe,ee.el,ee.anchor)},w=({el:ee,anchor:ne},me,Fe)=>{let Re;for(;ee&&ee!==ne;)Re=h(ee),n(ee,me,Fe),ee=Re;n(ne,me,Fe)},b=({el:ee,anchor:ne})=>{let me;for(;ee&&ee!==ne;)me=h(ee),i(ee),ee=me;i(ne)},x=(ee,ne,me,Fe,Re,$e,Ke,at,Me)=>{ne.type==="svg"?Ke="svg":ne.type==="math"&&(Ke="mathml"),ee==null?S(ne,me,Fe,Re,$e,Ke,at,Me):A(ee,ne,Re,$e,Ke,at,Me)},S=(ee,ne,me,Fe,Re,$e,Ke,at)=>{let Me,J;const{props:F,shapeFlag:be,transition:oe,dirs:X}=ee;if(Me=ee.el=o(ee.type,$e,F&&F.is,F),be&8?c(Me,ee.children):be&16&&M(ee.children,Me,null,Fe,Re,Tb(ee,$e),Ke,at),X&&Su(ee,null,Fe,"created"),_(Me,ee,ee.scopeId,Ke,Fe),F){for(const xe in F)xe!=="value"&&!wd(xe)&&a(Me,xe,null,F[xe],$e,Fe);"value"in F&&a(Me,"value",null,F.value,$e),(J=F.onVnodeBeforeMount)&&xo(J,Fe,ee)}X&&Su(ee,null,Fe,"beforeMount");const de=HH(Re,oe);de&&oe.beforeEnter(Me),n(Me,ne,me),((J=F&&F.onVnodeMounted)||de||X)&&Ii(()=>{J&&xo(J,Fe,ee),de&&oe.enter(Me),X&&Su(ee,null,Fe,"mounted")},Re)},_=(ee,ne,me,Fe,Re)=>{if(me&&d(ee,me),Fe)for(let $e=0;$e<Fe.length;$e++)d(ee,Fe[$e]);if(Re){let $e=Re.subTree;if(ne===$e){const Ke=Re.vnode;_(ee,Ke,Ke.scopeId,Ke.slotScopeIds,Re.parent)}}},M=(ee,ne,me,Fe,Re,$e,Ke,at,Me=0)=>{for(let J=Me;J<ee.length;J++){const F=ee[J]=at?Sl(ee[J]):Lo(ee[J]);p(null,F,ne,me,Fe,Re,$e,Ke,at)}},A=(ee,ne,me,Fe,Re,$e,Ke)=>{const at=ne.el=ee.el;let{patchFlag:Me,dynamicChildren:J,dirs:F}=ne;Me|=ee.patchFlag&16;const be=ee.props||sn,oe=ne.props||sn;let X;if(me&&_u(me,!1),(X=oe.onVnodeBeforeUpdate)&&xo(X,me,ne,ee),F&&Su(ne,ee,me,"beforeUpdate"),me&&_u(me,!0),(be.innerHTML&&oe.innerHTML==null||be.textContent&&oe.textContent==null)&&c(at,""),J?E(ee.dynamicChildren,J,at,me,Fe,Tb(ne,Re),$e):Ke||D(ee,ne,at,null,me,Fe,Tb(ne,Re),$e,!1),Me>0){if(Me&16)T(at,be,oe,me,Re);else if(Me&2&&be.class!==oe.class&&a(at,"class",null,oe.class,Re),Me&4&&a(at,"style",be.style,oe.style,Re),Me&8){const de=ne.dynamicProps;for(let xe=0;xe<de.length;xe++){const ke=de[xe],Ge=be[ke],vt=oe[ke];(vt!==Ge||ke==="value")&&a(at,ke,Ge,vt,Re,me)}}Me&1&&ee.children!==ne.children&&c(at,ne.children)}else!Ke&&J==null&&T(at,be,oe,me,Re);((X=oe.onVnodeUpdated)||F)&&Ii(()=>{X&&xo(X,me,ne,ee),F&&Su(ne,ee,me,"updated")},Fe)},E=(ee,ne,me,Fe,Re,$e,Ke)=>{for(let at=0;at<ne.length;at++){const Me=ee[at],J=ne[at],F=Me.el&&(Me.type===wn||!Fu(Me,J)||Me.shapeFlag&70)?f(Me.el):me;p(Me,J,F,null,Fe,Re,$e,Ke,!0)}},T=(ee,ne,me,Fe,Re)=>{if(ne!==me){if(ne!==sn)for(const $e in ne)!wd($e)&&!($e in me)&&a(ee,$e,ne[$e],null,Re,Fe);for(const $e in me){if(wd($e))continue;const Ke=me[$e],at=ne[$e];Ke!==at&&$e!=="value"&&a(ee,$e,at,Ke,Re,Fe)}"value"in me&&a(ee,"value",ne.value,me.value,Re)}},C=(ee,ne,me,Fe,Re,$e,Ke,at,Me)=>{const J=ne.el=ee?ee.el:s(""),F=ne.anchor=ee?ee.anchor:s("");let{patchFlag:be,dynamicChildren:oe,slotScopeIds:X}=ne;X&&(at=at?at.concat(X):X),ee==null?(n(J,me,Fe),n(F,me,Fe),M(ne.children||[],me,F,Re,$e,Ke,at,Me)):be>0&&be&64&&oe&&ee.dynamicChildren?(E(ee.dynamicChildren,oe,me,Re,$e,Ke,at),(ne.key!=null||Re&&ne===Re.subTree)&&J_(ee,ne,!0)):D(ee,ne,me,F,Re,$e,Ke,at,Me)},k=(ee,ne,me,Fe,Re,$e,Ke,at,Me)=>{ne.slotScopeIds=at,ee==null?ne.shapeFlag&512?Re.ctx.activate(ne,me,Fe,Ke,Me):L(ne,me,Fe,Re,$e,Ke,Me):I(ee,ne,Me)},L=(ee,ne,me,Fe,Re,$e,Ke)=>{const at=ee.component=uV(ee,Fe,Re);if(ly(ee)&&(at.ctx.renderer=pe),cV(at,!1,Ke),at.asyncDep){if(Re&&Re.registerDep(at,O,Ke),!ee.el){const Me=at.subTree=St(Ei);m(null,Me,ne,me)}}else O(at,ee,ne,me,Re,$e,Ke)},I=(ee,ne,me)=>{const Fe=ne.component=ee.component;if(eV(ee,ne,me))if(Fe.asyncDep&&!Fe.asyncResolved){N(Fe,ne,me);return}else Fe.next=ne,cH(Fe.update),Fe.effect.dirty=!0,Fe.update();else ne.el=ee.el,Fe.vnode=ne},O=(ee,ne,me,Fe,Re,$e,Ke)=>{const at=()=>{if(ee.isMounted){let{next:F,bu:be,u:oe,parent:X,vnode:de}=ee;{const Lt=i3(ee);if(Lt){F&&(F.el=de.el,N(ee,F,Ke)),Lt.asyncDep.then(()=>{ee.isUnmounted||at()});return}}let xe=F,ke;_u(ee,!1),F?(F.el=de.el,N(ee,F,Ke)):F=de,be&&u0(be),(ke=F.props&&F.props.onVnodeBeforeUpdate)&&xo(ke,X,F,de),_u(ee,!0);const Ge=kb(ee),vt=ee.subTree;ee.subTree=Ge,p(vt,Ge,f(vt.el),ie(vt),ee,Re,$e),F.el=Ge.el,xe===null&&tV(ee,Ge.el),oe&&Ii(oe,Re),(ke=F.props&&F.props.onVnodeUpdated)&&Ii(()=>xo(ke,X,F,de),Re)}else{let F;const{el:be,props:oe}=ne,{bm:X,m:de,parent:xe}=ee,ke=Sd(ne);if(_u(ee,!1),X&&u0(X),!ke&&(F=oe&&oe.onVnodeBeforeMount)&&xo(F,xe,ne),_u(ee,!0),be&&Je){const Ge=()=>{ee.subTree=kb(ee),Je(be,ee.subTree,ee,Re,null)};ke?ne.type.__asyncLoader().then(()=>!ee.isUnmounted&&Ge()):Ge()}else{const Ge=ee.subTree=kb(ee);p(null,Ge,me,Fe,ee,Re,$e),ne.el=Ge.el}if(de&&Ii(de,Re),!ke&&(F=oe&&oe.onVnodeMounted)){const Ge=ne;Ii(()=>xo(F,xe,Ge),Re)}(ne.shapeFlag&256||xe&&Sd(xe.vnode)&&xe.vnode.shapeFlag&256)&&ee.a&&Ii(ee.a,Re),ee.isMounted=!0,ne=me=Fe=null}},Me=ee.effect=new R_(at,Pr,()=>V_(J),ee.scope),J=ee.update=()=>{Me.dirty&&Me.run()};J.i=ee,J.id=ee.uid,_u(ee,!0),J()},N=(ee,ne,me)=>{ne.component=ee;const Fe=ee.vnode.props;ee.vnode=ne,ee.next=null,$H(ee,ne.props,Fe,me),FH(ee,ne.children,me),ql(),iT(ee),Zl()},D=(ee,ne,me,Fe,Re,$e,Ke,at,Me=!1)=>{const J=ee&&ee.children,F=ee?ee.shapeFlag:0,be=ne.children,{patchFlag:oe,shapeFlag:X}=ne;if(oe>0){if(oe&128){R(J,be,me,Fe,Re,$e,Ke,at,Me);return}else if(oe&256){$(J,be,me,Fe,Re,$e,Ke,at,Me);return}}X&8?(F&16&&Q(J,Re,$e),be!==J&&c(me,be)):F&16?X&16?R(J,be,me,Fe,Re,$e,Ke,at,Me):Q(J,Re,$e,!0):(F&8&&c(me,""),X&16&&M(be,me,Fe,Re,$e,Ke,at,Me))},$=(ee,ne,me,Fe,Re,$e,Ke,at,Me)=>{ee=ee||pf,ne=ne||pf;const J=ee.length,F=ne.length,be=Math.min(J,F);let oe;for(oe=0;oe<be;oe++){const X=ne[oe]=Me?Sl(ne[oe]):Lo(ne[oe]);p(ee[oe],X,me,null,Re,$e,Ke,at,Me)}J>F?Q(ee,Re,$e,!0,!1,be):M(ne,me,Fe,Re,$e,Ke,at,Me,be)},R=(ee,ne,me,Fe,Re,$e,Ke,at,Me)=>{let J=0;const F=ne.length;let be=ee.length-1,oe=F-1;for(;J<=be&&J<=oe;){const X=ee[J],de=ne[J]=Me?Sl(ne[J]):Lo(ne[J]);if(Fu(X,de))p(X,de,me,null,Re,$e,Ke,at,Me);else break;J++}for(;J<=be&&J<=oe;){const X=ee[be],de=ne[oe]=Me?Sl(ne[oe]):Lo(ne[oe]);if(Fu(X,de))p(X,de,me,null,Re,$e,Ke,at,Me);else break;be--,oe--}if(J>be){if(J<=oe){const X=oe+1,de=X<F?ne[X].el:Fe;for(;J<=oe;)p(null,ne[J]=Me?Sl(ne[J]):Lo(ne[J]),me,de,Re,$e,Ke,at,Me),J++}}else if(J>oe)for(;J<=be;)j(ee[J],Re,$e,!0),J++;else{const X=J,de=J,xe=new Map;for(J=de;J<=oe;J++){const jt=ne[J]=Me?Sl(ne[J]):Lo(ne[J]);jt.key!=null&&xe.set(jt.key,J)}let ke,Ge=0;const vt=oe-de+1;let Lt=!1,Kt=0;const Ct=new Array(vt);for(J=0;J<vt;J++)Ct[J]=0;for(J=X;J<=be;J++){const jt=ee[J];if(Ge>=vt){j(jt,Re,$e,!0);continue}let pr;if(jt.key!=null)pr=xe.get(jt.key);else for(ke=de;ke<=oe;ke++)if(Ct[ke-de]===0&&Fu(jt,ne[ke])){pr=ke;break}pr===void 0?j(jt,Re,$e,!0):(Ct[pr-de]=J+1,pr>=Kt?Kt=pr:Lt=!0,p(jt,ne[pr],me,null,Re,$e,Ke,at,Me),Ge++)}const zt=Lt?VH(Ct):pf;for(ke=zt.length-1,J=vt-1;J>=0;J--){const jt=de+J,pr=ne[jt],Ir=jt+1<F?ne[jt+1].el:Fe;Ct[J]===0?p(null,pr,me,Ir,Re,$e,Ke,at,Me):Lt&&(ke<0||J!==zt[ke]?B(pr,me,Ir,2):ke--)}}},B=(ee,ne,me,Fe,Re=null)=>{const{el:$e,type:Ke,transition:at,children:Me,shapeFlag:J}=ee;if(J&6){B(ee.component.subTree,ne,me,Fe);return}if(J&128){ee.suspense.move(ne,me,Fe);return}if(J&64){Ke.move(ee,ne,me,pe);return}if(Ke===wn){n($e,ne,me);for(let be=0;be<Me.length;be++)B(Me[be],ne,me,Fe);n(ee.anchor,ne,me);return}if(Ke===Lb){w(ee,ne,me);return}if(Fe!==2&&J&1&&at)if(Fe===0)at.beforeEnter($e),n($e,ne,me),Ii(()=>at.enter($e),Re);else{const{leave:be,delayLeave:oe,afterLeave:X}=at,de=()=>n($e,ne,me),xe=()=>{be($e,()=>{de(),X&&X()})};oe?oe($e,de,xe):xe()}else n($e,ne,me)},j=(ee,ne,me,Fe=!1,Re=!1)=>{const{type:$e,props:Ke,ref:at,children:Me,dynamicChildren:J,shapeFlag:F,patchFlag:be,dirs:oe,cacheIndex:X}=ee;if(be===-2&&(Re=!1),at!=null&&yx(at,null,me,ee,!0),X!=null&&(ne.renderCache[X]=void 0),F&256){ne.ctx.deactivate(ee);return}const de=F&1&&oe,xe=!Sd(ee);let ke;if(xe&&(ke=Ke&&Ke.onVnodeBeforeUnmount)&&xo(ke,ne,ee),F&6)W(ee.component,me,Fe);else{if(F&128){ee.suspense.unmount(me,Fe);return}de&&Su(ee,null,ne,"beforeUnmount"),F&64?ee.type.remove(ee,ne,me,pe,Fe):J&&!J.hasOnce&&($e!==wn||be>0&&be&64)?Q(J,ne,me,!1,!0):($e===wn&&be&384||!Re&&F&16)&&Q(Me,ne,me),Fe&&G(ee)}(xe&&(ke=Ke&&Ke.onVnodeUnmounted)||de)&&Ii(()=>{ke&&xo(ke,ne,ee),de&&Su(ee,null,ne,"unmounted")},me)},G=ee=>{const{type:ne,el:me,anchor:Fe,transition:Re}=ee;if(ne===wn){z(me,Fe);return}if(ne===Lb){b(ee);return}const $e=()=>{i(me),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(ee.shapeFlag&1&&Re&&!Re.persisted){const{leave:Ke,delayLeave:at}=Re,Me=()=>Ke(me,$e);at?at(ee.el,$e,Me):Me()}else $e()},z=(ee,ne)=>{let me;for(;ee!==ne;)me=h(ee),i(ee),ee=me;i(ne)},W=(ee,ne,me)=>{const{bum:Fe,scope:Re,update:$e,subTree:Ke,um:at,m:Me,a:J}=ee;pT(Me),pT(J),Fe&&u0(Fe),Re.stop(),$e&&($e.active=!1,j(Ke,ee,ne,me)),at&&Ii(at,ne),Ii(()=>{ee.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&ee.asyncDep&&!ee.asyncResolved&&ee.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},Q=(ee,ne,me,Fe=!1,Re=!1,$e=0)=>{for(let Ke=$e;Ke<ee.length;Ke++)j(ee[Ke],ne,me,Fe,Re)},ie=ee=>{if(ee.shapeFlag&6)return ie(ee.component.subTree);if(ee.shapeFlag&128)return ee.suspense.next();const ne=h(ee.anchor||ee.el),me=ne&&ne[t3];return me?h(me):ne};let se=!1;const ae=(ee,ne,me)=>{ee==null?ne._vnode&&j(ne._vnode,null,null,!0):p(ne._vnode||null,ee,ne,null,null,null,me),ne._vnode=ee,se||(se=!0,iT(),IR(),se=!1)},pe={p,um:j,m:B,r:G,mt:L,mc:M,pc:D,pbc:E,n:ie,o:r};let De,Je;return{render:ae,hydrate:De,createApp:OH(ae,De)}}function Tb({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function _u({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function HH(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function J_(r,e,t=!1){const n=r.children,i=e.children;if(Jt(n)&&Jt(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=Sl(i[a]),s.el=o.el),!t&&s.patchFlag!==-2&&J_(o,s)),s.type===ih&&(s.el=o.el)}}function VH(r){const e=r.slice(),t=[0];let n,i,a,o,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=t[t.length-1],r[i]<u){e[n]=i,t.push(n);continue}for(a=0,o=t.length-1;a<o;)s=a+o>>1,r[t[s]]<u?a=s+1:o=s;u<r[t[a]]&&(a>0&&(e[n]=t[a-1]),t[a]=n)}}for(a=t.length,o=t[a-1];a-- >0;)t[a]=o,o=e[o];return t}function i3(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:i3(e)}function pT(r){if(r)for(let e=0;e<r.length;e++)r[e].active=!1}const YH=Symbol.for("v-scx"),XH=()=>zr(YH);function a3(r,e){return eE(r,null,e)}const tg={};function qt(r,e,t){return eE(r,e,t)}function eE(r,e,{immediate:t,deep:n,flush:i,once:a,onTrack:o,onTrigger:s}=sn){if(e&&a){const S=e;e=(..._)=>{S(..._),x()}}const l=ci,u=S=>n===!0?S:Al(S,n===!1?1:void 0);let c,f=!1,h=!1;if(Un(r)?(c=()=>r.value,f=kf(r)):xd(r)?(c=()=>u(r),f=!0):Jt(r)?(h=!0,f=r.some(S=>xd(S)||kf(S)),c=()=>r.map(S=>{if(Un(S))return S.value;if(xd(S))return u(S);if(rr(S))return Rl(S,l,2)})):rr(r)?e?c=()=>Rl(r,l,2):c=()=>(d&&d(),Ca(r,l,3,[v])):c=Pr,e&&n){const S=c;c=()=>Al(S())}let d,v=S=>{d=w.onStop=()=>{Rl(S,l,4),d=w.onStop=void 0}},p;if(hy)if(v=Pr,e?t&&Ca(e,l,3,[c(),h?[]:void 0,v]):c(),i==="sync"){const S=XH();p=S.__watcherHandles||(S.__watcherHandles=[])}else return Pr;let g=h?new Array(r.length).fill(tg):tg;const m=()=>{if(!(!w.active||!w.dirty))if(e){const S=w.run();(n||f||(h?S.some((_,M)=>Bl(_,g[M])):Bl(S,g)))&&(d&&d(),Ca(e,l,3,[S,g===tg?void 0:h&&g[0]===tg?[]:g,v]),g=S)}else w.run()};m.allowRecurse=!!e;let y;i==="sync"?y=m:i==="post"?y=()=>Ii(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),y=()=>V_(m));const w=new R_(c,Pr,y),b=fR(),x=()=>{w.stop(),b&&$_(b.effects,w)};return e?t?m():g=w.run():i==="post"?Ii(w.run.bind(w),l&&l.suspense):w.run(),p&&p.push(x),x}function KH(r,e,t){const n=this.proxy,i=Sr(r)?r.includes(".")?o3(n,r):()=>n[r]:r.bind(n,n);let a;rr(e)?a=e:(a=e.handler,t=e);const o=$v(this),s=eE(i,a.bind(n),t);return o(),s}function o3(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function Al(r,e=1/0,t){if(e<=0||!Gr(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),e--,Un(r))Al(r.value,e,t);else if(Jt(r))for(let n=0;n<r.length;n++)Al(r[n],e,t);else if(iR(r)||gf(r))r.forEach(n=>{Al(n,e,t)});else if(j0(r)){for(const n in r)Al(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&Al(r[n],e,t)}return r}const qH=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${ao(e)}Modifiers`]||r[`${Kl(e)}Modifiers`];function ZH(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||sn;let i=t;const a=e.startsWith("update:"),o=a&&qH(n,e.slice(7));o&&(o.trim&&(i=t.map(c=>Sr(c)?c.trim():c)),o.number&&(i=t.map(_9)));let s,l=n[s=Eb(e)]||n[s=Eb(ao(e))];!l&&a&&(l=n[s=Eb(Kl(e))]),l&&Ca(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Ca(u,r,6,i)}}function s3(r,e,t=!1){const n=e.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!rr(r)){const l=u=>{const c=s3(u,e,!0);c&&(s=!0,jn(o,c))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(Gr(r)&&n.set(r,null),null):(Jt(a)?a.forEach(l=>o[l]=null):jn(o,a),Gr(r)&&n.set(r,o),o)}function fy(r,e){return!r||!ny(e)?!1:(e=e.slice(2).replace(/Once$/,""),Nr(r,e[0].toLowerCase()+e.slice(1))||Nr(r,Kl(e))||Nr(r,e))}function kb(r){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:f,data:h,setupState:d,ctx:v,inheritAttrs:p}=r,g=H0(r);let m,y;try{if(t.shapeFlag&4){const b=i||n,x=b;m=Lo(u.call(x,b,c,f,d,h,v)),y=s}else{const b=e;m=Lo(b.length>1?b(f,{attrs:s,slots:o,emit:l}):b(f,null)),y=e.props?s:QH(s)}}catch(b){Md.length=0,sy(b,r,1),m=St(Ei)}let w=m;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:x}=w;b.length&&x&7&&(a&&b.some(N_)&&(y=JH(y,a)),w=Fs(w,y,!1,!0))}return t.dirs&&(w=Fs(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),m=w,H0(g),m}const QH=r=>{let e;for(const t in r)(t==="class"||t==="style"||ny(t))&&((e||(e={}))[t]=r[t]);return e},JH=(r,e)=>{const t={};for(const n in r)(!N_(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function eV(r,e,t){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:l}=e,u=a.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?gT(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(o[h]!==n[h]&&!fy(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?gT(n,o,u):!0:!!o;return!1}function gT(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==r[a]&&!fy(t,a))return!0}return!1}function tV({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const rV=r=>r.__isSuspense;function nV(r,e){e&&e.pendingBranch?Jt(r)?e.effects.push(...r):e.effects.push(r):fH(r)}const wn=Symbol.for("v-fgt"),ih=Symbol.for("v-txt"),Ei=Symbol.for("v-cmt"),Lb=Symbol.for("v-stc"),Md=[];let ta=null;function We(r=!1){Md.push(ta=r?null:[])}function iV(){Md.pop(),ta=Md[Md.length-1]||null}let Zd=1;function mT(r){Zd+=r,r<0&&ta&&(ta.hasOnce=!0)}function l3(r){return r.dynamicChildren=Zd>0?ta||pf:null,iV(),Zd>0&&ta&&ta.push(r),r}function Mt(r,e,t,n,i,a){return l3(bt(r,e,t,n,i,a,!0))}function or(r,e,t,n,i){return l3(St(r,e,t,n,i,!0))}function Y0(r){return r?r.__v_isVNode===!0:!1}function Fu(r,e){return r.type===e.type&&r.key===e.key}const u3=({key:r})=>r??null,f0=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?Sr(r)||Un(r)||rr(r)?{i:ri,r,k:e,f:!!t}:r:null);function bt(r,e=null,t=null,n=0,i=null,a=r===wn?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&u3(e),ref:e&&f0(e),scopeId:NR,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ri};return s?(tE(l,t),a&128&&r.normalize(l)):t&&(l.shapeFlag|=Sr(t)?8:16),Zd>0&&!o&&ta&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ta.push(l),l}const St=aV;function aV(r,e=null,t=null,n=0,i=null,a=!1){if((!r||r===GR)&&(r=Ei),Y0(r)){const s=Fs(r,e,!0);return t&&tE(s,t),Zd>0&&!a&&ta&&(s.shapeFlag&6?ta[ta.indexOf(r)]=s:ta.push(s)),s.patchFlag=-2,s}if(vV(r)&&(r=r.__vccOpts),e){e=oV(e);let{class:s,style:l}=e;s&&!Sr(s)&&(e.class=dt(s)),Gr(l)&&(_R(l)&&!Jt(l)&&(l=jn({},l)),e.style=ln(l))}const o=Sr(r)?1:rV(r)?128:BH(r)?64:Gr(r)?4:rr(r)?2:0;return bt(r,e,t,n,i,o,a,!0)}function oV(r){return r?_R(r)||XR(r)?jn({},r):r:null}function Fs(r,e,t=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:l}=r,u=e?sa(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&u3(u),ref:e&&e.ref?t&&a?Jt(a)?a.concat(f0(e)):[a,f0(e)]:f0(e):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==wn?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Fs(r.ssContent),ssFallback:r.ssFallback&&Fs(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&Lf(c,l.clone(c)),c}function Ea(r=" ",e=0){return St(ih,null,r,e)}function Wt(r="",e=!1){return e?(We(),or(Ei,null,r)):St(Ei,null,r)}function Lo(r){return r==null||typeof r=="boolean"?St(Ei):Jt(r)?St(wn,null,r.slice()):typeof r=="object"?Sl(r):St(ih,null,String(r))}function Sl(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Fs(r)}function tE(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(Jt(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),tE(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!XR(e)?e._ctx=ri:i===3&&ri&&(ri.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else rr(e)?(e={default:e,_ctx:ri},t=32):(e=String(e),n&64?(t=16,e=[Ea(e)]):t=8);r.children=e,r.shapeFlag|=t}function sa(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=dt([e.class,n.class]));else if(i==="style")e.style=ln([e.style,n.style]);else if(ny(i)){const a=e[i],o=n[i];o&&a!==o&&!(Jt(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=n[i])}return e}function xo(r,e,t,n=null){Ca(r,e,7,[t,n])}const sV=HR();let lV=0;function uV(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||sV,a={uid:lV++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new O9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qR(n,i),emitsOptions:s3(n,i),emit:null,emitted:null,propsDefaults:sn,inheritAttrs:n.inheritAttrs,ctx:sn,data:sn,props:sn,attrs:sn,slots:sn,refs:sn,setupState:sn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=ZH.bind(null,a),r.ce&&r.ce(a),a}let ci=null;const ai=()=>ci||ri;let X0,wx;{const r=sR(),e=(t,n)=>{let i;return(i=r[t])||(i=r[t]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};X0=e("__VUE_INSTANCE_SETTERS__",t=>ci=t),wx=e("__VUE_SSR_SETTERS__",t=>hy=t)}const $v=r=>{const e=ci;return X0(r),r.scope.on(),()=>{r.scope.off(),X0(e)}},yT=()=>{ci&&ci.scope.off(),X0(null)};function c3(r){return r.vnode.shapeFlag&4}let hy=!1;function cV(r,e=!1,t=!1){e&&wx(e);const{props:n,children:i}=r.vnode,a=c3(r);NH(r,n,a,e),PH(r,i,t);const o=a?fV(r,e):void 0;return e&&wx(!1),o}function fV(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,EH);const{setup:n}=t;if(n){const i=r.setupContext=n.length>1?h3(r):null,a=$v(r);ql();const o=Rl(n,r,0,[r.props,i]);if(Zl(),a(),G0(o)){if(o.then(yT,yT),e)return o.then(s=>{bT(r,s,e)}).catch(s=>{sy(s,r,0)});r.asyncDep=o}else bT(r,o,e)}else f3(r,e)}function bT(r,e,t){rr(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Gr(e)&&(r.setupState=AR(e)),f3(r,t)}let wT;function f3(r,e,t){const n=r.type;if(!r.render){if(!e&&wT&&!n.render){const i=n.template||Z_(r).template;if(i){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=n,u=jn(jn({isCustomElement:a,delimiters:s},o),l);n.render=wT(i,u)}}r.render=n.render||Pr}{const i=$v(r);ql();try{CH(r)}finally{Zl(),i()}}}const hV={get(r,e){return Fi(r,"get",""),r[e]}};function h3(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,hV),slots:r.slots,emit:r.emit,expose:e}}function dy(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(AR(rH(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in _d)return _d[t](r)},has(e,t){return t in e||t in _d}})):r.proxy}function dV(r,e=!0){return rr(r)?r.displayName||r.name:r.name||e&&r.__name}function vV(r){return rr(r)&&"__vccOpts"in r}const Le=(r,e)=>nH(r,e,hy);function pV(r,e,t){const n=arguments.length;return n===2?Gr(e)&&!Jt(e)?Y0(e)?St(r,null,[e]):St(r,e):St(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Y0(t)&&(t=[t]),St(r,e,t))}const gV="3.4.38",mV=Pr;/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const yV="http://www.w3.org/2000/svg",bV="http://www.w3.org/1998/Math/MathML",_s=typeof document<"u"?document:null,xT=_s&&_s.createElement("template"),wV={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e==="svg"?_s.createElementNS(yV,r):e==="mathml"?_s.createElementNS(bV,r):t?_s.createElement(r,{is:t}):_s.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>_s.createTextNode(r),createComment:r=>_s.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>_s.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,i,a){const o=t?t.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===a||!(i=i.nextSibling)););else{xT.innerHTML=n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r;const s=xT.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},al="transition",Rh="animation",If=Symbol("_vtc"),rE=(r,{slots:e})=>pV(vH,v3(r),e);rE.displayName="Transition";const d3={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},xV=rE.props=jn({},DR,d3),Eu=(r,e=[])=>{Jt(r)?r.forEach(t=>t(...e)):r&&r(...e)},ST=r=>r?Jt(r)?r.some(e=>e.length>1):r.length>1:!1;function v3(r){const e={};for(const C in r)C in d3||(e[C]=r[C]);if(r.css===!1)return e;const{name:t="v",type:n,duration:i,enterFromClass:a=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:s=`${t}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=r,v=SV(i),p=v&&v[0],g=v&&v[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:w,onLeave:b,onLeaveCancelled:x,onBeforeAppear:S=m,onAppear:_=y,onAppearCancelled:M=w}=e,A=(C,k,L)=>{dl(C,k?c:s),dl(C,k?u:o),L&&L()},E=(C,k)=>{C._isLeaving=!1,dl(C,f),dl(C,d),dl(C,h),k&&k()},T=C=>(k,L)=>{const I=C?_:y,O=()=>A(k,C,L);Eu(I,[k,O]),_T(()=>{dl(k,C?l:a),Ss(k,C?c:s),ST(I)||ET(k,n,p,O)})};return jn(e,{onBeforeEnter(C){Eu(m,[C]),Ss(C,a),Ss(C,o)},onBeforeAppear(C){Eu(S,[C]),Ss(C,l),Ss(C,u)},onEnter:T(!1),onAppear:T(!0),onLeave(C,k){C._isLeaving=!0;const L=()=>E(C,k);Ss(C,f),Ss(C,h),g3(),_T(()=>{C._isLeaving&&(dl(C,f),Ss(C,d),ST(b)||ET(C,n,g,L))}),Eu(b,[C,L])},onEnterCancelled(C){A(C,!1),Eu(w,[C])},onAppearCancelled(C){A(C,!0),Eu(M,[C])},onLeaveCancelled(C){E(C),Eu(x,[C])}})}function SV(r){if(r==null)return null;if(Gr(r))return[Ib(r.enter),Ib(r.leave)];{const e=Ib(r);return[e,e]}}function Ib(r){return E9(r)}function Ss(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[If]||(r[If]=new Set)).add(e)}function dl(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const t=r[If];t&&(t.delete(e),t.size||(r[If]=void 0))}function _T(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let _V=0;function ET(r,e,t,n){const i=r._endId=++_V,a=()=>{i===r._endId&&n()};if(t)return setTimeout(a,t);const{type:o,timeout:s,propCount:l}=p3(r,e);if(!o)return n();const u=o+"end";let c=0;const f=()=>{r.removeEventListener(u,h),a()},h=d=>{d.target===r&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),r.addEventListener(u,h)}function p3(r,e){const t=window.getComputedStyle(r),n=v=>(t[v]||"").split(", "),i=n(`${al}Delay`),a=n(`${al}Duration`),o=MT(i,a),s=n(`${Rh}Delay`),l=n(`${Rh}Duration`),u=MT(s,l);let c=null,f=0,h=0;e===al?o>0&&(c=al,f=o,h=a.length):e===Rh?u>0&&(c=Rh,f=u,h=l.length):(f=Math.max(o,u),c=f>0?o>u?al:Rh:null,h=c?c===al?a.length:l.length:0);const d=c===al&&/\b(transform|all)(,|$)/.test(n(`${al}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function MT(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,n)=>CT(t)+CT(r[n])))}function CT(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function g3(){return document.body.offsetHeight}function EV(r,e,t){const n=r[If];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const K0=Symbol("_vod"),m3=Symbol("_vsh"),Qd={beforeMount(r,{value:e},{transition:t}){r[K0]=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):Ph(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(r),Ph(r,!0),n.enter(r)):n.leave(r,()=>{Ph(r,!1)}):Ph(r,e))},beforeUnmount(r,{value:e}){Ph(r,e)}};function Ph(r,e){r.style.display=e?r[K0]:"none",r[m3]=!e}const MV=Symbol(""),CV=/(^|;)\s*display\s*:/;function AV(r,e,t){const n=r.style,i=Sr(t);let a=!1;if(t&&!i){if(e)if(Sr(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();t[s]==null&&h0(n,s,"")}else for(const o in e)t[o]==null&&h0(n,o,"");for(const o in t)o==="display"&&(a=!0),h0(n,o,t[o])}else if(i){if(e!==t){const o=n[MV];o&&(t+=";"+o),n.cssText=t,a=CV.test(t)}}else e&&r.removeAttribute("style");K0 in r&&(r[K0]=a?n.display:"",r[m3]&&(n.display="none"))}const AT=/\s*!important$/;function h0(r,e,t){if(Jt(t))t.forEach(n=>h0(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=TV(r,e);AT.test(t)?r.setProperty(Kl(n),t.replace(AT,""),"important"):r[n]=t}}const TT=["Webkit","Moz","ms"],Ob={};function TV(r,e){const t=Ob[e];if(t)return t;let n=ao(e);if(n!=="filter"&&n in r)return Ob[e]=n;n=ay(n);for(let i=0;i<TT.length;i++){const a=TT[i]+n;if(a in r)return Ob[e]=a}return e}const kT="http://www.w3.org/1999/xlink";function LT(r,e,t,n,i,a=L9(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(kT,e.slice(6,e.length)):r.setAttributeNS(kT,e,t):t==null||a&&!lR(t)?r.removeAttribute(e):r.setAttribute(e,a?"":Ko(t)?String(t):t)}function kV(r,e,t,n){if(e==="innerHTML"||e==="textContent"){if(t==null)return;r[e]=t;return}const i=r.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?r.getAttribute("value")||"":r.value,s=t==null?"":String(t);(o!==s||!("_value"in r))&&(r.value=s),t==null&&r.removeAttribute(e),r._value=t;return}let a=!1;if(t===""||t==null){const o=typeof r[e];o==="boolean"?t=lR(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(e)}function y3(r,e,t,n){r.addEventListener(e,t,n)}function LV(r,e,t,n){r.removeEventListener(e,t,n)}const IT=Symbol("_vei");function IV(r,e,t,n,i=null){const a=r[IT]||(r[IT]={}),o=a[e];if(n&&o)o.value=n;else{const[s,l]=OV(e);if(n){const u=a[e]=DV(n,i);y3(r,s,u,l)}else o&&(LV(r,s,o,l),a[e]=void 0)}}const OT=/(?:Once|Passive|Capture)$/;function OV(r){let e;if(OT.test(r)){e={};let n;for(;n=r.match(OT);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Kl(r.slice(2)),e]}let Nb=0;const NV=Promise.resolve(),$V=()=>Nb||(NV.then(()=>Nb=0),Nb=Date.now());function DV(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Ca(RV(n,t.value),e,5,[n])};return t.value=r,t.attached=$V(),t}function RV(r,e){if(Jt(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const NT=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,PV=(r,e,t,n,i,a)=>{const o=i==="svg";e==="class"?EV(r,n,o):e==="style"?AV(r,t,n):ny(e)?N_(e)||IV(r,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FV(r,e,n,o))?(kV(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&LT(r,e,n,o,a,e!=="value")):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),LT(r,e,n,o))};function FV(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&NT(e)&&rr(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return NT(e)&&Sr(t)?!1:e in r}const b3=new WeakMap,w3=new WeakMap,q0=Symbol("_moveCb"),$T=Symbol("_enterCb"),x3={name:"TransitionGroup",props:jn({},xV,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=ai(),n=$R();let i,a;return X_(()=>{if(!i.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!UV(i[0].el,t.vnode.el,o))return;i.forEach(zV),i.forEach(GV);const s=i.filter(jV);g3(),s.forEach(l=>{const u=l.el,c=u.style;Ss(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const f=u[q0]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",f),u[q0]=null,dl(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=Br(r),s=v3(o);let l=o.tag||wn;if(i=[],a)for(let u=0;u<a.length;u++){const c=a[u];c.el&&c.el instanceof Element&&(i.push(c),Lf(c,qd(c,s,n,t)),b3.set(c,c.el.getBoundingClientRect()))}a=e.default?Y_(e.default()):[];for(let u=0;u<a.length;u++){const c=a[u];c.key!=null&&Lf(c,qd(c,s,n,t))}return St(l,null,a)}}},BV=r=>delete r.mode;x3.props;const S3=x3;function zV(r){const e=r.el;e[q0]&&e[q0](),e[$T]&&e[$T]()}function GV(r){w3.set(r,r.el.getBoundingClientRect())}function jV(r){const e=b3.get(r),t=w3.get(r),n=e.left-t.left,i=e.top-t.top;if(n||i){const a=r.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",r}}function UV(r,e,t){const n=r.cloneNode(),i=r[If];i&&i.forEach(s=>{s.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),t.split(/\s+/).forEach(s=>s&&n.classList.add(s)),n.style.display="none";const a=e.nodeType===1?e:e.parentNode;a.appendChild(n);const{hasTransform:o}=p3(n);return a.removeChild(n),o}const DT=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Jt(e)?t=>u0(e,t):e},$b=Symbol("_assign"),_3={created(r,{value:e},t){r.checked=U0(e,t.props.value),r[$b]=DT(t),y3(r,"change",()=>{r[$b](WV(r))})},beforeUpdate(r,{value:e,oldValue:t},n){r[$b]=DT(n),e!==t&&(r.checked=U0(e,n.props.value))}};function WV(r){return"_value"in r?r._value:r.value}const HV=["ctrl","shift","alt","meta"],VV={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>HV.some(t=>r[`${t}Key`]&&!e.includes(t))},Aa=(r,e)=>{const t=r._withMods||(r._withMods={}),n=e.join(".");return t[n]||(t[n]=(i,...a)=>{for(let o=0;o<e.length;o++){const s=VV[e[o]];if(s&&s(i,e))return}return r(i,...a)})},YV={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Jd=(r,e)=>{const t=r._withKeys||(r._withKeys={}),n=e.join(".");return t[n]||(t[n]=i=>{if(!("key"in i))return;const a=Kl(i.key);if(e.some(o=>o===a||YV[o]===a))return r(i)})},XV=jn({patchProp:PV},wV);let RT;function KV(){return RT||(RT=UH(XV))}const qV=(...r)=>{const e=KV().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=QV(n);if(!i)return;const a=e._component;!rr(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,ZV(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function ZV(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function QV(r){return Sr(r)?document.querySelector(r):r}const JV={className:"h-8 min-w-full bg-white"},e7={className:" flex  border-t px-5 py-2 shadow-md"},t7={className:"space-x-4 text-sm font-medium"},r7=_t({__name:"footer",props:{nodeSize:{}},setup(r){return(e,t)=>(We(),Mt("div",null,[bt("footer",JV,[bt("div",e7,[bt("p",t7,[bt("span",null,"节点："+xn(e.nodeSize),1)])])])]))}}),Es=(r,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const a=r==null?void 0:r(i);if(t===!1||!a)return e==null?void 0:e(i)};var PT;const Di=typeof window<"u",n7=r=>typeof r<"u",i7=r=>typeof r=="function",a7=r=>typeof r=="string",Z0=()=>{},o7=Di&&((PT=window==null?void 0:window.navigator)==null?void 0:PT.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Q0(r){return typeof r=="function"?r():U(r)}function s7(r,e){function t(...n){return new Promise((i,a)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(a)})}return t}function l7(r,e={}){let t,n,i=Z0;const a=s=>{clearTimeout(s),i(),i=Z0};return s=>{const l=Q0(r),u=Q0(e.maxWait);return t&&a(t),l<=0||u!==void 0&&u<=0?(n&&(a(n),n=null),Promise.resolve(s())):new Promise((c,f)=>{i=e.rejectOnCancel?f:c,u&&!n&&(n=setTimeout(()=>{t&&a(t),n=null,c(s())},u)),t=setTimeout(()=>{n&&a(n),n=null,c(s())},l)})}}function u7(r){return r}function nE(r){return fR()?($9(r),!0):!1}function c7(r,e=200,t={}){return s7(l7(e,t),r)}function f7(r,e=200,t={}){const n=ut(r.value),i=c7(()=>{n.value=r.value},e,t);return qt(r,()=>i()),n}function h7(r,e=!0){ai()?rn(r):e?r():Ln(r)}function Tl(r){var e;const t=Q0(r);return(e=t==null?void 0:t.$el)!=null?e:t}const iE=Di?window:void 0;function bf(...r){let e,t,n,i;if(a7(r[0])||Array.isArray(r[0])?([t,n,i]=r,e=iE):[e,t,n,i]=r,!e)return Z0;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(c=>c()),a.length=0},s=(c,f,h,d)=>(c.addEventListener(f,h,d),()=>c.removeEventListener(f,h,d)),l=qt(()=>[Tl(e),Q0(i)],([c,f])=>{o(),c&&a.push(...t.flatMap(h=>n.map(d=>s(c,h,d,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return nE(u),u}let FT=!1;function d7(r,e,t={}){const{window:n=iE,ignore:i=[],capture:a=!0,detectIframe:o=!1}=t;if(!n)return;o7&&!FT&&(FT=!0,Array.from(n.document.body.children).forEach(h=>h.addEventListener("click",Z0)));let s=!0;const l=h=>i.some(d=>{if(typeof d=="string")return Array.from(n.document.querySelectorAll(d)).some(v=>v===h.target||h.composedPath().includes(v));{const v=Tl(d);return v&&(h.target===v||h.composedPath().includes(v))}}),c=[bf(n,"click",h=>{const d=Tl(r);if(!(!d||d===h.target||h.composedPath().includes(d))){if(h.detail===0&&(s=!l(h)),!s){s=!0;return}e(h)}},{passive:!0,capture:a}),bf(n,"pointerdown",h=>{const d=Tl(r);d&&(s=!h.composedPath().includes(d)&&!l(h))},{passive:!0}),o&&bf(n,"blur",h=>{var d;const v=Tl(r);((d=n.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(v!=null&&v.contains(n.document.activeElement))&&e(h)})].filter(Boolean);return()=>c.forEach(h=>h())}function v7(r,e=!1){const t=ut(),n=()=>t.value=!!r();return n(),h7(n,e),t}function p7(r){return JSON.parse(JSON.stringify(r))}const BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zT="__vueuse_ssr_handlers__";BT[zT]=BT[zT]||{};var GT=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,m7=Object.prototype.propertyIsEnumerable,y7=(r,e)=>{var t={};for(var n in r)g7.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&GT)for(var n of GT(r))e.indexOf(n)<0&&m7.call(r,n)&&(t[n]=r[n]);return t};function E3(r,e,t={}){const n=t,{window:i=iE}=n,a=y7(n,["window"]);let o;const s=v7(()=>i&&"ResizeObserver"in i),l=()=>{o&&(o.disconnect(),o=void 0)},u=qt(()=>Tl(r),f=>{l(),s.value&&i&&f&&(o=new ResizeObserver(e),o.observe(f,a))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return nE(c),{isSupported:s,stop:c}}var jT;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(jT||(jT={}));var b7=Object.defineProperty,UT=Object.getOwnPropertySymbols,w7=Object.prototype.hasOwnProperty,x7=Object.prototype.propertyIsEnumerable,WT=(r,e,t)=>e in r?b7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S7=(r,e)=>{for(var t in e||(e={}))w7.call(e,t)&&WT(r,t,e[t]);if(UT)for(var t of UT(e))x7.call(e,t)&&WT(r,t,e[t]);return r};const _7={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};S7({linear:u7},_7);function E7(r,e,t,n={}){var i,a,o;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:f}=n,h=ai(),d=(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((o=(a=h==null?void 0:h.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let v=u;v=u||v||`update:${e.toString()}`;const p=m=>s?i7(s)?s(m):p7(m):m,g=()=>n7(r[e])?p(r[e]):f;if(l){const m=g(),y=ut(m);return qt(()=>r[e],w=>y.value=p(w)),qt(y,w=>{(w!==r[e]||c)&&d(v,w)},{deep:c}),y}else return Le({get(){return g()},set(m){d(v,m)}})}const M7=()=>Di&&/firefox/i.test(window.navigator.userAgent),aE=r=>{let e,t;return r.type==="touchend"?(t=r.changedTouches[0].clientY,e=r.changedTouches[0].clientX):r.type.startsWith("touch")?(t=r.touches[0].clientY,e=r.touches[0].clientX):(t=r.clientY,e=r.clientX),{clientX:e,clientY:t}};var M3=typeof global=="object"&&global&&global.Object===Object&&global,C7=typeof self=="object"&&self&&self.Object===Object&&self,lo=M3||C7||Function("return this")(),Ia=lo.Symbol,C3=Object.prototype,A7=C3.hasOwnProperty,T7=C3.toString,Fh=Ia?Ia.toStringTag:void 0;function k7(r){var e=A7.call(r,Fh),t=r[Fh];try{r[Fh]=void 0;var n=!0}catch{}var i=T7.call(r);return n&&(e?r[Fh]=t:delete r[Fh]),i}var L7=Object.prototype,I7=L7.toString;function O7(r){return I7.call(r)}var N7="[object Null]",$7="[object Undefined]",HT=Ia?Ia.toStringTag:void 0;function ah(r){return r==null?r===void 0?$7:N7:HT&&HT in Object(r)?k7(r):O7(r)}function zl(r){return r!=null&&typeof r=="object"}var D7="[object Symbol]";function vy(r){return typeof r=="symbol"||zl(r)&&ah(r)==D7}function R7(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var oo=Array.isArray,P7=1/0,VT=Ia?Ia.prototype:void 0,YT=VT?VT.toString:void 0;function A3(r){if(typeof r=="string")return r;if(oo(r))return R7(r,A3)+"";if(vy(r))return YT?YT.call(r):"";var e=r+"";return e=="0"&&1/r==-P7?"-0":e}var F7=/\s/;function B7(r){for(var e=r.length;e--&&F7.test(r.charAt(e)););return e}var z7=/^\s+/;function G7(r){return r&&r.slice(0,B7(r)+1).replace(z7,"")}function qo(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var XT=NaN,j7=/^[-+]0x[0-9a-f]+$/i,U7=/^0b[01]+$/i,W7=/^0o[0-7]+$/i,H7=parseInt;function KT(r){if(typeof r=="number")return r;if(vy(r))return XT;if(qo(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=qo(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=G7(r);var t=U7.test(r);return t||W7.test(r)?H7(r.slice(2),t?2:8):j7.test(r)?XT:+r}function V7(r){return r}var Y7="[object AsyncFunction]",X7="[object Function]",K7="[object GeneratorFunction]",q7="[object Proxy]";function T3(r){if(!qo(r))return!1;var e=ah(r);return e==X7||e==K7||e==Y7||e==q7}var Db=lo["__core-js_shared__"],qT=function(){var r=/[^.]+$/.exec(Db&&Db.keys&&Db.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Z7(r){return!!qT&&qT in r}var Q7=Function.prototype,J7=Q7.toString;function mc(r){if(r!=null){try{return J7.call(r)}catch{}try{return r+""}catch{}}return""}var eY=/[\\^$.*+?()[\]{}|]/g,tY=/^\[object .+?Constructor\]$/,rY=Function.prototype,nY=Object.prototype,iY=rY.toString,aY=nY.hasOwnProperty,oY=RegExp("^"+iY.call(aY).replace(eY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sY(r){if(!qo(r)||Z7(r))return!1;var e=T3(r)?oY:tY;return e.test(mc(r))}function lY(r,e){return r==null?void 0:r[e]}function yc(r,e){var t=lY(r,e);return sY(t)?t:void 0}var xx=yc(lo,"WeakMap"),ZT=Object.create,uY=function(){function r(){}return function(e){if(!qo(e))return{};if(ZT)return ZT(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();function cY(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function fY(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var hY=800,dY=16,vY=Date.now;function pY(r){var e=0,t=0;return function(){var n=vY(),i=dY-(n-t);if(t=n,i>0){if(++e>=hY)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function gY(r){return function(){return r}}var J0=function(){try{var r=yc(Object,"defineProperty");return r({},"",{}),r}catch{}}(),mY=J0?function(r,e){return J0(r,"toString",{configurable:!0,enumerable:!1,value:gY(e),writable:!0})}:V7,yY=pY(mY);function bY(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var wY=9007199254740991,xY=/^(?:0|[1-9]\d*)$/;function oE(r,e){var t=typeof r;return e=e??wY,!!e&&(t=="number"||t!="symbol"&&xY.test(r))&&r>-1&&r%1==0&&r<e}function k3(r,e,t){e=="__proto__"&&J0?J0(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function sE(r,e){return r===e||r!==r&&e!==e}var SY=Object.prototype,_Y=SY.hasOwnProperty;function lE(r,e,t){var n=r[e];(!(_Y.call(r,e)&&sE(n,t))||t===void 0&&!(e in r))&&k3(r,e,t)}function py(r,e,t,n){var i=!t;t||(t={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=void 0;l===void 0&&(l=r[s]),i?k3(t,s,l):lE(t,s,l)}return t}var QT=Math.max;function EY(r,e,t){return e=QT(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,a=QT(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=t(o),cY(r,this,s)}}var MY=9007199254740991;function uE(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=MY}function L3(r){return r!=null&&uE(r.length)&&!T3(r)}var CY=Object.prototype;function cE(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||CY;return r===t}function AY(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var TY="[object Arguments]";function JT(r){return zl(r)&&ah(r)==TY}var I3=Object.prototype,kY=I3.hasOwnProperty,LY=I3.propertyIsEnumerable,fE=JT(function(){return arguments}())?JT:function(r){return zl(r)&&kY.call(r,"callee")&&!LY.call(r,"callee")};function IY(){return!1}var O3=typeof aa=="object"&&aa&&!aa.nodeType&&aa,ek=O3&&typeof oa=="object"&&oa&&!oa.nodeType&&oa,OY=ek&&ek.exports===O3,tk=OY?lo.Buffer:void 0,NY=tk?tk.isBuffer:void 0,em=NY||IY,$Y="[object Arguments]",DY="[object Array]",RY="[object Boolean]",PY="[object Date]",FY="[object Error]",BY="[object Function]",zY="[object Map]",GY="[object Number]",jY="[object Object]",UY="[object RegExp]",WY="[object Set]",HY="[object String]",VY="[object WeakMap]",YY="[object ArrayBuffer]",XY="[object DataView]",KY="[object Float32Array]",qY="[object Float64Array]",ZY="[object Int8Array]",QY="[object Int16Array]",JY="[object Int32Array]",eX="[object Uint8Array]",tX="[object Uint8ClampedArray]",rX="[object Uint16Array]",nX="[object Uint32Array]",Jr={};Jr[KY]=Jr[qY]=Jr[ZY]=Jr[QY]=Jr[JY]=Jr[eX]=Jr[tX]=Jr[rX]=Jr[nX]=!0;Jr[$Y]=Jr[DY]=Jr[YY]=Jr[RY]=Jr[XY]=Jr[PY]=Jr[FY]=Jr[BY]=Jr[zY]=Jr[GY]=Jr[jY]=Jr[UY]=Jr[WY]=Jr[HY]=Jr[VY]=!1;function iX(r){return zl(r)&&uE(r.length)&&!!Jr[ah(r)]}function hE(r){return function(e){return r(e)}}var N3=typeof aa=="object"&&aa&&!aa.nodeType&&aa,Cd=N3&&typeof oa=="object"&&oa&&!oa.nodeType&&oa,aX=Cd&&Cd.exports===N3,Rb=aX&&M3.process,Of=function(){try{var r=Cd&&Cd.require&&Cd.require("util").types;return r||Rb&&Rb.binding&&Rb.binding("util")}catch{}}(),rk=Of&&Of.isTypedArray,$3=rk?hE(rk):iX,oX=Object.prototype,sX=oX.hasOwnProperty;function D3(r,e){var t=oo(r),n=!t&&fE(r),i=!t&&!n&&em(r),a=!t&&!n&&!i&&$3(r),o=t||n||i||a,s=o?AY(r.length,String):[],l=s.length;for(var u in r)(e||sX.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||oE(u,l)))&&s.push(u);return s}function R3(r,e){return function(t){return r(e(t))}}var lX=R3(Object.keys,Object),uX=Object.prototype,cX=uX.hasOwnProperty;function fX(r){if(!cE(r))return lX(r);var e=[];for(var t in Object(r))cX.call(r,t)&&t!="constructor"&&e.push(t);return e}function dE(r){return L3(r)?D3(r):fX(r)}function hX(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var dX=Object.prototype,vX=dX.hasOwnProperty;function pX(r){if(!qo(r))return hX(r);var e=cE(r),t=[];for(var n in r)n=="constructor"&&(e||!vX.call(r,n))||t.push(n);return t}function vE(r){return L3(r)?D3(r,!0):pX(r)}var gX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mX=/^\w*$/;function yX(r,e){if(oo(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||vy(r)?!0:mX.test(r)||!gX.test(r)||e!=null&&r in Object(e)}var ev=yc(Object,"create");function bX(){this.__data__=ev?ev(null):{},this.size=0}function wX(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var xX="__lodash_hash_undefined__",SX=Object.prototype,_X=SX.hasOwnProperty;function EX(r){var e=this.__data__;if(ev){var t=e[r];return t===xX?void 0:t}return _X.call(e,r)?e[r]:void 0}var MX=Object.prototype,CX=MX.hasOwnProperty;function AX(r){var e=this.__data__;return ev?e[r]!==void 0:CX.call(e,r)}var TX="__lodash_hash_undefined__";function kX(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=ev&&e===void 0?TX:e,this}function ic(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ic.prototype.clear=bX;ic.prototype.delete=wX;ic.prototype.get=EX;ic.prototype.has=AX;ic.prototype.set=kX;function LX(){this.__data__=[],this.size=0}function gy(r,e){for(var t=r.length;t--;)if(sE(r[t][0],e))return t;return-1}var IX=Array.prototype,OX=IX.splice;function NX(r){var e=this.__data__,t=gy(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():OX.call(e,t,1),--this.size,!0}function $X(r){var e=this.__data__,t=gy(e,r);return t<0?void 0:e[t][1]}function DX(r){return gy(this.__data__,r)>-1}function RX(r,e){var t=this.__data__,n=gy(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Us(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Us.prototype.clear=LX;Us.prototype.delete=NX;Us.prototype.get=$X;Us.prototype.has=DX;Us.prototype.set=RX;var tv=yc(lo,"Map");function PX(){this.size=0,this.__data__={hash:new ic,map:new(tv||Us),string:new ic}}function FX(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function my(r,e){var t=r.__data__;return FX(e)?t[typeof e=="string"?"string":"hash"]:t.map}function BX(r){var e=my(this,r).delete(r);return this.size-=e?1:0,e}function zX(r){return my(this,r).get(r)}function GX(r){return my(this,r).has(r)}function jX(r,e){var t=my(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Ws(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ws.prototype.clear=PX;Ws.prototype.delete=BX;Ws.prototype.get=zX;Ws.prototype.has=GX;Ws.prototype.set=jX;var UX="Expected a function";function pE(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(UX);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(pE.Cache||Ws),t}pE.Cache=Ws;var WX=500;function HX(r){var e=pE(r,function(n){return t.size===WX&&t.clear(),n}),t=e.cache;return e}var VX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,YX=/\\(\\)?/g,XX=HX(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(VX,function(t,n,i,a){e.push(i?a.replace(YX,"$1"):n||t)}),e});function KX(r){return r==null?"":A3(r)}function yy(r,e){return oo(r)?r:yX(r,e)?[r]:XX(KX(r))}var qX=1/0;function gE(r){if(typeof r=="string"||vy(r))return r;var e=r+"";return e=="0"&&1/r==-qX?"-0":e}function P3(r,e){e=yy(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[gE(e[t++])];return t&&t==n?r:void 0}function F3(r,e,t){var n=r==null?void 0:P3(r,e);return n===void 0?t:n}function mE(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var nk=Ia?Ia.isConcatSpreadable:void 0;function ZX(r){return oo(r)||fE(r)||!!(nk&&r&&r[nk])}function QX(r,e,t,n,i){var a=-1,o=r.length;for(t||(t=ZX),i||(i=[]);++a<o;){var s=r[a];t(s)?mE(i,s):i[i.length]=s}return i}function JX(r){var e=r==null?0:r.length;return e?QX(r):[]}function eK(r){return yY(EY(r,void 0,JX),r+"")}var B3=R3(Object.getPrototypeOf,Object);function Sx(){if(!arguments.length)return[];var r=arguments[0];return oo(r)?r:[r]}function tK(){this.__data__=new Us,this.size=0}function rK(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function nK(r){return this.__data__.get(r)}function iK(r){return this.__data__.has(r)}var aK=200;function oK(r,e){var t=this.__data__;if(t instanceof Us){var n=t.__data__;if(!tv||n.length<aK-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Ws(n)}return t.set(r,e),this.size=t.size,this}function Ds(r){var e=this.__data__=new Us(r);this.size=e.size}Ds.prototype.clear=tK;Ds.prototype.delete=rK;Ds.prototype.get=nK;Ds.prototype.has=iK;Ds.prototype.set=oK;function sK(r,e){return r&&py(e,dE(e),r)}function lK(r,e){return r&&py(e,vE(e),r)}var z3=typeof aa=="object"&&aa&&!aa.nodeType&&aa,ik=z3&&typeof oa=="object"&&oa&&!oa.nodeType&&oa,uK=ik&&ik.exports===z3,ak=uK?lo.Buffer:void 0,ok=ak?ak.allocUnsafe:void 0;function cK(r,e){if(e)return r.slice();var t=r.length,n=ok?ok(t):new r.constructor(t);return r.copy(n),n}function fK(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var o=r[t];e(o,t,r)&&(a[i++]=o)}return a}function G3(){return[]}var hK=Object.prototype,dK=hK.propertyIsEnumerable,sk=Object.getOwnPropertySymbols,yE=sk?function(r){return r==null?[]:(r=Object(r),fK(sk(r),function(e){return dK.call(r,e)}))}:G3;function vK(r,e){return py(r,yE(r),e)}var pK=Object.getOwnPropertySymbols,j3=pK?function(r){for(var e=[];r;)mE(e,yE(r)),r=B3(r);return e}:G3;function gK(r,e){return py(r,j3(r),e)}function U3(r,e,t){var n=e(r);return oo(r)?n:mE(n,t(r))}function _x(r){return U3(r,dE,yE)}function mK(r){return U3(r,vE,j3)}var Ex=yc(lo,"DataView"),Mx=yc(lo,"Promise"),Cx=yc(lo,"Set"),lk="[object Map]",yK="[object Object]",uk="[object Promise]",ck="[object Set]",fk="[object WeakMap]",hk="[object DataView]",bK=mc(Ex),wK=mc(tv),xK=mc(Mx),SK=mc(Cx),_K=mc(xx),Za=ah;(Ex&&Za(new Ex(new ArrayBuffer(1)))!=hk||tv&&Za(new tv)!=lk||Mx&&Za(Mx.resolve())!=uk||Cx&&Za(new Cx)!=ck||xx&&Za(new xx)!=fk)&&(Za=function(r){var e=ah(r),t=e==yK?r.constructor:void 0,n=t?mc(t):"";if(n)switch(n){case bK:return hk;case wK:return lk;case xK:return uk;case SK:return ck;case _K:return fk}return e});var EK=Object.prototype,MK=EK.hasOwnProperty;function CK(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&MK.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var tm=lo.Uint8Array;function bE(r){var e=new r.constructor(r.byteLength);return new tm(e).set(new tm(r)),e}function AK(r,e){var t=e?bE(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var TK=/\w*$/;function kK(r){var e=new r.constructor(r.source,TK.exec(r));return e.lastIndex=r.lastIndex,e}var dk=Ia?Ia.prototype:void 0,vk=dk?dk.valueOf:void 0;function LK(r){return vk?Object(vk.call(r)):{}}function IK(r,e){var t=e?bE(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var OK="[object Boolean]",NK="[object Date]",$K="[object Map]",DK="[object Number]",RK="[object RegExp]",PK="[object Set]",FK="[object String]",BK="[object Symbol]",zK="[object ArrayBuffer]",GK="[object DataView]",jK="[object Float32Array]",UK="[object Float64Array]",WK="[object Int8Array]",HK="[object Int16Array]",VK="[object Int32Array]",YK="[object Uint8Array]",XK="[object Uint8ClampedArray]",KK="[object Uint16Array]",qK="[object Uint32Array]";function ZK(r,e,t){var n=r.constructor;switch(e){case zK:return bE(r);case OK:case NK:return new n(+r);case GK:return AK(r,t);case jK:case UK:case WK:case HK:case VK:case YK:case XK:case KK:case qK:return IK(r,t);case $K:return new n;case DK:case FK:return new n(r);case RK:return kK(r);case PK:return new n;case BK:return LK(r)}}function QK(r){return typeof r.constructor=="function"&&!cE(r)?uY(B3(r)):{}}var JK="[object Map]";function eq(r){return zl(r)&&Za(r)==JK}var pk=Of&&Of.isMap,tq=pk?hE(pk):eq,rq="[object Set]";function nq(r){return zl(r)&&Za(r)==rq}var gk=Of&&Of.isSet,iq=gk?hE(gk):nq,aq=1,oq=2,sq=4,W3="[object Arguments]",lq="[object Array]",uq="[object Boolean]",cq="[object Date]",fq="[object Error]",H3="[object Function]",hq="[object GeneratorFunction]",dq="[object Map]",vq="[object Number]",V3="[object Object]",pq="[object RegExp]",gq="[object Set]",mq="[object String]",yq="[object Symbol]",bq="[object WeakMap]",wq="[object ArrayBuffer]",xq="[object DataView]",Sq="[object Float32Array]",_q="[object Float64Array]",Eq="[object Int8Array]",Mq="[object Int16Array]",Cq="[object Int32Array]",Aq="[object Uint8Array]",Tq="[object Uint8ClampedArray]",kq="[object Uint16Array]",Lq="[object Uint32Array]",qr={};qr[W3]=qr[lq]=qr[wq]=qr[xq]=qr[uq]=qr[cq]=qr[Sq]=qr[_q]=qr[Eq]=qr[Mq]=qr[Cq]=qr[dq]=qr[vq]=qr[V3]=qr[pq]=qr[gq]=qr[mq]=qr[yq]=qr[Aq]=qr[Tq]=qr[kq]=qr[Lq]=!0;qr[fq]=qr[H3]=qr[bq]=!1;function Ad(r,e,t,n,i,a){var o,s=e&aq,l=e&oq,u=e&sq;if(o!==void 0)return o;if(!qo(r))return r;var c=oo(r);if(c){if(o=CK(r),!s)return fY(r,o)}else{var f=Za(r),h=f==H3||f==hq;if(em(r))return cK(r,s);if(f==V3||f==W3||h&&!i){if(o=l||h?{}:QK(r),!s)return l?gK(r,lK(o,r)):vK(r,sK(o,r))}else{if(!qr[f])return i?r:{};o=ZK(r,f,s)}}a||(a=new Ds);var d=a.get(r);if(d)return d;a.set(r,o),iq(r)?r.forEach(function(g){o.add(Ad(g,e,t,g,r,a))}):tq(r)&&r.forEach(function(g,m){o.set(m,Ad(g,e,t,m,r,a))});var v=u?l?mK:_x:l?vE:dE,p=c?void 0:v(r);return bY(p||r,function(g,m){p&&(m=g,g=r[m]),lE(o,m,Ad(g,e,t,m,r,a))}),o}var Iq=4;function mk(r){return Ad(r,Iq)}var Oq=1,Nq=4;function yk(r){return Ad(r,Oq|Nq)}var $q="__lodash_hash_undefined__";function Dq(r){return this.__data__.set(r,$q),this}function Rq(r){return this.__data__.has(r)}function rm(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Ws;++e<t;)this.add(r[e])}rm.prototype.add=rm.prototype.push=Dq;rm.prototype.has=Rq;function Pq(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function Fq(r,e){return r.has(e)}var Bq=1,zq=2;function Y3(r,e,t,n,i,a){var o=t&Bq,s=r.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),c=a.get(e);if(u&&c)return u==e&&c==r;var f=-1,h=!0,d=t&zq?new rm:void 0;for(a.set(r,e),a.set(e,r);++f<s;){var v=r[f],p=e[f];if(n)var g=o?n(p,v,f,e,r,a):n(v,p,f,r,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!Pq(e,function(m,y){if(!Fq(d,y)&&(v===m||i(v,m,t,n,a)))return d.push(y)})){h=!1;break}}else if(!(v===p||i(v,p,t,n,a))){h=!1;break}}return a.delete(r),a.delete(e),h}function Gq(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function jq(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var Uq=1,Wq=2,Hq="[object Boolean]",Vq="[object Date]",Yq="[object Error]",Xq="[object Map]",Kq="[object Number]",qq="[object RegExp]",Zq="[object Set]",Qq="[object String]",Jq="[object Symbol]",eZ="[object ArrayBuffer]",tZ="[object DataView]",bk=Ia?Ia.prototype:void 0,Pb=bk?bk.valueOf:void 0;function rZ(r,e,t,n,i,a,o){switch(t){case tZ:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case eZ:return!(r.byteLength!=e.byteLength||!a(new tm(r),new tm(e)));case Hq:case Vq:case Kq:return sE(+r,+e);case Yq:return r.name==e.name&&r.message==e.message;case qq:case Qq:return r==e+"";case Xq:var s=Gq;case Zq:var l=n&Uq;if(s||(s=jq),r.size!=e.size&&!l)return!1;var u=o.get(r);if(u)return u==e;n|=Wq,o.set(r,e);var c=Y3(s(r),s(e),n,i,a,o);return o.delete(r),c;case Jq:if(Pb)return Pb.call(r)==Pb.call(e)}return!1}var nZ=1,iZ=Object.prototype,aZ=iZ.hasOwnProperty;function oZ(r,e,t,n,i,a){var o=t&nZ,s=_x(r),l=s.length,u=_x(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var h=s[f];if(!(o?h in e:aZ.call(e,h)))return!1}var d=a.get(r),v=a.get(e);if(d&&v)return d==e&&v==r;var p=!0;a.set(r,e),a.set(e,r);for(var g=o;++f<l;){h=s[f];var m=r[h],y=e[h];if(n)var w=o?n(y,m,h,e,r,a):n(m,y,h,r,e,a);if(!(w===void 0?m===y||i(m,y,t,n,a):w)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var b=r.constructor,x=e.constructor;b!=x&&"constructor"in r&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(p=!1)}return a.delete(r),a.delete(e),p}var sZ=1,wk="[object Arguments]",xk="[object Array]",rg="[object Object]",lZ=Object.prototype,Sk=lZ.hasOwnProperty;function uZ(r,e,t,n,i,a){var o=oo(r),s=oo(e),l=o?xk:Za(r),u=s?xk:Za(e);l=l==wk?rg:l,u=u==wk?rg:u;var c=l==rg,f=u==rg,h=l==u;if(h&&em(r)){if(!em(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new Ds),o||$3(r)?Y3(r,e,t,n,i,a):rZ(r,e,l,t,n,i,a);if(!(t&sZ)){var d=c&&Sk.call(r,"__wrapped__"),v=f&&Sk.call(e,"__wrapped__");if(d||v){var p=d?r.value():r,g=v?e.value():e;return a||(a=new Ds),i(p,g,t,n,a)}}return h?(a||(a=new Ds),oZ(r,e,t,n,i,a)):!1}function X3(r,e,t,n,i){return r===e?!0:r==null||e==null||!zl(r)&&!zl(e)?r!==r&&e!==e:uZ(r,e,t,n,X3,i)}function cZ(r,e){return r!=null&&e in Object(r)}function fZ(r,e,t){e=yy(e,r);for(var n=-1,i=e.length,a=!1;++n<i;){var o=gE(e[n]);if(!(a=r!=null&&t(r,o)))break;r=r[o]}return a||++n!=i?a:(i=r==null?0:r.length,!!i&&uE(i)&&oE(o,i)&&(oo(r)||fE(r)))}function hZ(r,e){return r!=null&&fZ(r,e,cZ)}var Fb=function(){return lo.Date.now()},dZ="Expected a function",vZ=Math.max,pZ=Math.min;function gZ(r,e,t){var n,i,a,o,s,l,u=0,c=!1,f=!1,h=!0;if(typeof r!="function")throw new TypeError(dZ);e=KT(e)||0,qo(t)&&(c=!!t.leading,f="maxWait"in t,a=f?vZ(KT(t.maxWait)||0,e):a,h="trailing"in t?!!t.trailing:h);function d(S){var _=n,M=i;return n=i=void 0,u=S,o=r.apply(M,_),o}function v(S){return u=S,s=setTimeout(m,e),c?d(S):o}function p(S){var _=S-l,M=S-u,A=e-_;return f?pZ(A,a-M):A}function g(S){var _=S-l,M=S-u;return l===void 0||_>=e||_<0||f&&M>=a}function m(){var S=Fb();if(g(S))return y(S);s=setTimeout(m,p(S))}function y(S){return s=void 0,h&&n?d(S):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function b(){return s===void 0?o:y(Fb())}function x(){var S=Fb(),_=g(S);if(n=arguments,i=this,l=S,_){if(s===void 0)return v(l);if(f)return clearTimeout(s),s=setTimeout(m,e),d(l)}return s===void 0&&(s=setTimeout(m,e)),o}return x.cancel=w,x.flush=b,x}function nm(r){for(var e=-1,t=r==null?0:r.length,n={};++e<t;){var i=r[e];n[i[0]]=i[1]}return n}function mZ(r,e){return X3(r,e)}function Wo(r){return r==null}function yZ(r){return r===void 0}function K3(r,e,t,n){if(!qo(r))return r;e=yy(e,r);for(var i=-1,a=e.length,o=a-1,s=r;s!=null&&++i<a;){var l=gE(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var c=s[l];u=void 0,u===void 0&&(u=qo(c)?c:oE(e[i+1])?[]:{})}lE(s,l,u),s=s[l]}return r}function bZ(r,e,t){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=P3(r,o);t(s,o)&&K3(a,yy(o,r),s)}return a}function wZ(r,e){return bZ(r,e,function(t,n){return hZ(r,n)})}var xZ=eK(function(r,e){return r==null?{}:wZ(r,e)});function SZ(r,e,t){return r==null?r:K3(r,e,t)}const _Z=r=>r===void 0,no=r=>typeof r=="boolean",Ta=r=>typeof r=="number",wf=r=>typeof Element>"u"?!1:r instanceof Element,_k=r=>Wo(r),EZ=r=>Sr(r)?!Number.isNaN(Number(r)):!1,MZ=r=>Object.entries(r),Bb=(r,e,t)=>({get value(){return F3(r,e,t)},set value(n){SZ(r,e,n)}});class CZ extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Dv(r,e){throw new CZ(`[${r}] ${e}`)}function ac(r,e="px"){if(!r)return"";if(Ta(r)||EZ(r))return`${r}${e}`;if(Sr(r))return r}/*! Element Plus Icons Vue v2.3.1 */var AZ=_t({name:"ArrowDown",__name:"arrow-down",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),TZ=AZ,kZ=_t({name:"Check",__name:"check",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),q3=kZ,LZ=_t({name:"CircleCheck",__name:"circle-check",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),bt("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),wE=LZ,IZ=_t({name:"CircleClose",__name:"circle-close",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),bt("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),xE=IZ,OZ=_t({name:"Close",__name:"close",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),SE=OZ,NZ=_t({name:"Delete",__name:"delete",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),$Z=NZ,DZ=_t({name:"Document",__name:"document",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),RZ=DZ,PZ=_t({name:"Download",__name:"download",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64z"})]))}}),FZ=PZ,BZ=_t({name:"FullScreen",__name:"full-screen",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),Ek=BZ,zZ=_t({name:"Hide",__name:"hide",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),bt("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),GZ=zZ,jZ=_t({name:"Loading",__name:"loading",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),_E=jZ,UZ=_t({name:"Menu",__name:"menu",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z"})]))}}),WZ=UZ,HZ=_t({name:"Pointer",__name:"pointer",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M511.552 128c-35.584 0-64.384 28.8-64.384 64.448v516.48L274.048 570.88a94.272 94.272 0 0 0-112.896-3.456 44.416 44.416 0 0 0-8.96 62.208L332.8 870.4A64 64 0 0 0 384 896h512V575.232a64 64 0 0 0-45.632-61.312l-205.952-61.76A96 96 0 0 1 576 360.192V192.448C576 156.8 547.2 128 511.552 128M359.04 556.8l24.128 19.2V192.448a128.448 128.448 0 1 1 256.832 0v167.744a32 32 0 0 0 22.784 30.656l206.016 61.76A128 128 0 0 1 960 575.232V896a64 64 0 0 1-64 64H384a128 128 0 0 1-102.4-51.2L101.056 668.032A108.416 108.416 0 0 1 128 512.512a158.272 158.272 0 0 1 185.984 8.32z"})]))}}),VZ=HZ,YZ=_t({name:"RefreshLeft",__name:"refresh-left",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),XZ=YZ,KZ=_t({name:"View",__name:"view",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),qZ=KZ,ZZ=_t({name:"WarningFilled",__name:"warning-filled",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),QZ=ZZ,JZ=_t({name:"ZoomIn",__name:"zoom-in",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),Z3=JZ,eQ=_t({name:"ZoomOut",__name:"zoom-out",setup(r){return(e,t)=>(We(),Mt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[bt("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),tQ=eQ;const Q3="__epPropKey",$t=r=>r,rQ=r=>Gr(r)&&!!r[Q3],by=(r,e)=>{if(!Gr(r)||rQ(r))return r;const{values:t,required:n,default:i,type:a,validator:o}=r,l={type:a,required:!!n,validator:t||o?u=>{let c=!1,f=[];if(t&&(f=Array.from(t),Nr(r,"default")&&f.push(i),c||(c=f.includes(u))),o&&(c||(c=o(u))),!c&&f.length>0){const h=[...new Set(f)].map(d=>JSON.stringify(d)).join(", ");mV(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[Q3]:!0};return Nr(r,"default")&&(l.default=i),l},Fr=r=>nm(Object.entries(r).map(([e,t])=>[e,by(t,e)])),ks=$t([String,Object,Function]),nQ={validating:_E,success:wE,error:xE},ca=(r,e)=>{if(r.install=t=>{for(const n of[r,...Object.values(e??{})])t.component(n.name,n)},e)for(const[t,n]of Object.entries(e))r[t]=n;return r},iQ=(r,e)=>(r.install=t=>{t.directive(e,r)},r),wy=r=>(r.install=Pr,r),eo={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Oa="update:modelValue",rv="change",Ax="input",xy=["","default","small","large"],aQ=r=>["",...xy].includes(r),oQ=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),im=r=>r,sQ=["class","style"],lQ=/^on[A-Z]/,uQ=(r={})=>{const{excludeListeners:e=!1,excludeKeys:t}=r,n=Le(()=>((t==null?void 0:t.value)||[]).concat(sQ)),i=ai();return Le(i?()=>{var a;return nm(Object.entries((a=i.proxy)==null?void 0:a.$attrs).filter(([o])=>!n.value.includes(o)&&!(e&&lQ.test(o))))}:()=>({}))},J3=({from:r,replacement:e,scope:t,version:n,ref:i,type:a="API"},o)=>{qt(()=>U(o),s=>{},{immediate:!0})};var cQ={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const fQ=r=>(e,t)=>hQ(e,t,U(r)),hQ=(r,e,t)=>F3(t,r,r).replace(/\{(\w+)\}/g,(n,i)=>{var a;return`${(a=e==null?void 0:e[i])!=null?a:`{${i}}`}`}),dQ=r=>{const e=Le(()=>U(r).name),t=Un(r)?r:ut(r);return{lang:e,locale:t,t:fQ(r)}},vQ=Symbol("localeContextKey"),EE=r=>{const e=zr(vQ,ut());return dQ(Le(()=>e.value||cQ))},zb="el",pQ="is-",Mu=(r,e,t,n,i)=>{let a=`${r}-${e}`;return t&&(a+=`-${t}`),n&&(a+=`__${n}`),i&&(a+=`--${i}`),a},gQ=Symbol("namespaceContextKey"),ME=r=>{const e=ai()?zr(gQ,ut(zb)):ut(zb);return Le(()=>U(e)||zb)},Wr=(r,e)=>{const t=ME();return{namespace:t,b:(p="")=>Mu(t.value,r,p,"",""),e:p=>p?Mu(t.value,r,"",p,""):"",m:p=>p?Mu(t.value,r,"","",p):"",be:(p,g)=>p&&g?Mu(t.value,r,p,g,""):"",em:(p,g)=>p&&g?Mu(t.value,r,"",p,g):"",bm:(p,g)=>p&&g?Mu(t.value,r,p,"",g):"",bem:(p,g,m)=>p&&g&&m?Mu(t.value,r,p,g,m):"",is:(p,...g)=>{const m=g.length>=1?g[0]:!0;return p&&m?`${pQ}${p}`:""},cssVar:p=>{const g={};for(const m in p)p[m]&&(g[`--${t.value}-${m}`]=p[m]);return g},cssVarName:p=>`--${t.value}-${p}`,cssVarBlock:p=>{const g={};for(const m in p)p[m]&&(g[`--${t.value}-${r}-${m}`]=p[m]);return g},cssVarBlockName:p=>`--${t.value}-${r}-${p}`}},mQ=by({type:$t(Boolean),default:null}),yQ=by({type:$t(Function)}),eP=r=>{const e=`update:${r}`,t=`onUpdate:${r}`,n=[e],i={[r]:mQ,[t]:yQ};return{useModelToggle:({indicator:o,toggleReason:s,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:f})=>{const h=ai(),{emit:d}=h,v=h.props,p=Le(()=>rr(v[t])),g=Le(()=>v[r]===null),m=_=>{o.value!==!0&&(o.value=!0,s&&(s.value=_),rr(c)&&c(_))},y=_=>{o.value!==!1&&(o.value=!1,s&&(s.value=_),rr(f)&&f(_))},w=_=>{if(v.disabled===!0||rr(u)&&!u())return;const M=p.value&&Di;M&&d(e,!0),(g.value||!M)&&m(_)},b=_=>{if(v.disabled===!0||!Di)return;const M=p.value&&Di;M&&d(e,!1),(g.value||!M)&&y(_)},x=_=>{no(_)&&(v.disabled&&_?p.value&&d(e,!1):o.value!==_&&(_?m():y()))},S=()=>{o.value?b():w()};return qt(()=>v[r],x),l&&h.appContext.config.globalProperties.$route!==void 0&&qt(()=>({...h.proxy.$route}),()=>{l.value&&o.value&&b()}),rn(()=>{x(v[r])}),{hide:b,show:w,toggle:S,hasUpdateHandler:p}},useModelToggleProps:i,useModelToggleEmits:n}};eP("modelValue");const tP=r=>{const e=ai();return Le(()=>{var t,n;return(n=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:n[r]})};var Ri="top",Na="bottom",$a="right",Pi="left",CE="auto",Rv=[Ri,Na,$a,Pi],Nf="start",nv="end",bQ="clippingParents",rP="viewport",Bh="popper",wQ="reference",Mk=Rv.reduce(function(r,e){return r.concat([e+"-"+Nf,e+"-"+nv])},[]),AE=[].concat(Rv,[CE]).reduce(function(r,e){return r.concat([e,e+"-"+Nf,e+"-"+nv])},[]),xQ="beforeRead",SQ="read",_Q="afterRead",EQ="beforeMain",MQ="main",CQ="afterMain",AQ="beforeWrite",TQ="write",kQ="afterWrite",LQ=[xQ,SQ,_Q,EQ,MQ,CQ,AQ,TQ,kQ];function Zo(r){return r?(r.nodeName||"").toLowerCase():null}function uo(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function $f(r){var e=uo(r).Element;return r instanceof e||r instanceof Element}function ka(r){var e=uo(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function TE(r){if(typeof ShadowRoot>"u")return!1;var e=uo(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function IQ(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!ka(a)||!Zo(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function OQ(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),s=o.reduce(function(l,u){return l[u]="",l},{});!ka(i)||!Zo(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var nP={name:"applyStyles",enabled:!0,phase:"write",fn:IQ,effect:OQ,requires:["computeStyles"]};function Ho(r){return r.split("-")[0]}var Ku=Math.max,am=Math.min,Df=Math.round;function Rf(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),n=1,i=1;if(ka(r)&&e){var a=r.offsetHeight,o=r.offsetWidth;o>0&&(n=Df(t.width)/o||1),a>0&&(i=Df(t.height)/a||1)}return{width:t.width/n,height:t.height/i,top:t.top/i,right:t.right/n,bottom:t.bottom/i,left:t.left/n,x:t.left/n,y:t.top/i}}function kE(r){var e=Rf(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function iP(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&TE(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Bs(r){return uo(r).getComputedStyle(r)}function NQ(r){return["table","td","th"].indexOf(Zo(r))>=0}function Jl(r){return(($f(r)?r.ownerDocument:r.document)||window.document).documentElement}function Sy(r){return Zo(r)==="html"?r:r.assignedSlot||r.parentNode||(TE(r)?r.host:null)||Jl(r)}function Ck(r){return!ka(r)||Bs(r).position==="fixed"?null:r.offsetParent}function $Q(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&ka(r)){var n=Bs(r);if(n.position==="fixed")return null}var i=Sy(r);for(TE(i)&&(i=i.host);ka(i)&&["html","body"].indexOf(Zo(i))<0;){var a=Bs(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Pv(r){for(var e=uo(r),t=Ck(r);t&&NQ(t)&&Bs(t).position==="static";)t=Ck(t);return t&&(Zo(t)==="html"||Zo(t)==="body"&&Bs(t).position==="static")?e:t||$Q(r)||e}function LE(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Td(r,e,t){return Ku(r,am(e,t))}function DQ(r,e,t){var n=Td(r,e,t);return n>t?t:n}function aP(){return{top:0,right:0,bottom:0,left:0}}function oP(r){return Object.assign({},aP(),r)}function sP(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var RQ=function(r,e){return r=typeof r=="function"?r(Object.assign({},e.rects,{placement:e.placement})):r,oP(typeof r!="number"?r:sP(r,Rv))};function PQ(r){var e,t=r.state,n=r.name,i=r.options,a=t.elements.arrow,o=t.modifiersData.popperOffsets,s=Ho(t.placement),l=LE(s),u=[Pi,$a].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var f=RQ(i.padding,t),h=kE(a),d=l==="y"?Ri:Pi,v=l==="y"?Na:$a,p=t.rects.reference[c]+t.rects.reference[l]-o[l]-t.rects.popper[c],g=o[l]-t.rects.reference[l],m=Pv(a),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,w=p/2-g/2,b=f[d],x=y-h[c]-f[v],S=y/2-h[c]/2+w,_=Td(b,S,x),M=l;t.modifiersData[n]=(e={},e[M]=_,e.centerOffset=_-S,e)}}function FQ(r){var e=r.state,t=r.options,n=t.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!iP(e.elements.popper,i)||(e.elements.arrow=i))}var BQ={name:"arrow",enabled:!0,phase:"main",fn:PQ,effect:FQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pf(r){return r.split("-")[1]}var zQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GQ(r){var e=r.x,t=r.y,n=window,i=n.devicePixelRatio||1;return{x:Df(e*i)/i||0,y:Df(t*i)/i||0}}function Ak(r){var e,t=r.popper,n=r.popperRect,i=r.placement,a=r.variation,o=r.offsets,s=r.position,l=r.gpuAcceleration,u=r.adaptive,c=r.roundOffsets,f=r.isFixed,h=o.x,d=h===void 0?0:h,v=o.y,p=v===void 0?0:v,g=typeof c=="function"?c({x:d,y:p}):{x:d,y:p};d=g.x,p=g.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),w=Pi,b=Ri,x=window;if(u){var S=Pv(t),_="clientHeight",M="clientWidth";if(S===uo(t)&&(S=Jl(t),Bs(S).position!=="static"&&s==="absolute"&&(_="scrollHeight",M="scrollWidth")),S=S,i===Ri||(i===Pi||i===$a)&&a===nv){b=Na;var A=f&&S===x&&x.visualViewport?x.visualViewport.height:S[_];p-=A-n.height,p*=l?1:-1}if(i===Pi||(i===Ri||i===Na)&&a===nv){w=$a;var E=f&&S===x&&x.visualViewport?x.visualViewport.width:S[M];d-=E-n.width,d*=l?1:-1}}var T=Object.assign({position:s},u&&zQ),C=c===!0?GQ({x:d,y:p}):{x:d,y:p};if(d=C.x,p=C.y,l){var k;return Object.assign({},T,(k={},k[b]=y?"0":"",k[w]=m?"0":"",k.transform=(x.devicePixelRatio||1)<=1?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",k))}return Object.assign({},T,(e={},e[b]=y?p+"px":"",e[w]=m?d+"px":"",e.transform="",e))}function jQ(r){var e=r.state,t=r.options,n=t.gpuAcceleration,i=n===void 0?!0:n,a=t.adaptive,o=a===void 0?!0:a,s=t.roundOffsets,l=s===void 0?!0:s,u={placement:Ho(e.placement),variation:Pf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ak(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ak(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var lP={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jQ,data:{}},ng={passive:!0};function UQ(r){var e=r.state,t=r.instance,n=r.options,i=n.scroll,a=i===void 0?!0:i,o=n.resize,s=o===void 0?!0:o,l=uo(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",t.update,ng)}),s&&l.addEventListener("resize",t.update,ng),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",t.update,ng)}),s&&l.removeEventListener("resize",t.update,ng)}}var uP={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:UQ,data:{}},WQ={left:"right",right:"left",bottom:"top",top:"bottom"};function d0(r){return r.replace(/left|right|bottom|top/g,function(e){return WQ[e]})}var HQ={start:"end",end:"start"};function Tk(r){return r.replace(/start|end/g,function(e){return HQ[e]})}function IE(r){var e=uo(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function OE(r){return Rf(Jl(r)).left+IE(r).scrollLeft}function VQ(r){var e=uo(r),t=Jl(r),n=e.visualViewport,i=t.clientWidth,a=t.clientHeight,o=0,s=0;return n&&(i=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:i,height:a,x:o+OE(r),y:s}}function YQ(r){var e,t=Jl(r),n=IE(r),i=(e=r.ownerDocument)==null?void 0:e.body,a=Ku(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Ku(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+OE(r),l=-n.scrollTop;return Bs(i||t).direction==="rtl"&&(s+=Ku(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function NE(r){var e=Bs(r),t=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+n)}function cP(r){return["html","body","#document"].indexOf(Zo(r))>=0?r.ownerDocument.body:ka(r)&&NE(r)?r:cP(Sy(r))}function kd(r,e){var t;e===void 0&&(e=[]);var n=cP(r),i=n===((t=r.ownerDocument)==null?void 0:t.body),a=uo(n),o=i?[a].concat(a.visualViewport||[],NE(n)?n:[]):n,s=e.concat(o);return i?s:s.concat(kd(Sy(o)))}function Tx(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function XQ(r){var e=Rf(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function kk(r,e){return e===rP?Tx(VQ(r)):$f(e)?XQ(e):Tx(YQ(Jl(r)))}function KQ(r){var e=kd(Sy(r)),t=["absolute","fixed"].indexOf(Bs(r).position)>=0,n=t&&ka(r)?Pv(r):r;return $f(n)?e.filter(function(i){return $f(i)&&iP(i,n)&&Zo(i)!=="body"}):[]}function qQ(r,e,t){var n=e==="clippingParents"?KQ(r):[].concat(e),i=[].concat(n,[t]),a=i[0],o=i.reduce(function(s,l){var u=kk(r,l);return s.top=Ku(u.top,s.top),s.right=am(u.right,s.right),s.bottom=am(u.bottom,s.bottom),s.left=Ku(u.left,s.left),s},kk(r,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function fP(r){var e=r.reference,t=r.element,n=r.placement,i=n?Ho(n):null,a=n?Pf(n):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,l;switch(i){case Ri:l={x:o,y:e.y-t.height};break;case Na:l={x:o,y:e.y+e.height};break;case $a:l={x:e.x+e.width,y:s};break;case Pi:l={x:e.x-t.width,y:s};break;default:l={x:e.x,y:e.y}}var u=i?LE(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case Nf:l[u]=l[u]-(e[c]/2-t[c]/2);break;case nv:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function iv(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=n===void 0?r.placement:n,a=t.boundary,o=a===void 0?bQ:a,s=t.rootBoundary,l=s===void 0?rP:s,u=t.elementContext,c=u===void 0?Bh:u,f=t.altBoundary,h=f===void 0?!1:f,d=t.padding,v=d===void 0?0:d,p=oP(typeof v!="number"?v:sP(v,Rv)),g=c===Bh?wQ:Bh,m=r.rects.popper,y=r.elements[h?g:c],w=qQ($f(y)?y:y.contextElement||Jl(r.elements.popper),o,l),b=Rf(r.elements.reference),x=fP({reference:b,element:m,strategy:"absolute",placement:i}),S=Tx(Object.assign({},m,x)),_=c===Bh?S:b,M={top:w.top-_.top+p.top,bottom:_.bottom-w.bottom+p.bottom,left:w.left-_.left+p.left,right:_.right-w.right+p.right},A=r.modifiersData.offset;if(c===Bh&&A){var E=A[i];Object.keys(M).forEach(function(T){var C=[$a,Na].indexOf(T)>=0?1:-1,k=[Ri,Na].indexOf(T)>=0?"y":"x";M[T]+=E[k]*C})}return M}function ZQ(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=t.boundary,a=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?AE:l,c=Pf(n),f=c?s?Mk:Mk.filter(function(v){return Pf(v)===c}):Rv,h=f.filter(function(v){return u.indexOf(v)>=0});h.length===0&&(h=f);var d=h.reduce(function(v,p){return v[p]=iv(r,{placement:p,boundary:i,rootBoundary:a,padding:o})[Ho(p)],v},{});return Object.keys(d).sort(function(v,p){return d[v]-d[p]})}function QQ(r){if(Ho(r)===CE)return[];var e=d0(r);return[Tk(r),e,Tk(e)]}function JQ(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,c=t.boundary,f=t.rootBoundary,h=t.altBoundary,d=t.flipVariations,v=d===void 0?!0:d,p=t.allowedAutoPlacements,g=e.options.placement,m=Ho(g),y=m===g,w=l||(y||!v?[d0(g)]:QQ(g)),b=[g].concat(w).reduce(function(z,W){return z.concat(Ho(W)===CE?ZQ(e,{placement:W,boundary:c,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:p}):W)},[]),x=e.rects.reference,S=e.rects.popper,_=new Map,M=!0,A=b[0],E=0;E<b.length;E++){var T=b[E],C=Ho(T),k=Pf(T)===Nf,L=[Ri,Na].indexOf(C)>=0,I=L?"width":"height",O=iv(e,{placement:T,boundary:c,rootBoundary:f,altBoundary:h,padding:u}),N=L?k?$a:Pi:k?Na:Ri;x[I]>S[I]&&(N=d0(N));var D=d0(N),$=[];if(a&&$.push(O[C]<=0),s&&$.push(O[N]<=0,O[D]<=0),$.every(function(z){return z})){A=T,M=!1;break}_.set(T,$)}if(M)for(var R=v?3:1,B=function(z){var W=b.find(function(Q){var ie=_.get(Q);if(ie)return ie.slice(0,z).every(function(se){return se})});if(W)return A=W,"break"},j=R;j>0;j--){var G=B(j);if(G==="break")break}e.placement!==A&&(e.modifiersData[n]._skip=!0,e.placement=A,e.reset=!0)}}var eJ={name:"flip",enabled:!0,phase:"main",fn:JQ,requiresIfExists:["offset"],data:{_skip:!1}};function Lk(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function Ik(r){return[Ri,$a,Na,Pi].some(function(e){return r[e]>=0})}function tJ(r){var e=r.state,t=r.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=iv(e,{elementContext:"reference"}),s=iv(e,{altBoundary:!0}),l=Lk(o,n),u=Lk(s,i,a),c=Ik(l),f=Ik(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var rJ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:tJ};function nJ(r,e,t){var n=Ho(r),i=[Pi,Ri].indexOf(n)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Pi,$a].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function iJ(r){var e=r.state,t=r.options,n=r.name,i=t.offset,a=i===void 0?[0,0]:i,o=AE.reduce(function(c,f){return c[f]=nJ(f,e.rects,a),c},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}var aJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iJ};function oJ(r){var e=r.state,t=r.name;e.modifiersData[t]=fP({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var hP={name:"popperOffsets",enabled:!0,phase:"read",fn:oJ,data:{}};function sJ(r){return r==="x"?"y":"x"}function lJ(r){var e=r.state,t=r.options,n=r.name,i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,f=t.padding,h=t.tether,d=h===void 0?!0:h,v=t.tetherOffset,p=v===void 0?0:v,g=iv(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),m=Ho(e.placement),y=Pf(e.placement),w=!y,b=LE(m),x=sJ(b),S=e.modifiersData.popperOffsets,_=e.rects.reference,M=e.rects.popper,A=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,E=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(S){if(a){var k,L=b==="y"?Ri:Pi,I=b==="y"?Na:$a,O=b==="y"?"height":"width",N=S[b],D=N+g[L],$=N-g[I],R=d?-M[O]/2:0,B=y===Nf?_[O]:M[O],j=y===Nf?-M[O]:-_[O],G=e.elements.arrow,z=d&&G?kE(G):{width:0,height:0},W=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:aP(),Q=W[L],ie=W[I],se=Td(0,_[O],z[O]),ae=w?_[O]/2-R-se-Q-E.mainAxis:B-se-Q-E.mainAxis,pe=w?-_[O]/2+R+se+ie+E.mainAxis:j+se+ie+E.mainAxis,De=e.elements.arrow&&Pv(e.elements.arrow),Je=De?b==="y"?De.clientTop||0:De.clientLeft||0:0,ee=(k=T==null?void 0:T[b])!=null?k:0,ne=N+ae-ee-Je,me=N+pe-ee,Fe=Td(d?am(D,ne):D,N,d?Ku($,me):$);S[b]=Fe,C[b]=Fe-N}if(s){var Re,$e=b==="x"?Ri:Pi,Ke=b==="x"?Na:$a,at=S[x],Me=x==="y"?"height":"width",J=at+g[$e],F=at-g[Ke],be=[Ri,Pi].indexOf(m)!==-1,oe=(Re=T==null?void 0:T[x])!=null?Re:0,X=be?J:at-_[Me]-M[Me]-oe+E.altAxis,de=be?at+_[Me]+M[Me]-oe-E.altAxis:F,xe=d&&be?DQ(X,at,de):Td(d?X:J,at,d?de:F);S[x]=xe,C[x]=xe-at}e.modifiersData[n]=C}}var uJ={name:"preventOverflow",enabled:!0,phase:"main",fn:lJ,requiresIfExists:["offset"]};function cJ(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function fJ(r){return r===uo(r)||!ka(r)?IE(r):cJ(r)}function hJ(r){var e=r.getBoundingClientRect(),t=Df(e.width)/r.offsetWidth||1,n=Df(e.height)/r.offsetHeight||1;return t!==1||n!==1}function dJ(r,e,t){t===void 0&&(t=!1);var n=ka(e),i=ka(e)&&hJ(e),a=Jl(e),o=Rf(r,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((Zo(e)!=="body"||NE(a))&&(s=fJ(e)),ka(e)?(l=Rf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=OE(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function vJ(r){var e=new Map,t=new Set,n=[];r.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var l=e.get(s);l&&i(l)}}),n.push(a)}return r.forEach(function(a){t.has(a.name)||i(a)}),n}function pJ(r){var e=vJ(r);return LQ.reduce(function(t,n){return t.concat(e.filter(function(i){return i.phase===n}))},[])}function gJ(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function mJ(r){var e=r.reduce(function(t,n){var i=t[n.name];return t[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var Ok={placement:"bottom",modifiers:[],strategy:"absolute"};function Nk(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function $E(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?Ok:i;return function(o,s,l){l===void 0&&(l=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ok,a),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},c=[],f=!1,h={state:u,setOptions:function(p){var g=typeof p=="function"?p(u.options):p;v(),u.options=Object.assign({},a,u.options,g),u.scrollParents={reference:$f(o)?kd(o):o.contextElement?kd(o.contextElement):[],popper:kd(s)};var m=pJ(mJ([].concat(n,u.options.modifiers)));return u.orderedModifiers=m.filter(function(y){return y.enabled}),d(),h.update()},forceUpdate:function(){if(!f){var p=u.elements,g=p.reference,m=p.popper;if(Nk(g,m)){u.rects={reference:dJ(g,Pv(m),u.options.strategy==="fixed"),popper:kE(m)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var w=u.orderedModifiers[y],b=w.fn,x=w.options,S=x===void 0?{}:x,_=w.name;typeof b=="function"&&(u=b({state:u,options:S,name:_,instance:h})||u)}}}},update:gJ(function(){return new Promise(function(p){h.forceUpdate(),p(u)})}),destroy:function(){v(),f=!0}};if(!Nk(o,s))return h;h.setOptions(l).then(function(p){!f&&l.onFirstUpdate&&l.onFirstUpdate(p)});function d(){u.orderedModifiers.forEach(function(p){var g=p.name,m=p.options,y=m===void 0?{}:m,w=p.effect;if(typeof w=="function"){var b=w({state:u,name:g,instance:h,options:y}),x=function(){};c.push(b||x)}})}function v(){c.forEach(function(p){return p()}),c=[]}return h}}$E();var yJ=[uP,hP,lP,nP];$E({defaultModifiers:yJ});var bJ=[uP,hP,lP,nP,aJ,eJ,uJ,BQ,rJ],wJ=$E({defaultModifiers:bJ});const xJ=(r,e,t={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=SJ(l);Object.assign(o.value,u)},requires:["computeStyles"]},i=Le(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:f}=U(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...f||[],n,{name:"applyStyles",enabled:!1}]}}),a=Uo(),o=ut({styles:{popper:{position:U(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return qt(i,l=>{const u=U(a);u&&u.setOptions(l)},{deep:!0}),qt([r,e],([l,u])=>{s(),!(!l||!u)&&(a.value=wJ(l,u,U(i)))}),ji(()=>{s()}),{state:Le(()=>{var l;return{...((l=U(a))==null?void 0:l.state)||{}}}),styles:Le(()=>U(o).styles),attributes:Le(()=>U(o).attributes),update:()=>{var l;return(l=U(a))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=U(a))==null?void 0:l.forceUpdate()},instanceRef:Le(()=>U(a))}};function SJ(r){const e=Object.keys(r.elements),t=nm(e.map(i=>[i,r.styles[i]||{}])),n=nm(e.map(i=>[i,r.attributes[i]]));return{styles:t,attributes:n}}function $k(){let r;const e=(n,i)=>{t(),r=window.setTimeout(n,i)},t=()=>window.clearTimeout(r);return nE(()=>t()),{registerTimeout:e,cancelTimeout:t}}const Dk={prefix:Math.floor(Math.random()*1e4),current:0},_J=Symbol("elIdInjection"),dP=()=>ai()?zr(_J,Dk):Dk,_y=r=>{const e=dP(),t=ME();return Le(()=>U(r)||`${t.value}-id-${e.prefix}-${e.current++}`)};let rf=[];const Rk=r=>{const e=r;e.key===eo.esc&&rf.forEach(t=>t(e))},EJ=r=>{rn(()=>{rf.length===0&&document.addEventListener("keydown",Rk),Di&&rf.push(r)}),ji(()=>{rf=rf.filter(e=>e!==r),rf.length===0&&Di&&document.removeEventListener("keydown",Rk)})};let Pk;const vP=()=>{const r=ME(),e=dP(),t=Le(()=>`${r.value}-popper-container-${e.prefix}`),n=Le(()=>`#${t.value}`);return{id:t,selector:n}},MJ=r=>{const e=document.createElement("div");return e.id=r,document.body.appendChild(e),e},CJ=()=>{const{id:r,selector:e}=vP();return zR(()=>{Di&&!Pk&&!document.body.querySelector(e.value)&&(Pk=MJ(r.value))}),{id:r,selector:e}},AJ=Fr({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),TJ=({showAfter:r,hideAfter:e,autoClose:t,open:n,close:i})=>{const{registerTimeout:a}=$k(),{registerTimeout:o,cancelTimeout:s}=$k();return{onOpen:c=>{a(()=>{n(c);const f=U(t);Ta(f)&&f>0&&o(()=>{i(c)},f)},U(r))},onClose:c=>{s(),a(()=>{i(c)},U(e))}}},pP=Symbol("elForwardRef"),kJ=r=>{Ci(pP,{setForwardRef:t=>{r.value=t}})},LJ=r=>({mounted(e){r(e)},updated(e){r(e)},unmounted(){r(null)}}),Fk={current:0},Bk=ut(0),IJ=2e3,zk=Symbol("elZIndexContextKey"),OJ=Symbol("zIndexContextKey"),NJ=r=>{const e=ai()?zr(zk,Fk):Fk,t=ai()?zr(OJ,void 0):void 0,n=Le(()=>{const o=U(t);return Ta(o)?o:IJ}),i=Le(()=>n.value+Bk.value),a=()=>(e.current++,Bk.value=e.current,i.value);return!Di&&zr(zk),{initialZIndex:n,currentZIndex:i,nextZIndex:a}};function $J(r){let e;function t(){if(r.value==null)return;const{selectionStart:i,selectionEnd:a,value:o}=r.value;if(i==null||a==null)return;const s=o.slice(0,Math.max(0,i)),l=o.slice(Math.max(0,a));e={selectionStart:i,selectionEnd:a,value:o,beforeTxt:s,afterTxt:l}}function n(){if(r.value==null||e==null)return;const{value:i}=r.value,{beforeTxt:a,afterTxt:o,selectionStart:s}=e;if(a==null||o==null||s==null)return;let l=i.length;if(i.endsWith(o))l=i.length-o.length;else if(i.startsWith(a))l=a.length;else{const u=a[s-1],c=i.indexOf(u,s-1);c!==-1&&(l=c+1)}r.value.setSelectionRange(l,l)}return[t,n]}const Fv=by({type:String,values:xy,required:!1}),DJ=Symbol("size"),RJ=()=>{const r=zr(DJ,{});return Le(()=>U(r.size)||"")};function gP(r,{beforeFocus:e,afterFocus:t,beforeBlur:n,afterBlur:i}={}){const a=ai(),{emit:o}=a,s=Uo(),l=ut(!1),u=h=>{rr(e)&&e(h)||l.value||(l.value=!0,o("focus",h),t==null||t())},c=h=>{var d;rr(n)&&n(h)||h.relatedTarget&&((d=s.value)!=null&&d.contains(h.relatedTarget))||(l.value=!1,o("blur",h),i==null||i())},f=()=>{var h,d;(h=s.value)!=null&&h.contains(document.activeElement)&&s.value!==document.activeElement||(d=r.value)==null||d.focus()};return qt(s,h=>{h&&h.setAttribute("tabindex","-1")}),bf(s,"focus",u,!0),bf(s,"blur",c,!0),bf(s,"click",f,!0),{isFocused:l,wrapperRef:s,handleFocus:u,handleBlur:c}}function PJ({afterComposition:r,emit:e}){const t=ut(!1),n=s=>{e==null||e("compositionstart",s),t.value=!0},i=s=>{var l;e==null||e("compositionupdate",s);const u=(l=s.target)==null?void 0:l.value,c=u[u.length-1]||"";t.value=!oQ(c)},a=s=>{e==null||e("compositionend",s),t.value&&(t.value=!1,Ln(()=>r(s)))};return{isComposing:t,handleComposition:s=>{s.type==="compositionend"?a(s):i(s)},handleCompositionStart:n,handleCompositionUpdate:i,handleCompositionEnd:a}}const FJ=Fr({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),oh=r=>xZ(FJ,r),BJ=Symbol(),Gk=ut();function zJ(r,e=void 0){const t=ai()?zr(BJ,Gk):Gk;return Le(()=>{var n,i;return(i=(n=t.value)==null?void 0:n[r])!=null?i:e})}var jr=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t};const GJ=Fr({size:{type:$t([Number,String])},color:{type:String}}),jJ=_t({name:"ElIcon",inheritAttrs:!1}),UJ=_t({...jJ,props:GJ,setup(r){const e=r,t=Wr("icon"),n=Le(()=>{const{size:i,color:a}=e;return!i&&!a?{}:{fontSize:_Z(i)?void 0:ac(i),"--color":a}});return(i,a)=>(We(),Mt("i",sa({class:U(t).b(),style:U(n)},i.$attrs),[fr(i.$slots,"default")],16))}});var WJ=jr(UJ,[["__file","icon.vue"]]);const dn=ca(WJ),sh=Symbol("formContextKey"),oc=Symbol("formItemContextKey"),bc=(r,e={})=>{const t=ut(void 0),n=e.prop?t:tP("size"),i=e.global?t:RJ(),a=e.form?{size:void 0}:zr(sh,void 0),o=e.formItem?{size:void 0}:zr(oc,void 0);return Le(()=>n.value||U(r)||(o==null?void 0:o.size)||(a==null?void 0:a.size)||i.value||"")},ts=r=>{const e=tP("disabled"),t=zr(sh,void 0);return Le(()=>e.value||U(r)||(t==null?void 0:t.disabled)||!1)},Bv=()=>{const r=zr(sh,void 0),e=zr(oc,void 0);return{form:r,formItem:e}},Ey=(r,{formItemContext:e,disableIdGeneration:t,disableIdManagement:n})=>{t||(t=ut(!1)),n||(n=ut(!1));const i=ut();let a;const o=Le(()=>{var s;return!!(!(r.label||r.ariaLabel)&&e&&e.inputIds&&((s=e.inputIds)==null?void 0:s.length)<=1)});return rn(()=>{a=qt([Do(r,"id"),t],([s,l])=>{const u=s??(l?void 0:_y().value);u!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(n!=null&&n.value)&&!l&&u&&e.addInputId(u)),i.value=u)},{immediate:!0})}),cy(()=>{a&&a(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}},HJ=Fr({size:{type:String,values:xy},disabled:Boolean}),VJ=Fr({...HJ,model:Object,rules:{type:$t(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),YJ={validate:(r,e,t)=>(Jt(r)||Sr(r))&&no(e)&&Sr(t)};function XJ(){const r=ut([]),e=Le(()=>{if(!r.value.length)return"0";const a=Math.max(...r.value);return a?`${a}px`:""});function t(a){const o=r.value.indexOf(a);return o===-1&&e.value,o}function n(a,o){if(a&&o){const s=t(o);r.value.splice(s,1,a)}else a&&r.value.push(a)}function i(a){const o=t(a);o>-1&&r.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:n,deregisterLabelWidth:i}}const ig=(r,e)=>{const t=Sx(e);return t.length>0?r.filter(n=>n.prop&&t.includes(n.prop)):r},KJ="ElForm",qJ=_t({name:KJ}),ZJ=_t({...qJ,props:VJ,emits:YJ,setup(r,{expose:e,emit:t}){const n=r,i=[],a=bc(),o=Wr("form"),s=Le(()=>{const{labelPosition:w,inline:b}=n;return[o.b(),o.m(a.value||"default"),{[o.m(`label-${w}`)]:w,[o.m("inline")]:b}]}),l=w=>i.find(b=>b.prop===w),u=w=>{i.push(w)},c=w=>{w.prop&&i.splice(i.indexOf(w),1)},f=(w=[])=>{n.model&&ig(i,w).forEach(b=>b.resetField())},h=(w=[])=>{ig(i,w).forEach(b=>b.clearValidate())},d=Le(()=>!!n.model),v=w=>{if(i.length===0)return[];const b=ig(i,w);return b.length?b:[]},p=async w=>m(void 0,w),g=async(w=[])=>{if(!d.value)return!1;const b=v(w);if(b.length===0)return!0;let x={};for(const S of b)try{await S.validate("")}catch(_){x={...x,..._}}return Object.keys(x).length===0?!0:Promise.reject(x)},m=async(w=[],b)=>{const x=!rr(b);try{const S=await g(w);return S===!0&&await(b==null?void 0:b(S)),S}catch(S){if(S instanceof Error)throw S;const _=S;return n.scrollToError&&y(Object.keys(_)[0]),await(b==null?void 0:b(!1,_)),x&&Promise.reject(_)}},y=w=>{var b;const x=ig(i,w)[0];x&&((b=x.$el)==null||b.scrollIntoView(n.scrollIntoViewOptions))};return qt(()=>n.rules,()=>{n.validateOnRuleChange&&p().catch(w=>void 0)},{deep:!0}),Ci(sh,Ql({...W_(n),emit:t,resetFields:f,clearValidate:h,validateField:m,getField:l,addField:u,removeField:c,...XJ()})),e({validate:p,validateField:m,resetFields:f,clearValidate:h,scrollToField:y,fields:i}),(w,b)=>(We(),Mt("form",{class:dt(U(s))},[fr(w.$slots,"default")],2))}});var QJ=jr(ZJ,[["__file","form.vue"]]);function Bu(){return Bu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Bu.apply(this,arguments)}function JJ(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,av(r,e)}function kx(r){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kx(r)}function av(r,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},av(r,e)}function eee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v0(r,e,t){return eee()?v0=Reflect.construct.bind():v0=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&av(u,o.prototype),u},v0.apply(null,arguments)}function tee(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Lx(r){var e=typeof Map=="function"?new Map:void 0;return Lx=function(n){if(n===null||!tee(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return v0(n,arguments,kx(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),av(i,n)},Lx(r)}var ree=/%[sdj%]/g,nee=function(){};function Ix(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function ra(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=0,a=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var o=r.replace(ree,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return s}});return o}return r}function iee(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Wn(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||iee(e)&&typeof r=="string"&&!r)}function aee(r,e,t){var n=[],i=0,a=r.length;function o(s){n.push.apply(n,s||[]),i++,i===a&&t(n)}r.forEach(function(s){e(s,o)})}function jk(r,e,t){var n=0,i=r.length;function a(o){if(o&&o.length){t(o);return}var s=n;n=n+1,s<i?e(r[s],a):t([])}a([])}function oee(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var Uk=function(r){JJ(e,r);function e(t,n){var i;return i=r.call(this,"Async Validation Error")||this,i.errors=t,i.fields=n,i}return e}(Lx(Error));function see(r,e,t,n,i){if(e.first){var a=new Promise(function(h,d){var v=function(m){return n(m),m.length?d(new Uk(m,Ix(m))):h(i)},p=oee(r);jk(p,t,v)});return a.catch(function(h){return h}),a}var o=e.firstFields===!0?Object.keys(r):e.firstFields||[],s=Object.keys(r),l=s.length,u=0,c=[],f=new Promise(function(h,d){var v=function(g){if(c.push.apply(c,g),u++,u===l)return n(c),c.length?d(new Uk(c,Ix(c))):h(i)};s.length||(n(c),h(i)),s.forEach(function(p){var g=r[p];o.indexOf(p)!==-1?jk(g,t,v):aee(g,t,v)})});return f.catch(function(h){return h}),f}function lee(r){return!!(r&&r.message!==void 0)}function uee(r,e){for(var t=r,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function Wk(r,e){return function(t){var n;return r.fullFields?n=uee(e,r.fullFields):n=e[t.field||r.fullField],lee(t)?(t.field=t.field||r.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||r.fullField}}}function Hk(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];typeof n=="object"&&typeof r[t]=="object"?r[t]=Bu({},r[t],n):r[t]=n}}return r}var mP=function(e,t,n,i,a,o){e.required&&(!n.hasOwnProperty(e.field)||Wn(t,o||e.type))&&i.push(ra(a.messages.required,e.fullField))},cee=function(e,t,n,i,a){(/^\s+$/.test(t)||t==="")&&i.push(ra(a.messages.whitespace,e.fullField))},ag,fee=function(){if(ag)return ag;var r="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+t+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+t+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+t+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+t+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+t+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+t+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+t+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),s=new RegExp("^"+i+"$"),l=function(b){return b&&b.exact?a:new RegExp("(?:"+e(b)+t+e(b)+")|(?:"+e(b)+i+e(b)+")","g")};l.v4=function(w){return w&&w.exact?o:new RegExp(""+e(w)+t+e(w),"g")},l.v6=function(w){return w&&w.exact?s:new RegExp(""+e(w)+i+e(w),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,h=l.v6().source,d="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',y="(?:"+u+"|www\\.)"+c+"(?:localhost|"+f+"|"+h+"|"+d+v+p+")"+g+m;return ag=new RegExp("(?:^"+y+"$)","i"),ag},Vk={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},od={integer:function(e){return od.number(e)&&parseInt(e,10)===e},float:function(e){return od.number(e)&&!od.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!od.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Vk.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(fee())},hex:function(e){return typeof e=="string"&&!!e.match(Vk.hex)}},hee=function(e,t,n,i,a){if(e.required&&t===void 0){mP(e,t,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?od[s](t)||i.push(ra(a.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&i.push(ra(a.messages.types[s],e.fullField,e.type))},dee=function(e,t,n,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,f=null,h=typeof t=="number",d=typeof t=="string",v=Array.isArray(t);if(h?f="number":d?f="string":v&&(f="array"),!f)return!1;v&&(c=t.length),d&&(c=t.replace(u,"_").length),o?c!==e.len&&i.push(ra(a.messages[f].len,e.fullField,e.len)):s&&!l&&c<e.min?i.push(ra(a.messages[f].min,e.fullField,e.min)):l&&!s&&c>e.max?i.push(ra(a.messages[f].max,e.fullField,e.max)):s&&l&&(c<e.min||c>e.max)&&i.push(ra(a.messages[f].range,e.fullField,e.min,e.max))},jc="enum",vee=function(e,t,n,i,a){e[jc]=Array.isArray(e[jc])?e[jc]:[],e[jc].indexOf(t)===-1&&i.push(ra(a.messages[jc],e.fullField,e[jc].join(", ")))},pee=function(e,t,n,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(ra(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(ra(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Rr={required:mP,whitespace:cee,type:hee,range:dee,enum:vee,pattern:pee},gee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t,"string")&&!e.required)return n();Rr.required(e,t,i,o,a,"string"),Wn(t,"string")||(Rr.type(e,t,i,o,a),Rr.range(e,t,i,o,a),Rr.pattern(e,t,i,o,a),e.whitespace===!0&&Rr.whitespace(e,t,i,o,a))}n(o)},mee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&Rr.type(e,t,i,o,a)}n(o)},yee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t===""&&(t=void 0),Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&(Rr.type(e,t,i,o,a),Rr.range(e,t,i,o,a))}n(o)},bee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&Rr.type(e,t,i,o,a)}n(o)},wee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),Wn(t)||Rr.type(e,t,i,o,a)}n(o)},xee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&(Rr.type(e,t,i,o,a),Rr.range(e,t,i,o,a))}n(o)},See=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&(Rr.type(e,t,i,o,a),Rr.range(e,t,i,o,a))}n(o)},_ee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t==null&&!e.required)return n();Rr.required(e,t,i,o,a,"array"),t!=null&&(Rr.type(e,t,i,o,a),Rr.range(e,t,i,o,a))}n(o)},Eee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&Rr.type(e,t,i,o,a)}n(o)},Mee="enum",Cee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a),t!==void 0&&Rr[Mee](e,t,i,o,a)}n(o)},Aee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t,"string")&&!e.required)return n();Rr.required(e,t,i,o,a),Wn(t,"string")||Rr.pattern(e,t,i,o,a)}n(o)},Tee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t,"date")&&!e.required)return n();if(Rr.required(e,t,i,o,a),!Wn(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),Rr.type(e,l,i,o,a),l&&Rr.range(e,l.getTime(),i,o,a)}}n(o)},kee=function(e,t,n,i,a){var o=[],s=Array.isArray(t)?"array":typeof t;Rr.required(e,t,i,o,a,s),n(o)},Gb=function(e,t,n,i,a){var o=e.type,s=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(Wn(t,o)&&!e.required)return n();Rr.required(e,t,i,s,a,o),Wn(t,o)||Rr.type(e,t,i,s,a)}n(s)},Lee=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Wn(t)&&!e.required)return n();Rr.required(e,t,i,o,a)}n(o)},Ld={string:gee,method:mee,number:yee,boolean:bee,regexp:wee,integer:xee,float:See,array:_ee,object:Eee,enum:Cee,pattern:Aee,date:Tee,url:Gb,hex:Gb,email:Gb,required:kee,any:Lee};function Ox(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Nx=Ox(),zv=function(){function r(t){this.rules=null,this._messages=Nx,this.define(t)}var e=r.prototype;return e.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var o=n[a];i.rules[a]=Array.isArray(o)?o:[o]})},e.messages=function(n){return n&&(this._messages=Hk(Ox(),n)),this._messages},e.validate=function(n,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,l=i,u=a;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(p){var g=[],m={};function y(b){if(Array.isArray(b)){var x;g=(x=g).concat.apply(x,b)}else g.push(b)}for(var w=0;w<p.length;w++)y(p[w]);g.length?(m=Ix(g),u(g,m)):u(null,s)}if(l.messages){var f=this.messages();f===Nx&&(f=Ox()),Hk(f,l.messages),l.messages=f}else l.messages=this.messages();var h={},d=l.keys||Object.keys(this.rules);d.forEach(function(p){var g=o.rules[p],m=s[p];g.forEach(function(y){var w=y;typeof w.transform=="function"&&(s===n&&(s=Bu({},s)),m=s[p]=w.transform(m)),typeof w=="function"?w={validator:w}:w=Bu({},w),w.validator=o.getValidationMethod(w),w.validator&&(w.field=p,w.fullField=w.fullField||p,w.type=o.getType(w),h[p]=h[p]||[],h[p].push({rule:w,value:m,source:s,field:p}))})});var v={};return see(h,l,function(p,g){var m=p.rule,y=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");y=y&&(m.required||!m.required&&p.value),m.field=p.field;function w(S,_){return Bu({},_,{fullField:m.fullField+"."+S,fullFields:m.fullFields?[].concat(m.fullFields,[S]):[S]})}function b(S){S===void 0&&(S=[]);var _=Array.isArray(S)?S:[S];!l.suppressWarning&&_.length&&r.warning("async-validator:",_),_.length&&m.message!==void 0&&(_=[].concat(m.message));var M=_.map(Wk(m,s));if(l.first&&M.length)return v[m.field]=1,g(M);if(!y)g(M);else{if(m.required&&!p.value)return m.message!==void 0?M=[].concat(m.message).map(Wk(m,s)):l.error&&(M=[l.error(m,ra(l.messages.required,m.field))]),g(M);var A={};m.defaultField&&Object.keys(p.value).map(function(C){A[C]=m.defaultField}),A=Bu({},A,p.rule.fields);var E={};Object.keys(A).forEach(function(C){var k=A[C],L=Array.isArray(k)?k:[k];E[C]=L.map(w.bind(null,C))});var T=new r(E);T.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),T.validate(p.value,p.rule.options||l,function(C){var k=[];M&&M.length&&k.push.apply(k,M),C&&C.length&&k.push.apply(k,C),g(k.length?k:null)})}}var x;if(m.asyncValidator)x=m.asyncValidator(m,p.value,b,p.source,l);else if(m.validator){try{x=m.validator(m,p.value,b,p.source,l)}catch(S){console.error==null||console.error(S),l.suppressValidatorError||setTimeout(function(){throw S},0),b(S.message)}x===!0?b():x===!1?b(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):x instanceof Array?b(x):x instanceof Error&&b(x.message)}x&&x.then&&x.then(function(){return b()},function(S){return b(S)})},function(p){c(p)},s)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!Ld.hasOwnProperty(n.type))throw new Error(ra("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?Ld.required:Ld[this.getType(n)]||void 0},r}();zv.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ld[e]=t};zv.warning=nee;zv.messages=Nx;zv.validators=Ld;const Iee=["","error","validating","success"],Oee=Fr({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:$t([String,Array])},required:{type:Boolean,default:void 0},rules:{type:$t([Object,Array])},error:String,validateStatus:{type:String,values:Iee},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:xy}}),Yk="ElLabelWrap";var Nee=_t({name:Yk,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:e}){const t=zr(sh,void 0),n=zr(oc);n||Dv(Yk,"usage: <el-form-item><label-wrap /></el-form-item>");const i=Wr("form"),a=ut(),o=ut(0),s=()=>{var c;if((c=a.value)!=null&&c.firstElementChild){const f=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},l=(c="update")=>{Ln(()=>{e.default&&r.isAutoWidth&&(c==="update"?o.value=s():c==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},u=()=>l("update");return rn(()=>{u()}),ji(()=>{l("remove")}),X_(()=>u()),qt(o,(c,f)=>{r.updateAll&&(t==null||t.registerLabelWidth(c,f))}),E3(Le(()=>{var c,f;return(f=(c=a.value)==null?void 0:c.firstElementChild)!=null?f:null}),u),()=>{var c,f;if(!e)return null;const{isAutoWidth:h}=r;if(h){const d=t==null?void 0:t.autoLabelWidth,v=n==null?void 0:n.hasLabel,p={};if(v&&d&&d!=="auto"){const g=Math.max(0,Number.parseInt(d,10)-o.value),y=(n.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";g&&(p[y]=`${g}px`)}return St("div",{ref:a,class:[i.be("item","label-wrap")],style:p},[(c=e.default)==null?void 0:c.call(e)])}else return St(wn,{ref:a},[(f=e.default)==null?void 0:f.call(e)])}}});const $ee=_t({name:"ElFormItem"}),Dee=_t({...$ee,props:Oee,setup(r,{expose:e}){const t=r,n=q_(),i=zr(sh,void 0),a=zr(oc,void 0),o=bc(void 0,{formItem:!1}),s=Wr("form-item"),l=_y().value,u=ut([]),c=ut(""),f=f7(c,100),h=ut(""),d=ut();let v,p=!1;const g=Le(()=>t.labelPosition||(i==null?void 0:i.labelPosition)),m=Le(()=>{if(g.value==="top")return{};const se=ac(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return se?{width:se}:{}}),y=Le(()=>{if(g.value==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const se=ac(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!n.label?{marginLeft:se}:{}}),w=Le(()=>[s.b(),s.m(o.value),s.is("error",c.value==="error"),s.is("validating",c.value==="validating"),s.is("success",c.value==="success"),s.is("required",I.value||t.required),s.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:i==null?void 0:i.statusIcon,[s.m(`label-${g.value}`)]:g.value}]),b=Le(()=>no(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),x=Le(()=>[s.e("error"),{[s.em("error","inline")]:b.value}]),S=Le(()=>t.prop?Sr(t.prop)?t.prop:t.prop.join("."):""),_=Le(()=>!!(t.label||n.label)),M=Le(()=>t.for||(u.value.length===1?u.value[0]:void 0)),A=Le(()=>!M.value&&_.value),E=!!a,T=Le(()=>{const se=i==null?void 0:i.model;if(!(!se||!t.prop))return Bb(se,t.prop).value}),C=Le(()=>{const{required:se}=t,ae=[];t.rules&&ae.push(...Sx(t.rules));const pe=i==null?void 0:i.rules;if(pe&&t.prop){const De=Bb(pe,t.prop).value;De&&ae.push(...Sx(De))}if(se!==void 0){const De=ae.map((Je,ee)=>[Je,ee]).filter(([Je])=>Object.keys(Je).includes("required"));if(De.length>0)for(const[Je,ee]of De)Je.required!==se&&(ae[ee]={...Je,required:se});else ae.push({required:se})}return ae}),k=Le(()=>C.value.length>0),L=se=>C.value.filter(pe=>!pe.trigger||!se?!0:Array.isArray(pe.trigger)?pe.trigger.includes(se):pe.trigger===se).map(({trigger:pe,...De})=>De),I=Le(()=>C.value.some(se=>se.required)),O=Le(()=>{var se;return f.value==="error"&&t.showMessage&&((se=i==null?void 0:i.showMessage)!=null?se:!0)}),N=Le(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),D=se=>{c.value=se},$=se=>{var ae,pe;const{errors:De,fields:Je}=se;(!De||!Je)&&console.error(se),D("error"),h.value=De?(pe=(ae=De==null?void 0:De[0])==null?void 0:ae.message)!=null?pe:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,h.value)},R=()=>{D("success"),i==null||i.emit("validate",t.prop,!0,"")},B=async se=>{const ae=S.value;return new zv({[ae]:se}).validate({[ae]:T.value},{firstFields:!0}).then(()=>(R(),!0)).catch(De=>($(De),Promise.reject(De)))},j=async(se,ae)=>{if(p||!t.prop)return!1;const pe=rr(ae);if(!k.value)return ae==null||ae(!1),!1;const De=L(se);return De.length===0?(ae==null||ae(!0),!0):(D("validating"),B(De).then(()=>(ae==null||ae(!0),!0)).catch(Je=>{const{fields:ee}=Je;return ae==null||ae(!1,ee),pe?!1:Promise.reject(ee)}))},G=()=>{D(""),h.value="",p=!1},z=async()=>{const se=i==null?void 0:i.model;if(!se||!t.prop)return;const ae=Bb(se,t.prop);p=!0,ae.value=mk(v),await Ln(),G(),p=!1},W=se=>{u.value.includes(se)||u.value.push(se)},Q=se=>{u.value=u.value.filter(ae=>ae!==se)};qt(()=>t.error,se=>{h.value=se||"",D(se?"error":"")},{immediate:!0}),qt(()=>t.validateStatus,se=>D(se||""));const ie=Ql({...W_(t),$el:d,size:o,validateState:c,labelId:l,inputIds:u,isGroup:A,hasLabel:_,fieldValue:T,addInputId:W,removeInputId:Q,resetField:z,clearValidate:G,validate:j});return Ci(oc,ie),rn(()=>{t.prop&&(i==null||i.addField(ie),v=mk(T.value))}),ji(()=>{i==null||i.removeField(ie)}),e({size:o,validateMessage:h,validateState:c,validate:j,clearValidate:G,resetField:z}),(se,ae)=>{var pe;return We(),Mt("div",{ref_key:"formItemRef",ref:d,class:dt(U(w)),role:U(A)?"group":void 0,"aria-labelledby":U(A)?U(l):void 0},[St(U(Nee),{"is-auto-width":U(m).width==="auto","update-all":((pe=U(i))==null?void 0:pe.labelWidth)==="auto"},{default:Nt(()=>[U(_)?(We(),or(_i(U(M)?"label":"div"),{key:0,id:U(l),for:U(M),class:dt(U(s).e("label")),style:ln(U(m))},{default:Nt(()=>[fr(se.$slots,"label",{label:U(N)},()=>[Ea(xn(U(N)),1)])]),_:3},8,["id","for","class","style"])):Wt("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),bt("div",{class:dt(U(s).e("content")),style:ln(U(y))},[fr(se.$slots,"default"),St(S3,{name:`${U(s).namespace.value}-zoom-in-top`},{default:Nt(()=>[U(O)?fr(se.$slots,"error",{key:0,error:h.value},()=>[bt("div",{class:dt(U(x))},xn(h.value),3)]):Wt("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var yP=jr(Dee,[["__file","form-item.vue"]]);const Ree=ca(QJ,{FormItem:yP}),Pee=wy(yP);let Ha;const Fee=`
  height:0 !important;
  visibility:hidden !important;
  ${M7()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Bee=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function zee(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),n=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Bee.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:n,borderSize:i,boxSizing:t}}function Xk(r,e=1,t){var n;Ha||(Ha=document.createElement("textarea"),document.body.appendChild(Ha));const{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=zee(r);Ha.setAttribute("style",`${s};${Fee}`),Ha.value=r.value||r.placeholder||"";let l=Ha.scrollHeight;const u={};o==="border-box"?l=l+a:o==="content-box"&&(l=l-i),Ha.value="";const c=Ha.scrollHeight-i;if(Ta(e)){let f=c*e;o==="border-box"&&(f=f+i+a),l=Math.max(f,l),u.minHeight=`${f}px`}if(Ta(t)){let f=c*t;o==="border-box"&&(f=f+i+a),l=Math.min(f,l)}return u.height=`${l}px`,(n=Ha.parentNode)==null||n.removeChild(Ha),Ha=void 0,u}const Gee=Fr({id:{type:String,default:void 0},size:Fv,disabled:Boolean,modelValue:{type:$t([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:$t([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:ks},prefixIcon:{type:ks},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:$t([Object,Array,String]),default:()=>im({})},autofocus:Boolean,rows:{type:Number,default:2},...oh(["ariaLabel"])}),jee={[Oa]:r=>Sr(r),input:r=>Sr(r),change:r=>Sr(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},Uee=_t({name:"ElInput",inheritAttrs:!1}),Wee=_t({...Uee,props:Gee,emits:jee,setup(r,{expose:e,emit:t}){const n=r,i=MH(),a=q_(),o=Le(()=>{const oe={};return n.containerRole==="combobox"&&(oe["aria-haspopup"]=i["aria-haspopup"],oe["aria-owns"]=i["aria-owns"],oe["aria-expanded"]=i["aria-expanded"]),oe}),s=Le(()=>[n.type==="textarea"?g.b():p.b(),p.m(d.value),p.is("disabled",v.value),p.is("exceed",G.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||n.prefixIcon,[p.m("suffix")]:a.suffix||n.suffixIcon||n.clearable||n.showPassword,[p.bm("suffix","password-clear")]:$.value&&R.value,[p.b("hidden")]:n.type==="hidden"},i.class]),l=Le(()=>[p.e("wrapper"),p.is("focus",A.value)]),u=uQ({excludeKeys:Le(()=>Object.keys(o.value))}),{form:c,formItem:f}=Bv(),{inputId:h}=Ey(n,{formItemContext:f}),d=bc(),v=ts(),p=Wr("input"),g=Wr("textarea"),m=Uo(),y=Uo(),w=ut(!1),b=ut(!1),x=ut(),S=Uo(n.inputStyle),_=Le(()=>m.value||y.value),{wrapperRef:M,isFocused:A,handleFocus:E,handleBlur:T}=gP(_,{afterBlur(){var oe;n.validateEvent&&((oe=f==null?void 0:f.validate)==null||oe.call(f,"blur").catch(X=>void 0))}}),C=Le(()=>{var oe;return(oe=c==null?void 0:c.statusIcon)!=null?oe:!1}),k=Le(()=>(f==null?void 0:f.validateState)||""),L=Le(()=>k.value&&nQ[k.value]),I=Le(()=>b.value?qZ:GZ),O=Le(()=>[i.style]),N=Le(()=>[n.inputStyle,S.value,{resize:n.resize}]),D=Le(()=>Wo(n.modelValue)?"":String(n.modelValue)),$=Le(()=>n.clearable&&!v.value&&!n.readonly&&!!D.value&&(A.value||w.value)),R=Le(()=>n.showPassword&&!v.value&&!n.readonly&&!!D.value&&(!!D.value||A.value)),B=Le(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!v.value&&!n.readonly&&!n.showPassword),j=Le(()=>D.value.length),G=Le(()=>!!B.value&&j.value>Number(n.maxlength)),z=Le(()=>!!a.suffix||!!n.suffixIcon||$.value||n.showPassword||B.value||!!k.value&&C.value),[W,Q]=$J(m);E3(y,oe=>{if(ae(),!B.value||n.resize!=="both")return;const X=oe[0],{width:de}=X.contentRect;x.value={right:`calc(100% - ${de+15+6}px)`}});const ie=()=>{const{type:oe,autosize:X}=n;if(!(!Di||oe!=="textarea"||!y.value))if(X){const de=Gr(X)?X.minRows:void 0,xe=Gr(X)?X.maxRows:void 0,ke=Xk(y.value,de,xe);S.value={overflowY:"hidden",...ke},Ln(()=>{y.value.offsetHeight,S.value=ke})}else S.value={minHeight:Xk(y.value).minHeight}},ae=(oe=>{let X=!1;return()=>{var de;if(X||!n.autosize)return;((de=y.value)==null?void 0:de.offsetParent)===null||(oe(),X=!0)}})(ie),pe=()=>{const oe=_.value,X=n.formatter?n.formatter(D.value):D.value;!oe||oe.value===X||(oe.value=X)},De=async oe=>{W();let{value:X}=oe.target;if(n.formatter&&(X=n.parser?n.parser(X):X),!ee.value){if(X===D.value){pe();return}t(Oa,X),t("input",X),await Ln(),pe(),Q()}},Je=oe=>{t("change",oe.target.value)},{isComposing:ee,handleCompositionStart:ne,handleCompositionUpdate:me,handleCompositionEnd:Fe}=PJ({emit:t,afterComposition:De}),Re=()=>{b.value=!b.value,$e()},$e=async()=>{var oe;await Ln(),(oe=_.value)==null||oe.focus()},Ke=()=>{var oe;return(oe=_.value)==null?void 0:oe.blur()},at=oe=>{w.value=!1,t("mouseleave",oe)},Me=oe=>{w.value=!0,t("mouseenter",oe)},J=oe=>{t("keydown",oe)},F=()=>{var oe;(oe=_.value)==null||oe.select()},be=()=>{t(Oa,""),t("change",""),t("clear"),t("input","")};return qt(()=>n.modelValue,()=>{var oe;Ln(()=>ie()),n.validateEvent&&((oe=f==null?void 0:f.validate)==null||oe.call(f,"change").catch(X=>void 0))}),qt(D,()=>pe()),qt(()=>n.type,async()=>{await Ln(),pe(),ie()}),rn(()=>{!n.formatter&&n.parser,pe(),Ln(ie)}),e({input:m,textarea:y,ref:_,textareaStyle:N,autosize:Do(n,"autosize"),isComposing:ee,focus:$e,blur:Ke,select:F,clear:be,resizeTextarea:ie}),(oe,X)=>(We(),Mt("div",sa(U(o),{class:[U(s),{[U(p).bm("group","append")]:oe.$slots.append,[U(p).bm("group","prepend")]:oe.$slots.prepend}],style:U(O),role:oe.containerRole,onMouseenter:Me,onMouseleave:at}),[Wt(" input "),oe.type!=="textarea"?(We(),Mt(wn,{key:0},[Wt(" prepend slot "),oe.$slots.prepend?(We(),Mt("div",{key:0,class:dt(U(p).be("group","prepend"))},[fr(oe.$slots,"prepend")],2)):Wt("v-if",!0),bt("div",{ref_key:"wrapperRef",ref:M,class:dt(U(l))},[Wt(" prefix slot "),oe.$slots.prefix||oe.prefixIcon?(We(),Mt("span",{key:0,class:dt(U(p).e("prefix"))},[bt("span",{class:dt(U(p).e("prefix-inner"))},[fr(oe.$slots,"prefix"),oe.prefixIcon?(We(),or(U(dn),{key:0,class:dt(U(p).e("icon"))},{default:Nt(()=>[(We(),or(_i(oe.prefixIcon)))]),_:1},8,["class"])):Wt("v-if",!0)],2)],2)):Wt("v-if",!0),bt("input",sa({id:U(h),ref_key:"input",ref:m,class:U(p).e("inner")},U(u),{minlength:oe.minlength,maxlength:oe.maxlength,type:oe.showPassword?b.value?"text":"password":oe.type,disabled:U(v),readonly:oe.readonly,autocomplete:oe.autocomplete,tabindex:oe.tabindex,"aria-label":oe.ariaLabel,placeholder:oe.placeholder,style:oe.inputStyle,form:oe.form,autofocus:oe.autofocus,onCompositionstart:U(ne),onCompositionupdate:U(me),onCompositionend:U(Fe),onInput:De,onChange:Je,onKeydown:J}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),Wt(" suffix slot "),U(z)?(We(),Mt("span",{key:1,class:dt(U(p).e("suffix"))},[bt("span",{class:dt(U(p).e("suffix-inner"))},[!U($)||!U(R)||!U(B)?(We(),Mt(wn,{key:0},[fr(oe.$slots,"suffix"),oe.suffixIcon?(We(),or(U(dn),{key:0,class:dt(U(p).e("icon"))},{default:Nt(()=>[(We(),or(_i(oe.suffixIcon)))]),_:1},8,["class"])):Wt("v-if",!0)],64)):Wt("v-if",!0),U($)?(We(),or(U(dn),{key:1,class:dt([U(p).e("icon"),U(p).e("clear")]),onMousedown:Aa(U(Pr),["prevent"]),onClick:be},{default:Nt(()=>[St(U(xE))]),_:1},8,["class","onMousedown"])):Wt("v-if",!0),U(R)?(We(),or(U(dn),{key:2,class:dt([U(p).e("icon"),U(p).e("password")]),onClick:Re},{default:Nt(()=>[(We(),or(_i(U(I))))]),_:1},8,["class"])):Wt("v-if",!0),U(B)?(We(),Mt("span",{key:3,class:dt(U(p).e("count"))},[bt("span",{class:dt(U(p).e("count-inner"))},xn(U(j))+" / "+xn(oe.maxlength),3)],2)):Wt("v-if",!0),U(k)&&U(L)&&U(C)?(We(),or(U(dn),{key:4,class:dt([U(p).e("icon"),U(p).e("validateIcon"),U(p).is("loading",U(k)==="validating")])},{default:Nt(()=>[(We(),or(_i(U(L))))]),_:1},8,["class"])):Wt("v-if",!0)],2)],2)):Wt("v-if",!0)],2),Wt(" append slot "),oe.$slots.append?(We(),Mt("div",{key:1,class:dt(U(p).be("group","append"))},[fr(oe.$slots,"append")],2)):Wt("v-if",!0)],64)):(We(),Mt(wn,{key:1},[Wt(" textarea "),bt("textarea",sa({id:U(h),ref_key:"textarea",ref:y,class:[U(g).e("inner"),U(p).is("focus",U(A))]},U(u),{minlength:oe.minlength,maxlength:oe.maxlength,tabindex:oe.tabindex,disabled:U(v),readonly:oe.readonly,autocomplete:oe.autocomplete,style:U(N),"aria-label":oe.ariaLabel,placeholder:oe.placeholder,form:oe.form,autofocus:oe.autofocus,rows:oe.rows,onCompositionstart:U(ne),onCompositionupdate:U(me),onCompositionend:U(Fe),onInput:De,onFocus:U(E),onBlur:U(T),onChange:Je,onKeydown:J}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),U(B)?(We(),Mt("span",{key:0,style:ln(x.value),class:dt(U(p).e("count"))},xn(U(j))+" / "+xn(oe.maxlength),7)):Wt("v-if",!0)],64))],16,["role"]))}});var Hee=jr(Wee,[["__file","input.vue"]]);const bP=ca(Hee),DE=Symbol("popper"),wP=Symbol("popperContent"),Vee=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],xP=Fr({role:{type:String,values:Vee,default:"tooltip"}}),Yee=_t({name:"ElPopper",inheritAttrs:!1}),Xee=_t({...Yee,props:xP,setup(r,{expose:e}){const t=r,n=ut(),i=ut(),a=ut(),o=ut(),s=Le(()=>t.role),l={triggerRef:n,popperInstanceRef:i,contentRef:a,referenceRef:o,role:s};return e(l),Ci(DE,l),(u,c)=>fr(u.$slots,"default")}});var Kee=jr(Xee,[["__file","popper.vue"]]);const SP=Fr({arrowOffset:{type:Number,default:5}}),qee=_t({name:"ElPopperArrow",inheritAttrs:!1}),Zee=_t({...qee,props:SP,setup(r,{expose:e}){const t=r,n=Wr("popper"),{arrowOffset:i,arrowRef:a,arrowStyle:o}=zr(wP,void 0);return qt(()=>t.arrowOffset,s=>{i.value=s}),ji(()=>{a.value=void 0}),e({arrowRef:a}),(s,l)=>(We(),Mt("span",{ref_key:"arrowRef",ref:a,class:dt(U(n).e("arrow")),style:ln(U(o)),"data-popper-arrow":""},null,6))}});var Qee=jr(Zee,[["__file","arrow.vue"]]);const Jee="ElOnlyChild",ete=_t({name:Jee,setup(r,{slots:e,attrs:t}){var n;const i=zr(pP),a=LJ((n=i==null?void 0:i.setForwardRef)!=null?n:Pr);return()=>{var o;const s=(o=e.default)==null?void 0:o.call(e,t);if(!s||s.length>1)return null;const l=_P(s);return l?$s(Fs(l,t),[[a]]):null}}});function _P(r){if(!r)return null;const e=r;for(const t of e){if(Gr(t))switch(t.type){case Ei:continue;case ih:case"svg":return Kk(t);case wn:return _P(t.children);default:return t}return Kk(t)}return null}function Kk(r){const e=Wr("only-child");return St("span",{class:e.e("content")},[r])}const EP=Fr({virtualRef:{type:$t(Object)},virtualTriggering:Boolean,onMouseenter:{type:$t(Function)},onMouseleave:{type:$t(Function)},onClick:{type:$t(Function)},onKeydown:{type:$t(Function)},onFocus:{type:$t(Function)},onBlur:{type:$t(Function)},onContextmenu:{type:$t(Function)},id:String,open:Boolean}),tte=_t({name:"ElPopperTrigger",inheritAttrs:!1}),rte=_t({...tte,props:EP,setup(r,{expose:e}){const t=r,{role:n,triggerRef:i}=zr(DE,void 0);kJ(i);const a=Le(()=>s.value?t.id:void 0),o=Le(()=>{if(n&&n.value==="tooltip")return t.open&&t.id?t.id:void 0}),s=Le(()=>{if(n&&n.value!=="tooltip")return n.value}),l=Le(()=>s.value?`${t.open}`:void 0);let u;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return rn(()=>{qt(()=>t.virtualRef,f=>{f&&(i.value=Tl(f))},{immediate:!0}),qt(i,(f,h)=>{u==null||u(),u=void 0,wf(f)&&(c.forEach(d=>{var v;const p=t[d];p&&(f.addEventListener(d.slice(2).toLowerCase(),p),(v=h==null?void 0:h.removeEventListener)==null||v.call(h,d.slice(2).toLowerCase(),p))}),u=qt([a,o,s,l],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((v,p)=>{Wo(d[p])?f.removeAttribute(v):f.setAttribute(v,d[p])})},{immediate:!0})),wf(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>h.removeAttribute(d))},{immediate:!0})}),ji(()=>{if(u==null||u(),u=void 0,i.value&&wf(i.value)){const f=i.value;c.forEach(h=>{const d=t[h];d&&f.removeEventListener(h.slice(2).toLowerCase(),d)}),i.value=void 0}}),e({triggerRef:i}),(f,h)=>f.virtualTriggering?Wt("v-if",!0):(We(),or(U(ete),sa({key:0},f.$attrs,{"aria-controls":U(a),"aria-describedby":U(o),"aria-expanded":U(l),"aria-haspopup":U(s)}),{default:Nt(()=>[fr(f.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var nte=jr(rte,[["__file","trigger.vue"]]);const jb="focus-trap.focus-after-trapped",Ub="focus-trap.focus-after-released",ite="focus-trap.focusout-prevented",qk={cancelable:!0,bubbles:!1},ate={cancelable:!0,bubbles:!1},Zk="focusAfterTrapped",Qk="focusAfterReleased",ote=Symbol("elFocusTrap"),RE=ut(),My=ut(0),PE=ut(0);let og=0;const MP=r=>{const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},Jk=(r,e)=>{for(const t of r)if(!ste(t,e))return t},ste=(r,e)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},lte=r=>{const e=MP(r),t=Jk(e,r),n=Jk(e.reverse(),r);return[t,n]},ute=r=>r instanceof HTMLInputElement&&"select"in r,vl=(r,e)=>{if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),PE.value=window.performance.now(),r!==t&&ute(r)&&e&&r.select()}};function eL(r,e){const t=[...r],n=r.indexOf(e);return n!==-1&&t.splice(n,1),t}const cte=()=>{let r=[];return{push:n=>{const i=r[0];i&&n!==i&&i.pause(),r=eL(r,n),r.unshift(n)},remove:n=>{var i,a;r=eL(r,n),(a=(i=r[0])==null?void 0:i.resume)==null||a.call(i)}}},fte=(r,e=!1)=>{const t=document.activeElement;for(const n of r)if(vl(n,e),document.activeElement!==t)return},tL=cte(),hte=()=>My.value>PE.value,sg=()=>{RE.value="pointer",My.value=window.performance.now()},rL=()=>{RE.value="keyboard",My.value=window.performance.now()},dte=()=>(rn(()=>{og===0&&(document.addEventListener("mousedown",sg),document.addEventListener("touchstart",sg),document.addEventListener("keydown",rL)),og++}),ji(()=>{og--,og<=0&&(document.removeEventListener("mousedown",sg),document.removeEventListener("touchstart",sg),document.removeEventListener("keydown",rL))}),{focusReason:RE,lastUserFocusTimestamp:My,lastAutomatedFocusTimestamp:PE}),lg=r=>new CustomEvent(ite,{...ate,detail:r}),vte=_t({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Zk,Qk,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:e}){const t=ut();let n,i;const{focusReason:a}=dte();EJ(v=>{r.trapped&&!o.paused&&e("release-requested",v)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=v=>{if(!r.loop&&!r.trapped||o.paused)return;const{key:p,altKey:g,ctrlKey:m,metaKey:y,currentTarget:w,shiftKey:b}=v,{loop:x}=r,S=p===eo.tab&&!g&&!m&&!y,_=document.activeElement;if(S&&_){const M=w,[A,E]=lte(M);if(A&&E){if(!b&&_===E){const C=lg({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||(v.preventDefault(),x&&vl(A,!0))}else if(b&&[A,M].includes(_)){const C=lg({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||(v.preventDefault(),x&&vl(E,!0))}}else if(_===M){const C=lg({focusReason:a.value});e("focusout-prevented",C),C.defaultPrevented||v.preventDefault()}}};Ci(ote,{focusTrapRef:t,onKeydown:s}),qt(()=>r.focusTrapEl,v=>{v&&(t.value=v)},{immediate:!0}),qt([t],([v],[p])=>{v&&(v.addEventListener("keydown",s),v.addEventListener("focusin",c),v.addEventListener("focusout",f)),p&&(p.removeEventListener("keydown",s),p.removeEventListener("focusin",c),p.removeEventListener("focusout",f))});const l=v=>{e(Zk,v)},u=v=>e(Qk,v),c=v=>{const p=U(t);if(!p)return;const g=v.target,m=v.relatedTarget,y=g&&p.contains(g);r.trapped||m&&p.contains(m)||(n=m),y&&e("focusin",v),!o.paused&&r.trapped&&(y?i=g:vl(i,!0))},f=v=>{const p=U(t);if(!(o.paused||!p))if(r.trapped){const g=v.relatedTarget;!Wo(g)&&!p.contains(g)&&setTimeout(()=>{if(!o.paused&&r.trapped){const m=lg({focusReason:a.value});e("focusout-prevented",m),m.defaultPrevented||vl(i,!0)}},0)}else{const g=v.target;g&&p.contains(g)||e("focusout",v)}};async function h(){await Ln();const v=U(t);if(v){tL.push(o);const p=v.contains(document.activeElement)?n:document.activeElement;if(n=p,!v.contains(p)){const m=new Event(jb,qk);v.addEventListener(jb,l),v.dispatchEvent(m),m.defaultPrevented||Ln(()=>{let y=r.focusStartEl;Sr(y)||(vl(y),document.activeElement!==y&&(y="first")),y==="first"&&fte(MP(v),!0),(document.activeElement===p||y==="container")&&vl(v)})}}}function d(){const v=U(t);if(v){v.removeEventListener(jb,l);const p=new CustomEvent(Ub,{...qk,detail:{focusReason:a.value}});v.addEventListener(Ub,u),v.dispatchEvent(p),!p.defaultPrevented&&(a.value=="keyboard"||!hte()||v.contains(document.activeElement))&&vl(n??document.body),v.removeEventListener(Ub,u),tL.remove(o)}}return rn(()=>{r.trapped&&h(),qt(()=>r.trapped,v=>{v?h():d()})}),ji(()=>{r.trapped&&d(),t.value&&(t.value.removeEventListener("keydown",s),t.value.removeEventListener("focusin",c),t.value.removeEventListener("focusout",f),t.value=void 0)}),{onKeydown:s}}});function pte(r,e,t,n,i,a){return fr(r.$slots,"default",{handleKeydown:r.onKeydown})}var gte=jr(vte,[["render",pte],["__file","focus-trap.vue"]]);const mte=["fixed","absolute"],yte=Fr({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:$t(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:AE,default:"bottom"},popperOptions:{type:$t(Object),default:()=>({})},strategy:{type:String,values:mte,default:"absolute"}}),CP=Fr({...yte,id:String,style:{type:$t([String,Array,Object])},className:{type:$t([String,Array,Object])},effect:{type:$t(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:$t([String,Array,Object])},popperStyle:{type:$t([String,Array,Object])},referenceEl:{type:$t(Object)},triggerTargetEl:{type:$t(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...oh(["ariaLabel"])}),bte={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},wte=(r,e=[])=>{const{placement:t,strategy:n,popperOptions:i}=r,a={placement:t,strategy:n,...i,modifiers:[...Ste(r),...e]};return _te(a,i==null?void 0:i.modifiers),a},xte=r=>{if(Di)return Tl(r)};function Ste(r){const{offset:e,gpuAcceleration:t,fallbackPlacements:n}=r;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function _te(r,e){e&&(r.modifiers=[...r.modifiers,...e??[]])}const Ete=0,Mte=r=>{const{popperInstanceRef:e,contentRef:t,triggerRef:n,role:i}=zr(DE,void 0),a=ut(),o=ut(),s=Le(()=>({name:"eventListeners",enabled:!!r.visible})),l=Le(()=>{var m;const y=U(a),w=(m=U(o))!=null?m:Ete;return{name:"arrow",enabled:!yZ(y),options:{element:y,padding:w}}}),u=Le(()=>({onFirstUpdate:()=>{v()},...wte(r,[U(l),U(s)])})),c=Le(()=>xte(r.referenceEl)||U(n)),{attributes:f,state:h,styles:d,update:v,forceUpdate:p,instanceRef:g}=xJ(c,t,u);return qt(g,m=>e.value=m),rn(()=>{qt(()=>{var m;return(m=U(c))==null?void 0:m.getBoundingClientRect()},()=>{v()})}),{attributes:f,arrowRef:a,contentRef:t,instanceRef:g,state:h,styles:d,role:i,forceUpdate:p,update:v}},Cte=(r,{attributes:e,styles:t,role:n})=>{const{nextZIndex:i}=NJ(),a=Wr("popper"),o=Le(()=>U(e).popper),s=ut(Ta(r.zIndex)?r.zIndex:i()),l=Le(()=>[a.b(),a.is("pure",r.pure),a.is(r.effect),r.popperClass]),u=Le(()=>[{zIndex:U(s)},U(t).popper,r.popperStyle||{}]),c=Le(()=>n.value==="dialog"?"false":void 0),f=Le(()=>U(t).arrow||{});return{ariaModal:c,arrowStyle:f,contentAttrs:o,contentClass:l,contentStyle:u,contentZIndex:s,updateZIndex:()=>{s.value=Ta(r.zIndex)?r.zIndex:i()}}},Ate=(r,e)=>{const t=ut(!1),n=ut();return{focusStartRef:n,trapped:t,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(n.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{r.visible&&!t.value&&(u.target&&(n.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{r.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},Tte=_t({name:"ElPopperContent"}),kte=_t({...Tte,props:CP,emits:bte,setup(r,{expose:e,emit:t}){const n=r,{focusStartRef:i,trapped:a,onFocusAfterReleased:o,onFocusAfterTrapped:s,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=Ate(n,t),{attributes:f,arrowRef:h,contentRef:d,styles:v,instanceRef:p,role:g,update:m}=Mte(n),{ariaModal:y,arrowStyle:w,contentAttrs:b,contentClass:x,contentStyle:S,updateZIndex:_}=Cte(n,{styles:v,attributes:f,role:g}),M=zr(oc,void 0),A=ut();Ci(wP,{arrowStyle:w,arrowRef:h,arrowOffset:A}),M&&Ci(oc,{...M,addInputId:Pr,removeInputId:Pr});let E;const T=(k=!0)=>{m(),k&&_()},C=()=>{T(!1),n.visible&&n.focusOnShow?a.value=!0:n.visible===!1&&(a.value=!1)};return rn(()=>{qt(()=>n.triggerTargetEl,(k,L)=>{E==null||E(),E=void 0;const I=U(k||d.value),O=U(L||d.value);wf(I)&&(E=qt([g,()=>n.ariaLabel,y,()=>n.id],N=>{["role","aria-label","aria-modal","id"].forEach((D,$)=>{Wo(N[$])?I.removeAttribute(D):I.setAttribute(D,N[$])})},{immediate:!0})),O!==I&&wf(O)&&["role","aria-label","aria-modal","id"].forEach(N=>{O.removeAttribute(N)})},{immediate:!0}),qt(()=>n.visible,C,{immediate:!0})}),ji(()=>{E==null||E(),E=void 0}),e({popperContentRef:d,popperInstanceRef:p,updatePopper:T,contentStyle:S}),(k,L)=>(We(),Mt("div",sa({ref_key:"contentRef",ref:d},U(b),{style:U(S),class:U(x),tabindex:"-1",onMouseenter:I=>k.$emit("mouseenter",I),onMouseleave:I=>k.$emit("mouseleave",I)}),[St(U(gte),{trapped:U(a),"trap-on-focus-in":!0,"focus-trap-el":U(d),"focus-start-el":U(i),onFocusAfterTrapped:U(s),onFocusAfterReleased:U(o),onFocusin:U(l),onFocusoutPrevented:U(u),onReleaseRequested:U(c)},{default:Nt(()=>[fr(k.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var Lte=jr(kte,[["__file","content.vue"]]);const Ite=ca(Kee),FE=Symbol("elTooltip"),Ki=Fr({...AJ,...CP,appendTo:{type:$t([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:$t(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...oh(["ariaLabel"])}),ov=Fr({...EP,disabled:Boolean,trigger:{type:$t([String,Array]),default:"hover"},triggerKeys:{type:$t(Array),default:()=>[eo.enter,eo.space]}}),{useModelToggleProps:Ote,useModelToggleEmits:Nte,useModelToggle:$te}=eP("visible"),Dte=Fr({...xP,...Ote,...Ki,...ov,...SP,showArrow:{type:Boolean,default:!0}}),Rte=[...Nte,"before-show","before-hide","show","hide","open","close"],Pte=(r,e)=>Jt(r)?r.includes(e):r===e,Uc=(r,e,t)=>n=>{Pte(U(r),e)&&t(n)},Fte=_t({name:"ElTooltipTrigger"}),Bte=_t({...Fte,props:ov,setup(r,{expose:e}){const t=r,n=Wr("tooltip"),{controlled:i,id:a,open:o,onOpen:s,onClose:l,onToggle:u}=zr(FE,void 0),c=ut(null),f=()=>{if(U(i)||t.disabled)return!0},h=Do(t,"trigger"),d=Es(f,Uc(h,"hover",s)),v=Es(f,Uc(h,"hover",l)),p=Es(f,Uc(h,"click",b=>{b.button===0&&u(b)})),g=Es(f,Uc(h,"focus",s)),m=Es(f,Uc(h,"focus",l)),y=Es(f,Uc(h,"contextmenu",b=>{b.preventDefault(),u(b)})),w=Es(f,b=>{const{code:x}=b;t.triggerKeys.includes(x)&&(b.preventDefault(),u(b))});return e({triggerRef:c}),(b,x)=>(We(),or(U(nte),{id:U(a),"virtual-ref":b.virtualRef,open:U(o),"virtual-triggering":b.virtualTriggering,class:dt(U(n).e("trigger")),onBlur:U(m),onClick:U(p),onContextmenu:U(y),onFocus:U(g),onMouseenter:U(d),onMouseleave:U(v),onKeydown:U(w)},{default:Nt(()=>[fr(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var zte=jr(Bte,[["__file","trigger.vue"]]);const Gte=Fr({to:{type:$t([String,Object]),required:!0},disabled:Boolean}),jte=_t({__name:"teleport",props:Gte,setup(r){return(e,t)=>e.disabled?fr(e.$slots,"default",{key:0}):(We(),or(jH,{key:1,to:e.to},[fr(e.$slots,"default")],8,["to"]))}});var Ute=jr(jte,[["__file","teleport.vue"]]);const Wte=ca(Ute),Hte=_t({name:"ElTooltipContent",inheritAttrs:!1}),Vte=_t({...Hte,props:Ki,setup(r,{expose:e}){const t=r,{selector:n}=vP(),i=Wr("tooltip"),a=ut(null);let o;const{controlled:s,id:l,open:u,trigger:c,onClose:f,onOpen:h,onShow:d,onHide:v,onBeforeShow:p,onBeforeHide:g}=zr(FE,void 0),m=Le(()=>t.transition||`${i.namespace.value}-fade-in-linear`),y=Le(()=>t.persistent);ji(()=>{o==null||o()});const w=Le(()=>U(y)?!0:U(u)),b=Le(()=>t.disabled?!1:U(u)),x=Le(()=>t.appendTo||n.value),S=Le(()=>{var O;return(O=t.style)!=null?O:{}}),_=Le(()=>!U(u)),M=()=>{v()},A=()=>{if(U(s))return!0},E=Es(A,()=>{t.enterable&&U(c)==="hover"&&h()}),T=Es(A,()=>{U(c)==="hover"&&f()}),C=()=>{var O,N;(N=(O=a.value)==null?void 0:O.updatePopper)==null||N.call(O),p==null||p()},k=()=>{g==null||g()},L=()=>{d(),o=d7(Le(()=>{var O;return(O=a.value)==null?void 0:O.popperContentRef}),()=>{if(U(s))return;U(c)!=="hover"&&f()})},I=()=>{t.virtualTriggering||f()};return qt(()=>U(u),O=>{O||o==null||o()},{flush:"post"}),qt(()=>t.content,()=>{var O,N;(N=(O=a.value)==null?void 0:O.updatePopper)==null||N.call(O)}),e({contentRef:a}),(O,N)=>(We(),or(U(Wte),{disabled:!O.teleported,to:U(x)},{default:Nt(()=>[St(rE,{name:U(m),onAfterLeave:M,onBeforeEnter:C,onAfterEnter:L,onBeforeLeave:k},{default:Nt(()=>[U(w)?$s((We(),or(U(Lte),sa({key:0,id:U(l),ref_key:"contentRef",ref:a},O.$attrs,{"aria-label":O.ariaLabel,"aria-hidden":U(_),"boundaries-padding":O.boundariesPadding,"fallback-placements":O.fallbackPlacements,"gpu-acceleration":O.gpuAcceleration,offset:O.offset,placement:O.placement,"popper-options":O.popperOptions,strategy:O.strategy,effect:O.effect,enterable:O.enterable,pure:O.pure,"popper-class":O.popperClass,"popper-style":[O.popperStyle,U(S)],"reference-el":O.referenceEl,"trigger-target-el":O.triggerTargetEl,visible:U(b),"z-index":O.zIndex,onMouseenter:U(E),onMouseleave:U(T),onBlur:I,onClose:U(f)}),{default:Nt(()=>[fr(O.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Qd,U(b)]]):Wt("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var Yte=jr(Vte,[["__file","content.vue"]]);const Xte=_t({name:"ElTooltip"}),Kte=_t({...Xte,props:Dte,emits:Rte,setup(r,{expose:e,emit:t}){const n=r;CJ();const i=_y(),a=ut(),o=ut(),s=()=>{var m;const y=U(a);y&&((m=y.popperInstanceRef)==null||m.update())},l=ut(!1),u=ut(),{show:c,hide:f,hasUpdateHandler:h}=$te({indicator:l,toggleReason:u}),{onOpen:d,onClose:v}=TJ({showAfter:Do(n,"showAfter"),hideAfter:Do(n,"hideAfter"),autoClose:Do(n,"autoClose"),open:c,close:f}),p=Le(()=>no(n.visible)&&!h.value);Ci(FE,{controlled:p,id:i,open:G_(l),trigger:Do(n,"trigger"),onOpen:m=>{d(m)},onClose:m=>{v(m)},onToggle:m=>{U(l)?v(m):d(m)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:s}),qt(()=>n.disabled,m=>{m&&l.value&&(l.value=!1)});const g=m=>{var y,w;const b=(w=(y=o.value)==null?void 0:y.contentRef)==null?void 0:w.popperContentRef,x=(m==null?void 0:m.relatedTarget)||document.activeElement;return b&&b.contains(x)};return FR(()=>l.value&&f()),e({popperRef:a,contentRef:o,isFocusInsideContent:g,updatePopper:s,onOpen:d,onClose:v,hide:f}),(m,y)=>(We(),or(U(Ite),{ref_key:"popperRef",ref:a,role:m.role},{default:Nt(()=>[St(zte,{disabled:m.disabled,trigger:m.trigger,"trigger-keys":m.triggerKeys,"virtual-ref":m.virtualRef,"virtual-triggering":m.virtualTriggering},{default:Nt(()=>[m.$slots.default?fr(m.$slots,"default",{key:0}):Wt("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),St(Yte,{ref_key:"contentRef",ref:o,"aria-label":m.ariaLabel,"boundaries-padding":m.boundariesPadding,content:m.content,disabled:m.disabled,effect:m.effect,enterable:m.enterable,"fallback-placements":m.fallbackPlacements,"hide-after":m.hideAfter,"gpu-acceleration":m.gpuAcceleration,offset:m.offset,persistent:m.persistent,"popper-class":m.popperClass,"popper-style":m.popperStyle,placement:m.placement,"popper-options":m.popperOptions,pure:m.pure,"raw-content":m.rawContent,"reference-el":m.referenceEl,"trigger-target-el":m.triggerTargetEl,"show-after":m.showAfter,strategy:m.strategy,teleported:m.teleported,transition:m.transition,"virtual-triggering":m.virtualTriggering,"z-index":m.zIndex,"append-to":m.appendTo},{default:Nt(()=>[fr(m.$slots,"content",{},()=>[m.rawContent?(We(),Mt("span",{key:0,innerHTML:m.content},null,8,["innerHTML"])):(We(),Mt("span",{key:1},xn(m.content),1))]),m.showArrow?(We(),or(U(Qee),{key:0,"arrow-offset":m.arrowOffset},null,8,["arrow-offset"])):Wt("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var qte=jr(Kte,[["__file","tooltip.vue"]]);const BE=ca(qte),AP=Symbol("buttonGroupContextKey"),Zte=(r,e)=>{J3({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},Le(()=>r.type==="text"));const t=zr(AP,void 0),n=zJ("button"),{form:i}=Bv(),a=bc(Le(()=>t==null?void 0:t.size)),o=ts(),s=ut(),l=q_(),u=Le(()=>r.type||(t==null?void 0:t.type)||""),c=Le(()=>{var v,p,g;return(g=(p=r.autoInsertSpace)!=null?p:(v=n.value)==null?void 0:v.autoInsertSpace)!=null?g:!1}),f=Le(()=>r.tag==="button"?{ariaDisabled:o.value||r.loading,disabled:o.value||r.loading,autofocus:r.autofocus,type:r.nativeType}:{}),h=Le(()=>{var v;const p=(v=l.default)==null?void 0:v.call(l);if(c.value&&(p==null?void 0:p.length)===1){const g=p[0];if((g==null?void 0:g.type)===ih){const m=g.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(m.trim())}}return!1});return{_disabled:o,_size:a,_type:u,_ref:s,_props:f,shouldAddSpace:h,handleClick:v=>{if(o.value||r.loading){v.stopPropagation();return}r.nativeType==="reset"&&(i==null||i.resetFields()),e("click",v)}}},Qte=["default","primary","success","warning","info","danger","text",""],Jte=["button","submit","reset"],$x=Fr({size:Fv,disabled:Boolean,type:{type:String,values:Qte,default:""},icon:{type:ks},nativeType:{type:String,values:Jte,default:"button"},loading:Boolean,loadingIcon:{type:ks,default:()=>_E},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:$t([String,Object]),default:"button"}}),ere={click:r=>r instanceof MouseEvent};function fi(r,e){tre(r)&&(r="100%");var t=rre(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function ug(r){return Math.min(1,Math.max(0,r))}function tre(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function rre(r){return typeof r=="string"&&r.indexOf("%")!==-1}function TP(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function cg(r){return r<=1?"".concat(Number(r)*100,"%"):r}function zu(r){return r.length===1?"0"+r:String(r)}function nre(r,e,t){return{r:fi(r,255)*255,g:fi(e,255)*255,b:fi(t,255)*255}}function nL(r,e,t){r=fi(r,255),e=fi(e,255),t=fi(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function Wb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function ire(r,e,t){var n,i,a;if(r=fi(r,360),e=fi(e,100),t=fi(t,100),e===0)i=t,a=t,n=t;else{var o=t<.5?t*(1+e):t+e-t*e,s=2*t-o;n=Wb(s,o,r+1/3),i=Wb(s,o,r),a=Wb(s,o,r-1/3)}return{r:n*255,g:i*255,b:a*255}}function iL(r,e,t){r=fi(r,255),e=fi(e,255),t=fi(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a=0,o=n,s=n-i,l=n===0?0:s/n;if(n===i)a=0;else{switch(n){case r:a=(e-t)/s+(e<t?6:0);break;case e:a=(t-r)/s+2;break;case t:a=(r-e)/s+4;break}a/=6}return{h:a,s:l,v:o}}function are(r,e,t){r=fi(r,360)*6,e=fi(e,100),t=fi(t,100);var n=Math.floor(r),i=r-n,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),l=n%6,u=[t,o,a,a,s,t][l],c=[s,t,t,o,a,a][l],f=[a,a,s,t,t,o][l];return{r:u*255,g:c*255,b:f*255}}function aL(r,e,t,n){var i=[zu(Math.round(r).toString(16)),zu(Math.round(e).toString(16)),zu(Math.round(t).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function ore(r,e,t,n,i){var a=[zu(Math.round(r).toString(16)),zu(Math.round(e).toString(16)),zu(Math.round(t).toString(16)),zu(sre(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function sre(r){return Math.round(parseFloat(r)*255).toString(16)}function oL(r){return Vi(r)/255}function Vi(r){return parseInt(r,16)}function lre(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var Dx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ure(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=hre(r)),typeof r=="object"&&(ds(r.r)&&ds(r.g)&&ds(r.b)?(e=nre(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):ds(r.h)&&ds(r.s)&&ds(r.v)?(n=cg(r.s),i=cg(r.v),e=are(r.h,n,i),o=!0,s="hsv"):ds(r.h)&&ds(r.s)&&ds(r.l)&&(n=cg(r.s),a=cg(r.l),e=ire(r.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=TP(t),{ok:o,format:r.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var cre="[-\\+]?\\d+%?",fre="[-\\+]?\\d*\\.\\d+%?",kl="(?:".concat(fre,")|(?:").concat(cre,")"),Hb="[\\s|\\(]+(".concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")\\s*\\)?"),Vb="[\\s|\\(]+(".concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")\\s*\\)?"),Va={CSS_UNIT:new RegExp(kl),rgb:new RegExp("rgb"+Hb),rgba:new RegExp("rgba"+Vb),hsl:new RegExp("hsl"+Hb),hsla:new RegExp("hsla"+Vb),hsv:new RegExp("hsv"+Hb),hsva:new RegExp("hsva"+Vb),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function hre(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var e=!1;if(Dx[r])r=Dx[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Va.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=Va.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Va.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=Va.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Va.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=Va.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Va.hex8.exec(r),t?{r:Vi(t[1]),g:Vi(t[2]),b:Vi(t[3]),a:oL(t[4]),format:e?"name":"hex8"}:(t=Va.hex6.exec(r),t?{r:Vi(t[1]),g:Vi(t[2]),b:Vi(t[3]),format:e?"name":"hex"}:(t=Va.hex4.exec(r),t?{r:Vi(t[1]+t[1]),g:Vi(t[2]+t[2]),b:Vi(t[3]+t[3]),a:oL(t[4]+t[4]),format:e?"name":"hex8"}:(t=Va.hex3.exec(r),t?{r:Vi(t[1]+t[1]),g:Vi(t[2]+t[2]),b:Vi(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function ds(r){return!!Va.CSS_UNIT.exec(String(r))}var dre=function(){function r(e,t){e===void 0&&(e=""),t===void 0&&(t={});var n;if(e instanceof r)return e;typeof e=="number"&&(e=lre(e)),this.originalInput=e;var i=ure(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=t.format)!==null&&n!==void 0?n:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},r.prototype.getLuminance=function(){var e=this.toRgb(),t,n,i,a=e.r/255,o=e.g/255,s=e.b/255;return a<=.03928?t=a/12.92:t=Math.pow((a+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*t+.7152*n+.0722*i},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(e){return this.a=TP(e),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},r.prototype.toHsv=function(){var e=iL(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},r.prototype.toHsvString=function(){var e=iL(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var e=nL(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},r.prototype.toHslString=function(){var e=nL(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(e){return e===void 0&&(e=!1),aL(this.r,this.g,this.b,e)},r.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},r.prototype.toHex8=function(e){return e===void 0&&(e=!1),ore(this.r,this.g,this.b,this.a,e)},r.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},r.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(fi(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(fi(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+aL(this.r,this.g,this.b,!1),t=0,n=Object.entries(Dx);t<n.length;t++){var i=n[t],a=i[0],o=i[1];if(e===o)return a}return!1},r.prototype.toString=function(e){var t=!!e;e=e??this.format;var n=!1,i=this.a<1&&this.a>=0,a=!t&&i&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=ug(t.l),new r(t)},r.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new r(t)},r.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=ug(t.l),new r(t)},r.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},r.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},r.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=ug(t.s),new r(t)},r.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=ug(t.s),new r(t)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(e){var t=this.toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,new r(t)},r.prototype.mix=function(e,t){t===void 0&&(t=50);var n=this.toRgb(),i=new r(e).toRgb(),a=t/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new r(o)},r.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var n=this.toHsl(),i=360/t,a=[this];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(new r(n));return a},r.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new r(e)},r.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),n=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(new r({h:n,s:i,v:a})),a=(a+s)%1;return o},r.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new r({h:(t+72)%360,s:e.s,l:e.l}),new r({h:(t+216)%360,s:e.s,l:e.l})]},r.prototype.onBackground=function(e){var t=this.toRgb(),n=new r(e).toRgb(),i=t.a+n.a*(1-t.a);return new r({r:(t.r*t.a+n.r*n.a*(1-t.a))/i,g:(t.g*t.a+n.g*n.a*(1-t.a))/i,b:(t.b*t.a+n.b*n.a*(1-t.a))/i,a:i})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(e){for(var t=this.toHsl(),n=t.h,i=[this],a=360/e,o=1;o<e;o++)i.push(new r({h:(n+o*a)%360,s:t.s,l:t.l}));return i},r.prototype.equals=function(e){return this.toRgbString()===new r(e).toRgbString()},r}();function ol(r,e=20){return r.mix("#141414",e).toString()}function vre(r){const e=ts(),t=Wr("button");return Le(()=>{let n={},i=r.color;if(i){const a=i.match(/var\((.*?)\)/);a&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const o=new dre(i),s=r.dark?o.tint(20).toString():ol(o,20);if(r.plain)n=t.cssVarBlock({"bg-color":r.dark?ol(o,90):o.tint(90).toString(),"text-color":i,"border-color":r.dark?ol(o,50):o.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":s,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":s}),e.value&&(n[t.cssVarBlockName("disabled-bg-color")]=r.dark?ol(o,90):o.tint(90).toString(),n[t.cssVarBlockName("disabled-text-color")]=r.dark?ol(o,50):o.tint(50).toString(),n[t.cssVarBlockName("disabled-border-color")]=r.dark?ol(o,80):o.tint(80).toString());else{const l=r.dark?ol(o,30):o.tint(30).toString(),u=o.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(n=t.cssVarBlock({"bg-color":i,"text-color":u,"border-color":i,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":s,"active-border-color":s}),e.value){const c=r.dark?ol(o,50):o.tint(50).toString();n[t.cssVarBlockName("disabled-bg-color")]=c,n[t.cssVarBlockName("disabled-text-color")]=r.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,n[t.cssVarBlockName("disabled-border-color")]=c}}}return n})}const pre=_t({name:"ElButton"}),gre=_t({...pre,props:$x,emits:ere,setup(r,{expose:e,emit:t}){const n=r,i=vre(n),a=Wr("button"),{_ref:o,_size:s,_type:l,_disabled:u,_props:c,shouldAddSpace:f,handleClick:h}=Zte(n,t),d=Le(()=>[a.b(),a.m(l.value),a.m(s.value),a.is("disabled",u.value),a.is("loading",n.loading),a.is("plain",n.plain),a.is("round",n.round),a.is("circle",n.circle),a.is("text",n.text),a.is("link",n.link),a.is("has-bg",n.bg)]);return e({ref:o,size:s,type:l,disabled:u,shouldAddSpace:f}),(v,p)=>(We(),or(_i(v.tag),sa({ref_key:"_ref",ref:o},U(c),{class:U(d),style:U(i),onClick:U(h)}),{default:Nt(()=>[v.loading?(We(),Mt(wn,{key:0},[v.$slots.loading?fr(v.$slots,"loading",{key:0}):(We(),or(U(dn),{key:1,class:dt(U(a).is("loading"))},{default:Nt(()=>[(We(),or(_i(v.loadingIcon)))]),_:1},8,["class"]))],64)):v.icon||v.$slots.icon?(We(),or(U(dn),{key:1},{default:Nt(()=>[v.icon?(We(),or(_i(v.icon),{key:0})):fr(v.$slots,"icon",{key:1})]),_:3})):Wt("v-if",!0),v.$slots.default?(We(),Mt("span",{key:2,class:dt({[U(a).em("text","expand")]:U(f)})},[fr(v.$slots,"default")],2)):Wt("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var mre=jr(gre,[["__file","button.vue"]]);const yre={size:$x.size,type:$x.type},bre=_t({name:"ElButtonGroup"}),wre=_t({...bre,props:yre,setup(r){const e=r;Ci(AP,Ql({size:Do(e,"size"),type:Do(e,"type")}));const t=Wr("button");return(n,i)=>(We(),Mt("div",{class:dt(U(t).b("group"))},[fr(n.$slots,"default")],2))}});var kP=jr(wre,[["__file","button-group.vue"]]);const om=ca(mre,{ButtonGroup:kP});wy(kP);var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function co(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function rs(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}const pl=new Map;if(Di){let r;document.addEventListener("mousedown",e=>r=e),document.addEventListener("mouseup",e=>{if(r){for(const t of pl.values())for(const{documentHandler:n}of t)n(e,r);r=void 0}})}function sL(r,e){let t=[];return Array.isArray(e.arg)?t=e.arg:wf(e.arg)&&t.push(e.arg),function(n,i){const a=e.instance.popperRef,o=n.target,s=i==null?void 0:i.target,l=!e||!e.instance,u=!o||!s,c=r.contains(o)||r.contains(s),f=r===o,h=t.length&&t.some(v=>v==null?void 0:v.contains(o))||t.length&&t.includes(s),d=a&&(a.contains(o)||a.contains(s));l||u||c||f||h||d||e.value(n,i)}}const xre={beforeMount(r,e){pl.has(r)||pl.set(r,[]),pl.get(r).push({documentHandler:sL(r,e),bindingFn:e.value})},updated(r,e){pl.has(r)||pl.set(r,[]);const t=pl.get(r),n=t.findIndex(a=>a.bindingFn===e.oldValue),i={documentHandler:sL(r,e),bindingFn:e.value};n>=0?t.splice(n,1,i):t.push(i)},unmounted(r){pl.delete(r)}},LP=Fr({modelValue:{type:[String,Number,Boolean],default:void 0},size:Fv,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),Sre=Fr({...LP,border:Boolean}),IP={[Oa]:r=>Sr(r)||Ta(r)||no(r),[rv]:r=>Sr(r)||Ta(r)||no(r)},OP=Symbol("radioGroupKey"),NP=(r,e)=>{const t=ut(),n=zr(OP,void 0),i=Le(()=>!!n),a=Le(()=>_k(r.value)?r.label:r.value),o=Le({get(){return i.value?n.modelValue:r.modelValue},set(f){i.value?n.changeEvent(f):e&&e(Oa,f),t.value.checked=r.modelValue===a.value}}),s=bc(Le(()=>n==null?void 0:n.size)),l=ts(Le(()=>n==null?void 0:n.disabled)),u=ut(!1),c=Le(()=>l.value||i.value&&o.value!==a.value?-1:0);return J3({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},Le(()=>i.value&&_k(r.value))),{radioRef:t,isGroup:i,radioGroup:n,focus:u,size:s,disabled:l,tabIndex:c,modelValue:o,actualValue:a}},_re=_t({name:"ElRadio"}),Ere=_t({..._re,props:Sre,emits:IP,setup(r,{emit:e}){const t=r,n=Wr("radio"),{radioRef:i,radioGroup:a,focus:o,size:s,disabled:l,modelValue:u,actualValue:c}=NP(t,e);function f(){Ln(()=>e("change",u.value))}return(h,d)=>{var v;return We(),Mt("label",{class:dt([U(n).b(),U(n).is("disabled",U(l)),U(n).is("focus",U(o)),U(n).is("bordered",h.border),U(n).is("checked",U(u)===U(c)),U(n).m(U(s))])},[bt("span",{class:dt([U(n).e("input"),U(n).is("disabled",U(l)),U(n).is("checked",U(u)===U(c))])},[$s(bt("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>Un(u)?u.value=p:null,class:dt(U(n).e("original")),value:U(c),name:h.name||((v=U(a))==null?void 0:v.name),disabled:U(l),checked:U(u)===U(c),type:"radio",onFocus:p=>o.value=!0,onBlur:p=>o.value=!1,onChange:f,onClick:Aa(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[_3,U(u)]]),bt("span",{class:dt(U(n).e("inner"))},null,2)],2),bt("span",{class:dt(U(n).e("label")),onKeydown:Aa(()=>{},["stop"])},[fr(h.$slots,"default",{},()=>[Ea(xn(h.label),1)])],42,["onKeydown"])],2)}}});var Mre=jr(Ere,[["__file","radio.vue"]]);const Cre=Fr({...LP}),Are=_t({name:"ElRadioButton"}),Tre=_t({...Are,props:Cre,setup(r){const e=r,t=Wr("radio"),{radioRef:n,focus:i,size:a,disabled:o,modelValue:s,radioGroup:l,actualValue:u}=NP(e),c=Le(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(f,h)=>{var d;return We(),Mt("label",{class:dt([U(t).b("button"),U(t).is("active",U(s)===U(u)),U(t).is("disabled",U(o)),U(t).is("focus",U(i)),U(t).bm("button",U(a))])},[$s(bt("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":v=>Un(s)?s.value=v:null,class:dt(U(t).be("button","original-radio")),value:U(u),type:"radio",name:f.name||((d=U(l))==null?void 0:d.name),disabled:U(o),onFocus:v=>i.value=!0,onBlur:v=>i.value=!1,onClick:Aa(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[_3,U(s)]]),bt("span",{class:dt(U(t).be("button","inner")),style:ln(U(s)===U(u)?U(c):{}),onKeydown:Aa(()=>{},["stop"])},[fr(f.$slots,"default",{},()=>[Ea(xn(f.label),1)])],46,["onKeydown"])],2)}}});var $P=jr(Tre,[["__file","radio-button.vue"]]);const kre=Fr({id:{type:String,default:void 0},size:Fv,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...oh(["ariaLabel"])}),Lre=IP,Ire=_t({name:"ElRadioGroup"}),Ore=_t({...Ire,props:kre,emits:Lre,setup(r,{emit:e}){const t=r,n=Wr("radio"),i=_y(),a=ut(),{formItem:o}=Bv(),{inputId:s,isLabeledByFormItem:l}=Ey(t,{formItemContext:o}),u=f=>{e(Oa,f),Ln(()=>e("change",f))};rn(()=>{const f=a.value.querySelectorAll("[type=radio]"),h=f[0];!Array.from(f).some(d=>d.checked)&&h&&(h.tabIndex=0)});const c=Le(()=>t.name||i.value);return Ci(OP,Ql({...W_(t),changeEvent:u,name:c})),qt(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(f=>void 0))}),(f,h)=>(We(),Mt("div",{id:U(s),ref_key:"radioGroupRef",ref:a,class:dt(U(n).b("group")),role:"radiogroup","aria-label":U(l)?void 0:f.ariaLabel||"radio-group","aria-labelledby":U(l)?U(o).labelId:void 0},[fr(f.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var DP=jr(Ore,[["__file","radio-group.vue"]]);const Nre=ca(Mre,{RadioButton:$P,RadioGroup:DP}),$re=wy(DP);wy($P);const Dre=Fr({color:{type:$t(Object),required:!0},vertical:{type:Boolean,default:!1}});let Yb=!1;function sv(r,e){if(!Di)return;const t=function(a){var o;(o=e.drag)==null||o.call(e,a)},n=function(a){var o;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n),document.onselectstart=null,document.ondragstart=null,Yb=!1,(o=e.end)==null||o.call(e,a)},i=function(a){var o;Yb||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),document.addEventListener("touchmove",t),document.addEventListener("touchend",n),Yb=!0,(o=e.start)==null||o.call(e,a))};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i,{passive:!1})}const Rre=r=>{const e=ai(),{t}=EE(),n=Uo(),i=Uo(),a=Le(()=>r.color.get("alpha")),o=Le(()=>t("el.colorpicker.alphaLabel"));function s(f){var h;f.target!==n.value&&l(f),(h=n.value)==null||h.focus()}function l(f){if(!i.value||!n.value)return;const d=e.vnode.el.getBoundingClientRect(),{clientX:v,clientY:p}=aE(f);if(r.vertical){let g=p-d.top;g=Math.max(n.value.offsetHeight/2,g),g=Math.min(g,d.height-n.value.offsetHeight/2),r.color.set("alpha",Math.round((g-n.value.offsetHeight/2)/(d.height-n.value.offsetHeight)*100))}else{let g=v-d.left;g=Math.max(n.value.offsetWidth/2,g),g=Math.min(g,d.width-n.value.offsetWidth/2),r.color.set("alpha",Math.round((g-n.value.offsetWidth/2)/(d.width-n.value.offsetWidth)*100))}}function u(f){const{code:h,shiftKey:d}=f,v=d?10:1;switch(h){case eo.left:case eo.down:f.preventDefault(),f.stopPropagation(),c(-v);break;case eo.right:case eo.up:f.preventDefault(),f.stopPropagation(),c(v);break}}function c(f){let h=a.value+f;h=h<0?0:h>100?100:h,r.color.set("alpha",h)}return{thumb:n,bar:i,alpha:a,alphaLabel:o,handleDrag:l,handleClick:s,handleKeydown:u}},Pre=(r,{bar:e,thumb:t,handleDrag:n})=>{const i=ai(),a=Wr("color-alpha-slider"),o=ut(0),s=ut(0),l=ut();function u(){if(!t.value||r.vertical)return 0;const y=i.vnode.el,w=r.color.get("alpha");return y?Math.round(w*(y.offsetWidth-t.value.offsetWidth/2)/100):0}function c(){if(!t.value)return 0;const y=i.vnode.el;if(!r.vertical)return 0;const w=r.color.get("alpha");return y?Math.round(w*(y.offsetHeight-t.value.offsetHeight/2)/100):0}function f(){if(r.color&&r.color.value){const{r:y,g:w,b}=r.color.toRgb();return`linear-gradient(to right, rgba(${y}, ${w}, ${b}, 0) 0%, rgba(${y}, ${w}, ${b}, 1) 100%)`}return""}function h(){o.value=u(),s.value=c(),l.value=f()}rn(()=>{if(!e.value||!t.value)return;const y={drag:w=>{n(w)},end:w=>{n(w)}};sv(e.value,y),sv(t.value,y),h()}),qt(()=>r.color.get("alpha"),()=>h()),qt(()=>r.color.value,()=>h());const d=Le(()=>[a.b(),a.is("vertical",r.vertical)]),v=Le(()=>a.e("bar")),p=Le(()=>a.e("thumb")),g=Le(()=>({background:l.value})),m=Le(()=>({left:ac(o.value),top:ac(s.value)}));return{rootKls:d,barKls:v,barStyle:g,thumbKls:p,thumbStyle:m,update:h}},Fre="ElColorAlphaSlider",Bre=_t({name:Fre}),zre=_t({...Bre,props:Dre,setup(r,{expose:e}){const t=r,{alpha:n,alphaLabel:i,bar:a,thumb:o,handleDrag:s,handleClick:l,handleKeydown:u}=Rre(t),{rootKls:c,barKls:f,barStyle:h,thumbKls:d,thumbStyle:v,update:p}=Pre(t,{bar:a,thumb:o,handleDrag:s});return e({update:p,bar:a,thumb:o}),(g,m)=>(We(),Mt("div",{class:dt(U(c))},[bt("div",{ref_key:"bar",ref:a,class:dt(U(f)),style:ln(U(h)),onClick:U(l)},null,14,["onClick"]),bt("div",{ref_key:"thumb",ref:o,class:dt(U(d)),style:ln(U(v)),"aria-label":U(i),"aria-valuenow":U(n),"aria-orientation":g.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:U(u)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Gre=jr(zre,[["__file","alpha-slider.vue"]]);const jre=_t({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(r){const e=Wr("color-hue-slider"),t=ai(),n=ut(),i=ut(),a=ut(0),o=ut(0),s=Le(()=>r.color.get("hue"));qt(()=>s.value,()=>{h()});function l(d){d.target!==n.value&&u(d)}function u(d){if(!i.value||!n.value)return;const p=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:m}=aE(d);let y;if(r.vertical){let w=m-p.top;w=Math.min(w,p.height-n.value.offsetHeight/2),w=Math.max(n.value.offsetHeight/2,w),y=Math.round((w-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*360)}else{let w=g-p.left;w=Math.min(w,p.width-n.value.offsetWidth/2),w=Math.max(n.value.offsetWidth/2,w),y=Math.round((w-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*360)}r.color.set("hue",y)}function c(){if(!n.value)return 0;const d=t.vnode.el;if(r.vertical)return 0;const v=r.color.get("hue");return d?Math.round(v*(d.offsetWidth-n.value.offsetWidth/2)/360):0}function f(){if(!n.value)return 0;const d=t.vnode.el;if(!r.vertical)return 0;const v=r.color.get("hue");return d?Math.round(v*(d.offsetHeight-n.value.offsetHeight/2)/360):0}function h(){a.value=c(),o.value=f()}return rn(()=>{if(!i.value||!n.value)return;const d={drag:v=>{u(v)},end:v=>{u(v)}};sv(i.value,d),sv(n.value,d),h()}),{bar:i,thumb:n,thumbLeft:a,thumbTop:o,hueValue:s,handleClick:l,update:h,ns:e}}});function Ure(r,e,t,n,i,a){return We(),Mt("div",{class:dt([r.ns.b(),r.ns.is("vertical",r.vertical)])},[bt("div",{ref:"bar",class:dt(r.ns.e("bar")),onClick:r.handleClick},null,10,["onClick"]),bt("div",{ref:"thumb",class:dt(r.ns.e("thumb")),style:ln({left:r.thumbLeft+"px",top:r.thumbTop+"px"})},null,6)],2)}var Wre=jr(jre,[["render",Ure],["__file","hue-slider.vue"]]);const Hre=Fr({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Fv,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ki.teleported,predefine:{type:$t(Array)},validateEvent:{type:Boolean,default:!0},...oh(["ariaLabel"])}),Vre={[Oa]:r=>Sr(r)||Wo(r),[rv]:r=>Sr(r)||Wo(r),activeChange:r=>Sr(r)||Wo(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent},RP=Symbol("colorPickerContextKey"),lL=function(r,e,t){return[r,e*t/((r=(2-e)*t)<1?r:2-r)||0,r/2]},Yre=function(r){return typeof r=="string"&&r.includes(".")&&Number.parseFloat(r)===1},Xre=function(r){return typeof r=="string"&&r.includes("%")},xf=function(r,e){Yre(r)&&(r="100%");const t=Xre(r);return r=Math.min(e,Math.max(0,Number.parseFloat(`${r}`))),t&&(r=Number.parseInt(`${r*e}`,10)/100),Math.abs(r-e)<1e-6?1:r%e/Number.parseFloat(e)},uL={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},p0=r=>{r=Math.min(Math.round(r),255);const e=Math.floor(r/16),t=r%16;return`${uL[e]||e}${uL[t]||t}`},cL=function({r,g:e,b:t}){return Number.isNaN(+r)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${p0(r)}${p0(e)}${p0(t)}`},Xb={A:10,B:11,C:12,D:13,E:14,F:15},Cu=function(r){return r.length===2?(Xb[r[0].toUpperCase()]||+r[0])*16+(Xb[r[1].toUpperCase()]||+r[1]):Xb[r[1].toUpperCase()]||+r[1]},Kre=function(r,e,t){e=e/100,t=t/100;let n=e;const i=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,n*=i<=1?i:2-i;const a=(t+e)/2,o=t===0?2*n/(i+n):2*e/(t+e);return{h:r,s:o*100,v:a*100}},fL=(r,e,t)=>{r=xf(r,255),e=xf(e,255),t=xf(t,255);const n=Math.max(r,e,t),i=Math.min(r,e,t);let a;const o=n,s=n-i,l=n===0?0:s/n;if(n===i)a=0;else{switch(n){case r:{a=(e-t)/s+(e<t?6:0);break}case e:{a=(t-r)/s+2;break}case t:{a=(r-e)/s+4;break}}a/=6}return{h:a*360,s:l*100,v:o*100}},zh=function(r,e,t){r=xf(r,360)*6,e=xf(e,100),t=xf(t,100);const n=Math.floor(r),i=r-n,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),l=n%6,u=[t,o,a,a,s,t][l],c=[s,t,t,o,a,a][l],f=[a,a,s,t,t,o][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(f*255)}};let Id=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Nr(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const n in e)Nr(e,n)&&this.set(n,e[n]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return zh(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(n,i,a)=>{this._hue=Math.max(0,Math.min(360,n)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(e.includes("hsl")){const n=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3){const{h:i,s:a,v:o}=Kre(n[0],n[1],n[2]);t(i,a,o)}}else if(e.includes("hsv")){const n=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3&&t(n[0],n[1],n[2])}else if(e.includes("rgb")){const n=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3){const{h:i,s:a,v:o}=fL(n[0],n[1],n[2]);t(i,a,o)}}else if(e.includes("#")){const n=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(n))return;let i,a,o;n.length===3?(i=Cu(n[0]+n[0]),a=Cu(n[1]+n[1]),o=Cu(n[2]+n[2])):(n.length===6||n.length===8)&&(i=Cu(n.slice(0,2)),a=Cu(n.slice(2,4)),o=Cu(n.slice(4,6))),n.length===8?this._alpha=Cu(n.slice(6))/255*100:(n.length===3||n.length===6)&&(this._alpha=100);const{h:s,s:l,v:u}=fL(i,a,o);t(s,l,u)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:n,_alpha:i,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const o=lL(e,t/100,n/100);this.value=`hsla(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(n)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${cL(zh(e,t,n))}${p0(i*255/100)}`;break}default:{const{r:o,g:s,b:l}=zh(e,t,n);this.value=`rgba(${o}, ${s}, ${l}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const o=lL(e,t/100,n/100);this.value=`hsl(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(n)}%)`;break}case"rgb":{const{r:o,g:s,b:l}=zh(e,t,n);this.value=`rgb(${o}, ${s}, ${l})`;break}default:this.value=cL(zh(e,t,n))}}};const qre=_t({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(r){const e=Wr("color-predefine"),{currentColor:t}=zr(RP),n=ut(a(r.colors,r.color));qt(()=>t.value,o=>{const s=new Id;s.fromString(o),n.value.forEach(l=>{l.selected=s.compare(l)})}),a3(()=>{n.value=a(r.colors,r.color)});function i(o){r.color.fromString(r.colors[o])}function a(o,s){return o.map(l=>{const u=new Id;return u.enableAlpha=r.enableAlpha,u.format="rgba",u.fromString(l),u.selected=u.value===s.value,u})}return{rgbaColors:n,handleSelect:i,ns:e}}});function Zre(r,e,t,n,i,a){return We(),Mt("div",{class:dt(r.ns.b())},[bt("div",{class:dt(r.ns.e("colors"))},[(We(!0),Mt(wn,null,K_(r.rgbaColors,(o,s)=>(We(),Mt("div",{key:r.colors[s],class:dt([r.ns.e("color-selector"),r.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>r.handleSelect(s)},[bt("div",{style:ln({backgroundColor:o.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Qre=jr(qre,[["render",Zre],["__file","predefine.vue"]]);const Jre=_t({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(r){const e=Wr("color-svpanel"),t=ai(),n=ut(0),i=ut(0),a=ut("hsl(0, 100%, 50%)"),o=Le(()=>{const u=r.color.get("hue"),c=r.color.get("value");return{hue:u,value:c}});function s(){const u=r.color.get("saturation"),c=r.color.get("value"),f=t.vnode.el,{clientWidth:h,clientHeight:d}=f;i.value=u*h/100,n.value=(100-c)*d/100,a.value=`hsl(${r.color.get("hue")}, 100%, 50%)`}function l(u){const f=t.vnode.el.getBoundingClientRect(),{clientX:h,clientY:d}=aE(u);let v=h-f.left,p=d-f.top;v=Math.max(0,v),v=Math.min(v,f.width),p=Math.max(0,p),p=Math.min(p,f.height),i.value=v,n.value=p,r.color.set({saturation:v/f.width*100,value:100-p/f.height*100})}return qt(()=>o.value,()=>{s()}),rn(()=>{sv(t.vnode.el,{drag:u=>{l(u)},end:u=>{l(u)}}),s()}),{cursorTop:n,cursorLeft:i,background:a,colorValue:o,handleDrag:l,update:s,ns:e}}});function ene(r,e,t,n,i,a){return We(),Mt("div",{class:dt(r.ns.b()),style:ln({backgroundColor:r.background})},[bt("div",{class:dt(r.ns.e("white"))},null,2),bt("div",{class:dt(r.ns.e("black"))},null,2),bt("div",{class:dt(r.ns.e("cursor")),style:ln({top:r.cursorTop+"px",left:r.cursorLeft+"px"})},[bt("div")],6)],6)}var tne=jr(Jre,[["render",ene],["__file","sv-panel.vue"]]);const rne=_t({name:"ElColorPicker"}),nne=_t({...rne,props:Hre,emits:Vre,setup(r,{expose:e,emit:t}){const n=r,{t:i}=EE(),a=Wr("color"),{formItem:o}=Bv(),s=bc(),l=ts(),{inputId:u,isLabeledByFormItem:c}=Ey(n,{formItemContext:o}),f=ut(),h=ut(),d=ut(),v=ut(),p=ut(),g=ut(),{isFocused:m,handleFocus:y,handleBlur:w}=gP(p,{beforeFocus(){return l.value},beforeBlur(ae){var pe;return(pe=v.value)==null?void 0:pe.isFocusInsideContent(ae)},afterBlur(){I(!1),$()}});let b=!0;const x=Ql(new Id({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue})),S=ut(!1),_=ut(!1),M=ut(""),A=Le(()=>!n.modelValue&&!_.value?"transparent":L(x,n.showAlpha)),E=Le(()=>!n.modelValue&&!_.value?"":x.value),T=Le(()=>c.value?void 0:n.ariaLabel||i("el.colorpicker.defaultLabel")),C=Le(()=>c.value?o==null?void 0:o.labelId:void 0),k=Le(()=>[a.b("picker"),a.is("disabled",l.value),a.bm("picker",s.value),a.is("focused",m.value)]);function L(ae,pe){if(!(ae instanceof Id))throw new TypeError("color should be instance of _color Class");const{r:De,g:Je,b:ee}=ae.toRgb();return pe?`rgba(${De}, ${Je}, ${ee}, ${ae.get("alpha")/100})`:`rgb(${De}, ${Je}, ${ee})`}function I(ae){S.value=ae}const O=gZ(I,100,{leading:!0});function N(){l.value||I(!0)}function D(){O(!1),$()}function $(){Ln(()=>{n.modelValue?x.fromString(n.modelValue):(x.value="",Ln(()=>{_.value=!1}))})}function R(){l.value||O(!S.value)}function B(){x.fromString(M.value)}function j(){const ae=x.value;t(Oa,ae),t("change",ae),n.validateEvent&&(o==null||o.validate("change").catch(pe=>void 0)),O(!1),Ln(()=>{const pe=new Id({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue});x.compare(pe)||$()})}function G(){O(!1),t(Oa,null),t("change",null),n.modelValue!==null&&n.validateEvent&&(o==null||o.validate("change").catch(ae=>void 0)),$()}function z(){S.value&&(D(),m.value&&ie())}function W(ae){ae.preventDefault(),ae.stopPropagation(),I(!1),$()}function Q(ae){switch(ae.code){case eo.enter:case eo.space:ae.preventDefault(),ae.stopPropagation(),N(),g.value.focus();break;case eo.esc:W(ae);break}}function ie(){p.value.focus()}function se(){p.value.blur()}return rn(()=>{n.modelValue&&(M.value=E.value)}),qt(()=>n.modelValue,ae=>{ae?ae&&ae!==x.value&&(b=!1,x.fromString(ae)):_.value=!1}),qt(()=>E.value,ae=>{M.value=ae,b&&t("activeChange",ae),b=!0}),qt(()=>x.value,()=>{!n.modelValue&&!_.value&&(_.value=!0)}),qt(()=>S.value,()=>{Ln(()=>{var ae,pe,De;(ae=f.value)==null||ae.update(),(pe=h.value)==null||pe.update(),(De=d.value)==null||De.update()})}),Ci(RP,{currentColor:E}),e({color:x,show:N,hide:D,focus:ie,blur:se}),(ae,pe)=>(We(),or(U(BE),{ref_key:"popper",ref:v,visible:S.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[U(a).be("picker","panel"),U(a).b("dropdown"),ae.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:ae.teleported,transition:`${U(a).namespace.value}-zoom-in-top`,persistent:"",onHide:De=>I(!1)},{content:Nt(()=>[$s((We(),Mt("div",{onKeydown:Jd(W,["esc"])},[bt("div",{class:dt(U(a).be("dropdown","main-wrapper"))},[St(Wre,{ref_key:"hue",ref:f,class:"hue-slider",color:U(x),vertical:""},null,8,["color"]),St(tne,{ref_key:"sv",ref:h,color:U(x)},null,8,["color"])],2),ae.showAlpha?(We(),or(Gre,{key:0,ref_key:"alpha",ref:d,color:U(x)},null,8,["color"])):Wt("v-if",!0),ae.predefine?(We(),or(Qre,{key:1,ref:"predefine","enable-alpha":ae.showAlpha,color:U(x),colors:ae.predefine},null,8,["enable-alpha","color","colors"])):Wt("v-if",!0),bt("div",{class:dt(U(a).be("dropdown","btns"))},[bt("span",{class:dt(U(a).be("dropdown","value"))},[St(U(bP),{ref_key:"inputRef",ref:g,modelValue:M.value,"onUpdate:modelValue":De=>M.value=De,"validate-event":!1,size:"small",onKeyup:Jd(B,["enter"]),onBlur:B},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),St(U(om),{class:dt(U(a).be("dropdown","link-btn")),text:"",size:"small",onClick:G},{default:Nt(()=>[Ea(xn(U(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),St(U(om),{plain:"",size:"small",class:dt(U(a).be("dropdown","btn")),onClick:j},{default:Nt(()=>[Ea(xn(U(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[U(xre),z]])]),default:Nt(()=>[bt("div",sa({id:U(u),ref_key:"triggerRef",ref:p},ae.$attrs,{class:U(k),role:"button","aria-label":U(T),"aria-labelledby":U(C),"aria-description":U(i)("el.colorpicker.description",{color:ae.modelValue||""}),"aria-disabled":U(l),tabindex:U(l)?-1:ae.tabindex,onKeydown:Q,onFocus:U(y),onBlur:U(w)}),[U(l)?(We(),Mt("div",{key:0,class:dt(U(a).be("picker","mask"))},null,2)):Wt("v-if",!0),bt("div",{class:dt(U(a).be("picker","trigger")),onClick:R},[bt("span",{class:dt([U(a).be("picker","color"),U(a).is("alpha",ae.showAlpha)])},[bt("span",{class:dt(U(a).be("picker","color-inner")),style:ln({backgroundColor:U(A)})},[$s(St(U(dn),{class:dt([U(a).be("picker","icon"),U(a).is("icon-arrow-down")])},{default:Nt(()=>[St(U(TZ))]),_:1},8,["class"]),[[Qd,ae.modelValue||_.value]]),$s(St(U(dn),{class:dt([U(a).be("picker","empty"),U(a).is("icon-close")])},{default:Nt(()=>[St(U(SE))]),_:1},8,["class"]),[[Qd,!ae.modelValue&&!_.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var ine=jr(nne,[["__file","color-picker.vue"]]);const ane=ca(ine),one=_t({inheritAttrs:!1});function sne(r,e,t,n,i,a){return fr(r.$slots,"default")}var lne=jr(one,[["render",sne],["__file","collection.vue"]]);const une=_t({name:"ElCollectionItem",inheritAttrs:!1});function cne(r,e,t,n,i,a){return fr(r.$slots,"default")}var fne=jr(une,[["render",cne],["__file","collection-item.vue"]]);const hne="data-el-collection-item",dne=r=>{const e=`El${r}Collection`,t=`${e}Item`,n=Symbol(e),i=Symbol(t),a={...lne,name:e,setup(){const s=ut(null),l=new Map;Ci(n,{itemMap:l,getItems:()=>{const c=U(s);if(!c)return[];const f=Array.from(c.querySelectorAll(`[${hne}]`));return[...l.values()].sort((d,v)=>f.indexOf(d.ref)-f.indexOf(v.ref))},collectionRef:s})}},o={...fne,name:t,setup(s,{attrs:l}){const u=ut(null),c=zr(n,void 0);Ci(i,{collectionItemRef:u}),rn(()=>{const f=U(u);f&&c.itemMap.set(f,{ref:f,...l})}),ji(()=>{const f=U(u);c.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:n,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:a,ElCollectionItem:o}},Kb=Fr({trigger:ov.trigger,effect:{...Ki.effect,default:"light"},type:{type:$t(String)},placement:{type:$t(String),default:"bottom"},popperOptions:{type:$t(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:$t([Number,String]),default:0},maxHeight:{type:$t([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:$t(Object)},teleported:Ki.teleported});Fr({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ks}});Fr({onKeydown:{type:$t(Function)}});dne("Dropdown");const vne=Fr({trigger:ov.trigger,placement:Kb.placement,disabled:ov.disabled,visible:Ki.visible,transition:Ki.transition,popperOptions:Kb.popperOptions,tabindex:Kb.tabindex,content:Ki.content,popperStyle:Ki.popperStyle,popperClass:Ki.popperClass,enterable:{...Ki.enterable,default:!0},effect:{...Ki.effect,default:"light"},teleported:Ki.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),pne={"update:visible":r=>no(r),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},gne="onUpdate:visible",mne=_t({name:"ElPopover"}),yne=_t({...mne,props:vne,emits:pne,setup(r,{expose:e,emit:t}){const n=r,i=Le(()=>n[gne]),a=Wr("popover"),o=ut(),s=Le(()=>{var g;return(g=U(o))==null?void 0:g.popperRef}),l=Le(()=>[{width:ac(n.width)},n.popperStyle]),u=Le(()=>[a.b(),n.popperClass,{[a.m("plain")]:!!n.content}]),c=Le(()=>n.transition===`${a.namespace.value}-fade-in-linear`),f=()=>{var g;(g=o.value)==null||g.hide()},h=()=>{t("before-enter")},d=()=>{t("before-leave")},v=()=>{t("after-enter")},p=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:s,hide:f}),(g,m)=>(We(),or(U(BE),sa({ref_key:"tooltipRef",ref:o},g.$attrs,{trigger:g.trigger,placement:g.placement,disabled:g.disabled,visible:g.visible,transition:g.transition,"popper-options":g.popperOptions,tabindex:g.tabindex,content:g.content,offset:g.offset,"show-after":g.showAfter,"hide-after":g.hideAfter,"auto-close":g.autoClose,"show-arrow":g.showArrow,"aria-label":g.title,effect:g.effect,enterable:g.enterable,"popper-class":U(u),"popper-style":U(l),teleported:g.teleported,persistent:g.persistent,"gpu-acceleration":U(c),"onUpdate:visible":U(i),onBeforeShow:h,onBeforeHide:d,onShow:v,onHide:p}),{content:Nt(()=>[g.title?(We(),Mt("div",{key:0,class:dt(U(a).e("title")),role:"title"},xn(g.title),3)):Wt("v-if",!0),fr(g.$slots,"default",{},()=>[Ea(xn(g.content),1)])]),default:Nt(()=>[g.$slots.reference?fr(g.$slots,"reference",{key:0}):Wt("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var bne=jr(yne,[["__file","popover.vue"]]);const hL=(r,e)=>{const t=e.arg||e.value,n=t==null?void 0:t.popperRef;n&&(n.triggerRef=r)};var wne={mounted(r,e){hL(r,e)},updated(r,e){hL(r,e)}};const xne="popover",Sne=iQ(wne,xne),_ne=ca(bne,{directive:Sne}),Ene=Fr({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:r=>r>=0&&r<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:$t(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:$t([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:$t(Function),default:r=>`${r}%`}}),Mne=_t({name:"ElProgress"}),Cne=_t({...Mne,props:Ene,setup(r){const e=r,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=Wr("progress"),i=Le(()=>{const w={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},b=y(e.percentage);return b.includes("gradient")?w.background=b:w.backgroundColor=b,w}),a=Le(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=Le(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),s=Le(()=>{const w=o.value,b=e.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${w}
          a ${w} ${w} 0 1 1 0 ${b?"-":""}${w*2}
          a ${w} ${w} 0 1 1 0 ${b?"":"-"}${w*2}
          `}),l=Le(()=>2*Math.PI*o.value),u=Le(()=>e.type==="dashboard"?.75:1),c=Le(()=>`${-1*l.value*(1-u.value)/2}px`),f=Le(()=>({strokeDasharray:`${l.value*u.value}px, ${l.value}px`,strokeDashoffset:c.value})),h=Le(()=>({strokeDasharray:`${l.value*u.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),d=Le(()=>{let w;return e.color?w=y(e.percentage):w=t[e.status]||t.default,w}),v=Le(()=>e.status==="warning"?QZ:e.type==="line"?e.status==="success"?wE:xE:e.status==="success"?q3:SE),p=Le(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),g=Le(()=>e.format(e.percentage));function m(w){const b=100/w.length;return w.map((S,_)=>Sr(S)?{color:S,percentage:(_+1)*b}:S).sort((S,_)=>S.percentage-_.percentage)}const y=w=>{var b;const{color:x}=e;if(rr(x))return x(w);if(Sr(x))return x;{const S=m(x);for(const _ of S)if(_.percentage>w)return _.color;return(b=S[S.length-1])==null?void 0:b.color}};return(w,b)=>(We(),Mt("div",{class:dt([U(n).b(),U(n).m(w.type),U(n).is(w.status),{[U(n).m("without-text")]:!w.showText,[U(n).m("text-inside")]:w.textInside}]),role:"progressbar","aria-valuenow":w.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[w.type==="line"?(We(),Mt("div",{key:0,class:dt(U(n).b("bar"))},[bt("div",{class:dt(U(n).be("bar","outer")),style:ln({height:`${w.strokeWidth}px`})},[bt("div",{class:dt([U(n).be("bar","inner"),{[U(n).bem("bar","inner","indeterminate")]:w.indeterminate},{[U(n).bem("bar","inner","striped")]:w.striped},{[U(n).bem("bar","inner","striped-flow")]:w.stripedFlow}]),style:ln(U(i))},[(w.showText||w.$slots.default)&&w.textInside?(We(),Mt("div",{key:0,class:dt(U(n).be("bar","innerText"))},[fr(w.$slots,"default",{percentage:w.percentage},()=>[bt("span",null,xn(U(g)),1)])],2)):Wt("v-if",!0)],6)],6)],2)):(We(),Mt("div",{key:1,class:dt(U(n).b("circle")),style:ln({height:`${w.width}px`,width:`${w.width}px`})},[(We(),Mt("svg",{viewBox:"0 0 100 100"},[bt("path",{class:dt(U(n).be("circle","track")),d:U(s),stroke:`var(${U(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":w.strokeLinecap,"stroke-width":U(a),fill:"none",style:ln(U(f))},null,14,["d","stroke","stroke-linecap","stroke-width"]),bt("path",{class:dt(U(n).be("circle","path")),d:U(s),stroke:U(d),fill:"none",opacity:w.percentage?1:0,"stroke-linecap":w.strokeLinecap,"stroke-width":U(a),style:ln(U(h))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(w.showText||w.$slots.default)&&!w.textInside?(We(),Mt("div",{key:2,class:dt(U(n).e("text")),style:ln({fontSize:`${U(p)}px`})},[fr(w.$slots,"default",{percentage:w.percentage},()=>[w.status?(We(),or(U(dn),{key:1},{default:Nt(()=>[(We(),or(_i(U(v))))]),_:1})):(We(),Mt("span",{key:0},xn(U(g)),1))])],6)):Wt("v-if",!0)],10,["aria-valuenow"]))}});var Ane=jr(Cne,[["__file","progress.vue"]]);const Tne=ca(Ane),kne=Fr({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:aQ},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:ks},activeActionIcon:{type:ks},activeIcon:{type:ks},inactiveIcon:{type:ks},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:$t(Function)},id:String,tabindex:{type:[String,Number]},...oh(["ariaLabel"])}),Lne={[Oa]:r=>no(r)||Sr(r)||Ta(r),[rv]:r=>no(r)||Sr(r)||Ta(r),[Ax]:r=>no(r)||Sr(r)||Ta(r)},PP="ElSwitch",Ine=_t({name:PP}),One=_t({...Ine,props:kne,emits:Lne,setup(r,{expose:e,emit:t}){const n=r,{formItem:i}=Bv(),a=bc(),o=Wr("switch"),{inputId:s}=Ey(n,{formItemContext:i}),l=ts(Le(()=>n.loading)),u=ut(n.modelValue!==!1),c=ut(),f=ut(),h=Le(()=>[o.b(),o.m(a.value),o.is("disabled",l.value),o.is("checked",m.value)]),d=Le(()=>[o.e("label"),o.em("label","left"),o.is("active",!m.value)]),v=Le(()=>[o.e("label"),o.em("label","right"),o.is("active",m.value)]),p=Le(()=>({width:ac(n.width)}));qt(()=>n.modelValue,()=>{u.value=!0});const g=Le(()=>u.value?n.modelValue:!1),m=Le(()=>g.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(g.value)||(t(Oa,n.inactiveValue),t(rv,n.inactiveValue),t(Ax,n.inactiveValue)),qt(m,x=>{var S;c.value.checked=x,n.validateEvent&&((S=i==null?void 0:i.validate)==null||S.call(i,"change").catch(_=>void 0))});const y=()=>{const x=m.value?n.inactiveValue:n.activeValue;t(Oa,x),t(rv,x),t(Ax,x),Ln(()=>{c.value.checked=m.value})},w=()=>{if(l.value)return;const{beforeChange:x}=n;if(!x){y();return}const S=x();[G0(S),no(S)].includes(!0)||Dv(PP,"beforeChange must return type `Promise<boolean>` or `boolean`"),G0(S)?S.then(M=>{M&&y()}).catch(M=>{}):S&&y()},b=()=>{var x,S;(S=(x=c.value)==null?void 0:x.focus)==null||S.call(x)};return rn(()=>{c.value.checked=m.value}),e({focus:b,checked:m}),(x,S)=>(We(),Mt("div",{class:dt(U(h)),onClick:Aa(w,["prevent"])},[bt("input",{id:U(s),ref_key:"input",ref:c,class:dt(U(o).e("input")),type:"checkbox",role:"switch","aria-checked":U(m),"aria-disabled":U(l),"aria-label":x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:U(l),tabindex:x.tabindex,onChange:y,onKeydown:Jd(w,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?(We(),Mt("span",{key:0,class:dt(U(d))},[x.inactiveIcon?(We(),or(U(dn),{key:0},{default:Nt(()=>[(We(),or(_i(x.inactiveIcon)))]),_:1})):Wt("v-if",!0),!x.inactiveIcon&&x.inactiveText?(We(),Mt("span",{key:1,"aria-hidden":U(m)},xn(x.inactiveText),9,["aria-hidden"])):Wt("v-if",!0)],2)):Wt("v-if",!0),bt("span",{ref_key:"core",ref:f,class:dt(U(o).e("core")),style:ln(U(p))},[x.inlinePrompt?(We(),Mt("div",{key:0,class:dt(U(o).e("inner"))},[x.activeIcon||x.inactiveIcon?(We(),or(U(dn),{key:0,class:dt(U(o).is("icon"))},{default:Nt(()=>[(We(),or(_i(U(m)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?(We(),Mt("span",{key:1,class:dt(U(o).is("text")),"aria-hidden":!U(m)},xn(U(m)?x.activeText:x.inactiveText),11,["aria-hidden"])):Wt("v-if",!0)],2)):Wt("v-if",!0),bt("div",{class:dt(U(o).e("action"))},[x.loading?(We(),or(U(dn),{key:0,class:dt(U(o).is("loading"))},{default:Nt(()=>[St(U(_E))]),_:1},8,["class"])):U(m)?fr(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?(We(),or(U(dn),{key:0},{default:Nt(()=>[(We(),or(_i(x.activeActionIcon)))]),_:1})):Wt("v-if",!0)]):U(m)?Wt("v-if",!0):fr(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?(We(),or(U(dn),{key:0},{default:Nt(()=>[(We(),or(_i(x.inactiveActionIcon)))]),_:1})):Wt("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?(We(),Mt("span",{key:1,class:dt(U(v))},[x.activeIcon?(We(),or(U(dn),{key:0},{default:Nt(()=>[(We(),or(_i(x.activeIcon)))]),_:1})):Wt("v-if",!0),!x.activeIcon&&x.activeText?(We(),Mt("span",{key:1,"aria-hidden":!U(m)},xn(x.activeText),9,["aria-hidden"])):Wt("v-if",!0)],2)):Wt("v-if",!0)],10,["onClick"]))}});var Nne=jr(One,[["__file","switch.vue"]]);const $ne=ca(Nne),FP=Symbol("uploadContextKey"),Dne="ElUpload";class Rne extends Error{constructor(e,t,n,i){super(e),this.name="UploadAjaxError",this.status=t,this.method=n,this.url=i}}function dL(r,e,t){let n;return t.response?n=`${t.response.error||t.response}`:t.responseText?n=`${t.responseText}`:n=`fail to ${e.method} ${r} ${t.status}`,new Rne(n,t.status,e.method,r)}function Pne(r){const e=r.responseText||r.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const Fne=r=>{typeof XMLHttpRequest>"u"&&Dv(Dne,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=r.action;e.upload&&e.upload.addEventListener("progress",a=>{const o=a;o.percent=a.total>0?a.loaded/a.total*100:0,r.onProgress(o)});const n=new FormData;if(r.data)for(const[a,o]of Object.entries(r.data))Jt(o)&&o.length?n.append(a,...o):n.append(a,o);n.append(r.filename,r.file,r.file.name),e.addEventListener("error",()=>{r.onError(dL(t,r,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return r.onError(dL(t,r,e));r.onSuccess(Pne(e))}),e.open(r.method,t,!0),r.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const i=r.headers||{};if(i instanceof Headers)i.forEach((a,o)=>e.setRequestHeader(o,a));else for(const[a,o]of Object.entries(i))Wo(o)||e.setRequestHeader(a,String(o));return e.send(n),e},BP=["text","picture","picture-card"];let Bne=1;const sm=()=>Date.now()+Bne++,zP=Fr({action:{type:String,default:"#"},headers:{type:$t(Object)},method:{type:String,default:"post"},data:{type:$t([Object,Function,Promise]),default:()=>im({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:$t(Array),default:()=>im([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:BP,default:"text"},httpRequest:{type:$t(Function),default:Fne},disabled:Boolean,limit:Number}),zne=Fr({...zP,beforeUpload:{type:$t(Function),default:Pr},beforeRemove:{type:$t(Function)},onRemove:{type:$t(Function),default:Pr},onChange:{type:$t(Function),default:Pr},onPreview:{type:$t(Function),default:Pr},onSuccess:{type:$t(Function),default:Pr},onProgress:{type:$t(Function),default:Pr},onError:{type:$t(Function),default:Pr},onExceed:{type:$t(Function),default:Pr},crossorigin:{type:$t(String)}}),Gne=Fr({files:{type:$t(Array),default:()=>im([])},disabled:{type:Boolean,default:!1},handlePreview:{type:$t(Function),default:Pr},listType:{type:String,values:BP,default:"text"},crossorigin:{type:$t(String)}}),jne={remove:r=>!!r},Une=_t({name:"ElUploadList"}),Wne=_t({...Une,props:Gne,emits:jne,setup(r,{emit:e}){const t=r,{t:n}=EE(),i=Wr("upload"),a=Wr("icon"),o=Wr("list"),s=ts(),l=ut(!1),u=Le(()=>[i.b("list"),i.bm("list",t.listType),i.is("disabled",t.disabled)]),c=f=>{e("remove",f)};return(f,h)=>(We(),or(S3,{tag:"ul",class:dt(U(u)),name:U(o).b()},{default:Nt(()=>[(We(!0),Mt(wn,null,K_(f.files,(d,v)=>(We(),Mt("li",{key:d.uid||d.name,class:dt([U(i).be("list","item"),U(i).is(d.status),{focusing:l.value}]),tabindex:"0",onKeydown:Jd(p=>!U(s)&&c(d),["delete"]),onFocus:p=>l.value=!0,onBlur:p=>l.value=!1,onClick:p=>l.value=!1},[fr(f.$slots,"default",{file:d,index:v},()=>[f.listType==="picture"||d.status!=="uploading"&&f.listType==="picture-card"?(We(),Mt("img",{key:0,class:dt(U(i).be("list","item-thumbnail")),src:d.url,crossorigin:f.crossorigin,alt:""},null,10,["src","crossorigin"])):Wt("v-if",!0),d.status==="uploading"||f.listType!=="picture-card"?(We(),Mt("div",{key:1,class:dt(U(i).be("list","item-info"))},[bt("a",{class:dt(U(i).be("list","item-name")),onClick:Aa(p=>f.handlePreview(d),["prevent"])},[St(U(dn),{class:dt(U(a).m("document"))},{default:Nt(()=>[St(U(RZ))]),_:1},8,["class"]),bt("span",{class:dt(U(i).be("list","item-file-name")),title:d.name},xn(d.name),11,["title"])],10,["onClick"]),d.status==="uploading"?(We(),or(U(Tne),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(d.percentage),style:ln(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Wt("v-if",!0)],2)):Wt("v-if",!0),bt("label",{class:dt(U(i).be("list","item-status-label"))},[f.listType==="text"?(We(),or(U(dn),{key:0,class:dt([U(a).m("upload-success"),U(a).m("circle-check")])},{default:Nt(()=>[St(U(wE))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(We(),or(U(dn),{key:1,class:dt([U(a).m("upload-success"),U(a).m("check")])},{default:Nt(()=>[St(U(q3))]),_:1},8,["class"])):Wt("v-if",!0)],2),U(s)?Wt("v-if",!0):(We(),or(U(dn),{key:2,class:dt(U(a).m("close")),onClick:p=>c(d)},{default:Nt(()=>[St(U(SE))]),_:2},1032,["class","onClick"])),Wt(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Wt(" This is a bug which needs to be fixed "),Wt(" TODO: Fix the incorrect navigation interaction "),U(s)?Wt("v-if",!0):(We(),Mt("i",{key:3,class:dt(U(a).m("close-tip"))},xn(U(n)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(We(),Mt("span",{key:4,class:dt(U(i).be("list","item-actions"))},[bt("span",{class:dt(U(i).be("list","item-preview")),onClick:p=>f.handlePreview(d)},[St(U(dn),{class:dt(U(a).m("zoom-in"))},{default:Nt(()=>[St(U(Z3))]),_:1},8,["class"])],10,["onClick"]),U(s)?Wt("v-if",!0):(We(),Mt("span",{key:0,class:dt(U(i).be("list","item-delete")),onClick:p=>c(d)},[St(U(dn),{class:dt(U(a).m("delete"))},{default:Nt(()=>[St(U($Z))]),_:1},8,["class"])],10,["onClick"]))],2)):Wt("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),fr(f.$slots,"append")]),_:3},8,["class","name"]))}});var vL=jr(Wne,[["__file","upload-list.vue"]]);const Hne=Fr({disabled:{type:Boolean,default:!1}}),Vne={file:r=>Jt(r)},GP="ElUploadDrag",Yne=_t({name:GP}),Xne=_t({...Yne,props:Hne,emits:Vne,setup(r,{emit:e}){zr(FP)||Dv(GP,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=Wr("upload"),i=ut(!1),a=ts(),o=l=>{if(a.value)return;i.value=!1,l.stopPropagation();const u=Array.from(l.dataTransfer.files);e("file",u)},s=()=>{a.value||(i.value=!0)};return(l,u)=>(We(),Mt("div",{class:dt([U(n).b("dragger"),U(n).is("dragover",i.value)]),onDrop:Aa(o,["prevent"]),onDragover:Aa(s,["prevent"]),onDragleave:Aa(c=>i.value=!1,["prevent"])},[fr(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Kne=jr(Xne,[["__file","upload-dragger.vue"]]);const qne=Fr({...zP,beforeUpload:{type:$t(Function),default:Pr},onRemove:{type:$t(Function),default:Pr},onStart:{type:$t(Function),default:Pr},onSuccess:{type:$t(Function),default:Pr},onProgress:{type:$t(Function),default:Pr},onError:{type:$t(Function),default:Pr},onExceed:{type:$t(Function),default:Pr}}),Zne=_t({name:"ElUploadContent",inheritAttrs:!1}),Qne=_t({...Zne,props:qne,setup(r,{expose:e}){const t=r,n=Wr("upload"),i=ts(),a=Uo({}),o=Uo(),s=p=>{if(p.length===0)return;const{autoUpload:g,limit:m,fileList:y,multiple:w,onStart:b,onExceed:x}=t;if(m&&y.length+p.length>m){x(p,y);return}w||(p=p.slice(0,1));for(const S of p){const _=S;_.uid=sm(),b(_),g&&l(_)}},l=async p=>{if(o.value.value="",!t.beforeUpload)return c(p);let g,m={};try{const w=t.data,b=t.beforeUpload(p);m=j0(t.data)?yk(t.data):t.data,g=await b,j0(t.data)&&mZ(w,m)&&(m=yk(t.data))}catch{g=!1}if(g===!1){t.onRemove(p);return}let y=p;g instanceof Blob&&(g instanceof File?y=g:y=new File([g],p.name,{type:p.type})),c(Object.assign(y,{uid:p.uid}),m)},u=async(p,g)=>rr(p)?p(g):p,c=async(p,g)=>{const{headers:m,data:y,method:w,withCredentials:b,name:x,action:S,onProgress:_,onSuccess:M,onError:A,httpRequest:E}=t;try{g=await u(g??y,p)}catch{t.onRemove(p);return}const{uid:T}=p,C={headers:m||{},withCredentials:b,file:p,data:g,method:w,filename:x,action:S,onProgress:L=>{_(L,p)},onSuccess:L=>{M(L,p),delete a.value[T]},onError:L=>{A(L,p),delete a.value[T]}},k=E(C);a.value[T]=k,k instanceof Promise&&k.then(C.onSuccess,C.onError)},f=p=>{const g=p.target.files;g&&s(Array.from(g))},h=()=>{i.value||(o.value.value="",o.value.click())},d=()=>{h()};return e({abort:p=>{MZ(a.value).filter(p?([m])=>String(p.uid)===m:()=>!0).forEach(([m,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete a.value[m]})},upload:l}),(p,g)=>(We(),Mt("div",{class:dt([U(n).b(),U(n).m(p.listType),U(n).is("drag",p.drag),U(n).is("disabled",U(i))]),tabindex:U(i)?"-1":"0",onClick:h,onKeydown:Jd(Aa(d,["self"]),["enter","space"])},[p.drag?(We(),or(Kne,{key:0,disabled:U(i),onFile:s},{default:Nt(()=>[fr(p.$slots,"default")]),_:3},8,["disabled"])):fr(p.$slots,"default",{key:1}),bt("input",{ref_key:"inputRef",ref:o,class:dt(U(n).e("input")),name:p.name,disabled:U(i),multiple:p.multiple,accept:p.accept,type:"file",onChange:f,onClick:Aa(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var pL=jr(Qne,[["__file","upload-content.vue"]]);const gL="ElUpload",mL=r=>{var e;(e=r.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(r.url)},Jne=(r,e)=>{const t=E7(r,"fileList",void 0,{passive:!0}),n=d=>t.value.find(v=>v.uid===d.uid);function i(d){var v;(v=e.value)==null||v.abort(d)}function a(d=["ready","uploading","success","fail"]){t.value=t.value.filter(v=>!d.includes(v.status))}function o(d){t.value=t.value.filter(v=>v!==d)}const s=(d,v)=>{const p=n(v);p&&(console.error(d),p.status="fail",o(p),r.onError(d,p,t.value),r.onChange(p,t.value))},l=(d,v)=>{const p=n(v);p&&(r.onProgress(d,p,t.value),p.status="uploading",p.percentage=Math.round(d.percent))},u=(d,v)=>{const p=n(v);p&&(p.status="success",p.response=d,r.onSuccess(d,p,t.value),r.onChange(p,t.value))},c=d=>{Wo(d.uid)&&(d.uid=sm());const v={name:d.name,percentage:0,status:"ready",size:d.size,raw:d,uid:d.uid};if(r.listType==="picture-card"||r.listType==="picture")try{v.url=URL.createObjectURL(d)}catch(p){p.message,r.onError(p,v,t.value)}t.value=[...t.value,v],r.onChange(v,t.value)},f=async d=>{const v=d instanceof File?n(d):d;v||Dv(gL,"file to be removed not found");const p=g=>{i(g),o(g),r.onRemove(g,t.value),mL(g)};r.beforeRemove?await r.beforeRemove(v,t.value)!==!1&&p(v):p(v)};function h(){t.value.filter(({status:d})=>d==="ready").forEach(({raw:d})=>{var v;return d&&((v=e.value)==null?void 0:v.upload(d))})}return qt(()=>r.listType,d=>{d!=="picture-card"&&d!=="picture"||(t.value=t.value.map(v=>{const{raw:p,url:g}=v;if(!g&&p)try{v.url=URL.createObjectURL(p)}catch(m){r.onError(m,v,t.value)}return v}))}),qt(t,d=>{for(const v of d)v.uid||(v.uid=sm()),v.status||(v.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:i,clearFiles:a,handleError:s,handleProgress:l,handleStart:c,handleSuccess:u,handleRemove:f,submit:h,revokeFileObjectURL:mL}},eie=_t({name:"ElUpload"}),tie=_t({...eie,props:zne,setup(r,{expose:e}){const t=r,n=ts(),i=Uo(),{abort:a,submit:o,clearFiles:s,uploadFiles:l,handleStart:u,handleError:c,handleRemove:f,handleSuccess:h,handleProgress:d,revokeFileObjectURL:v}=Jne(t,i),p=Le(()=>t.listType==="picture-card"),g=Le(()=>({...t,fileList:l.value,onStart:u,onProgress:d,onSuccess:h,onError:c,onRemove:f}));return ji(()=>{l.value.forEach(v)}),Ci(FP,{accept:Do(t,"accept")}),e({abort:a,submit:o,clearFiles:s,handleStart:u,handleRemove:f}),(m,y)=>(We(),Mt("div",null,[U(p)&&m.showFileList?(We(),or(vL,{key:0,disabled:U(n),"list-type":m.listType,files:U(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:U(f)},sT({append:Nt(()=>[St(pL,sa({ref_key:"uploadRef",ref:i},U(g)),{default:Nt(()=>[m.$slots.trigger?fr(m.$slots,"trigger",{key:0}):Wt("v-if",!0),!m.$slots.trigger&&m.$slots.default?fr(m.$slots,"default",{key:1}):Wt("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:Nt(({file:w,index:b})=>[fr(m.$slots,"file",{file:w,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Wt("v-if",!0),!U(p)||U(p)&&!m.showFileList?(We(),or(pL,sa({key:1,ref_key:"uploadRef",ref:i},U(g)),{default:Nt(()=>[m.$slots.trigger?fr(m.$slots,"trigger",{key:0}):Wt("v-if",!0),!m.$slots.trigger&&m.$slots.default?fr(m.$slots,"default",{key:1}):Wt("v-if",!0)]),_:3},16)):Wt("v-if",!0),m.$slots.trigger?fr(m.$slots,"default",{key:2}):Wt("v-if",!0),fr(m.$slots,"tip"),!U(p)&&m.showFileList?(We(),or(vL,{key:3,disabled:U(n),"list-type":m.listType,files:U(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:U(f)},sT({_:2},[m.$slots.file?{name:"default",fn:Nt(({file:w,index:b})=>[fr(m.$slots,"file",{file:w,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Wt("v-if",!0)]))}});var rie=jr(tie,[["__file","upload.vue"]]);const nie=ca(rie);var Rx=function(r,e){return Rx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Rx(r,e)};function ir(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rx(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var V=function(){return V=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V.apply(this,arguments)};function zn(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function jP(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function UP(r,e){return function(t,n){e(t,n,r)}}function iie(r,e,t,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,d=t.length-1;d>=0;d--){var v={};for(var p in n)v[p]=p==="access"?{}:n[p];for(var p in n.access)v.access[p]=n.access[p];v.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var g=(0,t[d])(s==="accessor"?{get:c.get,set:c.set}:c[l],v);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(f=o(g.get))&&(c.get=f),(f=o(g.set))&&(c.set=f),(f=o(g.init))&&i.unshift(f)}else(f=o(g))&&(s==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),h=!0}function aie(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function oie(r){return typeof r=="symbol"?r:"".concat(r)}function sie(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function WP(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function qi(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})}function Zi(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Cy=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function HP(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Cy(e,r,t)}function lm(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zE(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function VP(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(zE(arguments[e]));return r}function Ay(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function la(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function Ff(r){return this instanceof Ff?(this.v=r,this):new Ff(r)}function YP(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(v){return Promise.resolve(v).then(d,f)}}function s(d,v){n[d]&&(i[d]=function(p){return new Promise(function(g,m){a.push([d,p,g,m])>1||l(d,p)})},v&&(i[d]=v(i[d])))}function l(d,v){try{u(n[d](v))}catch(p){h(a[0][3],p)}}function u(d){d.value instanceof Ff?Promise.resolve(d.value.v).then(c,f):h(a[0][2],d)}function c(d){l("next",d)}function f(d){l("throw",d)}function h(d,v){d(v),a.shift(),a.length&&l(a[0][0],a[0][1])}}function XP(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=r[i]?function(o){return(t=!t)?{value:Ff(r[i](o)),done:!1}:a?a(o):o}:a}}function KP(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof lm=="function"?lm(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(s,l){o=r[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function qP(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var lie=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};function ZP(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Cy(e,r,t);return lie(e,r),e}function QP(r){return r&&r.__esModule?r:{default:r}}function JP(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function e5(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function t5(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function r5(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var uie=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function n5(r){function e(a){r.error=r.hasError?new uie(a,r.error,"An error was suppressed during disposal."):a,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}const cie={__extends:ir,__assign:V,__rest:zn,__decorate:jP,__param:UP,__metadata:WP,__awaiter:qi,__generator:Zi,__createBinding:Cy,__exportStar:HP,__values:lm,__read:zE,__spread:VP,__spreadArrays:Ay,__spreadArray:la,__await:Ff,__asyncGenerator:YP,__asyncDelegator:XP,__asyncValues:KP,__makeTemplateObject:qP,__importStar:ZP,__importDefault:QP,__classPrivateFieldGet:JP,__classPrivateFieldSet:e5,__classPrivateFieldIn:t5,__addDisposableResource:r5,__disposeResources:n5},fie=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:r5,get __assign(){return V},__asyncDelegator:XP,__asyncGenerator:YP,__asyncValues:KP,__await:Ff,__awaiter:qi,__classPrivateFieldGet:JP,__classPrivateFieldIn:t5,__classPrivateFieldSet:e5,__createBinding:Cy,__decorate:jP,__disposeResources:n5,__esDecorate:iie,__exportStar:HP,__extends:ir,__generator:Zi,__importDefault:QP,__importStar:ZP,__makeTemplateObject:qP,__metadata:WP,__param:UP,__propKey:oie,__read:zE,__rest:zn,__runInitializers:aie,__setFunctionName:sie,__spread:VP,__spreadArray:la,__spreadArrays:Ay,__values:lm,default:cie},Symbol.toStringTag,{value:"Module"}));var Bi=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},um=function(r,e){return Bi(r)?r.indexOf(e)>-1:!1},Ty=function(r,e){if(!Bi(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},hie=function(r,e){return e===void 0&&(e=[]),Ty(r,function(t){return!um(e,t)})},die={}.toString,fo=function(r,e){return die.call(r)==="[object "+e+"]"};const tn=function(r){return fo(r,"Function")};var Dt=function(r){return r==null};const Bt=function(r){return Array.isArray?Array.isArray(r):fo(r,"Array")},ni=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function Pe(r,e){if(r){var t;if(Bt(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(ni(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var i5=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return Pe(r,function(t,n){tn(r)&&n==="prototype"||e.push(n)}),e};function a5(r,e){var t=i5(e),n=t.length;if(Dt(r))return!n;for(var i=0;i<n;i+=1){var a=t[i];if(e[a]!==r[a]||!(a in r))return!1}return!0}var cm=function(r){return typeof r=="object"&&r!==null},ei=function(r){if(!cm(r)||!fo(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};function vie(r,e){if(!Bt(r))return null;var t;if(tn(e)&&(t=e),ei(e)&&(t=function(i){return a5(i,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function pie(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var gie=function(r,e){for(var t=null,n=0;n<r.length;n++){var i=r[n],a=i[e];if(!Dt(a)){Bt(a)?t=a[0]:t=a;break}}return t},mie=function(r){if(!Bt(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e},o5=function(r,e){if(e===void 0&&(e=[]),!Bt(r))e.push(r);else for(var t=0;t<r.length;t+=1)o5(r[t],e);return e};const Qo=function(r){if(Bt(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},Jo=function(r){if(Bt(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var s5=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(Bt(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var i=Qo(e),a=Jo(e);return{min:a,max:i}},l5=Array.prototype,yie=l5.splice,bie=l5.indexOf,wie=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=bie.call(r,i))>-1;)yie.call(r,a,1);return r},xie=Array.prototype.splice,u5=function(e,t){if(!Bi(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var a=void 0,o=t[n];(n===i||o!==a)&&(a=o,xie.call(e,o,1))}return e},c5=function(r,e,t){if(!Bt(r)&&!ei(r))return r;var n=t;return Pe(r,function(i,a){n=e(n,i,a)}),n},Sie=function(r,e){var t=[];if(!Bi(r))return t;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];e(o,n,r)&&(t.push(o),i.push(n))}return u5(r,i),t};const rt=function(r){return fo(r,"String")};function _ie(r,e){var t;if(tn(e))t=function(i,a){return e(i)-e(a)};else{var n=[];rt(e)?n.push(e):Bt(e)&&(n=e),t=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(t),r}function lv(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var Eie=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return lv([].concat.apply([],r))};const Mie=function(r,e){for(var t=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[e];if(!Dt(o)){Bt(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(t.push(l),n[l]=!0)}}}return t};function Vo(r){if(Bi(r))return r[0]}function La(r){if(Bi(r)){var e=r;return e[e.length-1]}}function Cie(r,e){return Bt(r)||rt(r)?r[0]===e:!1}function Aie(r,e){return Bt(r)||rt(r)?r[r.length-1]===e:!1}var Tie=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0},kie=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1},Lie=Object.prototype.hasOwnProperty;function fm(r,e){if(!e||!Bt(r))return{};for(var t={},n=tn(e)?e:function(s){return s[e]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),Lie.call(t,i)?t[i].push(o):t[i]=[o]}return t}function f5(r,e){if(!e)return{0:r};if(!tn(e)){var t=Bt(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=t.length;a<o;a++)i+=n[t[a]]&&n[t[a]].toString();return i}}return fm(r,e)}const Iie=function(r,e){if(!e)return[r];var t=f5(r,e),n=[];for(var i in t)n.push(t[i]);return n};function Oie(r,e){return r["_wrap_"+e]}function Gu(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var yL={};function Nie(r){var e=yL[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,yL[r]=e}return e}function $ie(r){var e=0,t=0,n=0,i=0;return Bt(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var Die=function(r,e,t){return r<e?e:r>t?t:r},g0=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var i=t.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},Rt=function(r){return fo(r,"Number")},Rie=function(r){return Rt(r)&&r%1!==0},Pie=function(r){return Rt(r)&&r%2===0},Fie=Number.isInteger?Number.isInteger:function(r){return Rt(r)&&r%1===0},Bie=function(r){return Rt(r)&&r<0},zie=1e-5;function h5(r,e,t){return t===void 0&&(t=zie),Math.abs(r-e)<t}var Gie=function(r){return Rt(r)&&r%2!==0},jie=function(r){return Rt(r)&&r>0};const Uie=function(r,e){if(Bt(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=tn(e)?e(a):a[e];o>n&&(t=a,n=o)}return t}},Wie=function(r,e){if(Bt(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],o=tn(e)?e(a):a[e];o<n&&(t=a,n=o)}return t}};var ky=function(r,e){return(r%e+e)%e},Hie=180/Math.PI,Vie=function(r){return Hie*r};const Yie=parseInt;var Xie=Math.PI/180,Ly=function(r){return Xie*r};const bL=function(r,e){return r.hasOwnProperty(e)};var GE=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return Pe(r,function(t,n){tn(r)&&n==="prototype"||e.push(t)}),e};const Kie=function(r,e){return um(GE(r),e)},lh=function(r){return Dt(r)?"":r.toString()};var qie=function(r){return lh(r).toLowerCase()},Zie=function(r){var e=lh(r);return e.charAt(0).toLowerCase()+e.substring(1)};function Qie(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var Jie=function(r){return lh(r).toUpperCase()},Bf=function(r){var e=lh(r);return e.charAt(0).toUpperCase()+e.substring(1)},eae={}.toString,d5=function(r){return eae.call(r).replace(/^\[object /,"").replace(/]$/,"")},tae=function(r){return fo(r,"Arguments")},Gv=function(r){return fo(r,"Boolean")},jE=function(r){return fo(r,"Date")},rae=function(r){return fo(r,"Error")};function nae(r){return Rt(r)&&isFinite(r)}var iae=function(r){return r===null},aae=Object.prototype,v5=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||aae;return r===t},oae=function(r){return fo(r,"RegExp")},sae=function(r){return r===void 0},lae=function(r){return r instanceof Element||r instanceof HTMLDocument};function p5(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function g5(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function qb(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function Gt(r,e,t,n){return e&&qb(r,e),t&&qb(r,t),n&&qb(r,n),r}var uae=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var i=r[n];tn(i)&&(i=i.prototype),Gt(t.prototype,i)}},br=function(r){if(typeof r!="object"||r===null)return r;var e;if(Bt(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=br(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=br(r[i]):e[i]=r[i]}return e};function jv(r,e,t){var n;return function(){var i=this,a=arguments,o=function(){n=null,t||r.apply(i,a)},s=t&&!n;clearTimeout(n),n=setTimeout(o,e),s&&r.apply(i,a)}}const m5=function(r,e){if(!tn(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=t.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return t.cache=new Map,t};var cae=5;function y5(r,e,t,n){t=t||0,n=n||cae;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&ei(a)?(ei(r[i])||(r[i]={}),t<n?y5(r[i],a,t+1,n):r[i]=e[i]):Bt(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var Vr=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)y5(r,e[n]);return r},fae=function(r,e,t,n){tn(e)||(t=e,e=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,r);return r.prototype=Gt(a,r.prototype),r.superclass=i(e.prototype,e),Gt(a,t),Gt(r,n),r},UE=function(r,e){if(!Bi(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,i=0;i<r.length;i++)if(r[i]===e){n=i;break}return n},hae=Object.prototype.hasOwnProperty;function b5(r){if(Dt(r))return!0;if(Bi(r))return!r.length;var e=d5(r);if(e==="Map"||e==="Set")return!r.size;if(v5(r))return!Object.keys(r).length;for(var t in r)if(hae.call(r,t))return!1;return!0}var Gl=function(r,e){if(r===e)return!0;if(!r||!e||rt(r)||rt(e))return!1;if(Bi(r)||Bi(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=Gl(r[n],e[n]),!!t);n++);return t}if(cm(r)||cm(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=Gl(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const dae=function(r,e,t){return tn(t)?!!t(r,e):Gl(r,e)};var sc=function(r,e){if(!Bi(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(e(i,n))}return t},vae=function(r){return r};const pae=function(r,e){e===void 0&&(e=vae);var t={};return ni(r)&&!Dt(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},Ms=function(r,e,t){for(var n=0,i=rt(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},gae=function(r,e,t){var n=r,i=rt(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(ni(n[a])||(n[a]=Rt(i[o+1])?[]:{}),n=n[a]):n[a]=t}),r};var mae=Object.prototype.hasOwnProperty;const yae=function(r,e){if(r===null||!ei(r))return{};var t={};return Pe(e,function(n){mae.call(r,n)&&(t[n]=r[n])}),t},bae=function(r,e){return c5(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},uv=function(r,e,t){var n,i,a,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&t.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},w5=function(r){return Bi(r)?Array.prototype.slice.call(r):[]};var fg={};const es=function(r){return r=r||"g",fg[r]?fg[r]+=1:fg[r]=1,r+fg[r]},sd=function(){},wae=function(r){return r};function Iy(r){return Dt(r)?0:Bi(r)?r.length:Object.keys(r).length}var hg;const ld=m5(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return hg||(hg=document.createElement("canvas").getContext("2d")),hg.font=[a,o,i,t+"px",n].join(" "),hg.measureText(rt(r)?r:"").width},function(r,e){return e===void 0&&(e={}),Ay([r],GE(e)).join("")}),xae=function(r,e,t,n){n===void 0&&(n="...");var i=16,a=ld(n,t),o=rt(r)?r:lh(r),s=e,l=[],u,c;if(ld(r,t)<=e)return r;for(;u=o.substr(0,i),c=ld(u,t),!(c+a>s&&c>s);)if(l.push(u),s-=c,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),c=ld(u,t),!(c+a>s);)if(l.push(u),s-=c,o=o.substr(1),!o)return l.join("");return""+l.join("")+n};var Sae=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const _ae=Object.freeze(Object.defineProperty({__proto__:null,Cache:Sae,assign:Gt,augment:uae,clamp:Die,clearAnimationFrame:g5,clone:br,contains:um,debounce:jv,deepMix:Vr,difference:hie,each:Pe,endsWith:Aie,every:Tie,extend:fae,filter:Ty,find:vie,findIndex:pie,firstValue:gie,fixedBase:g0,flatten:mie,flattenDeep:o5,forIn:Pe,get:Ms,getEllipsisText:xae,getRange:s5,getType:d5,getWrapBehavior:Oie,group:Iie,groupBy:fm,groupToMap:f5,has:bL,hasKey:bL,hasValue:Kie,head:Vo,identity:wae,includes:um,indexOf:UE,isArguments:tae,isArray:Bt,isArrayLike:Bi,isBoolean:Gv,isDate:jE,isDecimal:Rie,isElement:lae,isEmpty:b5,isEqual:Gl,isEqualWith:dae,isError:rae,isEven:Pie,isFinite:nae,isFunction:tn,isInteger:Fie,isMatch:a5,isNegative:Bie,isNil:Dt,isNull:iae,isNumber:Rt,isNumberEqual:h5,isObject:ni,isObjectLike:cm,isOdd:Gie,isPlainObject:ei,isPositive:jie,isPrototype:v5,isRegExp:oae,isString:rt,isType:fo,isUndefined:sae,keys:i5,last:La,lowerCase:qie,lowerFirst:Zie,map:sc,mapValues:pae,max:Qo,maxBy:Uie,measureTextWidth:ld,memoize:m5,min:Jo,minBy:Wie,mix:Gt,mod:ky,noop:sd,number2color:Nie,omit:bae,parseRadius:$ie,pick:yae,pull:wie,pullAt:u5,reduce:c5,remove:Sie,requestAnimationFrame:p5,set:gae,size:Iy,some:kie,sortBy:_ie,startsWith:Cie,substitute:Qie,throttle:uv,toArray:w5,toDegree:Vie,toInteger:Yie,toRadian:Ly,toString:lh,union:Eie,uniq:lv,uniqueId:es,upperCase:Jie,upperFirst:Bf,values:GE,valuesOfKey:Mie,wrapBehavior:Gu},Symbol.toStringTag,{value:"Module"})),Eae={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),Pe(n,function(i,a){e.on(a,i)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),Pe(t,function(i,a){e.off(a,i)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var WE=function(){function r(){}return r.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var n=br(Eae);Object.assign(n,t);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(Pe(l,function(c,f){u[f]=Gu(s,c)}),this.events=u)};i.prototype=n,r.types[e]=i},r.hasBehavior=function(e){return!!r.types[e]},r.getBehavior=function(e){return r.types[e]},r.types={},r}(),Mae="*",x5=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[Mae]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],h=f.callback,d=f.once;d&&(l.splice(c,1),l.length===0&&delete t._events[e],u--,c--),h.apply(t,n)}};s(a),s(o)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===t&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}(),Yt=1e-6,Mr=typeof Float32Array<"u"?Float32Array:Array,to=Math.random;function Cae(r){Mr=r}var Aae=Math.PI/180;function Tae(r){return r*Aae}function kae(r,e){return Math.abs(r-e)<=Yt*Math.max(1,Math.abs(r),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});const Lae=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return Mr},EPSILON:Yt,RANDOM:to,equals:kae,setMatrixArrayType:Cae,toRadian:Tae},Symbol.toStringTag,{value:"Module"}));function Iae(){var r=new Mr(4);return Mr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function Oae(r){var e=new Mr(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function Nae(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function $ae(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function Dae(r,e,t,n){var i=new Mr(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function Rae(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function Pae(r,e){if(r===e){var t=e[1];r[1]=e[2],r[2]=t}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r}function Fae(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*a-i*n;return o?(o=1/o,r[0]=a*o,r[1]=-n*o,r[2]=-i*o,r[3]=t*o,r):null}function Bae(r,e){var t=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=t,r}function zae(r){return r[0]*r[3]-r[2]*r[1]}function S5(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return r[0]=n*s+a*l,r[1]=i*s+o*l,r[2]=n*u+a*c,r[3]=i*u+o*c,r}function Gae(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+a*s,r[1]=i*l+o*s,r[2]=n*-s+a*l,r[3]=i*-s+o*l,r}function jae(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1];return r[0]=n*s,r[1]=i*s,r[2]=a*l,r[3]=o*l,r}function Uae(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r}function Wae(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r}function Hae(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function Vae(r){return Math.hypot(r[0],r[1],r[2],r[3])}function Yae(r,e,t,n){return r[2]=n[2]/n[0],t[0]=n[0],t[1]=n[1],t[3]=n[3]-r[2]*t[1],[r,e,t]}function Xae(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function _5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function Kae(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function qae(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(t-o)<=Yt*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-s)<=Yt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Yt*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Yt*Math.max(1,Math.abs(a),Math.abs(u))}function Zae(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function Qae(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}var Jae=S5,eoe=_5;const toe=Object.freeze(Object.defineProperty({__proto__:null,LDU:Yae,add:Xae,adjoint:Bae,clone:Oae,copy:Nae,create:Iae,determinant:zae,equals:qae,exactEquals:Kae,frob:Vae,fromRotation:Uae,fromScaling:Wae,fromValues:Dae,identity:$ae,invert:Fae,mul:Jae,multiply:S5,multiplyScalar:Zae,multiplyScalarAndAdd:Qae,rotate:Gae,scale:jae,set:Rae,str:Hae,sub:eoe,subtract:_5,transpose:Pae},Symbol.toStringTag,{value:"Module"}));function roe(){var r=new Mr(6);return Mr!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function noe(r){var e=new Mr(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function ioe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function aoe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function ooe(r,e,t,n,i,a){var o=new Mr(6);return o[0]=r,o[1]=e,o[2]=t,o[3]=n,o[4]=i,o[5]=a,o}function soe(r,e,t,n,i,a,o){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r}function loe(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=t*a-n*i;return l?(l=1/l,r[0]=a*l,r[1]=-n*l,r[2]=-i*l,r[3]=t*l,r[4]=(i*s-a*o)*l,r[5]=(n*o-t*s)*l,r):null}function uoe(r){return r[0]*r[3]-r[1]*r[2]}function E5(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],h=t[3],d=t[4],v=t[5];return r[0]=n*u+a*c,r[1]=i*u+o*c,r[2]=n*f+a*h,r[3]=i*f+o*h,r[4]=n*d+a*v+s,r[5]=i*d+o*v+l,r}function coe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(t),c=Math.cos(t);return r[0]=n*c+a*u,r[1]=i*c+o*u,r[2]=n*-u+a*c,r[3]=i*-u+o*c,r[4]=s,r[5]=l,r}function foe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1];return r[0]=n*u,r[1]=i*u,r[2]=a*c,r[3]=o*c,r[4]=s,r[5]=l,r}function hoe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=n*u+a*c+s,r[5]=i*u+o*c+l,r}function doe(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r[4]=0,r[5]=0,r}function voe(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r}function poe(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r}function goe(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function moe(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)}function yoe(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r}function M5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r}function boe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r}function woe(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r}function xoe(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]}function Soe(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=e[0],u=e[1],c=e[2],f=e[3],h=e[4],d=e[5];return Math.abs(t-l)<=Yt*Math.max(1,Math.abs(t),Math.abs(l))&&Math.abs(n-u)<=Yt*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=Yt*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=Yt*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=Yt*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=Yt*Math.max(1,Math.abs(s),Math.abs(d))}var _oe=E5,Eoe=M5;const Moe=Object.freeze(Object.defineProperty({__proto__:null,add:yoe,clone:noe,copy:ioe,create:roe,determinant:uoe,equals:Soe,exactEquals:xoe,frob:moe,fromRotation:doe,fromScaling:voe,fromTranslation:poe,fromValues:ooe,identity:aoe,invert:loe,mul:_oe,multiply:E5,multiplyScalar:boe,multiplyScalarAndAdd:woe,rotate:coe,scale:foe,set:soe,str:goe,sub:Eoe,subtract:M5,translate:hoe},Symbol.toStringTag,{value:"Module"}));function C5(){var r=new Mr(9);return Mr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Coe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Aoe(r){var e=new Mr(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Toe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function koe(r,e,t,n,i,a,o,s,l){var u=new Mr(9);return u[0]=r,u[1]=e,u[2]=t,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function Loe(r,e,t,n,i,a,o,s,l,u){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r}function Ioe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ooe(r,e){if(r===e){var t=e[1],n=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=t,r[5]=e[7],r[6]=n,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function HE(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,v=t*f+n*h+i*d;return v?(v=1/v,r[0]=f*v,r[1]=(-c*n+i*u)*v,r[2]=(s*n-i*o)*v,r[3]=h*v,r[4]=(c*t-i*l)*v,r[5]=(-s*t+i*a)*v,r[6]=d*v,r[7]=(-u*t+n*l)*v,r[8]=(o*t-n*a)*v,r):null}function Noe(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return r[0]=o*c-s*u,r[1]=i*u-n*c,r[2]=n*s-i*o,r[3]=s*l-a*c,r[4]=t*c-i*l,r[5]=i*a-t*s,r[6]=a*u-o*l,r[7]=n*l-t*u,r[8]=t*o-n*a,r}function $oe(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8];return e*(u*a-o*l)+t*(-u*i+o*s)+n*(l*i-a*s)}function ns(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],p=t[3],g=t[4],m=t[5],y=t[6],w=t[7],b=t[8];return r[0]=h*n+d*o+v*u,r[1]=h*i+d*s+v*c,r[2]=h*a+d*l+v*f,r[3]=p*n+g*o+m*u,r[4]=p*i+g*s+m*c,r[5]=p*a+g*l+m*f,r[6]=y*n+w*o+b*u,r[7]=y*i+w*s+b*c,r[8]=y*a+w*l+b*f,r}function Doe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=h*n+d*o+u,r[7]=h*i+d*s+c,r[8]=h*a+d*l+f,r}function Roe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*o,r[1]=d*i+h*s,r[2]=d*a+h*l,r[3]=d*o-h*n,r[4]=d*s-h*i,r[5]=d*l-h*a,r[6]=u,r[7]=c,r[8]=f,r}function Poe(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function VE(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function YE(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=-t,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function XE(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Foe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Boe(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t+t,s=n+n,l=i+i,u=t*o,c=n*o,f=n*s,h=i*o,d=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[3]=c-m,r[6]=h+g,r[1]=c+m,r[4]=1-u-v,r[7]=d-p,r[2]=h-g,r[5]=d+p,r[8]=1-u-f,r}function zoe(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],y=t*s-n*o,w=t*l-i*o,b=t*u-a*o,x=n*l-i*s,S=n*u-a*s,_=i*u-a*l,M=c*p-f*v,A=c*g-h*v,E=c*m-d*v,T=f*g-h*p,C=f*m-d*p,k=h*m-d*g,L=y*k-w*C+b*T+x*E-S*A+_*M;return L?(L=1/L,r[0]=(s*k-l*C+u*T)*L,r[1]=(l*E-o*k-u*A)*L,r[2]=(o*C-s*E+u*M)*L,r[3]=(i*C-n*k-a*T)*L,r[4]=(t*k-i*E+a*A)*L,r[5]=(n*E-t*C-a*M)*L,r[6]=(p*_-g*S+m*x)*L,r[7]=(g*b-v*_-m*w)*L,r[8]=(v*S-p*b+m*y)*L,r):null}function Goe(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function joe(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Uoe(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Woe(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r}function A5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r}function Hoe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r}function Voe(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r}function Yoe(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function Xoe(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=e[0],h=e[1],d=e[2],v=e[3],p=e[4],g=e[5],m=e[6],y=e[7],w=e[8];return Math.abs(t-f)<=Yt*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(n-h)<=Yt*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=Yt*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-v)<=Yt*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=Yt*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=Yt*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=Yt*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=Yt*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-w)<=Yt*Math.max(1,Math.abs(c),Math.abs(w))}var Koe=ns,qoe=A5;const T5=Object.freeze(Object.defineProperty({__proto__:null,add:Woe,adjoint:Noe,clone:Aoe,copy:Toe,create:C5,determinant:$oe,equals:Xoe,exactEquals:Yoe,frob:Uoe,fromMat2d:Foe,fromMat4:Coe,fromQuat:Boe,fromRotation:YE,fromScaling:XE,fromTranslation:VE,fromValues:koe,identity:Ioe,invert:HE,mul:Koe,multiply:ns,multiplyScalar:Hoe,multiplyScalarAndAdd:Voe,normalFromMat4:zoe,projection:Goe,rotate:Roe,scale:Poe,set:Loe,str:joe,sub:qoe,subtract:A5,translate:Doe,transpose:Ooe},Symbol.toStringTag,{value:"Module"}));function Zoe(){var r=new Mr(16);return Mr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function Qoe(r){var e=new Mr(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Joe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function ese(r,e,t,n,i,a,o,s,l,u,c,f,h,d,v,p){var g=new Mr(16);return g[0]=r,g[1]=e,g[2]=t,g[3]=n,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=f,g[12]=h,g[13]=d,g[14]=v,g[15]=p,g}function tse(r,e,t,n,i,a,o,s,l,u,c,f,h,d,v,p,g){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r[9]=c,r[10]=f,r[11]=h,r[12]=d,r[13]=v,r[14]=p,r[15]=g,r}function k5(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function rse(r,e){if(r===e){var t=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=a,r[11]=e[14],r[12]=i,r[13]=o,r[14]=s}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function nse(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],y=t*s-n*o,w=t*l-i*o,b=t*u-a*o,x=n*l-i*s,S=n*u-a*s,_=i*u-a*l,M=c*p-f*v,A=c*g-h*v,E=c*m-d*v,T=f*g-h*p,C=f*m-d*p,k=h*m-d*g,L=y*k-w*C+b*T+x*E-S*A+_*M;return L?(L=1/L,r[0]=(s*k-l*C+u*T)*L,r[1]=(i*C-n*k-a*T)*L,r[2]=(p*_-g*S+m*x)*L,r[3]=(h*S-f*_-d*x)*L,r[4]=(l*E-o*k-u*A)*L,r[5]=(t*k-i*E+a*A)*L,r[6]=(g*b-v*_-m*w)*L,r[7]=(c*_-h*b+d*w)*L,r[8]=(o*C-s*E+u*M)*L,r[9]=(n*E-t*C-a*M)*L,r[10]=(v*S-p*b+m*y)*L,r[11]=(f*b-c*S-d*y)*L,r[12]=(s*A-o*T-l*M)*L,r[13]=(t*T-n*A+i*M)*L,r[14]=(p*w-v*x-g*y)*L,r[15]=(c*x-f*w+h*y)*L,r):null}function ise(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15];return r[0]=s*(h*m-d*g)-f*(l*m-u*g)+p*(l*d-u*h),r[1]=-(n*(h*m-d*g)-f*(i*m-a*g)+p*(i*d-a*h)),r[2]=n*(l*m-u*g)-s*(i*m-a*g)+p*(i*u-a*l),r[3]=-(n*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),r[4]=-(o*(h*m-d*g)-c*(l*m-u*g)+v*(l*d-u*h)),r[5]=t*(h*m-d*g)-c*(i*m-a*g)+v*(i*d-a*h),r[6]=-(t*(l*m-u*g)-o*(i*m-a*g)+v*(i*u-a*l)),r[7]=t*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),r[8]=o*(f*m-d*p)-c*(s*m-u*p)+v*(s*d-u*f),r[9]=-(t*(f*m-d*p)-c*(n*m-a*p)+v*(n*d-a*f)),r[10]=t*(s*m-u*p)-o*(n*m-a*p)+v*(n*u-a*s),r[11]=-(t*(s*d-u*f)-o*(n*d-a*f)+c*(n*u-a*s)),r[12]=-(o*(f*g-h*p)-c*(s*g-l*p)+v*(s*h-l*f)),r[13]=t*(f*g-h*p)-c*(n*g-i*p)+v*(n*h-i*f),r[14]=-(t*(s*g-l*p)-o*(n*g-i*p)+v*(n*l-i*s)),r[15]=t*(s*h-l*f)-o*(n*h-i*f)+c*(n*l-i*s),r}function ase(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8],c=r[9],f=r[10],h=r[11],d=r[12],v=r[13],p=r[14],g=r[15],m=e*o-t*a,y=e*s-n*a,w=e*l-i*a,b=t*s-n*o,x=t*l-i*o,S=n*l-i*s,_=u*v-c*d,M=u*p-f*d,A=u*g-h*d,E=c*p-f*v,T=c*g-h*v,C=f*g-h*p;return m*C-y*T+w*E+b*A-x*M+S*_}function L5(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],g=e[13],m=e[14],y=e[15],w=t[0],b=t[1],x=t[2],S=t[3];return r[0]=w*n+b*s+x*f+S*p,r[1]=w*i+b*l+x*h+S*g,r[2]=w*a+b*u+x*d+S*m,r[3]=w*o+b*c+x*v+S*y,w=t[4],b=t[5],x=t[6],S=t[7],r[4]=w*n+b*s+x*f+S*p,r[5]=w*i+b*l+x*h+S*g,r[6]=w*a+b*u+x*d+S*m,r[7]=w*o+b*c+x*v+S*y,w=t[8],b=t[9],x=t[10],S=t[11],r[8]=w*n+b*s+x*f+S*p,r[9]=w*i+b*l+x*h+S*g,r[10]=w*a+b*u+x*d+S*m,r[11]=w*o+b*c+x*v+S*y,w=t[12],b=t[13],x=t[14],S=t[15],r[12]=w*n+b*s+x*f+S*p,r[13]=w*i+b*l+x*h+S*g,r[14]=w*a+b*u+x*d+S*m,r[15]=w*o+b*c+x*v+S*y,r}function ose(r,e,t){var n=t[0],i=t[1],a=t[2],o,s,l,u,c,f,h,d,v,p,g,m;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*a+e[12],r[13]=e[1]*n+e[5]*i+e[9]*a+e[13],r[14]=e[2]*n+e[6]*i+e[10]*a+e[14],r[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],v=e[8],p=e[9],g=e[10],m=e[11],r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=c,r[5]=f,r[6]=h,r[7]=d,r[8]=v,r[9]=p,r[10]=g,r[11]=m,r[12]=o*n+c*i+v*a+e[12],r[13]=s*n+f*i+p*a+e[13],r[14]=l*n+h*i+g*a+e[14],r[15]=u*n+d*i+m*a+e[15]),r}function sse(r,e,t){var n=t[0],i=t[1],a=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11]*a,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function lse(r,e,t,n){var i=n[0],a=n[1],o=n[2],s=Math.hypot(i,a,o),l,u,c,f,h,d,v,p,g,m,y,w,b,x,S,_,M,A,E,T,C,k,L,I;return s<Yt?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(t),u=Math.cos(t),c=1-u,f=e[0],h=e[1],d=e[2],v=e[3],p=e[4],g=e[5],m=e[6],y=e[7],w=e[8],b=e[9],x=e[10],S=e[11],_=i*i*c+u,M=a*i*c+o*l,A=o*i*c-a*l,E=i*a*c-o*l,T=a*a*c+u,C=o*a*c+i*l,k=i*o*c+a*l,L=a*o*c-i*l,I=o*o*c+u,r[0]=f*_+p*M+w*A,r[1]=h*_+g*M+b*A,r[2]=d*_+m*M+x*A,r[3]=v*_+y*M+S*A,r[4]=f*E+p*T+w*C,r[5]=h*E+g*T+b*C,r[6]=d*E+m*T+x*C,r[7]=v*E+y*T+S*C,r[8]=f*k+p*L+w*I,r[9]=h*k+g*L+b*I,r[10]=d*k+m*L+x*I,r[11]=v*k+y*L+S*I,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function use(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=a*i+u*n,r[5]=o*i+c*n,r[6]=s*i+f*n,r[7]=l*i+h*n,r[8]=u*i-a*n,r[9]=c*i-o*n,r[10]=f*i-s*n,r[11]=h*i-l*n,r}function cse(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i-u*n,r[1]=o*i-c*n,r[2]=s*i-f*n,r[3]=l*i-h*n,r[8]=a*n+u*i,r[9]=o*n+c*i,r[10]=s*n+f*i,r[11]=l*n+h*i,r}function fse(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i+u*n,r[1]=o*i+c*n,r[2]=s*i+f*n,r[3]=l*i+h*n,r[4]=u*i-a*n,r[5]=c*i-o*n,r[6]=f*i-s*n,r[7]=h*i-l*n,r}function hse(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function dse(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function vse(r,e,t){var n=t[0],i=t[1],a=t[2],o=Math.hypot(n,i,a),s,l,u;return o<Yt?null:(o=1/o,n*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,r[0]=n*n*u+l,r[1]=i*n*u+a*s,r[2]=a*n*u-i*s,r[3]=0,r[4]=n*i*u-a*s,r[5]=i*i*u+l,r[6]=a*i*u+n*s,r[7]=0,r[8]=n*a*u+i*s,r[9]=i*a*u-n*s,r[10]=a*a*u+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function pse(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function gse(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mse(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function I5(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,f=n*l,h=n*u,d=i*l,v=i*u,p=a*u,g=o*s,m=o*l,y=o*u;return r[0]=1-(d+p),r[1]=f+y,r[2]=h-m,r[3]=0,r[4]=f-y,r[5]=1-(c+p),r[6]=v+g,r[7]=0,r[8]=h+m,r[9]=v-g,r[10]=1-(c+d),r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function yse(r,e){var t=new Mr(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=n*n+i*i+a*a+o*o;return f>0?(t[0]=(s*o+c*n+l*a-u*i)*2/f,t[1]=(l*o+c*i+u*n-s*a)*2/f,t[2]=(u*o+c*a+s*i-l*n)*2/f):(t[0]=(s*o+c*n+l*a-u*i)*2,t[1]=(l*o+c*i+u*n-s*a)*2,t[2]=(u*o+c*a+s*i-l*n)*2),I5(r,e,t),r}function O5(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function N5(r,e){var t=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return r[0]=Math.hypot(t,n,i),r[1]=Math.hypot(a,o,s),r[2]=Math.hypot(l,u,c),r}function $5(r,e){var t=new Mr(3);N5(t,e);var n=1/t[0],i=1/t[1],a=1/t[2],o=e[0]*n,s=e[1]*i,l=e[2]*a,u=e[4]*n,c=e[5]*i,f=e[6]*a,h=e[8]*n,d=e[9]*i,v=e[10]*a,p=o+c+v,g=0;return p>0?(g=Math.sqrt(p+1)*2,r[3]=.25*g,r[0]=(f-d)/g,r[1]=(h-l)/g,r[2]=(s-u)/g):o>c&&o>v?(g=Math.sqrt(1+o-c-v)*2,r[3]=(f-d)/g,r[0]=.25*g,r[1]=(s+u)/g,r[2]=(h+l)/g):c>v?(g=Math.sqrt(1+c-o-v)*2,r[3]=(h-l)/g,r[0]=(s+u)/g,r[1]=.25*g,r[2]=(f+d)/g):(g=Math.sqrt(1+v-o-c)*2,r[3]=(s-u)/g,r[0]=(h+l)/g,r[1]=(f+d)/g,r[2]=.25*g),r}function bse(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,v=a*u,p=a*c,g=o*c,m=s*l,y=s*u,w=s*c,b=n[0],x=n[1],S=n[2];return r[0]=(1-(v+g))*b,r[1]=(h+w)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(h-w)*x,r[5]=(1-(f+g))*x,r[6]=(p+m)*x,r[7]=0,r[8]=(d+y)*S,r[9]=(p-m)*S,r[10]=(1-(f+v))*S,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function wse(r,e,t,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,f=s+s,h=a*u,d=a*c,v=a*f,p=o*c,g=o*f,m=s*f,y=l*u,w=l*c,b=l*f,x=n[0],S=n[1],_=n[2],M=i[0],A=i[1],E=i[2],T=(1-(p+m))*x,C=(d+b)*x,k=(v-w)*x,L=(d-b)*S,I=(1-(h+m))*S,O=(g+y)*S,N=(v+w)*_,D=(g-y)*_,$=(1-(h+p))*_;return r[0]=T,r[1]=C,r[2]=k,r[3]=0,r[4]=L,r[5]=I,r[6]=O,r[7]=0,r[8]=N,r[9]=D,r[10]=$,r[11]=0,r[12]=t[0]+M-(T*M+L*A+N*E),r[13]=t[1]+A-(C*M+I*A+D*E),r[14]=t[2]+E-(k*M+O*A+$*E),r[15]=1,r}function xse(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t+t,s=n+n,l=i+i,u=t*o,c=n*o,f=n*s,h=i*o,d=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[1]=c+m,r[2]=h-g,r[3]=0,r[4]=c-m,r[5]=1-u-v,r[6]=d+p,r[7]=0,r[8]=h+g,r[9]=d-p,r[10]=1-u-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Sse(r,e,t,n,i,a,o){var s=1/(t-e),l=1/(i-n),u=1/(a-o);return r[0]=a*2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a*2*l,r[6]=0,r[7]=0,r[8]=(t+e)*s,r[9]=(i+n)*l,r[10]=(o+a)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=o*a*2*u,r[15]=0,r}function D5(r,e,t,n,i){var a=1/Math.tan(e/2),o;return r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=(i+n)*o,r[14]=2*i*n*o):(r[10]=-1,r[14]=-2*n),r}var _se=D5;function Ese(r,e,t,n,i){var a=1/Math.tan(e/2),o;return r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=i*o,r[14]=i*n*o):(r[10]=-1,r[14]=-n),r}function Mse(r,e,t,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=-((o-s)*l*.5),r[9]=(i-a)*u*.5,r[10]=n/(t-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*t/(t-n),r[15]=0,r}function R5(r,e,t,n,i,a,o){var s=1/(e-t),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*l,r[14]=(o+a)*u,r[15]=1,r}var Cse=R5;function Ase(r,e,t,n,i,a,o){var s=1/(e-t),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=u,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*l,r[14]=a*u,r[15]=1,r}function Tse(r,e,t,n){var i,a,o,s,l,u,c,f,h,d,v=e[0],p=e[1],g=e[2],m=n[0],y=n[1],w=n[2],b=t[0],x=t[1],S=t[2];return Math.abs(v-b)<Yt&&Math.abs(p-x)<Yt&&Math.abs(g-S)<Yt?k5(r):(c=v-b,f=p-x,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-w*f,a=w*c-m*h,o=m*f-y*c,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-c*o,u=c*a-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),r[0]=i,r[1]=s,r[2]=c,r[3]=0,r[4]=a,r[5]=l,r[6]=f,r[7]=0,r[8]=o,r[9]=u,r[10]=h,r[11]=0,r[12]=-(i*v+a*p+o*g),r[13]=-(s*v+l*p+u*g),r[14]=-(c*v+f*p+h*g),r[15]=1,r)}function kse(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],u=n[2],c=i-t[0],f=a-t[1],h=o-t[2],d=c*c+f*f+h*h;d>0&&(d=1/Math.sqrt(d),c*=d,f*=d,h*=d);var v=l*h-u*f,p=u*c-s*h,g=s*f-l*c;return d=v*v+p*p+g*g,d>0&&(d=1/Math.sqrt(d),v*=d,p*=d,g*=d),r[0]=v,r[1]=p,r[2]=g,r[3]=0,r[4]=f*g-h*p,r[5]=h*v-c*g,r[6]=c*p-f*v,r[7]=0,r[8]=c,r[9]=f,r[10]=h,r[11]=0,r[12]=i,r[13]=a,r[14]=o,r[15]=1,r}function Lse(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function Ise(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function Ose(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function P5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function Nse(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}function $se(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r[9]=e[9]+t[9]*n,r[10]=e[10]+t[10]*n,r[11]=e[11]+t[11]*n,r[12]=e[12]+t[12]*n,r[13]=e[13]+t[13]*n,r[14]=e[14]+t[14]*n,r[15]=e[15]+t[15]*n,r}function Dse(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Rse(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=r[9],h=r[10],d=r[11],v=r[12],p=r[13],g=r[14],m=r[15],y=e[0],w=e[1],b=e[2],x=e[3],S=e[4],_=e[5],M=e[6],A=e[7],E=e[8],T=e[9],C=e[10],k=e[11],L=e[12],I=e[13],O=e[14],N=e[15];return Math.abs(t-y)<=Yt*Math.max(1,Math.abs(t),Math.abs(y))&&Math.abs(n-w)<=Yt*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-b)<=Yt*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=Yt*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=Yt*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-_)<=Yt*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(l-M)<=Yt*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-A)<=Yt*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-E)<=Yt*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-T)<=Yt*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-C)<=Yt*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-k)<=Yt*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(v-L)<=Yt*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(p-I)<=Yt*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-O)<=Yt*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(m-N)<=Yt*Math.max(1,Math.abs(m),Math.abs(N))}var Pse=L5,Fse=P5;const Bse=Object.freeze(Object.defineProperty({__proto__:null,add:Ose,adjoint:ise,clone:Qoe,copy:Joe,create:Zoe,determinant:ase,equals:Rse,exactEquals:Dse,frob:Ise,fromQuat:xse,fromQuat2:yse,fromRotation:vse,fromRotationTranslation:I5,fromRotationTranslationScale:bse,fromRotationTranslationScaleOrigin:wse,fromScaling:dse,fromTranslation:hse,fromValues:ese,fromXRotation:pse,fromYRotation:gse,fromZRotation:mse,frustum:Sse,getRotation:$5,getScaling:N5,getTranslation:O5,identity:k5,invert:nse,lookAt:Tse,mul:Pse,multiply:L5,multiplyScalar:Nse,multiplyScalarAndAdd:$se,ortho:Cse,orthoNO:R5,orthoZO:Ase,perspective:_se,perspectiveFromFieldOfView:Mse,perspectiveNO:D5,perspectiveZO:Ese,rotate:lse,rotateX:use,rotateY:cse,rotateZ:fse,scale:sse,set:tse,str:Lse,sub:Fse,subtract:P5,targetTo:kse,translate:ose,transpose:rse},Symbol.toStringTag,{value:"Module"}));function KE(){var r=new Mr(3);return Mr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function zse(r){var e=new Mr(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function F5(r){var e=r[0],t=r[1],n=r[2];return Math.hypot(e,t,n)}function Px(r,e,t){var n=new Mr(3);return n[0]=r,n[1]=e,n[2]=t,n}function Gse(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function jse(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function Use(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function B5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function z5(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function G5(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function Wse(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function Hse(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function Vse(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function Yse(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function Xse(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}function Kse(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function qse(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function j5(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.hypot(t,n,i)}function U5(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i}function W5(r){var e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n}function Zse(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function Qse(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function H5(r,e){var t=e[0],n=e[1],i=e[2],a=t*t+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r}function qE(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function m0(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return r[0]=i*l-a*s,r[1]=a*o-n*l,r[2]=n*s-i*o,r}function Jse(r,e,t,n){var i=e[0],a=e[1],o=e[2];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=o+n*(t[2]-o),r}function ele(r,e,t,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return r[0]=e[0]*s+t[0]*l+n[0]*u+i[0]*c,r[1]=e[1]*s+t[1]*l+n[1]*u+i[1]*c,r[2]=e[2]*s+t[2]*l+n[2]*u+i[2]*c,r}function tle(r,e,t,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,h=l*a;return r[0]=e[0]*u+t[0]*c+n[0]*f+i[0]*h,r[1]=e[1]*u+t[1]*c+n[1]*f+i[1]*h,r[2]=e[2]*u+t[2]*c+n[2]*f+i[2]*h,r}function rle(r,e){e=e||1;var t=to()*2*Math.PI,n=to()*2-1,i=Math.sqrt(1-n*n)*e;return r[0]=Math.cos(t)*i,r[1]=Math.sin(t)*i,r[2]=n*e,r}function nle(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[3]*n+t[7]*i+t[11]*a+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*a+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*a+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*a+t[14])/o,r}function Oy(r,e,t){var n=e[0],i=e[1],a=e[2];return r[0]=n*t[0]+i*t[3]+a*t[6],r[1]=n*t[1]+i*t[4]+a*t[7],r[2]=n*t[2]+i*t[5]+a*t[8],r}function ile(r,e,t){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],c=i*u-a*l,f=a*s-n*u,h=n*l-i*s,d=i*h-a*f,v=a*c-n*h,p=n*f-i*c,g=o*2;return c*=g,f*=g,h*=g,d*=2,v*=2,p*=2,r[0]=s+c+d,r[1]=l+f+v,r[2]=u+h+p,r}function ale(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function ole(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function sle(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function lle(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(t*t+n*n+i*i),u=Math.sqrt(a*a+o*o+s*s),c=l*u,f=c&&qE(r,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function ule(r){return r[0]=0,r[1]=0,r[2]=0,r}function cle(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function fle(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function hle(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],o=e[1],s=e[2];return Math.abs(t-a)<=Yt*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-o)<=Yt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=Yt*Math.max(1,Math.abs(i),Math.abs(s))}var dle=B5,vle=z5,ple=G5,gle=j5,mle=U5,V5=F5,yle=W5,ble=function(){var r=KE();return function(e,t,n,i,a,o){var s,l;for(t||(t=3),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e}}();const wle=Object.freeze(Object.defineProperty({__proto__:null,add:Use,angle:lle,bezier:tle,ceil:Wse,clone:zse,copy:Gse,create:KE,cross:m0,dist:gle,distance:j5,div:ple,divide:G5,dot:qE,equals:hle,exactEquals:fle,floor:Hse,forEach:ble,fromValues:Px,hermite:ele,inverse:Qse,len:V5,length:F5,lerp:Jse,max:Yse,min:Vse,mul:vle,multiply:z5,negate:Zse,normalize:H5,random:rle,rotateX:ale,rotateY:ole,rotateZ:sle,round:Xse,scale:Kse,scaleAndAdd:qse,set:jse,sqrDist:mle,sqrLen:yle,squaredDistance:U5,squaredLength:W5,str:cle,sub:dle,subtract:B5,transformMat3:Oy,transformMat4:nle,transformQuat:ile,zero:ule},Symbol.toStringTag,{value:"Module"}));function Y5(){var r=new Mr(4);return Mr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function X5(r){var e=new Mr(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function K5(r,e,t,n){var i=new Mr(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function q5(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function Z5(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function Q5(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function J5(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function e4(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r[3]=e[3]*t[3],r}function t4(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r[3]=e[3]/t[3],r}function xle(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r}function Sle(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r}function _le(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.min(e[3],t[3]),r}function Ele(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r}function Mle(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r}function r4(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function Cle(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}function n4(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2],a=e[3]-r[3];return Math.hypot(t,n,i,a)}function i4(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2],a=e[3]-r[3];return t*t+n*n+i*i+a*a}function ZE(r){var e=r[0],t=r[1],n=r[2],i=r[3];return Math.hypot(e,t,n,i)}function QE(r){var e=r[0],t=r[1],n=r[2],i=r[3];return e*e+t*t+n*n+i*i}function Ale(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}function Tle(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}function a4(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*t+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),r[0]=t*o,r[1]=n*o,r[2]=i*o,r[3]=a*o,r}function o4(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function kle(r,e,t,n){var i=t[0]*n[1]-t[1]*n[0],a=t[0]*n[2]-t[2]*n[0],o=t[0]*n[3]-t[3]*n[0],s=t[1]*n[2]-t[2]*n[1],l=t[1]*n[3]-t[3]*n[1],u=t[2]*n[3]-t[3]*n[2],c=e[0],f=e[1],h=e[2],d=e[3];return r[0]=f*u-h*l+d*s,r[1]=-(c*u)+h*o-d*a,r[2]=c*l-f*o+d*i,r[3]=-(c*s)+f*a-h*i,r}function s4(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=o+n*(t[2]-o),r[3]=s+n*(t[3]-s),r}function Lle(r,e){e=e||1;var t,n,i,a,o,s;do t=to()*2-1,n=to()*2-1,o=t*t+n*n;while(o>=1);do i=to()*2-1,a=to()*2-1,s=i*i+a*a;while(s>=1);var l=Math.sqrt((1-o)/s);return r[0]=e*t,r[1]=e*n,r[2]=e*i*l,r[3]=e*a*l,r}function Ile(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3];return r[0]=t[0]*n+t[4]*i+t[8]*a+t[12]*o,r[1]=t[1]*n+t[5]*i+t[9]*a+t[13]*o,r[2]=t[2]*n+t[6]*i+t[10]*a+t[14]*o,r[3]=t[3]*n+t[7]*i+t[11]*a+t[15]*o,r}function Ole(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2],u=t[3],c=u*n+s*a-l*i,f=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return r[0]=c*u+d*-o+f*-l-h*-s,r[1]=f*u+d*-s+h*-o-c*-l,r[2]=h*u+d*-l+c*-s-f*-o,r[3]=e[3],r}function Nle(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function $le(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function l4(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function u4(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(t-o)<=Yt*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-s)<=Yt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Yt*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Yt*Math.max(1,Math.abs(a),Math.abs(u))}var Dle=J5,Rle=e4,Ple=t4,Fle=n4,Ble=i4,zle=ZE,Gle=QE,jle=function(){var r=Y5();return function(e,t,n,i,a,o){var s,l;for(t||(t=4),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],r[3]=e[s+3],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2],e[s+3]=r[3];return e}}();const Ule=Object.freeze(Object.defineProperty({__proto__:null,add:Q5,ceil:xle,clone:X5,copy:q5,create:Y5,cross:kle,dist:Fle,distance:n4,div:Ple,divide:t4,dot:o4,equals:u4,exactEquals:l4,floor:Sle,forEach:jle,fromValues:K5,inverse:Tle,len:zle,length:ZE,lerp:s4,max:Ele,min:_le,mul:Rle,multiply:e4,negate:Ale,normalize:a4,random:Lle,round:Mle,scale:r4,scaleAndAdd:Cle,set:Z5,sqrDist:Ble,sqrLen:Gle,squaredDistance:i4,squaredLength:QE,str:$le,sub:Dle,subtract:J5,transformMat4:Ile,transformQuat:Ole,zero:Nle},Symbol.toStringTag,{value:"Module"}));function hm(){var r=new Mr(4);return Mr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Wle(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function c4(r,e,t){t=t*.5;var n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function Hle(r,e){var t=Math.acos(e[3])*2,n=Math.sin(t/2);return n>Yt?(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n):(r[0]=1,r[1]=0,r[2]=0),t}function Vle(r,e){var t=e2(r,e);return Math.acos(2*t*t-1)}function f4(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return r[0]=n*c+o*s+i*u-a*l,r[1]=i*c+o*l+a*s-n*u,r[2]=a*c+o*u+n*l-i*s,r[3]=o*c-n*s-i*l-a*u,r}function h4(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+o*s,r[1]=i*l+a*s,r[2]=a*l-i*s,r[3]=o*l-n*s,r}function d4(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l-a*s,r[1]=i*l+o*s,r[2]=a*l+n*s,r[3]=o*l-i*s,r}function v4(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+i*s,r[1]=i*l-n*s,r[2]=a*l+o*s,r[3]=o*l-a*s,r}function Yle(r,e){var t=e[0],n=e[1],i=e[2];return r[0]=t,r[1]=n,r[2]=i,r[3]=Math.sqrt(Math.abs(1-t*t-n*n-i*i)),r}function p4(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+n*n+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return r[0]=t*l,r[1]=n*l,r[2]=i*l,r[3]=s*Math.cos(o),r}function g4(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return r[0]=t*s,r[1]=n*s,r[2]=i*s,r[3]=.5*Math.log(t*t+n*n+i*i+a*a),r}function Xle(r,e,t){return g4(r,e),y4(r,r,t),p4(r,r),r}function y0(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=t[0],u=t[1],c=t[2],f=t[3],h,d,v,p,g;return d=i*l+a*u+o*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Yt?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-n)*h)/v,g=Math.sin(n*h)/v):(p=1-n,g=n),r[0]=p*i+g*l,r[1]=p*a+g*u,r[2]=p*o+g*c,r[3]=p*s+g*f,r}function Kle(r){var e=to(),t=to(),n=to(),i=Math.sqrt(1-e),a=Math.sqrt(e);return r[0]=i*Math.sin(2*Math.PI*t),r[1]=i*Math.cos(2*Math.PI*t),r[2]=a*Math.sin(2*Math.PI*n),r[3]=a*Math.cos(2*Math.PI*n),r}function qle(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*t+n*n+i*i+a*a,s=o?1/o:0;return r[0]=-t*s,r[1]=-n*s,r[2]=-i*s,r[3]=a*s,r}function Zle(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function m4(r,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(e[a*3+o]-e[o*3+a])*n,r[a]=(e[a*3+i]+e[i*3+a])*n,r[o]=(e[o*3+i]+e[i*3+o])*n}return r}function Qle(r,e,t,n){var i=.5*Math.PI/180;e*=i,t*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(t),l=Math.cos(t),u=Math.sin(n),c=Math.cos(n);return r[0]=a*l*c-o*s*u,r[1]=o*s*c+a*l*u,r[2]=o*l*u-a*s*c,r[3]=o*l*c+a*s*u,r}function Jle(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var eue=X5,tue=K5,JE=q5,rue=Z5,nue=Q5,iue=f4,y4=r4,e2=o4,aue=s4,t2=ZE,oue=t2,r2=QE,sue=r2,n2=a4,lue=l4,uue=u4,cue=function(){var r=KE(),e=Px(1,0,0),t=Px(0,1,0);return function(n,i,a){var o=qE(i,a);return o<-.999999?(m0(r,e,i),V5(r)<1e-6&&m0(r,t,i),H5(r,r),c4(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(m0(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,n2(n,n))}}(),fue=function(){var r=hm(),e=hm();return function(t,n,i,a,o,s){return y0(r,n,o,s),y0(e,i,a,s),y0(t,r,e,2*s*(1-s)),t}}(),hue=function(){var r=C5();return function(e,t,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],n2(e,m4(e,r))}}();const due=Object.freeze(Object.defineProperty({__proto__:null,add:nue,calculateW:Yle,clone:eue,conjugate:Zle,copy:JE,create:hm,dot:e2,equals:uue,exactEquals:lue,exp:p4,fromEuler:Qle,fromMat3:m4,fromValues:tue,getAngle:Vle,getAxisAngle:Hle,identity:Wle,invert:qle,len:oue,length:t2,lerp:aue,ln:g4,mul:iue,multiply:f4,normalize:n2,pow:Xle,random:Kle,rotateX:h4,rotateY:d4,rotateZ:v4,rotationTo:cue,scale:y4,set:rue,setAxes:hue,setAxisAngle:c4,slerp:y0,sqlerp:fue,sqrLen:sue,squaredLength:r2,str:Jle},Symbol.toStringTag,{value:"Module"}));function vue(){var r=new Mr(8);return Mr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function pue(r){var e=new Mr(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function gue(r,e,t,n,i,a,o,s){var l=new Mr(8);return l[0]=r,l[1]=e,l[2]=t,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l}function mue(r,e,t,n,i,a,o){var s=new Mr(8);s[0]=r,s[1]=e,s[2]=t,s[3]=n;var l=i*.5,u=a*.5,c=o*.5;return s[4]=l*n+u*t-c*e,s[5]=u*n+c*r-l*t,s[6]=c*n+l*e-u*r,s[7]=-l*r-u*e-c*t,s}function b4(r,e,t){var n=t[0]*.5,i=t[1]*.5,a=t[2]*.5,o=e[0],s=e[1],l=e[2],u=e[3];return r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=n*u+i*l-a*s,r[5]=i*u+a*o-n*l,r[6]=a*u+n*s-i*o,r[7]=-n*o-i*s-a*l,r}function yue(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0]*.5,r[5]=e[1]*.5,r[6]=e[2]*.5,r[7]=0,r}function bue(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function wue(r,e){var t=hm();$5(t,e);var n=new Mr(3);return O5(n,e),b4(r,t,n),r}function w4(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function xue(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function Sue(r,e,t,n,i,a,o,s,l){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r}var _ue=JE;function Eue(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r}var Mue=JE;function Cue(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r}function Aue(r,e){var t=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],u=e[3];return r[0]=(t*u+a*o+n*l-i*s)*2,r[1]=(n*u+a*s+i*o-t*l)*2,r[2]=(i*u+a*l+t*s-n*o)*2,r}function Tue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0]*.5,l=t[1]*.5,u=t[2]*.5,c=e[4],f=e[5],h=e[6],d=e[7];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=o*s+i*u-a*l+c,r[5]=o*l+a*s-n*u+f,r[6]=o*u+n*l-i*s+h,r[7]=-n*s-i*l-a*u+d,r}function kue(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,v=c*o-s*n-l*i-u*a;return h4(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=f*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-f*a,r[6]=d*o+v*a+f*i-h*n,r[7]=v*o-f*n-h*i-d*a,r}function Lue(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,v=c*o-s*n-l*i-u*a;return d4(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=f*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-f*a,r[6]=d*o+v*a+f*i-h*n,r[7]=v*o-f*n-h*i-d*a,r}function Iue(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,v=c*o-s*n-l*i-u*a;return v4(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=f*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-f*a,r[6]=d*o+v*a+f*i-h*n,r[7]=v*o-f*n-h*i-d*a,r}function Oue(r,e,t){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return r[0]=s*o+c*n+l*a-u*i,r[1]=l*o+c*i+u*n-s*a,r[2]=u*o+c*a+s*i-l*n,r[3]=c*o-s*n-l*i-u*a,s=e[4],l=e[5],u=e[6],c=e[7],r[4]=s*o+c*n+l*a-u*i,r[5]=l*o+c*i+u*n-s*a,r[6]=u*o+c*a+s*i-l*n,r[7]=c*o-s*n-l*i-u*a,r}function Nue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return r[0]=n*c+o*s+i*u-a*l,r[1]=i*c+o*l+a*s-n*u,r[2]=a*c+o*u+n*l-i*s,r[3]=o*c-n*s-i*l-a*u,s=t[4],l=t[5],u=t[6],c=t[7],r[4]=n*c+o*s+i*u-a*l,r[5]=i*c+o*l+a*s-n*u,r[6]=a*c+o*u+n*l-i*s,r[7]=o*c-n*s-i*l-a*u,r}function $ue(r,e,t,n){if(Math.abs(n)<Yt)return w4(r,e);var i=Math.hypot(t[0],t[1],t[2]);n=n*.5;var a=Math.sin(n),o=a*t[0]/i,s=a*t[1]/i,l=a*t[2]/i,u=Math.cos(n),c=e[0],f=e[1],h=e[2],d=e[3];r[0]=c*u+d*o+f*l-h*s,r[1]=f*u+d*s+h*o-c*l,r[2]=h*u+d*l+c*s-f*o,r[3]=d*u-c*o-f*s-h*l;var v=e[4],p=e[5],g=e[6],m=e[7];return r[4]=v*u+m*o+p*l-g*s,r[5]=p*u+m*s+g*o-v*l,r[6]=g*u+m*l+v*s-p*o,r[7]=m*u-v*o-p*s-g*l,r}function Due(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r}function x4(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[4],l=t[5],u=t[6],c=t[7],f=e[4],h=e[5],d=e[6],v=e[7],p=t[0],g=t[1],m=t[2],y=t[3];return r[0]=n*y+o*p+i*m-a*g,r[1]=i*y+o*g+a*p-n*m,r[2]=a*y+o*m+n*g-i*p,r[3]=o*y-n*p-i*g-a*m,r[4]=n*c+o*s+i*u-a*l+f*y+v*p+h*m-d*g,r[5]=i*c+o*l+a*s-n*u+h*y+v*g+d*p-f*m,r[6]=a*c+o*u+n*l-i*s+d*y+v*m+f*g-h*p,r[7]=o*c-n*s-i*l-a*u+v*y-f*p-h*g-d*m,r}var Rue=x4;function Pue(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r}var S4=e2;function Fue(r,e,t,n){var i=1-n;return S4(e,t)<0&&(n=-n),r[0]=e[0]*i+t[0]*n,r[1]=e[1]*i+t[1]*n,r[2]=e[2]*i+t[2]*n,r[3]=e[3]*i+t[3]*n,r[4]=e[4]*i+t[4]*n,r[5]=e[5]*i+t[5]*n,r[6]=e[6]*i+t[6]*n,r[7]=e[7]*i+t[7]*n,r}function Bue(r,e){var t=Ny(e);return r[0]=-e[0]/t,r[1]=-e[1]/t,r[2]=-e[2]/t,r[3]=e[3]/t,r[4]=-e[4]/t,r[5]=-e[5]/t,r[6]=-e[6]/t,r[7]=e[7]/t,r}function zue(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r}var _4=t2,Gue=_4,Ny=r2,jue=Ny;function Uue(r,e){var t=Ny(e);if(t>0){t=Math.sqrt(t);var n=e[0]/t,i=e[1]/t,a=e[2]/t,o=e[3]/t,s=e[4],l=e[5],u=e[6],c=e[7],f=n*s+i*l+a*u+o*c;r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=(s-n*f)/t,r[5]=(l-i*f)/t,r[6]=(u-a*f)/t,r[7]=(c-o*f)/t}return r}function Wue(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"}function Hue(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]}function Vue(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=e[0],f=e[1],h=e[2],d=e[3],v=e[4],p=e[5],g=e[6],m=e[7];return Math.abs(t-c)<=Yt*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(n-f)<=Yt*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-h)<=Yt*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=Yt*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=Yt*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-p)<=Yt*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-g)<=Yt*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-m)<=Yt*Math.max(1,Math.abs(u),Math.abs(m))}const Yue=Object.freeze(Object.defineProperty({__proto__:null,add:Due,clone:pue,conjugate:zue,copy:w4,create:vue,dot:S4,equals:Vue,exactEquals:Hue,fromMat4:wue,fromRotation:bue,fromRotationTranslation:b4,fromRotationTranslationValues:mue,fromTranslation:yue,fromValues:gue,getDual:Eue,getReal:_ue,getTranslation:Aue,identity:xue,invert:Bue,len:Gue,length:_4,lerp:Fue,mul:Rue,multiply:x4,normalize:Uue,rotateAroundAxis:$ue,rotateByQuatAppend:Oue,rotateByQuatPrepend:Nue,rotateX:kue,rotateY:Lue,rotateZ:Iue,scale:Pue,set:Sue,setDual:Cue,setReal:Mue,sqrLen:jue,squaredLength:Ny,str:Wue,translate:Tue},Symbol.toStringTag,{value:"Module"}));function E4(){var r=new Mr(2);return Mr!=Float32Array&&(r[0]=0,r[1]=0),r}function Xue(r){var e=new Mr(2);return e[0]=r[0],e[1]=r[1],e}function Kue(r,e){var t=new Mr(2);return t[0]=r,t[1]=e,t}function que(r,e){return r[0]=e[0],r[1]=e[1],r}function Zue(r,e,t){return r[0]=e,r[1]=t,r}function Jn(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function M4(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function C4(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r}function A4(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r}function Que(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function Jue(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function gl(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function ml(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}function ece(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r}function mi(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function tce(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r}function dm(r,e){var t=e[0]-r[0],n=e[1]-r[1];return Math.hypot(t,n)}function T4(r,e){var t=e[0]-r[0],n=e[1]-r[1];return t*t+n*n}function k4(r){var e=r[0],t=r[1];return Math.hypot(e,t)}function L4(r){var e=r[0],t=r[1];return e*e+t*t}function rce(r,e){return r[0]=-e[0],r[1]=-e[1],r}function nce(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function Pl(r,e){var t=e[0],n=e[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function i2(r,e){return r[0]*e[0]+r[1]*e[1]}function ice(r,e,t){var n=e[0]*t[1]-e[1]*t[0];return r[0]=r[1]=0,r[2]=n,r}function oce(r,e,t,n){var i=e[0],a=e[1];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r}function sce(r,e){e=e||1;var t=to()*2*Math.PI;return r[0]=Math.cos(t)*e,r[1]=Math.sin(t)*e,r}function lce(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[2]*i,r[1]=t[1]*n+t[3]*i,r}function uce(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[2]*i+t[4],r[1]=t[1]*n+t[3]*i+t[5],r}function cce(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function fce(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[4]*i+t[12],r[1]=t[1]*n+t[5]*i+t[13],r}function hce(r,e,t,n){var i=e[0]-t[0],a=e[1]-t[1],o=Math.sin(n),s=Math.cos(n);return r[0]=i*s-a*o+t[0],r[1]=i*o+a*s+t[1],r}function I4(r,e){var t=r[0],n=r[1],i=e[0],a=e[1],o=Math.sqrt(t*t+n*n)*Math.sqrt(i*i+a*a),s=o&&(t*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function dce(r){return r[0]=0,r[1]=0,r}function vce(r){return"vec2("+r[0]+", "+r[1]+")"}function a2(r,e){return r[0]===e[0]&&r[1]===e[1]}function pce(r,e){var t=r[0],n=r[1],i=e[0],a=e[1];return Math.abs(t-i)<=Yt*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(n-a)<=Yt*Math.max(1,Math.abs(n),Math.abs(a))}var gce=k4,b0=M4,mce=C4,yce=A4,bce=dm,wce=T4,xce=L4,Sce=function(){var r=E4();return function(e,t,n,i,a,o){var s,l;for(t||(t=2),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],a(r,r,o),e[s]=r[0],e[s+1]=r[1];return e}}();const _ce=Object.freeze(Object.defineProperty({__proto__:null,add:Jn,angle:I4,ceil:Que,clone:Xue,copy:que,create:E4,cross:ice,dist:bce,distance:dm,div:yce,divide:A4,dot:i2,equals:pce,exactEquals:a2,floor:Jue,forEach:Sce,fromValues:Kue,inverse:nce,len:gce,length:k4,lerp:oce,max:ml,min:gl,mul:mce,multiply:C4,negate:rce,normalize:Pl,random:sce,rotate:hce,round:ece,scale:mi,scaleAndAdd:tce,set:Zue,sqrDist:wce,sqrLen:xce,squaredDistance:T4,squaredLength:L4,str:vce,sub:b0,subtract:M4,transformMat2:lce,transformMat2d:uce,transformMat3:cce,transformMat4:fce,zero:dce},Symbol.toStringTag,{value:"Module"})),Ece=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:Lae,mat2:toe,mat2d:Moe,mat3:T5,mat4:Bse,quat:due,quat2:Yue,vec2:_ce,vec3:wle,vec4:Ule},Symbol.toStringTag,{value:"Module"}));function Mce(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return VE(n,t),ns(r,n,e)}function Cce(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return YE(n,t),ns(r,n,e)}function Ace(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return XE(n,t),ns(r,n,e)}function Tce(r,e,t){return ns(r,t,e)}function Pa(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":Mce(t,t,[a[1],a[2]]);break;case"s":Ace(t,t,[a[1],a[2]]);break;case"r":Cce(t,t,a[1]);break;case"m":Tce(t,t,a[1]);break}}return t}var lc=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,t||(a[f][c]=1))}),a},kce=function(e,t){return e===t},wL=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}(),O4=function(){function r(e){e===void 0&&(e=kce),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new wL(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new wL(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),Lce=function(){function r(){this.linkedList=new O4}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),na=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},Ice=function(e,t){return t.filter(function(n){return n.source===e})},w0=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},N4=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};function Oce(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var $4=function(e,t,n,i){i===void 0&&(i=!0);var a=Oce(n),o=new Lce,s=e.edges,l=s===void 0?[]:s;o.enqueue(t);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),na(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},Nce=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(v){l.push(v),s[v.id]=!0;for(var p=na(v.id,a),g=function(w){var b=p[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<p.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},D4=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=na(m.id,a,"target").filter(function(_){return n.map(function(M){return M.id}).indexOf(_)>-1}),w=function(M){var A=y[M];if(!l[A]&&l[A]!==0){var E=n.filter(function(T){return T.id===A});E.length>0&&g(E[0]),u[m.id]=Math.min(u[m.id],u[A])}else s[A]&&(u[m.id]=Math.min(u[m.id],l[A]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,v=n;d<v.length;d++){var p=v[d];!l[p.id]&&l[p.id]!==0&&h(p)}return c};function o2(r,e){return e?D4(r):Nce(r)}var zs=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},R4=function(e,t){var n=zs(e);return n[t]?zs(e)[t].inDegree:0},P4=function(e,t){var n=zs(e);return n[t]?zs(e)[t].outDegree:0};function $ce(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function F4(r,e,t,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:t});var a=r.edges,o=a===void 0?[]:a;na(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:t,current:e,next:s})&&F4(r,s,e,n,i)}),n.leave({current:e,previous:t})}function s2(r,e,t,n){n===void 0&&(n=!0),F4(r,e,"",$ce(t),n)}var l2=function(e){var t=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,v=h.previous;if(s[d]){t={};for(var p=d,g=v;g!==d;)t[p]=g,p=g,g=a[g];t[p]=g}else s[d]=d,delete o[d],a[d]=v},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return t?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];s2(e,c,u)}return t},u2=function(e,t,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=o2(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],v=(i={},i[h]=f,i),p=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=na(m,e.edges),w=function(S){var _,M=y[S],A=e.nodes.find(function(I){return I.id===M});if(M===m)o.push((_={},_[M]=g,_));else if(!(M in p))v[M]=g,d.push(A),p[M]=new Set([g]);else if(!p[m].has(A)){for(var E=!0,T=[A,g],C=v[m];p[M].size&&!p[M].has(C)&&(T.push(C),C!==v[C.id]);)C=v[C.id];if(T.push(C),t&&n?(E=!1,T.findIndex(function(I){return t.indexOf(I.id)>-1})>-1&&(E=!0)):t&&!n&&T.findIndex(function(I){return t.indexOf(I.id)>-1})>-1&&(E=!1),E){for(var k={},L=1;L<T.length;L+=1)k[T[L-1].id]=T[L];T.length&&(k[T[T.length-1].id]=T[0]),o.push(k)}p[M].add(g)}},b=0;b<y.length;b+=1)w(b)}return o},c2=function(e,t,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(C){for(var k=[C];k.length>0;){var L=k.pop();a.has(L)&&(a.delete(L),o[L.id].forEach(function(I){k.push(I)}),o[L.id].clear())}},f=function T(C,k,L){var I=!1;if(t&&n===!1&&t.indexOf(C.id)>-1)return I;i.push(C),a.add(C);for(var O=L[C.id],N=0;N<O.length;N+=1){var D=l[O[N]];if(D===k){for(var $={},R=1;R<i.length;R+=1)$[i[R-1].id]=i[R];i.length&&($[i[i.length-1].id]=i[0]),s.push($),I=!0}else a.has(D)||T(D,k,L)&&(I=!0)}if(I)c(C);else for(var N=0;N<O.length;N+=1){var D=l[O[N]];o[D.id].has(C)||o[D.id].add(C)}return i.pop(),I},h=e.nodes,d=h===void 0?[]:h,v=0;v<d.length;v+=1){var p=d[v],g=p.id;u[g]=v,l[v]=p}if(t&&n)for(var m=function(C){var k=t[C];u[d[C].id]=u[k],u[k]=0,l[0]=d.find(function(L){return L.id===k}),l[u[d[C].id]]=d[C]},v=0;v<t.length;v++)m(v);for(var y=function(C){for(var k,L,I=1/0,O=0;O<C.length;O+=1)for(var N=C[O],D=0;D<N.length;D++){var $=u[N[D].id];$<I&&(I=$,L=O)}for(var R=C[L],B=[],O=0;O<R.length;O+=1){var j=R[O];B[j.id]=[];for(var G=0,z=na(j.id,e.edges,"target").filter(function(ie){return R.map(function(se){return se.id}).indexOf(ie)>-1});G<z.length;G++){var W=z[G];W===j.id&&!(n===!1&&t.indexOf(j.id)>-1)?s.push((k={},k[j.id]=j,k)):B[j.id].push(u[W])}}return{component:R,adjList:B,minIdx:I}},w=0;w<d.length;){var b=d.filter(function(T){return u[T.id]>=w}),x=D4({nodes:b,edges:e.edges}).filter(function(T){return T.length>1});if(x.length===0)break;var S=y(x),_=S.minIdx,M=S.adjList,A=S.component;if(A.length>1){A.forEach(function(T){o[T.id]=new Set});var E=l[_];if(t&&n&&t.indexOf(E.id)===-1)return s;f(E,E,M),w=_+1}else break}return s},B4=function(e,t,n,i){return i===void 0&&(i=!0),t?c2(e,n,i):u2(e,n,i)},Dce=function(e,t,n){for(var i=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=t[o])}return a},cv=function(e,t,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===t&&(c[b]=0)});for(var h=o.length,d=function(w){var b=Dce(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=Ice(x,l):S=w0(x,l),S.forEach(function(_){var M=_.target,A=_.source,E=M===x?A:M,T=i&&_[i]?_[i]:1;c[E]>c[b.id]+T?(c[E]=c[b.id]+T,f[E]=[b.id]):c[E]===c[b.id]+T&&f[E].push(b.id)})},v=0;v<h;v++)d();f[t]=[t];var p={};for(var g in c)c[g]!==1/0&&z4(t,g,f,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}};function z4(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,o=t[e];a<o.length;a++){var s=o[a],l=z4(r,s,t,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];Bt(f)?i.push(la(la([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var G4=function(e,t,n,i,a){var o=cv(e,t,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},j4=function(e,t,n,i){var a;if(t===n)return[[t]];var o=e.edges,s=o===void 0?[]:o,l=[t],u=(a={},a[t]=!0,a),c=[],f=[],h=i?na(t,s,"target"):na(t,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var v=d.shift();v&&(l.push(v),u[v]=!0,h=i?na(v,s,"target"):na(v,s),c.push(h.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var p=l.pop();u[p]=!1,c.pop()}}return f},fv=function(e,t){for(var n=lc(e,t),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},U4=function(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=N4();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=lc(e,t),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,_){if(S){var M=o[_].id;h[x][M]=S}})});for(var d=0,v=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(L){var I=h[x.id][L],O=c[L].node,N=O.clusterId;S[N]||(S[N]=0),S[N]+=I});var _=-1/0,M=[];if(Object.keys(S).forEach(function(L){_<S[L]?(_=S[L],M=[L]):_===S[L]&&M.push(L)}),!(M.length===1&&M[0]===x.clusterId)){var A=M.indexOf(x.clusterId);if(A>=0&&M.splice(A,1),M&&M.length){b=!0;var E=u[x.clusterId],T=E.nodes.indexOf(x);E.nodes.splice(T,1);var C=Math.floor(Math.random()*M.length),k=u[M[C]];k.nodes.push(x),x.clusterId=k.id}}}),!b)return"break";d++};d<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,_=c[b].node.clusterId,M=c[x].node.clusterId,A="".concat(_,"---").concat(M);if(m[A])m[A].weight+=S,m[A].count++;else{var E={source:_,target:M,weight:S,count:1};m[A]=E,g.push(E)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},Ma=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=br(this.arr);t.sort(function(o,s){return o-s});var n=t[t.length-1],i=t[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}(),f2=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(i){t===void 0&&n.push(i),i[t]!==void 0&&n.push(i[t])}),n},Qa;(function(r){r.EuclideanDistance="euclideanDistance"})(Qa||(Qa={}));var Rce=function(e,t,n){var i=[];t!=null&&t.length?i=t:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=lv(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=lv(s))}),a},h2=function(e,t,n){var i=Rce(e,t,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],v=d.findIndex(function(m){return h===m}),p=[];if(s)p.push(h);else for(var g=0;g<d.length;g++)g===v?p.push(1):p.push(0);c=c.concat(p)}),a[u]=c}),a},xL=function(e,t,n,i){n===void 0&&(n=Qa.EuclideanDistance);var a=0;switch(n){case Qa.EuclideanDistance:a=new Ma(e).euclideanDistance(new Ma(t));break}return a},SL=function(e,t,n,i){for(var a=t.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=t[l][c]||0,d=n[l]||0,v=n[c]||0;s+=h-d*v/o}}return s*=1/o,s},Zb=function(e,t){e===void 0&&(e=[]);for(var n=e.length,i=new Ma([]),a=0;a<n;a++)i=i.add(new Ma(t[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Ma(t[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Ma(t[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new Ma(t[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,v=2*n*s,a=0;a<n;a++)for(var p=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||p!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(v,2)-c[a][f]/v;d+=m}}return Number(d.toFixed(4))},d2=function(e,t,n,i,a,o,s,l,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,v=[];if(a){f.forEach(function($,R){$.properties=$.properties||{},$.originIndex=R});var p=[];f.every(function($){return $.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(f.map(function($){return $.nodeType}))),f.forEach(function($){$.properties.nodeType=p.findIndex(function(R){return R===$.nodeType})}));var g=f2(f,o);v=h2(g,s,l)}var m=1,y={},w={};f.forEach(function($,R){var B=String(m++);$.clusterId=B,y[B]={id:B,nodes:[$]},w[$.id]={node:$,idx:R}});var b=lc(e,t),x=[],S={},_=0;b.forEach(function($,R){var B=0,j=f[R].id;S[j]={},$.forEach(function(G,z){if(G){B+=G;var W=f[z].id;S[j][W]=G,_+=G}}),x.push(B)}),_/=2;for(var M=1/0,A=1/0,E=0,T=[],C={};;){a&&f.every(function($){return $.hasOwnProperty("properties")})?M=SL(f,b,x,_)+Zb(f,v)*u:M=SL(f,b,x,_),E===0&&(A=M,T=f,C=y);var k=M>0&&M>A&&M-A<i;if(M>A&&(T=f.map(function($){return{node:$,clusterId:$.clusterId}}),C=br(y),A=M),k||E>100)break;E++,Object.keys(y).forEach(function($){var R=0;d.forEach(function(B){var j=B.source,G=B.target,z=w[j].node.clusterId,W=w[G].node.clusterId;(z===$&&W!==$||W===$&&z!==$)&&(R=R+(B[n]||1))}),y[$].sumTot=R}),f.forEach(function($,R){var B=y[$.clusterId],j=0,G,z=x[R]/(2*_),W=0,Q=B.nodes;Q.forEach(function(me){var Fe=w[me.id].idx;W+=b[R][Fe]||0});var ie=W-B.sumTot*z,se=Q.filter(function(me){return me.id!==$.id});se.forEach(function(me,Fe){v[me.originIndex]});var ae=Zb(se,v)*u,pe=S[$.id];if(Object.keys(pe).forEach(function(me){var Fe=w[me].node,Re=Fe.clusterId;if(Re!==$.clusterId){var $e=y[Re],Ke=$e.nodes;if(!(!Ke||!Ke.length)){var at=0;Ke.forEach(function(oe){var X=w[oe.id].idx;at+=b[R][X]||0});var Me=at-$e.sumTot*z,J=Ke.concat([$]);J.forEach(function(oe,X){v[oe.originIndex]});var F=Zb(J,v)*u,be=Me-ie;a&&(be=Me+F-(ie+ae)),be>j&&(j=be,G=$e)}}}),j>0){G.nodes.push($);var De=$.clusterId;$.clusterId=G.id;var Je=B.nodes.indexOf($);B.nodes.splice(Je,1);var ee=0,ne=0;d.forEach(function(me){var Fe=me.source,Re=me.target,$e=w[Fe].node.clusterId,Ke=w[Re].node.clusterId;($e===G.id&&Ke!==G.id||Ke===G.id&&$e!==G.id)&&(ee=ee+(me[n]||1)),($e===De&&Ke!==De||Ke===De&&$e!==De)&&(ne=ne+(me[n]||1))}),G.sumTot=ee,B.sumTot=ne}})}var L={},I=0;Object.keys(C).forEach(function($){var R=C[$];if(!R.nodes||!R.nodes.length){delete C[$];return}var B=String(I+1);B!==$&&(R.id=B,R.nodes=R.nodes.map(function(j){return{id:j.id,clusterId:B}}),C[B]=R,L[$]=B,delete C[$],I++)}),T.forEach(function($){var R=$.node,B=$.clusterId;R&&(R.clusterId=B,R.clusterId&&L[R.clusterId]&&(R.clusterId=L[R.clusterId]))});var O=[],N={};d.forEach(function($){var R=$.source,B=$.target,j=$[n]||1,G=w[R].node.clusterId,z=w[B].node.clusterId;if(!(!G||!z)){var W="".concat(G,"---").concat(z);if(N[W])N[W].weight+=j,N[W].count++;else{var Q={source:G,target:z,weight:j,count:1};N[W]=Q,O.push(Q)}}});var D=[];return Object.keys(C).forEach(function($){D.push(C[$])}),{clusters:D,clusterEdges:O}},W4=function(e,t,n,i,a,o,s,l){return t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1),d2(e,t,n,i,!0,a,o,s,l)},H4=function(e,t){var n;t===void 0&&(t=1);for(var i=br(e),a=i.nodes,o=a===void 0?[]:a,s=i.edges,l=s===void 0?[]:s,u=function(){var h=zs({nodes:o,edges:l}),d=Object.keys(h);d.sort(function(g,m){var y,w;return((y=h[g])===null||y===void 0?void 0:y.degree)-((w=h[m])===null||w===void 0?void 0:w.degree)});var v=d[0];if(!o.length||((n=h[v])===null||n===void 0?void 0:n.degree)>=t)return"break";var p=o.findIndex(function(g){return g.id===v});o.splice(p,1),l=l.filter(function(g){return!(g.source===v||g.target===v)})};;){var c=u();if(c==="break")break}return{nodes:o,edges:l}},_L=function(e,t,n){var i=[];switch(e){case Qa.EuclideanDistance:i=t[n];break;default:i=[];break}return i},V4=function(e,t,n,i,a,o){t===void 0&&(t=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Qa.EuclideanDistance);var s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(o===Qa.EuclideanDistance&&!l.every(function(B){return B.hasOwnProperty(n)}))return f;var h=[],d=[];if(o===Qa.EuclideanDistance&&(h=f2(l,n),d=h2(h,i,a)),!d.length)return f;for(var v=lv(d.map(function(B){return B.join("")})),p=Math.min(t,l.length,v.length),g=0;g<l.length;g++)l[g].originIndex=g;for(var m=[],y=[],w=[],g=0;g<p;g++)if(g===0){var b=Math.floor(Math.random()*l.length);switch(o){case Qa.EuclideanDistance:m[g]=d[b];break;default:m[g]=[];break}y.push(b),w[g]=[l[b]],l[b].clusterId=String(g)}else{for(var x=-1/0,S=0,_=function(G){if(!y.includes(G)){for(var z=0,W=0;W<m.length;W++){var Q=0;switch(o){case Qa.EuclideanDistance:Q=xL(d[l[G].originIndex],m[W],o);break}z+=Q}var ie=z/m.length;ie>x&&!m.find(function(se){return Gl(se,_L(o,d,l[G].originIndex))})&&(x=ie,S=G)}},M=0;M<l.length;M++)_(M);m[g]=_L(o,d,S),y.push(S),w[g]=[l[S]],l[S].clusterId=String(g)}for(var A=0;;){for(var g=0;g<l.length;g++){var E=0,T=1/0;if(!(A===0&&y.includes(g))){for(var C=0;C<m.length;C++){var k=0;switch(o){case Qa.EuclideanDistance:k=xL(d[g],m[C],o);break}k<T&&(T=k,E=C)}if(l[g].clusterId!==void 0)for(var L=w[Number(l[g].clusterId)].length-1;L>=0;L--)w[Number(l[g].clusterId)][L].id===l[g].id&&w[Number(l[g].clusterId)].splice(L,1);l[g].clusterId=String(E),w[E].push(l[g])}}for(var I=!1,g=0;g<w.length;g++){for(var O=w[g],N=new Ma([]),C=0;C<O.length;C++)N=N.add(new Ma(d[O[C].originIndex]));var D=N.avg(O.length);D.equal(new Ma(m[g]))||(I=!0,m[g]=D.getArr())}if(A++,l.every(function(B){return B.clusterId!==void 0})&&I||A>=1e3)break}var $=[],R={};return c.forEach(function(B){var j,G,z=B.source,W=B.target,Q=(j=l.find(function(pe){return pe.id===z}))===null||j===void 0?void 0:j.clusterId,ie=(G=l.find(function(pe){return pe.id===W}))===null||G===void 0?void 0:G.clusterId,se="".concat(Q,"---").concat(ie);if(R[se])R[se].count++;else{var ae={source:Q,target:ie,count:1};R[se]=ae,$.push(ae)}}),{clusters:w,clusterEdges:$}},v2=function(e,t){var n=new Ma(t),i=n.norm2(),a=new Ma(e),o=a.norm2(),s=n.dot(a),l=i*o,u=l?s/l:0;return u},Y4=function(e,t,n,i,a){e===void 0&&(e=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=br(e.filter(function(h){return h.id!==t.id})),s=e.findIndex(function(h){return h.id===t.id}),l=f2(e,n),u=h2(l,i,a),c=u[s],f=[];return o.forEach(function(h,d){if(h.id!==t.id){var v=u[d],p=v2(v,c);f.push(p),h.cosineSimilarity=p}}),o.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:f,similarNodes:o}},Pce=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var i=n[t];this.parent[i]=i}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),i=this.find(t);n!==i&&(n<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),Fce=function(e,t){return e-t},Bce=function(){function r(e){e===void 0&&(e=Fce),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),zce=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return t?g.weight-m.weight:0},f=new Bce(c);for(w0(l.id,s).forEach(function(p){f.insert(p)});!f.isEmpty();){var h=f.delMin(),d=h.source,v=h.target;u.has(d)&&u.has(v)||(n.push(h),u.has(d)||(u.add(d),w0(d,s).forEach(function(p){f.insert(p)})),u.has(v)||(u.add(v),w0(v,s).forEach(function(p){f.insert(p)})))}return n},EL=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});t&&l.sort(function(d,v){return d.weight-v.weight});for(var u=new Pce(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},X4=function(e,t,n){var i={prim:zce,kruskal:EL};return n?i[n](e,t):EL(e,t)},K4=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},v={},p=0;p<f;++p){var g=l[p],m=g.id;d[m]=1/f,v[m]=1/f}for(var y=zs(e);o>0&&i>t;){a=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=na(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=v[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;h=d[m]+a,i+=Math.abs(h-v[m]),v[m]=h}o-=1}return v},Gce=-1,vm=-1,q4="-1",Ro="-1",Z4=-1,ML=function(){function r(e,t,n,i){e===void 0&&(e=Gce),t===void 0&&(t=vm),n===void 0&&(n=vm),i===void 0&&(i=q4),this.id=e,this.from=t,this.to=n,this.label=i}return r}(),jce=function(){function r(e,t){e===void 0&&(e=vm),t===void 0&&(t=Ro),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}(),Q4=function(){function r(e,t,n){e===void 0&&(e=vm),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new jce(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new ML(e,t,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new ML(e,n,t,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}(),Ou=function(){function r(e,t,n,i,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Ro,edgeLabel:i||q4,nodeLabel2:a||Ro}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),CL=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,i,a){return this.dfsEdgeList.push(new Ou(e,t,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=Z4),t===void 0&&(t=!1);var n=new Q4(e,!0,t);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Ro&&n.addNode(a,l),c!==Ro&&n.addNode(o,c),l!==Ro&&c!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),dg=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),Uce=function(){function r(e){var t=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,v=d===void 0?!1:d;this.graphs=t,this.dfsCode=new CL,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,i=[],a=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(e,t,n,i){if(!this.directed&&t===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[n.to].label||a[t.from].label===a[n.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[n.to].label)return c}}return null},r.prototype.findForwardPureEdges=function(e,t,n,i){for(var a=[],o=t.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},r.prototype.findForwardRmpathEdges=function(e,t,n,i){for(var a=[],o=e.nodeMap,s=o[t.to].label,l=o[t.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;t.to===h.to||n>d||i.hasNode(o[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&a.push(h)}return a},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,i=t.toGraph(Z4,n),a=i.nodeMap,o=new CL,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var v=a[d.to],p="".concat(f.label,"-").concat(d.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:v.label});var g={graphId:i.id,edge:d,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new Ou(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(N){if(m)return"break";h.forEach(function(D){var $=new dg(D),R=e.findBackwardEdge(i,$.edges[d[N]],$.edges[d[0]],$);R&&(g[R.label]||(g[R.label]={projected:[],edgeLabel:R.label}),g[R.label].projected.push({graphId:i.id,edge:g,preNode:D}),y=o.dfsEdgeList[d[N]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var _=e.findMinLabel(g);o.dfsEdgeList.push(new Ou(p,y,Ro,_.edgeLabel,Ro));var M=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[M]!==o.dfsEdgeList[M]?!1:f(g[_.edgeLabel].projected)}var A={};m=!1;var E=0;h.forEach(function(O){var N=new dg(O),D=e.findForwardPureEdges(i,N.edges[d[0]],v,N);D.length>0&&(m=!0,E=p,D.forEach(function($){var R="".concat($.label,"-").concat(a[$.to].label);A[R]||(A[R]={projected:[],edgeLabel:$.label,nodeLabel2:a[$.to].label}),A[R].projected.push({graphId:i.id,edge:$,preNode:O})}))});for(var T=d.length,C=function(N){if(m)return"break";var D=d[N];h.forEach(function($){var R=new dg($),B=e.findForwardRmpathEdges(i,R.edges[D],v,R);B.length>0&&(m=!0,E=o.dfsEdgeList[D].fromNode,B.forEach(function(j){var G="".concat(j.label,"-").concat(a[j.to].label);A[G]||(A[G]={projected:[],edgeLabel:j.label,nodeLabel2:a[j.to].label}),A[G].projected.push({graphId:i.id,edge:j,preNode:$})}))})},x=0;x<T;x++){var k=C(x);if(k==="break")break}if(!m)return!0;var L=e.findMinLabel(A);o.dfsEdgeList.push(new Ou(E,p+1,Ro,L.edgeLabel,L.nodeLabel2));var I=o.dfsEdgeList.length-1;return t.dfsEdgeList[I]!==o.dfsEdgeList[I]?!1:f(A["".concat(L.edgeLabel,"-").concat(L.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(br(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=t.graphs[c.graphId],h=f.nodeMap,d=new dg(c),v=a.length-1;v>=0;v--){var p=t.findBackwardEdge(f,d.edges[a[v]],d.edges[a[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=t.maxNodeNum)){var m=t.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=t.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var _="".concat(t.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[_]||(l[_]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[_].projected.push({graphId:c.graphId,edge:S,preNode:c})})},v=0;v<a.length;v++)y(v)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;t.dfsCode.dfsEdgeList.push(new Ou(o,h,"-1",d,"-1")),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,v=f.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Ou(h,o+1,Ro,d,v)),t.subGraphMining(l[c].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,v="".concat(l,"-").concat(d);if(!s[v]){var p=a[d]||0;p++,a[d]=p}s[v]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!t&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(i){var a=t[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Ou(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),Wce=function(e,t,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new Q4(s,!0,t),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],v=c[f.target];u.addEdge(-1,d,v,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},Hce=function(e,t,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[t]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},AL="cluster",Vce=function(e){var t=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?AL:a,s=e.edgeLabelProp,l=s===void 0?AL:s,u=Wce(t,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,v=e.top,p={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:v,verbose:d,directed:i},g=new Uce(p);g.run();var m=Hce(g.frequentSubgraphs,o,l);return m},TL=function(e,t,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return t.forEach(function(s,l){a.push(J4(o,s,l,n,i))}),a},J4=function(e,t,n,i,a){var o=[n],s=[],l={};return t.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},Yce=function(e,t,n,i,a){var o=Math.ceil(n/t),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,v=u.neighborNum-1;f<o;){for(var p=d[1+Math.floor(Math.random()*v)],g=0;(s["".concat(c,"-").concat(p)]||s["".concat(p,"-").concat(c)])&&(p=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(s["".concat(c,"-").concat(p)]={start:c,end:p,distance:a[c][p]},f++,l++,l>=n))return s;if(h++,h>2*t)break}if(f<o){var m=o-f;o=(o+m)/(t-c-1)}}),s},x0=function(e,t,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=t[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=t[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var v={},p=d.length,g=0;g<p;g++){var m=a[d[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(y){v[y.source]&&v[y.target]&&i[o].edges.push(y)})}}}}),i},S0=function(e,t,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=t==null?void 0:t.nodes[0][n],d=t==null?void 0:t.nodes[1][n],v=t==null?void 0:t.edges[0][i];u[i]===v&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},Xce=function(e,t,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var v=0,p=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,p.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,_){var M=c[S];y.graphs.forEach(function(A,E){_!==E&&(b+=Math.abs(M-c[A]))})}),b/=x*(x-1)/2,v+=b}),v/=d.length;var g=0;p.forEach(function(y,w){p.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<t;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},kL=function(e,t){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},LL=function(e,t,n){var i={},a={};return e.forEach(function(o,s){i["".concat(N4)]={idx:s,edge:o};var l=o[t];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},IL=function(e,t,n){var i=t.length,a={};return t.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},Kce=function(e,t,n,i,a,o,s,l,u,c,f){var h,d="".concat(t.id,"-").concat(n.id);if(c&&c[d])return c[d];var v=f?f[d]:void 0;if(!v){var p=(h={},h[d]={start:i[t.id].idx,end:i[n.id].idx,distance:a},h);f=x0(p,o,e,f),v=f[d]}return S0(v,s,l,u)},OL=function(e,t,n,i){var a,o,s,l=(a=e[t])===null||a===void 0?void 0:a.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(l=1/0,u=1/0,c=1/0,i[t].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var v=n[f.id].outDegree;c>v&&(c=v)}),e[t]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},eF=function(e,t,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=fv(e,n),f=fv(t,n),h=IL(e.nodes,c,n),d=IL(t.nodes,f,n),v=kL(e.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=kL(t.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;LL(e.edges,s,p);var b=LL(t.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(Me){x=x.concat(Me)}),a||(a=Math.max.apply(Math,la(la([],x,!1),[2],!1))),i||(i=a);var S=TL(e,c,o,i),_=TL(t,f,o,i),M=Math.min(100,u*(u-1)/2),A=Yce(i,u,M,S,c),E=x0(A,S,e),T=10,C=1,k=1,L=4,I={graphs:E,nodeLabelProp:o,edgeLabelProp:s,minSupport:C,minNodeNum:k,maxNodeNum:L,directed:n},O=Vce(I).slice(0,T),N=O.length,D=[];O.forEach(function(Me,J){D[J]={},Object.keys(E).forEach(function(F){var be=E[F],oe=S0(be,Me,o,s);D[J][F]=oe})});var $=Xce(D,N,O),R=$.structure,B=$.structureCountMap,j=t.nodes[0],G=[],z=(l=t.nodes[0])===null||l===void 0?void 0:l[o],W=-1/0;t.nodes.forEach(function(Me){var J=Me[o],F=g[J];(F==null?void 0:F.length)>W&&(W=F.length,G=F,z=J,j=Me)});var Q={},ie={},se={},ae={},pe={},De={};Object.keys(w).forEach(function(Me,J){pe[Me]=[],n&&(De[Me]=[]);var F=w[Me],be={};F.forEach(function(ke){var Ge=d["".concat(j.id,"-").concat(ke.id)];if(Ge&&pe[Me].push(Ge),be["".concat(j.id,"-").concat(ke.id)]={start:0,end:y[ke.id].idx,distance:Ge},n){var vt=d["".concat(ke.id,"-").concat(j.id)];vt&&De[Me].push(vt)}}),pe[Me]=pe[Me].sort(function(ke,Ge){return ke-Ge}),n&&(De[Me]=De[Me].sort(function(ke,Ge){return ke-Ge})),ie=x0(be,_,t,ie);var oe=[];if(Object.keys(be).forEach(function(ke){if(se[ke]){oe.push(se[ke]);return}var Ge=ie[ke];se[ke]=S0(Ge,R,o,s),oe.push(se[ke])}),oe=oe.sort(function(ke,Ge){return Ge-ke}),ae["".concat(j.id,"-").concat(Me)]=oe,Me!==z)for(var X=(G==null?void 0:G.length)||0,de=function(Ge){var vt=G[Ge],Lt=S[p[vt.id].idx],Kt=Lt.nodeLabelCountMap[Me],Ct=w[Me].length;if(!Kt||Kt.count<Ct)return G.splice(Ge,1),"continue";for(var zt=!1,jt=0;jt<Ct;jt++)if(Kt.dists[jt]>pe[Me][jt]){zt=!0;break}if(zt)return G.splice(Ge,1),"continue";var pr={};Lt.neighbors.forEach(function(Or){var En=h["".concat(vt.id,"-").concat(Or.id)];pr["".concat(vt.id,"-").concat(Or.id)]={start:p[vt.id].idx,end:p[Or.id].idx,distance:En}}),E=x0(pr,S,e,E);var Ir=[];Object.keys(pr).forEach(function(Or){if(B[Or]){Ir.push(B[Or]);return}var En=E[Or];B[Or]=S0(En,R,o,s),Ir.push(B[Or])}),Ir=Ir.sort(function(Or,En){return En-Or});for(var oi=!1,jt=0;jt<Ct;jt++)if(Ir[jt]<oe[jt]){oi=!0;break}if(oi)return G.splice(Ge,1),"continue"},xe=X-1;xe>=0;xe--)de(xe)});var Je=[];G==null||G.forEach(function(Me){for(var J=p[Me.id].idx,F=J4(e.nodes,c[J],J,o,a),be=F.neighbors,oe=be.length,X=!1,de=oe-1;de>=0;de--){if(be.length+1<t.nodes.length){X=!0;return}var xe=be[de],ke=xe[o];if(!w[ke]||!w[ke].length){be.splice(de,1);continue}if(!pe[ke]||!pe[ke].length){be.splice(de,1);continue}var Ge="".concat(Me.id,"-").concat(xe.id),vt=h[Ge],Lt=pe[ke].length-1,Kt=pe[ke][Lt];if(vt>Kt){be.splice(de,1);continue}if(n){var Ct="".concat(xe.id,"-").concat(Me.id),zt=h[Ct];Lt=De[ke].length-1;var jt=De[ke][Lt];if(zt>jt){be.splice(de,1);continue}}var pr=B[Ge]?B[Ge]:Kce(e,Me,xe,p,vt,S,R,o,s,B,E),Ir="".concat(j.id,"-").concat(ke),oi=ae[Ir][ae[Ir].length-1];if(pr<oi){be.splice(de,1);continue}var Or=OL(Q,ke,y,w),En=Or.minPatternNodeLabelDegree;if(Or.minPatternNodeLabelInDegree,Or.minPatternNodeLabelOutDegree,p[xe.id].degree<En){be.splice(de,1);continue}}X||Je.push({nodes:[Me].concat(be)})});var ee=cv(t,j.id,!1).length,ne={};n?(Object.keys(ee).forEach(function(Me){var J=y[Me].node[o];ne[J]?ne[J].push(ee[Me]):ne[J]=[ee[Me]]}),Object.keys(ne).forEach(function(Me){ne[Me].sort(function(J,F){return J-F})})):ne=pe;for(var me=Je.length,Fe=function(J){var F=Je[J],be=F.nodes[0],oe={},X={};F.nodes.forEach(function(er,Ur){X[er.id]={idx:Ur,node:er,degree:0,inDegree:0,outDegree:0};var Ht=er[o];oe[Ht]?oe[Ht]++:oe[Ht]=1});var de=[],xe={};e.edges.forEach(function(er){X[er.source]&&X[er.target]&&(de.push(er),xe[er[s]]?xe[er[s]]++:xe[er[s]]=1,X[er.source].degree++,X[er.target].degree++,X[er.source].outDegree++,X[er.target].inDegree++)});for(var ke=Object.keys(b).length,Ge=!1,vt=0;vt<ke;vt++){var Lt=Object.keys(b)[vt];if(!xe[Lt]||xe[Lt]<b[Lt].length){Ge=!0;break}}if(Ge)return Je.splice(J,1),"continue";var Kt=de.length;if(Kt<t.edges.length)return Je.splice(J,1),"break";for(var Ct=!1,zt=function(Ur){var Ht=de[Ur],un=Ht[s],si=b[un];if(!si||!si.length)return xe[un]--,si&&xe[un]<si.length?(Ct=!0,"break"):(de.splice(Ur,1),X[Ht.source].degree--,X[Ht.target].degree--,X[Ht.source].outDegree--,X[Ht.target].inDegree--,"continue");var ou=X[Ht.source].node[o],su=X[Ht.target].node[o],cs=!1;if(si.forEach(function(lu){var uu=y[lu.source].node,cu=y[lu.target].node;uu[o]===ou&&cu[o]===su&&(cs=!0),!n&&uu[o]===su&&cu[o]===ou&&(cs=!0)}),!cs)return xe[un]--,si&&xe[un]<si.length?(Ct=!0,"break"):(de.splice(Ur,1),X[Ht.source].degree--,X[Ht.target].degree--,X[Ht.source].outDegree--,X[Ht.target].inDegree--,"continue")},vt=Kt-1;vt>=0;vt--){var jt=zt(vt);if(jt==="break")break}if(Ct)return Je.splice(J,1),"continue";F.edges=de;var pr=cv(F,F.nodes[0].id,!1).length;if(Object.keys(pr).reverse().forEach(function(er){if(!(er===F.nodes[0].id||Ct)){if(pr[er]===1/0){var Ur=X[er].node[o];if(oe[Ur]--,oe[Ur]<w[Ur].length){Ct=!0;return}var Ht=F.nodes.indexOf(X[er].node);F.nodes.splice(Ht,1),X[er]=void 0;return}var un=p[er].node[o];if(!ne[un]||!ne[un].length||pr[er]>ne[un][ne[un].length-1]){var Ur=X[er].node[o];if(oe[Ur]--,oe[Ur]<w[Ur].length){Ct=!0;return}var Ht=F.nodes.indexOf(X[er].node);F.nodes.splice(Ht,1),X[er]=void 0}}}),Ct)return Je.splice(J,1),"continue";for(var Ir=!0,oi=0;Ir&&!Ct;){Ir=!1;var Or=n?X[be.id].degree<y[j.id].degree||X[be.id].inDegree<y[j.id].inDegree||X[be.id].outDegree<y[j.id].outDegree:X[be.id].degree<y[j.id].degree;if(Or){Ct=!0;break}if(oe[be[o]]<w[be[o]].length){Ct=!0;break}for(var En=F.nodes.length,Ba=En-1;Ba>=0;Ba--){var On=F.nodes[Ba],Qs=X[On.id].degree,vh=X[On.id].inDegree,ph=X[On.id].outDegree,Yn=On[o],us=OL(Q,Yn,y,w),au=us.minPatternNodeLabelDegree,gh=us.minPatternNodeLabelInDegree,mh=us.minPatternNodeLabelOutDegree,yh=n?Qs<au||vh<gh||ph<mh:Qs<au;if(yh){if(oe[On[o]]--,oe[On[o]]<w[On[o]].length){Ct=!0;break}F.nodes.splice(Ba,1),X[On.id]=void 0,Ir=!0}}if(Ct||!Ir&&oi!==0)break;Kt=de.length;for(var za=Kt-1;za>=0;za--){var Mn=de[za];if(!X[Mn.source]||!X[Mn.target]){de.splice(za,1);var Ga=Mn[s];if(xe[Ga]--,X[Mn.source]&&(X[Mn.source].degree--,X[Mn.source].outDegree--),X[Mn.target]&&(X[Mn.target].degree--,X[Mn.target].inDegree--),b[Ga]&&xe[Ga]<b[Ga].length){Ct=!0;break}Ir=!0}}oi++}if(Ct||Ct||F.nodes.length<t.nodes.length||de.length<t.edges.length)return Je.splice(J,1),"continue"},Re=me-1;Re>=0;Re--){var $e=Fe(Re);if($e==="break")break}for(var Ke=Je.length,at=function(J){var F=Je[J],be={};F.edges.forEach(function(de){var xe="".concat(de.source,"-").concat(de.target,"-").concat(de.label);be[xe]?be[xe]++:be[xe]=1});for(var oe=function(xe){var ke=Je[xe],Ge={};ke.edges.forEach(function(Lt){var Kt="".concat(Lt.source,"-").concat(Lt.target,"-").concat(Lt.label);Ge[Kt]?Ge[Kt]++:Ge[Kt]=1});var vt=!0;Object.keys(Ge).length!==Object.keys(be).length?vt=!1:Object.keys(be).forEach(function(Lt){Ge[Lt]!==be[Lt]&&(vt=!1)}),vt&&Je.splice(xe,1)},X=Ke-1;X>J;X--)oe(X);Ke=Je.length},Re=0;Re<=Ke-1;Re++)at(Re);return Je}}},ff=function(){function r(e){e===void 0&&(e=10),this.linkedList=new O4,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),tF=l2;const qce={getAdjMatrix:lc,breadthFirstSearch:$4,connectedComponent:o2,getDegree:zs,getInDegree:R4,getOutDegree:P4,detectCycle:l2,detectDirectedCycle:tF,detectAllCycles:B4,detectAllDirectedCycle:c2,detectAllUndirectedCycle:u2,depthFirstSearch:s2,dijkstra:cv,findAllPath:j4,findShortestPath:G4,floydWarshall:fv,labelPropagation:U4,louvain:d2,iLouvain:W4,kCore:H4,kMeans:V4,cosineSimilarity:v2,nodesCosineSimilarity:Y4,minimumSpanningTree:X4,pageRank:K4,getNeighbors:na,Stack:ff,GADDI:eF},Zce=Object.freeze(Object.defineProperty({__proto__:null,GADDI:eF,Stack:ff,breadthFirstSearch:$4,connectedComponent:o2,cosineSimilarity:v2,default:qce,depthFirstSearch:s2,detectAllCycles:B4,detectAllDirectedCycle:c2,detectAllUndirectedCycle:u2,detectCycle:l2,detectDirectedCycle:tF,dijkstra:cv,findAllPath:j4,findShortestPath:G4,floydWarshall:fv,getAdjMatrix:lc,getDegree:zs,getInDegree:R4,getNeighbors:na,getOutDegree:P4,iLouvain:W4,kCore:H4,kMeans:V4,labelPropagation:U4,louvain:d2,minimumSpanningTree:X4,nodesCosineSimilarity:Y4,pageRank:K4},Symbol.toStringTag,{value:"Module"}));var pm=Pa,Qce=function(e){return function(t,n){return t[e]-n[e]}},NL=function(e,t,n){return e>=t&&e<=n},$y=function(e,t,n,i){var a=1e-4,o={x:n.x-e.x,y:n.y-e.y},s={x:t.x-e.x,y:t.y-e.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,h=s.x*s.x+s.y*s.y,d=l.x*l.x+l.y*l.y;if(c>a*h*d){var v=(o.x*l.y-o.y*l.x)*f,p=(o.x*s.y-o.y*s.x)*f;return!NL(v,0,1)||!NL(p,0,1)?null:{x:e.x+v*s.x,y:e.y+v*s.y}}return null},rF=function(e,t){var n=e.x,i=e.y,a=e.width,o=e.height,s=n+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var f=null,h=1;h<u.length&&(f=$y(u[h-1],u[h],c,t),!f);h++);return f},nF=function(e,t){var n=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var c=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(c))*Math.sign(l),y:i+Math.abs(a*Math.sin(c))*Math.sign(u)}},iF=function(e,t){var n=e.rx,i=e.ry,a=e.x,o=e.y,s=t.x-a,l=t.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},Sf=function(e,t,n){n===void 0&&(n=1);var i=[e.x,e.y,n];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Oy(i,i,t),{x:i[0],y:i[1]}},aF=function(e,t,n){n===void 0&&(n=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var i=HE([1,0,0,0,1,0,0,0,1],t);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,n];return Oy(a,a,i),{x:a[0],y:a[1]}},Fx=function(e,t,n){var i=e.x-t.x,a=e.y-t.y,o=e.x-n.x,s=e.y-n.y,l=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,u=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},gm=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},Jce=function(e,t){var n=[];return e.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*t)}),n.push(a)}),n},efe=function(e){for(var t=[],n=e.length,i=0;i<n;i+=1){t[i]=[];for(var a=0;a<n;a+=1)i===a?t[i][a]=0:e[i][a]===0||!e[i][a]?t[i][a]=1/0:t[i][a]=e[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)t[i][a]>t[i][o]+t[o][a]&&(t[i][a]=t[i][o]+t[o][a]);return t},tfe=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,t||(a[f][c]=1)}),a},oF=function(e,t){e.translate(t.x,t.y)},Bx=function(e,t,n,i){i===void 0&&(i={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,l=t.y-o.minY;if(n){var u=s*a[0],c=l*a[4],f=0,h=0,d=0,v=0;e.animate(function(g){return d=u*g,v=c*g,a=pm(a,[["t",d-f,v-h]]),f=d,h=v,{matrix:a}},i)}else{var p=pm(a,[["t",s,l]]);e.setMatrix(p)}},rfe=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t;Bt(t)||(i=[t,t]),Bt(t)&&t.length===1&&(i=[t[0],t[0]]),n=pm(n,[["s",i[0],i[1]]]),e.setMatrix(n)},nfe=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=pm(n,[["r",t]]),e.setMatrix(n)},ife=function(e,t,n){for(var i=[],a=0;a<e;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[t[o.source]]+=1),o.target&&(i[t[o.target]]+=1)}),i};function afe(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}var hv=function(e,t,n){var i=!1,a=e.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=e[l],c=e[(l+1)%a];if(afe(u,c,[t,n]))return!0;s(u[1]-n)>0!=s(c[1]-n)>0&&s(t-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},sF=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},ofe=function(e,t){var n=!1;return Pe(e,function(i){if($y(i.from,i.to,t.from,t.to))return n=!0,!1}),n},lF=function(e,t){var n=function(h){var d=h.map(function(p){return p[0]}),v=h.map(function(p){return p[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,v),maxY:Math.max.apply(null,v)}},i=function(h){for(var d=[],v=h.length,p=0;p<v-1;p++){var g=h[p],m=h[p+1];d.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(d.length>1){var y=h[0],w=h[v-1];d.push({from:{x:w[0],y:w[1]},to:{x:y[0],y:y[1]}})}return d};if(e.length<2||t.length<2)return!1;var a=n(e),o=n(t);if(!sF(a,o))return!1;var s=!1;if(Pe(t,function(f){if(hv(e,f[0],f[1]))return s=!0,!1}),s||(Pe(e,function(f){if(hv(t,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(e),u=i(t),c=!1;return Pe(u,function(f){if(ofe(l,f))return c=!0,!1}),c},uc=function(){function r(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:n,maxY:i,width:n-e,height:i-t};return a},r}(),p2=function(e,t){var n={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return n[t]},sfe=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),i=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},uF=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=0,o=[],s=0;s<4;s++){var l=p2(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3];o[s]=$y({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:c},{x:f,y:h}),o[s]&&(a+=1)}return[o,a]},g2=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=p2(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3],d=sfe(t,new uc(u,c,f,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,a=d<a?d:a)}return o===0?-1:a},cF=function(e){var t=0,n=0;if(e.length>0){for(var i=0,a=e;i<a.length;i++){var o=a[i];t+=o.x,n+=o.y}t/=e.length,n/=e.length}return{x:t,y:n}},mm=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},fF=function(e,t){var n=t.x1,i=t.y1,a=t.x2-n,o=t.y2-i,s=e.x-n,l=e.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},zx=function(e,t,n){return n===void 0&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},hF=function(e,t){var n=e.x<t.x,i=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(t.y+t.height-e.y,2);if(o&&!n&&!i)return Math.pow(e.y-t.y,2);if(n&&!a&&!o)return Math.pow(t.x-e.x,2);if(i&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var l=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),u=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return l*l+u*u},lfe=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t.x,l=t.y,u=[a-n,o-i];if(a2(u,[0,0]))return NaN;var c=[-u[1],u[0]];Pl(c,c);var f=[s-n,l-i];return Math.abs(i2(f,c))},m2=function(e,t,n){return e+(t-e)*n},Gx=function(e,t,n){for(var i=Math.min(e.length,t.length),a=new Array(i),o=0;o<i;o++)a[o]=m2(e[o],t[o],n);return a};const ufe=Object.freeze(Object.defineProperty({__proto__:null,Line:uc,applyMatrix:Sf,compare:Qce,distance:gm,floydWarshall:efe,fractionToLine:g2,getAdjMatrix:tfe,getBBoxBoundLine:p2,getCircleCenterByPoints:Fx,getCircleIntersectByPoint:nF,getDegree:ife,getEllipseIntersectByPoint:iF,getLineIntersect:$y,getPointsCenter:cF,getRectIntersectByPoint:rF,intersectBBox:sF,invertMatrix:aF,isPointInPolygon:hv,isPointsOverlap:zx,isPolygonsIntersect:lF,itemIntersectByLine:uF,lerp:m2,lerpArray:Gx,move:Bx,pointLineDistance:lfe,pointLineSquareDist:fF,pointRectSquareDist:hF,rotate:nfe,scale:rfe,scaleMatrix:Jce,squareDist:mm,translate:oF},Symbol.toStringTag,{value:"Module"}));var sl="rgb(95, 149, 255)",cfe="rgb(255, 255, 255)",$L="rgb(0, 0, 0)",Qb="rgb(247, 250, 255)",dF="rgb(239, 244, 255)",vg="rgb(253, 253, 253)",DL="rgb(250, 250, 250)",pg="rgb(224, 224, 224)",RL="rgb(234, 234, 234)",ffe="rgb(245, 245, 245)",hfe="rgb(191, 213, 255)",PL="#4572d9",dfe="rgb(223, 234, 255)",kr={mainStroke:sl,mainFill:dF,activeStroke:sl,activeFill:Qb,inactiveStroke:hfe,inactiveFill:Qb,selectedStroke:sl,selectedFill:cfe,highlightStroke:PL,highlightFill:dfe,disableStroke:pg,disableFill:DL,edgeMainStroke:pg,edgeActiveStroke:sl,edgeInactiveStroke:RL,edgeSelectedStroke:sl,edgeHighlightStroke:sl,edgeDisableStroke:ffe,comboMainStroke:pg,comboMainFill:vg,comboActiveStroke:sl,comboActiveFill:Qb,comboInactiveStroke:pg,comboInactiveFill:vg,comboSelectedStroke:sl,comboSelectedFill:vg,comboHighlightStroke:PL,comboHighlightFill:vg,comboDisableStroke:RL,comboDisableFill:DL};const Ot={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:kr.mainStroke,fill:dF},size:20,color:kr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:kr.activeFill,stroke:kr.activeStroke}},nodeStateStyles:{active:{fill:kr.activeFill,stroke:kr.activeStroke,lineWidth:2,shadowColor:kr.mainStroke,shadowBlur:10},selected:{fill:kr.selectedFill,stroke:kr.selectedStroke,lineWidth:4,shadowColor:kr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:kr.highlightFill,stroke:kr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:kr.inactiveFill,stroke:kr.inactiveStroke,lineWidth:1},disable:{fill:kr.disableFill,stroke:kr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:$L,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:kr.edgeMainStroke,lineAppendWidth:2},color:kr.edgeMainStroke},edgeStateStyles:{active:{stroke:kr.edgeActiveStroke,lineWidth:1},selected:{stroke:kr.edgeSelectedStroke,lineWidth:2,shadowColor:kr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:kr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:kr.edgeInactiveStroke,lineWidth:1},disable:{stroke:kr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:$L,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:kr.comboMainFill,lineWidth:1,stroke:kr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:kr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:kr.comboActiveStroke,lineWidth:1,fill:kr.comboActiveFill},selected:{stroke:kr.comboSelectedStroke,lineWidth:2,fill:kr.comboSelectedFill,shadowColor:kr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:kr.comboHighlightStroke,lineWidth:2,fill:kr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:kr.comboInactiveStroke,fill:kr.comboInactiveFill,lineWidth:1},disable:{stroke:kr.comboDisableStroke,fill:kr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},vfe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var To=Math.PI,jx=Math.sin,Ux=Math.cos,Zn=jx(To/8),Qn=Ux(To/8),ym=function(e,t){var n=e.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=Sf(i,o),a=Sf(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},vF=function(e){var t=e.sourceNode||e.targetNode,n=t.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||Ot.defaultLoopPosition,c=[(o.minX+o.maxX)/2+i[6],(o.minY+o.maxY)/2+i[7]],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=o.height/2,v=o.width/2,p=d,g=d,m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,x=a.get("type"),S=Math.min(d/2,v/2),_=Math.min(d,v),M=s!=null&&s.pointPadding?Math.min(_,s==null?void 0:s.pointPadding):S;if(f[0]===h[0]&&f[1]===h[1]){switch(u){case"top":x==="circle"?(f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]):(f=[c[0]-M,c[1]-d],h=[c[0]+M,c[1]-d]);break;case"top-right":p=d,g=v,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]+m,c[1]-y],h=[c[0]+b,c[1]-w]):(f=[c[0]+v-M,c[1]-d],h=[c[0]+v,c[1]-d+M]);break;case"right":p=v,g=v,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]+y,c[1]-m],h=[c[0]+b,c[1]+w]):(f=[c[0]+v,c[1]-M],h=[c[0]+v,c[1]+M]);break;case"bottom-right":p=v,g=d,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]+y,c[1]+m],h=[c[0]+w,c[1]+b]):(f=[c[0]+v,c[1]+d-M],h=[c[0]+v-M,c[1]+d]);break;case"bottom":p=d,g=d,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]+m,c[1]+y],h=[c[0]-w,c[1]+b]):(f=[c[0]-M,c[1]+d],h=[c[0]+M,c[1]+d]);break;case"bottom-left":p=d,g=v,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]-m,c[1]+y],h=[c[0]-b,c[1]+w]):(f=[c[0]-v,c[1]+d-M],h=[c[0]-v+M,c[1]+d]);break;case"left":p=v,g=v,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]-y,c[1]+m],h=[c[0]-b,c[1]-w]):(f=[c[0]-v,c[1]-M],h=[c[0]-v,c[1]+M]);break;case"top-left":p=v,g=d,x==="circle"?(m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]-y,c[1]-m],h=[c[0]-w,c[1]-b]):(f=[c[0]-v+M,c[1]-d],h=[c[0]-v,c[1]-d+M]);break;default:p=v,g=v,m=p*Zn,y=p*Qn,w=g*Zn,b=g*Qn,f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]}if(s.clockwise===!1){var A=[f[0],f[1]];f=[h[0],h[1]],h=[A[0],A[1]]}}var E=[f[0]-c[0],f[1]-c[1]],T=(p+l)/p,C=(g+l)/g;s.clockwise===!1&&(T=(g+l)/g,C=(p+l)/p);var k=mi([0,0],E,T),L=[c[0]+k[0],c[1]+k[1]],I=[h[0]-c[0],h[1]-c[1]],O=mi([0,0],I,C),N=[c[0]+O[0],c[1]+O[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:L[0],y:L[1]},{x:N[0],y:N[1]}],e},pF=function(e,t,n,i,a){var o=1e-4,s=[],l=e==null?void 0:e.getPoint(t);if(!l)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(t+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=To*2),n&&(l.x+=Ux(c)*n,l.y+=jx(c)*n),i){var f=c-To/2;c>1/2*To&&c<3*1/2*To&&(f-=To),l.x+=Ux(f)*i,l.y+=jx(f)*i}var h={x:l.x,y:l.y,angle:c};return a?(c>.5*To&&c<1.5*To&&(c-=To),V({rotate:c},h)):h},pfe=function r(e,t,n,i){if(i(e,t,n)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!r(e.children[a],e,a,i))return!1}return!0},gfe=function r(e,t,n,i){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!r(e.children[a],e,a,i))return}return i(e,t,n)!==!1},pi=function(e,t){typeof t=="function"&&pfe(e,null,-1,t)},ko=function(e,t){typeof t=="function"&&gfe(e,null,-1,t)},gF=function(e,t){return t*(vfe[e]||1)},mF=function(e,t){var n=0,i=new RegExp("[一-龥]+");return e.split("").forEach(function(a){i.test(a)?n+=t:n+=gF(a,t)}),[n,t]},yF=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Wx=function(e,t){var n=[],i={},a={};e.forEach(function(l){a[l.id]=l}),e.forEach(function(l,u){var c=br(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){n.push(f);return}var h=i[f.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:f.parentId,children:[f]};i[f.parentId]=d,i[c.id]=c}return}if(rt(l.parentId)){var v=i[l.parentId];if(v)v.children?v.children.push(c):v.children=[c],i[c.id]=c;else{var p={id:l.parentId,children:[c]};i[p.id]=p,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(t||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return n.forEach(function(l){l.depth=s+10,pi(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),n},Hx=function(e,t,n){var i,a=e,o,s={root:{children:e}},l=!1,u="root";(e||[]).forEach(function(v){if(!l){if(v.id===t){o=v,v.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0;return}pi(v,function(p){var g;return s[p.id]={children:(p==null?void 0:p.children)||[]},a=(g=s[p.parentId||p.comboId||"root"])===null||g===void 0?void 0:g.children,p&&(p.removed||t===p.id)&&a?(u=p.parentId||p.comboId||"root",o=p,p.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0,!1):!0})}}),a=(i=s[u])===null||i===void 0?void 0:i.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),l||(o={id:t,itemType:"node",comboId:n},s[t]={children:void 0}),t){var f=!1;if(n){var h=0;(e||[]).forEach(function(v){f||pi(v,function(p){return n===p.id?(f=!0,p.children?p.children.push(o):p.children=[o],h=p.depth,o.itemType==="node"?o.depth=h+2:o.depth=h+1,!1):!0})})}else(!n||!f)&&o.itemType!=="node"&&e.push(o);var d=o.depth;pi(o,function(v){return v.itemType==="node"?d+=2:d+=1,v.depth=d,!0})}return e},_0=function(e,t,n){var i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=n==null?void 0:n.getModel(),o=a||{},s=o.x,l=o.y,u=o.fixSize,c=o.collapsed,f=o.fixCollapseSize,h=c?f:u,d=Bt(h)?h:[h,h],v=d[0],p=d[1],g=[v/2,p/2];return{minX:s-g[0],minY:l-g[1],maxX:s+g[0],maxY:l+g[1],x:s,y:l,width:v,height:p}}return e.forEach(function(m){var y=t.findById(m.id);if(!(!y||!y.isVisible())){y.set("bboxCanvasCache",void 0);var w=y.getCanvasBBox();w.x&&i.minX>w.minX&&(i.minX=w.minX),w.y&&i.minY>w.minY&&(i.minY=w.minY),w.x&&i.maxX<w.maxX&&(i.maxX=w.maxX),w.y&&i.maxY<w.maxY&&(i.maxY=w.maxY)}}),i.x=(i.minX+i.maxX)/2,i.y=(i.minY+i.maxY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,(n==null?void 0:n.getKeyShape().get("type"))==="circle"&&(i.width=Math.hypot(i.height,i.width),i.height=i.width),Object.keys(i).forEach(function(m){(i[m]===1/0||i[m]===-1/0)&&(i[m]=void 0)}),i},mfe=function(e){var t=Rt(e.x)||Rt(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||Rt(e.style.r)||Rt(e.style.width)||Rt(e.style.height)||Rt(e.style.rx)||Rt(e.style.ry)),t},E0=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];if(!(n==="img"&&!rt(i)))if(ni(i)&&!Bt(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!rt(s)||(a[o]=br(s))}),t[n]=a}else t[n]=br(i)}),t},dv=function(e){var t=e.animateCfg,n=e.callback,i;if(!t)i={duration:500,callback:n};else if(i=br(t),t.callback){var a=t.callback;i.callback=function(){n(),a()}}else i.callback=n;return i};const yfe=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:E0,getAnimateCfgWithCallback:dv,getBBox:ym,getComboBBox:_0,getLabelPosition:pF,getLetterWidth:gF,getLoopCfgs:vF,getTextSize:mF,plainCombosToTrees:Wx,reconstructTree:Hx,shouldRefreshEdge:mfe,traverseTree:pi,traverseTreeUp:ko,truncateLabelByLength:yF},Symbol.toStringTag,{value:"Module"}));var FL=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,n=e.edges,i=e.combos,a=i===void 0?[]:i;if(!t&&!n){var o=!0;return pi(e,function(h){return rt(h.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(h){return!rt(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var l=(t||[]).map(function(h){return h.id}),u=a==null?void 0:a.map(function(h){return h.id}),c=la(la([],l,!0),u,!0),f=(n||[]).find(function(h){return!c.includes(h.source)||!c.includes(h.target)});return f?(console.warn("G6 Warning Tips: The source %c".concat(f.source,"%c or the target %c").concat(f.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},bfe=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!rt(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},wfe=function(){function r(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var e=this.modes;Pe(e,function(t){Pe(t,function(n,i){rt(n)&&(t[i]={type:n})})})},r.prototype.setBehaviors=function(e){var t=this.graph,n=this.modes[e],i=[],a;Pe(n||[],function(o){var s=WE.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),i.push(a)))}),this.currentBehaves=i},r.mergeBehaviors=function(e,t){return Pe(t,function(n){e.indexOf(n)<0&&(rt(n)&&(n={type:n}),e.push(n))}),e},r.filterBehaviors=function(e,t){var n=[];return e.forEach(function(i){var a="";rt(i)?a=i:a=i.type,t.indexOf(a)<0&&n.push(i)}),n},r.prototype.setMode=function(e){var t=this,n=t.modes,i=t.graph,a=e,o=n[a];o&&(i.emit("beforemodechange",{mode:e}),Pe(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:e}),this.mode=e)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(e,t,n){var i=this,a;if(Bt(e)?a=e:a=[e],Bt(t))return Pe(t,function(s){i.modes[s]?n?i.modes[s]=r.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=r.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=r.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(e,t,n){rt(e)&&(e={type:e});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}(),Od=`	
\v\f\r   ᠎             　\u2028\u2029`,xfe=new RegExp("([a-z])["+Od+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Od+"]*,?["+Od+"]*)+)","ig"),Sfe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Od+"]*,?["+Od+"]*","ig"),hf=function(r){if(!r)return null;if(Bt(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(xfe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Sfe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return r}),t},Vx=function(r,e){for(var t=[],n=0,i=r.length;i-2*!e>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];e?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},gg=function(r,e,t,n,i){var a=[];if(i===null&&n===null&&(n=t),r=+r,e=+e,t=+t,n=+n,i!==null){var o=Math.PI/180,s=r+t*Math.cos(-n*o),l=r+t*Math.cos(-i*o),u=e+t*Math.sin(-n*o),c=e+t*Math.sin(-i*o);a=[["M",s,u],["A",t,t,0,+(i-n>180),0,l,c]]}else a=[["M",r,e],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return a},Yx=function(r){if(r=hf(r),!r||!r.length)return[["M",0,0]];var e=[],t=0,n=0,i=0,a=0,o=0,s,l;r[0][0]==="M"&&(t=+r[0][1],n=+r[0][2],i=t,a=n,o++,e[0]=["M",t,n]);for(var u=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",c=void 0,f=void 0,h=o,d=r.length;h<d;h++){if(e.push(c=[]),f=r[h],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+t,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+t;break;case"R":l=[t,n].concat(f.slice(1));for(var v=2,p=l.length;v<p;v++)l[v]=+l[v]+t,l[++v]=+l[v]+n;e.pop(),e=e.concat(Vx(l,u));break;case"O":e.pop(),l=gg(t,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(gg(t,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+t,a=+f[2]+n;break;default:for(var v=1,p=f.length;v<p;v++)c[v]=+f[v]+(v%2?t:n)}else if(s==="R")l=[t,n].concat(f.slice(1)),e.pop(),e=e.concat(Vx(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")e.pop(),l=gg(t,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat(gg(t,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,m=f.length;g<m;g++)c[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+i,n=+a;break;case"H":t=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],n=c[c.length-1]}}return e},mg=function(r,e,t,n){return[r,e,t,n,t,n]},BL=function(r,e,t,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*n,o*i+s*t,o*a+s*n,i,a]},bF=function(r,e,t,n,i,a,o,s,l,u){t===n&&(t+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),h=[],d,v,p,g,m,y=function(ie,se,ae){var pe=ie*Math.cos(ae)-se*Math.sin(ae),De=ie*Math.sin(ae)+se*Math.cos(ae);return{x:pe,y:De}};if(u)v=u[0],p=u[1],g=u[2],m=u[3];else{d=y(r,e,-f),r=d.x,e=d.y,d=y(s,l,-f),s=d.x,l=d.y,r===s&&e===l&&(s+=1,l+=1);var w=(r-s)/2,b=(e-l)/2,x=w*w/(t*t)+b*b/(n*n);x>1&&(x=Math.sqrt(x),t=x*t,n=x*n);var S=t*t,_=n*n,M=(a===o?-1:1)*Math.sqrt(Math.abs((S*_-S*b*b-_*w*w)/(S*b*b+_*w*w)));g=M*t*b/n+(r+s)/2,m=M*-n*w/t+(e+l)/2,v=Math.asin(((e-m)/n).toFixed(9)),p=Math.asin(((l-m)/n).toFixed(9)),v=r<g?Math.PI-v:v,p=s<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),o&&v>p&&(v=v-Math.PI*2),!o&&p>v&&(p=p-Math.PI*2)}var A=p-v;if(Math.abs(A)>c){var E=p,T=s,C=l;p=v+c*(o&&p>v?1:-1),s=g+t*Math.cos(p),l=m+n*Math.sin(p),h=bF(s,l,t,n,i,0,o,T,C,[p,E,g,m])}A=p-v;var k=Math.cos(v),L=Math.sin(v),I=Math.cos(p),O=Math.sin(p),N=Math.tan(A/4),D=4/3*t*N,$=4/3*n*N,R=[r,e],B=[r+D*L,e-$*k],j=[s+D*O,l-$*I],G=[s,l];if(B[0]=2*R[0]-B[0],B[1]=2*R[1]-B[1],u)return[B,j,G].concat(h);h=[B,j,G].concat(h).join().split(",");for(var z=[],W=0,Q=h.length;W<Q;W++)z[W]=W%2?y(h[W-1],h[W],f).y:y(h[W],h[W+1],f).x;return z},Xx=function(r,e){var t=Yx(r),n=e&&Yx(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(w,b,x){var S,_;if(!w)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(w[0]in{T:1,Q:1})&&(b.qx=b.qy=null),w[0]){case"M":b.X=w[1],b.Y=w[2];break;case"A":w=["C"].concat(bF.apply(0,[b.x,b.y].concat(w.slice(1))));break;case"S":x==="C"||x==="S"?(S=b.x*2-b.bx,_=b.y*2-b.by):(S=b.x,_=b.y),w=["C",S,_].concat(w.slice(1));break;case"T":x==="Q"||x==="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),w=["C"].concat(BL(b.x,b.y,b.qx,b.qy,w[1],w[2]));break;case"Q":b.qx=w[1],b.qy=w[2],w=["C"].concat(BL(b.x,b.y,w[1],w[2],w[3],w[4]));break;case"L":w=["C"].concat(mg(b.x,b.y,w[1],w[2]));break;case"H":w=["C"].concat(mg(b.x,b.y,w[1],b.y));break;case"V":w=["C"].concat(mg(b.x,b.y,b.x,w[1]));break;case"Z":w=["C"].concat(mg(b.x,b.y,b.X,b.Y));break}return w},h=function(w,b){if(w[b].length>7){w[b].shift();for(var x=w[b];x.length;)o[b]="A",n&&(s[b]="A"),w.splice(b++,0,["C"].concat(x.splice(0,6)));w.splice(b,1),c=Math.max(t.length,n&&n.length||0)}},d=function(w,b,x,S,_){w&&b&&w[_][0]==="M"&&b[_][0]!=="M"&&(b.splice(_,0,["M",S.x,S.y]),x.bx=0,x.by=0,x.x=w[_][1],x.y=w[_][2],c=Math.max(t.length,n&&n.length||0))};c=Math.max(t.length,n&&n.length||0);for(var v=0;v<c;v++){t[v]&&(l=t[v][0]),l!=="C"&&(o[v]=l,v&&(u=o[v-1])),t[v]=f(t[v],i,u),o[v]!=="A"&&l==="C"&&(o[v]="C"),h(t,v),n&&(n[v]&&(l=n[v][0]),l!=="C"&&(s[v]=l,v&&(u=s[v-1])),n[v]=f(n[v],a,u),s[v]!=="A"&&l==="C"&&(s[v]="C"),h(n,v)),d(t,n,i,a,v),d(n,t,a,i,v);var p=t[v],g=n&&n[v],m=p.length,y=n&&g.length;i.x=p[m-2],i.y=p[m-1],i.bx=parseFloat(p[m-4])||i.x,i.by=parseFloat(p[m-3])||i.y,a.bx=n&&(parseFloat(g[y-4])||a.x),a.by=n&&(parseFloat(g[y-3])||a.y),a.x=n&&g[y-2],a.y=n&&g[y-1]}return n?[t,n]:t},_fe=/,?([a-z]),?/gi,wF=function(r){return r.join(",").replace(_fe,"$1")},zL=function(r,e,t,n,i){var a=-3*e+9*t-9*n+3*i,o=r*a+6*e-12*t+6*n;return r*o-3*e+3*t},GL=function(r,e,t,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,v=0;v<c;v++){var p=u*f[v]+u,g=zL(p,r,t,i,o),m=zL(p,e,n,a,s),y=g*g+m*m;d+=h[v]*Math.sqrt(y)}return u*d},Efe=function(r,e,t,n,i,a,o,s){for(var l=[],u=[[],[]],c,f,h,d,v=0;v<2;++v){if(v===0?(f=6*r-12*t+6*i,c=-3*r+9*t-9*i+3*o,h=3*t-3*r):(f=6*e-12*n+6*a,c=-3*e+9*n-9*a+3*s,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;d=-h/f,d>0&&d<1&&l.push(d);continue}var p=f*f-4*h*c,g=Math.sqrt(p);if(!(p<0)){var m=(-f+g)/(2*c);m>0&&m<1&&l.push(m);var y=(-f-g)/(2*c);y>0&&y<1&&l.push(y)}}for(var w=l.length,b=w,x;w--;)d=l[w],x=1-d,u[0][w]=x*x*x*r+3*x*x*d*t+3*x*d*d*i+d*d*d*o,u[1][w]=x*x*x*e+3*x*x*d*n+3*x*d*d*a+d*d*d*s;return u[0][b]=r,u[1][b]=e,u[0][b+1]=o,u[1][b+1]=s,u[0].length=u[1].length=b+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},Mfe=function(r,e,t,n,i,a,o,s){if(!(Math.max(r,t)<Math.min(i,o)||Math.min(r,t)>Math.max(i,o)||Math.max(e,n)<Math.min(a,s)||Math.min(e,n)>Math.max(a,s))){var l=(r*n-e*t)*(i-o)-(r-t)*(i*s-a*o),u=(r*n-e*t)*(a-s)-(e-n)*(i*s-a*o),c=(r-t)*(a-s)-(e-n)*(i-o);if(c){var f=l/c,h=u/c,d=+f.toFixed(2),v=+h.toFixed(2);if(!(d<+Math.min(r,t).toFixed(2)||d>+Math.max(r,t).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||v<+Math.min(e,n).toFixed(2)||v>+Math.max(e,n).toFixed(2)||v<+Math.min(a,s).toFixed(2)||v>+Math.max(a,s).toFixed(2)))return{x:f,y:h}}}},ll=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},xF=function(r,e,t,n,i){if(i)return[["M",+r+ +i,e],["l",t-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-t,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,e],["l",t,0],["l",0,n],["l",-t,0],["z"]];return a.parsePathArray=wF,a},Kx=function(r,e,t,n){return r===null&&(r=e=t=n=0),e===null&&(e=r.y,t=r.width,n=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:n,h:n,x2:r+t,y2:e+n,cx:r+t/2,cy:e+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:xF(r,e,t,n),vb:[r,e,t,n].join(" ")}},Cfe=function(r,e){return r=Kx(r),e=Kx(e),ll(e,r.x,r.y)||ll(e,r.x2,r.y)||ll(e,r.x,r.y2)||ll(e,r.x2,r.y2)||ll(r,e.x,e.y)||ll(r,e.x2,e.y)||ll(r,e.x,e.y2)||ll(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)},jL=function(r,e,t,n,i,a,o,s){Bt(r)||(r=[r,e,t,n,i,a,o,s]);var l=Efe.apply(null,r);return Kx(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},UL=function(r,e,t,n,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),h=l*l,d=h*l,v=c*r+f*3*l*t+u*3*l*l*i+d*o,p=c*e+f*3*l*n+u*3*l*l*a+d*s,g=r+2*l*(t-r)+h*(i-2*t+r),m=e+2*l*(n-e)+h*(a-2*n+e),y=t+2*l*(i-t)+h*(o-2*i+t),w=n+2*l*(a-n)+h*(s-2*a+n),b=u*r+l*t,x=u*e+l*n,S=u*i+l*o,_=u*a+l*s,M=90-Math.atan2(g-y,m-w)*180/Math.PI;return{x:v,y:p,m:{x:g,y:m},n:{x:y,y:w},start:{x:b,y:x},end:{x:S,y:_},alpha:M}},Afe=function(r,e,t){var n=jL(r),i=jL(e);if(!Cfe(n,i))return t?0:[];for(var a=GL.apply(0,r),o=GL.apply(0,e),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},h=t?0:[],d=0;d<s+1;d++){var v=UL.apply(0,r.concat(d/s));u.push({x:v.x,y:v.y,t:d/s})}for(var d=0;d<l+1;d++){var v=UL.apply(0,e.concat(d/l));c.push({x:v.x,y:v.y,t:d/l})}for(var d=0;d<s;d++)for(var p=0;p<l;p++){var g=u[d],m=u[d+1],y=c[p],w=c[p+1],b=Math.abs(m.x-g.x)<.001?"y":"x",x=Math.abs(w.x-y.x)<.001?"y":"x",S=Mfe(g.x,g.y,m.x,m.y,y.x,y.y,w.x,w.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var _=g.t+Math.abs((S[b]-g[b])/(m[b]-g[b]))*(m.t-g.t),M=y.t+Math.abs((S[x]-y[x])/(w[x]-y[x]))*(w.t-y.t);_>=0&&_<=1&&M>=0&&M<=1&&(t?h+=1:h.push({x:S.x,y:S.y,t1:_,t2:M}))}}return h},Tfe=function(r,e,t){r=Xx(r),e=Xx(e);for(var n,i,a,o,s,l,u,c,f,h,d=t?0:[],v=0,p=r.length;v<p;v++){var g=r[v];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[n,i].concat(g.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,y=e.length;m<y;m++){var w=e[m];if(w[0]==="M")a=u=w[1],o=c=w[2];else{w[0]==="C"?(h=[a,o].concat(w.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,u,c,u,c],a=u,o=c);var b=Afe(f,h,t);if(t)d+=b;else{for(var x=0,S=b.length;x<S;x++)b[x].segment1=v,b[x].segment2=m,b[x].bez1=f,b[x].bez2=h;d=d.concat(b)}}}}}return d},kfe=function(r,e){return Tfe(r,e)};function Lfe(r,e){var t=[],n=[];function i(a,o){if(a.length===1)t.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&t.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return r.length&&i(r,e),{left:t,right:n.reverse()}}function Ife(r,e,t){var n=[[r[1],r[2]]];t=t||2;var i=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var a=n,o=1/t,s=0;s<t-1;s++){var l=o/(1-o*s),u=Lfe(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var h=[];return f.length===4&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(f.length===3&&h.push("Q"),h=h.concat(f[1])),f.length===2&&h.push("L"),h=h.concat(f[f.length-1]),h});return c}var Ofe=function(r,e,t){if(t===1)return[[].concat(r)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(Ife(r,e,t));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=t-1;a++)n.push(i)}return n},Nfe=function(r,e){if(r.length===1)return r;var t=r.length-1,n=e.length-1,i=t/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-t;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===t?u.concat(r[t]):u.concat(Ofe(r[f],r[f+1],c))},[]);return l.unshift(r[0]),(e[n]==="Z"||e[n]==="z")&&l.push("Z"),l},$fe=function(r,e){if(r.length!==e.length)return!1;var t=!0;return Pe(r,function(n,i){if(n!==e[i])return t=!1,!1}),t};function Dfe(r,e,t){var n=null,i=t;return e<i&&(i=e,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var Rfe=function(r,e){var t=r.length,n=e.length,i,a,o=0;if(t===0||n===0)return null;for(var s=[],l=0;l<=t;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=t;l++){i=r[l-1];for(var u=1;u<=n;u++){a=e[u-1],$fe(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,h=s[l-1][u-1].min+o;s[l][u]=Dfe(c,f,h)}}return s},SF=function(r,e){var t=Rfe(r,e),n=r.length,i=e.length,a=[],o=1,s=1;if(t[n][i].min!==n){for(var l=1;l<=n;l++){var u=t[l][l].min;s=l;for(var c=o;c<=i;c++)t[l][c].min<u&&(u=t[l][c].min,s=c);o=s,t[l][o].type&&a.push({index:l-1,type:t[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function Jb(r,e,t){for(var n=[].concat(r),i,a=1/(t+1),o=_F(e)[0],s=1;s<=t;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function _F(r){var e=[];switch(r[0]){case"M":e.push([r[1],r[2]]);break;case"L":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"T":e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"H":e.push([r[1],r[1]]);break;case"V":e.push([r[1],r[1]]);break}return e}var qx=function(r,e){if(r.length<=1)return r;for(var t,n=0;n<e.length;n++)if(r[n][0]!==e[n][0])switch(t=_F(r[n]),e[n][0]){case"M":r[n]=["M"].concat(t[0]);break;case"L":r[n]=["L"].concat(t[0]);break;case"A":r[n]=[].concat(e[n]),r[n][6]=t[0][0],r[n][7]=t[0][1];break;case"Q":if(t.length<2)if(n>0)t=Jb(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["Q"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(n>0)t=Jb(t,r[n-1],2);else{r[n]=e[n];break}r[n]=["C"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(t.length<2)if(n>0)t=Jb(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["S"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=e[n]}return r};const Pfe=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:Vx,fillPath:Nfe,fillPathByDiff:SF,formatPath:qx,intersection:kfe,parsePathArray:wF,parsePathString:hf,pathToAbsolute:Yx,pathToCurve:Xx,rectPath:xF},Symbol.toStringTag,{value:"Module"}));var EF=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function MF(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}var WL=typeof window<"u"&&typeof window.document<"u";function CF(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),n=!1;t;){if(t===r){n=!0;break}t=t.getParent()}return n}function Zx(r){return r.cfg.visible&&r.cfg.capture}var Ffe=function(r){ir(e,r);function e(t){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=Gt(i,t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,n){this.cfg[t]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(x5),HL=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))},Bfe=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),zfe=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),Gfe=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}(),jfe=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),Ufe=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),Wfe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Hfe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,VL=3,Vfe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Wfe]],YL=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function AF(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ufe:typeof navigator<"u"?Xfe(navigator.userAgent):qfe()}function Yfe(r){return r!==""&&Vfe.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var a=i.exec(r);return!!a&&[n,a]},!1)}function Xfe(r){var e=Yfe(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new jfe;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<VL&&(i=HL(HL([],i,!0),Zfe(VL-i.length),!0)):i=[];var a=i.join("."),o=Kfe(r),s=Hfe.exec(r);return s&&s[1]?new Gfe(t,a,o,s[1]):new Bfe(t,a,o)}function Kfe(r){for(var e=0,t=YL.length;e<t;e++){var n=YL[e],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function qfe(){var r=typeof process<"u"&&process.version;return r?new zfe(process.version.slice(1)):null}function Zfe(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function XL(r,e){var t=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],h=e[0],d=e[1],v=e[2],p=e[3],g=e[4],m=e[5],y=e[6],w=e[7],b=e[8];return t[0]=h*n+d*o+v*u,t[1]=h*i+d*s+v*c,t[2]=h*a+d*l+v*f,t[3]=p*n+g*o+m*u,t[4]=p*i+g*s+m*c,t[5]=p*a+g*l+m*f,t[6]=y*n+w*o+b*u,t[7]=y*i+w*s+b*c,t[8]=y*a+w*l+b*f,t}function ju(r,e){var t=[],n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function TF(r){var e=[],t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,v=t*f+n*h+i*d;return v?(v=1/v,e[0]=f*v,e[1]=(-c*n+i*u)*v,e[2]=(s*n-i*o)*v,e[3]=h*v,e[4]=(c*t-i*l)*v,e[5]=(-s*t+i*a)*v,e[6]=d*v,e[7]=(-u*t+n*l)*v,e[8]=(o*t-n*a)*v,e):null}var Gh=Pa,ew="matrix",Qfe=["zIndex","capture","visible","type"],Jfe=["repeat"],ehe=":",the="*";function rhe(r){for(var e=[],t=0;t<r.length;t++)Bt(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}function nhe(r,e){var t={},n=e.attrs;for(var i in r)t[i]=n[i];return t}function ihe(r,e){var t={},n=e.attr();return Pe(r,function(i,a){Jfe.indexOf(a)===-1&&!Gl(n[a],i)&&(t[a]=i)}),t}function ahe(r,e){if(e.onFrame)return r;var t=e.startTime,n=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return Pe(r,function(o){t+n<o.startTime+o.delay+o.duration&&i>o.delay&&Pe(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var kF=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this;n.attrs={};var i=n.getDefaultAttrs();return Gt(i,t.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(ni(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,n){var i=this.getClip();return i&&!i.isHit(t,n)},e.prototype.setAttr=function(t,n){var i=this.attrs[t];i!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,i))},e.prototype.onAttrChange=function(t,n,i){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var n=this.getParent();n?(MF(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(ew,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(ew)},e.prototype.setMatrix=function(t){this.attr(ew,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?t=XL(i,n):t=n||i,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var n=this.attr("matrix"),i=null;t&&n?i=XL(t,n):i=n||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?ju(n,t):t},e.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var i=TF(n);if(i)return ju(i,t)}return t},e.prototype.setClip=function(t){var n=this.getCanvas(),i=null;if(t){var a=this.getShapeBase(),o=Bf(t.type),s=a[o];s&&(i=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,n=this.attrs,i={};Pe(n,function(s,l){Bt(n[l])?i[l]=rhe(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return Pe(Qfe,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=t[0],s=t[1],l=t[2],u=l===void 0?"easeLinear":l,c=t[3],f=c===void 0?sd:c,h=t[4],d=h===void 0?0:h,v,p,g,m,y;tn(o)?(v=o,o={}):ni(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),ni(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",d=y.delay||0,p=y.repeat||p||!1,f=y.callback||sd,g=y.pauseCallback||sd,m=y.resumeCallback||sd):(Rt(f)&&(d=f,f=null),tn(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var w=ihe(o,this),b={fromAttrs:nhe(w,this),toAttrs:w,duration:s,easing:u,repeat:p,callback:f,pauseCallback:g,resumeCallback:m,delay:d,startTime:i.getTime(),id:es(),onFrame:v,pathFormatted:!1};a.length>0?a=ahe(a,b):i.addAnimator(this),a.push(b),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var n=this;t===void 0&&(t=!0);var i=this.get("animations");Pe(i,function(a){t&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),i=t.getTime();return Pe(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),n=t.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return Pe(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(t,n){var i=this,a=n.propagationPath;this.getEvents();var o;t==="mouseenter"?o=n.fromShape:t==="mouseleave"&&(o=n.toShape);for(var s=function(f){var h=a[f],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&o&&CF(h,o))return"break";Bt(d)?Pe(d,function(v){i.emitDelegateEvent(h,v,n)}):l.emitDelegateEvent(h,d,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},e.prototype.emitDelegateEvent=function(t,n,i){var a=this.getEvents(),o=n+ehe+i.type;(a[o]||a[the])&&(i.name=o,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.getMatrix(),a=Gh(i,[["t",t,n]]);return this.setMatrix(a),this},e.prototype.move=function(t,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-i,n-a),this},e.prototype.moveTo=function(t,n){return this.move(t,n)},e.prototype.scale=function(t,n){var i=this.getMatrix(),a=Gh(i,[["s",t,n||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var n=this.getMatrix(),i=Gh(n,[["r",t]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(t){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=Gh(o,[["t",-i,-a],["r",t],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,n,i){var a=this.getMatrix(),o=Gh(a,[["t",-t,-n],["r",i],["t",t,n]]);return this.setMatrix(o),this},e}(Ffe),KL={},Qx="_INDEX";function LF(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){LF(n,e)})}}function IF(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){IF(n,e)})}}function ohe(r,e,t){e.set("parent",null),e.set("canvas",null),MF(r.getChildren(),e)}function she(r){return function(e,t){var n=r(e,t);return n===0?e[Qx]-t[Qx]:n}}var OF=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Pe(o,function(l){var u=l.getBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<t&&(t=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Pe(o,function(l){var u=l.getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<t&&(t=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,n,i){if(r.prototype.onAttrChange.call(this,t,n,i),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var n=this.getChildren();Pe(n,function(i){i.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1];ni(i)?a=i:a.type=i;var o=KL[a.type];o||(o=Bf(a.type),KL[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1],o;if(tn(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,n,i){if(!Zx(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,n,i);else{var s=[t,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(t,n,i,a){for(var o=null,s=t.length-1;s>=0;s--){var l=t[s];if(Zx(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},e.prototype.add=function(t){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&ohe(o,t),t.set("parent",this),n&&LF(t,n),a&&IF(t,a),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t=this.getChildren();Pe(t,function(n,i){return n[Qx]=i,n}),t.sort(she(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var n=this.getChildren();return n[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var n=this.getChildren();return n.indexOf(t)>-1},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0),this.contain(t)&&t.remove(n)},e.prototype.findAll=function(t){var n=[],i=this.getChildren();return Pe(i,function(a){t(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(t)))}),n},e.prototype.find=function(t){var n=null,i=this.getChildren();return Pe(i,function(a){if(t(a)?n=a:a.isGroup()&&(n=a.find(t)),n)return!1}),n},e.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},e}(kF),zf=0,ud=0,jh=0,NF=1e3,bm,cd,wm=0,cc=0,Dy=0,vv=typeof performance=="object"&&performance.now?performance:Date,$F=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function DF(){return cc||($F(lhe),cc=vv.now()+Dy)}function lhe(){cc=0}function Jx(){this._call=this._time=this._next=null}Jx.prototype=RF.prototype={constructor:Jx,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?DF():+t)+(e==null?0:+e),!this._next&&cd!==this&&(cd?cd._next=this:bm=this,cd=this),this._call=r,this._time=t,eS()},stop:function(){this._call&&(this._call=null,this._time=1/0,eS())}};function RF(r,e,t){var n=new Jx;return n.restart(r,e,t),n}function uhe(){DF(),++zf;for(var r=bm,e;r;)(e=cc-r._time)>=0&&r._call.call(null,e),r=r._next;--zf}function qL(){cc=(wm=vv.now())+Dy,zf=ud=0;try{uhe()}finally{zf=0,fhe(),cc=0}}function che(){var r=vv.now(),e=r-wm;e>NF&&(Dy-=e,wm=r)}function fhe(){for(var r,e=bm,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:bm=t);cd=r,eS(n)}function eS(r){if(!zf){ud&&(ud=clearTimeout(ud));var e=r-cc;e>24?(r<1/0&&(ud=setTimeout(qL,r-vv.now()-Dy)),jh&&(jh=clearInterval(jh))):(jh||(wm=vv.now(),jh=setInterval(che,NF)),zf=1,$F(qL))}}function y2(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function PF(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Uv(){}var pv=.7,xm=1/pv,_f="\\s*([+-]?\\d+)\\s*",gv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hhe=/^#([0-9a-f]{3,8})$/,dhe=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),vhe=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),phe=new RegExp(`^rgba\\(${_f},${_f},${_f},${gv}\\)$`),ghe=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${gv}\\)$`),mhe=new RegExp(`^hsl\\(${gv},${Yo},${Yo}\\)$`),yhe=new RegExp(`^hsla\\(${gv},${Yo},${Yo},${gv}\\)$`),ZL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};y2(Uv,mv,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:QL,formatHex:QL,formatHex8:bhe,formatHsl:whe,formatRgb:JL,toString:JL});function QL(){return this.rgb().formatHex()}function bhe(){return this.rgb().formatHex8()}function whe(){return FF(this).formatHsl()}function JL(){return this.rgb().formatRgb()}function mv(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=hhe.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?eI(e):t===3?new $i(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?yg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?yg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dhe.exec(r))?new $i(e[1],e[2],e[3],1):(e=vhe.exec(r))?new $i(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=phe.exec(r))?yg(e[1],e[2],e[3],e[4]):(e=ghe.exec(r))?yg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mhe.exec(r))?nI(e[1],e[2]/100,e[3]/100,1):(e=yhe.exec(r))?nI(e[1],e[2]/100,e[3]/100,e[4]):ZL.hasOwnProperty(r)?eI(ZL[r]):r==="transparent"?new $i(NaN,NaN,NaN,0):null}function eI(r){return new $i(r>>16&255,r>>8&255,r&255,1)}function yg(r,e,t,n){return n<=0&&(r=e=t=NaN),new $i(r,e,t,n)}function xhe(r){return r instanceof Uv||(r=mv(r)),r?(r=r.rgb(),new $i(r.r,r.g,r.b,r.opacity)):new $i}function tS(r,e,t,n){return arguments.length===1?xhe(r):new $i(r,e,t,n??1)}function $i(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}y2($i,tS,PF(Uv,{brighter(r){return r=r==null?xm:Math.pow(xm,r),new $i(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?pv:Math.pow(pv,r),new $i(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new $i(qu(this.r),qu(this.g),qu(this.b),Sm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tI,formatHex:tI,formatHex8:She,formatRgb:rI,toString:rI}));function tI(){return`#${Uu(this.r)}${Uu(this.g)}${Uu(this.b)}`}function She(){return`#${Uu(this.r)}${Uu(this.g)}${Uu(this.b)}${Uu((isNaN(this.opacity)?1:this.opacity)*255)}`}function rI(){const r=Sm(this.opacity);return`${r===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${r===1?")":`, ${r})`}`}function Sm(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function qu(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Uu(r){return r=qu(r),(r<16?"0":"")+r.toString(16)}function nI(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Ja(r,e,t,n)}function FF(r){if(r instanceof Ja)return new Ja(r.h,r.s,r.l,r.opacity);if(r instanceof Uv||(r=mv(r)),!r)return new Ja;if(r instanceof Ja)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-n)/s+(t<n)*6:t===a?o=(n-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ja(o,s,l,r.opacity)}function _he(r,e,t,n){return arguments.length===1?FF(r):new Ja(r,e,t,n??1)}function Ja(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}y2(Ja,_he,PF(Uv,{brighter(r){return r=r==null?xm:Math.pow(xm,r),new Ja(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?pv:Math.pow(pv,r),new Ja(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new $i(tw(r>=240?r-240:r+120,i,n),tw(r,i,n),tw(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Ja(iI(this.h),bg(this.s),bg(this.l),Sm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Sm(this.opacity);return`${r===1?"hsl(":"hsla("}${iI(this.h)}, ${bg(this.s)*100}%, ${bg(this.l)*100}%${r===1?")":`, ${r})`}`}}));function iI(r){return r=(r||0)%360,r<0?r+360:r}function bg(r){return Math.max(0,Math.min(1,r||0))}function tw(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const b2=r=>()=>r;function Ehe(r,e){return function(t){return r+t*e}}function Mhe(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function Che(r){return(r=+r)==1?BF:function(e,t){return t-e?Mhe(e,t,r):b2(isNaN(e)?t:e)}}function BF(r,e){var t=e-r;return t?Ehe(r,t):b2(isNaN(r)?e:r)}const aI=function r(e){var t=Che(e);function n(i,a){var o=t((i=tS(i)).r,(a=tS(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),u=BF(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=r,n}(1);function zF(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function GF(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Ahe(r,e){return(GF(e)?zF:jF)(r,e)}function jF(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),o;for(o=0;o<n;++o)i[o]=_m(r[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function The(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function rS(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function khe(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=_m(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var nS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rw=new RegExp(nS.source,"g");function Lhe(r){return function(){return r}}function Ihe(r){return function(e){return r(e)+""}}function Ohe(r,e){var t=nS.lastIndex=rw.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(r=r+"",e=e+"";(n=nS.exec(r))&&(i=rw.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:rS(n,i)})),t=rw.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Ihe(l[0].x):Lhe(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function _m(r,e){var t=typeof e,n;return e==null||t==="boolean"?b2(e):(t==="number"?rS:t==="string"?(n=mv(e))?(e=n,aI):Ohe:e instanceof mv?aI:e instanceof Date?The:GF(e)?zF:Array.isArray(e)?jF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?khe:rS)(r,e)}function Nhe(r){return+r}function $he(r){return r*r}function Dhe(r){return r*(2-r)}function oI(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function Rhe(r){return r*r*r}function Phe(r){return--r*r*r+1}function sI(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var w2=3,Fhe=function r(e){e=+e;function t(n){return Math.pow(n,e)}return t.exponent=r,t}(w2),Bhe=function r(e){e=+e;function t(n){return 1-Math.pow(1-n,e)}return t.exponent=r,t}(w2),lI=function r(e){e=+e;function t(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return t.exponent=r,t}(w2),UF=Math.PI,WF=UF/2;function zhe(r){return+r==1?1:1-Math.cos(r*WF)}function Ghe(r){return Math.sin(r*WF)}function uI(r){return(1-Math.cos(UF*r))/2}function jl(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function jhe(r){return jl(1-+r)}function Uhe(r){return 1-jl(r)}function cI(r){return((r*=2)<=1?jl(1-r):2-jl(r-1))/2}function Whe(r){return 1-Math.sqrt(1-r*r)}function Hhe(r){return Math.sqrt(1- --r*r)}function fI(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var iS=4/11,Vhe=6/11,Yhe=8/11,Xhe=3/4,Khe=9/11,qhe=10/11,Zhe=15/16,Qhe=21/22,Jhe=63/64,wg=1/iS/iS;function ede(r){return 1-yv(1-r)}function yv(r){return(r=+r)<iS?wg*r*r:r<Yhe?wg*(r-=Vhe)*r+Xhe:r<qhe?wg*(r-=Khe)*r+Zhe:wg*(r-=Qhe)*r+Jhe}function tde(r){return((r*=2)<=1?1-yv(1-r):yv(r-1)+1)/2}var x2=1.70158,rde=function r(e){e=+e;function t(n){return(n=+n)*n*(e*(n-1)+n)}return t.overshoot=r,t}(x2),nde=function r(e){e=+e;function t(n){return--n*n*((n+1)*e+n)+1}return t.overshoot=r,t}(x2),hI=function r(e){e=+e;function t(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return t.overshoot=r,t}(x2),Gf=2*Math.PI,S2=1,_2=.3,ide=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Gf);function i(a){return e*jl(- --a)*Math.sin((n-a)/t)}return i.amplitude=function(a){return r(a,t*Gf)},i.period=function(a){return r(e,a)},i}(S2,_2),dI=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Gf);function i(a){return 1-e*jl(a=+a)*Math.sin((a+n)/t)}return i.amplitude=function(a){return r(a,t*Gf)},i.period=function(a){return r(e,a)},i}(S2,_2),ade=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Gf);function i(a){return((a=a*2-1)<0?e*jl(-a)*Math.sin((n-a)/t):2-e*jl(a)*Math.sin((n+a)/t))/2}return i.amplitude=function(a){return r(a,t*Gf)},i.period=function(a){return r(e,a)},i}(S2,_2);const ode=Object.freeze(Object.defineProperty({__proto__:null,easeBack:hI,easeBackIn:rde,easeBackInOut:hI,easeBackOut:nde,easeBounce:yv,easeBounceIn:ede,easeBounceInOut:tde,easeBounceOut:yv,easeCircle:fI,easeCircleIn:Whe,easeCircleInOut:fI,easeCircleOut:Hhe,easeCubic:sI,easeCubicIn:Rhe,easeCubicInOut:sI,easeCubicOut:Phe,easeElastic:dI,easeElasticIn:ide,easeElasticInOut:ade,easeElasticOut:dI,easeExp:cI,easeExpIn:jhe,easeExpInOut:cI,easeExpOut:Uhe,easeLinear:Nhe,easePoly:lI,easePolyIn:Fhe,easePolyInOut:lI,easePolyOut:Bhe,easeQuad:oI,easeQuadIn:$he,easeQuadInOut:oI,easeQuadOut:Dhe,easeSin:uI,easeSinIn:zhe,easeSinInOut:uI,easeSinOut:Ghe},Symbol.toStringTag,{value:"Module"}));var sde={};function lde(r){return sde[r.toLowerCase()]||ode[r]}var ude=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},cde=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},vI=[1,0,0,0,1,0,0,0,1];function fde(r,e,t){var n={},i=e.fromAttrs,a=e.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!Gl(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=hf(a[s]),u=hf(i[s]),u=SF(u,l),u=qx(u,l),e.fromAttrs.path=u,e.toAttrs.path=l):e.pathFormatted||(l=hf(a[s]),u=hf(i[s]),u=qx(u,l),e.fromAttrs.path=u,e.toAttrs.path=l,e.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],h=u[c],d=[],v=0;v<f.length;v++)Rt(f[v])&&h&&Rt(h[v])?(o=_m(h[v],f[v]),d.push(o(t))):d.push(f[v]);n[s].push(d)}}else if(s==="matrix"){var p=Ahe(i[s]||vI,a[s]||vI),g=p(t);n[s]=g}else ude(s)&&cde(a[s])?n[s]=a[s]:tn(a[s])||(o=_m(i[s],a[s]),n[s]=o(t));r.attr(n)}}function hde(r,e,t){var n=e.startTime,i=e.delay;if(t<n+i||e._paused)return!1;var a,o=e.duration,s=e.easing,l=lde(s);if(t=t-n-e.delay,e.repeat)a=t%o/o,a=l(a);else if(a=t/o,a<1)a=l(a);else return e.onFrame?r.attr(e.onFrame(1)):r.attr(e.toAttrs),!0;if(e.onFrame){var u=e.onFrame(a);r.attr(u)}else fde(r,e,a);return!1}var dde=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var e=this,t=!1,n,i,a;this.timer=RF(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(n=e.animators[s],n.destroyed){e.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],t=hde(n,a,o),t&&(i.splice(l,1),t=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),vde=40,pI=0,gI=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function mI(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function pde(r,e,t){if(t.bubbles){var n=void 0,i=!1;if(e==="mouseenter"?(n=t.fromShape,i=!0):e==="mouseleave"&&(i=!0,n=t.toShape),r.isCanvas()&&i)return;if(n&&CF(r,n)){t.bubbles=!1;return}t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var gde=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;t._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,o,t.draggingShape)}},this._onDocumentMouseUp=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&t.dragging){var o=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,o,null),t._emitEvent("dragend",n,o,t.draggingShape),t._afterDrag(t.draggingShape,o,n)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Pe(gI,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Pe(gI,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,n,i,a,o){var s=new EF(e,t);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),i=this._getShape(n,t),a=this["_on"+e],o=!1;if(a)a.call(this,n,i,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,n,null,null,i),i&&this._emitEvent(e,t,n,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,n,s,s,null),this._emitEvent(e,t,n,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(e,t,n){n.button===pI&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,t,n,n,i),this._emitEvent("mouseleave",e,t,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,n,i),this._emitEvent("mouseenter",e,t,i,n,i)))},r.prototype._emitDragoverEvents=function(e,t,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,i),this._emitEvent("dragenter",e,t,i,n,i)),a||this._emitEvent("dragover",e,t,i)):n&&this._emitEvent("dragleave",e,t,n,n,i),a&&this._emitEvent("dragover",e,t,i)},r.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==e&&this._emitMouseoverEvents(n,t,e,i),this.currentShape=i},r.prototype._onmouseup=function(e,t,n){if(n.button===pI){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,t,!0)},r.prototype._onmousemove=function(e,t,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,a,t,!1),this._emitEvent("drag",n,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-e.clientX,h=s.clientY-e.clientY,d=f*f+h*h;c>120||d>vde?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)}},r.prototype._emitEvent=function(e,t,n,i,a,o){var s=this._getEventObj(e,t,n,i,a,o);if(i){s.shape=i,mI(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||pde(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;mI(u,e,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),yI="px",bI=AF(),mde=bI&&bI.name==="firefox",HF=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");rt(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var n=this.get("container");n.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new gde({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new dde(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,n){var i=this.get("el");WL&&(i.style.width=t+yI,i.style.height=n+yI)},e.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");WL&&n&&(n.style.cursor=t)},e.prototype.getPointByEvent=function(t){var n=this.get("supportCSSTransform");if(n){if(mde&&!Dt(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!Dt(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(t.type==="touchend"?n=t.changedTouches[0]:n=t.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t-a.left,y:n-a.top}},e.prototype.getClientByPoint=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t+a.left,y:n+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(OF),VF=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];t.add(a.clone())}return t},e}(OF),YF=function(r){ir(e,r);function e(t){return r.call(this,t)||this}return e.prototype._isInBBox=function(t,n){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),i=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(n){var l=ju(n,[t.minX,t.minY]),u=ju(n,[t.maxX,t.minY]),c=ju(n,[t.minX,t.maxY]),f=ju(n,[t.maxX,t.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,v=d===void 0?0:d,p=h.shadowOffsetX,g=p===void 0?0:p,m=h.shadowOffsetY,y=m===void 0?0:m,w=i-v+g,b=o+v+g,x=a-v+y,S=s+v+y;i=Math.min(i,w),o=Math.max(o,b),a=Math.min(a,x),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(kF),XF=new Map;function is(r,e){XF.set(r,e)}function KF(r){return XF.get(r)}function qF(r){var e=r.attr(),t=e.x,n=e.y,i=e.width,a=e.height;return{x:t,y:n,width:i,height:a}}function ZF(r){var e=r.attr(),t=e.x,n=e.y,i=e.r;return{x:t-i,y:n-i,width:i*2,height:i*2}}function yi(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function M0(r,e){return Math.abs(r-e)<.001}function uh(r,e){var t=Jo(r),n=Jo(e),i=Qo(r),a=Qo(e);return{x:t,y:n,width:i-t,height:a-n}}function Ry(r){return(r+Math.PI*2)%(Math.PI*2)}const ti={box:function(r,e,t,n){return uh([r,t],[e,n])},length:function(r,e,t,n){return yi(r,e,t,n)},pointAt:function(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}},pointDistance:function(r,e,t,n,i,a){var o=(t-r)*(i-r)+(n-e)*(a-e);if(o<0)return yi(r,e,i,a);var s=(t-r)*(t-r)+(n-e)*(n-e);return o>s?yi(t,n,i,a):this.pointToLine(r,e,t,n,i,a)},pointToLine:function(r,e,t,n,i,a){var o=[t-r,n-e];if(a2(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-e)*(a-e));var s=[-o[1],o[0]];Pl(s,s);var l=[i-r,a-e];return Math.abs(i2(l,s))},tangentAngle:function(r,e,t,n){return Math.atan2(n-e,t-r)}};var yde=1e-4;function QF(r,e,t,n,i,a){var o,s=1/0,l=[t,n],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,h=0;h<=u;h++){var d=h*c,v=[i.apply(null,r.concat([d])),i.apply(null,e.concat([d]))],p=yi(l[0],l[1],v[0],v[1]);p<s&&(o=d,s=p)}if(o===0)return{x:r[0],y:e[0]};if(o===1){var g=r.length;return{x:r[g-1],y:e[g-1]}}s=1/0;for(var h=0;h<32&&!(f<yde);h++){var m=o-f,y=o+f,v=[i.apply(null,r.concat([m])),i.apply(null,e.concat([m]))],p=yi(l[0],l[1],v[0],v[1]);if(m>=0&&p<s)o=m,s=p;else{var w=[i.apply(null,r.concat([y])),i.apply(null,e.concat([y]))],b=yi(l[0],l[1],w[0],w[1]);y<=1&&b<s?(o=y,s=b):f*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,e.concat([o]))}}function bde(r,e){for(var t=0,n=r.length,i=0;i<n;i++){var a=r[i],o=e[i],s=r[(i+1)%n],l=e[(i+1)%n];t+=yi(a,o,s,l)}return t/2}function _l(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function wI(r,e,t){var n=r+t-2*e;if(M0(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function xI(r,e,t,n){return 2*(1-n)*(e-r)+2*n*(t-e)}function JF(r,e,t,n,i,a,o){var s=_l(r,t,i,o),l=_l(e,n,a,o),u=ti.pointAt(r,e,t,n,o),c=ti.pointAt(t,n,i,a,o);return[[r,e,u.x,u.y,s,l],[s,l,c.x,c.y,i,a]]}function aS(r,e,t,n,i,a,o){if(o===0)return(yi(r,e,t,n)+yi(t,n,i,a)+yi(r,e,i,a))/2;var s=JF(r,e,t,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),aS.apply(null,l)+aS.apply(null,u)}const eB={box:function(r,e,t,n,i,a){var o=wI(r,t,i)[0],s=wI(e,n,a)[0],l=[r,i],u=[e,a];return o!==void 0&&l.push(_l(r,t,i,o)),s!==void 0&&u.push(_l(e,n,a,s)),uh(l,u)},length:function(r,e,t,n,i,a){return aS(r,e,t,n,i,a,3)},nearestPoint:function(r,e,t,n,i,a,o,s){return QF([r,t,i],[e,n,a],o,s,_l)},pointDistance:function(r,e,t,n,i,a,o,s){var l=this.nearestPoint(r,e,t,n,i,a,o,s);return yi(l.x,l.y,o,s)},interpolationAt:_l,pointAt:function(r,e,t,n,i,a,o){return{x:_l(r,t,i,o),y:_l(e,n,a,o)}},divide:function(r,e,t,n,i,a,o){return JF(r,e,t,n,i,a,o)},tangentAngle:function(r,e,t,n,i,a,o){var s=xI(r,t,i,o),l=xI(e,n,a,o),u=Math.atan2(l,s);return Ry(u)}};function El(r,e,t,n,i){var a=1-i;return a*a*a*r+3*e*i*a*a+3*t*i*i*a+n*i*i*i}function SI(r,e,t,n,i){var a=1-i;return 3*(a*a*(e-r)+2*a*i*(t-e)+i*i*(n-t))}function nw(r,e,t,n){var i=-3*r+9*e-9*t+3*n,a=6*r-12*e+6*t,o=3*e-3*r,s=[],l,u,c;if(M0(i,0))M0(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;M0(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function tB(r,e,t,n,i,a,o,s,l){var u=El(r,t,i,o,l),c=El(e,n,a,s,l),f=ti.pointAt(r,e,t,n,l),h=ti.pointAt(t,n,i,a,l),d=ti.pointAt(i,a,o,s,l),v=ti.pointAt(f.x,f.y,h.x,h.y,l),p=ti.pointAt(h.x,h.y,d.x,d.y,l);return[[r,e,f.x,f.y,v.x,v.y,u,c],[u,c,p.x,p.y,d.x,d.y,o,s]]}function oS(r,e,t,n,i,a,o,s,l){if(l===0)return bde([r,t,i,o],[e,n,a,s]);var u=tB(r,e,t,n,i,a,o,s,.5),c=u[0],f=u[1];return c.push(l-1),f.push(l-1),oS.apply(null,c)+oS.apply(null,f)}const Nd={extrema:nw,box:function(r,e,t,n,i,a,o,s){for(var l=[r,o],u=[e,s],c=nw(r,t,i,o),f=nw(e,n,a,s),h=0;h<c.length;h++)l.push(El(r,t,i,o,c[h]));for(var h=0;h<f.length;h++)u.push(El(e,n,a,s,f[h]));return uh(l,u)},length:function(r,e,t,n,i,a,o,s){return oS(r,e,t,n,i,a,o,s,3)},nearestPoint:function(r,e,t,n,i,a,o,s,l,u,c){return QF([r,t,i,o],[e,n,a,s],l,u,El,c)},pointDistance:function(r,e,t,n,i,a,o,s,l,u,c){var f=this.nearestPoint(r,e,t,n,i,a,o,s,l,u,c);return yi(f.x,f.y,l,u)},interpolationAt:El,pointAt:function(r,e,t,n,i,a,o,s,l){return{x:El(r,t,i,o,l),y:El(e,n,a,s,l)}},divide:function(r,e,t,n,i,a,o,s,l){return tB(r,e,t,n,i,a,o,s,l)},tangentAngle:function(r,e,t,n,i,a,o,s,l){var u=SI(r,t,i,o,l),c=SI(e,n,a,s,l);return Ry(Math.atan2(c,u))}};function _I(r,e){var t=Math.abs(r);return e>0?t:t*-1}const wde={box:function(r,e,t,n){return{x:r-t,y:e-n,width:t*2,height:n*2}},length:function(r,e,t,n){return Math.PI*(3*(t+n)-Math.sqrt((3*t+n)*(t+3*n)))},nearestPoint:function(r,e,t,n,i,a){var o=t,s=n;if(o===0||s===0)return{x:r,y:e};for(var l=i-r,u=a-e,c=Math.abs(l),f=Math.abs(u),h=o*o,d=s*s,v=Math.PI/4,p,g,m=0;m<4;m++){p=o*Math.cos(v),g=s*Math.sin(v);var y=(h-d)*Math.pow(Math.cos(v),3)/o,w=(d-h)*Math.pow(Math.sin(v),3)/s,b=p-y,x=g-w,S=c-y,_=f-w,M=Math.hypot(x,b),A=Math.hypot(_,S),E=M*Math.asin((b*_-x*S)/(M*A)),T=E/Math.sqrt(h+d-p*p-g*g);v+=T,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+_I(p,l),y:e+_I(g,u)}},pointDistance:function(r,e,t,n,i,a){var o=this.nearestPoint(r,e,t,n,i,a);return yi(o.x,o.y,i,a)},pointAt:function(r,e,t,n,i){var a=2*Math.PI*i;return{x:r+t*Math.cos(a),y:e+n*Math.sin(a)}},tangentAngle:function(r,e,t,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-t*Math.sin(a));return Ry(o)}};function xde(r,e,t,n,i,a,o,s){return-1*t*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function Sde(r,e,t,n,i,a,o,s){return-1*t*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function _de(r,e,t){return Math.atan(-e/r*Math.tan(t))}function Ede(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function EI(r,e,t,n,i,a){return t*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function MI(r,e,t,n,i,a){return t*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function Mde(r,e,t,n){var i=Math.atan2(n*r,t*e);return(i+Math.PI*2)%(Math.PI*2)}function CI(r,e,t){return{x:r*Math.cos(t),y:e*Math.sin(t)}}function AI(r,e,t){var n=Math.cos(t),i=Math.sin(t);return[r*n-e*i,r*i+e*n]}const Cde={box:function(r,e,t,n,i,a,o){for(var s=_de(t,n,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h)}for(var f=0;f<c.length;f++){var d=EI(r,e,t,n,i,c[f]);d<l&&(l=d),d>u&&(u=d)}for(var v=Ede(t,n,i),p=1/0,g=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=v+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(var f=0;f<m.length;f++){var w=MI(r,e,t,n,i,m[f]);w<p&&(p=w),w>g&&(g=w)}return{x:l,y:p,width:u-l,height:g-p}},length:function(r,e,t,n,i,a,o){},nearestPoint:function(r,e,t,n,i,a,o,s,l){var u=AI(s-r,l-e,-i),c=u[0],f=u[1],h=wde.nearestPoint(0,0,t,n,c,f),d=Mde(t,n,h.x,h.y);d<a?h=CI(t,n,a):d>o&&(h=CI(t,n,o));var v=AI(h.x,h.y,i);return{x:v[0]+r,y:v[1]+e}},pointDistance:function(r,e,t,n,i,a,o,s,l){var u=this.nearestPoint(r,e,t,n,s,l);return yi(u.x,u.y,s,l)},pointAt:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a;return{x:EI(r,e,t,n,i,l),y:MI(r,e,t,n,i,l)}},tangentAngle:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a,u=xde(r,e,t,n,i,a,o,l),c=Sde(r,e,t,n,i,a,o,l);return Ry(Math.atan2(c,u))}};function rB(r){for(var e=0,t=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=yi(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Ade(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=yi(n[0],n[1],i[0],i[1])}return e}function Tde(r,e){if(e>1||e<0||r.length<2)return null;var t=rB(r),n=t.segments,i=t.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){var h=(e-a)/f;o=ti.pointAt(u[0],u[1],c[0],c[1],h);break}a+=f}return o}function kde(r,e){if(e>1||e<0||r.length<2)return 0;for(var t=rB(r),n=t.segments,i=t.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){o=Math.atan2(c[1]-u[1],c[0]-u[0]);break}a+=f}return o}function Lde(r,e,t){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=ti.pointDistance(a[0],a[1],o[0],o[1],e,t);s<n&&(n=s)}return n}const nB={box:function(r){for(var e=[],t=[],n=0;n<r.length;n++){var i=r[n];e.push(i[0]),t.push(i[1])}return uh(e,t)},length:function(r){return Ade(r)},pointAt:function(r,e){return Tde(r,e)},pointDistance:function(r,e,t){return Lde(r,e,t)},tangentAngle:function(r,e){return kde(r,e)}};function TI(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function E2(r,e){var t=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return t&&(i=t.getCanvasBBox(),e=TI(e,i)),n&&(a=n.getCanvasBBox(),e=TI(e,a)),e}function Ide(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}var s=uh(n,i),l=s.x,u=s.y,c=s.width,f=s.height,h={minX:l,minY:u,maxX:l+c,maxY:u+f};return h=E2(r,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function Ode(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}return uh(n,i)}var iw=null;function iB(){if(!iw){var r=document.createElement("canvas");r.width=1,r.height=1,iw=r.getContext("2d")}return iw}function aB(r,e,t){var n=1;if(rt(r)&&(n=r.split(`
`).length),n>1){var i=Nde(e,t);return e*n+i*(n-1)}return e}function Nde(r,e){return e?e-r:r*.14}function $de(r,e){var t=iB(),n=0;if(Dt(r)||r==="")return n;if(t.save(),t.font=e,rt(r)&&r.includes(`
`)){var i=r.split(`
`);Pe(i,function(a){var o=t.measureText(a).width;n<o&&(n=o)})}else n=t.measureText(r).width;return t.restore(),n}function oB(r){var e=r.fontSize,t=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,e+"px",t].join(" ").trim()}function Dde(r){var e=r.attr(),t=e.x,n=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=oB(e));var l=$de(i,s),u;if(!l)u={x:t,y:n,width:0,height:0};else{var c=e.textAlign,f=e.textBaseline,h=aB(i,a,o),d={x:t,y:n-h};c&&(c==="end"||c==="right"?d.x-=l:c==="center"&&(d.x-=l/2)),f&&(f==="top"?d.y+=h:f==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:l,height:h}}return u}var Rde=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Pde=/[^\s\,]+/ig;function Fde(r){var e=r||[];if(Bt(e))return e;if(rt(e))return e=e.match(Rde),Pe(e,function(t,n){if(t=t.match(Pde),t[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}Pe(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[n]=t}),e}function Bde(r,e,t,n){var i=[],a=!!n,o,s,l,u,c,f,h;if(a){l=n[0],u=n[1];for(var d=0,v=r.length;d<v;d+=1){var p=r[d];l=gl([0,0],l,p),u=ml([0,0],u,p)}}for(var d=0,g=r.length;d<g;d+=1){var p=r[d];if(d===0&&!t)h=p;else if(d===g-1&&!t)f=p,i.push(h),i.push(f);else{var m=[d?d-1:g-1,d-1][t?0:1];o=r[m],s=r[t?(d+1)%g:d+1];var y=[0,0];y=b0(y,s,o),y=mi(y,y,e);var w=dm(p,o),b=dm(p,s),x=w+b;x!==0&&(w/=x,b/=x);var S=mi([0,0],y,-w),_=mi([0,0],y,b);f=Jn([0,0],p,S),c=Jn([0,0],p,_),c=gl([0,0],c,ml([0,0],s,p)),c=ml([0,0],c,gl([0,0],s,p)),S=b0([0,0],c,p),S=mi([0,0],S,-w/b),f=Jn([0,0],p,S),f=gl([0,0],f,ml([0,0],o,p)),f=ml([0,0],f,gl([0,0],o,p)),_=b0([0,0],p,f),_=mi([0,0],_,b/w),c=Jn([0,0],p,_),a&&(f=ml([0,0],f,l),f=gl([0,0],f,u),c=ml([0,0],c,l),c=gl([0,0],c,u)),i.push(h),i.push(f),h=c}}return t&&i.push(i.shift()),i}function sB(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var n=!!e,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=Bde(i,.4,n,t),l=i.length,u=[],c,f,h,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],h=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]]);return n&&(c=s[l],f=s[l+1],h=i[0],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]])),u}var $d=`	
\v\f\r   ᠎             　\u2028\u2029`,zde=new RegExp("([a-z])["+$d+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+$d+"]*,?["+$d+"]*)+)","ig"),Gde=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+$d+"]*,?["+$d+"]*","ig");function sS(r){if(!r)return null;if(Bt(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(zde,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Gde,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var jde=/[a-z]/;function kI(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function lB(r){var e=sS(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,n=0;n<e.length;n++){var i=e[n][0];if(jde.test(i)||["V","H","T","S"].indexOf(i)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,l=0,u=0,c=0,f=e[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,u=s,c++,a[0]=["M",o,s]);for(var n=c,h=e.length;n<h;n++){var d=e[n],v=a[n-1],p=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+d[6]+o,p[7]=+d[7]+s;break;case"V":p[1]=+d[1]+s;break;case"H":p[1]=+d[1]+o;break;case"M":l=+d[1]+o,u=+d[2]+s,p[1]=l,p[2]=u;break;default:for(var m=1,y=d.length;m<y;m++)p[m]=+d[m]+(m%2?o:s)}else p=e[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=p[1],p=["L",o,s];break;case"V":s=p[1],p=["L",o,s];break;case"T":o=p[1],s=p[2];var w=kI([v[1],v[2]],[v[3],v[4]]);p=["Q",w[0],w[1],o,s];break;case"S":o=p[p.length-2],s=p[p.length-1];var b=v.length,x=kI([v[b-4],v[b-3]],[v[b-2],v[b-1]]);p=["C",x[0],x[1],p[1],p[2],o,s];break;case"M":l=p[p.length-2],u=p[p.length-1];break;default:o=p[p.length-2],s=p[p.length-1]}a.push(p)}return a}function xg(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function lS(r,e){return xg(r)*xg(e)?(r[0]*e[0]+r[1]*e[1])/(xg(r)*xg(e)):1}function LI(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(lS(r,e))}function uS(r,e){return r[0]===e[0]&&r[1]===e[1]}function Ude(r,e){var t=e[1],n=e[2],i=ky(Ly(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(f*f),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,m=t?p*-n*f/t:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/t,(h-m)/n],x=[(-1*f-g)/t,(-1*h-m)/n],S=LI([1,0],b),_=LI(b,x);return lS(b,x)<=-1&&(_=Math.PI),lS(b,x)>=1&&(_=0),o===0&&_>0&&(_=_-2*Math.PI),o===1&&_<0&&(_=_+2*Math.PI),{cx:y,cy:w,rx:uS(r,[u,c])?0:t,ry:uS(r,[u,c])?0:n,startAngle:S,endAngle:S+_,xRotation:i,arcFlag:a,sweepFlag:o}}function II(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function uB(r){r=Fde(r);for(var e=[],t=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var l=r[s];n=r[s+1];var u=l[0],c={command:u,prePoint:t,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=Ude(t,l);c.arcParams=f;break}if(u==="Z")t=i,n=r[a+1];else{var h=l.length;t=[l[h-2],l[h-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&uS(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=d;var v=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[v[0]-t[0],v[1]-t[1]],c.endTangent=[t[0]-v[0],t[1]-v[1]];else if(u==="Q"){var p=[l[1],l[2]];c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]]}else if(u==="T"){var g=e[s-1],p=II(g.currentPoint,v);g.command==="Q"?(c.command="Q",c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]]):(c.command="TL",c.startTangent=[v[0]-t[0],v[1]-t[1]],c.endTangent=[t[0]-v[0],t[1]-v[1]])}else if(u==="C"){var m=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[t[0]-y[0],t[1]-y[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[m[0]-y[0],m[1]-y[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[y[0]-m[0],y[1]-m[1]])}else if(u==="S"){var g=e[s-1],m=II(g.currentPoint,v),y=[l[1],l[2]];g.command==="C"?(c.command="C",c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[t[0]-y[0],t[1]-y[1]]):(c.command="SQ",c.startTangent=[v[0]-y[0],v[1]-y[1]],c.endTangent=[t[0]-y[0],t[1]-y[1]])}else if(u==="A"){var w=.001,b=c.arcParams||{},x=b.cx,S=x===void 0?0:x,_=b.cy,M=_===void 0?0:_,A=b.rx,E=A===void 0?0:A,T=b.ry,C=T===void 0?0:T,k=b.sweepFlag,L=k===void 0?0:k,I=b.startAngle,O=I===void 0?0:I,N=b.endAngle,D=N===void 0?0:N;L===0&&(w*=-1);var $=E*Math.cos(O-w)+S,R=C*Math.sin(O-w)+M;c.startTangent=[$-i[0],R-i[1]];var B=E*Math.cos(O+D+w)+S,j=C*Math.sin(O+D-w)+M;c.endTangent=[v[0]-B,v[1]-j]}e.push(c)}return e}function Wde(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=eB.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=Nd.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=Cde.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),n.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}t=t.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var h=Jo(t),d=Jo(n),v=Qo(t),p=Qo(n);if(i.length===0)return{x:h,y:d,width:v-h,height:p-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=Sg(o,e),h=h-g.xExtra):s[0]===v&&(g=Sg(o,e),v=v+g.xExtra),s[1]===d?(g=Sg(o,e),d=d-g.yExtra):s[1]===p&&(g=Sg(o,e),p=p+g.yExtra)}return{x:h,y:d,width:v-h,height:p-d}}function Sg(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||h5(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function Hde(r){var e=r.attr(),t=e.path,n=e.stroke,i=n?e.lineWidth:0,a=r.get("segments")||uB(t),o=Wde(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=E2(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function Vde(r){var e=r.attr(),t=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(t,i),s=Math.max(t,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=E2(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Yde(r){var e=r.attr(),t=e.x,n=e.y,i=e.rx,a=e.ry;return{x:t-i,y:n-a,width:i*2,height:a*2}}is("rect",qF);is("image",qF);is("circle",ZF);is("marker",ZF);is("polyline",Ide);is("polygon",Ode);is("text",Dde);is("path",Hde);is("line",Vde);is("ellipse",Yde);var Xde=function(r){ir(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return e}(EF),cS=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},M2=function(e){if(Bt(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Rt(e))return[e,e,e,e];if(rt(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},Kde=function(e){var t=new Xde(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},qde=function(e){if(!e)return!1;for(var t=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<t;i++)if(e[i]!==n[i])return!0;return!1},No=function(e){return Number.isNaN(Number(e))},cB=function(e){for(var t=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY;u<t&&(t=u),c<i&&(i=c),f>n&&(n=f),h>a&&(a=h)}var d=Math.floor(t),v=Math.floor(i),p=Math.ceil(n)-Math.floor(t),g=Math.ceil(a)-Math.floor(i);return{x:d,y:v,width:p,height:g,minX:t,minY:i,maxX:n,maxY:a}},Zde=function(e,t,n,i,a){t===void 0&&(t=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},h=0;h<o;h++){var d=e[h],v=d.source,p=d.target,g="".concat(v,"-").concat(p);if(!c[h]){u[g]||(u[g]=[]),c[h]=!0,u[g].push(d);for(var m=0;m<o;m++)if(h!==m){var y=e[m],w=y.source,b=y.target;c[m]||(v===b&&p===w?(u[g].push(y),c[m]=!0,f["".concat(w,"|").concat(b,"|").concat(u[g].length-1)]=!0):v===w&&p===b&&(u[g].push(y),c[m]=!0))}}}for(var x in u)for(var S=u[x],_=S.length,M=0;M<_;M++){var A=S[M];if(A.source===A.target){a&&(A.type=a),A.loopCfg={position:l[M%8],dist:Math.floor(M/8)*20+50};continue}if(_===1&&i&&A.source!==A.target){A.type=i;continue}A.type=n;var E=(M%2===0?1:-1)*(f["".concat(A.source,"|").concat(A.target,"|").concat(M)]?-1:1);_%2===1?A.curveOffset=E*Math.ceil(M/2)*s:A.curveOffset=E*(Math.floor(M/2)*s+t)}return e};const Qde=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:cB,cloneEvent:Kde,formatPadding:M2,isNaN:No,isViewportChanged:qde,processParallelEdges:Zde,uniqueId:cS},Symbol.toStringTag,{value:"Module"}));var eu={};const Jde=rs(Ece);Object.defineProperty(eu,"__esModule",{value:!0});var Ul=Jde;function fB(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Ul.mat3.fromTranslation(n,t),Ul.mat3.multiply(r,n,e)}eu.leftTranslate=fB;function hB(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Ul.mat3.fromRotation(n,t),Ul.mat3.multiply(r,n,e)}eu.leftRotate=hB;function dB(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Ul.mat3.fromScaling(n,t),Ul.mat3.multiply(r,n,e)}eu.leftScale=dB;function eve(r,e,t){return Ul.mat3.multiply(r,t,e)}function tve(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":fB(t,t,[a[1],a[2]]);break;case"s":dB(t,t,[a[1],a[2]]);break;case"r":hB(t,t,a[1]);break;case"m":eve(t,t,a[1]);break}}return t}var OI=eu.transform=tve;function vB(r,e){return r[0]*e[1]-e[0]*r[1]}eu.direction=vB;function rve(r,e,t){var n=Ul.vec2.angle(r,e),i=vB(r,e)>=0;return t?i?Math.PI*2-n:n:i?n:Math.PI*2-n}eu.angleTo=rve;function nve(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}eu.vertical=nve;var ive=function(){function r(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return r.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),i=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},r.prototype.fitCenter=function(e,t){var n=this.graph,i=n.get("group"),a,o=n.getNodes();if(o.length>n.get("optimizeThreshold")){var s=1/0,l=1/0,u=-1/0,c=-1/0;o.forEach(function(b){var x=b.getModel(),S=x.x,_=x.y;s>S&&(s=S),l>_&&(l=_),u<S&&(u=S),c<_&&(c=_)});var f=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=Sf({x:s,y:l},f),d=h.x,v=h.y,p=Sf({x:u,y:c},f),g=p.x,m=p.y;a={minX:d,maxX:g,minY:v,maxY:m,width:g-d,height:m-v,x:d,y:v}}else a=i.getCanvasBBox();if(!(a.width===0||a.height===0)){var y=this.getViewCenter(),w={x:a.x+a.width/2,y:a.y+a.height/2};n.translate(y.x-w.x,y.y-w.y,e,t)}},r.prototype.animatedFitView=function(e,t,n,i,a,o,s,l){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],f=i.x+a.x-o.x-i.minX,h=i.y+a.y-o.y-i.minY;if(!(No(f)||No(h))){var d=OI(c,[["t",f,h]]);if(!l){var v=dv({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:d})}});e.animate(function(b){return{matrix:Gx(t,d,b)}},v);return}var p=u.get("minZoom"),g=u.get("maxZoom"),m=s;p&&s<p?(m=p,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):g&&s>g&&(m=g,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var y=OI(d,[["t",-a.x,-a.y],["s",m,m],["t",a.x,a.y]]),w=dv({animateCfg:n,callback:function(){e.setMatrix(y),u.emit("viewportchange",{action:"translate",matrix:d}),u.emit("viewportchange",{action:"zoom",matrix:y})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(b){return{matrix:Gx(t,y,b)}},w)}},r.prototype.fitView=function(e,t){var n=this.graph,i=this.getFormatPadding(),a=n.get("width"),o=n.get("height"),s=n.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var u,c=n.getNodes();if(c.length>n.get("optimizeThreshold")){var f=1/0,h=1/0,d=-1/0,v=-1/0;c.forEach(function(S){var _=S.getModel(),M=_.x,A=_.y;f>M&&(f=M),h>A&&(h=A),d<M&&(d=M),v<A&&(v=A)}),u={minX:f,maxX:d,minY:h,maxY:v,width:d-f,height:v-h,x:f,y:h}}else u=s.getCanvasBBox();if(!(u.width===0||u.height===0)){var p=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},m=(a-i[1]-i[3])/u.width,y=(o-i[0]-i[2])/u.height,w=m;if(m>y&&(w=y),e)this.animatedFitView(s,l,t,u,p,g,w,!0);else{var b=p.x-g.x,x=p.y-g.y;if(No(b)||No(x))return;n.translate(b,x),n.zoom(w,p)||console.warn("zoom failed, ratio out of range, ratio: %f",w)}}},r.prototype.fitViewByRules=function(e,t,n){var i=e.onlyOutOfViewPort,a=i===void 0?!1:i,o=e.direction,s=o===void 0?"both":o,l=e.ratioRule,u=l===void 0?"min":l,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),d=c.get("height"),v=c.get("group"),p=v.getMatrix()||[1,0,0,0,1,0,0,0,1];v.resetMatrix();var g,m=c.getNodes();if(m.length>c.get("optimizeThreshold")){var y=1/0,w=1/0,b=-1/0,x=-1/0;m.forEach(function(L){var I=L.getModel(),O=I.x,N=I.y;y>O&&(y=O),w>N&&(w=N),b<O&&(b=O),x<N&&(x=N)}),g={minX:y,maxX:b,minY:w,maxY:x,width:b-y,height:x-w,x:y,y:w}}else g=v.getCanvasBBox();if(!(g.width===0||g.height===0)){var S=this.getViewCenter(),_={x:g.x+g.width/2,y:g.y+g.height/2},M=(h-f[1]-f[3])/g.width,A=(d-f[0]-f[2])/g.height,E;if(s==="x"?E=M:s==="y"?E=A:E=u==="max"?Math.max(M,A):Math.min(M,A),a&&(E=E<1?E:1),t)this.animatedFitView(v,p,n,g,S,_,E,!0);else{var T=c.getZoom(),C=T*E,k=c.get("minZoom");C<k&&(C=k,console.warn("fitview failed, ratio out of range, ratio: %f",E,"graph minzoom has been used instead")),c.translate(S.x-_.x,S.y-_.y),c.zoomTo(C,S)}}},r.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return M2(e)},r.prototype.focusPoint=function(e,t,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var l=(o.x-e.x)*s[0],u=(o.y-e.y)*s[4],c=0,f=0,h=0,d=0;this.graph.get("canvas").animate(function(v){h=l*v,d=u*v,i.graph.translate(h-c,d-f),c=h,f=d},V({},n))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},r.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=aF({x:e,y:t},n);return i},r.prototype.getPointByClient=function(e,t){var n=this.graph.get("canvas"),i=n.getPointByClient(e,t);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(e,t),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},r.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),Sf({x:e,y:t},n)},r.prototype.focus=function(e,t,n){if(rt(e)&&(e=this.graph.findById(e)),e){var i=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=e.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},t,n)}},r.prototype.focusItems=function(e,t,n,i){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),l=a.get("height"),u=a.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var f={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var v=d[h],p=v.getBBox();p.minX<f.minX&&(f.minX=p.minX),p.minY<f.minY&&(f.minY=p.minY),p.maxX>f.maxX&&(f.maxX=p.maxX),p.maxY>f.maxY&&(f.maxY=p.maxY)}if(f.x=f.minX,f.y=f.minY,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,!(f.width===0||f.height===0)){var g=this.getViewCenter(),m={x:f.x+f.width/2,y:f.y+f.height/2},y=(s-o[1]-o[3])/f.width,w=(l-o[0]-o[2])/f.height,b=y;y>w&&(b=w),n?this.animatedFitView(u,c,i,f,g,m,b,t):(a.translate(g.x-m.x,g.y-m.y),t&&!a.zoom(b,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",b))}}},r.prototype.changeSize=function(e,t){var n=this.graph;if(!Rt(e)||!Rt(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t});var i=n.get("canvas");i.changeSize(e,t);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();function fS(r){"@babel/helpers - typeof";return fS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fS(r)}function NI(r){if(typeof r!="string")return r;var e=function(_){if(typeof _!="string")return _;try{return JSON.parse(_.trim())}catch{return _.trim()}},t=e(r);if(typeof t!="string")return t;for(var n=function(_){return _[_.length-1]},i=r.trim(),a=[],o=[],s=function(){for(var _=[],M=0;M<arguments.length;M++)_[M]=arguments[M];return _.some(function(A){return n(o)===A})},l=function(){return n(a)},u=null,c=0,f="";c<i.length;){var h=i[c],d=s('"',"'");if(!d&&!h.trim()){c+=1;continue}var v=i[c-1]==="\\",p=s("}"),g=s("]"),m=s(","),y=l();if(d)if(n(o)===h&&!v){o.pop();var w=e(f);y.push(w),u=w,f=""}else f+=h;else if(g&&h===",")f&&(y.push(e(f)),f="");else if(p&&h===":")o.push(","),f&&(y.push(f),f="");else if(m&&h===",")f&&(y.push(e(f)),f=""),o.pop();else if(h==="}"&&(p||m)){f&&(y.push(e(f)),f=""),m&&o.pop();for(var b={},x=1;x<y.length;x+=2)b[y[x-1]]=y[x];a.pop(),a.length&&n(a).push(b),o.pop(),u=b}else h==="]"&&g?(f&&(y.push(e(f)),f=""),a.pop(),a.length&&n(a).push(y),o.pop(),u=y):h==="{"?(a.push([]),o.push("}")):h==="["?(a.push([]),o.push("]")):h==='"'?o.push('"'):h==="'"?o.push("'"):f+=h;c+=1}return u||f}var ave=function(e){return e.split("-").reduce(function(t,n){return t+n.charAt(0).toUpperCase()+n.slice(1)})},ove=function(e){return function(t){for(var n=e.length,i=[],a=0,o="";a<n;)if(e[a]==="{"&&e[a+1]==="{")i.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(i.length){var s=i.pop();o=Ms(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),i.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'.concat(l,'}"'):l}).join("")}};function pB(r,e){var t={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return pB(s,e)}),a={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(t.text=r.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=ave(s),u=r.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=NI(u);t=V(V({},t),c)}else a[l]=NI(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=t,e&&e.style&&a.name&&fS(e.style[a.name])==="object"&&(a.attrs=V(V({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=V(V({},a.attrs),e.style)),i.length&&(a.children=i),a}function sve(r,e,t){var n=r.attrs,i=n===void 0?{}:n,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=mF(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,r.attrs=V({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function gB(r,e){var t;e===void 0&&(e={x:0,y:0});var n=V({x:0,y:0,width:0,height:0},e);if(!((t=r.children)===null||t===void 0)&&t.length){var i=r.attrs,a=i===void 0?{}:i,o=a.marginTop,s=V({},e);o&&(s.y+=o);for(var l=0;l<r.children.length;l++){r.children[l].attrs.key="".concat(a.key||"root"," -").concat(l," ");var u=gB(r.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return r.bbox=sve(r,e,n),r.attrs=V(V({},r.attrs),r.bbox),r}function mB(r,e){var t,n,i,a,o=(r||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&r&&(r.attrs.key=s),!r&&e)return{action:"delete",val:e,type:o,key:s};if(r&&!e)return{action:"add",val:r,type:o};if(!r&&!e)return{action:"same",type:o};var l=[];if(((t=r.children)===null||t===void 0?void 0:t.length)>0||((n=e.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=r.children)===null||i===void 0?void 0:i.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],f=r.children||[],h=0;h<u;h+=1)l.push(mB(f[h],c[h]));var d=Object.keys(e.attrs),v=Object.keys(r.attrs);return e.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:e,key:s,children:l}:d.filter(function(p){return p!=="children"}).some(function(p){return r.attrs[p]!==e.attrs[p]||!v.includes(p)})?{action:"change",val:r,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function $I(r){var e={},t=function(i){var a=typeof r=="function"?r(i):r,o=ove(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=gB(pB(l,i));return s.remove(),u};return{draw:function(i,a){var o=t(i),s=a,l=function u(c){var f=c.attrs,h=f===void 0?{}:f,d=c.bbox,v=c.type,p=c.children,g=zn(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var m=a.addShape(c.type,V({attrs:h,origin:{bbox:d,type:v,children:p}},g));c.keyshape&&(s=m)}c.children&&c.children.forEach(function(y){return u(y)})};return l(o),e[i.id]=[o],s},update:function(i,a){e[i.id]||(e[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=t(i),u=e[i.id].pop(),c=mB(l,u),f=function v(p){var g;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(m){return v(m)})},h=function v(p){var g,m=s.find(function(y){return y.attrs.key===p.attrs.key});m&&o.removeChild(m),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(y){return v(y)})},d=function v(p){var g=p.key;if(p.type!=="group"){var m=s.find(function(w){return w.attrs.key===g});switch(p.action){case"change":if(m){var y=p.val.keyshape?a.getOriginStyle():{};m.attr(V(V({},y),p.val.attrs))}break;case"add":f(p.val);break;case"delete":h(p.val);break;case"restructure":h(p.formerTarget),f(p.nowTarget);break}}p.children&&p.children.forEach(function(w){return v(w)})};d(c),e[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var aw={};function DI(r){return aw[r]||(aw[r]=Bf(r)),aw[r]}var lve={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,n=t[e]||t[t.defaultShapeType]||t["simple-circle"];return n},draw:function(e,t,n){var i=this.getShape(e);n.shapeMap={};var a=i.draw(t,n);return i.afterDraw&&i.afterDraw(t,n,a),a},baseUpdate:function(e,t,n,i){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,i),(o=s.update)===null||o===void 0||o.call(s,t,n,i)),s.afterUpdate&&s.afterUpdate(t,n)},setState:function(e,t,n,i){var a=this.getShape(e);a.setState(t,n,i)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var n=this.getShape(e);return n.getControlPoints(t)},getAnchorPoints:function(e,t){var n=this.getShape(e);return n.getAnchorPoints(t)}},ow={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,n=e.anchorPoints||t;return n}},Yr=function(){function r(){}return r.registerFactory=function(e,t){var n=DI(e),i=lve,a=V(V({},i),t);return r[n]=a,a.className=n,a},r.getFactory=function(e){var t=DI(e);return r[t]},r.registerNode=function(e,t,n){var i=r.Node,a;if(typeof t=="string"||typeof t=="function"){var o=$I(t);a=V(V({},i.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=$I(s);a=V(V(V({},i.getShape("single-node")),o),t)}else{i.getShape(n);var l=n?i.getShape(n):ow;a=V(V({},l),t)}return a.type=e,a.itemType="node",i[e]=a,a},r.registerEdge=function(e,t,n){var i=r.Edge,a=n?i.getShape(n):ow,o=V(V({},a),t);return o.type=e,o.itemType="edge",i[e]=o,o},r.registerCombo=function(e,t,n){var i=r.Combo,a=n?i.getShape(n):ow,o=V(V({},a),t);return o.type=e,o.itemType="combo",i[e]=o,o},r}();Yr.registerFactory("node",{defaultShapeType:"circle"});Yr.registerFactory("edge",{defaultShapeType:"line"});Yr.registerFactory("combo",{defaultShapeType:"circle"});var sw="bboxCache",lw="bboxCanvasCache",yB=function(){function r(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var n=this.get("model"),i=n.id,a=this.get("type");typeof i>"u"?i=cS(a):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var o=e.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||n.stateStyles;c=Vr({},u.stateStyles,c),this.set("styles",c)}}}return r.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=ym(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=ym(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),i=e.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(i);var o=e.getShapeCfg(i),s=o.type,l=t.draw(s,o,n);l&&(e.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},r.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var d=this.get("originStyle");a&&!d[a]&&(d[a]={});for(var v=this.getCurrentStatesStyle(),p=function(m){var y=t[m],w=y.get("name"),b=y.attr();if(w&&w!==a){var x=v[w];d[w]||(d[w]={}),x?Object.keys(b).forEach(function(M){var A=b[M];A!==x[M]&&(d[w][M]=A)}):d[w]=y.get("type")!=="image"?br(b):i.getShapeStyleByName(w)}else{var S=y.attr(),_={};Object.keys(v).forEach(function(M){var A=v[M];(M===a||!ei(A))&&(_[M]=A)}),Object.keys(S).forEach(function(M){var A=S[M];_[M]!==A&&(a?d[a][M]=A:d[M]=A)})}},s=0;s<t.length;s++)p(s);delete d.path,delete d.matrix,delete d.x,delete d.y,d[a]&&(delete d[a].x,delete d[a].y,delete d[a].matrix,delete d[a].path),i.set("originStyle",d)}else{for(var o={},s=0;s<t.length;s++){var l=t[s],u=l.get("type"),c=l.get("name");if(c&&c!==a)o[c]=u!=="image"?br(l.attr()):i.getShapeStyleByName(c),u==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,!a)Object.assign(o,f);else if(c)o[a]=f;else{var h=cS("shape");l.set("name",h),e.shapeMap[h]=l,o[h]=u!=="image"?br(l.attr()):i.getShapeStyleByName(c)}}}i.set("originStyle",o)}},r.prototype.restoreStates=function(e,t){var n=this,i=n.get("states");Pe(i,function(a){e.setState(t,a,!0,n)})},r.prototype.init=function(){var e=Yr.getFactory(this.get("type"));this.set("shapeFactory",e)},r.prototype.get=function(e){return this._cfg[e]},r.prototype.set=function(e,t){ei(e)?this._cfg=V(V({},this._cfg),e):this._cfg[e]=t},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(sw,null),this.set(lw,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(e){var t=this.get("group"),n;if(e?n=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):n=this.getKeyShape(),n){var i={};return Pe(n.attr(),function(a,o){(o!=="img"||rt(a))&&(i[o]=a)}),i}return{}},r.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var i=e;return i.style=V(V({},n),e.style),i}return e},r.prototype.getStateStyle=function(e){var t=this.get("styles"),n=t&&t[e];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return!n||!n.length?this.get("originStyle"):(Pe(e.getStates(),function(i){t=Object.assign(t,e.getStateStyle(i))}),t)},r.prototype.setState=function(e,t){var n=this.get("states"),i=this.get("shapeFactory"),a=e,o=e;rt(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=n;if(Gv(t)){var l=n.indexOf(o);if(t){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(rt(t)){var u=n.filter(function(h){return h.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(h){return!h.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,e,t,this)}},r.prototype.clearStates=function(e){var t=this,n=t.getStates(),i=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=n),rt(e)&&(e=[e]);var s=n.filter(function(l){return e.indexOf(l)===-1});t.set("states",s),e.forEach(function(l){i.setState(o,l,!1,t)})},r.prototype.setOptimize=function(e){this.optimize=e},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},r.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(e){},r.prototype.update=function(e,t){t===void 0&&(t=void 0);var n=this.get("model");if(t==="move")this.updatePosition(e);else{var i=n.visible,a=e.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;Gt(s,l),delete e.stateStyles}Object.assign(n,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(t.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,e);t.baseUpdate(i,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,i)},r.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,i=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;t.x=n,t.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),oF(a,{x:n,y:i}),this.clearCache(),!0)},r.prototype.getBBox=function(){var e=this.get(sw);return e||(e=this.calculateBBox(),this.set(sw,e)),e},r.prototype.getCanvasBBox=function(){var e=this.get(lw);return e||(e=this.calculateCanvasBBox(),this.set(lw,e)),e},r.prototype.toFront=function(){var e=this.get("group");e.toFront()},r.prototype.toBack=function(){var e=this.get("group");e.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},r.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},r}(),_g={source:"start",target:"end"},So="Node",Wc="Point",uve="Anchor",bB=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,n){var i=_g[t]+Wc,a=t+So,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),ei(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},e.prototype.getLinkPoint=function(t,n,i){var a=_g[t]+Wc,o=t+So,s=this.get(a);if(!s){var l=this.get(o),u=t+uve,c=this.getPrePoint(t,i),f=n[u];Dt(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),Dt(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,n){if(n&&n.length){var i=t==="source"?0:n.length-1;return n[i]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var n=t+So,i=_g[t]+Wc,a=this.get(n);return a&&!a.destroyed?a.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(t){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},e.prototype.getEndCenter=function(t){var n=t+So,i=_g[t]+Wc,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},e.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,n){var i=this,a=i.get("linkCenter"),o=n!=null&&n.includes("move")?t:r.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",t,s),o.endPoint=i.getLinkPoint("target",t,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),n=this.get("source".concat(So)),i=this.get("target".concat(So));return n?delete t["source".concat(So)]:t.source=this.get("start".concat(Wc)),i?delete t["target".concat(So)]:t.target=this.get("end".concat(Wc)),!rt(t.source)&&!ei(t.source)&&(t.source=t.source.getID()),!rt(t.target)&&!ei(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),l=this.get("target");if(!(!s||s.destroyed||!l||l.destroyed)){var u=this.get("styles");if(t.stateStyles){var c=t.stateStyles;Gt(u,c),delete t.stateStyles}Object.assign(i,t),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(So)),n=this.get("target".concat(So));t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},e}(yB),uw="anchorPointsCache",cve="bboxCache",C2=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,n){for(var i=0,a=t[0],o=gm(t[0],n),s=0;s<t.length;s++){var l=t[s],u=gm(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("source")===t})},e.prototype.getNeighbors=function(t){var n=this,i=this.get("edges");if(t==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},e.prototype.getLinkPointByAnchor=function(t){var n=this.getAnchorPoints();return n[t]},e.prototype.getLinkPoint=function(t){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=nF({x:o,y:s,r:l.width/2},t);break;case"ellipse":c=iF({x:o,y:s,rx:l.width/2,ry:l.height/2},t);break;default:c=rF(l,t)}var f=c;return u.length&&(f||(f=t),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},e.prototype.getAnchorPoints=function(){var t=this.get(uw);if(!t){t=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];Pe(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};t.push(f)}),this.set(uw,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var n=this.getEdges(),i=n.indexOf(t);i>-1&&n.splice(i,1)},e.prototype.clearCache=function(){this.set(cve,null),this.set(uw,null)},e.prototype.getUpdateType=function(t){var n,i,a,o,s;if(t){var l=!Dt(t.x),u=!Dt(t.y),c=Object.keys(t);if(c.length===1&&(l||u)||c.length===2&&l&&u)return"move";if(Rt(t.x)||Rt(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((n=t==null?void 0:t.style)===null||n===void 0)&&n.r||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var f=c.includes("label")||c.includes("labelCfg");return f?"style|label":"style"}},e.prototype.setState=function(t,n){var i=this;if(this.optimize){r.prototype.setState.call(this,t,n);return}this.runWithBBoxAffected(function(){return r.prototype.setState.call(i,t,n)})},e.prototype.clearStates=function(t){var n=this;if(this.optimize){r.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return r.prototype.clearStates.call(n,t)})},e.prototype.runWithBBoxAffected=function(t){var n=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(u){n.includes(u)&&(a[u]=i[u])}),t();for(var o=this.getKeyShape().attr(),s=0;s<n.length;s++){var l=n[s];if(o[l]!==a[l]){this.clearCache(),this.getEdges().forEach(function(u){return u.refresh()});break}}},e}(yB),RI="bboxCache",PI="bboxCanvasCache",Eg="sizeCache",FI="anchorPointsCache",wB=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=t,o=Rt(t.size)?[t.size,t.size]:t.size,s=Rt(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,l=o||s||Ot.defaultCombo.size,u={r:(Math.max(i.width,i.height)||Math.max(l[0],l[1]))/2,width:i.width||l[0],height:i.height||l[1]};a.style=V(V(V({},n),t.style),u);var c=t.padding||Ot.defaultCombo.padding;return Rt(c)?(u.r+=c,u.width+=c*2,u.height+=c*2):(u.r=u.r+Math.max.apply(Math,c),u.width+=c[1]+c[3]||c[1]*2,u.height+=c[0]+c[2]||c[0]*2),this.set(Eg,u),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),n=this.get("group"),i=this.get(RI)||{},a=i.x,o=i.x,s=this.get(Eg),l=ym(t,n);if(l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2,s){s.width=Math.max(s.width,l.width),s.height=Math.max(s.height,l.height),this.set(Eg,s);var u=t.get("type");u==="circle"?(l.width=s.r*2,l.height=s.r*2):(l.width=s.width,l.height=s.height),l.minX=l.centerX-l.width/2,l.minY=l.centerY-l.height/2,l.maxX=l.centerX+l.width/2,l.maxY=l.centerY+l.height/2}else l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2;return l.x=l.minX,l.y=l.minY,(l.x!==a||l.y!==o)&&this.set(FI,null),l}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var n=this,i=t.getType();switch(i){case"node":n.addNode(t);break;case"combo":n.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var n=this;return n.get("combos").push(t),!0},e.prototype.addNode=function(t){var n=this;return n.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var n=this,i=t.getType();switch(i){case"node":n.removeNode(t);break;case"combo":n.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var n=this.getCombos(),i=n.indexOf(t);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var n=this.getNodes(),i=n.indexOf(t);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(PI,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(RI,null),this.set(PI,null),this.set(FI,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),n=this.get("group");t&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(Eg,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(C2),Mg="node",Cg="edge",BI="vedge",Uh="combo",fve="default",zI="Mapper",vs="stateStyles",hve=function(){function r(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=uv(function(n){var i=t.graph;if(!(!i||i.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var l=s.edge;if(!(!l||l.destroyed)){var u=l.getSource(),c=l.getTarget();!u||u.destroyed||!c||c.destroyed||l.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return r.prototype.addItem=function(e,t){var n=this.graph,i=e===BI?Cg:e,a=n.get("".concat(i,"Group"))||n.get("group"),o=Bf(i),s=null,l=n.get(i+Bf(vs))||{},u=n.get(fve+o);t[vs]&&(l=t[vs]),u&&Pe(u,function(S,_){ni(S)&&!Bt(S)?t[_]=Vr({},S,t[_]):Bt(S)?t[_]=t[_]||br(u[_]):t[_]=t[_]||u[_]});var c=n.get(i+zI);if(c){var f=c(t);f[vs]&&(l=f[vs],delete f[vs]),Pe(f,function(S,_){ni(S)&&!Bt(S)?t[_]=Vr({},t[_],S):t[_]=f[_]||t[_]})}if(n.emit("beforeadditem",{type:e,model:t}),e===Cg||e===BI){var h=void 0,d=void 0;if(h=t.source,d=t.target,h&&rt(h)&&(h=n.findById(h)),d&&rt(d)&&(d=n.findById(d)),!h||!d){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}h.getType&&h.getType()==="combo"&&(t.isComboEdge=!0),d.getType&&d.getType()==="combo"&&(t.isComboEdge=!0),s=new bB({model:t,source:h,target:d,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(e===Mg)s=new C2({model:t,styles:l,group:a.addGroup()});else if(e===Uh){var v=t.children,p=_0(v,n),g=void 0,m=void 0;if(isNaN(p.x)?isNaN(t.x)&&(g=Math.random()*100):g=p.x,isNaN(p.y)?isNaN(t.y)&&(m=Math.random()*100):m=p.y,isNaN(t.x)||isNaN(t.y))t.x=g,t.y=m;else{var y=t.x-g,w=t.y-m;this.updateComboSucceeds(t.id,y,w,v)}var b=a.addGroup();b.setZIndex(t.depth),s=new wB({model:t,styles:l,animate:n.get("animate"),bbox:t.collapsed?_0([],n):p,group:b}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(p.width=Math.hypot(p.height,p.width),p.height=p.width,s.set("bbox",p),s.refresh());var x=s.getModel();(v||[]).forEach(function(S){var _=n.findById(S.id);s.addChild(_),S.depth=x.depth+2})}if(s)return s.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:t}),s},r.prototype.updateItem=function(e,t){var n=this,i,a,o=this.graph;if(rt(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var l=o.get(s+zI),u=e.getModel(),c=u.x,f=u.y,h=e.getUpdateType(t);if(l){var d=Vr({},u,t),v=l(d),p=Vr({},u,v,t);v[vs]&&(e.set("styles",p[vs]),delete p[vs]),Pe(p,function(E,T){t[T]=E})}else Pe(t,function(E,T){u[T]&&ni(E)&&!Bt(E)&&(t[T]=V(V({},u[T]),t[T]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Cg){if(t.source){var g=t.source;rt(g)&&(g=o.findById(g)),e.setSource(g)}if(t.target){var m=t.target;rt(m)&&(m=o.findById(m)),e.setTarget(m)}e.update(t)}else if(s===Mg){e.update(t,h);var y=e.getEdges();h==="move"?Pe(y,function(E){n.edgeToBeUpdateMap[E.getID()]={edge:E,updateType:h},n.throttleRefresh()}):h!=null&&h.includes("bbox")&&Pe(y,function(E){E.refresh(h)})}else if(s===Uh){if(e.update(t,h),!isNaN(t.x)||!isNaN(t.y)){var w=t.x-c||0,b=t.y-f||0;this.updateComboSucceeds(u.id,w,b)}var x=e.getEdges(),S=(h==null?void 0:h.includes("bbox"))||h==="move";if(S&&s===Uh){var _=e.get("shapeFactory"),M=u.type||"circle",A=u.animate===void 0||t.animate===void 0?(a=(i=_[M])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||t.animate;A?setTimeout(function(){if(!(!e||e.destroyed)){var E=e.getKeyShape();!E||E.destroyed||Pe(x,function(T){T&&!T.destroyed&&T.refresh()})}},201):Pe(x,function(E){E.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},r.prototype.updateCombo=function(e,t,n){var i=this,a,o,s=this.graph;if(rt(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var l=e.getModel(),u=_0(t,s,e),c=u.x,f=u.y;e.set("bbox",u);var h=c,d=f;n?(h=isNaN(l.x)?c:l.x,d=isNaN(l.y)?f:l.y):(h=isNaN(c)?l.x:c,d=isNaN(f)?l.y:f),e.update({x:h,y:d});var v=e.get("shapeFactory"),p=l.type||"circle",g=l.animate===void 0?(o=(a=v[p])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:l.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var m=e.getKeyShape();!m||m.destroyed||(e.getShapeCfg(l),i.updateComboEdges(e))}},201):this.updateComboEdges(e)}},r.prototype.updateComboEdges=function(e){for(var t,n,i=e.getEdges()||[],a=0;a<i.length;a++){var o=i[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((n=o==null?void 0:o.getTarget())===null||n===void 0)&&n.destroyed)&&o.refresh()}},r.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;rt(e)&&(e=n.findById(e));var i=e.getChildren();i.nodes.forEach(function(a){n.hideItem(a,t)}),i.combos.forEach(function(a){n.hideItem(a,t)})},r.prototype.updateComboSucceeds=function(e,t,n,i){var a=this;i===void 0&&(i=[]);var o=this.graph;if(!(!t&&!n)){var s=i;if(!(s!=null&&s.length)){var l=o.get("comboTrees");l==null||l.forEach(function(u){pi(u,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(u){var c=o.findById(u.id);if(c){var f=c.getModel();a.updateItem(u.id,{x:(f.x||0)+t,y:(f.y||0)+n})}})}},r.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;rt(e)&&(e=n.findById(e));var i=e.getChildren(),a=new Set;i.nodes.forEach(function(o){n.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),i.combos.forEach(function(o){o.getModel().collapsed?o.show():n.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},r.prototype.removeItem=function(e){var t=this,n=this.graph;if(rt(e)&&(e=n.findById(e)),!(!e||e.destroyed)){var i=br(e.getModel()),a="";e.getType&&(a=e.getType()),n.emit("beforeremoveitem",{item:i,type:a});var o=n.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Cg){var l=n.get("v".concat(a,"s")),u=l.indexOf(e);u>-1&&l.splice(u,1)}var c=e.get("id"),f=n.get("itemMap");delete f[c];var h=n.get("comboTrees"),d=e.get("id");if(a===Mg){var v=e.getModel().comboId;if(h&&v){var p=h,g=!1;h.forEach(function(S){g||pi(S,function(_){if(_.id===d&&p){var M=p.indexOf(_);return p.splice(M,1),g=!0,!1}return p=_.children,!0})})}for(var m=e.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);v&&n.updateCombo(v)}else if(a===Uh){var w=e.getModel().parentId,b,x=!1;(h||[]).forEach(function(_){x||pi(_,function(M){return M.id===d?(b=M,x=!0,!1):!0})}),b.removed=!0,b&&b.children&&b.children.forEach(function(_){t.removeItem(_.id)});for(var m=e.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);w&&n.updateCombo(w)}e.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},r.prototype.setItemState=function(e,t,n){var i=this.graph,a=t;rt(n)&&(a="".concat(t,":").concat(n)),!(e.hasState(a)===n&&n||rt(n)&&e.hasState(a))&&(i.emit("beforeitemstatechange",{item:e,state:a,enabled:n}),e.setState(t,n),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:a,enabled:n}))},r.prototype.priorityState=function(e,t){var n=this.graph,i=e;rt(e)&&(i=n.findById(e)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},r.prototype.clearItemStates=function(e,t){var n=this.graph;rt(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},r.prototype.refreshItem=function(e){var t=this.graph;rt(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},r.prototype.addCombos=function(e,t){var n=this,i=this.graph;(e||[]).forEach(function(o){ko(o,function(s){var l;return t.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},r.prototype.changeItemVisibility=function(e,t){var n=this,i=this.graph;if(rt(e)&&(e=i.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Mg){var a=e.getEdges();Pe(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Uh){var o=i.get("comboTrees"),s=e.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||pi(f,function(h){return h.id===s?(l=h.children,u=!0,!1):!0})}),l&&(!t||t&&!e.getModel().collapsed)&&l.forEach(function(f){var h=i.findById(f.id);n.changeItemVisibility(h,t)});var a=e.getEdges();Pe(a,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,t)})}return i.emit("afteritemvisibilitychange",{item:e,visible:t}),e},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),dve=function(){function r(e){this.graph=e,this.destroyed=!1}return r.prototype.updateState=function(e,t,n){var i=this.graph.get("states"),a=t;rt(n)&&(a="".concat(t,":").concat(n)),i[a]||(i[a]=[]),n?i[a].push(e):i[a]=i[a].filter(function(o){return o!==e}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},r.prototype.updateStates=function(e,t,n){var i=this.graph.get("states"),a=rt(t)?[t]:t;a.forEach(function(o){var s=o;i[s]||(i[s]=[]),rt(n)&&(s="".concat(o,":").concat(n)),n?i[s].push(e):i[s]=i[s].filter(function(l){return l!==e})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:t})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),vve=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=t[i];return a===0&&(a="0"),a||""})},xB=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,i=e;n<i.length;n++){var a=i[n],o=a.x,s=a.y;t.push(o),t.push(s)}var l=sB(t);return l.unshift(["M",e[0].x,e[0].y]),l},Em=function(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0];Pl(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},pve=function(e,t){var n=e.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=vve(a,s)}return t&&(i+="Z"),i},hS=function(e){var t=[];return e.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)t.push([n[a],n[a+1]]);else{var o=n.length;t.push([n[o-2],n[o-1]])}}),t},dS=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var t=e[0],n=e[1],i=e[e.length-1],a=e[e.length-2];e.unshift(i),e.unshift(a),e.push(t),e.push(n);for(var o=[],s=1;s<e.length-2;s+=1){var l=e[s-1].x,u=e[s-1].y,c=e[s].x,f=e[s].y,h=e[s+1].x,d=e[s+1].y,v=s!==e.length-2?e[s+2].x:h,p=s!==e.length-2?e[s+2].y:d,g=c+(h-l)/6,m=f+(d-u)/6,y=h-(v-c)/6,w=d-(p-f)/6;o.push(["C",g,m,y,w,h,d])}return o.unshift(["M",i.x,i.y]),o},GI=function(e,t){return mi([0,0],Pl([0,0],e),t)},jI=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},UI=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function vS(r,e){var t=function(f){var h=[f[0][0],f[0][1]-e],d=[f[0][0],f[0][1]+e];return"M ".concat(h," A ").concat(e,",").concat(e,",0,0,0,").concat(d," A ").concat(e,",").concat(e,",0,0,0,").concat(h)},n=function(f){var h=mi([0,0],jI(f[0],f[1]),e),d=mi([0,0],h,-1),v=Jn([0,0],f[0],h),p=Jn([0,0],f[1],h),g=Jn([0,0],f[1],d),m=Jn([0,0],f[0],d);return"M ".concat(v," L ").concat(p," A ").concat([e,e,"0,0,0",g].join(",")," L ").concat(m," A ").concat([e,e,"0,0,0",v].join(","))};if(!r||r.length<1)return"";if(r.length===1)return t(r);if(r.length===2)return n(r);for(var i=new Array(r.length),a=0;a<i.length;++a){var o=a===0?r[r.length-1]:r[a-1],s=r[a],l=mi([0,0],jI(o,s),e);i[a]=[Jn([0,0],o,l),Jn([0,0],s,l)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map(function(c,f){var h="";return f===0&&(h="M ".concat(i[i.length-1][1]," ")),h+="".concat(u+c[0]," L ").concat(c[1]),h}),i.join(" ")}function SB(r,e){var t=r.length,n=function(c){var f=[c[0][0],c[0][1]-e],h=[c[0][0],c[0][1]+e];return"M ".concat(f," A ").concat([e,e,"0,0,0",h].join(",")," A ").concat([e,e,"0,0,0",f].join(","))},i=function(c){var f=UI(c[0],c[1]),h=GI(f,e),d=Jn([0,0],c[0],mi([0,0],h,-1)),v=Jn([0,0],c[1],h),p=1.2*e,g=GI(Pl([0,0],f),p),m=mi([0,0],g,-1),y=Jn([0,0],d,m),w=Jn([0,0],v,m),b=Jn([0,0],d,g);return"M ".concat(d," C ").concat([y,w,v].join(",")," S ").concat([b,d].join(",")," Z")};if(!r||t<1)return"";if(t===1)return n(r);if(t===2)return i(r);for(var a=r.map(function(u,c){var f=r[(c+1)%t];return{p:u,v:Pl([0,0],UI(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,l=Pl([0,0],Jn([0,0],a[s].v,mi([0,0],a[o].v,-1)));a[o].p=Jn([0,0],a[o].p,mi([0,0],l,e))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var gve=function(e,t){for(var n=[],i=0;i<5;i++){var a=Math.cos((18+72*i)/180*Math.PI)*e,o=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*t,l=Math.sin((54+72*i)/180*Math.PI)*t;i===0?n.push(["M",a,-o]):n.push(["L",a,-o]),n.push(["L",s,-l])}return n.push(["Z"]),n};const mve=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:dS,getControlPoint:Em,getSpline:xB,getStarPath:gve,paddedHull:SB,pathToPoints:hS,pointsToPolygon:pve,roundedHull:vS},Symbol.toStringTag,{value:"Module"}));var WI=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},HI=function(e){var t=e.map(function(f){return{x:f.getModel().x,y:f.getModel().y}});t.sort(function(f,h){return f.x===h.x?f.y-h.y:f.x-h.x});for(var n={},i=t.length-1;i>=0;i--){var a=t[i],o=a.x,s=a.y;n["".concat(o,"-").concat(s)]&&t.splice(i,1),n["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var l=[],i=0;i<t.length;i++){for(;l.length>=2&&WI(l[l.length-2],l[l.length-1],t[i])<=0;)l.pop();l.push(t[i])}for(var u=[],i=t.length-1;i>=0;i--){for(;u.length>=2&&WI(u[u.length-2],u[u.length-1],t[i])<=0;)u.pop();u.push(t[i])}u.pop(),l.pop();var c=l.concat(u);return c},yve={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function bve(r,e,t){var n=!1,i=function(l,u){return e.cells[l+u*e.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=t&&(c+=1),i(l,u-1)>t&&(c+=2),i(l-1,u)>t&&(c+=4),i(l,u)>t&&(c+=8),c},o=function(l,u){for(var c=l,f=u,h,d,v=0;v<e.width*e.height;v++){if(h=c,d=f,r.findIndex(function(g){return g.x===c&&g.y===f})>-1){if(!(r[0].x!==c||r[0].y!==f))return!0}else r.push({x:c,y:f});var p=a(c,f);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:h===0&&(d===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:h===1&&(d===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: ".concat(p)),!0}}};this.march=function(){for(var s=0;s<e.width&&!n;s+=1)for(var l=0;l<e.height&&!n;l+=1)i(s,l)>t&&a(s,l)!==15&&(n=o(s,l));return n}}var wve=function(e,t,n){var i=Math.ceil(e/n),a=Math.ceil(t/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},xve=function(e,t,n){var i=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=mm(s,l),c=new uc(s.x,s.y,l.x,l.y),f=n.reduce(function(h,d){return g2(d,c)>0?h+1:h},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},_B=function(e,t){var n=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(a){var o=g2(a,t);o>=0&&o<n&&(i=a,n=o)}),i},Sve=function(e,t,n,i){var a=[],o=[];o.push(e);for(var s=!0,l=0,u=function(d,v){var p=!1;return v.forEach(function(g){p||(zx(d,{x:g.x1,y:g.y1})||zx(d,{x:g.x2,y:g.y2}))&&(p=!0)}),p},c=function(d,v){for(var p=0,g=v;p<g.length;p++){var m=g[p],y=m.getBBox(),w=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(hv(w,d.x,d.y))return!0}return!1};s&&l<n;){s=!1;for(var f=function(){var d=o.pop(),v=_B(t,d);if(v){var p=uF(v,d),g=p[0],m=p[1];if(m===2){var y=function(b){for(var x=i,S=VI(v,x,g,b),_=u(S,o)||u(S,a),M=c(S,t);!_&&M&&x>=1;)x/=1.5,S=VI(v,x,g,b),_=u(S,o)||u(S,a),M=c(S,t);S&&!_&&(!b||!M)&&(o.push(new uc(d.x1,d.y1,S.x,S.y)),o.push(new uc(S.x,S.y,d.x2,d.y2)),s=!0)};y(!0),s||y(!1)}}s||a.push(d),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function _ve(r,e,t,n,i){var a=xve(r,t,e);if(a===null)return[];var o=function(f){for(var h=[];f.length>0;){var d=f.pop();if(f.length===0){h.push(d);break}var v=f.pop(),p=new uc(d.x1,d.y1,v.x2,v.y2),g=_B(e,p);g?(h.push(d),f.push(v)):f.push(p)}return h},s=new uc(r.getModel().x,r.getModel().y,a.getModel().x,a.getModel().y),l=Sve(s,e,n,i),u=o(l);return u}var Eve=function(e,t,n){var i=Object.assign(yve,n),a=cF(e.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));e=e.sort(function(y,w){return mm({x:y.getModel().x,y:y.getModel().y},a)-mm({x:w.getModel().x,y:w.getModel().y},a)});var o=[],s=[];e.forEach(function(y){var w=_ve(y,t,o,i.maxRoutingIterations,i.morphBuffer);w.forEach(function(b){s.push(b)}),o.push(y)});for(var l=Mve(e,s,i.nodeR0),u=wve(l.width,l.height,i.pixelGroupSize),c=[],f=[],h=0;h<i.maxMarchingIterations;h++)if(Cve(e,t,s,l,u,i),c=[],f=[],!!new bve(c,u,i.threshold).march()){var d=c.map(function(y){return{x:Math.round(y.x*i.pixelGroupSize+l.minX),y:Math.round(y.y*i.pixelGroupSize+l.minY)}});if(d){var v=d.length;if(i.skip>1)for(v=Math.floor(d.length/i.skip);v<3&&i.skip>1;)i.skip-=1,v=Math.floor(d.length/i.skip);for(var p=0,g=0;g<v;g+=1,p+=i.skip)f.push({x:d[p].x,y:d[p].y})}var m=function(){for(var w=0,b=e;w<b.length;w++){var x=b[w],S=f.map(function(_){return[_.x,_.y]});if(!hv(S,x.getBBox().centerX,x.getBBox().centerY))return!1}return!0};if(f&&m())return f;if(i.threshold*=.9,h<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&t.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function Mve(r,e,t){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(l){i.push(l.getBBox())}),e.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-t,n.minY=(s.minY<n.minY?s.minY:n.minY)-t,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+t,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+t}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function Cve(r,e,t,n,i,a){function o(d,v){var p=Math.floor((d-v)/a.pixelGroupSize);return p<0?0:p}function s(d,v){return d*a.pixelGroupSize+v}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(v,p){var g=Math.min(o(v.minX,p+n.minX),i.width),m=Math.min(o(v.minY,p+n.minY),i.height),y=Math.min(o(v.maxX,-p+n.minX),i.width),w=Math.min(o(v.maxY,-p+n.minY),i.height);return[g,m,y,w]},f=function(v,p){for(var g=v.getBBox(),m=c(g,a.nodeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var _=y;_<b;_+=1)if(!(p<0&&i[_+S*i.width]<=0)){var M=s(_,n.minX),A=s(S,n.minY),E=hF({x:M,y:A},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(E<Math.pow(a.nodeR1,2)){var T=Math.sqrt(E)-a.nodeR1;i.cells[_+S*i.width]+=p*T*T}}},h=function(v,p){for(var g=v.getBBox(),m=c(g,a.edgeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var _=y;_<b;_+=1)if(!(p<0&&i.cells[_+S*i.width]<=0)){var M=s(_,n.minX),A=s(S,n.minY),E=fF({x:M,y:A},v);if(E<Math.pow(a.edgeR1,2)){var T=Math.sqrt(E)-a.edgeR1;i.cells[_+S*i.width]+=p*T*T}}};a.nodeInfluenceFactor&&r.forEach(function(d){f(d,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&t.forEach(function(d){h(d,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&e.forEach(function(d){f(d,a.negativeNodeInfluenceFactor/l)})}function VI(r,e,t,n){var i=r.getBBox(),a=t[0],o=t[1],s=t[2],l=t[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function f(v,p){return i.width*((v.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var h=f(o,l);return h<c*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var d=f(a,s);return d<c*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var EB=function(){function r(e,t){this.cfg=Vr(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return rt(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return rt(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(e,t){var n,i,a;switch(this.type){case"round-convex":n=HI(e),a=vS(n.map(function(o){return[o.x,o.y]}),this.padding),i=sS(a);break;case"smooth-convex":n=HI(e),n.length===2?(a=vS(n.map(function(o){return[o.x,o.y]}),this.padding),i=sS(a)):n.length>2&&(a=SB(n.map(function(o){return[o.x,o.y]}),this.padding),i=dS(a));break;case"bubble":n=Eve(e,t,this.cfg.bubbleCfg),i=n.length>=2&&dS(n);break}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:V({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(e){if(e){rt(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(e){if(e){rt(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(e){if(e){rt(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(e){if(e){rt(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return rt(i)?n.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return rt(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr(V({},e))},r.prototype.updateCfg=function(e){var t=this;this.cfg=Vr(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return rt(n)?t.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return rt(n)?t.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(e){var t=this,n;rt(e)?n=this.graph.findById(e):n=e;var i,a=n.getKeyShape();if(n.get("type")==="path")i=hS(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=t.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),lF(i,hS(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}(),Wh=Pa,Ave="node",MB=function(r){ir(e,r);function e(t){var n=r.call(this)||this;return n.sortCombos=jv(function(){var i=n.get("comboSorted");if(!(!n||n.destroyed||i)){n.set("comboSorted",!0);var a=[],o={},s=n.get("comboTrees");(s||[]).forEach(function(u){pi(u,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var l=n.getEdges().concat(n.get("vedges"));(l||[]).forEach(function(u){var c=u.getModel(),f=o[c.source]||0,h=o[c.target]||0,d=Math.max(f,h);a[d]?a[d].push(c.id):a[d]=[c.id]}),a.forEach(function(u){if(!(!u||!u.length))for(var c=u.length-1;c>=0;c--){var f=n.findById(u[c]);f&&f.toFront()}})}},500,!1),n.cfg=Vr(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new ff(n.cfg.maxStep),n.redoStack=new ff(n.cfg.maxStep)),n}return e.prototype.init=function(){this.initCanvas();var t=new ive(this),n=new wfe(this),i=new hve(this),a=new dve(this);this.set({viewController:t,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var n=t.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=t.addGroup({id:"".concat(a,"-root"),className:Ot.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Ot.edgeContainerClassName}),l=o.addGroup({id:"".concat(a,"-node"),className:Ot.nodeContainerClassName}),u=o.addGroup({id:"".concat(a,"-combo"),className:Ot.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Ot.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,n){return ei(t)?this.cfg=V(V({},this.cfg),t):this.cfg[t]=n,t==="enabledStack"&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new ff(this.cfg.maxStep),this.redoStack=new ff(this.cfg.maxStep)),this},e.prototype.get=function(t){var n;return(n=this.cfg)===null||n===void 0?void 0:n[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,n){rt(t)&&(t=this.findById(t));var i=this.get("itemController");n||(n=t.get("states")),i.clearItemStates(t,n);var a=this.get("stateController");a.updateStates(t,n,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,n){var i,a=this.get("".concat(t,"s"));return Pe(a,function(o,s){if(n(o,s))return i=o,i}),i},e.prototype.findAll=function(t,n){var i=[];return Pe(this.get("".concat(t,"s")),function(a,o){n(a,o)&&i.push(a)}),i},e.prototype.findAllByState=function(t,n,i){return i?this.findAll(t,function(a){return a.hasState(n)&&i(a)}):this.findAll(t,function(a){return a.hasState(n)})},e.prototype.translate=function(t,n,i,a){var o=this,s=this.get("group"),l=br(s.getMatrix());if(l||(l=[1,0,0,0,1,0,0,0,1]),i){var u=dv({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Bx(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+n},i,u||{duration:500,easing:"easeCubic"})}else l=Wh(l,[["t",t,n]]),s.setMatrix(l),this.emit("viewportchange",{action:"translate",matrix:l}),this.autoPaint()},e.prototype.moveTo=function(t,n,i,a){var o=this.get("group");Bx(o,{x:t,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,n,i,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");n?o.fitViewByRules(n,i,a):o.fitView(i,a),this.autoPaint()},e.prototype.fitCenter=function(t,n){var i=this.get("viewController");i.fitCenter(t,n),this.autoPaint()},e.prototype.addBehaviors=function(t,n){var i=this.get("modeController");return i.manipulateBehaviors(t,n,!0),this},e.prototype.removeBehaviors=function(t,n){var i=this.get("modeController");return i.manipulateBehaviors(t,n,!1),this},e.prototype.updateBehavior=function(t,n,i){var a=this.get("modeController");return a.updateBehavior(t,n,i),this},e.prototype.zoom=function(t,n,i,a){var o=this,s=this.get("group"),l=br(s.getMatrix())||[1,0,0,0,1,0,0,0,1],u=this.get("minZoom"),c=this.get("maxZoom"),f=this.getZoom()||1,h=f*t,d=t,v=!1;if(u&&h<u?(d=u/f,v=!0):c&&h>c&&(d=c/f,v=!0),n?l=Wh(l,[["t",-n.x,-n.y],["s",d,d],["t",n.x,n.y]]):l=Wh(l,[["s",d,d]]),i){var p=br(s.getMatrix());p||(p=[1,0,0,0,1,0,0,0,1]);var g=p[0],m=g*d,y=dv({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(w){if(w===1)p=l;else{var b=m2(g,m,w)/p[0];n?p=Wh(p,[["t",-n.x,-n.y],["s",b,b],["t",n.x,n.y]]):p=Wh(p,[["s",b,b]])}return{matrix:p}},y)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!v},e.prototype.zoomTo=function(t,n,i,a){var o=t/this.getZoom();return this.zoom(o,n,i,a)},e.prototype.focusItem=function(t,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,n,i,a){var o=this.get("viewController");o.focusItems(t,n,i,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,n){var i=this.get("viewController");return i.getPointByClient(t,n)},e.prototype.getClientByPoint=function(t,n){var i=this.get("viewController");return i.getClientByPoint(t,n)},e.prototype.getPointByCanvas=function(t,n){var i=this.get("viewController");return i.getPointByCanvas(t,n)},e.prototype.getCanvasByPoint=function(t,n){var i=this.get("viewController");return i.getCanvasByPoint(t,n)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.hideItem=function(t,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.refreshItem=function(t){var n=this.get("itemController");n.refreshItem(t)},e.prototype.setAutoPaint=function(t){var n=this;n.set("autoPaint",t);var i=n.get("canvas");i.set("autoDraw",t)},e.prototype.remove=function(t,n){n===void 0&&(n=!0),this.removeItem(t,n)},e.prototype.removeItem=function(t,n){n===void 0&&(n=!0);var i=t;if(rt(t)&&(i=this.findById(t)),!i&&rt(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=V(V({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(V(V({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i,void 0,!1)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var h=Hx(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.innerAddItem=function(t,n,i){if(!bfe(t,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),l=!1;if(o.forEach(function(v){l||ko(v,function(p){if(n.parentId===p.id){l=!0;var g=V({id:n.id,depth:p.depth+2},n);p.children?p.children.push(g):p.children=[g],n.depth=g.depth,a=i.addItem(t,n)}var m=s[p.id];return l&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,p.children),!0})}),!l){var u=V({id:n.id,depth:0},n);n.depth=u.depth,o.push(u),a=i.addItem(t,n)}this.set("comboTrees",o),n.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&rt(n.comboId)&&o){var c=this.findById(n.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=i.addItem(t,n);var f=this.get("itemMap"),h=!1,d=!1;o.forEach(function(v){d||h||ko(v,function(p){if(p.id===n.id)return d=!0,!1;if(n.comboId===p.id&&!d){h=!0;var g=br(n);g.itemType="node",p.children?p.children.push(g):p.children=[g],g.depth=p.depth+1}return h&&f[p.id].getType&&f[p.id].getType()==="combo"&&i.updateCombo(f[p.id],p.children),!0})})}else a=i.addItem(t,n);if(t==="node"&&n.comboId||t==="combo"&&n.parentId){var c=this.findById(n.comboId||n.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),l=this.innerAddItem(t,n,s);if(l===!1||l===!0)return l;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var c=V(V({},l.getModel()),{itemType:t}),f={};switch(t){case"node":f.nodes=[c];break;case"edge":f.edges=[c];break;case"combo":f.combos=[c];break}this.pushStack("add",{before:{},after:f})}return l},e.prototype.addItems=function(t,n,i){t===void 0&&(t=[]),n===void 0&&(n=!0),i===void 0&&(i=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!i);for(var o=this.get("itemController"),s=[],l=0;l<t.length;l++){var u=t[l];u.type!=="edge"&&u.type!=="vedge"?s.push(this.innerAddItem(u.type,u.model,o)):s.push(void 0)}for(var l=0;l<t.length;l++){var u=t[l];(u.type==="edge"||u.type==="vedge")&&(s[l]=this.innerAddItem(u.type,u.model,o))}if(i){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){for(var f={nodes:[],edges:[],combos:[]},l=0;l<t.length;l++){var h=t[l].type,d=s[l];if(d&&d!==!0){var v=V(V({},d.getModel()),{itemType:h});switch(h){case"node":f.nodes.push(v);break;case"edge":f.edges.push(v);break;case"combo":f.combos.push(v);break}}}this.pushStack("addItems",{before:{},after:f})}return s},e.prototype.add=function(t,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(t,n,i,a)},e.prototype.updateItem=function(t,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;rt(t)?s=this.findById(t):s=t;var l=i&&this.get("enabledStack"),u;l&&(u=br(s.getModel()));var c="";s.getType&&(c=s.getType());var f=la([],s.getStates(),!0);if(c==="combo"&&Pe(f,function(p){return a.setItemState(s,p,!1)}),o.updateItem(s,n),c==="combo"&&Pe(f,function(p){return a.setItemState(s,p,!0)}),l){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},v=V({id:u.id},n);switch(c){case"node":h.nodes.push(u),d.nodes.push(v);break;case"edge":h.edges.push(u),d.edges.push(v);break;case"combo":h.combos.push(u),d.combos.push(v);break}this.pushStack("update",{before:h,after:d})}},e.prototype.update=function(t,n,i){i===void 0&&(i=!0),this.updateItem(t,n,i)},e.prototype.setItemState=function(t,n,i){rt(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,n,i);var o=this.get("stateController");o.updateState(t,n,i)},e.prototype.priorityState=function(t,n){var i=this.get("itemController");i.priorityState(t,n)},e.prototype.data=function(t){FL(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(g){return{type:"node",model:g}}),!1,!1),(u==null?void 0:u.length)!==0){var c=Wx(u,a);this.set("comboTrees",c),t.addCombos(u)}t.addItems(s.map(function(g){return{type:"edge",model:g}}),!1,!1);var f=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var h=t.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else d();function d(){(t.get("comboTrees")||[]).forEach(function(g){ko(g,function(m){var y=t.findById(m.id);return y.getType()==="combo"&&m.collapsed&&(t.collapseCombo(m.id,!1),t.updateCombo(y)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",f),setTimeout(function(){var g;(g=t.getCombos())===null||g===void 0||g.forEach(function(m){m.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var v=this.getNodes();v.forEach(function(g){g.toFront()})}else{var p=this.getEdges();p.forEach(function(g){g.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,n,i){var a=this,o,s=this.get("itemMap");Pe(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&t===Ave){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(t,l,!1);o&&n["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,n){var i=this,a;n===void 0&&(n=!0);var o=this,s=t||o.get("data");if(!FL(s))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(b){return o.clearItemStates(b)}),this.getEdges().map(function(b){return o.clearItemStates(b)});var l=this.get("canvas"),u=l.get("localRefresh");l.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),f={nodes:[],edges:[]},h=s.combos;if(h){var d=Wx(h,s.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",f,s.nodes),Pe(c,function(b,x){c[x].getModel().depth=0,!(b.getType&&b.getType()==="edge")&&(b.getType&&b.getType()==="combo"?(delete c[x],b.destroy()):f.nodes.indexOf(b)<0&&(delete c[x],o.remove(b,!1)))});for(var v=this.getCombos(),p=v.length,g=p-1;g>=0;g--)v[g].destroyed&&v.splice(g,1);h&&(o.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,s.edges),Pe(c,function(b,x){b.getType&&(b.getType()==="node"||b.getType()==="combo")||f.edges.indexOf(b)<0&&(delete c[x],o.remove(b,!1))}),(this.get("comboTrees")||[]).forEach(function(b){ko(b,function(x){var S=i.findById(x.id);return S.getType()==="combo"&&x.collapsed&&i.collapseCombo(x.id,!1),!0})}),this.set({nodes:f.nodes,edges:f.edges});var m=(this.get("layout")||{}).relayoutAtChangeData,y=m===void 0?!0:m,w=this.get("layoutController");return y&&w&&(w.changeData(function(){setTimeout(function(){var b;(b=o.getCombos())===null||b===void 0||b.forEach(function(x){x.set("animate",!0)})},0)}),o.get("animate")&&!w.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(b){return b.set("animate",!0)})):o.autoPaint()),setTimeout(function(){l.set("localRefresh",u)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,t)},e.prototype.createCombo=function(t,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",l;if(t){if(rt(t))s=t,l={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}l=t}var u=i&&this.get("enabledStack"),c={nodes:[],combos:[]};u&&n.forEach(function(m){var y=a.findById(m),w=y.getType();if(!(w!=="node"&&w!=="combo")){var b=y.getModel();c["".concat(w,"s")].push({id:m,parentId:w==="node"?b.comboId:b.parentId})}});var f=this.get("comboTrees"),h=new Set(n),d=new Map;f&&(f.forEach(function(m){ko(m,function(y,w,b){if(h.has(y.id)){if(w){var x=a.findById(w.id),S=a.findById(y.id);w.children.splice(b,1),x.removeChild(S),o.updateCombo(x,w.children)}y.itemType==="combo"&&d.set(y.id,y)}return!0})}),f=f.filter(function(m){return!h.has(m.id)}),this.set("comboTrees",f));var v={nodes:[],combos:[]},p=n.map(function(m){var y=a.findById(m),w=y.getModel(),b="";y.getType&&(b=y.getType());var x=d.get(m)||{id:y.getID(),itemType:b};return b==="combo"?(x.parentId=s,w.parentId=s):b==="node"&&(x.comboId=s,w.comboId=s),u&&v["".concat(b,"s")].push({id:w.id,parentId:s}),x});l.children=p,this.addItem("combo",l,!1),this.set("comboSorted",!1),f&&(f.forEach(function(m){pi(m,function(y){return y.id===s?(y.itemType="combo",y.children=p,!1):!0})}),this.sortCombos()),u&&(v.combos.push(l),this.pushStack("createCombo",{before:c,after:v}));var g=this.findById(s);!g.getModel().parentId&&g.getChildren().combos.length&&this.updateComboTree(g,void 0,!1),setTimeout(function(){g.set("animate",!0)},0)}},e.prototype.uncombo=function(t,n){var i=this,a,o;n===void 0&&(n=!0);var s=this,l=t;if(rt(t)&&(l=this.findById(t)),!l||l.getType&&l.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=l.getModel(),c=l.getModel().parentId,f=s.get("comboTrees");f||(f=[]);var h=this.get("itemMap"),d=l.get("id"),v,p=[],g=this.get("combos"),m=this.findById(c),y=n&&this.get("enabledStack"),w={};if(y&&(w=br(u),w.children=[]),f.forEach(function(_){v||ko(_,function(M){var A;if(M.id===d){v=M;var E=l.getEdges().map(function(k){return k.getID()});E.forEach(function(k){i.removeItem(k,!1)});var T=g.indexOf(l);g.splice(T,1),delete h[d];var C=br(l.getModel());l.destroy(),i.emit("afterremoveitem",{item:C,type:"combo"})}if(c&&v&&M.id===c){m.removeCombo(l),p=M.children;var T=p.indexOf(v);return T!==-1&&p.splice(T,1),(A=v.children)===null||A===void 0||A.forEach(function(L){var I=i.findById(L.id),O=I.getModel();I.getType&&I.getType()==="combo"?(L.parentId=c,delete L.comboId,O.parentId=c,delete O.comboId):I.getType&&I.getType()==="node"&&(L.comboId=c,O.comboId=c),m.addChild(I),p.push(L)}),i.updateCombo(m),!1}return!0})}),!c&&v){var b=f.indexOf(v);f.splice(b,1),(a=v.children)===null||a===void 0||a.forEach(function(_){_.parentId=void 0;var M=i.findById(_.id).getModel();delete M.parentId,delete M.comboId,_.itemType!=="node"&&f.push(_)})}if(y){var x={nodes:[],combos:[]},S={nodes:[],combos:[]};(o=v.children)===null||o===void 0||o.forEach(function(_){var M=i.findById(_.id),A=M.getType();A!=="node"&&A!=="combo"||(x["".concat(A,"s")].push({id:_.id,parentId:d}),S["".concat(A,"s")].push({id:_.id,parentId:c}))}),x.combos.push(w),this.pushStack("uncombo",{before:x,after:S})}},e.prototype.updateCombos=function(t){var n=this;t===void 0&&(t=!1);var i=this,a=this.get("comboTrees"),o=i.get("itemController"),s=i.get("itemMap");(a||[]).forEach(function(l){ko(l,function(u){var c;if(!u)return!0;var f=s[u.id];if(((c=f==null?void 0:f.getType)===null||c===void 0?void 0:c.call(f))==="combo"){var h=la([],f.getStates(),!0);Pe(h,function(d){return n.setItemState(f,d,!1)}),o.updateCombo(f,u.children,t),Pe(h,function(d){return n.setItemState(f,d,!0)})}return!0})}),i.sortCombos()},e.prototype.updateCombo=function(t){var n=this,i=this,a=t,o;if(rt(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){ko(c,function(f){if(!f)return!0;var h=u[f.id];if(o===f.id&&h&&h.getType&&h.getType()==="combo"){var d=la([],h.getStates(),!0);Pe(d,function(v){h.getStateStyle(v)&&n.setItemState(h,v,!1)}),l.updateCombo(h,f.children),Pe(d,function(v){h.getStateStyle(v)&&n.setItemState(h,v,!0)}),o&&(o=f.parentId)}return!0})})},e.prototype.updateComboTree=function(t,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;rt(t)?o=a.findById(t):o=t;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var c=this.get("comboTrees"),f=!0,h;if((c||[]).forEach(function(y){h||pi(y,function(w){if(!h)return w.id===o.getID()&&(h=w),!0})}),pi(h,function(y){return y.id===n?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var d={},v={};u==="combo"?(d.combos=[{id:s.id,parentId:s.parentId}],v.combos=[{id:s.id,parentId:n}]):u==="node"&&(d.nodes=[{id:s.id,parentId:s.comboId}],v.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:d,after:v})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=Hx(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},e.prototype.save=function(){var t=[],n=[],i=[];return Pe(this.get("nodes"),function(a){t.push(a.getModel())}),Pe(this.get("edges"),function(a){n.push(a.getModel())}),Pe(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:t,edges:n,combos:i}},e.prototype.changeSize=function(t,n){var i=this.get("viewController");return i.changeSize(t,n),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var n=t.get("nodes"),i=t.get("edges"),a=t.get("edges");Pe(n,function(o){o.refresh()}),Pe(i,function(o){o.refresh()}),Pe(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(rt(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var n=this;n.emit("beforeanimate");var i=n.get("animateCfg"),a=i.onFrame,o=t?n.getNodes().concat(n.getCombos()):n.getNodes(),s=o.map(function(u){var c=u.getModel();return{id:c.id,x:c.x,y:c.y}});n.stopAnimate();var l=n.get("canvas");n.animating=!0,setTimeout(function(){l.animate(function(u){Pe(s,function(c){var f=n.findById(c.id);if(!(!f||f.destroyed)){var h=f.get("originAttrs"),d=f.get("model"),v=f.getContainer().getMatrix();if(h==null&&(v&&(h={x:v[6],y:v[7]}),f.set("originAttrs",h||0)),a){var p=a(f,u,c,h||{x:0,y:0});f.set("model",Object.assign(d,p))}else h?(d.x=h.x+(c.x-h.x)*u,d.y=h.y+(c.y-h.y)*u):(d.x=c.x,d.y=c.y)}}),n.refreshPositions(t)},{duration:i.duration,easing:i.easing,callback:function(){Pe(o,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),n.emit("afteranimate"),n.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var n=this;n.emit("beforegraphrefreshposition");var i=n.get("nodes"),a=n.get("edges"),o=n.get("vedges"),s=n.get("combos"),l,u={},c=function(h){Pe(h,function(d){l=d.getModel();var v=d.get("originAttrs");if(!(v&&l.x===v.x&&l.y===v.y)){var p=d.updatePosition({x:l.x,y:l.y});u[l.id]=p,l.comboId&&(u[l.comboId]=u[l.comboId]||p),l.parentId&&(u[l.parentId]=u[l.parentId]||p)}})};c(s),c(i),s&&s.length!==0&&(t&&c(s),n.updateCombos()),Pe(a,function(f){var h=f.getSource().getModel(),d=f.getTarget();if(!ei(d)){var v=d.getModel();(u[h.id]||u[v.id]||f.getModel().isComboEdge)&&f.refresh()}}),Pe(o,function(f){f.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),n=t.cfg.timeline;n&&n.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var n=this.get("modeController");return n.setMode(t),this},e.prototype.clear=function(t){var n;return t===void 0&&(t=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,n,i,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if(rt(t)&&(t={type:t}),n){var l=i;l||(n==="begin"?l={x:0,y:0}:l={x:this.getWidth()/2,y:this.getHeight()/2}),l=this.getPointByCanvas(l.x,l.y);var u=["force","gForce","fruchterman","force2"];u.includes(t.type)||!t.type&&u.includes(s==null?void 0:s.layoutType)?t.center=[l.x,l.y]:this.once("afterlayout",function(h){var d=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];l.x=l.x*d[0]+d[6],l.y=l.y*d[0]+d[7];var v=o.getGroup().getCanvasBBox(),p=v.minX,g=v.maxX,m=v.minY,y=v.maxY,w={x:(p+g)/2,y:(m+y)/2};n==="begin"&&(w.x=p,w.y=m),o.translate(l.x-w.x,l.y-w.y)})}var c=V({},this.get("layout")),f={};Object.assign(f,c,t),t.pipes&&!t.type?delete f.type:!t.pipes&&f.type&&delete f.pipes,this.set("layout",f),s&&(s.isLayoutTypeSame(f)&&f.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(f):s.changeLayout(f),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:f}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,n=this.get("layoutController"),i=this.get("layout");if(!(!i||!n)){if(i.workerEnabled){n.layout();return}!((t=n.layoutMethods)===null||t===void 0)&&t.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(t,n){var i=this;if(n===void 0&&(n=!0),!this.destroyed){if(rt(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,n),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||pi(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var v=i.findById(d.id);v&&v.getType&&v.getType()==="combo"&&(l=l.concat(v.getNodes()),l=l.concat(v.getCombos()))}return!0})});var f={};s.forEach(function(h){var d=h.getModel(),v=d.isVEdge,p=d.size,g=p===void 0?1:p;if(!(h.isVisible()&&!v)){var m=h.getSource(),y=h.getTarget(),w=null,b;if(m.getModel().id===a.id||l.includes(m)&&!l.includes(y)?(w=y,b=!1):(y.getModel().id===a.id||!l.includes(m)&&l.includes(y))&&(w=m,b=!0),w){if(v){i.removeItem(h,!1);return}for(var x=w.getModel();!w.isVisible();){var S=x.parentId,_=x.comboId,M=S||_;if(w=i.findById(M),!w||!M)return;x=w.getModel()}var A=x.id,E=b?{source:A,target:a.id,size:g,isVEdge:!0}:{source:a.id,target:A,size:g,isVEdge:!0},T="".concat(E.source,"-").concat(E.target);if(f[T]){f[T].size+=g;return}f[T]=E}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,n){var i=this;if(n===void 0&&(n=!0),rt(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,n),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||pi(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var v=i.findById(d.id);v&&v.getType&&v.getType()==="combo"&&(l=l.concat(v.getNodes()),l=l.concat(v.getCombos()))}return!0})});var f={};s.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var d=h.getSource(),v=h.getTarget(),p=d.get("id"),g=v.get("id"),m=null,y;if(p===a.id||l.includes(d)&&!l.includes(v)?(m=v,y=!1):g===a.id||!l.includes(d)&&l.includes(v)?(m=d,y=!0):l.includes(d)&&l.includes(v)&&d.isVisible()&&v.isVisible()&&h.show(),m){var w=h.getModel(),b=w.isVEdge,x=w.size,S=x===void 0?1:x;if(b){i.removeItem(h,!1);return}for(var _=m.getModel();!m.isVisible();){var M=_.parentId,A=_.comboId,E=M||A;if(m=i.findById(E),!m||!E)return;_=m.getModel()}for(var T=_.id,C=y?v:d,k=C.getModel();!C.isVisible();){var L=k.parentId,I=k.comboId,O=L||I;if(C=i.findById(O),!C||!O)return;if(k.comboId===a.id||k.parentId===a.id)break;k=C.getModel()}var N=k.id;if(T){var D=y?{source:T,target:N,isVEdge:!0,size:S}:{source:N,target:T,isVEdge:!0,size:S},$="".concat(D.source,"-").concat(D.target);if(f[$]){f[$].size+=S;return}f[$]=D}}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,n){if(n===void 0&&(n=!0),rt(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var i=t.getModel(),a=this.findById(i.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=i.collapsed;s?this.expandCombo(t,n):this.collapseCombo(t,n),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,n){var i=t;return rt(t)&&(i=this.findById(t)),i.getNeighbors(n)},e.prototype.getNodeDegree=function(t,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=t;rt(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||i)&&(o=zs(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,n,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var a=n?br(n):{before:{},after:br(this.save())};i==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!t)&&(i=lc(this.save(),n),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!t)&&(i=lc(this.save(),n),this.set("adjMatrix",i)),(!a||!t)&&(a=fv(this.save(),n),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,n,i){return r.prototype.on.call(this,t,n,i)},e.prototype.destroy=function(){var t,n,i,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(n=this.get("modeController"))===null||n===void 0||n.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[t.id])return console.warn("Existed hull id."),i[t.id];var a=n.addGroup({id:"".concat(t.id,"-container")}),o=new EB(this,V(V({},t),{group:a})),s=o.id;return i[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var n,i;rt(t)?i=this.getHullById(t):i=t,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(n){var i=t[n];i.destroy()}),this.set("hullMap",{}))},e}(x5);function pS(r){"@babel/helpers - typeof";return pS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pS(r)}var Hc=Pa,YI="-shape",cw="-label",Ag=["startArrow","endArrow"],XI={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Tve={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Tg={edge:Tve,node:XI,combo:XI},gS="-label-bg",A2={options:{labelCfg:{style:{fontFamily:Ot.windowFontFamily}},descriptionCfg:{style:{fontFamily:Ot.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:Vr({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);if(n.set("className",this.itemType+YI),t.shapeMap[this.itemType+YI]=n,e.label){var i=this.drawLabel(e,t);i.set("className",this.itemType+cw),t.shapeMap[this.itemType+cw]=i}return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,i=n||{},a=this.getLabelStyle(e,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=Hc(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=Hc(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=Hc(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=Hc(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=Hc(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(e,t,s),f=this.itemType+gS;c.set("classname",f),t.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(e,t,n){var i=this.options.labelCfg,a=Gt({},i,e.labelCfg),o=this.getLabelBgStyleByPosition(n,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){var i=this.getLabelStyleByPosition(e,t,n),a="".concat(this.itemType,"Label"),o=Ot[a]?Ot[a].style:null;return V(V(V({},o),i),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var i,a=t.getContainer(),o=t.getKeyShape(),s=Gt({},o.attr(),e.style),l=function(f){var h,d=s[f];if(ei(d)){var v=((i=a.shapeMap)===null||i===void 0?void 0:i[f])||a.find(function(p){return p.get("name")===f});v==null||v.attr(d)}else o.attr((h={},h[f]=d,h))};for(var u in s)l(u)},updateLabel:function(e,t,n){var i,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+cw,c=o.shapeMap[u]||o.find(function(b){return b.get("className")===u}),f=this.itemType+gS,h=o.shapeMap[f]||o.find(function(b){return b.get("className")===f});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[f])),e.label||e.label==="")if(c){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=Vr(l,e.labelCfg));var v=this.getLabelStyleByPosition(e,l,o),p=(i=e.labelCfg)===null||i===void 0?void 0:i.style,g=V(V({},v),p),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var y=[1,0,0,0,1,0,0,0,1];y=Hc(y,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=y,c.attr(g)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(g);if(!h)g.background&&(h=this.drawLabelBg(e,o,c),h.set("classname",f),o.shapeMap[f]=h,c.toFront());else if(g.background){var w=this.getLabelBgStyleByPosition(c,l);h.attr(w)}else o.removeChild(h)}else{var d=this.drawLabel(e,o);d.set("className",u),o.shapeMap[u]=d}},afterUpdate:function(e,t){},setState:function(e,t,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=Gv(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(u,n),f=n.getStateStyle(u);if(!(!f&&!c)){var h=Gt({},f||c),d=n.getContainer(),v={x:1,y:1,cx:1,cy:1,matrix:1};if(l==="combo"&&(v.r=1,v.width=1,v.height=1),t){var p=function(O){var N,D=h[O];if(ei(D)&&!Ag.includes(O)){var $=((o=d.shapeMap)===null||o===void 0?void 0:o[O])||d.find(function(R){return R.get("name")===O});$==null||$.attr(D)}else s.attr((N={},N[O]=D,N))};for(var g in h)p(g)}else{var m=E0(n.getCurrentStatesStyle()),y=n.getModel(),w=Gt({},y.style,E0(n.getOriginStyle())),b=s.get("name"),x=s.attr(),S={};Object.keys(x).forEach(function(I){if(I!=="img"){var O=x[I];O&&pS(O)==="object"?S[I]=br(O):S[I]=O}});var _={},M=function(O){var N=h[O];if(ei(N)&&!Ag.includes(O)){var D=d.shapeMap[O]||d.find(function(B){return B.get("name")===O});if(D){var $=E0(D.attr());Pe(N,function(B,j){if(O===b&&S[j]&&!v[j]){delete S[j];var G=w[O][j]||Tg[l][j];s.attr(j,G)}else if($[j]||$[j]===0){delete $[j];var z=w[O][j]||Tg[l][j];D.attr(j,z)}}),_[O]=$}}else if(S[O]&&!v[O]){delete S[O];var R=w[O]||(w[b]?w[b][O]:void 0)||Tg[l][O];s.attr(O,R)}};for(var A in h)M(A);b?_[b]=S:Gt(_,S);for(var g in m)if(!v[g]){var E=m[g];(!ei(E)||Ag.includes(g))&&(b?(Gt(w[b],(a={},a[g]=E,a)),delete w[g]):Gt(w,(i={},i[g]=E,i)),delete m[g])}var T={};Vr(T,w,_,m);var C=!1,k=function(O){var N,D,$=T[O];if(ei($)&&!Ag.includes(O)){var R=d.shapeMap[O]||d.find(function(j){return j.get("name")===O});R&&((R.get("type")==="text"||R.get("labelRelated"))&&(delete $.x,delete $.y,delete $.matrix),O===b&&(l==="combo"&&(delete $.r,delete $.width,delete $.height),C=!0),R.attr($))}else if(!C){var B=$||Tg[l][O];l==="combo"?b||s.attr((N={},N[O]=B,N)):s.attr((D={},D[O]=B,D))}};for(var L in T)k(L)}}}},getStateStyle:function(e,t){var n=t.getModel(),i=t.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[e]:o&&o[e];return i==="combo"?br(u):Gt({},l,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n,i=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},kve={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Ot.nodeLabel.offset,getSize:function(e){var t,n=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Ot.defaultNode.size;return Bt(n)&&n.length===1&&(n=[n[0],n[0]]),Bt(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,t){var n=t.maxLength,i=e.label;n&&(i=yF(i,n));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:i,textBaseline:"middle",textAlign:"center"};var o=t.offset;Dt(o)&&(o=this.offset);var s=this.getSize(e),l;switch(a){case"top":l={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":l={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:l={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return l.text=i,l},getLabelBgStyleByPosition:function(e,t){var n;if(!e)return{};var i=(n=t.style)===null||n===void 0?void 0:n.background;if(!i)return{};var a=e.getBBox(),o=M2(i.padding),s=a.width+o[1]+o[3],l=a.height+o[0]+o[2];return V(V({x:a.minX-o[3],y:a.minY-o[0]},i),{width:s,height:l})},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(T){return T.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(T){return T.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(T){return T.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(T){return T.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=Gt({},l,e.linkPoints),c=u.fill,f=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var v=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=v.left,g=v.right,m=v.top,y=v.bottom,w=this.getSize(e),b=w[0],x=w[1],S={r:d,fill:c,stroke:f,lineWidth:h};if(i)!p&&p!==void 0?(i.remove(),delete t.shapeMap["link-point-left"]):i.attr(V(V({},S),{x:-b/2,y:0}));else if(p){var _="link-point-left";t.shapeMap[_]=t.addShape("circle",{attrs:V(V({},S),{x:-b/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr(V(V({},S),{x:b/2,y:0}));else if(g){var M="link-point-right";t.shapeMap[M]=t.addShape("circle",{attrs:V(V({},S),{x:b/2,y:0}),className:M,name:M,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr(V(V({},S),{x:0,y:-x/2}));else if(m){var A="link-point-top";t.shapeMap[A]=t.addShape("circle",{attrs:V(V({},S),{x:0,y:-x/2}),className:A,name:A,isAnchorPoint:!0})}if(s)!y&&y!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr(V(V({},S),{x:0,y:x/2}));else if(y){var E="link-point-bottom";t.shapeMap[E]=t.addShape("circle",{attrs:V(V({},S),{x:0,y:x/2}),className:E,name:E,isAnchorPoint:!0})}},updateShape:function(e,t,n,i,a){var o=t.get("keyShape");o.attr(V({},n)),this.updateLabel(e,t,a),i&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,i=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,l=o.text,u=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(m){return m.get("name")==="".concat(n.type,"-icon")});if(u)if(s||s===void 0){var c=Gt({},u.attr(),a),f=c.width,h=f===void 0?20:f,d=c.height,v=d===void 0?20:d;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(h=0,v=0),u.attr(V(V({},c),{x:-h/2,y:-v/2}))}else u.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(s){var p="".concat(this.type,"-icon");if(l)i.shapeMap[p]=i.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:p,name:p});else{var h=a.width,v=a.height;i.shapeMap[p]=i.addShape("image",{attrs:V(V({},a),{x:-h/2,y:-v/2}),className:p,name:p})}var g=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});g&&g.toFront()}}},Lve=V(V({},A2),kve);Yr.registerNode("single-node",Lve);var kg="edge-shape";function Ive(r){var e=r;return r==="start"?e="end":r==="end"&&(e="start"),e}var Ove={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Ot.defaultEdge.size,style:{x:0,y:0,stroke:Ot.defaultEdge.style.stroke,lineAppendWidth:Ot.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ot.edgeLabel.style.fill,fontSize:Ot.edgeLabel.style.fontSize,fontFamily:Ot.windowFontFamily}},stateStyles:V({},Ot.edgeStateStyles)},getPath:function(e){var t=[];return Pe(e,function(n,i){i===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},i=Gt({},t,n,e.style),a=e.size||Ot.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=Gt({},Ot.defaultEdge.style,{stroke:Ot.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(e,t,n){var i,a=t.getContainer(),o=((i=t.getKeyShape)===null||i===void 0?void 0:i.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var l=e.startPoint,u=e.endPoint,c=this.getControlPoints(e),f=[l];c&&(f=f.concat(c)),f.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var v=e.sourceNode,p=e.targetNode,g={radius:d.radius};c||(g={source:v,target:p,offset:d.offset,radius:d.radius});var m=this.getPath(f,g),y={};n==="move"?y={path:m}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),y=V({},e.style),y.lineWidth===void 0&&(y.lineWidth=(Rt(s)?s:s==null?void 0:s[0])||h.lineWidth),y.path===void 0&&(y.path=m),y.stroke===void 0&&(y.stroke=h.stroke||e.color)),o&&o.attr(y)},getLabelStyleByPosition:function(e,t,n){var i=t.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[kg],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=t.refX||this.refX,u=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+l,a.y=e.startPoint.y+u,a.text=e.label,a;var c;Dt(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var f=pF(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var n=e.getBBox(),i=t.style&&t.style.background;if(!i)return{};var a=i.padding,o=n.width+a[1]+a[3],s=n.height+a[0]+a[2],l=V(V({},i),{width:o,height:s,x:n.minX-a[3],y:n.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),u;return Dt(t.autoRotate)?u=this.labelAutoRotate:u=t.autoRotate,u&&(l.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(e,t){var n="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?n=e:n=Ive(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("path",{className:kg,name:kg,attrs:n});return t.shapeMap[kg]=i,i},drawLabel:function(e,t){var n=this.options.labelCfg,i=Vr({},n,e.labelCfg),a=this.getLabelStyle(e,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(e,t,s,a,o),u=this.itemType+gS;l.set("classname",u),t.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(e,t,n,i,a){var o=this.options.labelCfg,s=Vr({},o,e.labelCfg),l=this.getLabelBgStyleByPosition(n,s),u=t.addShape("rect",{name:"text-bg-shape",attrs:l,labelRelated:!0});return t.shapeMap["text-bg-shape"]=u,u}},Nve=V(V({},A2),Ove);Yr.registerEdge("single-edge",Nve);Yr.registerEdge("line",{getControlPoints:function(){}},"single-edge");Yr.registerEdge("spline",{getPath:function(e){var t=xB(e);return t}},"single-edge");Yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,i={x:(t.x+n.x)/2,y:(t.y+n.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Fx(t,o,n),t.x<=n.x&&t.y>n.y?this.clockwise=a.x>o.x?0:1:t.x<=n.x&&t.y<n.y?this.clockwise=a.x>o.x?1:0:t.x>n.x&&t.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(n.x-t.x)/(n.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),Bt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-t.x,y:n.y-t.y},l=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:e.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=Fx(t,o,n)}var u=gm(t,a),c=[{x:u,y:u}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge");Yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,i=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Bt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),Bt(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Em(n,i,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge");Yr.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Rt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Rt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,i=e.endPoint,a=Em(n,i,e.curvePosition[0],e.curveOffset[0]),o=Em(n,i,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge");Yr.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Rt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Rt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Rt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");Yr.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Rt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Rt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Rt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+i*this.curvePosition[0]+a[0],y:t.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");Yr.registerEdge("loop",{getPathPoints:function(e){return vF(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var $ve={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Ot.comboLabel.refX,refY:Ot.comboLabel.refY,options:{style:{stroke:Ot.defaultCombo.style.stroke,fill:Ot.defaultCombo.style.fill,lineWidth:Ot.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ot.comboLabel.style.fill,fontSize:Ot.comboLabel.style.fontSize,fontFamily:Ot.windowFontFamily}},stateStyles:V({},Ot.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=br(e.size||this.options.size||Ot.defaultCombo.size);return Bt(t)&&t.length===1&&(t=[t[0],t[0]]),Bt(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Bt(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;Dt(o)&&(o=this.refX),Dt(s)&&(s=this.refY);var l=this.getSize(e),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:e.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=e.label,f},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,n){var i=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),l=s.show,u=s.img,c=s.width,f=s.height,h=t.getContainer(),d=h.find(function(m){return m.get("name")==="combo-collapsed-substitute-icon"}),v=d&&!d.destroyed,p=t.get("keyShape");if(i&&l){if(v)d.show();else{var g={width:c||n.r*2||n.width,height:f||n.r*2||n.height};d=h.addShape("image",{attrs:V({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else v&&(d.hide(),p.show())},updateShape:function(e,t,n){var i=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),a.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&i.updateCollapsedIcon(e,t,n)}})):(a.attr(V({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},Dve=V(V({},A2),$ve);Yr.registerCombo("single-combo",Dve);Yr.registerCombo("circle",{options:{size:[Ot.defaultCombo.size[0],Ot.defaultCombo.size[0]],padding:Math.max.apply(Math,Ot.defaultCombo.padding),animate:!0,style:{stroke:Ot.defaultCombo.style.stroke,fill:Ot.defaultCombo.style.fill,lineWidth:Ot.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ot.comboLabel.style.fill,fontSize:Ot.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:V({},Ot.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);delete n.height,delete n.width;var i=t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;Bt(n)&&(n=Math.max.apply(Math,n));var i={stroke:e.color},a=Gt({},t,i,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=Rt(o)?o/2:o[0]/2;else{var l=this.getSize(e);!Rt(a.r)||isNaN(a.r)?s=l[0]/2||Ot.defaultCombo.style.r:s=Math.max(a.r,l[0]/2)||l[0]/2}a.r=s+n;var u=V({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},u},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;Bt(i)&&(i=Math.max.apply(Math,i));var a=br(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=Rt(o)?o/2:o[0]/2:s=Math.max(a.r,n[0]/2)||n[0]/2,a.r=s+i;var l=t.get("sizeCache");l&&(l.r=a.r);var u={stroke:e.color},c=t.get("keyShape"),f=Gt({},c.attr(),u,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,f,!0)}},"single-combo");Yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Ot.defaultCombo.style.stroke,fill:Ot.defaultCombo.style.fill,lineWidth:Ot.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ot.comboLabel.style.fill,fontSize:Ot.comboLabel.style.fontSize,fontFamily:Ot.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:V({},Ot.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Rt(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;Dt(o)&&(o=this.refX),Dt(s)&&(s=this.refY);var l=-i.width/2-a[3],u=i.width/2+a[1],c=-i.height/2-a[0],f=i.height/2+a[2],h;switch(n){case"top":h={x:l+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;case"left":h={x:l+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":h={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:h={x:u+o,y:0,textAlign:"right"};break}return h.text=e.label,h},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;Rt(n)&&(n=[n,n,n,n]);var i={stroke:e.color},a=Gt({},t,i,e.style),o=this.getSize(e),s,l,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?Rt(u)?(s=u,l=u):(s=u[0],l=u[1]):(!Rt(a.width)||isNaN(a.width)?s=o[0]||Ot.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!Rt(a.height)||isNaN(a.height)?l=o[1]||Ot.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],f=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var h=V({x:c,y:f},a);return e.style?(e.style.width=s,e.style.height=l):e.style={width:s,height:l},h},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;Rt(i)&&(i=[i,i,i,i]);var a=br(e.style),o,s,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?Rt(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=t.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:e.color},f=t.get("keyShape"),h=Gt({},f.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,h,!1)}},"single-combo");Yr.registerNode("simple-circle",{options:{size:Ot.defaultNode.size,style:{x:0,y:0,stroke:Ot.defaultNode.style.stroke,fill:Ot.defaultNode.style.fill,lineWidth:Ot.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ot.nodeLabel.style.fill,fontSize:Ot.nodeLabel.style.fontSize,fontFamily:Ot.windowFontFamily}},stateStyles:V({},Ot.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var n=this.getShapeStyle(e),i="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:i,draggable:!0});return t.shapeMap[i]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Vr({},t,n),a=this.getSize(e),o=a[0]/2,s=V({x:0,y:0,r:o},i);return s},update:function(e,t,n){var i=this.getSize(e),a={stroke:e.color,r:i[0]/2},o=t.get("keyShape"),s=Vr({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,n)}},"single-node");Yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Ot.defaultNode.style.stroke,fill:Ot.defaultNode.style.fill,lineWidth:Ot.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ot.nodeLabel.style.fill,fontSize:Ot.nodeLabel.style.fontSize,fontFamily:Ot.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:V({},Ot.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=V({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t,n){t.getContainer();var i=(this.mergeStyle||this.getOptions(e)).style,a=this.getSize(e),o=t.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=Gt({},i,o.attr(),s);l=Gt(l,e.style),this.updateShape(e,t,l,!1,n)}},"single-node");Yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Ot.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var a=t.addShape(n,{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;t.setClip({type:"circle",attrs:V({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,c=n.height,f=a-u/2,h=o-c/2;t.setClip({type:"rect",attrs:V({x:f,y:h,width:u,height:c},s)})}else if(i==="ellipse"){var d=n.rx,v=n.ry;t.setClip({type:"ellipse",attrs:V({x:a,y:o,rx:d,ry:v},s)})}else if(i==="polygon"){var p=n.points;t.setClip({type:"polygon",attrs:V({points:p},s)})}else if(i==="path"){var g=n.path;t.setClip({type:"path",attrs:V({path:g},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,i=t.img,a=this.getSize(e),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=V({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(e,t){var n=t.getContainer(),i="".concat(this.itemType,"-shape"),a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");const CB={triangle:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2," L ").concat(i+t,",").concat(e/2," Z");return a},vee:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=20),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2,`
        L `).concat(i+2*t/3,",0 L ").concat(i+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var n=t*2,i="M ".concat(n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return i},rect:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=10),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",").concat(-e/2,` 
        L `).concat(i+t,",").concat(-e/2,` 
        L `).concat(i+t,",").concat(e/2,` 
        L `).concat(i,",").concat(e/2," Z");return a},diamond:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,`,0 
        L `).concat(i+t/2,",").concat(-e/2,` 
        L `).concat(i+t,`,0 
        L `).concat(i+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,n,i,a,o){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+t+a,u="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(l,", -").concat(n/2,`
            L `).concat(l+i," -").concat(n/2,`
            L `).concat(l+i," ").concat(n/2,`
            L `).concat(l," ").concat(n/2,`
            Z`);return u}},AB={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,t+a],["L",e+i,t+a],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,t-a],["L",e+i,t-a],["L",e,t+n],["Z"]]}};var Rve=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const Pve=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:Rve},Symbol.toStringTag,{value:"Module"}));var TB=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const Fve=Object.freeze(Object.defineProperty({__proto__:null,isForce:TB},Symbol.toStringTag,{value:"Module"}));var Bve=Pa,hi=V(V(V(V(V(V(V({},Qde),yfe),mve),ufe),Pve),Fve),{transform:Bve,mat3:T5}),kB=function(){function r(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},r.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),i=Array.isArray(t);return n&&i?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},r.prototype.refreshLayout=function(){var e=this,t=e.graph,n=e.layoutType,i=e.layoutCfg,a=i===void 0?{}:i;if(t){var o=a.animate,s=o===void 0&&(n==="force"||n==="force2"),l=TB(n)&&(o||s);t.get("animate")&&!l?t.positionsAnimate(n==="comboCombined"):t.refreshPositions(n==="comboCombined")}},r.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,n=zn(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!t&&this.layout()},r.prototype.changeData=function(e){this.layout(e)},r.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(n){var i,a=(i=n.getType)===null||i===void 0?void 0:i.call(n);a&&t.push(a),n.destroy()}),this.layoutMethods=[],t},r.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],i=[],a=[],o=[],s=[],l=[],u=this.graph.getNodes(),c=this.graph.getEdges(),f=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var v=u[d];if(!(!v||v.destroyed)){var p=v.getModel();if(!v.isVisible()){n.push(p);continue}t.push(p)}}for(var g=c.length,d=0;d<g;d++){var m=c[d];if(!(!m||m.destroyed)){var p=m.getModel();if(!m.isVisible()){a.push(p);continue}p.isComboEdge?o.push(p):i.push(p)}}for(var y=f.length,d=0;d<y;d++){var w=f[d];if(!w.destroyed){var p=w.getModel();if(!w.isVisible()){l.push(p);continue}s.push(p)}}return{nodes:t,hiddenNodes:n,edges:i,hiddenEdges:a,combos:s,hiddenCombos:l,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(b){return b.getModel()})}},r.prototype.relayout=function(e){var t=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(!(!i||i.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var l=this.data.nodes;if(!l)return!1;s=this.initPositions(o.center,l)}i.emit("beforelayout"),a==null||a.forEach(function(u,c){var f=o[c]||o;s=s.then(function(){var h,d=t.execLayoutMethod(f,c);return c===a.length-1&&((h=o.onAllLayoutEnd)===null||h===void 0||h.call(o)),d})})}},r.prototype.filterLayoutData=function(e,t){var n=e.nodes,i=e.edges,a=zn(e,["nodes","edges"]);if(!n)return e;var o,s;tn(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var l=n.filter(o);if(tn(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var u=l.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return u[f.source]&&u[f.target]}}return V({nodes:l,edges:i.filter(s)},a)},r.prototype.getLayoutBBox=function(e){var t=this.graph,n=fm(t.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=cB(o);return s.size=[s.width,s.height],s}),a=Object.values(fm(e,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),n=t.nodes;if(!(n[0].x===void 0||n[0].x===null||No(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(e,t){var n;return qi(this,void 0,void 0,function(){var i,a,o;return Zi(this,function(s){return i=this.graph,t!=null&&t.length?(a=t.filter(function(l){return No(l.x)||No(l.y)}),o=a?a.length:0,o?[2,(n=this.initWithPreset)===null||n===void 0?void 0:n.call(this,function(){},function(){var l=i.get("width")*.85,u=i.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(l/u)),f=Math.ceil(o/c),h=l/(c-1),d=u/(f-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(d)||!h)&&(d=0);for(var v=e[0]-l/2,p=e[1]-u/2,g=0;g<o;g++){var m=a[g];No(+m.x)&&(m.x=g%c*h+v),No(+m.y)&&(m.y=Math.floor(g/c)*d+p)}})]:[2]):[2,Promise.resolve()]})})},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}(),LB=function(){function r(e){this.graph=e,this.destroyed=!1,this.initEvents()}return r}(),Hs=Yr.registerNode,IB=Yr.registerEdge,zve=Yr.registerCombo,OB=WE.registerBehavior,yt=Ot;Ot.version,Yr.registerNode,Yr.registerEdge,Yr.registerCombo,WE.registerBehavior;var T2={},Er={},Py={},Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.MESSAGE=Wl.ALGORITHM=void 0;var Gve={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Wl.ALGORITHM=Gve;var jve={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Wl.MESSAGE=jve;var Fy={},NB={},wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.default=void 0;var Uve=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,t||(a[f][c]=1))}),a},Wve=Uve;wc.default=Wve;var By={},zy={},jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.default=jf.LinkedListNode=void 0;var Hve=function(e,t){return e===t},mS=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}();jf.LinkedListNode=mS;var Vve=function(){function r(e){e===void 0&&(e=Hve),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new mS(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new mS(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),Yve=Vve;jf.default=Yve;Object.defineProperty(zy,"__esModule",{value:!0});zy.default=void 0;var Xve=Kve(jf);function Kve(r){return r&&r.__esModule?r:{default:r}}var qve=function(){function r(){this.linkedList=new Xve.default}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),Zve=qve;zy.default=Zve;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.uniqueId=Dn.getOutEdgesNodeId=Dn.getNeighbors=Dn.getEdgesByNodeId=void 0;var Qve=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)};Dn.getNeighbors=Qve;var Jve=function(e,t){return t.filter(function(n){return n.source===e})};Dn.getOutEdgesNodeId=Jve;var epe=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})};Dn.getEdgesByNodeId=epe;var tpe=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};Dn.uniqueId=tpe;Object.defineProperty(By,"__esModule",{value:!0});By.default=void 0;var rpe=ipe(zy),npe=Dn;function ipe(r){return r&&r.__esModule?r:{default:r}}function ape(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var ope=function(e,t,n,i){i===void 0&&(i=!0);var a=ape(n),o=new rpe.default,s=e.edges,l=s===void 0?[]:s;o.enqueue(t);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),(0,npe.getNeighbors)(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},spe=ope;By.default=spe;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.default=lpe;Hl.detectStrongConnectComponents=Hl.detectConnectedComponents=void 0;var $B=Dn,DB=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(v){l.push(v),s[v.id]=!0;for(var p=(0,$B.getNeighbors)(v.id,a),g=function(w){var b=p[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<p.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o};Hl.detectConnectedComponents=DB;var RB=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=(0,$B.getNeighbors)(m.id,a,"target").filter(function(_){return n.map(function(M){return M.id}).indexOf(_)>-1}),w=function(M){var A=y[M];if(!l[A]&&l[A]!==0){var E=n.filter(function(T){return T.id===A});E.length>0&&g(E[0]),u[m.id]=Math.min(u[m.id],u[A])}else s[A]&&(u[m.id]=Math.min(u[m.id],l[A]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,v=n;d<v.length;d++){var p=v[d];!l[p.id]&&l[p.id]!==0&&h(p)}return c};Hl.detectStrongConnectComponents=RB;function lpe(r,e){return e?RB(r):DB(r)}var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.getOutDegree=Rs.getInDegree=Rs.default=void 0;var bv=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},upe=bv;Rs.default=upe;var cpe=function(e,t){var n=bv(e);return n[t]?bv(e)[t].inDegree:0};Rs.getInDegree=cpe;var fpe=function(e,t){var n=bv(e);return n[t]?bv(e)[t].outDegree:0};Rs.getOutDegree=fpe;var Po={},Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.default=vpe;var hpe=Dn;function dpe(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function PB(r,e,t,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:t});var a=r.edges,o=a===void 0?[]:a;(0,hpe.getNeighbors)(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:t,current:e,next:s})&&PB(r,s,e,n,i)}),n.leave({current:e,previous:t})}function vpe(r,e,t,n){n===void 0&&(n=!0),PB(r,e,"",dpe(t),n)}function yS(r){"@babel/helpers - typeof";return yS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yS(r)}Object.defineProperty(Po,"__esModule",{value:!0});Po.detectAllUndirectedCycle=Po.detectAllDirectedCycle=Po.detectAllCycles=Po.default=void 0;var ppe=mpe(Gy),FB=gpe(Hl),BB=Dn;function zB(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(zB=function(i){return i?t:e})(r)}function gpe(r,e){if(r&&r.__esModule)return r;if(r===null||yS(r)!=="object"&&typeof r!="function")return{default:r};var t=zB(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var o=i?Object.getOwnPropertyDescriptor(r,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=r[a]}return n.default=r,t&&t.set(r,n),n}function mpe(r){return r&&r.__esModule?r:{default:r}}var ype=function(e){var t=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,v=h.previous;if(s[d]){t={};for(var p=d,g=v;g!==d;)t[p]=g,p=g,g=a[g];t[p]=g}else s[d]=d,delete o[d],a[d]=v},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return t?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];(0,ppe.default)(e,c,u)}return t},GB=function(e,t,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=(0,FB.default)(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],v=(i={},i[h]=f,i),p=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=(0,BB.getNeighbors)(m,e.edges),w=function(S){var _,M=y[S],A=e.nodes.find(function(I){return I.id===M});if(M===m)o.push((_={},_[M]=g,_));else if(!(M in p))v[M]=g,d.push(A),p[M]=new Set([g]);else if(!p[m].has(A)){for(var E=!0,T=[A,g],C=v[m];p[M].size&&!p[M].has(C)&&(T.push(C),C!==v[C.id]);)C=v[C.id];if(T.push(C),t&&n?(E=!1,T.findIndex(function(I){return t.indexOf(I.id)>-1})>-1&&(E=!0)):t&&!n&&T.findIndex(function(I){return t.indexOf(I.id)>-1})>-1&&(E=!1),E){for(var k={},L=1;L<T.length;L+=1)k[T[L-1].id]=T[L];T.length&&(k[T[T.length-1].id]=T[0]),o.push(k)}p[M].add(g)}},b=0;b<y.length;b+=1)w(b)}return o};Po.detectAllUndirectedCycle=GB;var jB=function(e,t,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(C){for(var k=[C];k.length>0;){var L=k.pop();a.has(L)&&(a.delete(L),o[L.id].forEach(function(I){k.push(I)}),o[L.id].clear())}},f=function T(C,k,L){var I=!1;if(t&&n===!1&&t.indexOf(C.id)>-1)return I;i.push(C),a.add(C);for(var O=L[C.id],N=0;N<O.length;N+=1){var D=l[O[N]];if(D===k){for(var $={},R=1;R<i.length;R+=1)$[i[R-1].id]=i[R];i.length&&($[i[i.length-1].id]=i[0]),s.push($),I=!0}else a.has(D)||T(D,k,L)&&(I=!0)}if(I)c(C);else for(var N=0;N<O.length;N+=1){var D=l[O[N]];o[D.id].has(C)||o[D.id].add(C)}return i.pop(),I},h=e.nodes,d=h===void 0?[]:h,v=0;v<d.length;v+=1){var p=d[v],g=p.id;u[g]=v,l[v]=p}if(t&&n)for(var m=function(C){var k=t[C];u[d[C].id]=u[k],u[k]=0,l[0]=d.find(function(L){return L.id===k}),l[u[d[C].id]]=d[C]},v=0;v<t.length;v++)m(v);for(var y=function(C){for(var k,L,I=1/0,O=0;O<C.length;O+=1)for(var N=C[O],D=0;D<N.length;D++){var $=u[N[D].id];$<I&&(I=$,L=O)}for(var R=C[L],B=[],O=0;O<R.length;O+=1){var j=R[O];B[j.id]=[];for(var G=0,z=(0,BB.getNeighbors)(j.id,e.edges,"target").filter(function(ie){return R.map(function(se){return se.id}).indexOf(ie)>-1});G<z.length;G++){var W=z[G];W===j.id&&!(n===!1&&t.indexOf(j.id)>-1)?s.push((k={},k[j.id]=j,k)):B[j.id].push(u[W])}}return{component:R,adjList:B,minIdx:I}},w=0;w<d.length;){var b=d.filter(function(T){return u[T.id]>=w}),x=(0,FB.detectStrongConnectComponents)({nodes:b,edges:e.edges}).filter(function(T){return T.length>1});if(x.length===0)break;var S=y(x),_=S.minIdx,M=S.adjList,A=S.component;if(A.length>1){A.forEach(function(T){o[T.id]=new Set});var E=l[_];if(t&&n&&t.indexOf(E.id)===-1)return s;f(E,E,M),w=_+1}else break}return s};Po.detectAllDirectedCycle=jB;var bpe=function(e,t,n,i){return i===void 0&&(i=!0),t?jB(e,n,i):GB(e,n,i)};Po.detectAllCycles=bpe;var wpe=ype;Po.default=wpe;var ch={};const UB=rs(fie),Wv=rs(_ae);Object.defineProperty(ch,"__esModule",{value:!0});ch.default=void 0;var KI=UB,xpe=Wv,qI=Dn,Spe=function(e,t,n){for(var i=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=t[o])}return a},_pe=function(e,t,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===t&&(c[b]=0)});for(var h=o.length,d=function(w){var b=Spe(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=(0,qI.getOutEdgesNodeId)(x,l):S=(0,qI.getEdgesByNodeId)(x,l),S.forEach(function(_){var M=_.target,A=_.source,E=M===x?A:M,T=i&&_[i]?_[i]:1;c[E]>c[b.id]+T?(c[E]=c[b.id]+T,f[E]=[b.id]):c[E]===c[b.id]+T&&f[E].push(b.id)})},v=0;v<h;v++)d();f[t]=[t];var p={};for(var g in c)c[g]!==1/0&&WB(t,g,f,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}},Epe=_pe;ch.default=Epe;function WB(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,o=t[e];a<o.length;a++){var s=o[a],l=WB(r,s,t,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];(0,xpe.isArray)(f)?i.push((0,KI.__spreadArray)((0,KI.__spreadArray)([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.findShortestPath=Uf.findAllPath=void 0;var Mpe=Cpe(ch),Lg=Dn;function Cpe(r){return r&&r.__esModule?r:{default:r}}var Ape=function(e,t,n,i,a){var o=(0,Mpe.default)(e,t,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}};Uf.findShortestPath=Ape;var Tpe=function(e,t,n,i){var a;if(t===n)return[[t]];var o=e.edges,s=o===void 0?[]:o,l=[t],u=(a={},a[t]=!0,a),c=[],f=[],h=i?(0,Lg.getNeighbors)(t,s,"target"):(0,Lg.getNeighbors)(t,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var v=d.shift();v&&(l.push(v),u[v]=!0,h=i?(0,Lg.getNeighbors)(v,s,"target"):(0,Lg.getNeighbors)(v,s),c.push(h.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var p=l.pop();u[p]=!1,c.pop()}}return f};Uf.findAllPath=Tpe;var Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.default=void 0;var kpe=Lpe(wc);function Lpe(r){return r&&r.__esModule?r:{default:r}}var Ipe=function(e,t){for(var n=(0,kpe.default)(e,t),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},Ope=Ipe;Hv.default=Ope;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});jy.default=void 0;var Npe=Dpe(wc),$pe=Dn;function Dpe(r){return r&&r.__esModule?r:{default:r}}var Rpe=function(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=(0,$pe.uniqueId)();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=(0,Npe.default)(e,t),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,_){if(S){var M=o[_].id;h[x][M]=S}})});for(var d=0,v=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(L){var I=h[x.id][L],O=c[L].node,N=O.clusterId;S[N]||(S[N]=0),S[N]+=I});var _=-1/0,M=[];if(Object.keys(S).forEach(function(L){_<S[L]?(_=S[L],M=[L]):_===S[L]&&M.push(L)}),!(M.length===1&&M[0]===x.clusterId)){var A=M.indexOf(x.clusterId);if(A>=0&&M.splice(A,1),M&&M.length){b=!0;var E=u[x.clusterId],T=E.nodes.indexOf(x);E.nodes.splice(T,1);var C=Math.floor(Math.random()*M.length),k=u[M[C]];k.nodes.push(x),x.clusterId=k.id}}}),!b)return"break";d++};d<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,_=c[b].node.clusterId,M=c[x].node.clusterId,A="".concat(_,"---").concat(M);if(m[A])m[A].weight+=S,m[A].count++;else{var E={source:_,target:M,weight:S,count:1};m[A]=E,g.push(E)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},Ppe=Rpe;jy.default=Ppe;var Uy={},Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.default=void 0;var Fpe=Wv,Bpe=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=(0,Fpe.clone)(this.arr);t.sort(function(o,s){return o-s});var n=t[t.length-1],i=t[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}(),zpe=Bpe;Vv.default=zpe;var Fo={},Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.secondReg=Wf.dateReg=void 0;var Gpe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;Wf.secondReg=Gpe;var jpe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;Wf.dateReg=jpe;Object.defineProperty(Fo,"__esModule",{value:!0});Fo.getPropertyWeight=Fo.getAllSortProperties=Fo.getAllProperties=Fo.default=void 0;var ZI=Wf,k2=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var n={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(ZI.secondReg)&&!"".concat(a.properties[o]).match(ZI.dateReg)&&isNaN(Number(a.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var i=Object.keys(n).sort(function(a,o){return n[o]-n[a]});return i.length<t?i:i.slice(0,t)};Fo.getAllSortProperties=k2;var Upe=function(e,t){return t.map(function(n){return e.hasOwnProperty(n)?e[n]:0})},HB=function(e){for(var t=k2(e),n=[],i=0;i<e.length;i++)n[i]=Upe(e[i].properties,t);return n};Fo.getPropertyWeight=HB;var VB=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(i){t===void 0&&n.push(i),i[t]!==void 0&&n.push(i[t])}),n};Fo.getAllProperties=VB;var Wpe={getAllSortProperties:k2,getPropertyWeight:HB,getAllProperties:VB};Fo.default=Wpe;var Bo={},Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});Yv.DistanceType=void 0;var bS;Yv.DistanceType=bS;(function(r){r.EuclideanDistance="euclideanDistance"})(bS||(Yv.DistanceType=bS={}));Object.defineProperty(Bo,"__esModule",{value:!0});Bo.oneHot=Bo.getDistance=Bo.getAllKeyValueMap=Bo.default=void 0;var QI=Wv,JI=Yv,eO=Hpe(Vv);function Hpe(r){return r&&r.__esModule?r:{default:r}}var L2=function(e,t,n){var i=[];t!=null&&t.length?i=t:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=(0,QI.uniq)(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=(0,QI.uniq)(s))}),a};Bo.getAllKeyValueMap=L2;var YB=function(e,t,n){var i=L2(e,t,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],v=d.findIndex(function(m){return h===m}),p=[];if(s)p.push(h);else for(var g=0;g<d.length;g++)g===v?p.push(1):p.push(0);c=c.concat(p)}),a[u]=c}),a};Bo.oneHot=YB;var XB=function(e,t,n,i){n===void 0&&(n=JI.DistanceType.EuclideanDistance);var a=0;switch(n){case JI.DistanceType.EuclideanDistance:a=new eO.default(e).euclideanDistance(new eO.default(t));break}return a};Bo.getDistance=XB;var Vpe={getAllKeyValueMap:L2,oneHot:YB,getDistance:XB};Bo.default=Vpe;Object.defineProperty(Uy,"__esModule",{value:!0});Uy.default=void 0;var Ype=Wv,Xpe=KB(wc),Hh=KB(Vv),Kpe=Fo,qpe=Bo;function KB(r){return r&&r.__esModule?r:{default:r}}var tO=function(e,t,n,i){for(var a=t.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=t[l][c]||0,d=n[l]||0,v=n[c]||0;s+=h-d*v/o}}return s*=1/o,s},fw=function(e,t){e===void 0&&(e=[]);for(var n=e.length,i=new Hh.default([]),a=0;a<n;a++)i=i.add(new Hh.default(t[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Hh.default(t[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Hh.default(t[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new Hh.default(t[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,v=2*n*s,a=0;a<n;a++)for(var p=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||p!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(v,2)-c[a][f]/v;d+=m}}return Number(d.toFixed(4))},Zpe=function(e,t,n,i,a,o,s,l,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,v=[];if(a){f.forEach(function($,R){$.properties=$.properties||{},$.originIndex=R});var p=[];f.every(function($){return $.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(f.map(function($){return $.nodeType}))),f.forEach(function($){$.properties.nodeType=p.findIndex(function(R){return R===$.nodeType})}));var g=(0,Kpe.getAllProperties)(f,o);v=(0,qpe.oneHot)(g,s,l)}var m=1,y={},w={};f.forEach(function($,R){var B=String(m++);$.clusterId=B,y[B]={id:B,nodes:[$]},w[$.id]={node:$,idx:R}});var b=(0,Xpe.default)(e,t),x=[],S={},_=0;b.forEach(function($,R){var B=0,j=f[R].id;S[j]={},$.forEach(function(G,z){if(G){B+=G;var W=f[z].id;S[j][W]=G,_+=G}}),x.push(B)}),_/=2;for(var M=1/0,A=1/0,E=0,T=[],C={};;){a&&f.every(function($){return $.hasOwnProperty("properties")})?M=tO(f,b,x,_)+fw(f,v)*u:M=tO(f,b,x,_),E===0&&(A=M,T=f,C=y);var k=M>0&&M>A&&M-A<i;if(M>A&&(T=f.map(function($){return{node:$,clusterId:$.clusterId}}),C=(0,Ype.clone)(y),A=M),k||E>100)break;E++,Object.keys(y).forEach(function($){var R=0;d.forEach(function(B){var j=B.source,G=B.target,z=w[j].node.clusterId,W=w[G].node.clusterId;(z===$&&W!==$||W===$&&z!==$)&&(R=R+(B[n]||1))}),y[$].sumTot=R}),f.forEach(function($,R){var B=y[$.clusterId],j=0,G,z=x[R]/(2*_),W=0,Q=B.nodes;Q.forEach(function(me){var Fe=w[me.id].idx;W+=b[R][Fe]||0});var ie=W-B.sumTot*z,se=Q.filter(function(me){return me.id!==$.id});se.forEach(function(me,Fe){v[me.originIndex]});var ae=fw(se,v)*u,pe=S[$.id];if(Object.keys(pe).forEach(function(me){var Fe=w[me].node,Re=Fe.clusterId;if(Re!==$.clusterId){var $e=y[Re],Ke=$e.nodes;if(!(!Ke||!Ke.length)){var at=0;Ke.forEach(function(oe){var X=w[oe.id].idx;at+=b[R][X]||0});var Me=at-$e.sumTot*z,J=Ke.concat([$]);J.forEach(function(oe,X){v[oe.originIndex]});var F=fw(J,v)*u,be=Me-ie;a&&(be=Me+F-(ie+ae)),be>j&&(j=be,G=$e)}}}),j>0){G.nodes.push($);var De=$.clusterId;$.clusterId=G.id;var Je=B.nodes.indexOf($);B.nodes.splice(Je,1);var ee=0,ne=0;d.forEach(function(me){var Fe=me.source,Re=me.target,$e=w[Fe].node.clusterId,Ke=w[Re].node.clusterId;($e===G.id&&Ke!==G.id||Ke===G.id&&$e!==G.id)&&(ee=ee+(me[n]||1)),($e===De&&Ke!==De||Ke===De&&$e!==De)&&(ne=ne+(me[n]||1))}),G.sumTot=ee,B.sumTot=ne}})}var L={},I=0;Object.keys(C).forEach(function($){var R=C[$];if(!R.nodes||!R.nodes.length){delete C[$];return}var B=String(I+1);B!==$&&(R.id=B,R.nodes=R.nodes.map(function(j){return{id:j.id,clusterId:B}}),C[B]=R,L[$]=B,delete C[$],I++)}),T.forEach(function($){var R=$.node,B=$.clusterId;R&&(R.clusterId=B,R.clusterId&&L[R.clusterId]&&(R.clusterId=L[R.clusterId]))});var O=[],N={};d.forEach(function($){var R=$.source,B=$.target,j=$[n]||1,G=w[R].node.clusterId,z=w[B].node.clusterId;if(!(!G||!z)){var W="".concat(G,"---").concat(z);if(N[W])N[W].weight+=j,N[W].count++;else{var Q={source:G,target:z,weight:j,count:1};N[W]=Q,O.push(Q)}}});var D=[];return Object.keys(C).forEach(function($){D.push(C[$])}),{clusters:D,clusterEdges:O}},Qpe=Zpe;Uy.default=Qpe;var Wy={},Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.default=void 0;var Jpe=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var i=n[t];this.parent[i]=i}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),i=this.find(t);n!==i&&(n<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),ege=Jpe;Hy.default=ege;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.default=void 0;var tge=function(e,t){return e-t},rge=function(){function r(e){e===void 0&&(e=tge),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),nge=rge;Vy.default=nge;Object.defineProperty(Wy,"__esModule",{value:!0});Wy.default=void 0;var ige=qB(Hy),age=qB(Vy),hw=Dn;function qB(r){return r&&r.__esModule?r:{default:r}}var oge=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return t?g.weight-m.weight:0},f=new age.default(c);for((0,hw.getEdgesByNodeId)(l.id,s).forEach(function(p){f.insert(p)});!f.isEmpty();){var h=f.delMin(),d=h.source,v=h.target;u.has(d)&&u.has(v)||(n.push(h),u.has(d)||(u.add(d),(0,hw.getEdgesByNodeId)(d,s).forEach(function(p){f.insert(p)})),u.has(v)||(u.add(v),(0,hw.getEdgesByNodeId)(v,s).forEach(function(p){f.insert(p)})))}return n},rO=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});t&&l.sort(function(d,v){return d.weight-v.weight});for(var u=new ige.default(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},sge=function(e,t,n){var i={prim:oge,kruskal:rO};return n?i[n](e,t):rO(e,t)},lge=sge;Wy.default=lge;var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.default=void 0;var uge=fge(Rs),cge=Dn;function fge(r){return r&&r.__esModule?r:{default:r}}var hge=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},v={},p=0;p<f;++p){var g=l[p],m=g.id;d[m]=1/f,v[m]=1/f}for(var y=(0,uge.default)(e);o>0&&i>t;){a=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=(0,cge.getNeighbors)(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=v[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;h=d[m]+a,i+=Math.abs(h-v[m]),v[m]=h}o-=1}return v},dge=hge;Yy.default=dge;var Xy={},Ky={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.VACANT_NODE_LABEL=$n.VACANT_NODE_ID=$n.VACANT_GRAPH_ID=$n.VACANT_EDGE_LABEL=$n.VACANT_EDGE_ID=$n.Node=$n.Graph=$n.Edge=$n.AUTO_EDGE_ID=void 0;var ZB=-1;$n.VACANT_EDGE_ID=ZB;var wv=-1;$n.VACANT_NODE_ID=wv;var QB="-1";$n.VACANT_EDGE_LABEL=QB;var JB="-1";$n.VACANT_NODE_LABEL=JB;var vge=-1;$n.VACANT_GRAPH_ID=vge;var pge="-1";$n.AUTO_EDGE_ID=pge;var wS=function(){function r(e,t,n,i){e===void 0&&(e=ZB),t===void 0&&(t=wv),n===void 0&&(n=wv),i===void 0&&(i=QB),this.id=e,this.from=t,this.to=n,this.label=i}return r}();$n.Edge=wS;var e6=function(){function r(e,t){e===void 0&&(e=wv),t===void 0&&(t=JB),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}();$n.Node=e6;var gge=function(){function r(e,t,n){e===void 0&&(e=wv),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new e6(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new wS(e,t,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new wS(e,n,t,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}();$n.Graph=gge;Object.defineProperty(Ky,"__esModule",{value:!0});Ky.default=void 0;var mge=Wv,Oi=$n,Nu=function(){function r(e,t,n,i,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Oi.VACANT_NODE_LABEL,edgeLabel:i||Oi.VACANT_EDGE_LABEL,nodeLabel2:a||Oi.VACANT_NODE_LABEL}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),nO=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,i,a){return this.dfsEdgeList.push(new Nu(e,t,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=Oi.VACANT_GRAPH_ID),t===void 0&&(t=!1);var n=new Oi.Graph(e,!0,t);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Oi.VACANT_NODE_LABEL&&n.addNode(a,l),c!==Oi.VACANT_NODE_LABEL&&n.addNode(o,c),l!==Oi.VACANT_NODE_LABEL&&c!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),Ig=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),yge=function(){function r(e){var t=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,v=d===void 0?!1:d;this.graphs=t,this.dfsCode=new nO,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,i=[],a=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(e,t,n,i){if(!this.directed&&t===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[n.to].label||a[t.from].label===a[n.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[n.to].label)return c}}return null},r.prototype.findForwardPureEdges=function(e,t,n,i){for(var a=[],o=t.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},r.prototype.findForwardRmpathEdges=function(e,t,n,i){for(var a=[],o=e.nodeMap,s=o[t.to].label,l=o[t.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;t.to===h.to||n>d||i.hasNode(o[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&a.push(h)}return a},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,i=t.toGraph(Oi.VACANT_GRAPH_ID,n),a=i.nodeMap,o=new nO,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var v=a[d.to],p="".concat(f.label,"-").concat(d.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:v.label});var g={graphId:i.id,edge:d,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new Nu(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(N){if(m)return"break";h.forEach(function(D){var $=new Ig(D),R=e.findBackwardEdge(i,$.edges[d[N]],$.edges[d[0]],$);R&&(g[R.label]||(g[R.label]={projected:[],edgeLabel:R.label}),g[R.label].projected.push({graphId:i.id,edge:g,preNode:D}),y=o.dfsEdgeList[d[N]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var _=e.findMinLabel(g);o.dfsEdgeList.push(new Nu(p,y,Oi.VACANT_NODE_LABEL,_.edgeLabel,Oi.VACANT_NODE_LABEL));var M=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[M]!==o.dfsEdgeList[M]?!1:f(g[_.edgeLabel].projected)}var A={};m=!1;var E=0;h.forEach(function(O){var N=new Ig(O),D=e.findForwardPureEdges(i,N.edges[d[0]],v,N);D.length>0&&(m=!0,E=p,D.forEach(function($){var R="".concat($.label,"-").concat(a[$.to].label);A[R]||(A[R]={projected:[],edgeLabel:$.label,nodeLabel2:a[$.to].label}),A[R].projected.push({graphId:i.id,edge:$,preNode:O})}))});for(var T=d.length,C=function(N){if(m)return"break";var D=d[N];h.forEach(function($){var R=new Ig($),B=e.findForwardRmpathEdges(i,R.edges[D],v,R);B.length>0&&(m=!0,E=o.dfsEdgeList[D].fromNode,B.forEach(function(j){var G="".concat(j.label,"-").concat(a[j.to].label);A[G]||(A[G]={projected:[],edgeLabel:j.label,nodeLabel2:a[j.to].label}),A[G].projected.push({graphId:i.id,edge:j,preNode:$})}))})},x=0;x<T;x++){var k=C(x);if(k==="break")break}if(!m)return!0;var L=e.findMinLabel(A);o.dfsEdgeList.push(new Nu(E,p+1,Oi.VACANT_NODE_LABEL,L.edgeLabel,L.nodeLabel2));var I=o.dfsEdgeList.length-1;return t.dfsEdgeList[I]!==o.dfsEdgeList[I]?!1:f(A["".concat(L.edgeLabel,"-").concat(L.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,mge.clone)(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=t.graphs[c.graphId],h=f.nodeMap,d=new Ig(c),v=a.length-1;v>=0;v--){var p=t.findBackwardEdge(f,d.edges[a[v]],d.edges[a[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=t.maxNodeNum)){var m=t.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=t.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var _="".concat(t.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[_]||(l[_]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[_].projected.push({graphId:c.graphId,edge:S,preNode:c})})},v=0;v<a.length;v++)y(v)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;t.dfsCode.dfsEdgeList.push(new Nu(o,h,"-1",d,"-1")),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,v=f.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Nu(h,o+1,Oi.VACANT_NODE_LABEL,d,v)),t.subGraphMining(l[c].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,v="".concat(l,"-").concat(d);if(!s[v]){var p=a[d]||0;p++,a[d]=p}s[v]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!t&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(i){var a=t[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Nu(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),bge=function(e,t,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new Oi.Graph(s,!0,t),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],v=c[f.target];u.addEdge(-1,d,v,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},wge=function(e,t,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[t]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},iO="cluster",xge=function(e){var t=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?iO:a,s=e.edgeLabelProp,l=s===void 0?iO:s,u=bge(t,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,v=e.top,p={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:v,verbose:d,directed:i},g=new yge(p);g.run();var m=wge(g.frequentSubgraphs,o,l);return m},Sge=xge;Ky.default=Sge;Object.defineProperty(Xy,"__esModule",{value:!0});Xy.default=void 0;var aO=UB,oO=I2(Hv),_ge=I2(Ky),sO=I2(ch),Ege=Dn;function I2(r){return r&&r.__esModule?r:{default:r}}var lO=function(e,t,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return t.forEach(function(s,l){a.push(t6(o,s,l,n,i))}),a},t6=function(e,t,n,i,a){var o=[n],s=[],l={};return t.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},Mge=function(e,t,n,i,a){var o=Math.ceil(n/t),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,v=u.neighborNum-1;f<o;){for(var p=d[1+Math.floor(Math.random()*v)],g=0;(s["".concat(c,"-").concat(p)]||s["".concat(p,"-").concat(c)])&&(p=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(s["".concat(c,"-").concat(p)]={start:c,end:p,distance:a[c][p]},f++,l++,l>=n))return s;if(h++,h>2*t)break}if(f<o){var m=o-f;o=(o+m)/(t-c-1)}}),s},C0=function(e,t,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=t[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=t[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var v={},p=d.length,g=0;g<p;g++){var m=a[d[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(y){v[y.source]&&v[y.target]&&i[o].edges.push(y)})}}}}),i},A0=function(e,t,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=t==null?void 0:t.nodes[0][n],d=t==null?void 0:t.nodes[1][n],v=t==null?void 0:t.edges[0][i];u[i]===v&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},Cge=function(e,t,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var v=0,p=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,p.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,_){var M=c[S];y.graphs.forEach(function(A,E){_!==E&&(b+=Math.abs(M-c[A]))})}),b/=x*(x-1)/2,v+=b}),v/=d.length;var g=0;p.forEach(function(y,w){p.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<t;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},uO=function(e,t){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},cO=function(e,t,n){var i={},a={};return e.forEach(function(o,s){i["".concat(Ege.uniqueId)]={idx:s,edge:o};var l=o[t];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},fO=function(e,t,n){var i=t.length,a={};return t.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},Age=function(e,t,n,i,a,o,s,l,u,c,f){var h,d="".concat(t.id,"-").concat(n.id);if(c&&c[d])return c[d];var v=f?f[d]:void 0;if(!v){var p=(h={},h[d]={start:i[t.id].idx,end:i[n.id].idx,distance:a},h);f=C0(p,o,e,f),v=f[d]}return A0(v,s,l,u)},hO=function(e,t,n,i){var a,o,s,l=(a=e[t])===null||a===void 0?void 0:a.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(l=1/0,u=1/0,c=1/0,i[t].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var v=n[f.id].outDegree;c>v&&(c=v)}),e[t]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},Tge=function(e,t,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=(0,oO.default)(e,n),f=(0,oO.default)(t,n),h=fO(e.nodes,c,n),d=fO(t.nodes,f,n),v=uO(e.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=uO(t.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;cO(e.edges,s,p);var b=cO(t.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(Me){x=x.concat(Me)}),a||(a=Math.max.apply(Math,(0,aO.__spreadArray)((0,aO.__spreadArray)([],x,!1),[2],!1))),i||(i=a);var S=lO(e,c,o,i),_=lO(t,f,o,i),M=Math.min(100,u*(u-1)/2),A=Mge(i,u,M,S,c),E=C0(A,S,e),T=10,C=1,k=1,L=4,I={graphs:E,nodeLabelProp:o,edgeLabelProp:s,minSupport:C,minNodeNum:k,maxNodeNum:L,directed:n},O=(0,_ge.default)(I).slice(0,T),N=O.length,D=[];O.forEach(function(Me,J){D[J]={},Object.keys(E).forEach(function(F){var be=E[F],oe=A0(be,Me,o,s);D[J][F]=oe})});var $=Cge(D,N,O),R=$.structure,B=$.structureCountMap,j=t.nodes[0],G=[],z=(l=t.nodes[0])===null||l===void 0?void 0:l[o],W=-1/0;t.nodes.forEach(function(Me){var J=Me[o],F=g[J];(F==null?void 0:F.length)>W&&(W=F.length,G=F,z=J,j=Me)});var Q={},ie={},se={},ae={},pe={},De={};Object.keys(w).forEach(function(Me,J){pe[Me]=[],n&&(De[Me]=[]);var F=w[Me],be={};F.forEach(function(ke){var Ge=d["".concat(j.id,"-").concat(ke.id)];if(Ge&&pe[Me].push(Ge),be["".concat(j.id,"-").concat(ke.id)]={start:0,end:y[ke.id].idx,distance:Ge},n){var vt=d["".concat(ke.id,"-").concat(j.id)];vt&&De[Me].push(vt)}}),pe[Me]=pe[Me].sort(function(ke,Ge){return ke-Ge}),n&&(De[Me]=De[Me].sort(function(ke,Ge){return ke-Ge})),ie=C0(be,_,t,ie);var oe=[];if(Object.keys(be).forEach(function(ke){if(se[ke]){oe.push(se[ke]);return}var Ge=ie[ke];se[ke]=A0(Ge,R,o,s),oe.push(se[ke])}),oe=oe.sort(function(ke,Ge){return Ge-ke}),ae["".concat(j.id,"-").concat(Me)]=oe,Me!==z)for(var X=(G==null?void 0:G.length)||0,de=function(Ge){var vt=G[Ge],Lt=S[p[vt.id].idx],Kt=Lt.nodeLabelCountMap[Me],Ct=w[Me].length;if(!Kt||Kt.count<Ct)return G.splice(Ge,1),"continue";for(var zt=!1,jt=0;jt<Ct;jt++)if(Kt.dists[jt]>pe[Me][jt]){zt=!0;break}if(zt)return G.splice(Ge,1),"continue";var pr={};Lt.neighbors.forEach(function(Or){var En=h["".concat(vt.id,"-").concat(Or.id)];pr["".concat(vt.id,"-").concat(Or.id)]={start:p[vt.id].idx,end:p[Or.id].idx,distance:En}}),E=C0(pr,S,e,E);var Ir=[];Object.keys(pr).forEach(function(Or){if(B[Or]){Ir.push(B[Or]);return}var En=E[Or];B[Or]=A0(En,R,o,s),Ir.push(B[Or])}),Ir=Ir.sort(function(Or,En){return En-Or});for(var oi=!1,jt=0;jt<Ct;jt++)if(Ir[jt]<oe[jt]){oi=!0;break}if(oi)return G.splice(Ge,1),"continue"},xe=X-1;xe>=0;xe--)de(xe)});var Je=[];G==null||G.forEach(function(Me){for(var J=p[Me.id].idx,F=t6(e.nodes,c[J],J,o,a),be=F.neighbors,oe=be.length,X=!1,de=oe-1;de>=0;de--){if(be.length+1<t.nodes.length){X=!0;return}var xe=be[de],ke=xe[o];if(!w[ke]||!w[ke].length){be.splice(de,1);continue}if(!pe[ke]||!pe[ke].length){be.splice(de,1);continue}var Ge="".concat(Me.id,"-").concat(xe.id),vt=h[Ge],Lt=pe[ke].length-1,Kt=pe[ke][Lt];if(vt>Kt){be.splice(de,1);continue}if(n){var Ct="".concat(xe.id,"-").concat(Me.id),zt=h[Ct];Lt=De[ke].length-1;var jt=De[ke][Lt];if(zt>jt){be.splice(de,1);continue}}var pr=B[Ge]?B[Ge]:Age(e,Me,xe,p,vt,S,R,o,s,B,E),Ir="".concat(j.id,"-").concat(ke),oi=ae[Ir][ae[Ir].length-1];if(pr<oi){be.splice(de,1);continue}var Or=hO(Q,ke,y,w),En=Or.minPatternNodeLabelDegree;if(Or.minPatternNodeLabelInDegree,Or.minPatternNodeLabelOutDegree,p[xe.id].degree<En){be.splice(de,1);continue}}X||Je.push({nodes:[Me].concat(be)})});var ee=(0,sO.default)(t,j.id,!1).length,ne={};n?(Object.keys(ee).forEach(function(Me){var J=y[Me].node[o];ne[J]?ne[J].push(ee[Me]):ne[J]=[ee[Me]]}),Object.keys(ne).forEach(function(Me){ne[Me].sort(function(J,F){return J-F})})):ne=pe;for(var me=Je.length,Fe=function(J){var F=Je[J],be=F.nodes[0],oe={},X={};F.nodes.forEach(function(er,Ur){X[er.id]={idx:Ur,node:er,degree:0,inDegree:0,outDegree:0};var Ht=er[o];oe[Ht]?oe[Ht]++:oe[Ht]=1});var de=[],xe={};e.edges.forEach(function(er){X[er.source]&&X[er.target]&&(de.push(er),xe[er[s]]?xe[er[s]]++:xe[er[s]]=1,X[er.source].degree++,X[er.target].degree++,X[er.source].outDegree++,X[er.target].inDegree++)});for(var ke=Object.keys(b).length,Ge=!1,vt=0;vt<ke;vt++){var Lt=Object.keys(b)[vt];if(!xe[Lt]||xe[Lt]<b[Lt].length){Ge=!0;break}}if(Ge)return Je.splice(J,1),"continue";var Kt=de.length;if(Kt<t.edges.length)return Je.splice(J,1),"break";for(var Ct=!1,zt=function(Ur){var Ht=de[Ur],un=Ht[s],si=b[un];if(!si||!si.length)return xe[un]--,si&&xe[un]<si.length?(Ct=!0,"break"):(de.splice(Ur,1),X[Ht.source].degree--,X[Ht.target].degree--,X[Ht.source].outDegree--,X[Ht.target].inDegree--,"continue");var ou=X[Ht.source].node[o],su=X[Ht.target].node[o],cs=!1;if(si.forEach(function(lu){var uu=y[lu.source].node,cu=y[lu.target].node;uu[o]===ou&&cu[o]===su&&(cs=!0),!n&&uu[o]===su&&cu[o]===ou&&(cs=!0)}),!cs)return xe[un]--,si&&xe[un]<si.length?(Ct=!0,"break"):(de.splice(Ur,1),X[Ht.source].degree--,X[Ht.target].degree--,X[Ht.source].outDegree--,X[Ht.target].inDegree--,"continue")},vt=Kt-1;vt>=0;vt--){var jt=zt(vt);if(jt==="break")break}if(Ct)return Je.splice(J,1),"continue";F.edges=de;var pr=(0,sO.default)(F,F.nodes[0].id,!1).length;if(Object.keys(pr).reverse().forEach(function(er){if(!(er===F.nodes[0].id||Ct)){if(pr[er]===1/0){var Ur=X[er].node[o];if(oe[Ur]--,oe[Ur]<w[Ur].length){Ct=!0;return}var Ht=F.nodes.indexOf(X[er].node);F.nodes.splice(Ht,1),X[er]=void 0;return}var un=p[er].node[o];if(!ne[un]||!ne[un].length||pr[er]>ne[un][ne[un].length-1]){var Ur=X[er].node[o];if(oe[Ur]--,oe[Ur]<w[Ur].length){Ct=!0;return}var Ht=F.nodes.indexOf(X[er].node);F.nodes.splice(Ht,1),X[er]=void 0}}}),Ct)return Je.splice(J,1),"continue";for(var Ir=!0,oi=0;Ir&&!Ct;){Ir=!1;var Or=n?X[be.id].degree<y[j.id].degree||X[be.id].inDegree<y[j.id].inDegree||X[be.id].outDegree<y[j.id].outDegree:X[be.id].degree<y[j.id].degree;if(Or){Ct=!0;break}if(oe[be[o]]<w[be[o]].length){Ct=!0;break}for(var En=F.nodes.length,Ba=En-1;Ba>=0;Ba--){var On=F.nodes[Ba],Qs=X[On.id].degree,vh=X[On.id].inDegree,ph=X[On.id].outDegree,Yn=On[o],us=hO(Q,Yn,y,w),au=us.minPatternNodeLabelDegree,gh=us.minPatternNodeLabelInDegree,mh=us.minPatternNodeLabelOutDegree,yh=n?Qs<au||vh<gh||ph<mh:Qs<au;if(yh){if(oe[On[o]]--,oe[On[o]]<w[On[o]].length){Ct=!0;break}F.nodes.splice(Ba,1),X[On.id]=void 0,Ir=!0}}if(Ct||!Ir&&oi!==0)break;Kt=de.length;for(var za=Kt-1;za>=0;za--){var Mn=de[za];if(!X[Mn.source]||!X[Mn.target]){de.splice(za,1);var Ga=Mn[s];if(xe[Ga]--,X[Mn.source]&&(X[Mn.source].degree--,X[Mn.source].outDegree--),X[Mn.target]&&(X[Mn.target].degree--,X[Mn.target].inDegree--),b[Ga]&&xe[Ga]<b[Ga].length){Ct=!0;break}Ir=!0}}oi++}if(Ct||Ct||F.nodes.length<t.nodes.length||de.length<t.edges.length)return Je.splice(J,1),"continue"},Re=me-1;Re>=0;Re--){var $e=Fe(Re);if($e==="break")break}for(var Ke=Je.length,at=function(J){var F=Je[J],be={};F.edges.forEach(function(de){var xe="".concat(de.source,"-").concat(de.target,"-").concat(de.label);be[xe]?be[xe]++:be[xe]=1});for(var oe=function(xe){var ke=Je[xe],Ge={};ke.edges.forEach(function(Lt){var Kt="".concat(Lt.source,"-").concat(Lt.target,"-").concat(Lt.label);Ge[Kt]?Ge[Kt]++:Ge[Kt]=1});var vt=!0;Object.keys(Ge).length!==Object.keys(be).length?vt=!1:Object.keys(be).forEach(function(Lt){Ge[Lt]!==be[Lt]&&(vt=!1)}),vt&&Je.splice(xe,1)},X=Ke-1;X>J;X--)oe(X);Ke=Je.length},Re=0;Re<=Ke-1;Re++)at(Re);return Je}}},kge=Tge;Xy.default=kge;(function(r){function e(b){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},e(b)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDI",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"breadthFirstSearch",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"detectCycle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"findAllPath",{enumerable:!0,get:function(){return u.findAllPath}}),Object.defineProperty(r,"findShortestPath",{enumerable:!0,get:function(){return u.findShortestPath}}),Object.defineProperty(r,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"getAdjMatrix",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"getDegree",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"getInDegree",{enumerable:!0,get:function(){return a.getInDegree}}),Object.defineProperty(r,"getNeighbors",{enumerable:!0,get:function(){return g.getNeighbors}}),Object.defineProperty(r,"getOutDegree",{enumerable:!0,get:function(){return a.getOutDegree}}),Object.defineProperty(r,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"louvain",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"minimumSpanningTree",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"pageRank",{enumerable:!0,get:function(){return v.default}});var t=w(wc),n=w(By),i=w(Hl),a=y(Rs),o=w(Po),s=w(Gy),l=w(ch),u=Uf,c=w(Hv),f=w(jy),h=w(Uy),d=w(Wy),v=w(Yy),p=w(Xy),g=Dn;function m(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,S=new WeakMap;return(m=function(M){return M?S:x})(b)}function y(b,x){if(b&&b.__esModule)return b;if(b===null||e(b)!=="object"&&typeof b!="function")return{default:b};var S=m(x);if(S&&S.has(b))return S.get(b);var _={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var E=M?Object.getOwnPropertyDescriptor(b,A):null;E&&(E.get||E.set)?Object.defineProperty(_,A,E):_[A]=b[A]}return _.default=b,S&&S.set(b,_),_}function w(b){return b&&b.__esModule?b:{default:b}}})(NB);function xS(r){"@babel/helpers - typeof";return xS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xS(r)}Object.defineProperty(Fy,"__esModule",{value:!0});Fy.default=void 0;var dw=Lge(NB),dO=Wl;function r6(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(r6=function(i){return i?t:e})(r)}function Lge(r,e){if(r&&r.__esModule)return r;if(r===null||xS(r)!=="object"&&typeof r!="function")return{default:r};var t=r6(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var o=i?Object.getOwnPropertyDescriptor(r,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=r[a]}return n.default=r,t&&t.set(r,n),n}var vw=typeof self<"u"?self:{};vw.onmessage=function(r){var e=r.data,t=e._algorithmType,n=e.data;if(t){if(typeof dw[t]=="function"){var i=dw[t].apply(dw,n);vw.postMessage({_algorithmType:dO.MESSAGE.SUCCESS,data:i});return}vw.postMessage({_algorithmType:dO.MESSAGE.FAILURE})}};var Ige=null;Fy.default=Ige;Object.defineProperty(Py,"__esModule",{value:!0});Py.default=void 0;var Oge=Wl,Nge=$ge(Fy);function $ge(r){return r&&r.__esModule?r:{default:r}}var Dge=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(i,a){var o=new Nge.default;o.postMessage({_algorithmType:e,data:t}),o.onmessage=function(s){var l=s.data,u=l.data,c=l._algorithmType;Oge.MESSAGE.SUCCESS===c?i(u):a(),o.terminate()}})}},Rge=Dge;Py.default=Rge;Object.defineProperty(Er,"__esModule",{value:!0});Er.pageRankAsync=Er.minimumSpanningTreeAsync=Er.louvainAsync=Er.labelPropagationAsync=Er.getOutDegreeAsync=Er.getNeighborsAsync=Er.getInDegreeAsync=Er.getDegreeAsync=Er.getAdjMatrixAsync=Er.floydWarshallAsync=Er.findShortestPathAsync=Er.findAllPathAsync=Er.dijkstraAsync=Er.detectCycleAsync=Er.detectAllUndirectedCycleAsync=Er.detectAllDirectedCycleAsync=Er.detectAllCyclesAsync=Er.connectedComponentAsync=Er.GADDIAsync=void 0;var Hn=Pge(Py),Vn=Wl;function Pge(r){return r&&r.__esModule?r:{default:r}}var Fge=function(e,t){return(0,Hn.default)(Vn.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};Er.getAdjMatrixAsync=Fge;var Bge=function(e,t){return(0,Hn.default)(Vn.ALGORITHM.connectedComponent).apply(void 0,[e,t])};Er.connectedComponentAsync=Bge;var zge=function(e){return(0,Hn.default)(Vn.ALGORITHM.getDegree)(e)};Er.getDegreeAsync=zge;var Gge=function(e,t){return(0,Hn.default)(Vn.ALGORITHM.getInDegree)(e,t)};Er.getInDegreeAsync=Gge;var jge=function(e,t){return(0,Hn.default)(Vn.ALGORITHM.getOutDegree)(e,t)};Er.getOutDegreeAsync=jge;var Uge=function(e){return(0,Hn.default)(Vn.ALGORITHM.detectCycle)(e)};Er.detectCycleAsync=Uge;var Wge=function(e){return(0,Hn.default)(Vn.ALGORITHM.detectAllCycles)(e)};Er.detectAllCyclesAsync=Wge;var Hge=function(e){return(0,Hn.default)(Vn.ALGORITHM.detectAllDirectedCycle)(e)};Er.detectAllDirectedCycleAsync=Hge;var Vge=function(e){return(0,Hn.default)(Vn.ALGORITHM.detectAllUndirectedCycle)(e)};Er.detectAllUndirectedCycleAsync=Vge;var Yge=function(e,t,n,i){return(0,Hn.default)(Vn.ALGORITHM.dijkstra).apply(void 0,[e,t,n,i])};Er.dijkstraAsync=Yge;var Xge=function(e,t,n,i){return(0,Hn.default)(Vn.ALGORITHM.findAllPath).apply(void 0,[e,t,n,i])};Er.findAllPathAsync=Xge;var Kge=function(e,t,n,i,a){return(0,Hn.default)(Vn.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,i,a])};Er.findShortestPathAsync=Kge;var qge=function(e,t){return(0,Hn.default)(Vn.ALGORITHM.floydWarshall).apply(void 0,[e,t])};Er.floydWarshallAsync=qge;var Zge=function(e,t,n,i){return i===void 0&&(i=1e3),(0,Hn.default)(Vn.ALGORITHM.labelPropagation)(e,t,n,i)};Er.labelPropagationAsync=Zge;var Qge=function(e,t,n,i){return(0,Hn.default)(Vn.ALGORITHM.louvain)(e,t,n,i)};Er.louvainAsync=Qge;var Jge=function(e,t,n){return(0,Hn.default)(Vn.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])};Er.minimumSpanningTreeAsync=Jge;var e0e=function(e,t,n){return(0,Hn.default)(Vn.ALGORITHM.pageRank).apply(void 0,[e,t,n])};Er.pageRankAsync=e0e;var t0e=function(e,t,n){return(0,Hn.default)(Vn.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])};Er.getNeighborsAsync=t0e;var r0e=function(e,t,n,i,a,o,s){return n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),(0,Hn.default)(Vn.ALGORITHM.GADDI).apply(void 0,[e,t,n,i,a,o,s])};Er.GADDIAsync=r0e;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDIAsync",{enumerable:!0,get:function(){return e.GADDIAsync}}),Object.defineProperty(r,"connectedComponentAsync",{enumerable:!0,get:function(){return e.connectedComponentAsync}}),r.default=void 0,Object.defineProperty(r,"detectAllCyclesAsync",{enumerable:!0,get:function(){return e.detectAllCyclesAsync}}),Object.defineProperty(r,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllDirectedCycleAsync}}),Object.defineProperty(r,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllUndirectedCycleAsync}}),Object.defineProperty(r,"detectCycleAsync",{enumerable:!0,get:function(){return e.detectCycleAsync}}),r.detectDirectedCycleAsync=void 0,Object.defineProperty(r,"dijkstraAsync",{enumerable:!0,get:function(){return e.dijkstraAsync}}),Object.defineProperty(r,"findAllPathAsync",{enumerable:!0,get:function(){return e.findAllPathAsync}}),Object.defineProperty(r,"findShortestPathAsync",{enumerable:!0,get:function(){return e.findShortestPathAsync}}),Object.defineProperty(r,"floydWarshallAsync",{enumerable:!0,get:function(){return e.floydWarshallAsync}}),Object.defineProperty(r,"getAdjMatrixAsync",{enumerable:!0,get:function(){return e.getAdjMatrixAsync}}),Object.defineProperty(r,"getDegreeAsync",{enumerable:!0,get:function(){return e.getDegreeAsync}}),Object.defineProperty(r,"getInDegreeAsync",{enumerable:!0,get:function(){return e.getInDegreeAsync}}),Object.defineProperty(r,"getNeighborsAsync",{enumerable:!0,get:function(){return e.getNeighborsAsync}}),Object.defineProperty(r,"getOutDegreeAsync",{enumerable:!0,get:function(){return e.getOutDegreeAsync}}),Object.defineProperty(r,"labelPropagationAsync",{enumerable:!0,get:function(){return e.labelPropagationAsync}}),Object.defineProperty(r,"louvainAsync",{enumerable:!0,get:function(){return e.louvainAsync}}),Object.defineProperty(r,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return e.minimumSpanningTreeAsync}}),Object.defineProperty(r,"pageRankAsync",{enumerable:!0,get:function(){return e.pageRankAsync}});var e=Er,t=e.detectCycleAsync;r.detectDirectedCycleAsync=t;var n={getAdjMatrixAsync:e.getAdjMatrixAsync,connectedComponentAsync:e.connectedComponentAsync,getDegreeAsync:e.getDegreeAsync,getInDegreeAsync:e.getInDegreeAsync,getOutDegreeAsync:e.getOutDegreeAsync,detectCycleAsync:e.detectCycleAsync,detectDirectedCycleAsync:t,detectAllCyclesAsync:e.detectAllCyclesAsync,detectAllDirectedCycleAsync:e.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:e.detectAllUndirectedCycleAsync,dijkstraAsync:e.dijkstraAsync,findAllPathAsync:e.findAllPathAsync,findShortestPathAsync:e.findShortestPathAsync,floydWarshallAsync:e.floydWarshallAsync,labelPropagationAsync:e.labelPropagationAsync,louvainAsync:e.louvainAsync,minimumSpanningTreeAsync:e.minimumSpanningTreeAsync,pageRankAsync:e.pageRankAsync,getNeighborsAsync:e.getNeighborsAsync,GADDIAsync:e.GADDIAsync};r.default=n})(T2);const n0e=co(T2),i0e=m9({__proto__:null,default:n0e},[T2]);function a0e(){return window?window.devicePixelRatio:1}function n6(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function Wu(r,e,t,n,i,a){return i>=r&&i<=r+t&&a>=e&&a<=e+n}function xv(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function o0e(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function vO(r,e){return r[0]===e[0]&&r[1]===e[1]}var s0e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,l0e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u0e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i6=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function a6(r,e){var t=r.match(i6);Pe(t,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function c0e(r,e,t){var n=s0e.exec(t),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,h=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,d=r.createLinearGradient(s.x,s.y,f,h);return a6(a,d),d}function f0e(r,e,t){var n=l0e.exec(t),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(i6);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,h=Math.sqrt(c*c+f*f)/2,d=r.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*h);return a6(s,d),d}function h0e(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var n,i,a=u0e.exec(t),o=a[1],s=a[2];function l(){n=r.createPattern(i,o),e.set("pattern",n),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function d0e(r,e,t){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if(rt(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return c0e(r,e,t);if(t[0]==="r")return f0e(r,e,t);if(t[0]==="p")return h0e(r,e,t)}return t}if(t instanceof CanvasPattern)return t}function v0e(r){var e=0,t=0,n=0,i=0;return Bt(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,[e,t,n,i]}function Og(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function SS(r,e){return Og(r)*Og(e)?(r[0]*e[0]+r[1]*e[1])/(Og(r)*Og(e)):1}function pO(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(SS(r,e))}function gO(r,e){var t=e[1],n=e[2],i=ky(Ly(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(f*f),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,m=t?p*-n*f/t:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/t,(h-m)/n],x=[(-1*f-g)/t,(-1*h-m)/n],S=pO([1,0],b),_=pO(b,x);return SS(b,x)<=-1&&(_=Math.PI),SS(b,x)>=1&&(_=0),o===0&&_>0&&(_=_-2*Math.PI),o===1&&_<0&&(_=_+2*Math.PI),{cx:y,cy:w,rx:vO(r,[u,c])?0:t,ry:vO(r,[u,c])?0:n,startAngle:S,endAngle:S+_,xRotation:i,arcFlag:a,sweepFlag:o}}var Mm=Math.sin,Cm=Math.cos,O2=Math.atan2,Ng=Math.PI;function o6(r,e,t,n,i,a,o){var s=e.stroke,l=e.lineWidth,u=t-i,c=n-a,f=O2(c,u),h=new R2({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Cm(Ng/6)+","+10*Mm(Ng/6)+" L0,0 L"+10*Cm(Ng/6)+",-"+10*Mm(Ng/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,f),r.set(o?"startArrowShape":"endArrowShape",h)}function s6(r,e,t,n,i,a,o){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,f=o?s:l,h=f.d,d=f.fill,v=f.stroke,p=f.lineWidth,g=zn(f,["d","fill","stroke","lineWidth"]),m=t-i,y=n-a,w=O2(y,m);h&&(i=i-Cm(w)*h,a=a-Mm(w)*h);var b=new R2({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:V(V({},g),{stroke:v||u,lineWidth:p||c,fill:d})});b.translate(i,a),b.rotateAtPoint(i,a,w),r.set(o?"startArrowShape":"endArrowShape",b)}function Zu(r,e,t,n,i){var a=O2(n-e,t-r);return{dx:Cm(a)*i,dy:Mm(a)*i}}function N2(r,e,t,n,i,a){typeof e.startArrow=="object"?s6(r,e,t,n,i,a,!0):e.startArrow?o6(r,e,t,n,i,a,!0):r.set("startArrowShape",null)}function $2(r,e,t,n,i,a){typeof e.endArrow=="object"?s6(r,e,t,n,i,a,!1):e.endArrow?o6(r,e,t,n,i,a,!1):r.set("startArrowShape",null)}var mO={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Hf(r,e){var t=e.attr();for(var n in t){var i=t[n],a=mO[n]?mO[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?Bt(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=d0e(r,e,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function _S(r,e,t){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(r,t):i.skipDraw()}}function p0e(r,e,t){var n=r.get("refreshElements");Pe(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?D2(e):ES(e,t)}function ES(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&D2(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&ES(n.cfg.children,e);else{var i=g0e(n,e);n.cfg.refresh=i,i&&n.isGroup()&&ES(n.cfg.children,e)}}}function l6(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&l6(t.cfg.children)}}function D2(r,e){for(var t=0;t<r.length;t++){var n=r[t];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&D2(n.get("children")))}}function g0e(r,e){var t=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&t&&xv(t,e);return n}function u6(r,e,t,n){var i=t.path,a=t.startArrow,o=t.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(c===0&&a&&a.d){var d=r.getStartTangent();u=Zu(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var v=i[c+1];if(v[0]==="Z"){var d=r.getEndTangent();u=Zu(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=r.getEndTangent();u=Zu(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var p=u.dx,g=u.dy;switch(h){case"M":e.moveTo(f[1]-p,f[2]-g),l=[f[1],f[2]];break;case"L":e.lineTo(f[1]-p,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":{var m=void 0;n?(m=n[c],m||(m=gO(s,f),n[c]=m)):m=gO(s,f);var y=m.cx,w=m.cy,b=m.rx,x=m.ry,S=m.startAngle,_=m.endAngle,M=m.xRotation,A=m.sweepFlag;if(e.ellipse)e.ellipse(y,w,b,x,M,S,_,1-A);else{var E=b>x?b:x,T=b>x?1:b/x,C=b>x?x/b:1;e.translate(y,w),e.rotate(M),e.scale(T,C),e.arc(0,0,E,S,_,1-A),e.scale(1/T,1/C),e.rotate(-M),e.translate(-y,-w)}break}case"Z":e.closePath();break}if(h==="Z")s=l;else{var k=f.length;s=[f[k-2],f[k-1]]}}}}function c6(r,e){var t=r.get("canvas");t&&(e==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}function m0e(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),n=t&&!!(t.width&&t.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?e=o0e(t,i):n?e=t:a&&(e=i)}return e}function y0e(r){if(!r.length)return null;var e=[],t=[],n=[],i=[];return Pe(r,function(a){var o=m0e(a);o&&(e.push(o.minX),t.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:Jo(e),minY:Jo(t),maxX:Qo(n),maxY:Qo(i)}}function b0e(r,e){return!r||!e||!xv(r,e)?null:{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}}var f6=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){c6(this,t)},e.prototype.getShapeBase=function(){return L_},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,n){n&&(t.save(),Hf(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,n=[],i=[];Pe(t,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(n.length){var o=Jo(n),s=Qo(n),l=Jo(i),u=Qo(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",xv(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(t.save(),Hf(t,this),this._applyClip(t,this.getClip()),_S(t,i,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(VF),ho=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return L_},e.prototype.getGroupBase=function(){return f6},e.prototype.onCanvasChange=function(t){c6(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),i=KF(t),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,n){n&&(t.save(),Hf(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.draw=function(t,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!xv(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Hf(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),i=xv(n,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Dt(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&i>0&&(!Dt(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(YF),w0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,h=n6(l,u,t,n);return a&&i?h<=c+f:a?h<=c:i?h>=c-f&&h<=c+f:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.r;t.beginPath(),t.arc(i,a,o,0,Math.PI*2,!1),t.closePath()},e}(ho);function $g(r,e,t,n){return r/(t*t)+e/(n*n)}var x0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,h=s.ry,d=(t-u)*(t-u),v=(n-c)*(n-c);return a&&i?$g(d,v,f+l,h+l)<=1:a?$g(d,v,f,h)<=1:i?$g(d,v,f-l,h-l)>=1&&$g(d,v,f+l,h+l)<=1:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(i,a),t.scale(u,c),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},e}(ho);function yO(r){return r instanceof HTMLElement&&rt(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var S0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var n=this,i=this.attrs;if(rt(t)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):yO(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="img"&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,c=n.swidth,f=n.sheight,h=n.img;(h instanceof Image||yO(h))&&(!Dt(l)&&!Dt(u)&&!Dt(c)&&!Dt(f)?t.drawImage(h,l,u,c,f,i,a,o,s):t.drawImage(h,i,a,o,s))},e}(ho);function Ll(r,e,t,n,i,a,o){var s=Math.min(r,t),l=Math.max(r,t),u=Math.min(e,n),c=Math.max(e,n),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?ti.pointToLine(r,e,t,n,a,o)<=i/2:!1}var _0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&N2(this,t,a,o,n,i),l&&$2(this,t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return Ll(l,u,c,f,o,t,n)},e.prototype.createPath=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=Zu(i,a,o,s,n.startArrow.d)),u&&u.d&&(f=Zu(i,a,o,s,n.endArrow.d)),t.beginPath(),t.moveTo(i+c.dx,a+c.dy),t.lineTo(o-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return ti.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return ti.pointAt(i,a,o,s,t)},e}(ho),E0e={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},"triangle-down":function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}},M0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return Dt(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;if(tn(a))s=a,l=s(n,i,o),l=lB(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},e.prototype.createPath=function(t){var n=this._getPath(),i=this.get("paramsCache");u6(this,t,{path:n},i)},e.Symbols=E0e,e}(ho);function h6(r,e,t){var n=iB();return r.createPath(n),n.isPointInPath(e,t)}var C0e=1e-6;function pw(r){return Math.abs(r)<C0e?0:r<0?-1:1}function A0e(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function d6(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(A0e(o,s,[e,t]))return!0;pw(o[1]-t)>0!=pw(s[1]-t)>0&&pw(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function fd(r,e,t,n,i,a,o,s){var l=(Math.atan2(s-e,o-r)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:r+t*Math.cos(l),y:e+t*Math.sin(l)};return n6(u.x,u.y,o,s)<=a/2}var T0e=Pa;function k0e(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function L0e(r,e,t,n,i){for(var a=!1,o=e/2,s=0;s<r.length;s++){var l=r[s],u=l.currentPoint,c=l.params,f=l.prePoint,h=l.box;if(!(h&&!Wu(h.x-o,h.y-o,h.width+e,h.height+e,t,n))){switch(l.command){case"L":case"Z":a=Ll(f[0],f[1],u[0],u[1],e,t,n);break;case"Q":var d=eB.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],t,n);a=d<=e/2;break;case"C":var v=Nd.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],t,n,i);a=v<=e/2;break;case"A":var p=l.arcParams,g=p.cx,m=p.cy,y=p.rx,w=p.ry,b=p.startAngle,x=p.endAngle,S=p.xRotation,_=[t,n,1],M=y>w?y:w,A=y>w?1:y/w,E=y>w?w/y:1,T=T0e(null,[["t",-g,-m],["r",-S],["s",1/A,1/E]]);Oy(_,_,T),a=fd(0,0,M,b,x,e,_[0],_[1]);break}if(a)break}}return a}function I0e(r){for(var e=r.length,t=[],n=[],i=[],a=0;a<e;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:t,polylines:n}}const Dg=V({hasArc:k0e,extractPolygons:I0e,isPointInStroke:L0e},Pfe);function bO(r,e,t){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=d6(a,e,t),n)break}return n}var R2=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=lB(t);var n=Dg.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=uB(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),n=t.startArrow,i=t.endArrow;if(n){var a=this.getStartTangent();N2(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();$2(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=Dg.isPointInStroke(s,o,t,n,c)}if(!u&&a)if(l)u=h6(this,t,n);else{var f=this.attr("path"),h=Dg.extractPolygons(f);u=bO(h.polygons,t,n)||bO(h.polylines,t,n)}return u},e.prototype.createPath=function(t){var n=this.attr(),i=this.get("paramsCache");u6(this,t,n,i)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return Dt(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;Pe(n,function(c,f){t>=c[0]&&t<=c[1]&&(i=(t-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if(Dt(s)||Dt(a))return null;var l=s.length,u=o[a+1];return Nd.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Dg.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(u){if(Pe(u,function(c,f){s=u[f+1],l=c.length,s&&(t+=Nd.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}Pe(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=n/t,o=Nd.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/t,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),n;if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.getSegments(),n=t.length,i;if(n>1){var a=t[n-2].currentPoint,o=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(ho);function v6(r,e,t,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],u=r[o+1][0],c=r[o+1][1];if(Ll(s,l,u,c,e,t,n))return!0}if(i){var f=r[0],h=r[a-1];if(Ll(f[0],f[1],h[0],h[1],e,t,n))return!0}return!1}var O0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=v6(s,o,t,n,!0)),!l&&a&&(l=d6(s,t,n)),l},e.prototype.createPath=function(t){var n=this.attr(),i=n.points;if(!(i.length<2)){t.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ho),N0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&N2(this,t,i[1][0],i[1][1],l,u),o&&$2(this,t,i[s-2][0],i[s-2][1],c,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return v6(s,o,t,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var h=Zu(l,u,i[1][0],i[1][1],a.d);l+=h.dx,u+=h.dy}if(o&&o.d){var h=Zu(i[s-2][0],i[s-2][1],c,f,o.d);c-=h.dx,f-=h.dy}t.beginPath(),t.moveTo(l,u);for(var d=0;d<s-1;d++){var v=i[d];t.lineTo(v[0],v[1])}t.lineTo(c,f)}},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return Dt(n)?(this.set("totalLength",nB.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Pe(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),ti.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Pe(t,function(l,u){t[u+1]&&(o=[],o[0]=i/n,s=ti.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(ho);function $0e(r,e,t,n,i,a,o){var s=i/2;return Wu(r-s,e-s,t,i,a,o)||Wu(r+t-s,e-s,i,n,a,o)||Wu(r+s,e+n-s,t,i,a,o)||Wu(r-s,e+s,i,n,a,o)}function D0e(r,e,t,n,i,a,o,s){return Ll(r+i,e,r+t-i,e,a,o,s)||Ll(r+t,e+i,r+t,e+n-i,a,o,s)||Ll(r+t-i,e+n,r+i,e+n,a,o,s)||Ll(r,e+n-i,r,e+i,a,o,s)||fd(r+t-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||fd(r+t-i,e+n-i,i,0,.5*Math.PI,a,o,s)||fd(r+i,e+n-i,i,.5*Math.PI,Math.PI,a,o,s)||fd(r+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var R0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,h=s.radius;if(h){var v=!1;return i&&(v=D0e(l,u,c,f,h,o,t,n)),!v&&a&&(v=h6(this,t,n)),v}else{var d=o/2;if(a&&i)return Wu(l-d,u-d,c+d,f+d,t,n);if(a)return Wu(l,u,c,f,t,n);if(i)return $0e(l,u,c,f,o,t,n)}},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(t.beginPath(),l===0)t.rect(i,a,o,s);else{var u=v0e(l),c=u[0],f=u[1],h=u[2],d=u[3];t.moveTo(i+c,a),t.lineTo(i+o-f,a),f!==0&&t.arc(i+o-f,a+f,f,-Math.PI/2,0),t.lineTo(i+o,a+s-h),h!==0&&t.arc(i+o-h,a+s-h,h,0,Math.PI/2),t.lineTo(i+d,a+s),d!==0&&t.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),t.lineTo(i,a+c),c!==0&&t.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(ho),P0e=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=oB(t)},e.prototype._setText=function(t){var n=null;rt(t)&&t.indexOf(`
`)!==-1&&(n=t.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,i=t.fontSize*1;return n?n-i:i*.14},e.prototype._drawTextArr=function(t,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=aB(a.text,a.fontSize,a.lineHeight),h;Pe(n,function(d,v){h=l+v*(c+u)-f+u,o==="middle"&&(h+=f-u-(f-u)/2),o==="top"&&(h+=f-u),Dt(d)||(i?t.fillText(d,s,h):t.strokeText(d,s,h))})},e.prototype._drawText=function(t,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,n);else{var l=i.text;Dt(l)||(n?t.fillText(l,a,o):t.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Dt(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!Dt(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ho);function F0e(r,e){if(e){var t=TF(e);return ju(t,r)}return r}function p6(r,e,t){var n=r.getTotalMatrix();if(n){var i=F0e([e,t,1],n),a=i[0],o=i[1];return[a,o]}return[e,t]}function wO(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!Zx(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=p6(r,e,t),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function g6(r,e,t){if(!wO(r,e,t))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=g6(s,e,t);else if(wO(s,e,t)){var l=s,u=p6(s,e,t),c=u[0],f=u[1];l.isInShape(c,f)&&(n=s)}if(n)break}return n}var Ts=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return L_},e.prototype.getGroupBase=function(){return f6},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||a0e();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},e.prototype.setDOMSize=function(t,n){r.prototype.setDOMSize.call(this,t,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(t,n){var i;return this.get("quickHit")?i=g6(this,t,n):i=r.prototype.getShape.call(this,t,n,null),i},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),n=this.getViewRange(),i;if(t.length&&t[0]===this)i=n;else if(i=y0e(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=b0e(i,n))}return i},e.prototype.refreshElement=function(t){var n=this.get("refreshElements");n.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(g5(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),i=this.getChildren();t.clearRect(0,0,n.width,n.height),Hf(t,this),_S(t,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Hf(t,this),p0e(this,i,a),_S(t,i,a),t.restore()):n.length&&l6(n),Pe(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,n=this.get("drawFrame"),i=this.get("drawFrameCallback");n||(n=p5(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),i&&i()}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(HF),MS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},$r={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Da(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function m6(r){var e=MS[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var n=Da(e);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(n)}return n}function y6(r,e){var t=r.get("el"),n=w5(t.children).sort(e),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),t.appendChild(i)}function B0e(r,e){var t=r.parentNode,n=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[e],a=n.indexOf(r);if(i){if(a>e)t.insertBefore(r,i);else if(a<e){var o=n[e+1];o?t.insertBefore(r,o):t.appendChild(r)}}else t.appendChild(r)}function z0e(r,e){var t=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)t.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),t.setAttribute("filter","url(#"+a+")")}}function Xv(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);n=n.join(","),n.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function Sv(r,e){var t=r.getClip(),n=r.get("el");if(!t)n.removeAttribute("clip-path");else if(t&&!n.hasAttribute("clip-path")){m6(t),t.createPath(e);var i=e.addClip(t);n.setAttribute("clip-path","url(#"+i+")")}}function b6(r,e){e.forEach(function(t){t.draw(r)})}function w6(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var n=t.get("context"),i=r.getParent(),a=i?i.getChildren():[t],o=r.get("el");if(e==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")B0e(o,a.indexOf(r));else if(e==="sort"){var c=r.get("children");c&&c.length&&y6(r,function(f,h){return c.indexOf(f)-c.indexOf(h)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Xv(r):e==="clip"?Sv(r,n):e==="attr"||e==="add"&&r.draw(n)}}var x6=function(r){ir(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Da("g");this.set("el",t);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,t)}},e.prototype.onCanvasChange=function(t){w6(this,t)},e.prototype.getShapeBase=function(){return I_},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),Sv(this,t),this.createPath(t),n.length&&b6(t,n))},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){$r[s]&&a.setAttribute($r[s],o)}),Xv(this)},e}(VF),Fa=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,t)}},e.prototype.getShapeBase=function(){return I_},e.prototype.getGroupBase=function(){return x6},e.prototype.onCanvasChange=function(t){w6(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),n=null;if(t)n=t.getBBox();else{var i=KF(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),c=u/2,f=a-c,h=o-c,d=a+s+c,v=o+l+c;return{x:f,y:h,minX:f,minY:h,maxX:d,maxY:v,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),n=t.fill,i=t.fillStyle;return(n||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),n=t.stroke,i=t.strokeStyle;return(n||i)&&this.canStroke},e.prototype.draw=function(t,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||m6(this),Sv(this,t),this.createPath(t,n),this.shadow(t,n),this.strokeAndFill(t,n),this.transform(n))},e.prototype.createPath=function(t,n){},e.prototype.strokeAndFill=function(t,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(t,"fill",a):"fillStyle"in i&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),u&&h.setAttribute($r.fillOpacity,u)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),c&&h.setAttribute($r.strokeOpacity,c),f&&h.setAttribute($r.lineWidth,f))},e.prototype._setColor=function(t,n,i){var a=this.get("el");if(!i){a.setAttribute($r[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=t.find("gradient",i);o||(o=t.addGradient(i)),a.setAttribute($r[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=t.find("pattern",i);o||(o=t.addPattern(i)),a.setAttribute($r[n],"url(#"+o+")")}else a.setAttribute($r[n],i)},e.prototype.shadow=function(t,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&z0e(this,t)},e.prototype.transform=function(t){var n=this.attr(),i=(t||n).matrix;i&&Xv(this)},e.prototype.isInShape=function(t,n){return this.isPointInPath(t,n)},e.prototype.isPointInPath=function(t,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var t=this.attrs,n=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?n+i:0},e}(YF),G0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):$r[s]&&a.setAttribute($r[s],o)})},e}(Fa),j0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");if(Pe(n||i,function(u,c){$r[c]&&a.setAttribute($r[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(Fa),U0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):$r[s]&&a.setAttribute($r[s],o)})},e}(Fa),W0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");Pe(n||a,function(s,l){l==="img"?i._setImage(a.img):$r[l]&&o.setAttribute($r[l],s)})},e.prototype.setAttr=function(t,n){this.attrs[t]=n,t==="img"&&this._setImage(n)},e.prototype._setImage=function(t){var n=this.attr(),i=this.get("el");if(rt(t))i.setAttribute("href",t);else if(t instanceof window.Image)n.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&rt(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),n.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",a.toDataURL())}},e}(Fa),H0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=ni(o)?t.addArrow(i,$r[s]):t.getDefaultArrow(i,$r[s]);a.setAttribute($r[s],"url(#"+l+")")}else a.removeAttribute($r[s]);else $r[s]&&a.setAttribute($r[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return ti.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return ti.pointAt(i,a,o,s,t)},e}(Fa),Rg={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["z"]]},triangleDown:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}};const xO={get:function(r){return Rg[r]},register:function(r,e){Rg[r]=e},remove:function(r){delete Rg[r]},getAll:function(){return Rg}};var V0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return Bt(t)?t.map(function(n){return n.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return tn(o)?s=o:s=xO.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=xO,e}(Fa),Y0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");Pe(n||a,function(s,l){if(l==="path"&&Bt(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=ni(s)?t.addArrow(a,$r[l]):t.getDefaultArrow(a,$r[l]);o.setAttribute($r[l],"url(#"+u+")")}else o.removeAttribute($r[l]);else $r[l]&&o.setAttribute($r[l],s)})},e.prototype._formatPath=function(t){var n=t.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(t*i):null;return a?{x:a.x,y:a.y}:null},e}(Fa),X0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){s==="points"&&Bt(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):$r[s]&&a.setAttribute($r[s],o)})},e}(Fa),K0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");Pe(n||i,function(o,s){s==="points"&&Bt(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):$r[s]&&a.setAttribute($r[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return Dt(n)?(this.set("totalLength",nB.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Pe(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),ti.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Pe(t,function(l,u){t[u+1]&&(o=[],o[0]=i/n,s=ti.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(Fa);function q0e(r){var e=0,t=0,n=0,i=0;return Bt(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var Z0e=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];Pe(n||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&$r[c]&&o.setAttribute($r[c],u)})},e.prototype._assembleRect=function(t){var n=t.x,i=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=q0e(s);Bt(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},e}(Fa),SO=.3,Q0e={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},J0e={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},eme={left:"left",start:"left",center:"middle",right:"end",end:"end"},tme=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return V(V({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),Pe(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Xv(i):$r[l]&&o.setAttribute($r[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=AF();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",J0e[i]||"alphabetic"):t.setAttribute("alignment-baseline",Q0e[i]||"baseline"),t.setAttribute("text-anchor",eme[a]||"left")},e.prototype._setText=function(t){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!t)n.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),u=l.length-1,c="";Pe(l,function(f,h){h===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+SO)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-SO)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=t},e}(Fa),rme=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,nme=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ime=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function S6(r){var e=r.match(ime);if(!e)return"";var t="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),Pe(e,function(n){n=n.split(":"),t+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),t}function ame(r,e){var t=rme.exec(r),n=ky(Ly(parseFloat(t[1])),Math.PI*2),i=t[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=S6(i)}function ome(r,e){var t=nme.exec(r),n=parseFloat(t[1]),i=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=S6(o)}var sme=function(){function r(e){this.cfg={};var t=null,n=es("gradient_");return e.toLowerCase()[0]==="l"?(t=Da("linearGradient"),ame(e,t)):(t=Da("radialGradient"),ome(e,t)),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),lme={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},ume={x:"-40%",y:"-40%",width:"200%",height:"200%"},cme=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=Da("filter");return Pe(ume,function(n,i){t.setAttribute(i,n)}),this.el=t,this.id=es("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,i=this.cfg;return Pe(Object.keys(i),function(a){if(i[a]!==t[a])return n=!1,!1}),n},r.prototype.update=function(e,t){var n=this.cfg;return n[lme[e]]=t,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(e,t){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=n},r}(),_O=function(){function r(e,t){this.cfg={};var n=Da("marker"),i=es("marker_");n.setAttribute("id",i);var a=Da("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,i=this.cfg.path,a=this.cfg.d;Bt(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",i),n.appendChild(t),a&&n.setAttribute("refX",""+a/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}(),fme=function(){function r(e){this.type="clip",this.cfg={};var t=Da("clipPath");this.el=t,this.id=es("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}(),hme=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,dme=function(){function r(e){this.cfg={};var t=Da("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=Da("image");t.appendChild(n);var i=es("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=e;var a=hme.exec(e),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),vme=function(){function r(e){var t=Da("defs"),n=es("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(e,t)){i=n[a].id;break}return i},r.prototype.findById=function(e){for(var t=this.children,n=null,i=0;i<t.length;i++)if(t[i].id===e){n=t[i];break}return n},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new _O(e,t);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(e){var t=new sme(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var n=new _O(e,t);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(e){var t=new cme(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new dme(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new fme(e);return this.el.appendChild(t.el),this.add(t),t.id},r}(),Dd=function(r){ir(e,r);function e(t){return r.call(this,V(V({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return I_},e.prototype.getGroupBase=function(){return x6},e.prototype.getShape=function(t,n,i){var a=i.target||i.srcElement;if(!MS[a.tagName]){for(var o=a.parentNode;o&&!MS[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Da("svg"),n=new vme(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",n),t},e.prototype.onCanvasChange=function(t){var n=this.get("context"),i=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&y6(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else t==="matrix"?Xv(this):t==="clip"?Sv(this,n):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),n=this.getChildren();Sv(this,t),n.length&&b6(t,n)},e}(HF);function Pg(r,e,t){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var hd,gw,_6,CS;function pme(){hd=document.createElement("table"),gw=document.createElement("tr"),_6=/^\s*<(\w+|!)[^>]*>/,CS={tr:document.createElement("tbody"),tbody:hd,thead:hd,tfoot:hd,td:gw,th:gw,"*":document.createElement("div")}}function Zr(r){hd||pme();var e=_6.test(r)&&RegExp.$1;(!e||!(e in CS))&&(e="*");var t=CS[e];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function mr(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}var E6={exports:{}},gme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},M6={exports:{}},mme=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},yme=mme,bme=Array.prototype.concat,wme=Array.prototype.slice,EO=M6.exports=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];yme(a)?t=bme.call(t,wme.call(a)):t.push(a)}return t};EO.wrap=function(r){return function(){return r(EO(arguments))}};var xme=M6.exports,Rd=gme,Kv=xme,C6=Object.hasOwnProperty,A6=Object.create(null);for(var mw in Rd)C6.call(Rd,mw)&&(A6[Rd[mw]]=mw);var ia=E6.exports={to:{},get:{}};ia.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=ia.get.hsl(r),n="hsl";break;case"hwb":t=ia.get.hwb(r),n="hwb";break;default:t=ia.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};ia.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,o=[0,0,0,1],s,l,u;if(s=r.match(t)){for(u=s[2],s=s[1],l=0;l<3;l++){var c=l*2;o[l]=parseInt(s.slice(c,c+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(s=r.match(e)){for(s=s[1],u=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(s=r.match(n)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=r.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=r.match(a))?s[1]==="transparent"?[0,0,0,0]:C6.call(Rd,s[1])?(o=Rd[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Fl(o[l],0,255);return o[3]=Fl(o[3],0,1),o};ia.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Fl(parseFloat(t[2]),0,100),o=Fl(parseFloat(t[3]),0,100),s=Fl(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};ia.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Fl(parseFloat(t[2]),0,100),o=Fl(parseFloat(t[3]),0,100),s=Fl(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};ia.to.hex=function(){var r=Kv(arguments);return"#"+Fg(r[0])+Fg(r[1])+Fg(r[2])+(r[3]<1?Fg(Math.round(r[3]*255)):"")};ia.to.rgb=function(){var r=Kv(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};ia.to.rgb.percent=function(){var r=Kv(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};ia.to.hsl=function(){var r=Kv(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};ia.to.hwb=function(){var r=Kv(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};ia.to.keyword=function(r){return A6[r.slice(0,3)]};function Fl(r,e,t){return Math.min(Math.max(e,r),t)}function Fg(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}var Sme=E6.exports,T6={exports:{}},_me={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Qu=_me,k6={};for(var yw in Qu)Qu.hasOwnProperty(yw)&&(k6[Qu[yw]]=yw);var Xt=T6.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var ki in Xt)if(Xt.hasOwnProperty(ki)){if(!("channels"in Xt[ki]))throw new Error("missing channels property: "+ki);if(!("labels"in Xt[ki]))throw new Error("missing channel labels property: "+ki);if(Xt[ki].labels.length!==Xt[ki].channels)throw new Error("channel and label counts mismatch: "+ki);var Eme=Xt[ki].channels,Mme=Xt[ki].labels;delete Xt[ki].channels,delete Xt[ki].labels,Object.defineProperty(Xt[ki],"channels",{value:Eme}),Object.defineProperty(Xt[ki],"labels",{value:Mme})}Xt.rgb.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),a=Math.max(e,t,n),o=a-i,s,l,u;return a===i?s=0:e===a?s=(t-n)/o:t===a?s=2+(n-e)/o:n===a&&(s=4+(e-t)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=o/(a+i):l=o/(2-a-i),[s,l*100,u*100]};Xt.rgb.hsv=function(r){var e,t,n,i,a,o=r[0]/255,s=r[1]/255,l=r[2]/255,u=Math.max(o,s,l),c=u-Math.min(o,s,l),f=function(h){return(u-h)/6/c+1/2};return c===0?i=a=0:(a=c/u,e=f(o),t=f(s),n=f(l),o===u?i=n-t:s===u?i=1/3+e-n:l===u&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,a*100,u*100]};Xt.rgb.hwb=function(r){var e=r[0],t=r[1],n=r[2],i=Xt.rgb.hsl(r)[0],a=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[i,a*100,n*100]};Xt.rgb.cmyk=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i,a,o,s;return s=Math.min(1-e,1-t,1-n),i=(1-e-s)/(1-s)||0,a=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,[i*100,a*100,o*100,s*100]};function Cme(r,e){return Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2)}Xt.rgb.keyword=function(r){var e=k6[r];if(e)return e;var t=1/0,n;for(var i in Qu)if(Qu.hasOwnProperty(i)){var a=Qu[i],o=Cme(r,a);o<t&&(t=o,n=i)}return n};Xt.keyword.rgb=function(r){return Qu[r]};Xt.rgb.xyz=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+t*.3576+n*.1805,a=e*.2126+t*.7152+n*.0722,o=e*.0193+t*.1192+n*.9505;return[i*100,a*100,o*100]};Xt.rgb.lab=function(r){var e=Xt.rgb.xyz(r),t=e[0],n=e[1],i=e[2],a,o,s;return t/=95.047,n/=100,i/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=116*n-16,o=500*(t-n),s=200*(n-i),[a,o,s]};Xt.hsl.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,a,o,s,l;if(t===0)return l=n*255,[l,l,l];n<.5?a=n*(1+t):a=n+t-n*t,i=2*n-a,s=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(a-i)*6*o:2*o<1?l=a:3*o<2?l=i+(a-i)*(2/3-o)*6:l=i,s[u]=l*255;return s};Xt.hsl.hsv=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=t,a=Math.max(n,.01),o,s;return n*=2,t*=n<=1?n:2-n,i*=a<=1?a:2-a,s=(n+t)/2,o=n===0?2*i/(a+i):2*t/(n+t),[e,o*100,s*100]};Xt.hsv.rgb=function(r){var e=r[0]/60,t=r[1]/100,n=r[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*n*(1-t),s=255*n*(1-t*a),l=255*n*(1-t*(1-a));switch(n*=255,i){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}};Xt.hsv.hsl=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=Math.max(n,.01),a,o,s;return s=(2-t)*n,a=(2-t)*i,o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};Xt.hwb.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i=t+n,a,o,s,l;i>1&&(t/=i,n/=i),a=Math.floor(6*e),o=1-n,s=6*e-a,a&1&&(s=1-s),l=t+s*(o-t);var u,c,f;switch(a){default:case 6:case 0:u=o,c=l,f=t;break;case 1:u=l,c=o,f=t;break;case 2:u=t,c=o,f=l;break;case 3:u=t,c=l,f=o;break;case 4:u=l,c=t,f=o;break;case 5:u=o,c=t,f=l;break}return[u*255,c*255,f*255]};Xt.cmyk.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i=r[3]/100,a,o,s;return a=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),s=1-Math.min(1,n*(1-i)+i),[a*255,o*255,s*255]};Xt.xyz.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i,a,o;return i=e*3.2406+t*-1.5372+n*-.4986,a=e*-.9689+t*1.8758+n*.0415,o=e*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[i*255,a*255,o*255]};Xt.xyz.lab=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return e/=95.047,t/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*t-16,a=500*(e-t),o=200*(t-n),[i,a,o]};Xt.lab.xyz=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;a=(e+16)/116,i=t/500+a,o=a-n/200;var s=Math.pow(a,3),l=Math.pow(i,3),u=Math.pow(o,3);return a=s>.008856?s:(a-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,a*=100,o*=108.883,[i,a,o]};Xt.lab.lch=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return i=Math.atan2(n,t),a=i*360/2/Math.PI,a<0&&(a+=360),o=Math.sqrt(t*t+n*n),[e,o,a]};Xt.lch.lab=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return o=n/360*2*Math.PI,i=t*Math.cos(o),a=t*Math.sin(o),[e,i,a]};Xt.rgb.ansi16=function(r){var e=r[0],t=r[1],n=r[2],i=1 in arguments?arguments[1]:Xt.rgb.hsv(r)[2];if(i=Math.round(i/50),i===0)return 30;var a=30+(Math.round(n/255)<<2|Math.round(t/255)<<1|Math.round(e/255));return i===2&&(a+=60),a};Xt.hsv.ansi16=function(r){return Xt.rgb.ansi16(Xt.hsv.rgb(r),r[2])};Xt.rgb.ansi256=function(r){var e=r[0],t=r[1],n=r[2];if(e===t&&t===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5);return i};Xt.ansi16.rgb=function(r){var e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var t=(~~(r>50)+1)*.5,n=(e&1)*t*255,i=(e>>1&1)*t*255,a=(e>>2&1)*t*255;return[n,i,a]};Xt.ansi256.rgb=function(r){if(r>=232){var e=(r-232)*10+8;return[e,e,e]}r-=16;var t,n=Math.floor(r/36)/5*255,i=Math.floor((t=r%36)/6)/5*255,a=t%6/5*255;return[n,i,a]};Xt.rgb.hex=function(r){var e=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t};Xt.hex.rgb=function(r){var e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var t=e[0];e[0].length===3&&(t=t.split("").map(function(s){return s+s}).join(""));var n=parseInt(t,16),i=n>>16&255,a=n>>8&255,o=n&255;return[i,a,o]};Xt.rgb.hcg=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.max(Math.max(e,t),n),a=Math.min(Math.min(e,t),n),o=i-a,s,l;return o<1?s=a/(1-o):s=0,o<=0?l=0:i===e?l=(t-n)/o%6:i===t?l=2+(n-e)/o:l=4+(e-t)/o+4,l/=6,l%=1,[l*360,o*100,s*100]};Xt.hsl.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1,i=0;return t<.5?n=2*e*t:n=2*e*(1-t),n<1&&(i=(t-.5*n)/(1-n)),[r[0],n*100,i*100]};Xt.hsv.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=e*t,i=0;return n<1&&(i=(t-n)/(1-n)),[r[0],n*100,i*100]};Xt.hcg.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];var i=[0,0,0],a=e%1*6,o=a%1,s=1-o,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-t)*n,[(t*i[0]+l)*255,(t*i[1]+l)*255,(t*i[2]+l)*255]};Xt.hcg.hsv=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e),i=0;return n>0&&(i=e/n),[r[0],i*100,n*100]};Xt.hcg.hsl=function(r){var e=r[1]/100,t=r[2]/100,n=t*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[r[0],i*100,n*100]};Xt.hcg.hwb=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};Xt.hwb.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1-t,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[r[0],i*100,a*100]};Xt.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};Xt.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};Xt.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};Xt.gray.hsl=Xt.gray.hsv=function(r){return[0,0,r[0]]};Xt.gray.hwb=function(r){return[0,100,r[0]]};Xt.gray.cmyk=function(r){return[0,0,0,r[0]]};Xt.gray.lab=function(r){return[r[0],0,0]};Xt.gray.hex=function(r){var e=Math.round(r[0]/100*255)&255,t=(e<<16)+(e<<8)+e,n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};Xt.rgb.gray=function(r){var e=(r[0]+r[1]+r[2])/3;return[e/255*100]};var L6=T6.exports,Am=L6;function Ame(){for(var r={},e=Object.keys(Am),t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function Tme(r){var e=Ame(),t=[r];for(e[r].distance=0;t.length;)for(var n=t.pop(),i=Object.keys(Am[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=e[s];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,t.unshift(s))}return e}function kme(r,e){return function(t){return e(r(t))}}function Lme(r,e){for(var t=[e[r].parent,r],n=Am[e[r].parent][r],i=e[r].parent;e[i].parent;)t.unshift(e[i].parent),n=kme(Am[e[i].parent][i],n),i=e[i].parent;return n.conversion=t,n}var Ime=function(r){for(var e=Tme(r),t={},n=Object.keys(e),i=n.length,a=0;a<i;a++){var o=n[a],s=e[o];s.parent!==null&&(t[o]=Lme(o,e))}return t},AS=L6,Ome=Ime,nf={},Nme=Object.keys(AS);function $me(r){var e=function(t){return t==null?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function Dme(r){var e=function(t){if(t==null)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=r(t);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in r&&(e.conversion=r.conversion),e}Nme.forEach(function(r){nf[r]={},Object.defineProperty(nf[r],"channels",{value:AS[r].channels}),Object.defineProperty(nf[r],"labels",{value:AS[r].labels});var e=Ome(r),t=Object.keys(e);t.forEach(function(n){var i=e[n];nf[r][n]=Dme(i),nf[r][n].raw=$me(i)})});var Rme=nf,dd=Sme,Ji=Rme,P2=[].slice,I6=["keyword","gray","hex"],TS={};Object.keys(Ji).forEach(function(r){TS[P2.call(Ji[r].labels).sort().join("")]=r});var Tm={};function ui(r,e){if(!(this instanceof ui))return new ui(r,e);if(e&&e in I6&&(e=null),e&&!(e in Ji))throw new Error("Unknown model: "+e);var t,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof ui)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var i=dd.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=Ji[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length){this.model=e||"rgb",n=Ji[this.model].channels;var a=P2.call(r,0,n);this.color=kS(a,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var s=o.sort().join("");if(!(s in TS))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=TS[s];var l=Ji[this.model].labels,u=[];for(t=0;t<l.length;t++)u.push(r[l[t]]);this.color=kS(u)}if(Tm[this.model])for(n=Ji[this.model].channels,t=0;t<n;t++){var c=Tm[this.model][t];c&&(this.color[t]=c(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ui.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var e=this.model in dd.to?this:this.rgb();e=e.round(typeof r=="number"?r:1);var t=e.valpha===1?e.color:e.color.concat(this.valpha);return dd.to[e.model](t)},percentString:function(r){var e=this.rgb().round(typeof r=="number"?r:1),t=e.valpha===1?e.color:e.color.concat(this.valpha);return dd.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},e=Ji[this.model].channels,t=Ji[this.model].labels,n=0;n<e;n++)r[t[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new ui(this.color.map(Fme(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new ui(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:yn("rgb",0,Pn(255)),green:yn("rgb",1,Pn(255)),blue:yn("rgb",2,Pn(255)),hue:yn(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:yn("hsl",1,Pn(100)),lightness:yn("hsl",2,Pn(100)),saturationv:yn("hsv",1,Pn(100)),value:yn("hsv",2,Pn(100)),chroma:yn("hcg",1,Pn(100)),gray:yn("hcg",2,Pn(100)),white:yn("hwb",1,Pn(100)),wblack:yn("hwb",2,Pn(100)),cyan:yn("cmyk",0,Pn(100)),magenta:yn("cmyk",1,Pn(100)),yellow:yn("cmyk",2,Pn(100)),black:yn("cmyk",3,Pn(100)),x:yn("xyz",0,Pn(100)),y:yn("xyz",1,Pn(100)),z:yn("xyz",2,Pn(100)),l:yn("lab",0,Pn(100)),a:yn("lab",1),b:yn("lab",2),keyword:function(r){return arguments.length?new ui(r):Ji[this.model].keyword(this.color)},hex:function(r){return arguments.length?new ui(r):dd.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,e=[],t=0;t<r.length;t++){var n=r[t]/255;e[t]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(r){var e=this.luminosity(),t=r.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(r){var e=this.contrast(r);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,e=(r[0]*299+r[1]*587+r[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),e=0;e<3;e++)r.color[e]=255-r.color[e];return r},lighten:function(r){var e=this.hsl();return e.color[2]+=e.color[2]*r,e},darken:function(r){var e=this.hsl();return e.color[2]-=e.color[2]*r,e},saturate:function(r){var e=this.hsl();return e.color[1]+=e.color[1]*r,e},desaturate:function(r){var e=this.hsl();return e.color[1]-=e.color[1]*r,e},whiten:function(r){var e=this.hwb();return e.color[1]+=e.color[1]*r,e},blacken:function(r){var e=this.hwb();return e.color[2]+=e.color[2]*r,e},grayscale:function(){var r=this.rgb().color,e=r[0]*.3+r[1]*.59+r[2]*.11;return ui.rgb(e,e,e)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var e=this.hsl(),t=e.color[0];return t=(t+r)%360,t=t<0?360+t:t,e.color[0]=t,e},mix:function(r,e){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var t=r.rgb(),n=this.rgb(),i=e===void 0?.5:e,a=2*i-1,o=t.alpha()-n.alpha(),s=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return ui.rgb(s*t.red()+l*n.red(),s*t.green()+l*n.green(),s*t.blue()+l*n.blue(),t.alpha()*i+n.alpha()*(1-i))}};Object.keys(Ji).forEach(function(r){if(I6.indexOf(r)===-1){var e=Ji[r].channels;ui.prototype[r]=function(){if(this.model===r)return new ui(this);if(arguments.length)return new ui(arguments,r);var t=typeof arguments[e]=="number"?e:this.valpha;return new ui(Bme(Ji[this.model][r].raw(this.color)).concat(t),r)},ui[r]=function(t){return typeof t=="number"&&(t=kS(P2.call(arguments),e)),new ui(t,r)}}});function Pme(r,e){return Number(r.toFixed(e))}function Fme(r){return function(e){return Pme(e,r)}}function yn(r,e,t){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(Tm[n]||(Tm[n]=[]))[e]=t}),r=r[0],function(n){var i;return arguments.length?(t&&(n=t(n)),i=this[r](),i.color[e]=n,i):(i=this[r]().color[e],t&&(i=t(i)),i)}}function Pn(r){return function(e){return Math.max(0,Math.min(r,e))}}function Bme(r){return Array.isArray(r)?r:[r]}function kS(r,e){for(var t=0;t<e;t++)typeof r[t]!="number"&&(r[t]=0);return r}var zme=ui;const Pd=co(zme);function km(r){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},km(r)}var Gme=/^\s+/,jme=/\s+$/;function Zt(r,e){if(r=r||"",e=e||{},r instanceof Zt)return r;if(!(this instanceof Zt))return new Zt(r,e);var t=Ume(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Zt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,i,a,o,s;return t=e.r/255,n=e.g/255,i=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=O6(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=CO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=CO(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=MO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=MO(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return AO(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Yme(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(on(this._r,255)*100)+"%",g:Math.round(on(this._g,255)*100)+"%",b:Math.round(on(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(on(this._r,255)*100)+"%, "+Math.round(on(this._g,255)*100)+"%, "+Math.round(on(this._b,255)*100)+"%)":"rgba("+Math.round(on(this._r,255)*100)+"%, "+Math.round(on(this._g,255)*100)+"%, "+Math.round(on(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:aye[AO(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+TO(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=Zt(e);n="#"+TO(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,a=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Zt(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Zme,arguments)},brighten:function(){return this._applyModification(Qme,arguments)},darken:function(){return this._applyModification(Jme,arguments)},desaturate:function(){return this._applyModification(Xme,arguments)},saturate:function(){return this._applyModification(Kme,arguments)},greyscale:function(){return this._applyModification(qme,arguments)},spin:function(){return this._applyModification(eye,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(nye,arguments)},complement:function(){return this._applyCombination(tye,arguments)},monochromatic:function(){return this._applyCombination(iye,arguments)},splitcomplement:function(){return this._applyCombination(rye,arguments)},triad:function(){return this._applyCombination(kO,[3])},tetrad:function(){return this._applyCombination(kO,[4])}};Zt.fromRatio=function(r,e){if(km(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?t[n]=r[n]:t[n]=vd(r[n]));r=t}return Zt(r,e)};function Ume(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=uye(r)),km(r)=="object"&&(ps(r.r)&&ps(r.g)&&ps(r.b)?(e=Wme(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):ps(r.h)&&ps(r.s)&&ps(r.v)?(n=vd(r.s),i=vd(r.v),e=Vme(r.h,n,i),o=!0,s="hsv"):ps(r.h)&&ps(r.s)&&ps(r.l)&&(n=vd(r.s),a=vd(r.l),e=Hme(r.h,n,a),o=!0,s="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=O6(t),{ok:o,format:r.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Wme(r,e,t){return{r:on(r,255)*255,g:on(e,255)*255,b:on(t,255)*255}}function MO(r,e,t){r=on(r,255),e=on(e,255),t=on(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a,o,s=(n+i)/2;if(n==i)a=o=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function Hme(r,e,t){var n,i,a;r=on(r,360),e=on(e,100),t=on(t,100);function o(u,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(c-u)*6*f:f<1/2?c:f<2/3?u+(c-u)*(2/3-f)*6:u}if(e===0)n=i=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,l=2*t-s;n=o(l,s,r+1/3),i=o(l,s,r),a=o(l,s,r-1/3)}return{r:n*255,g:i*255,b:a*255}}function CO(r,e,t){r=on(r,255),e=on(e,255),t=on(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a,o,s=n,l=n-i;if(o=n===0?0:l/n,n==i)a=0;else{switch(n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,v:s}}function Vme(r,e,t){r=on(r,360)*6,e=on(e,100),t=on(t,100);var n=Math.floor(r),i=r-n,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),l=n%6,u=[t,o,a,a,s,t][l],c=[s,t,t,o,a,a][l],f=[a,a,s,t,t,o][l];return{r:u*255,g:c*255,b:f*255}}function AO(r,e,t,n){var i=[ro(Math.round(r).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Yme(r,e,t,n,i){var a=[ro(Math.round(r).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(t).toString(16)),ro(N6(n))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function TO(r,e,t,n){var i=[ro(N6(n)),ro(Math.round(r).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(t).toString(16))];return i.join("")}Zt.equals=function(r,e){return!r||!e?!1:Zt(r).toRgbString()==Zt(e).toRgbString()};Zt.random=function(){return Zt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Xme(r,e){e=e===0?0:e||10;var t=Zt(r).toHsl();return t.s-=e/100,t.s=qy(t.s),Zt(t)}function Kme(r,e){e=e===0?0:e||10;var t=Zt(r).toHsl();return t.s+=e/100,t.s=qy(t.s),Zt(t)}function qme(r){return Zt(r).desaturate(100)}function Zme(r,e){e=e===0?0:e||10;var t=Zt(r).toHsl();return t.l+=e/100,t.l=qy(t.l),Zt(t)}function Qme(r,e){e=e===0?0:e||10;var t=Zt(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Zt(t)}function Jme(r,e){e=e===0?0:e||10;var t=Zt(r).toHsl();return t.l-=e/100,t.l=qy(t.l),Zt(t)}function eye(r,e){var t=Zt(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Zt(t)}function tye(r){var e=Zt(r).toHsl();return e.h=(e.h+180)%360,Zt(e)}function kO(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Zt(r).toHsl(),n=[Zt(r)],i=360/e,a=1;a<e;a++)n.push(Zt({h:(t.h+a*i)%360,s:t.s,l:t.l}));return n}function rye(r){var e=Zt(r).toHsl(),t=e.h;return[Zt(r),Zt({h:(t+72)%360,s:e.s,l:e.l}),Zt({h:(t+216)%360,s:e.s,l:e.l})]}function nye(r,e,t){e=e||6,t=t||30;var n=Zt(r).toHsl(),i=360/t,a=[Zt(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(Zt(n));return a}function iye(r,e){e=e||6;for(var t=Zt(r).toHsv(),n=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(Zt({h:n,s:i,v:a})),a=(a+s)%1;return o}Zt.mix=function(r,e,t){t=t===0?0:t||50;var n=Zt(r).toRgb(),i=Zt(e).toRgb(),a=t/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return Zt(o)};Zt.readability=function(r,e){var t=Zt(r),n=Zt(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};Zt.isReadable=function(r,e,t){var n=Zt.readability(r,e),i,a;switch(a=!1,i=cye(t),i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};Zt.mostReadable=function(r,e,t){var n=null,i=0,a,o,s,l;t=t||{},o=t.includeFallbackColors,s=t.level,l=t.size;for(var u=0;u<e.length;u++)a=Zt.readability(r,e[u]),a>i&&(i=a,n=Zt(e[u]));return Zt.isReadable(r,n,{level:s,size:l})||!o?n:(t.includeFallbackColors=!1,Zt.mostReadable(r,["#fff","#000"],t))};var LS=Zt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},aye=Zt.hexNames=oye(LS);function oye(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function O6(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function on(r,e){sye(r)&&(r="100%");var t=lye(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function qy(r){return Math.min(1,Math.max(0,r))}function Yi(r){return parseInt(r,16)}function sye(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function lye(r){return typeof r=="string"&&r.indexOf("%")!=-1}function ro(r){return r.length==1?"0"+r:""+r}function vd(r){return r<=1&&(r=r*100+"%"),r}function N6(r){return Math.round(parseFloat(r)*255).toString(16)}function LO(r){return Yi(r)/255}var Ya=function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+r+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ps(r){return!!Ya.CSS_UNIT.exec(r)}function uye(r){r=r.replace(Gme,"").replace(jme,"").toLowerCase();var e=!1;if(LS[r])r=LS[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Ya.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=Ya.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ya.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=Ya.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ya.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=Ya.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ya.hex8.exec(r))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),a:LO(t[4]),format:e?"name":"hex8"}:(t=Ya.hex6.exec(r))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),format:e?"name":"hex"}:(t=Ya.hex4.exec(r))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),a:LO(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Ya.hex3.exec(r))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function cye(r){var e,t;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),t=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var Bg=2,IO=.16,fye=.05,hye=.05,dye=.15,$6=5,D6=4,vye=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function OO(r,e,t){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=t?Math.round(r.h)-Bg*e:Math.round(r.h)+Bg*e:n=t?Math.round(r.h)+Bg*e:Math.round(r.h)-Bg*e,n<0?n+=360:n>=360&&(n-=360),n}function NO(r,e,t){if(r.h===0&&r.s===0)return r.s;var n;return t?n=r.s-IO*e:e===D6?n=r.s+IO:n=r.s+fye*e,n>1&&(n=1),t&&e===$6&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function $O(r,e,t){var n;return t?n=r.v+hye*e:n=r.v-dye*e,n>1&&(n=1),Number(n.toFixed(2))}function Lm(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=Zt(r),i=$6;i>0;i-=1){var a=n.toHsv(),o=Zt({h:OO(a,i,!0),s:NO(a,i,!0),v:$O(a,i,!0)}).toHexString();t.push(o)}t.push(n.toHexString());for(var s=1;s<=D6;s+=1){var l=n.toHsv(),u=Zt({h:OO(l,s),s:NO(l,s),v:$O(l,s)}).toHexString();t.push(u)}return e.theme==="dark"?vye.map(function(c){var f=c.index,h=c.opacity,d=Zt.mix(e.backgroundColor||"#141414",t[f],h*100).toHexString();return d}):t}var bw={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ww={},xw={};Object.keys(bw).forEach(function(r){ww[r]=Lm(bw[r]),ww[r].primary=ww[r][5],xw[r]=Lm(bw[r],{theme:"dark",backgroundColor:"#141414"}),xw[r].primary=xw[r][5]});var Bn=function(e,t,n){var i=Pd(e),a=Pd(t);return Pd([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},pye=function(e,t,n){t===void 0&&(t="#fff");var i=Bn(t,e,.05).rgb().toString(),a=Bn(t,e,.1).rgb().toString(),o=Bn(t,e,.2).rgb().toString(),s=Bn(t,e,.4).rgb().toString(),l=Bn(t,n,.02).rgb().toString(),u=Bn(t,n,.05).rgb().toString(),c=Bn(t,n,.1).rgb().toString(),f=Bn(t,n,.2).rgb().toString(),h=Bn(t,n,.3).rgb().toString(),d=Lm(e,{theme:"default",backgroundColor:t}),v=Pd(e).hex().toLowerCase(),p=d.indexOf(v),g=e;return p!==-1&&(g=d[p+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:t,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:f,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:l,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},gye=function(e,t,n){t===void 0&&(t="#fff");var i=Bn(t,e,.2).rgb().toString(),a=Bn(t,e,.3).rgb().toString(),o=Bn(t,e,.6).rgb().toString(),s=Bn(t,e,.8).rgb().toString(),l=Bn(t,n,.2).rgb().toString(),u=Bn(t,n,.25).rgb().toString(),c=Bn(t,n,.3).rgb().toString(),f=Bn(t,n,.4).rgb().toString(),h=Bn(t,n,.5).rgb().toString(),d=Lm(e,{theme:"dark",backgroundColor:t}),v=Pd(e).hex().toLowerCase(),p=d.indexOf(v),g=e;return p!==-1&&(g=d[p+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:e,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},F2=function(e,t,n,i){return t===void 0&&(t="#fff"),n===void 0&&(n="default"),n==="default"?pye(e,t,"rgb(150, 150, 150)"):gye(e,t,"#777")},mye=function(e,t,n,i){t===void 0&&(t="#fff"),n===void 0&&(n="default");var a=[];return e.forEach(function(o){a.push(F2(o,t,n))}),a};const yye=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:mye,getColorsWithSubjectColor:F2,mixColor:Bn},Symbol.toStringTag,{value:"Module"}));var bye="rgb(95, 149, 255)",wye="rgb(255, 255, 255)",DO="rgb(0, 0, 0)",Cr=F2(bye,wye);const Ju={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Cr.mainStroke,fill:Cr.mainFill},size:20,color:Cr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Cr.activeFill,stroke:Cr.activeStroke}},nodeStateStyles:{active:{fill:Cr.activeFill,stroke:Cr.activeStroke,lineWidth:2,shadowColor:Cr.mainStroke,shadowBlur:10},selected:{fill:Cr.selectedFill,stroke:Cr.selectedStroke,lineWidth:4,shadowColor:Cr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Cr.highlightFill,stroke:Cr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Cr.inactiveFill,stroke:Cr.inactiveStroke,lineWidth:1},disable:{fill:Cr.disableFill,stroke:Cr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:DO,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Cr.edgeMainStroke,lineAppendWidth:2},color:Cr.edgeMainStroke},edgeStateStyles:{active:{stroke:Cr.edgeActiveStroke,lineWidth:1},selected:{stroke:Cr.edgeSelectedStroke,lineWidth:2,shadowColor:Cr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Cr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Cr.edgeInactiveStroke,lineWidth:1},disable:{stroke:Cr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:DO,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Cr.comboMainFill,lineWidth:1,stroke:Cr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Cr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Cr.comboActiveStroke,lineWidth:1,fill:Cr.comboActiveFill},selected:{stroke:Cr.comboSelectedStroke,lineWidth:2,fill:Cr.comboSelectedFill,shadowColor:Cr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Cr.comboHighlightStroke,lineWidth:2,fill:Cr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Cr.comboInactiveStroke,fill:Cr.comboInactiveFill,lineWidth:1},disable:{stroke:Cr.comboDisableStroke,fill:Cr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var xye=function(e){var t=e.clone();return Sye(e,t),t},Sye=function r(e,t){var n;e.isGroup()&&t.isGroup()&&((n=e.get("children"))===null||n===void 0||n.forEach(function(s,l){var u=t.get("children")[l];r(s,u)}));var i=e.get("type"),a=t.get("type");if(!(i!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},_ye=hi.cloneEvent,Eye=hi.isViewportChanged,Mye=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=t,n.destroyed=!1,n.initEvents(),n}return e.prototype.initEvents=function(){var t=this,n=t.graph,i=t.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=Gu(this,"onCanvasEvents"),u=Gu(this,"onExtendEvents"),c=Gu(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(Pg(s,"wheel",c)),typeof window<"u"&&(a.push(Pg(window,"keydown",u)),a.push(Pg(window,"keyup",u)),a.push(Pg(window,"focus",u))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=Gu(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,i=this.graph,a=i.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return;break}t.canvasX=t.x,t.canvasY=t.y;var l={x:t.canvasX,y:t.canvasY},u=i.get("group"),c=u.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),Eye(c)&&(l=i.getPointByClient(t.clientX,t.clientY)),t.x=l.x,t.y=l.y,t.currentTarget=i,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,i.emit(s,t),i.emit("canvas:".concat(s),t);return}var f=e.getItemRoot(o);if(!f){i.emit(s,t);return}var h=f.get("item");if(!h.destroyed){var d=h.getType();if(t.target=o,t.item=h,t.canvasX===t.x&&t.canvasY===t.y){var v=i.getCanvasByPoint(t.x,t.y);t.canvasX=v.x,t.canvasY=v.y}t.name&&!t.name.includes(":")?(i.emit("".concat(d,":").concat(s),t),i.emit(s,t)):t.name&&i.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,d)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){Dt(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=t.target===s?null:t.item;t=_ye(t),o&&o!==l&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),l&&o!==l&&(t.item=l,this.emitCustomEvent(n,"mouseenter",t),this.dragging&&this.emitCustomEvent(n,"dragenter",t)),this.preItem=l},e.prototype.emitCustomEvent=function(t,n,i){i.type=n,this.graph.emit("".concat(t,":").concat(n),i)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,n=t.graph,i=t.canvasHandler,a=t.extendEvents,o=n.get("canvas");o.off("*",i),Pe(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(LB),wr={},Ps={},_n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.Base=void 0;var Cye=function(){function r(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return r.prototype.layout=function(e){return this.init(e),this.execute(!0)},r.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},r.prototype.execute=function(e){},r.prototype.executeWithWorker=function(){},r.prototype.getDefaultCfg=function(){return{}},r.prototype.updateCfg=function(e){e&&Object.assign(this,e)},r.prototype.getType=function(){return"base"},r.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},r}();_n.Base=Cye;var Sw={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.camelize=Vf.isString=void 0;var Aye=function(r){return typeof r=="string"};Vf.isString=Aye;var Tye=function(r){var e=Object.create(null);return function(t){var n=e[t];return n||(e[t]=r(t))}},kye=/-(\w)/g;Vf.camelize=Tye(function(r){return r.replace(kye,function(e,t){return t?t.toUpperCase():""})});var qv={};Object.defineProperty(qv,"__esModule",{value:!0});qv.isArray=void 0;qv.isArray=Array.isArray;var Zy={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toNumber=r.isNaN=r.isNumber=void 0;var e=function(i){return typeof i=="number"};r.isNumber=e;var t=function(i){return Number.isNaN(Number(i))};r.isNaN=t;var n=function(i){var a=parseFloat(i);return(0,r.isNaN)(a)?i:a};r.toNumber=n})(Zy);var Qy={},B2={};(function(r){var e=ze&&ze.__assign||function(){return e=Object.assign||function(i){for(var a,o=1,s=arguments.length;o<s;o++){a=arguments[o];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0;var t=function(i){return i!==null&&typeof i=="object"};r.isObject=t;var n=function(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var a=[];return i.forEach(function(s){a.push(s)}),a.map(function(s){return(0,r.clone)(s)})}if(typeof i=="object"&&Object.keys(i).length){var o=e({},i);return Object.keys(o).forEach(function(s){o[s]=(0,r.clone)(o[s])}),o}return i};r.clone=n})(B2);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCoreNodeAndRelativeLeafNodes=r.getAvgNodePosition=r.getLayoutBBox=r.traverseTreeUp=r.scaleMatrix=r.getAdjMatrix=r.floydWarshall=r.getDegreeMap=r.getDegree=r.getEdgeTerminal=void 0;var e=qv,t=Zy,n=B2,i=function(y,w){var b=y[w];return(0,n.isObject)(b)?b.cell:b};r.getEdgeTerminal=i;var a=function(y,w,b){for(var x=[],S=0;S<y;S++)x[S]={in:0,out:0,all:0};return b&&b.forEach(function(_){var M=(0,r.getEdgeTerminal)(_,"source"),A=(0,r.getEdgeTerminal)(_,"target");M&&x[w[M]]&&(x[w[M]].out+=1,x[w[M]].all+=1),A&&x[w[A]]&&(x[w[A]].in+=1,x[w[A]].all+=1)}),x};r.getDegree=a;var o=function(y,w){var b={};return y.forEach(function(x){b[x.id]={in:0,out:0,all:0}}),w&&w.forEach(function(x){var S=(0,r.getEdgeTerminal)(x,"source"),_=(0,r.getEdgeTerminal)(x,"target");S&&(b[S].out+=1,b[S].all+=1),_&&(b[_].in+=1,b[_].all+=1)}),b};r.getDegreeMap=o;var s=function(y){for(var w=[],b=y.length,x=0;x<b;x+=1){w[x]=[];for(var S=0;S<b;S+=1)x===S?w[x][S]=0:y[x][S]===0||!y[x][S]?w[x][S]=1/0:w[x][S]=y[x][S]}for(var _=0;_<b;_+=1)for(var x=0;x<b;x+=1)for(var S=0;S<b;S+=1)w[x][S]>w[x][_]+w[_][S]&&(w[x][S]=w[x][_]+w[_][S]);return w};r.floydWarshall=s;var l=function(y,w){var b=y.nodes,x=y.edges,S=[],_={};if(!b)throw new Error("invalid nodes data!");return b&&b.forEach(function(M,A){_[M.id]=A;var E=[];S.push(E)}),x==null||x.forEach(function(M){var A=(0,r.getEdgeTerminal)(M,"source"),E=(0,r.getEdgeTerminal)(M,"target"),T=_[A],C=_[E];T===void 0||C===void 0||(S[T][C]=1,w||(S[C][T]=1))}),S};r.getAdjMatrix=l;var u=function(y,w){var b=[];return y.forEach(function(x){var S=[];x.forEach(function(_){S.push(_*w)}),b.push(S)}),b};r.scaleMatrix=u;var c=function(y,w){if(y&&y.children){for(var b=y.children.length-1;b>=0;b--)if(!c(y.children[b],w))return}return!!w(y)},f=function(y,w){typeof w=="function"&&c(y,w)};r.traverseTreeUp=f;var h=function(y){var w=1/0,b=1/0,x=-1/0,S=-1/0;return y.forEach(function(_){var M=_.size;(0,e.isArray)(M)?M.length===1&&(M=[M[0],M[0]]):(0,t.isNumber)(M)?M=[M,M]:(M===void 0||isNaN(M))&&(M=[30,30]);var A=[M[0]/2,M[1]/2],E=_.x-A[0],T=_.x+A[0],C=_.y-A[1],k=_.y+A[1];w>E&&(w=E),b>C&&(b=C),x<T&&(x=T),S<k&&(S=k)}),{minX:w,minY:b,maxX:x,maxY:S}};r.getLayoutBBox=h;var d=function(y){var w={x:0,y:0};y.forEach(function(x){w.x+=x.x||0,w.y+=x.y||0});var b=y.length||1;return{x:w.x/b,y:w.y/b}};r.getAvgNodePosition=d;var v=function(y,w,b){var x,S;return y==="source"?((x=b==null?void 0:b.find(function(_){return _.target===w.id}))===null||x===void 0?void 0:x.source)||{}:((S=b==null?void 0:b.find(function(_){return _.source===w.id}))===null||S===void 0?void 0:S.target)||{}},p=function(y,w,b){var x=[];switch(y){case"source":x=b==null?void 0:b.filter(function(_){return _.source===w.id}).map(function(_){return _.target});break;case"target":x=b==null?void 0:b.filter(function(_){return _.target===w.id}).map(function(_){return _.source});break;case"both":x=b==null?void 0:b.filter(function(_){return _.source===w.id}).map(function(_){return _.target}).concat(b==null?void 0:b.filter(function(_){return _.target===w.id}).map(function(_){return _.source}));break}var S=new Set(x);return Array.from(S)},g=function(y,w,b,x,S){var _=b[w]||"",M=(x==null?void 0:x.filter(function(A){return A[w]===_}))||[];return y==="leaf"&&(M=M.filter(function(A){var E,T;return((E=S[A.id])===null||E===void 0?void 0:E.in)===0||((T=S[A.id])===null||T===void 0?void 0:T.out)===0})),M},m=function(y,w,b,x,S,_){var M=S[w.id],A=M.in,E=M.out,T=w,C=[];A===0?(T=v("source",w,b),C=p("both",T,b).map(function(L){return _[L]})):E===0&&(T=v("target",w,b),C=p("both",T,b).map(function(L){return _[L]})),C=C.filter(function(L){return S[L.id]&&(S[L.id].in===0||S[L.id].out===0)});var k=g(y,x,w,C,S);return{coreNode:T,relativeLeafNodes:C,sameTypeLeafNodes:k}};r.getCoreNodeAndRelativeLeafNodes=m})(Qy);var _w={},RO;function Lye(){return RO||(RO=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFuncByUnknownType=r.getFunc=r.isFunction=void 0;var e=vn(),t=Zy,n=function(o){return typeof o=="function"};r.isFunction=n;var i=function(o,s,l){var u;return l?u=l:(0,t.isNumber)(o)?u=function(){return o}:u=function(){return s},u};r.getFunc=i;var a=function(o,s,l){return l===void 0&&(l=!0),!s&&s!==0?function(u){return u.size?(0,e.isArray)(u.size)?u.size[0]>u.size[1]?u.size[0]:u.size[1]:(0,e.isObject)(u.size)?u.size.width>u.size.height?u.size.width:u.size.height:u.size:o}:(0,r.isFunction)(s)?s:(0,t.isNumber)(s)?function(){return s}:(0,e.isArray)(s)?function(){if(l){var u=Math.max.apply(Math,s);return isNaN(u)?o:u}return s}:(0,e.isObject)(s)?function(){if(l){var u=Math.max(s.width,s.height);return isNaN(u)?o:u}return[s.width,s.height]}:function(){return o}};r.getFuncByUnknownType=a}(_w)),_w}var PO;function vn(){return PO||(PO=1,function(r){var e=ze&&ze.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ze&&ze.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Vf,r),t(qv,r),t(Zy,r),t(Qy,r),t(B2,r),t(Lye(),r)}(Sw)),Sw}var Iye=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.getLayoutByName=Ps.unRegisterLayout=Ps.registerLayout=void 0;var Oye=_n,Nye=vn(),Il=new Map,$ye=function(r,e){if(Il.get(r)&&console.warn("The layout with the name ".concat(r," exists already, it will be overridden")),(0,Nye.isObject)(e)){var t=function(n){Iye(i,n);function i(a){var o=this,s;o=n.call(this)||this;var l=o,u={},c=Object.assign({},l.getDefaultCfg(),((s=e.getDefaultCfg)===null||s===void 0?void 0:s.call(e))||{});return Object.assign(u,c,e,a),Object.keys(u).forEach(function(f){var h=u[f];l[f]=h}),o}return i}(Oye.Base);Il.set(r,t)}else Il.set(r,e);return Il.get(r)};Ps.registerLayout=$ye;var Dye=function(r){Il.has(r)&&Il.delete(r)};Ps.unRegisterLayout=Dye;var Rye=function(r){return Il.has(r)?Il.get(r):null};Ps.getLayoutByName=Rye;var Ew={},Zv={},Pye=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zv,"__esModule",{value:!0});Zv.GridLayout=void 0;var Vc=vn(),Fye=_n,Bye=function(r){Pye(e,r);function e(t){var n=r.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges,a=t.begin,o=n.length;if(o===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};if(o===1)return n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};var s=t.sortBy,l=t.width,u=t.height,c=t.condense,f=t.preventOverlapPadding,h=t.preventOverlap,d=t.nodeSpacing,v=t.nodeSize,p=[];n.forEach(function(C){p.push(C)});var g={};if(p.forEach(function(C,k){g[C.id]=k}),(s==="degree"||!(0,Vc.isString)(s)||p[0][s]===void 0)&&(s="degree",(0,Vc.isNaN)(n[0].degree))){var m=(0,Vc.getDegree)(p.length,g,i);p.forEach(function(C,k){C.degree=m[k].all})}p.sort(function(C,k){return k[s]-C[s]}),!l&&typeof window<"u"&&(l=window.innerWidth),!u&&typeof window<"u"&&(u=window.innerHeight);var y=t.rows,w=t.cols!=null?t.cols:t.columns;if(t.cells=o,y!=null&&w!=null?(t.rows=y,t.cols=w):y!=null&&w==null?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):y==null&&w!=null?(t.cols=w,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){var b=t.small(),x=t.large();(b-1)*x>=t.cells?t.small(b-1):(x-1)*b>=t.cells&&t.large(x-1)}else for(;t.cols*t.rows<t.cells;){var b=t.small(),x=t.large();(x+1)*b>=t.cells?t.large(x+1):t.small(b+1)}if(t.cellWidth=l/t.cols,t.cellHeight=u/t.rows,c&&(t.cellWidth=0,t.cellHeight=0),h||d){var S=(0,Vc.getFuncByUnknownType)(10,d),_=(0,Vc.getFuncByUnknownType)(30,v,!1);p.forEach(function(C){(!C.x||!C.y)&&(C.x=0,C.y=0);var k=_(C)||30,L,I;(0,Vc.isArray)(k)?(L=k[0],I=k[1]):(L=k,I=k);var O=S!==void 0?S(C):f,N=L+O,D=I+O;t.cellWidth=Math.max(t.cellWidth,N),t.cellHeight=Math.max(t.cellHeight,D)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var M=0;M<p.length;M++){var A=p[M],E=void 0;if(t.position&&(E=t.position(A)),E&&(E.row!==void 0||E.col!==void 0)){var T={row:E.row,col:E.col};if(T.col===void 0)for(T.col=0;t.used(T.row,T.col);)T.col++;else if(T.row===void 0)for(T.row=0;t.used(T.row,T.col);)T.row++;t.id2manPos[A.id]=T,t.use(T.row,T.col)}t.getPos(A)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:i,nodes:p}},e.prototype.small=function(t){var n=this,i,a=n.rows||5,o=n.cols||5;if(t==null)i=Math.min(a,o);else{var s=Math.min(a,o);s===n.rows?n.rows=t:n.cols=t}return i},e.prototype.large=function(t){var n=this,i,a=n.rows||5,o=n.cols||5;if(t==null)i=Math.max(a,o);else{var s=Math.max(a,o);s===n.rows?n.rows=t:n.cols=t}return i},e.prototype.used=function(t,n){var i=this;return i.cellUsed["c-".concat(t,"-").concat(n)]||!1},e.prototype.use=function(t,n){var i=this;i.cellUsed["c-".concat(t,"-").concat(n)]=!0},e.prototype.moveToNextCell=function(){var t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var n=this,i=n.begin,a=n.cellWidth,o=n.cellHeight,s,l,u=n.id2manPos[t.id];if(u)s=u.col*a+a/2+i[0],l=u.row*o+o/2+i[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();s=n.col*a+a/2+i[0],l=n.row*o+o/2+i[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=s,t.y=l},e.prototype.getType=function(){return"grid"},e}(Fye.Base);Zv.GridLayout=Bye;var Qv={},zye=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Qv,"__esModule",{value:!0});Qv.RandomLayout=void 0;var Gye=_n,jye=function(r){zye(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,n=t.nodes,i=.9,a=t.center;return!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),n&&n.forEach(function(o){o.x=(Math.random()-.5)*i*t.width+a[0],o.y=(Math.random()-.5)*i*t.height+a[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(Gye.Base);Qv.RandomLayout=jye;var Jv={},Uye=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jv,"__esModule",{value:!0});Jv.GForceLayout=void 0;var Wye=_n,di=vn(),Mw=function(r,e){var t;return r?(0,di.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e},t},Hye=function(r){Uye(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,n,i=this,a=i.nodes;if(i.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(i.timeInterval),!a||a.length===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var o=i.center;if(a.length===1){a[0].x=o[0],a[0].y=o[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var s={},l={};a.forEach(function(v,p){(0,di.isNumber)(v.x)||(v.x=Math.random()*i.width),(0,di.isNumber)(v.y)||(v.y=Math.random()*i.height),s[v.id]=v,l[v.id]=p}),i.nodeMap=s,i.nodeIdxMap=l,i.linkDistance=Mw(i.linkDistance,1),i.nodeStrength=Mw(i.nodeStrength,1),i.edgeStrength=Mw(i.edgeStrength,1);var u=i.nodeSize,c;if(i.preventOverlap){var f=i.nodeSpacing,h;(0,di.isNumber)(f)?h=function(){return f}:(0,di.isFunction)(f)?h=f:h=function(){return 0},u?(0,di.isArray)(u)?c=function(v){return Math.max(u[0],u[1])+h(v)}:c=function(v){return u+h(v)}:c=function(v){return v.size?(0,di.isArray)(v.size)?Math.max(v.size[0],v.size[1])+h(v):(0,di.isObject)(v.size)?Math.max(v.size.width,v.size.height)+h(v):v.size+h(v):10+h(v)}}i.nodeSize=c;var d=i.edges;i.degrees=(0,di.getDegree)(a.length,i.nodeIdxMap,d),i.getMass||(i.getMass=function(v){var p=v.mass||i.degrees[i.nodeIdxMap[v.id]].all||1;return p}),i.run()},e.prototype.run=function(){var t,n=this,i=n.maxIteration,a=n.nodes,o=n.workerEnabled,s=n.minMovement,l=n.animate;if(a)if(o||!l){for(var u=0;u<i;u++){var c=n.runOneStep(u);if(n.reachMoveThreshold(a,c,s))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var f=0;this.timeInterval=window.setInterval(function(){var h,d;if(a){var v=n.runOneStep(f)||[];n.reachMoveThreshold(a,v,s)&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval)),f++,f>=i&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(t,n,i){var a=0;return t.forEach(function(o,s){var l=o.x-n[s].x,u=o.y-n[s].y;a+=Math.sqrt(l*l+u*u)}),a/=t.length,a<i},e.prototype.runOneStep=function(t){var n,i=this,a=i.nodes,o=i.edges,s=[],l=[];if(a){a.forEach(function(f,h){s[2*h]=0,s[2*h+1]=0,l[2*h]=0,l[2*h+1]=0}),i.calRepulsive(s,a),o&&i.calAttractive(s,o),i.calGravity(s,a);var u=Math.max(.02,i.interval-t*.002);i.updateVelocity(s,l,u,a);var c=[];return a.forEach(function(f){c.push({x:f.x,y:f.y})}),i.updatePosition(l,u,a),(n=i.tick)===null||n===void 0||n.call(i),c}},e.prototype.calRepulsive=function(t,n){var i=this,a=i.getMass,o=i.factor,s=i.coulombDisScale,l=i.preventOverlap,u=i.collideStrength,c=u===void 0?1:u,f=i.nodeStrength,h=i.nodeSize;n.forEach(function(d,v){var p=a?a(d):1;n.forEach(function(g,m){if(!(v>=m)){var y=d.x-g.x,w=d.y-g.y;y===0&&w===0&&(y=Math.random()*.01,w=Math.random()*.01);var b=y*y+w*w,x=Math.sqrt(b),S=(x+.1)*s,_=y/x,M=w/x,A=(f(d)+f(g))*.5*o/(S*S),E=a?a(g):1;if(t[2*v]+=_*A,t[2*v+1]+=M*A,t[2*m]-=_*A,t[2*m+1]-=M*A,l&&(h(d)+h(g))/2>x){var T=c*(f(d)+f(g))*.5/b;t[2*v]+=_*T/p,t[2*v+1]+=M*T/p,t[2*m]-=_*T/E,t[2*m+1]-=M*T/E}}})})},e.prototype.calAttractive=function(t,n){var i=this,a=i.nodeMap,o=i.nodeIdxMap,s=i.linkDistance,l=i.edgeStrength,u=i.nodeSize,c=i.getMass;n.forEach(function(f,h){var d=(0,di.getEdgeTerminal)(f,"source"),v=(0,di.getEdgeTerminal)(f,"target"),p=a[d],g=a[v],m=g.x-p.x,y=g.y-p.y;m===0&&y===0&&(m=Math.random()*.01,y=Math.random()*.01);var w=Math.sqrt(m*m+y*y),b=m/w,x=y/w,S=s(f,p,g)||1+(u(p)+u(g)||0)/2,_=S-w,M=_*l(f),A=o[d],E=o[v],T=c?c(p):1,C=c?c(g):1;t[2*A]-=b*M/T,t[2*A+1]-=x*M/T,t[2*E]+=b*M/C,t[2*E+1]+=x*M/C})},e.prototype.calGravity=function(t,n){for(var i=this,a=i.center,o=i.gravity,s=i.degrees,l=n.length,u=0;u<l;u++){var c=n[u],f=c.x-a[0],h=c.y-a[1],d=o;if(i.getCenter){var v=i.getCenter(c,s[u].all);v&&(0,di.isNumber)(v[0])&&(0,di.isNumber)(v[1])&&(0,di.isNumber)(v[2])&&(f=c.x-v[0],h=c.y-v[1],d=v[2])}d&&(t[2*u]-=d*f,t[2*u+1]-=d*h)}},e.prototype.updateVelocity=function(t,n,i,a){var o=this,s=i*o.damping;a.forEach(function(l,u){var c=t[2*u]*s||.01,f=t[2*u+1]*s||.01,h=Math.sqrt(c*c+f*f);if(h>o.maxSpeed){var d=o.maxSpeed/h;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})},e.prototype.updatePosition=function(t,n,i){i.forEach(function(a,o){if((0,di.isNumber)(a.fx)&&(0,di.isNumber)(a.fy)){a.x=a.fx,a.y=a.fy;return}var s=t[2*o]*n,l=t[2*o+1]*n;a.x+=s,a.y+=l})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(Wye.Base);Jv.GForceLayout=Hye;var ep={},Jy={};function Vye(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return R6(this.cover(e,t),e,t,r)}function R6(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,a=r._root,o={data:n},s=r._x0,l=r._y0,u=r._x1,c=r._y1,f,h,d,v,p,g,m,y;if(!a)return r._root=o,r;for(;a.length;)if((p=e>=(f=(s+u)/2))?s=f:u=f,(g=t>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|p]))return i[m]=o,r;if(d=+r._x.call(null,a.data),v=+r._y.call(null,a.data),e===d&&t===v)return o.next=a,i?i[m]=o:r._root=o,r;do i=i?i[m]=new Array(4):r._root=new Array(4),(p=e>=(f=(s+u)/2))?s=f:u=f,(g=t>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|p)===(y=(v>=h)<<1|d>=f));return i[y]=a,i[m]=o,r}function Yye(r){var e,t,n=r.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,e=r[t]))||isNaN(a=+this._y.call(null,e))||(o[t]=i,s[t]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),t=0;t<n;++t)R6(this,o[t],s[t],r[t]);return this}function Xye(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var o=i-t||1,s=this._root,l,u;t>r||r>=i||n>e||e>=a;)switch(u=(e<n)<<1|r<t,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=t+o,a=n+o;break;case 1:t=i-o,a=n+o;break;case 2:i=t+o,n=a-o;break;case 3:t=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this}function Kye(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function qye(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Mi(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function Zye(r,e,t){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,v,p;for(d&&h.push(new Mi(d,i,a,c,f)),t==null?t=1/0:(i=r-t,a=e-t,c=r+t,f=e+t,t*=t);v=h.pop();)if(!(!(d=v.node)||(o=v.x0)>c||(s=v.y0)>f||(l=v.x1)<i||(u=v.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new Mi(d[3],g,m,l,u),new Mi(d[2],o,m,g,u),new Mi(d[1],g,s,l,m),new Mi(d[0],o,s,g,m)),(p=(e>=m)<<1|r>=g)&&(v=h[h.length-1],h[h.length-1]=h[h.length-1-p],h[h.length-1-p]=v)}else{var y=r-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<t){var x=Math.sqrt(t=b);i=r-x,a=e-x,c=r+x,f=e+x,n=d.data}}return n}function Qye(r){if(isNaN(c=+this._x.call(null,r))||isNaN(f=+this._y.call(null,r)))return this;var e,t=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,v,p,g,m;if(!t)return this;if(t.length)for(;;){if((v=c>=(h=(o+l)/2))?o=h:l=h,(p=f>=(d=(s+u)/2))?s=d:u=d,e=t,!(t=t[g=p<<1|v]))return this;if(!t.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[m]=t:this._root=t),this):(this._root=a,this)}function Jye(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function e1e(){return this._root}function t1e(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function r1e(r){var e=[],t,n=this._root,i,a,o,s,l;for(n&&e.push(new Mi(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,a=t.x0,o=t.y0,s=t.x1,l=t.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new Mi(i,u,c,s,l)),(i=n[2])&&e.push(new Mi(i,a,c,u,l)),(i=n[1])&&e.push(new Mi(i,u,o,s,c)),(i=n[0])&&e.push(new Mi(i,a,o,u,c))}return this}function n1e(r){var e=[],t=[],n;for(this._root&&e.push(new Mi(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new Mi(a,o,s,c,f)),(a=i[1])&&e.push(new Mi(a,c,s,l,f)),(a=i[2])&&e.push(new Mi(a,o,f,c,u)),(a=i[3])&&e.push(new Mi(a,c,f,l,u))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function i1e(r){return r[0]}function a1e(r){return arguments.length?(this._x=r,this):this._x}function o1e(r){return r[1]}function s1e(r){return arguments.length?(this._y=r,this):this._y}function e1(r,e,t){var n=new z2(e??i1e,t??o1e,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function z2(r,e,t,n,i,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function FO(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Ai=e1.prototype=z2.prototype;Ai.copy=function(){var r=new z2(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=FO(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=FO(n));return r};Ai.add=Vye;Ai.addAll=Yye;Ai.cover=Xye;Ai.data=Kye;Ai.extent=qye;Ai.find=Zye;Ai.remove=Qye;Ai.removeAll=Jye;Ai.root=e1e;Ai.size=t1e;Ai.visit=r1e;Ai.visitAfter=n1e;Ai.x=a1e;Ai.y=s1e;const l1e=Object.freeze(Object.defineProperty({__proto__:null,quadtree:e1},Symbol.toStringTag,{value:"Module"})),u1e=rs(l1e);Object.defineProperty(Jy,"__esModule",{value:!0});Jy.forceNBody=void 0;var c1e=u1e,f1e=.81,BO=.1;function h1e(r,e,t,n,i){var a=t/n,o=r.map(function(l,u){var c=e[l.id],f=c.data,h=c.x,d=c.y,v=c.size,p=f.layout.force.nodeStrength;return{x:h,y:d,size:v,index:u,vx:0,vy:0,weight:a*p}}),s=(0,c1e.quadtree)(o,function(l){return l.x},function(l){return l.y}).visitAfter(d1e);return o.forEach(function(l){p1e(l,s)}),o.map(function(l,u){var c=e[r[u].id],f=c.data.layout.force.mass,h=f===void 0?1:f;i[2*u]=l.vx/h,i[2*u+1]=l.vy/h}),i}Jy.forceNBody=h1e;function d1e(r){var e=0,t=0,n=0;if(r.length){for(var i=0;i<4;i++){var a=r[i];a&&a.weight&&(e+=a.weight,t+=a.x*a.weight,n+=a.y*a.weight)}r.x=t/e,r.y=n/e,r.weight=e}else{var a=r;r.x=a.data.x,r.y=a.data.y,r.weight=a.data.weight}}var v1e=function(r,e,t,n,i,a){var o=a.x-r.x||BO,s=a.y-r.y||BO,l=n-e,u=o*o+s*s,c=Math.sqrt(u)*u;if(l*l*f1e<u){var f=r.weight/c;return a.vx+=o*f,a.vy+=s*f,!0}if(r.length)return!1;if(r.data!==a){var f=r.data.weight/c;a.vx+=o*f,a.vy+=s*f}};function p1e(r,e){e.visit(function(t,n,i,a,o){return v1e(t,n,i,a,o,r)})}var g1e=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xa=ze&&ze.__assign||function(){return Xa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Xa.apply(this,arguments)};Object.defineProperty(ep,"__esModule",{value:!0});ep.Force2Layout=void 0;var m1e=_n,Fn=vn(),y1e=Jy,Cw=function(r,e){var t;return r?(0,Fn.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e},t},b1e=function(r){g1e(e,r);function e(t){var n=r.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(a){return{x:n.width/2,y:n.height/2}}};var i=t.getMass;return n.propsGetMass=i,n.updateCfg(t),n}return e.prototype.getCentripetalOptions=function(){var t=this,n=t.leafCluster,i=t.clustering,a=t.nodeClusterBy,o=t.nodes,s=t.nodeMap,l=t.clusterNodeStrength,u=function(w){return typeof l=="function"?l(w):l},c={},f;if(n){f=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(o==null?void 0:o.map(function(w){return w[a]})))||[];c={single:100,leaf:function(w,b,x){var S=f[w.id]||{},_=S.relativeLeafNodes,M=S.sameTypeLeafNodes;return(M==null?void 0:M.length)===(_==null?void 0:_.length)||(h==null?void 0:h.length)===1?1:u(w)},others:1,center:function(w,b,x){var S,_=(((S=w.data)===null||S===void 0?void 0:S.layout)||{}).degree;if(!_)return{x:100,y:100};var M;if(_===1){var A=(f[w.id]||{}).sameTypeLeafNodes,E=A===void 0?[]:A;E.length===1?M=void 0:E.length>1&&(M=(0,Fn.getAvgNodePosition)(E))}else M=void 0;return{x:M==null?void 0:M.x,y:M==null?void 0:M.y}}}}if(i){f||(f=this.getSameTypeLeafMap());var d=Array.from(new Set(o.map(function(w,b){return w[a]}))).filter(function(w){return w!==void 0}),v={};d.forEach(function(w){var b=o.filter(function(x){return x[a]===w}).map(function(x){return s[x.id]});v[w]=(0,Fn.getAvgNodePosition)(b)}),c={single:function(w){return u(w)},leaf:function(w){return u(w)},others:function(w){return u(w)},center:function(w,b,x){var S=v[w[a]];return{x:S==null?void 0:S.x,y:S==null?void 0:S.y}}}}this.centripetalOptions=Xa(Xa({},this.centripetalOptions),c);var p=this.centripetalOptions,g=p.leaf,m=p.single,y=p.others;g&&typeof g!="function"&&(this.centripetalOptions.leaf=function(){return g}),m&&typeof m!="function"&&(this.centripetalOptions.single=function(){return m}),y&&typeof y!="function"&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var n=t.nodes,i=t.edges,a=t.defSpringLen;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd([Xa({},n[0])]);return}t.degreesMap=(0,Fn.getDegreeMap)(n,i),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(d){var v=1;(0,Fn.isNumber)(d.mass)&&(v=d.mass);var p=t.degreesMap[d.id].all;return!p||p<5?v:p*5*v};var s=t.nodeSize,l;if(t.preventOverlap){var u=t.nodeSpacing,c;(0,Fn.isNumber)(u)?c=function(){return u}:(0,Fn.isFunction)(u)?c=u:c=function(){return 0},s?(0,Fn.isArray)(s)?l=function(d){return Math.max(s[0],s[1])+c(d)}:l=function(d){return s+c(d)}:l=function(d){return d.size?(0,Fn.isArray)(d.size)?Math.max(d.size[0],d.size[1])+c(d):(0,Fn.isObject)(d.size)?Math.max(d.size.width,d.size.height)+c(d):d.size+c(d):10+c(d)}}t.nodeSize=l,t.linkDistance=Cw(t.linkDistance,1),t.nodeStrength=Cw(t.nodeStrength,1),t.edgeStrength=Cw(t.edgeStrength,1);var f={},h={};n.forEach(function(d,v){(0,Fn.isNumber)(d.x)||(d.x=Math.random()*t.width),(0,Fn.isNumber)(d.y)||(d.y=Math.random()*t.height);var p=t.degreesMap[d.id];f[d.id]=Xa(Xa({},d),{data:Xa(Xa({},d.data),{size:t.nodeSize(d)||30,layout:{inDegree:p.in,outDegree:p.out,degree:p.all,tDegree:p.in,sDegree:p.out,force:{mass:t.getMass(d),nodeStrength:t.nodeStrength(d,i)}}})}),h[d.id]=v}),t.nodeMap=f,t.nodeIdxMap=h,t.edgeInfos=[],i==null||i.forEach(function(d){var v=f[d.source],p=f[d.target];!v||!p?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(d),linkDistance:a?a(Xa(Xa({},d),{source:v,target:p}),v,p):t.linkDistance(d,v,p)||1+(s(v)+s(v)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()},e.prototype.run=function(){var t=this,n=t.maxIteration,i=t.nodes,a=t.edges,o=t.workerEnabled,s=t.minMovement,l=t.animate,u=t.nodeMap,c=t.height;if(t.currentMinY=0,t.currentMaxY=c,!!i){var f=[];if(i.forEach(function(m,y){f[2*y]=0,f[2*y+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var h={};a.forEach(function(m){var y=m.source,w=m.target;h[y]=h[y]||[],h[y].push(m),h[w]=h[w]||[],h[w].push(m)}),this.relatedEdges=h}var d=n,v=!l;if(o||v){for(var p=0;(t.judgingDistance>s||p<1)&&p<d;p++)t.runOneStep(p,f);t.onLayoutEnd(Object.values(u))}else{if(typeof window>"u")return;var g=0;this.timeInterval=window.setInterval(function(){i&&(t.runOneStep(g,f),g++,(g>=d||t.judgingDistance<s)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}},e.prototype.runOneStep=function(t,n){var i,a=this,o=a.nodes,s=a.edges;a.nodeMap;var l=a.monitor,u=[];if(o!=null&&o.length){a.calRepulsive(u),s&&a.calAttractive(u),a.calGravity(u),a.attractToSide(u);var c=a.interval;if(a.updateVelocity(u,n,c),a.updatePosition(n,c),(i=a.tick)===null||i===void 0||i.call(a),l){var f=this.calTotalEnergy(u);l({energy:f,nodes:o,edges:s,iterations:t})}}},e.prototype.calTotalEnergy=function(t){var n=this,i=n.nodes,a=n.nodeMap;if(!(i!=null&&i.length))return 0;var o=0;return i.forEach(function(s,l){var u=t[2*l],c=t[2*l+1],f=u*u+c*c,h=a[s.id].data.layout.force.mass,d=h===void 0?1:h;o+=d*f*.5}),o},e.prototype.calRepulsive=function(t){var n=this,i=n.nodes,a=n.nodeMap,o=n.factor,s=n.coulombDisScale;n.nodeSize,(0,y1e.forceNBody)(i,a,o,s*s,t)},e.prototype.calAttractive=function(t){var n=this,i=n.edges,a=n.nodeMap,o=n.nodeIdxMap,s=n.edgeInfos;n.nodeSize,i.forEach(function(l,u){var c=(0,Fn.getEdgeTerminal)(l,"source"),f=(0,Fn.getEdgeTerminal)(l,"target"),h=a[c],d=a[f];if(!(!h||!d)){var v=d.x-h.x,p=d.y-h.y;!v&&!p&&(v=Math.random()*.01,p=Math.random()*.01);var g=Math.sqrt(v*v+p*p),m=v/g,y=p/g,w=s[u]||{},b=w.linkDistance,x=b===void 0?200:b,S=w.edgeStrength,_=S===void 0?200:S,M=x-g,A=M*_,E=h.data.layout.force.mass||1,T=d.data.layout.force.mass||1,C=1/E,k=1/T,L=m*A,I=y*A,O=2*o[c],N=2*o[f];t[O]-=L*C,t[O+1]-=I*C,t[N]+=L*k,t[N+1]+=I*k}})},e.prototype.calGravity=function(t){var n,i=this,a=i.nodes,o=i.edges,s=o===void 0?[]:o,l=i.nodeMap,u=i.width,c=i.height,f=i.center,h=i.gravity,d=i.degreesMap,v=i.centripetalOptions;if(a)for(var p=a.length,g=0;g<p;g++){var m=2*g,y=l[a[g].id],w=y.data.layout.force.mass,b=w===void 0?1:w,x=0,S=0,_=h,M=d[y.id],A=M.in,E=M.out,T=M.all,C=(n=i.getCenter)===null||n===void 0?void 0:n.call(i,y,T);if(C){var k=C[0],L=C[1],I=C[2];x=y.x-k,S=y.y-L,_=I}else x=y.x-f[0],S=y.y-f[1];if(_&&(t[m]-=_*x/b,t[m+1]-=_*S/b),v){var O=v.leaf,N=v.single,D=v.others,$=v.center,R=($==null?void 0:$(y,a,s,u,c))||{x:0,y:0,centerStrength:0},B=R.x,j=R.y,G=R.centerStrength;if(!(0,Fn.isNumber)(B)||!(0,Fn.isNumber)(j))continue;var z=(y.x-B)/b,W=(y.y-j)/b;if(G&&(t[m]-=G*z,t[m+1]-=G*W),T===0){var Q=N(y);if(!Q)continue;t[m]-=Q*z,t[m+1]-=Q*W;continue}if(A===0||E===0){var ie=O(y,a,s);if(!ie)continue;t[m]-=ie*z,t[m+1]-=ie*W;continue}var se=D(y);if(!se)continue;t[m]-=se*z,t[m+1]-=se*W}}},e.prototype.attractToSide=function(t){var n=this,i=n.defSideCoe;n.height;var a=n.nodes,o=n.relatedEdges,s=n.currentMinY,l=s===void 0?0:s,u=n.currentMaxY,c=u===void 0?this.height:u;!i||typeof i!="function"||!(a!=null&&a.length)||a.forEach(function(f,h){var d=i(f,o[f.id]||[]);if(d!==0){var v=d<0?l:c,p=Math.abs(d);t[2*h+1]-=p*(f.y-v)}})},e.prototype.updateVelocity=function(t,n,i){var a=this,o=a.nodes,s=a.damping,l=a.maxSpeed;o!=null&&o.length&&o.forEach(function(u,c){var f=(n[2*c]+t[2*c]*i)*s||.01,h=(n[2*c+1]+t[2*c+1]*i)*s||.01,d=Math.sqrt(f*f+h*h);if(d>l){var v=l/d;f=v*f,h=v*h}n[2*c]=f,n[2*c+1]=h})},e.prototype.updatePosition=function(t,n){var i=this,a=i.nodes,o=i.distanceThresholdMode,s=i.nodeMap;if(!(a!=null&&a.length)){this.judgingDistance=0;return}var l=0;o==="max"?i.judgingDistance=-1/0:o==="min"&&(i.judgingDistance=1/0);var u=1/0,c=-1/0;a.forEach(function(f,h){var d=s[f.id];if((0,Fn.isNumber)(f.fx)&&(0,Fn.isNumber)(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}var v=t[2*h]*n,p=t[2*h+1]*n;f.x+=v,f.y+=p,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);var g=Math.sqrt(v*v+p*p);switch(o){case"max":i.judgingDistance<g&&(i.judgingDistance=g);break;case"min":i.judgingDistance>g&&(i.judgingDistance=g);break;default:l=l+g;break}}),this.currentMinY=u,this.currentMaxY=c,(!o||o==="mean")&&(i.judgingDistance=l/a.length)},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,n=t.nodeClusterBy,i=t.nodes,a=t.edges,o=t.nodeMap,s=t.degreesMap;if(i!=null&&i.length){var l={};return i.forEach(function(u,c){var f=s[u.id].all;f===1&&(l[u.id]=(0,Fn.getCoreNodeAndRelativeLeafNodes)("leaf",u,a,n,s,o))}),l}},e}(m1e.Base);ep.Force2Layout=b1e;var G2={},t1={};function w1e(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function i(){var a,o=t.length,s,l=0,u=0;for(a=0;a<o;++a)s=t[a],l+=s.x,u+=s.y;for(l=(l/o-r)*n,u=(u/o-e)*n,a=0;a<o;++a)s=t[a],s.x-=l,s.y-=u}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Gn(r){return function(){return r}}function Ol(r){return(r()-.5)*1e-6}function x1e(r){return r.x+r.vx}function S1e(r){return r.y+r.vy}function _1e(r){var e,t,n,i=1,a=1;typeof r!="function"&&(r=Gn(r==null?1:+r));function o(){for(var u,c=e.length,f,h,d,v,p,g,m=0;m<a;++m)for(f=e1(e,x1e,S1e).visitAfter(s),u=0;u<c;++u)h=e[u],p=t[h.index],g=p*p,d=h.x+h.vx,v=h.y+h.vy,f.visit(y);function y(w,b,x,S,_){var M=w.data,A=w.r,E=p+A;if(M){if(M.index>h.index){var T=d-M.x-M.vx,C=v-M.y-M.vy,k=T*T+C*C;k<E*E&&(T===0&&(T=Ol(n),k+=T*T),C===0&&(C=Ol(n),k+=C*C),k=(E-(k=Math.sqrt(k)))/k*i,h.vx+=(T*=k)*(E=(A*=A)/(g+A)),h.vy+=(C*=k)*E,M.vx-=T*(E=1-E),M.vy-=C*E)}return}return b>d+E||S<d-E||x>v+E||_<v-E}}function s(u){if(u.data)return u.r=t[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,f;for(t=new Array(c),u=0;u<c;++u)f=e[u],t[f.index]=+r(f,u,e)}}return o.initialize=function(u,c){e=u,n=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Gn(+u),l(),o):r},o}function E1e(r){return r.index}function zO(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function M1e(r){var e=E1e,t=f,n,i=Gn(30),a,o,s,l,u,c=1;r==null&&(r=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var m=0,y=r.length;m<c;++m)for(var w=0,b,x,S,_,M,A,E;w<y;++w)b=r[w],x=b.source,S=b.target,_=S.x+S.vx-x.x-x.vx||Ol(u),M=S.y+S.vy-x.y-x.vy||Ol(u),A=Math.sqrt(_*_+M*M),A=(A-a[w])/A*g*n[w],_*=A,M*=A,S.vx-=_*(E=l[w]),S.vy-=M*E,x.vx+=_*(E=1-E),x.vy+=M*E}function d(){if(o){var g,m=o.length,y=r.length,w=new Map(o.map((x,S)=>[e(x,S,o),x])),b;for(g=0,s=new Array(m);g<y;++g)b=r[g],b.index=g,typeof b.source!="object"&&(b.source=zO(w,b.source)),typeof b.target!="object"&&(b.target=zO(w,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)b=r[g],l[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);n=new Array(y),v(),a=new Array(y),p()}}function v(){if(o)for(var g=0,m=r.length;g<m;++g)n[g]=+t(r[g],g,r)}function p(){if(o)for(var g=0,m=r.length;g<m;++g)a[g]=+i(r[g],g,r)}return h.initialize=function(g,m){o=g,u=m,d()},h.links=function(g){return arguments.length?(r=g,d(),h):r},h.id=function(g){return arguments.length?(e=g,h):e},h.iterations=function(g){return arguments.length?(c=+g,h):c},h.strength=function(g){return arguments.length?(t=typeof g=="function"?g:Gn(+g),v(),h):t},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Gn(+g),p(),h):i},h}var C1e={value:()=>{}};function P6(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new T0(t)}function T0(r){this._=r}function A1e(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}T0.prototype=P6.prototype={constructor:T0,on:function(r,e){var t=this._,n=A1e(r+"",t),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(r=n[a]).type)&&(i=T1e(t[i],r.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(r=n[a]).type)t[i]=GO(t[i],r.name,e);else if(e==null)for(i in t)t[i]=GO(t[i],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new T0(r)},call:function(r,e){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,a;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(e,t)}};function T1e(r,e){for(var t=0,n=r.length,i;t<n;++t)if((i=r[t]).name===e)return i.value}function GO(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=C1e,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var Yf=0,pd=0,Vh=0,F6=1e3,Im,gd,Om=0,fc=0,r1=0,_v=typeof performance=="object"&&performance.now?performance:Date,B6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function z6(){return fc||(B6(k1e),fc=_v.now()+r1)}function k1e(){fc=0}function IS(){this._call=this._time=this._next=null}IS.prototype=G6.prototype={constructor:IS,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?z6():+t)+(e==null?0:+e),!this._next&&gd!==this&&(gd?gd._next=this:Im=this,gd=this),this._call=r,this._time=t,OS()},stop:function(){this._call&&(this._call=null,this._time=1/0,OS())}};function G6(r,e,t){var n=new IS;return n.restart(r,e,t),n}function L1e(){z6(),++Yf;for(var r=Im,e;r;)(e=fc-r._time)>=0&&r._call.call(null,e),r=r._next;--Yf}function jO(){fc=(Om=_v.now())+r1,Yf=pd=0;try{L1e()}finally{Yf=0,O1e(),fc=0}}function I1e(){var r=_v.now(),e=r-Om;e>F6&&(r1-=e,Om=r)}function O1e(){for(var r,e=Im,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:Im=t);gd=r,OS(n)}function OS(r){if(!Yf){pd&&(pd=clearTimeout(pd));var e=r-fc;e>24?(r<1/0&&(pd=setTimeout(jO,r-_v.now()-r1)),Vh&&(Vh=clearInterval(Vh))):(Vh||(Om=_v.now(),Vh=setInterval(I1e,F6)),Yf=1,B6(jO))}}const N1e=1664525,$1e=1013904223,UO=4294967296;function D1e(){let r=1;return()=>(r=(N1e*r+$1e)%UO)/UO}function R1e(r){return r.x}function P1e(r){return r.y}var F1e=10,B1e=Math.PI*(3-Math.sqrt(5));function z1e(r){var e,t=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=G6(f),u=P6("tick","end"),c=D1e();r==null&&(r=[]);function f(){h(),u.call("tick",e),t<n&&(l.stop(),u.call("end",e))}function h(p){var g,m=r.length,y;p===void 0&&(p=1);for(var w=0;w<p;++w)for(t+=(a-t)*i,s.forEach(function(b){b(t)}),g=0;g<m;++g)y=r[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function d(){for(var p=0,g=r.length,m;p<g;++p){if(m=r[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=F1e*Math.sqrt(.5+p),w=p*B1e;m.x=y*Math.cos(w),m.y=y*Math.sin(w)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function v(p){return p.initialize&&p.initialize(r,c),p}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(p){return arguments.length?(r=p,d(),s.forEach(v),e):r},alpha:function(p){return arguments.length?(t=+p,e):t},alphaMin:function(p){return arguments.length?(n=+p,e):n},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(a=+p,e):a},velocityDecay:function(p){return arguments.length?(o=1-p,e):1-o},randomSource:function(p){return arguments.length?(c=p,s.forEach(v),e):c},force:function(p,g){return arguments.length>1?(g==null?s.delete(p):s.set(p,v(g)),e):s.get(p)},find:function(p,g,m){var y=0,w=r.length,b,x,S,_,M;for(m==null?m=1/0:m*=m,y=0;y<w;++y)_=r[y],b=p-_.x,x=g-_.y,S=b*b+x*x,S<m&&(M=_,m=S);return M},on:function(p,g){return arguments.length>1?(u.on(p,g),e):u.on(p)}}}function G1e(){var r,e,t,n,i=Gn(-30),a,o=1,s=1/0,l=.81;function u(d){var v,p=r.length,g=e1(r,R1e,P1e).visitAfter(f);for(n=d,v=0;v<p;++v)e=r[v],g.visit(h)}function c(){if(r){var d,v=r.length,p;for(a=new Array(v),d=0;d<v;++d)p=r[d],a[p.index]=+i(p,d,r)}}function f(d){var v=0,p,g,m=0,y,w,b;if(d.length){for(y=w=b=0;b<4;++b)(p=d[b])&&(g=Math.abs(p.value))&&(v+=p.value,m+=g,y+=g*p.x,w+=g*p.y);d.x=y/m,d.y=w/m}else{p=d,p.x=p.data.x,p.y=p.data.y;do v+=a[p.data.index];while(p=p.next)}d.value=v}function h(d,v,p,g){if(!d.value)return!0;var m=d.x-e.x,y=d.y-e.y,w=g-v,b=m*m+y*y;if(w*w/l<b)return b<s&&(m===0&&(m=Ol(t),b+=m*m),y===0&&(y=Ol(t),b+=y*y),b<o&&(b=Math.sqrt(o*b)),e.vx+=m*d.value*n/b,e.vy+=y*d.value*n/b),!0;if(d.length||b>=s)return;(d.data!==e||d.next)&&(m===0&&(m=Ol(t),b+=m*m),y===0&&(y=Ol(t),b+=y*y),b<o&&(b=Math.sqrt(o*b)));do d.data!==e&&(w=a[d.data.index]*n/b,e.vx+=m*w,e.vy+=y*w);while(d=d.next)}return u.initialize=function(d,v){r=d,t=v,c()},u.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Gn(+d),c(),u):i},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function j1e(r,e,t){var n,i=Gn(.1),a,o;typeof r!="function"&&(r=Gn(+r)),e==null&&(e=0),t==null&&(t=0);function s(u){for(var c=0,f=n.length;c<f;++c){var h=n[c],d=h.x-e||1e-6,v=h.y-t||1e-6,p=Math.sqrt(d*d+v*v),g=(o[c]-p)*a[c]*u/p;h.vx+=d*g,h.vy+=v*g}}function l(){if(n){var u,c=n.length;for(a=new Array(c),o=new Array(c),u=0;u<c;++u)o[u]=+r(n[u],u,n),a[u]=isNaN(o[u])?0:+i(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:Gn(+u),l(),s):i},s.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Gn(+u),l(),s):r},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(t=+u,s):t},s}function U1e(r){var e=Gn(.1),t,n,i;typeof r!="function"&&(r=Gn(r==null?0:+r));function a(s){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vx+=(i[l]-c.x)*n[l]*s}function o(){if(t){var s,l=t.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Gn(+s),o(),a):e},a.x=function(s){return arguments.length?(r=typeof s=="function"?s:Gn(+s),o(),a):r},a}function W1e(r){var e=Gn(.1),t,n,i;typeof r!="function"&&(r=Gn(r==null?0:+r));function a(s){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vy+=(i[l]-c.y)*n[l]*s}function o(){if(t){var s,l=t.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Gn(+s),o(),a):e},a.y=function(s){return arguments.length?(r=typeof s=="function"?s:Gn(+s),o(),a):r},a}const H1e=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:w1e,forceCollide:_1e,forceLink:M1e,forceManyBody:G1e,forceRadial:j1e,forceSimulation:z1e,forceX:U1e,forceY:W1e},Symbol.toStringTag,{value:"Module"})),j2=rs(H1e);var U2={},V1e=ze&&ze.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Y1e=ze&&ze.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),X1e=ze&&ze.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&V1e(e,r,t);return Y1e(e,r),e};Object.defineProperty(U2,"__esModule",{value:!0});var Yc=X1e(j2),zg=vn();function K1e(){function r(z){return function(){return z}}var e=function(z){return z.cluster},t=r(1),n=r(-1),i=r(100),a=r(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,h={none:{x:0,y:0}},d=[],v,p="force",g=!0,m=.1;function y(z){if(!g)return y;v.tick(),M();for(var W=0,Q=s.length,ie=void 0,se=z*m;W<Q;++W)ie=s[W],ie.vx+=(h[e(ie)].x-ie.x)*se,ie.vy+=(h[e(ie)].y-ie.y)*se}function w(){s&&b()}function b(){if(!(!s||!s.length)){if(e(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var z=x();v=Yc.forceSimulation(z.nodes).force("x",Yc.forceX(c).strength(.1)).force("y",Yc.forceY(f).strength(.1)).force("collide",Yc.forceCollide(function(W){return W.r}).iterations(4)).force("charge",Yc.forceManyBody().strength(n)).force("links",Yc.forceLink(z.nodes.length?z.links:[]).distance(i).strength(a)),d=v.nodes(),M()}}function x(){var z=[],W=[],Q={},ie=[],se={},ae=[];return se=S(s),ae=_(u),ie=Object.keys(se),ie.forEach(function(pe,De){var Je=se[pe];z.push({id:pe,size:Je.count,r:Math.sqrt(Je.sumforceNodeSize/Math.PI)}),Q[pe]=De}),ae.forEach(function(pe){var De=(0,zg.getEdgeTerminal)(pe,"source"),Je=(0,zg.getEdgeTerminal)(pe,"target"),ee=Q[De],ne=Q[Je];ee!==void 0&&ne!==void 0&&W.push({source:ee,target:ne,count:pe.count})}),{nodes:z,links:W}}function S(z){var W={};return z.forEach(function(Q){var ie=e(Q);W[ie]||(W[ie]={count:0,sumforceNodeSize:0})}),z.forEach(function(Q){var ie=e(Q),se=t(Q),ae=W[ie];ae.count=ae.count+1,ae.sumforceNodeSize=ae.sumforceNodeSize+Math.PI*(se*se)*1.3,W[ie]=ae}),W}function _(z){var W={},Q=[];z.forEach(function(se){var ae=A(se),pe=0;W[ae]!==void 0&&(pe=W[ae]),pe+=1,W[ae]=pe});var ie=Object.entries(W);return ie.forEach(function(se){var ae=se[0],pe=se[1],De=ae.split("~")[0],Je=ae.split("~")[1];De!==void 0&&Je!==void 0&&Q.push({source:De,target:Je,count:pe})}),Q}function M(){return h={none:{x:0,y:0}},d.forEach(function(z){h[z.id]={x:z.x-o[0],y:z.y-o[1]}}),h}function A(z){var W=(0,zg.getEdgeTerminal)(z,"source"),Q=(0,zg.getEdgeTerminal)(z,"target"),ie=e(l[W]),se=e(l[Q]);return ie<=se?"".concat(ie,"~").concat(se):"".concat(se,"~").concat(ie)}function E(z){l={},z.forEach(function(W){l[W.id]=W})}function T(z){return arguments.length?(p=z,w(),y):p}function C(z){return arguments.length?typeof z=="string"?(e=function(W){return W[z]},y):(e=z,y):e}function k(z){return arguments.length?(g=z,y):g}function L(z){return arguments.length?(m=z,y):m}function I(z){return arguments.length?(c=z,y):c}function O(z){return arguments.length?(f=z,y):f}function N(z){return arguments.length?(E(z||[]),s=z||[],y):s}function D(z){return arguments.length?(u=z||[],w(),y):u}function $(z){return arguments.length?(typeof z=="function"?t=z:t=r(+z),w(),y):t}function R(z){return arguments.length?(typeof z=="function"?n=z:n=r(+z),w(),y):n}function B(z){return arguments.length?(typeof z=="function"?i=z:i=r(+z),w(),y):i}function j(z){return arguments.length?(typeof z=="function"?a=z:a=r(+z),w(),y):a}function G(z){return arguments.length?(o=z,y):o}return y.initialize=function(z){s=z,w()},y.template=T,y.groupBy=C,y.enableGrouping=k,y.strength=L,y.centerX=I,y.centerY=O,y.nodes=N,y.links=D,y.forceNodeSize=$,y.nodeSize=y.forceNodeSize,y.forceCharge=R,y.forceLinkDistance=B,y.forceLinkStrength=j,y.offset=G,y.getFocis=M,y}U2.default=K1e;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.FORCE_LAYOUT_TYPE_MAP=Gs.LAYOUT_MESSAGE=void 0;Gs.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};Gs.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var q1e=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z1e=ze&&ze.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Q1e=ze&&ze.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),J1e=ze&&ze.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Z1e(e,r,t);return Q1e(e,r),e},ebe=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t1,"__esModule",{value:!0});t1.ForceLayout=void 0;var Xc=J1e(j2),tbe=ebe(U2),Au=vn(),rbe=_n,nbe=Gs,ibe=function(r){q1e(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var n=this;n.nodes=t.nodes||[];var i=t.edges||[];n.edges=i.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),n.ticking=!1},e.prototype.execute=function(t){var n=this,i=n.nodes,a=n.edges;if(!n.ticking){var o=n.forceSimulation,s=n.alphaMin,l=n.alphaDecay,u=n.alpha;if(o){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(i),n.clusterForce.links(a)),o.nodes(i),a&&n.edgeForce)n.edgeForce.links(a);else if(a&&!n.edgeForce){var h=Xc.forceLink().id(function(g){return g.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}}n.preventOverlap&&n.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Xc.forceManyBody();if(n.nodeStrength&&c.strength(n.nodeStrength),o=Xc.forceSimulation().nodes(i),n.clustering){var f=(0,tbe.default)();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),a&&f.links(a),i&&f.nodes(i),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,o.force("group",f)}if(o.force("center",Xc.forceCenter(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(l).alphaMin(s),n.preventOverlap&&n.overlapProcess(o),a){var h=Xc.forceLink().id(function(p){return p.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}if(n.workerEnabled&&!obe()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)o.on("tick",function(){n.tick()}).on("end",function(){n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{o.stop();for(var d=abe(o),v=1;v<=d;v++)o.tick(),postMessage({nodes:i,currentTick:v,totalTicks:d,type:nbe.LAYOUT_MESSAGE.TICK},void 0);n.ticking=!1}n.forceSimulation=o,n.ticking=!0}catch(p){n.ticking=!1,console.warn(p)}}},e.prototype.overlapProcess=function(t){var n=this,i=n.nodeSize,a=n.nodeSpacing,o,s,l=n.collideStrength;if((0,Au.isNumber)(a)?s=function(){return a}:(0,Au.isFunction)(a)?s=a:s=function(){return 0},!i)o=function(h){if(h.size){if((0,Au.isArray)(h.size)){var d=h.size[0]>h.size[1]?h.size[0]:h.size[1];return d/2+s(h)}if((0,Au.isObject)(h.size)){var d=h.size.width>h.size.height?h.size.width:h.size.height;return d/2+s(h)}return h.size/2+s(h)}return 10+s(h)};else if((0,Au.isFunction)(i))o=function(h){var d=i(h);return d+s(h)};else if((0,Au.isArray)(i)){var u=i[0]>i[1]?i[0]:i[1],c=u/2;o=function(h){return c+s(h)}}else if((0,Au.isNumber)(i)){var f=i/2;o=function(h){return f+s(h)}}else o=function(){return 10};t.force("collisionForce",Xc.forceCollide(o).strength(l))},e.prototype.updateCfg=function(t){var n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(rbe.Base);t1.ForceLayout=ibe;function abe(r){var e=r.alphaMin(),t=r.alphaTarget(),n=r.alpha(),i=Math.log((e-t)/(n-t))/Math.log(1-r.alphaDecay()),a=Math.ceil(i);return a}function obe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(r){var e=ze&&ze.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ze&&ze.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(t1,r)})(G2);var tp={},sbe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(tp,"__esModule",{value:!0});tp.CircularLayout=void 0;var lbe=_n,zo=vn();function ube(r,e,t,n){r.forEach(function(i,a){r[a].children=[],r[a].parent=[]}),n?e.forEach(function(i){var a=(0,zo.getEdgeTerminal)(i,"source"),o=(0,zo.getEdgeTerminal)(i,"target"),s=0;a&&(s=t[a]);var l=0;o&&(l=t[o]);var u=r[s].children,c=r[l].parent;u.push(r[l].id),c.push(r[s].id)}):e.forEach(function(i){var a=(0,zo.getEdgeTerminal)(i,"source"),o=(0,zo.getEdgeTerminal)(i,"target"),s=0;a&&(s=t[a]);var l=0;o&&(l=t[o]);var u=r[s].children,c=r[l].children;u.push(r[l].id),c.push(r[s].id)})}function cbe(r,e,t){for(var n=t.length,i=0;i<n;i++){var a=(0,zo.getEdgeTerminal)(t[i],"source"),o=(0,zo.getEdgeTerminal)(t[i],"target");if(r.id===a&&e.id===o||e.id===a&&r.id===o)return!0}return!1}function fbe(r,e){var t=r.degree,n=e.degree;return t<n?-1:t>n?1:0}var hbe=function(r){sbe(e,r);function e(t){var n=r.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,n=this,i=n.nodes,a=n.edges,o=i.length;if(o===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window<"u"&&(n.width=window.innerWidth),!n.height&&typeof window<"u"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(o===1){i[0].x=s[0],i[0].y=s[1],n.onLayoutEnd&&n.onLayoutEnd();return}var l=n.radius,u=n.startRadius,c=n.endRadius,f=n.divisions,h=n.startAngle,d=n.endAngle,v=n.angleRatio,p=n.ordering,g=n.clockwise,m=n.nodeSpacing,y=n.nodeSize,w=(d-h)/o,b={};i.forEach(function(O,N){b[O.id]=N}),n.nodeMap=b;var x=(0,zo.getDegree)(i.length,b,a);if(n.degrees=x,m){var S=(0,zo.getFuncByUnknownType)(10,m),_=(0,zo.getFuncByUnknownType)(10,y),M=-1/0;i.forEach(function(O){var N=_(O);M<N&&(M=N)});var A=0;i.forEach(function(O,N){N===0?A+=M||10:A+=(S(O)||0)+(M||10)}),l=A/(2*Math.PI)}else!l&&!u&&!c?l=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);var E=w*v,T=[];p==="topology"?T=n.topologyOrdering():p==="topology-directed"?T=n.topologyOrdering(!0):p==="degree"?T=n.degreeOrdering():T=i;for(var C=Math.ceil(o/f),k=0;k<o;++k){var L=l;!L&&u!==null&&c!==null&&(L=u+k*(c-u)/(o-1)),L||(L=10+k*100/(o-1));var I=h+k%C*E+2*Math.PI/f*Math.floor(k/C);g||(I=d-k%C*E-2*Math.PI/f*Math.floor(k/C)),T[k].x=s[0]+Math.cos(I)*L,T[k].y=s[1]+Math.sin(I)*L,T[k].weight=x[k].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:T,edges:this.edges}},e.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var n=this,i=n.degrees,a=n.edges,o=n.nodes,s=(0,zo.clone)(o),l=n.nodeMap,u=[s[0]],c=[o[0]],f=[],h=o.length;f[0]=!0,ube(s,a,l,t);var d=0;return s.forEach(function(v,p){if(p!==0)if((p===h-1||i[p].all!==i[p+1].all||cbe(u[d],v,a))&&!f[p])u.push(v),c.push(o[l[v.id]]),f[p]=!0,d++;else{for(var g=u[d].children,m=!1,y=0;y<g.length;y++){var w=l[g[y]];if(i[w].all===i[p].all&&!f[w]){u.push(s[w]),c.push(o[l[s[w].id]]),f[w]=!0,m=!0;break}}for(var b=0;!m&&(f[b]||(u.push(s[b]),c.push(o[l[s[b].id]]),f[b]=!0,m=!0),b++,b!==h););}}),c},e.prototype.degreeOrdering=function(){var t=this,n=t.nodes,i=[],a=t.degrees;return n.forEach(function(o,s){o.degree=a[s].all,i.push(o)}),i.sort(fbe),i},e.prototype.getType=function(){return"circular"},e}(lbe.Base);tp.CircularLayout=hbe;var fh={},W2={},H2={},V2={},Y2={},X2={};Object.defineProperty(X2,"__esModule",{value:!0});var dbe=function(r,e){if(r!=="next"&&r!=="prev")return e},WO=function(r){r.prev.next=r.next,r.next.prev=r.prev,delete r.next,delete r.prev},vbe=function(){function r(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return r.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return WO(t),t},r.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&WO(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t},r.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,dbe)),n=n==null?void 0:n.prev;return"[".concat(e.join(", "),"]")},r}();X2.default=vbe;var Ef;(function(r){r.DEFAULT_EDGE_NAME="\0",r.GRAPH_NODE="\0",r.EDGE_KEY_DELIM=""})(Ef||(Ef={}));function HO(r,e){var t=r.get(e)||0;r.set(e,t+1)}function VO(r,e){var t=r.get(e);t!==void 0&&(t=t-1,t>0?r.set(e,t):r.delete(e))}function j6(r,e,t,n){var i=String(e),a=String(t);if(!r&&i>a){var o=i;i=a,a=o}return i+Ef.EDGE_KEY_DELIM+a+Ef.EDGE_KEY_DELIM+(n===void 0?Ef.DEFAULT_EDGE_NAME:n)}function YO(r,e,t,n){var i=String(e),a=String(t),o={v:e,w:t};if(!r&&i>a){var s=o.v;o.v=o.w,o.w=s}return n!==void 0&&(o.name=n),o}function Aw(r,e){return j6(r,e.v,e.w,e.name)}function XO(r){return typeof r=="function"}var pbe=function(e){return e.nodes().map(function(t){var n=e.node(t),i=e.parent(t),a={id:t,value:n,parent:i};return a.value===void 0&&delete a.value,a.parent===void 0&&delete a.parent,a})},gbe=function(e){return e.edges().map(function(t){var n=e.edge(t),i={v:t.v,w:t.w,value:n,name:t.name};return i.name===void 0&&delete i.name,i.value===void 0&&delete i.value,i})},mbe=function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:pbe(e),edges:gbe(e),value:e.graph()};return t.value===void 0&&delete t.value,t},ybe=function(e){var t=new xc(e.options);return e.value!==void 0&&t.setGraph(e.value),e.nodes.forEach(function(n){t.setNode(n.id,n.value),n.parent&&t.setParent(n.id,n.parent)}),e.edges.forEach(function(n){t.setEdge(n.v,n.w,n.value,n.name)}),t};function KO(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qO(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(t),!0).forEach(function(n){bbe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KO(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bbe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wbe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xbe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Sbe(r,e,t){return e&&xbe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}var _be={compound:!1,multigraph:!1,directed:!0},xc=function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wbe(this,r),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Ef.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(i){return e.label=i,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(i){return XO(i)?e.defaultNodeLabelFn=i:e.defaultNodeLabelFn=function(){return i},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(i){return e.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.inEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.sinks=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.outEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.setNodes=function(i,a){return i.map(function(o){return e.setNode(o,a)}),e},this.hasNode=function(i){return e.nodesLabelMap.has(i)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(e.isCompound()){var a,o=(a=e.parentMap)===null||a===void 0?void 0:a.get(i);if(o!==e.GRAPH_NODE)return o}},this.removeFromParentsChildList=function(i){var a=e.parentMap.get(i);e.childrenMap.get(a).delete(i)},this.setParent=function(i,a){var o,s;e.checkCompound();for(var l=a===void 0?e.GRAPH_NODE:a,u=e.parent(l);u;){if(i===u)throw new Error("Setting "+a+" as parent of "+i+" would create a cycle");u=e.parent(u)}a&&e.setNode(a),e.setNode(i),e.removeFromParentsChildList(i),(o=e.parentMap)===null||o===void 0||o.set(i,l);var c=e.childrenMap.get(l);return c.set(i,!0),(s=e.childrenMap)===null||s===void 0||s.set(l,c),e},this.children=function(i){var a=i===void 0?e.GRAPH_NODE:i;if(e.isCompound()){var o,s=(o=e.childrenMap)===null||o===void 0?void 0:o.get(a);return s?Array.from(s.keys()):void 0}if(a===e.GRAPH_NODE)return e.nodes();if(i&&e.hasNode(i))return[]},this.predecessors=function(i){var a=e.predecessorsMap.get(i);return a?Array.from(a.keys()):void 0},this.successors=function(i){var a=e.successorsMap.get(i);return a?Array.from(a.keys()):void 0},this.neighbors=function(i){var a;if(e.hasNode(i))return Array.from(new Set((a=e.predecessors(i))===null||a===void 0?void 0:a.concat(e.successors(i))))},this.isLeaf=function(i){var a;if(e.isDirected()){var o;return!(!((o=e.successors(i))===null||o===void 0)&&o.length)}return!(!((a=e.neighbors(i))===null||a===void 0)&&a.length)},this.filterNodes=function(i){var a=e.directed,o=e.multigraph,s=e.compound,l=new r({directed:a,multigraph:o,compound:s});if(l.setGraph(e.graph()),e.nodes().forEach(function(c){i(c)&&l.setNode(c,e.node(c))}),e.edges().forEach(function(c){l.hasNode(c.v)&&l.hasNode(c.w)&&l.setEdgeObj(c,e.edge(c))}),s){var u=function(f){for(var h=e.parent(f);h!==void 0&&!l.hasNode(h);)h=e.parent(h);return h};l.nodes().forEach(function(c){l.setParent(c,u(c))})}return l},this.setDefaultEdgeLabel=function(i){return XO(i)?e.defaultEdgeLabelFn=i:e.defaultEdgeLabelFn=function(){return i},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(i,a){return e.setEdge(i.v,i.w,a,i.name)},this.setPath=function(i,a){return i.reduce(function(o,s){return e.setEdge(o,s,a),s}),e},this.edgeFromArgs=function(i,a,o){return e.edge({v:i,w:a,name:o})},this.edge=function(i){return e.edgesLabelsMap.get(Aw(e.isDirected(),i))},this.hasEdge=function(i,a,o){return e.edgesLabelsMap.has(Aw(e.isDirected(),{v:i,w:a,name:o}))},this.removeEdgeObj=function(i){var a=i.v,o=i.w,s=i.name;return e.removeEdge(a,o,s)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(i,a){var o=e.inEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.v===a})},this.outEdges=function(i,a){var o=e.outEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.w===a})},this.nodeEdges=function(i,a){var o;if(e.hasNode(i))return(o=e.inEdges(i,a))===null||o===void 0?void 0:o.concat(e.outEdges(i,a))},this.toJSON=function(){return mbe(e)},this.nodeInDegree=function(i){var a=e.inEdgesMap.get(i);return a?a.size:0},this.nodeOutDegree=function(i){var a=e.outEdgesMap.get(i);return a?a.size:0},this.nodeDegree=function(i){return e.nodeInDegree(i)+e.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var n=qO(qO({},_be),t);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Sbe(r,[{key:"setNode",value:function(t,n){var i=this.nodesLabelMap,a=this.defaultNodeLabelFn,o=this.isCompound,s=this.parentMap,l=this.childrenMap,u=this.inEdgesMap,c=this.outEdgesMap,f=this.predecessorsMap,h=this.successorsMap;if(i.has(t))return n!==void 0&&i.set(t,n),this;if(i.set(t,n||a(t)),o()){var d;s==null||s.set(t,this.GRAPH_NODE),l==null||l.set(t,new Map),l!=null&&l.has(this.GRAPH_NODE)||l==null||l.set(this.GRAPH_NODE,new Map),l==null||(d=l.get(this.GRAPH_NODE))===null||d===void 0||d.set(t,!0)}return[u,c,f,h].forEach(function(v){return v.set(t,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var n=this;if(this.hasNode(t)){var i=function(g){n.removeEdge(g.v,g.w,g.name)},a=this.inEdgesMap,o=this.outEdgesMap,s=this.predecessorsMap,l=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound()){var c,f,h;this.removeFromParentsChildList(t),(c=this.parentMap)===null||c===void 0||c.delete(t),(f=this.children(t))===null||f===void 0||f.forEach(function(p){return n.setParent(p)}),(h=this.childrenMap)===null||h===void 0||h.delete(t)}var d=a.get(t),v=o.get(t);Array.from(d.values()).forEach(function(p){return i(p)}),Array.from(v.values()).forEach(function(p){return i(p)}),u.delete(t),a.delete(t),o.delete(t),s.delete(t),l.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,n,i,a){var o,s,l=YO(this.isDirected(),t,n,a),u=Aw(this.isDirected(),l),c=l.v,f=l.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,i),this;if(a!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this.edgesLabelsMap.set(u,i||this.defaultEdgeLabelFn(c,f,a)),Object.freeze(l),this.edgesMap.set(u,l);var h=this.predecessorsMap.get(f),d=this.successorsMap.get(c);return HO(h,c),HO(d,f),(o=this.inEdgesMap.get(f))===null||o===void 0||o.set(u,l),(s=this.outEdgesMap.get(c))===null||s===void 0||s.set(u,l),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,n,i){var a=j6(this.isDirected(),t,n,i),o=this.edgesMap.get(a);if(o){var s=YO(this.isDirected(),t,n,i),l=s.v,u=s.w;this.edgesLabelsMap.delete(a),this.edgesMap.delete(a);var c=this.predecessorsMap.get(u),f=this.successorsMap.get(l);VO(c,l),VO(f,u),this.inEdgesMap.get(u).delete(a),this.outEdgesMap.get(l).delete(a),this.edgeCountNum-=1}return this}}]),r}();xc.fromJSON=ybe;function NS(r){"@babel/helpers - typeof";return NS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NS(r)}function Ebe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Mbe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Cbe(r,e,t){return e&&Mbe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Hu(){return typeof Reflect<"u"&&Reflect.get?Hu=Reflect.get:Hu=function(e,t,n){var i=Abe(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Hu.apply(this,arguments)}function Abe(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=Ls(r),r!==null););return r}function Tbe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&$S(r,e)}function $S(r,e){return $S=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},$S(r,e)}function kbe(r){var e=Obe();return function(){var n=Ls(r),i;if(e){var a=Ls(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Lbe(this,i)}}function Lbe(r,e){if(e&&(NS(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ibe(r)}function Ibe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Obe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ls(r){return Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ls(r)}var Nbe=function(r){Tbe(t,r);var e=kbe(t);function t(){var n;Ebe(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a)),n.eventPool={},n}return Cbe(t,[{key:"appendEvent",value:function(i,a){this.eventPool[i]||(this.eventPool[i]=[]),this.eventPool[i].push(a)}},{key:"removeEvent",value:function(i,a){if(this.eventPool[i]){var o=this.eventPool[i].indexOf(a);o>-1&&this.eventPool[i].splice(o,1)}}},{key:"emitEvent",value:function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];this.eventPool[i]&&this.eventPool[i].forEach(function(l){l.apply(void 0,o)})}},{key:"setNode",value:function(i,a){return Hu(Ls(t.prototype),"setNode",this).call(this,i,a),this.emitEvent("nodeAdd",i,a),this}},{key:"removeNode",value:function(i){return Hu(Ls(t.prototype),"removeNode",this).call(this,i),this.emitEvent("nodeRemove",i),this}},{key:"setEdge",value:function(i,a,o,s){return Hu(Ls(t.prototype),"setEdge",this).call(this,i,a,o,s),this.emitEvent("edgeAdd",i,a,o,s),this}},{key:"removeEdge",value:function(i,a,o){return Hu(Ls(t.prototype),"removeEdge",this).call(this,i,a,o),this.emitEvent("edgeRemove",i,a,o),this}}]),t}(xc);function $be(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Dbe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var U6=$be(function r(){var e=this;Dbe(this,r),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(t){return t.key})},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(n!==void 0)return e.arr[n].priority},this.swap=function(t,n){var i=e.arr,a=e.keyIndice,o=[i[t],i[n]],s=o[0],l=o[1];i[t]=l,i[n]=s,a.set(s.key,n),a.set(l.key,t)},this.innerDecrease=function(t){for(var n=e.arr,i=n[t].priority,a,o=t;o!==0;){var s;if(a=o>>1,((s=n[a])===null||s===void 0?void 0:s.priority)<i)break;e.swap(o,a),o=a}},this.heapify=function(t){var n=e.arr,i=t<<1,a=i+1,o=t;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(e.size()===0)throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var i=e.keyIndice,a=e.arr;if(!i.has(t)){var o=a.length;return i.set(t,o),a.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var i=e.keyIndice.get(t);if(n>e.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[i].priority," New: ").concat(n));e.arr[i].priority=n,e.innerDecrease(i)}}),Rbe=function(e,t){var n=new xc,i=new Map,a=new U6,o;function s(c){var f=c.v===o?c.w:c.v,h=a.priority(f);if(h!==void 0){var d=t(c);d<h&&(i.set(f,o),a.decrease(f,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(c){a.add(c,Number.POSITIVE_INFINITY),n.setNode(c)}),a.decrease(e.nodes()[0],0);for(var l=!1;a.size()>0;){var u;if(o=a.removeMin(),i.has(o))n.setEdge(o,i.get(o));else{if(l)throw new Error("Input graph is not connected: "+e.graph());l=!0}(u=e.nodeEdges(o))===null||u===void 0||u.forEach(s)}return n},Pbe=function(e){var t=new Set,n=[],i=e.nodes();return i.forEach(function(a){for(var o=[],s=[a];s.length>0;){var l=s.pop();if(!t.has(l)){var u,c;t.add(l),o.push(l),(u=e.successors(l))===null||u===void 0||u.forEach(function(f){return s.push(f)}),(c=e.predecessors(l))===null||c===void 0||c.forEach(function(f){return s.push(f)})}}o.length&&n.push(o)}),n},Fbe=function r(e,t,n,i,a,o){i.includes(t)||(i.push(t),n||o.push(t),a(t).forEach(function(s){return r(e,s,n,i,a,o)}),n&&o.push(t))},K2=function(e,t,n){var i=Array.isArray(t)?t:[t],a=function(u){return e.isDirected()?e.successors(u):e.neighbors(u)},o=[],s=[];return i.forEach(function(l){if(e.hasNode(l))Fbe(e,l,n==="post",s,a,o);else throw new Error("Graph does not have node: "+l)}),o};function Bbe(r,e){return Ube(r)||jbe(r,e)||Gbe(r,e)||zbe()}function zbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gbe(r,e){if(r){if(typeof r=="string")return ZO(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZO(r,e)}}function ZO(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function jbe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function Ube(r){if(Array.isArray(r))return r}var Wbe=function(){return 1},W6=function(e,t,n,i){return Hbe(e,t,n||Wbe,i||function(a){return e.outEdges(a)})},Hbe=function(e,t,n,i){var a=new Map,o=new U6,s,l,u=function(h){var d=h.v!==s?h.v:h.w,v=a.get(d),p=n(h),g=l.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+p);g<v.distance&&(v.distance=g,v.predecessor=s,o.decrease(d,g))};for(e.nodes().forEach(function(f){var h=f===t?0:Number.POSITIVE_INFINITY;a.set(f,{distance:h}),o.add(f,h)});o.size()>0&&(s=o.removeMin(),l=a.get(s),!(l&&l.distance===Number.POSITIVE_INFINITY));)i(s).forEach(u);var c={};return Array.from(a.entries()).forEach(function(f){var h=Bbe(f,2),d=h[0],v=h[1];return c[String(d)]=v,c}),c},Vbe=function(e,t,n){var i={};return e.nodes().forEach(function(a){return i[String(a)]=W6(e,a,t,n),i}),i},H6=function(e){var t=0,n=[],i=new Map,a=[];function o(s){var l,u={onStack:!0,lowlink:t,index:t};if(i.set(s,u),t+=1,n.push(s),(l=e.successors(s))===null||l===void 0||l.forEach(function(d){var v;if(i.has(d)){if(!((v=i.get(d))===null||v===void 0)&&v.onStack){var g=i.get(d);u.lowlink=Math.min(u.lowlink,g.index)}}else{o(d);var p=i.get(d);u.lowlink=Math.min(u.lowlink,p.lowlink)}}),u.lowlink===u.index){var c=[],f;do{f=n.pop();var h=i.get(f);h.onStack=!1,c.push(f)}while(s!==f);a.push(c)}}return e.nodes().forEach(function(s){i.has(s)||o(s)}),a},Ybe=function(e){return H6(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})};function DS(r){"@babel/helpers - typeof";return DS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DS(r)}function Xbe(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Kbe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qbe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ev(r,e)}function Zbe(r){var e=V6();return function(){var n=Mv(r),i;if(e){var a=Mv(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Qbe(this,i)}}function Qbe(r,e){if(e&&(DS(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jbe(r)}function Jbe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function RS(r){var e=typeof Map=="function"?new Map:void 0;return RS=function(n){if(n===null||!ewe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return k0(n,arguments,Mv(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ev(i,n)},RS(r)}function k0(r,e,t){return V6()?k0=Reflect.construct:k0=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&Ev(u,o.prototype),u},k0.apply(null,arguments)}function V6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ewe(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ev(r,e){return Ev=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ev(r,e)}function Mv(r){return Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mv(r)}var PS=function(r){qbe(t,r);var e=Zbe(t);function t(){return Kbe(this,t),e.apply(this,arguments)}return Xbe(t)}(RS(Error));function Y6(r){var e=new Set,t=new Set,n=[];function i(a){if(t.has(a))throw new PS;if(!e.has(a)){var o;t.add(a),e.add(a),(o=r.predecessors(a))===null||o===void 0||o.forEach(i),t.delete(a),n.push(a)}}if(r.sinks().forEach(i),e.size!==r.nodeCount())throw new PS;return n}var twe=function(e){try{Y6(e)}catch(t){if(t instanceof PS)return!1;throw t}return!0},rwe=function(e,t){return K2(e,t,"post")},nwe=function(e,t){return K2(e,t,"pre")},iwe=function(){return 1};function awe(r,e,t){return owe(r,e||iwe,t||function(n){return r.outEdges(n)})}function owe(r,e,t){var n={},i=r.nodes();return i.forEach(function(a){var o=String(a);n[o]={},n[o][o]={distance:0},i.forEach(function(s){a!==s&&(n[o][String(s)]={distance:Number.POSITIVE_INFINITY})}),t(a).forEach(function(s){var l=s.v===a?s.w:s.v,u=e(s);n[o][String(l)]={distance:u,predecessor:a}})}),i.forEach(function(a){var o=String(a),s=n[o];i.forEach(function(l){var u=String(l),c=n[u];i.forEach(function(f){var h=String(f),d=c[o],v=s[h],p=c[h],g=d.distance+v.distance;g<p.distance&&(p.distance=g,p.predecessor=v.predecessor)})})}),n}const swe=Object.freeze(Object.defineProperty({__proto__:null,components:Pbe,dfs:K2,dijkstra:W6,dijkstraAll:Vbe,findCycles:Ybe,floydWarshall:awe,isAcyclic:twe,postorder:rwe,preorder:nwe,prim:Rbe,tarjan:H6,topsort:Y6},Symbol.toStringTag,{value:"Module"}));var lwe=function(e,t){for(var n=e.nodes(),i=0;i<n.length;i++){var a=n[i];if(t.hasNode(a))return!0}return!1},X6=function(e,t){for(var n=e.edges(),i=0;i<n.length;i++){var a=n[i];if(t.hasEdge(a.v,a.w,a.name))return!0}return!1},K6=function(e,t){var n=e.nodes(),i=n.filter(function(a){return t.hasNode(a)});return i},q6=function(e,t){var n=e.edges(),i=n.filter(function(a){return t.hasEdge(a.v,a.w,a.name)});return i},Z6=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()},n1=function(e,t){var n=K6(e,t);return n.length===e.nodes().length},q2=function(e,t){var n=q6(e,t);return n.length===e.edges().length},uwe=function(e,t){return Z6(e,t)&&e.nodeCount()===t.nodeCount()&&n1(e,t)&&e.edgeCount()===t.edgeCount()&&q2(e,t)},cwe=function(e,t){return n1(e,t)&&q2(e,t)};function fwe(r,e){return pwe(r)||vwe(r,e)||dwe(r,e)||hwe()}function hwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dwe(r,e){if(r){if(typeof r=="string")return QO(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QO(r,e)}}function QO(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function vwe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function pwe(r){if(Array.isArray(r))return r}function gwe(r){return r instanceof xc}function Nm(r){if(r.isMultigraph())return!1;for(var e=r.edges(),t=new Map,n=0;n<e.length;n++){var i=e[n];if(i.v===i.w)return!1;var a=[i.v,i.w].sort(),o=fwe(a,2),s=o[0],l=o[1],u="".concat(s,"-").concat(l);if(t.has(u))return!1;t.set(u,!0)}return!0}function mwe(r){return r.nodes().length===0}function ywe(r){for(var e=r.edges(),t=0;t<e.length;t++){var n=e[t];if(n.v===n.w)return!0}return!1}const bwe=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:ywe,isGraph:gwe,isNullGraph:mwe,isSimpleGraph:Nm},Symbol.toStringTag,{value:"Module"}));var wwe=function(e,t){if(!Nm(e)||!Nm(t)||!n1(e,t)||X6(e,t))return!1;var n=e.nodeCount();return e.edgeCount()+t.edgeCount()===n*(n-1)/2};const xwe=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:q2,containAllSameNodes:n1,containSameEdges:X6,containSameNodes:lwe,getSameEdges:q6,getSameNodes:K6,isGraphComplement:wwe,isGraphContainsAnother:cwe,isGraphOptionSame:Z6,isGraphSame:uwe},Symbol.toStringTag,{value:"Module"}));var Swe=function(e){if(!Nm(e))return null;for(var t=e.nodeCount(),n=new xc({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),i=e.nodes(),a=0;a<t;a++){var o=i[a];n.setNode(o,e.node(o));for(var s=a+1;s<t;s++){var l=i[s];e.hasEdge(o,l)||n.setEdge(o,l)}}return n};const _we=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:Swe},Symbol.toStringTag,{value:"Module"})),Ewe=Object.freeze(Object.defineProperty({__proto__:null,Graph:xc,GraphWithEvent:Nbe,algorithm:swe,comparision:xwe,essence:bwe,generate:_we},Symbol.toStringTag,{value:"Module"})),i1=rs(Ewe);var Q6=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mwe=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Y2,"__esModule",{value:!0});var Cwe=Mwe(X2),Awe=i1,Twe=function(r){Q6(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Cwe.default),kwe=function(r){Q6(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Awe.Graph),Lwe=function(){return 1},Iwe=function(r,e){var t;if(r.nodeCount()<=1)return[];var n=Nwe(r,e||Lwe),i=Owe(n.graph,n.buckets,n.zeroIdx);return(t=i.map(function(a){return r.outEdges(a.v,a.w)}))===null||t===void 0?void 0:t.flat()},Owe=function(r,e,t){for(var n=[],i=e[e.length-1],a=e[0],o;r.nodeCount();){for(;o=a.dequeue();)Tw(r,e,t,o);for(;o=i.dequeue();)Tw(r,e,t,o);if(r.nodeCount()){for(var s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){n=n.concat(Tw(r,e,t,o,!0));break}}}return n},Tw=function(r,e,t,n,i){var a,o,s=[];return(a=r.inEdges(n.v))===null||a===void 0||a.forEach(function(l){var u=r.edge(l),c=r.node(l.v);i&&s.push({v:l.v,w:l.w,in:0,out:0}),c.out===void 0&&(c.out=0),c.out-=u,FS(e,t,c)}),(o=r.outEdges(n.v))===null||o===void 0||o.forEach(function(l){var u=r.edge(l),c=l.w,f=r.node(c);f.in===void 0&&(f.in=0),f.in-=u,FS(e,t,f)}),r.removeNode(n.v),i?s:void 0},Nwe=function(r,e){var t=new kwe,n=0,i=0;r.nodes().forEach(function(u){t.setNode(u,{v:u,in:0,out:0})}),r.edges().forEach(function(u){var c=t.edge(u)||0,f=(e==null?void 0:e(u))||1,h=c+f;t.setEdge(u.v,u.w,h),i=Math.max(i,t.node(u.v).out+=f),n=Math.max(n,t.node(u.w).in+=f)});for(var a=[],o=i+n+3,s=0;s<o;s++)a.push(new Twe);var l=n+1;return t.nodes().forEach(function(u){FS(a,l,t.node(u))}),{buckets:a,zeroIdx:l,graph:t}},FS=function(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)};Y2.default=Iwe;var $we=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(V2,"__esModule",{value:!0});var Dwe=$we(Y2),Rwe=function(r){var e=function(n){return function(i){var a;return((a=n.edge(i))===null||a===void 0?void 0:a.weight)||1}},t=r.graph().acyclicer==="greedy"?(0,Dwe.default)(r,e(r)):Pwe(r);t==null||t.forEach(function(n){var i=r.edge(n);r.removeEdgeObj(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,"rev-".concat(Math.random()))})},Pwe=function(r){var e=[],t={},n={},i=function(a){var o;n[a]||(n[a]=!0,t[a]=!0,(o=r.outEdges(a))===null||o===void 0||o.forEach(function(s){t[s.w]?e.push(s):i(s.w)}),delete t[a])};return r.nodes().forEach(i),e},Fwe=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.reversed){r.removeEdgeObj(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})};V2.default={run:Rwe,undo:Fwe};var Z2={},fa={},Vs={},Bwe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Graph=void 0;var zwe=i1,Gwe=function(r){Bwe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(zwe.Graph);Vs.Graph=Gwe;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.minBy=r.notime=r.time=r.partition=r.maxRank=r.addBorderNode=r.removeEmptyRanks=r.normalizeRanks=r.buildLayerMatrix=r.intersectRect=r.predecessorWeights=r.successorWeights=r.zipObject=r.asNonCompoundGraph=r.simplify=r.addDummyNode=void 0;var e=vn(),t=Vs,n=function(b,x){return Number(b)-Number(x)},i=function(b,x,S,_){var M;do M="".concat(_).concat(Math.random());while(b.hasNode(M));return S.dummy=x,b.setNode(M,S),M};r.addDummyNode=i;var a=function(b){var x=new t.Graph().setGraph(b.graph());return b.nodes().forEach(function(S){x.setNode(S,b.node(S))}),b.edges().forEach(function(S){var _=x.edgeFromArgs(S.v,S.w)||{weight:0,minlen:1},M=b.edge(S);x.setEdge(S.v,S.w,{weight:_.weight+M.weight,minlen:Math.max(_.minlen,M.minlen)})}),x};r.simplify=a;var o=function(b){var x=new t.Graph({multigraph:b.isMultigraph()}).setGraph(b.graph());return b.nodes().forEach(function(S){var _;!((_=b.children(S))===null||_===void 0)&&_.length||x.setNode(S,b.node(S))}),b.edges().forEach(function(S){x.setEdgeObj(S,b.edge(S))}),x};r.asNonCompoundGraph=o;var s=function(b,x){return b==null?void 0:b.reduce(function(S,_,M){return S[_]=x[M],S},{})};r.zipObject=s;var l=function(b){var x={};return b.nodes().forEach(function(S){var _,M={};(_=b.outEdges(S))===null||_===void 0||_.forEach(function(A){var E;M[A.w]=(M[A.w]||0)+(((E=b.edge(A))===null||E===void 0?void 0:E.weight)||0)}),x[S]=M}),x};r.successorWeights=l;var u=function(b){var x=b.nodes(),S=x.map(function(_){var M,A={};return(M=b.inEdges(_))===null||M===void 0||M.forEach(function(E){A[E.v]=(A[E.v]||0)+b.edge(E).weight}),A});return(0,r.zipObject)(x,S)};r.predecessorWeights=u;var c=function(b,x){var S=Number(b.x),_=Number(b.y),M=Number(x.x)-S,A=Number(x.y)-_,E=Number(b.width)/2,T=Number(b.height)/2;if(!M&&!A)return{x:0,y:0};var C,k;return Math.abs(A)*E>Math.abs(M)*T?(A<0&&(T=-T),C=T*M/A,k=T):(M<0&&(E=-E),C=E,k=E*A/M),{x:S+C,y:_+k}};r.intersectRect=c;var f=function(b){for(var x=[],S=(0,r.maxRank)(b)+1,_=0;_<S;_++)x.push([]);b.nodes().forEach(function(M){var A=b.node(M);if(A){var E=A.rank;E!==void 0&&x[E]&&x[E].push(M)}});for(var _=0;_<S;_++)x[_]=x[_].sort(function(A,E){var T,C;return n((T=b.node(A))===null||T===void 0?void 0:T.order,(C=b.node(E))===null||C===void 0?void 0:C.order)});return x};r.buildLayerMatrix=f;var h=function(b){var x=b.nodes().filter(function(_){var M;return((M=b.node(_))===null||M===void 0?void 0:M.rank)!==void 0}).map(function(_){return b.node(_).rank}),S=Math.min.apply(Math,x);b.nodes().forEach(function(_){var M=b.node(_);M.hasOwnProperty("rank")&&S!==1/0&&(M.rank-=S)})};r.normalizeRanks=h;var d=function(b){var x=b.nodes(),S=x.filter(function(k){var L;return((L=b.node(k))===null||L===void 0?void 0:L.rank)!==void 0}).map(function(k){return b.node(k).rank}),_=Math.min.apply(Math,S),M=[];x.forEach(function(k){var L,I=(((L=b.node(k))===null||L===void 0?void 0:L.rank)||0)-_;M[I]||(M[I]=[]),M[I].push(k)});for(var A=0,E=b.graph().nodeRankFactor||0,T=0;T<M.length;T++){var C=M[T];C===void 0?T%E!==0&&(A-=1):A&&(C==null||C.forEach(function(k){var L=b.node(k);L&&(L.rank=L.rank||0,L.rank+=A)}))}};r.removeEmptyRanks=d;var v=function(b,x,S,_){var M={width:0,height:0};return(0,e.isNumber)(S)&&(0,e.isNumber)(_)&&(M.rank=S,M.order=_),(0,r.addDummyNode)(b,"border",M,x)};r.addBorderNode=v;var p=function(b){var x;return b.nodes().forEach(function(S){var _,M=(_=b.node(S))===null||_===void 0?void 0:_.rank;M!==void 0&&(x===void 0||M>x)&&(x=M)}),x||(x=0),x};r.maxRank=p;var g=function(b,x){var S={lhs:[],rhs:[]};return b==null||b.forEach(function(_){x(_)?S.lhs.push(_):S.rhs.push(_)}),S};r.partition=g;var m=function(b,x){var S=Date.now();try{return x()}finally{console.log("".concat(b," time: ").concat(Date.now()-S,"ms"))}};r.time=m;var y=function(b,x){return x()};r.notime=y;var w=function(b,x){return b.reduce(function(S,_){var M=x(S),A=x(_);return M>A?_:S})};r.minBy=w})(fa);Object.defineProperty(Z2,"__esModule",{value:!0});var jwe=fa,Uwe=function(r){r.graph().dummyChains=[],r.edges().forEach(function(e){return Wwe(r,e)})},Wwe=function(r,e){var t=e.v,n=r.node(t).rank,i=e.w,a=r.node(i).rank,o=e.name,s=r.edge(e),l=s.labelRank;if(a!==n+1){r.removeEdgeObj(e);var u=r.graph(),c,f,h;for(h=0,++n;n<a;++h,++n)s.points=[],f={edgeLabel:s,width:0,height:0,edgeObj:e,rank:n},c=(0,jwe.addDummyNode)(r,"edge",f,"_d"),n===l&&(f.width=s.width,f.height=s.height,f.dummy="edge-label",f.labelpos=s.labelpos),r.setEdge(t,c,{weight:s.weight},o),h===0&&(u.dummyChains||(u.dummyChains=[]),u.dummyChains.push(c)),t=c;r.setEdge(t,i,{weight:s.weight},o)}},Hwe=function(r){var e;(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(t){var n=r.node(t),i=n.edgeLabel,a;n.edgeObj&&r.setEdgeObj(n.edgeObj,i);for(var o=t;n.dummy;)a=r.successors(o)[0],r.removeNode(o),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),o=a,n=r.node(o)})};Z2.default={run:Uwe,undo:Hwe};var Q2={},io={};Object.defineProperty(io,"__esModule",{value:!0});io.slack=io.longestPathWithLayer=io.longestPath=void 0;var J6=function(r){var e,t={},n=function(i){var a,o=r.node(i);if(!o)return 0;if(t[i])return o.rank;t[i]=!0;var s;return(a=r.outEdges(i))===null||a===void 0||a.forEach(function(l){var u=n(l.w),c=r.edge(l).minlen,f=u-c;f&&(s===void 0||f<s)&&(s=f)}),s||(s=0),o.rank=s,s};(e=r.sources())===null||e===void 0||e.forEach(function(i){return n(i)})};io.longestPath=J6;var ez=function(r){var e,t={},n,i=function(s){var l,u=r.node(s);if(!u)return 0;if(t[s])return u.rank;t[s]=!0;var c;return(l=r.outEdges(s))===null||l===void 0||l.forEach(function(f){var h=i(f.w),d=r.edge(f).minlen,v=h-d;v&&(c===void 0||v<c)&&(c=v)}),c||(c=0),(n===void 0||c<n)&&(n=c),u.rank=c,c};(e=r.sources())===null||e===void 0||e.forEach(function(s){r.node(s)&&i(s)}),n===void 0&&(n=0);var a={},o=function(s,l){var u,c=r.node(s),f=isNaN(c.layer)?l:c.layer;(c.rank===void 0||c.rank<f)&&(c.rank=f),!a[s]&&(a[s]=!0,(u=r.outEdges(s))===null||u===void 0||u.map(function(h){o(h.w,f+r.edge(h).minlen)}))};r.nodes().forEach(function(s){var l=r.node(s);l&&(isNaN(l.layer)?l.rank-=n:o(s,l.layer))})};io.longestPathWithLayer=ez;var tz=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen};io.slack=tz;io.default={longestPath:J6,longestPathWithLayer:ez,slack:tz};var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.feasibleTreeWithLayer=Vl.feasibleTree=void 0;var hc=io,Vwe=fa,rz=Vs,nz=function(r){var e=new rz.Graph({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,a;Ywe(e,r)<n;)i=az(e,r),a=e.hasNode(i.v)?(0,hc.slack)(r,i):-(0,hc.slack)(r,i),oz(e,r,a);return e};Vl.feasibleTree=nz;var Ywe=function(r,e){var t=function(n){e.nodeEdges(n).forEach(function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&!(0,hc.slack)(e,i)&&(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})};return r.nodes().forEach(t),r.nodeCount()},iz=function(r){var e=new rz.Graph({directed:!1}),t=r.nodes()[0],n=r.nodes().filter(function(o){return!!r.node(o)}).length;e.setNode(t,{});for(var i,a;Xwe(e,r)<n;)i=az(e,r),a=e.hasNode(i.v)?(0,hc.slack)(r,i):-(0,hc.slack)(r,i),oz(e,r,a);return e};Vl.feasibleTreeWithLayer=iz;var Xwe=function(r,e){var t=function(n){var i;(i=e.nodeEdges(n))===null||i===void 0||i.forEach(function(a){var o=a.v,s=n===o?a.w:o;!r.hasNode(s)&&(e.node(s).layer!==void 0||!(0,hc.slack)(e,a))&&(r.setNode(s,{}),r.setEdge(n,s,{}),t(s))})};return r.nodes().forEach(t),r.nodeCount()},az=function(r,e){return(0,Vwe.minBy)(e.edges(),function(t){return r.hasNode(t.v)!==r.hasNode(t.w)?(0,hc.slack)(e,t):1/0})},oz=function(r,e,t){r.nodes().forEach(function(n){e.node(n).rank||(e.node(n).rank=0),e.node(n).rank+=t})};Vl.default={feasibleTree:nz,feasibleTreeWithLayer:iz};var sz={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.exchangeEdges=r.enterEdge=r.leaveEdge=r.initLowLimValues=r.calcCutValue=r.initCutValues=void 0;var e=Vl,t=io,n=fa,i=i1,a=i.algorithm.preorder,o=i.algorithm.postorder,s=function(w){var b=(0,n.simplify)(w);(0,t.longestPath)(b);var x=(0,e.feasibleTree)(b);(0,r.initLowLimValues)(x),(0,r.initCutValues)(x,b);for(var S,_;S=(0,r.leaveEdge)(x);)_=(0,r.enterEdge)(x,b,S),(0,r.exchangeEdges)(x,b,S,_)},l=function(w,b){var x=o(w,w.nodes());x=x==null?void 0:x.slice(0,(x==null?void 0:x.length)-1),x==null||x.forEach(function(S){u(w,b,S)})};r.initCutValues=l;var u=function(w,b,x){var S=w.node(x),_=S.parent;w.edgeFromArgs(x,_).cutvalue=(0,r.calcCutValue)(w,b,x)},c=function(w,b,x){var S,_=w.node(x),M=_.parent,A=!0,E=b.edgeFromArgs(x,M),T=0;return E||(A=!1,E=b.edgeFromArgs(M,x)),T=E.weight,(S=b.nodeEdges(x))===null||S===void 0||S.forEach(function(C){var k=C.v===x,L=k?C.w:C.v;if(L!==M){var I=k===A,O=b.edge(C).weight;if(T+=I?O:-O,m(w,x,L)){var N=w.edgeFromArgs(x,L).cutvalue;T+=I?-N:N}}}),T};r.calcCutValue=c;var f=function(w,b){b===void 0&&(b=w.nodes()[0]),h(w,{},1,b)};r.initLowLimValues=f;var h=function(w,b,x,S,_){var M,A=x,E=x,T=w.node(S);return b[S]=!0,(M=w.neighbors(S))===null||M===void 0||M.forEach(function(C){b[C]||(E=h(w,b,E,C,S))}),T.low=A,T.lim=E++,_?T.parent=_:delete T.parent,E},d=function(w){return w.edges().find(function(b){return w.edge(b).cutvalue<0})};r.leaveEdge=d;var v=function(w,b,x){var S=x.v,_=x.w;b.hasEdge(S,_)||(S=x.w,_=x.v);var M=w.node(S),A=w.node(_),E=M,T=!1;M.lim>A.lim&&(E=A,T=!0);var C=b.edges().filter(function(k){return T===y(w,w.node(k.v),E)&&T!==y(w,w.node(k.w),E)});return(0,n.minBy)(C,function(k){return(0,t.slack)(b,k)})};r.enterEdge=v;var p=function(w,b,x,S){var _=x.v,M=x.w;w.removeEdge(_,M),w.setEdge(S.v,S.w,{}),(0,r.initLowLimValues)(w),(0,r.initCutValues)(w,b),g(w,b)};r.exchangeEdges=p;var g=function(w,b){var x=w.nodes().find(function(_){var M;return!(!((M=b.node(_))===null||M===void 0)&&M.parent)}),S=a(w,x);S=S==null?void 0:S.slice(1),S==null||S.forEach(function(_){var M=w.node(_).parent,A=b.edgeFromArgs(_,M),E=!1;A||(A=b.edgeFromArgs(M,_),E=!0),b.node(_).rank=b.node(M).rank+(E?A.minlen:-A.minlen)})},m=function(w,b,x){return w.hasEdge(b,x)},y=function(w,b,x){return x.low<=b.lim&&b.lim<=x.lim};r.default=s})(sz);var Kwe=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q2,"__esModule",{value:!0});var lz=io,qwe=Vl,Zwe=Kwe(sz),Qwe=function(r){switch(r.graph().ranker){case"network-simplex":exe(r);break;case"tight-tree":JO(r);break;case"longest-path":Jwe(r);break;default:JO(r)}},Jwe=lz.longestPath,JO=function(r){(0,lz.longestPathWithLayer)(r),(0,qwe.feasibleTreeWithLayer)(r)},exe=function(r){(0,Zwe.default)(r)};Q2.default=Qwe;var J2={};Object.defineProperty(J2,"__esModule",{value:!0});var txe=function(r){var e,t={},n=0,i=function(a){var o,s=n;(o=r.children(a))===null||o===void 0||o.forEach(i),t[a]={low:s,lim:n++}};return(e=r.children())===null||e===void 0||e.forEach(i),t},rxe=function(r,e,t,n){var i=[],a=[],o=Math.min(e[t].low,e[n].low),s=Math.max(e[t].lim,e[n].lim),l,u;l=t;do l=r.parent(l),i.push(l);while(l&&(e[l].low>o||s>e[l].lim));for(u=l,l=n;l&&l!==u;)a.push(l),l=r.parent(l);return{lca:u,path:i.concat(a.reverse())}},nxe=function(r){var e,t=txe(r);(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(n){var i,a,o=n,s=r.node(o),l=s.edgeObj;if(l)for(var u=rxe(r,t,l.v,l.w),c=u.path,f=u.lca,h=0,d=c[h],v=!0;o!==l.w;){if(s=r.node(o),v){for(;d!==f&&((i=r.node(d))===null||i===void 0?void 0:i.maxRank)<s.rank;)h++,d=c[h];d===f&&(v=!1)}if(!v){for(;h<c.length-1&&((a=r.node(c[h+1]))===null||a===void 0?void 0:a.minRank)<=s.rank;)h++;d=c[h]}r.setParent(o,d),o=r.successors(o)[0]}})};J2.default=nxe;var eM={};Object.defineProperty(eM,"__esModule",{value:!0});var BS=fa,ixe=function(r){var e,t=(0,BS.addDummyNode)(r,"root",{},"_root"),n=axe(r),i=Math.max.apply(Math,Object.values(n));Math.abs(i)===1/0&&(i=1);var a=i-1,o=2*a+1;r.graph().nestingRoot=t,r.edges().forEach(function(l){r.edge(l).minlen*=o});var s=oxe(r)+1;(e=r.children())===null||e===void 0||e.forEach(function(l){uz(r,t,o,s,a,n,l)}),r.graph().nodeRankFactor=o},uz=function(r,e,t,n,i,a,o){var s=r.children(o);if(!(s!=null&&s.length)){o!==e&&r.setEdge(e,o,{weight:0,minlen:t});return}var l=(0,BS.addBorderNode)(r,"_bt"),u=(0,BS.addBorderNode)(r,"_bb"),c=r.node(o);r.setParent(l,o),c.borderTop=l,r.setParent(u,o),c.borderBottom=u,s==null||s.forEach(function(f){uz(r,e,t,n,i,a,f);var h=r.node(f),d=h.borderTop?h.borderTop:f,v=h.borderBottom?h.borderBottom:f,p=h.borderTop?n:2*n,g=d!==v?1:i-a[o]+1;r.setEdge(l,d,{minlen:g,weight:p,nestingEdge:!0}),r.setEdge(v,u,{minlen:g,weight:p,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,l,{weight:0,minlen:i+a[o]})},axe=function(r){var e,t={},n=function(i,a){var o=r.children(i);o==null||o.forEach(function(s){return n(s,a+1)}),t[i]=a};return(e=r.children())===null||e===void 0||e.forEach(function(i){return n(i,1)}),t},oxe=function(r){var e=0;return r.edges().forEach(function(t){e+=r.edge(t).weight}),e},sxe=function(r){var e=r.graph();e.nestingRoot&&r.removeNode(e.nestingRoot),delete e.nestingRoot,r.edges().forEach(function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdgeObj(t)})};eM.default={run:ixe,cleanup:sxe};var tM={};Object.defineProperty(tM,"__esModule",{value:!0});var lxe=fa,uxe=function(r){var e,t=function(n){var i=r.children(n),a=r.node(n);if(i!=null&&i.length&&i.forEach(function(l){return t(l)}),a.hasOwnProperty("minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,s=a.maxRank+1;o<s;o+=1)eN(r,"borderLeft","_bl",n,a,o),eN(r,"borderRight","_br",n,a,o)}};(e=r.children())===null||e===void 0||e.forEach(function(n){return t(n)})},eN=function(r,e,t,n,i,a){var o={rank:a,borderType:e,width:0,height:0},s=i[e][a-1],l=(0,lxe.addDummyNode)(r,"border",o,t);i[e][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})};tM.default=uxe;var rM={};Object.defineProperty(rM,"__esModule",{value:!0});var cxe=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="lr"||t==="rl")&&cz(r)},fxe=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="bt"||t==="rl")&&hxe(r),(t==="lr"||t==="rl")&&(dxe(r),cz(r))},cz=function(r){r.nodes().forEach(function(e){tN(r.node(e))}),r.edges().forEach(function(e){tN(r.edge(e))})},tN=function(r){var e=r.width;r.width=r.height,r.height=e},hxe=function(r){r.nodes().forEach(function(e){kw(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(i){return kw(i)}),n.hasOwnProperty("y")&&kw(n)})},kw=function(r){r!=null&&r.y&&(r.y=-r.y)},dxe=function(r){r.nodes().forEach(function(e){Lw(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(i){return Lw(i)}),n.hasOwnProperty("x")&&Lw(n)})},Lw=function(r){var e=r.x;r.x=r.y,r.y=e};rM.default={adjust:cxe,undo:fxe};var nM={},iM={};function fz(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]}function Iw(r){var e=Math.round(r).toString(16);return e.length===1?"0"+e:e}function hz(r){return"#"+Iw(r[0])+Iw(r[1])+Iw(r[2])}var zi=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},vxe=function(r,e){return zi(r)?r.indexOf(e)>-1:!1};const $m=vxe;var dz=function(r,e){if(!zi(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},pxe=function(r,e){return e===void 0&&(e=[]),dz(r,function(t){return!$m(e,t)})};const gxe=pxe,ha=function(r){return typeof r=="function"};var tu=function(r){return r==null},mxe={}.toString,as=function(r,e){return mxe.call(r)==="[object "+e+"]"};const In=function(r){return Array.isArray?Array.isArray(r):as(r,"Array")},a1=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function Xf(r,e){if(r){var t;if(In(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(a1(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var yxe=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return Xf(r,function(t,n){ha(r)&&n==="prototype"||e.push(n)}),e};const vz=yxe;function pz(r,e){var t=vz(e),n=t.length;if(tu(r))return!n;for(var i=0;i<n;i+=1){var a=t[i];if(e[a]!==r[a]||!(a in r))return!1}return!0}var bxe=function(r){return typeof r=="object"&&r!==null};const Dm=bxe;var wxe=function(r){if(!Dm(r)||!as(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};const Kf=wxe;function xxe(r,e){if(!In(r))return null;var t;if(ha(e)&&(t=e),Kf(e)&&(t=function(i){return pz(i,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function Sxe(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var _xe=function(r,e){for(var t=null,n=0;n<r.length;n++){var i=r[n],a=i[e];if(!tu(a)){In(a)?t=a[0]:t=a;break}}return t};const Exe=_xe;var Mxe=function(r){if(!In(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};const Cxe=Mxe;var gz=function(r,e){if(e===void 0&&(e=[]),!In(r))e.push(r);else for(var t=0;t<r.length;t+=1)gz(r[t],e);return e};const Axe=gz,mz=function(r){if(In(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},yz=function(r){if(In(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var Txe=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(In(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var i=mz(e),a=yz(e);return{min:a,max:i}};const kxe=Txe;var bz=Array.prototype,Lxe=bz.splice,Ixe=bz.indexOf,Oxe=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=Ixe.call(r,i))>-1;)Lxe.call(r,a,1);return r};const Nxe=Oxe;var $xe=Array.prototype.splice,Dxe=function(e,t){if(!zi(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var a=void 0,o=t[n];(n===i||o!==a)&&(a=o,$xe.call(e,o,1))}return e};const wz=Dxe;var Rxe=function(r,e,t){if(!In(r)&&!Kf(r))return r;var n=t;return Xf(r,function(i,a){n=e(n,i,a)}),n};const xz=Rxe;var Pxe=function(r,e){var t=[];if(!zi(r))return t;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];e(o,n,r)&&(t.push(o),i.push(n))}return wz(r,i),t};const Fxe=Pxe,Yl=function(r){return as(r,"String")};function Bxe(r,e){var t;if(ha(e))t=function(i,a){return e(i)-e(a)};else{var n=[];Yl(e)?n.push(e):In(e)&&(n=e),t=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(t),r}function Sz(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var zxe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Sz([].concat.apply([],r))};const Gxe=zxe,jxe=function(r,e){for(var t=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[e];if(!tu(o)){In(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(t.push(l),n[l]=!0)}}}return t};function Uxe(r){if(zi(r))return r[0]}function Wxe(r){if(zi(r)){var e=r;return e[e.length-1]}}function Hxe(r,e){return In(r)||Yl(r)?r[0]===e:!1}function Vxe(r,e){return In(r)||Yl(r)?r[r.length-1]===e:!1}var Yxe=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0};const Xxe=Yxe;var Kxe=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1};const qxe=Kxe;var Zxe=Object.prototype.hasOwnProperty;function _z(r,e){if(!e||!In(r))return{};for(var t={},n=ha(e)?e:function(s){return s[e]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),Zxe.call(t,i)?t[i].push(o):t[i]=[o]}return t}function Ez(r,e){if(!e)return{0:r};if(!ha(e)){var t=In(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=t.length;a<o;a++)i+=n[t[a]]&&n[t[a]].toString();return i}}return _z(r,e)}const Qxe=function(r,e){if(!e)return[r];var t=Ez(r,e),n=[];for(var i in t)n.push(t[i]);return n};function Jxe(r,e){return r["_wrap_"+e]}function eSe(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var rN={};function tSe(r){var e=rN[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,rN[r]=e}return e}function rSe(r){var e=0,t=0,n=0,i=0;return In(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var nSe=function(r,e,t){return r<e?e:r>t?t:r};const iSe=nSe;var aSe=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var i=t.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))};const oSe=aSe;var Ys=function(r){return as(r,"Number")},sSe=function(r){return Ys(r)&&r%1!==0};const lSe=sSe;var uSe=function(r){return Ys(r)&&r%2===0};const cSe=uSe;var fSe=Number.isInteger?Number.isInteger:function(r){return Ys(r)&&r%1===0};const hSe=fSe;var dSe=function(r){return Ys(r)&&r<0};const vSe=dSe;var pSe=1e-5;function gSe(r,e,t){return t===void 0&&(t=pSe),Math.abs(r-e)<t}var mSe=function(r){return Ys(r)&&r%2!==0};const ySe=mSe;var bSe=function(r){return Ys(r)&&r>0};const wSe=bSe,xSe=function(r,e){if(In(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=ha(e)?e(a):a[e];o>n&&(t=a,n=o)}return t}},SSe=function(r,e){if(In(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],o=ha(e)?e(a):a[e];o<n&&(t=a,n=o)}return t}};var _Se=function(r,e){return(r%e+e)%e};const ESe=_Se;var MSe=180/Math.PI,CSe=function(r){return MSe*r};const ASe=CSe,TSe=parseInt;var kSe=Math.PI/180,LSe=function(r){return kSe*r};const ISe=LSe,nN=function(r,e){return r.hasOwnProperty(e)};var Mz=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return Xf(r,function(t,n){ha(r)&&n==="prototype"||e.push(t)}),e};const OSe=function(r,e){return $m(Mz(r),e)},rp=function(r){return tu(r)?"":r.toString()};var NSe=function(r){return rp(r).toLowerCase()};const $Se=NSe;var DSe=function(r){var e=rp(r);return e.charAt(0).toLowerCase()+e.substring(1)};const RSe=DSe;function PSe(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var FSe=function(r){return rp(r).toUpperCase()};const BSe=FSe;var zSe=function(r){var e=rp(r);return e.charAt(0).toUpperCase()+e.substring(1)};const GSe=zSe;var jSe={}.toString,USe=function(r){return jSe.call(r).replace(/^\[object /,"").replace(/]$/,"")};const Cz=USe;var WSe=function(r){return as(r,"Arguments")};const HSe=WSe;var VSe=function(r){return as(r,"Boolean")};const YSe=VSe;var XSe=function(r){return as(r,"Date")};const KSe=XSe;var qSe=function(r){return as(r,"Error")};const ZSe=qSe;function QSe(r){return Ys(r)&&isFinite(r)}var JSe=function(r){return r===null};const e_e=JSe;var t_e=Object.prototype,r_e=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||t_e;return r===t};const Az=r_e;var n_e=function(r){return as(r,"RegExp")};const i_e=n_e;var a_e=function(r){return r===void 0};const o_e=a_e;var s_e=function(r){return r instanceof Element||r instanceof Document};const l_e=s_e;function u_e(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function c_e(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function Ow(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function Mf(r,e,t,n){return e&&Ow(r,e),t&&Ow(r,t),n&&Ow(r,n),r}var f_e=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var i=r[n];ha(i)&&(i=i.prototype),Mf(t.prototype,i)}};const h_e=f_e;var zS=function(r){if(typeof r!="object"||r===null)return r;var e;if(In(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=zS(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=zS(r[i]):e[i]=r[i]}return e};const d_e=zS;function v_e(r,e,t){var n;return function(){var i=this,a=arguments,o=function(){n=null,t||r.apply(i,a)},s=t&&!n;clearTimeout(n),n=setTimeout(o,e),s&&r.apply(i,a)}}function p_e(r){var e,t,n,i=r||1;function a(s,l){++e>i&&(n=t,o(1),++e),t[s]=l}function o(s){e=0,t=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return t[s]!==void 0||n[s]!==void 0},get:function(s){var l=t[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){t[s]!==void 0?t[s]=l:a(s,l)}}}const Tz=function(r,e,t){if(t===void 0&&(t=128),!ha(r))throw new TypeError("Expected a function");var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=r.apply(this,i);return s.set(o,l),l};return n.cache=p_e(t),n};var g_e=5;function m_e(r,e){if(Object.hasOwn)return Object.hasOwn(r,e);if(r==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(r),e)}function kz(r,e,t,n){t=t||0,n=n||g_e;for(var i in e)if(m_e(e,i)){var a=e[i];a!==null&&Kf(a)?(Kf(r[i])||(r[i]={}),t<n?kz(r[i],a,t+1,n):r[i]=e[i]):In(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var y_e=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)kz(r,e[n]);return r};const b_e=y_e;var w_e=function(r,e,t,n){ha(e)||(t=e,e=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,r);return r.prototype=Mf(a,r.prototype),r.superclass=i(e.prototype,e),Mf(a,t),Mf(r,n),r};const x_e=w_e;var S_e=function(r,e){if(!zi(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,i=0;i<r.length;i++)if(r[i]===e){n=i;break}return n};const __e=S_e;var E_e=Object.prototype.hasOwnProperty;function M_e(r){if(tu(r))return!0;if(zi(r))return!r.length;var e=Cz(r);if(e==="Map"||e==="Set")return!r.size;if(Az(r))return!Object.keys(r).length;for(var t in r)if(E_e.call(r,t))return!1;return!0}var GS=function(r,e){if(r===e)return!0;if(!r||!e||Yl(r)||Yl(e))return!1;if(zi(r)||zi(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=GS(r[n],e[n]),!!t);n++);return t}if(Dm(r)||Dm(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=GS(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const Lz=GS,C_e=function(r,e,t){return ha(t)?!!t(r,e):Lz(r,e)};var A_e=function(r,e){if(!zi(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(e(i,n))}return t};const T_e=A_e;var k_e=function(r){return r};const L_e=function(r,e){e===void 0&&(e=k_e);var t={};return a1(r)&&!tu(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},I_e=function(r,e,t){for(var n=0,i=Yl(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},O_e=function(r,e,t){var n=r,i=Yl(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(a1(n[a])||(n[a]=Ys(i[o+1])?[]:{}),n=n[a]):n[a]=t}),r};var N_e=Object.prototype.hasOwnProperty;const $_e=function(r,e){if(r===null||!Kf(r))return{};var t={};return Xf(e,function(n){N_e.call(r,n)&&(t[n]=r[n])}),t},D_e=function(r,e){return xz(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},R_e=function(r,e,t){var n,i,a,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&t.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},P_e=function(r){return zi(r)?Array.prototype.slice.call(r):[]};var Gg={};const F_e=function(r){return r=r||"g",Gg[r]?Gg[r]+=1:Gg[r]=1,r+Gg[r]},B_e=function(){},z_e=function(r){return r};function G_e(r){return tu(r)?0:zi(r)?r.length:Object.keys(r).length}var j_e=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const U_e=j_e;var W_e=/rgba?\(([\s.,0-9]+)\)/;function H_e(){var r=document.getElementById("antv-web-colour-picker");return r||(r=document.createElement("i"),r.id="antv-web-colour-picker",r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r)}function V_e(r){if(r[0]==="#"&&r.length===7)return r;var e=H_e();e.style.color=r;var t=document.defaultView.getComputedStyle(e,"").getPropertyValue("color"),n=W_e.exec(t),i=n[1].split(/\s*,\s*/).map(function(a){return Number(a)});return t=hz(i),t}var Iz=Tz(V_e,function(r){return r},256);function Nw(r,e,t,n){return r[n]+(e[n]-r[n])*t}function Y_e(r,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=r.length-1,i=Math.floor(n*t),a=n*t-i,o=r[i],s=i===n?o:r[i+1];return hz([Nw(o,s,a,0),Nw(o,s,a,1),Nw(o,s,a,2)])}function X_e(r){var e=typeof r=="string"?r.split("-"):r,t=e.map(function(n){return fz(n.indexOf("#")===-1?Iz(n):n)});return function(n){return Y_e(t,n)}}var K_e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,q_e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Z_e=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Q_e(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)}function J_e(r){if(Q_e(r)){var e,t=void 0;if(r[0]==="l"){var n=K_e.exec(r),i=+n[1]+90;t=n[2],e="linear-gradient("+i+"deg, "}else if(r[0]==="r"){e="radial-gradient(";var n=q_e.exec(r);t=n[4]}var a=t.match(Z_e);return a.forEach(function(o,s){var l=o.split(":");e+=l[1]+" "+Number(l[0])*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return r}function eEe(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return VE(n,t),ns(r,n,e)}function tEe(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return YE(n,t),ns(r,n,e)}function rEe(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return XE(n,t),ns(r,n,e)}function nEe(r,e,t){return ns(r,t,e)}function iEe(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":eEe(t,t,[a[1],a[2]]);break;case"s":rEe(t,t,[a[1],a[2]]);break;case"r":tEe(t,t,a[1]);break;case"m":nEe(t,t,a[1]);break}}return t}function Oz(r,e){return r[0]*e[1]-e[0]*r[1]}function aEe(r,e,t){var n=I4(r,e),i=Oz(r,e)>=0;return t?i?Math.PI*2-n:n:i?n:Math.PI*2-n}function oEe(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}function sEe(r,e){if(e==="off")return[].concat(r);var t=typeof e=="number"&&e>=1?Math.pow(10,e):1;return r.map(function(n){var i=n.slice(1).map(Number).map(function(a){return e?Math.round(a*t)/t:Math.round(a)});return[n[0]].concat(i)})}function lEe(r,e){return e===void 0&&(e="off"),sEe(r,e).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")}var Nz={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function uEe(r,e,t){if(r[t].length>7){r[t].shift();for(var n=r[t],i=t;n.length;)e[t]="A",r.splice(i+=1,0,["C"].concat(n.splice(0,6)));r.splice(t,1)}}var Fd={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function $z(r){return Array.isArray(r)&&r.every(function(e){var t=e[0].toLowerCase();return Fd[t]===e.length-1&&"achlmqstvz".includes(t)})}function Dz(r){return $z(r)&&r.every(function(e){var t=e[0];return t===t.toUpperCase()})}function Rz(r){return Dz(r)&&r.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function iN(r){for(var e=r.pathValue[r.segmentStart],t=e.toLowerCase(),n=r.data;n.length>=Fd[t]&&(t==="m"&&n.length>2?(r.segments.push([e].concat(n.splice(0,2))),t="l",e=e==="m"?"l":"L"):r.segments.push([e].concat(n.splice(0,Fd[t]))),!!Fd[t]););}function cEe(r){var e=r.index,t=r.pathValue,n=t.charCodeAt(e);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'+t[e]+'", expecting 0 or 1 at index '+e}function fEe(r){return r>=48&&r<=57||r===43||r===45||r===46}function Kc(r){return r>=48&&r<=57}function hEe(r){var e=r.max,t=r.pathValue,n=r.index,i=n,a=!1,o=!1,s=!1,l=!1,u;if(i>=e){r.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(u=t.charCodeAt(i),(u===43||u===45)&&(i+=1,u=t.charCodeAt(i)),!Kc(u)&&u!==46){r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" is not a number';return}if(u!==46){if(a=u===48,i+=1,u=t.charCodeAt(i),a&&i<e&&u&&Kc(u)){r.err="[path-util]: Invalid path value at index "+n+', "'+t[n]+'" illegal number';return}for(;i<e&&Kc(t.charCodeAt(i));)i+=1,o=!0;u=t.charCodeAt(i)}if(u===46){for(l=!0,i+=1;Kc(t.charCodeAt(i));)i+=1,s=!0;u=t.charCodeAt(i)}if(u===101||u===69){if(l&&!o&&!s){r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" invalid float exponent';return}if(i+=1,u=t.charCodeAt(i),(u===43||u===45)&&(i+=1),i<e&&Kc(t.charCodeAt(i)))for(;i<e&&Kc(t.charCodeAt(i));)i+=1;else{r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" invalid integer exponent';return}}r.index=i,r.param=+r.pathValue.slice(n,i)}function dEe(r){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&e.includes(r)}function L0(r){for(var e=r.pathValue,t=r.max;r.index<t&&dEe(e.charCodeAt(r.index));)r.index+=1}function vEe(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function pEe(r){return(r|32)===97}function gEe(r){var e=r.max,t=r.pathValue,n=r.index,i=t.charCodeAt(n),a=Fd[t[n].toLowerCase()];if(r.segmentStart=n,!vEe(i)){r.err='[path-util]: Invalid path value "'+t[n]+'" is not a path command';return}if(r.index+=1,L0(r),r.data=[],!a){iN(r);return}for(;;){for(var o=a;o>0;o-=1){if(pEe(i)&&(o===3||o===4)?cEe(r):hEe(r),r.err.length)return;r.data.push(r.param),L0(r),r.index<e&&t.charCodeAt(r.index)===44&&(r.index+=1,L0(r))}if(r.index>=r.max||!fEe(t.charCodeAt(r.index)))break}iN(r)}var mEe=function(){function r(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r}();function o1(r){if($z(r))return[].concat(r);var e=new mEe(r);for(L0(e);e.index<e.max&&!e.err.length;)gEe(e);return e.err?e.err:e.segments}function Pz(r){if(Dz(r))return[].concat(r);var e=o1(r),t=0,n=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],u=l.toUpperCase();if(l==="M")return t=s[0],n=s[1],i=t,a=n,["M",t,n];var c;if(l!==u)switch(u){case"A":c=[u,s[0],s[1],s[2],s[3],s[4],s[5]+t,s[6]+n];break;case"V":c=[u,s[0]+n];break;case"H":c=[u,s[0]+t];break;default:{var f=s.map(function(d,v){return d+(v%2?n:t)});c=[u].concat(f)}}else c=[u].concat(s);var h=c.length;switch(u){case"Z":t=i,n=a;break;case"H":t=c[1];break;case"V":n=c[1];break;default:t=c[h-2],n=c[h-1],u==="M"&&(i=t,a=n)}return c})}function yEe(r,e){var t=r[0],n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=r.slice(1).map(Number),l=r;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")l=["L",r[1],i];else if(t==="V")l=["L",n,r[1]];else if(t==="S"){var u=n*2-a,c=i*2-o;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if(t==="T"){var f=n*2-e.qx,h=i*2-e.qy;e.qx=f,e.qy=h,l=["Q",f,h].concat(s)}else if(t==="Q"){var d=s[0],v=s[1];e.qx=d,e.qy=v}return l}function s1(r){if(Rz(r))return[].concat(r);for(var e=Pz(r),t=V({},Nz),n=0;n<e.length;n+=1){e[n]=yEe(e[n],t);var i=e[n],a=i.length;t.x1=+i[a-2],t.y1=+i[a-1],t.x2=+i[a-4]||t.x1,t.y2=+i[a-3]||t.y1}return e}function bEe(r){return Rz(r)&&r.every(function(e){var t=e[0];return"MC".includes(t)})}function jg(r,e,t){var n=r*Math.cos(t)-e*Math.sin(t),i=r*Math.sin(t)+e*Math.cos(t);return{x:n,y:i}}function aM(r,e,t,n,i,a,o,s,l,u){var c=r,f=e,h=t,d=n,v=s,p=l,g=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],w,b,x,S,_;if(u)b=u[0],x=u[1],S=u[2],_=u[3];else{w=jg(c,f,-m),c=w.x,f=w.y,w=jg(v,p,-m),v=w.x,p=w.y;var M=(c-v)/2,A=(f-p)/2,E=M*M/(h*h)+A*A/(d*d);E>1&&(E=Math.sqrt(E),h*=E,d*=E);var T=h*h,C=d*d,k=(a===o?-1:1)*Math.sqrt(Math.abs((T*C-T*A*A-C*M*M)/(T*A*A+C*M*M)));S=k*h*A/d+(c+v)/2,_=k*-d*M/h+(f+p)/2,b=Math.asin(((f-_)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),x=Math.asin(((p-_)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),b=c<S?Math.PI-b:b,x=v<S?Math.PI-x:x,b<0&&(b=Math.PI*2+b),x<0&&(x=Math.PI*2+x),o&&b>x&&(b-=Math.PI*2),!o&&x>b&&(x-=Math.PI*2)}var L=x-b;if(Math.abs(L)>g){var I=x,O=v,N=p;x=b+g*(o&&x>b?1:-1),v=S+h*Math.cos(x),p=_+d*Math.sin(x),y=aM(v,p,h,d,i,0,o,O,N,[x,I,S,_])}L=x-b;var D=Math.cos(b),$=Math.sin(b),R=Math.cos(x),B=Math.sin(x),j=Math.tan(L/4),G=4/3*h*j,z=4/3*d*j,W=[c,f],Q=[c+G*$,f-z*D],ie=[v+G*B,p-z*R],se=[v,p];if(Q[0]=2*W[0]-Q[0],Q[1]=2*W[1]-Q[1],u)return Q.concat(ie,se,y);y=Q.concat(ie,se,y);for(var ae=[],pe=0,De=y.length;pe<De;pe+=1)ae[pe]=pe%2?jg(y[pe-1],y[pe],m).y:jg(y[pe],y[pe+1],m).x;return ae}function wEe(r,e,t,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*n,o*i+s*t,o*a+s*n,i,a]}function Ml(r,e,t){var n=r[0],i=r[1],a=e[0],o=e[1];return[n+(a-n)*t,i+(o-i)*t]}var aN=function(r,e,t,n){var i=.5,a=Ml([r,e],[t,n],i);return la(la([],a,!0),[t,n,t,n],!1)};function xEe(r,e){var t=r[0],n=r.slice(1).map(Number),i=n[0],a=n[1],o,s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=i,e.y=a,r;case"A":return o=[s,l].concat(n),["C"].concat(aM(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(n),["C"].concat(wEe(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(aN(s,l,i,a));case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:["C"].concat(aN(s,l,u,c))}return r}function Fz(r,e){if(e===void 0&&(e=!1),bEe(r)){var t=[].concat(r);return e?[t,[]]:t}for(var n=s1(r),i=V({},Nz),a=[],o="",s=n.length,l,u,c=[],f=0;f<s;f+=1){n[f]&&(o=n[f][0]),a[f]=o;var h=xEe(n[f],i);n[f]=h,uEe(n,a,f),s=n.length,o==="Z"&&c.push(f),l=n[f],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return e?[n,c]:n}function SEe(r){return o1(r)}function _Ee(r){return r.map(function(e){return Array.isArray(e)?[].concat(e):e})}function EEe(r){var e=r.slice(1).map(function(t,n,i){return n?i[n-1].slice(-2).concat(t.slice(1)):r[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(n,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function hh(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}function jS(r,e,t,n,i){var a=hh([r,e],[t,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:r,y:e};else if(i>=a)o={x:t,y:n};else{var s=Ml([r,e],[t,n],i/a),l=s[0],u=s[1];o={x:l,y:u}}return{length:a,point:o,min:{x:Math.min(r,t),y:Math.min(e,n)},max:{x:Math.max(r,t),y:Math.max(e,n)}}}function oN(r,e){var t=r.x,n=r.y,i=e.x,a=e.y,o=t*i+n*a,s=Math.sqrt((Math.pow(t,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=t*a-n*i<0?-1:1,u=l*Math.acos(o/s);return u}function MEe(r,e,t,n,i,a,o,s,l,u){var c=Math.abs,f=Math.sin,h=Math.cos,d=Math.sqrt,v=Math.PI,p=c(t),g=c(n),m=(i%360+360)%360,y=m*(v/180);if(r===s&&e===l)return{x:r,y:e};if(p===0||g===0)return jS(r,e,s,l,u).point;var w=(r-s)/2,b=(e-l)/2,x={x:h(y)*w+f(y)*b,y:-f(y)*w+h(y)*b},S=Math.pow(x.x,2)/Math.pow(p,2)+Math.pow(x.y,2)/Math.pow(g,2);S>1&&(p*=d(S),g*=d(S));var _=Math.pow(p,2)*Math.pow(g,2)-Math.pow(p,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2),M=Math.pow(p,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2),A=_/M;A=A<0?0:A;var E=(a!==o?1:-1)*d(A),T={x:E*(p*x.y/g),y:E*(-(g*x.x)/p)},C={x:h(y)*T.x-f(y)*T.y+(r+s)/2,y:f(y)*T.x+h(y)*T.y+(e+l)/2},k={x:(x.x-T.x)/p,y:(x.y-T.y)/g},L=oN({x:1,y:0},k),I={x:(-x.x-T.x)/p,y:(-x.y-T.y)/g},O=oN(k,I);!o&&O>0?O-=2*v:o&&O<0&&(O+=2*v),O%=2*v;var N=L+O*u,D=p*h(N),$=g*f(N),R={x:h(y)*D-f(y)*$+C.x,y:f(y)*D+h(y)*$+C.y};return R}function CEe(r,e,t,n,i,a,o,s,l,u,c){var f,h=c.bbox,d=h===void 0?!0:h,v=c.length,p=v===void 0?!0:v,g=c.sampleSize,m=g===void 0?30:g,y=typeof u=="number",w=r,b=e,x=0,S=[w,b,x],_=[w,b],M=0,A={x:0,y:0},E=[{x:w,y:b}];y&&u<=0&&(A={x:w,y:b});for(var T=0;T<=m;T+=1){if(M=T/m,f=MEe(r,e,t,n,i,a,o,s,l,M),w=f.x,b=f.y,d&&E.push({x:w,y:b}),p&&(x+=hh(_,[w,b])),_=[w,b],y&&x>=u&&u>S[2]){var C=(x-u)/(x-S[2]);A={x:_[0]*(1-C)+S[0]*C,y:_[1]*(1-C)+S[1]*C}}S=[w,b,x]}return y&&u>=x&&(A={x:s,y:l}),{length:x,point:A,min:{x:Math.min.apply(null,E.map(function(k){return k.x})),y:Math.min.apply(null,E.map(function(k){return k.y}))},max:{x:Math.max.apply(null,E.map(function(k){return k.x})),y:Math.max.apply(null,E.map(function(k){return k.y}))}}}function AEe(r,e,t,n,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,3)*r+3*Math.pow(u,2)*l*t+3*u*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*a+Math.pow(l,3)*s}}function Bz(r,e,t,n,i,a,o,s,l,u){var c,f=u.bbox,h=f===void 0?!0:f,d=u.length,v=d===void 0?!0:d,p=u.sampleSize,g=p===void 0?10:p,m=typeof l=="number",y=r,w=e,b=0,x=[y,w,b],S=[y,w],_=0,M={x:0,y:0},A=[{x:y,y:w}];m&&l<=0&&(M={x:y,y:w});for(var E=0;E<=g;E+=1){if(_=E/g,c=AEe(r,e,t,n,i,a,o,s,_),y=c.x,w=c.y,h&&A.push({x:y,y:w}),v&&(b+=hh(S,[y,w])),S=[y,w],m&&b>=l&&l>x[2]){var T=(b-l)/(b-x[2]);M={x:S[0]*(1-T)+x[0]*T,y:S[1]*(1-T)+x[1]*T}}x=[y,w,b]}return m&&l>=b&&(M={x:o,y:s}),{length:b,point:M,min:{x:Math.min.apply(null,A.map(function(C){return C.x})),y:Math.min.apply(null,A.map(function(C){return C.y}))},max:{x:Math.max.apply(null,A.map(function(C){return C.x})),y:Math.max.apply(null,A.map(function(C){return C.y}))}}}function TEe(r,e,t,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*r+2*s*o*t+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*n+Math.pow(o,2)*a}}function kEe(r,e,t,n,i,a,o,s){var l,u=s.bbox,c=u===void 0?!0:u,f=s.length,h=f===void 0?!0:f,d=s.sampleSize,v=d===void 0?10:d,p=typeof o=="number",g=r,m=e,y=0,w=[g,m,y],b=[g,m],x=0,S={x:0,y:0},_=[{x:g,y:m}];p&&o<=0&&(S={x:g,y:m});for(var M=0;M<=v;M+=1){if(x=M/v,l=TEe(r,e,t,n,i,a,x),g=l.x,m=l.y,c&&_.push({x:g,y:m}),h&&(y+=hh(b,[g,m])),b=[g,m],p&&y>=o&&o>w[2]){var A=(y-o)/(y-w[2]);S={x:b[0]*(1-A)+w[0]*A,y:b[1]*(1-A)+w[1]*A}}w=[g,m,y]}return p&&o>=y&&(S={x:i,y:a}),{length:y,point:S,min:{x:Math.min.apply(null,_.map(function(E){return E.x})),y:Math.min.apply(null,_.map(function(E){return E.y}))},max:{x:Math.max.apply(null,_.map(function(E){return E.x})),y:Math.max.apply(null,_.map(function(E){return E.y}))}}}function l1(r,e,t){for(var n,i,a,o,s,l,u=s1(r),c=typeof e=="number",f,h=[],d,v=0,p=0,g=0,m=0,y,w=[],b=[],x=0,S={x:0,y:0},_=S,M=S,A=S,E=0,T=0,C=u.length;T<C;T+=1)y=u[T],d=y[0],f=d==="M",h=f?h:[v,p].concat(y.slice(1)),f?(g=y[1],m=y[2],S={x:g,y:m},_=S,x=0,c&&e<.001&&(A=S)):d==="L"?(n=jS(h[0],h[1],h[2],h[3],(e||0)-E),x=n.length,S=n.min,_=n.max,M=n.point):d==="A"?(i=CEe(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-E,t||{}),x=i.length,S=i.min,_=i.max,M=i.point):d==="C"?(a=Bz(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-E,t||{}),x=a.length,S=a.min,_=a.max,M=a.point):d==="Q"?(o=kEe(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-E,t||{}),x=o.length,S=o.min,_=o.max,M=o.point):d==="Z"&&(h=[v,p,g,m],s=jS(h[0],h[1],h[2],h[3],(e||0)-E),x=s.length,S=s.min,_=s.max,M=s.point),c&&E<e&&E+x>=e&&(A=M),b.push(_),w.push(S),E+=x,l=d!=="Z"?y.slice(-2):[g,m],v=l[0],p=l[1];return c&&e>=E&&(A={x:v,y:p}),{length:E,point:A,min:{x:Math.min.apply(null,w.map(function(k){return k.x})),y:Math.min.apply(null,w.map(function(k){return k.y}))},max:{x:Math.max.apply(null,b.map(function(k){return k.x})),y:Math.max.apply(null,b.map(function(k){return k.y}))}}}function LEe(r,e){if(!r)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=l1(r,void 0,V(V({},e),{length:!1})),n=t.min,i=n.x,a=n.y,o=t.max,s=o.x,l=o.y,u=s-i,c=l-a;return{width:u,height:c,x:i,y:a,x2:s,y2:l,cx:i+u/2,cy:a+c/2,cz:Math.max(u,c)+Math.min(u,c)/2}}function Bd(r,e){return l1(r,void 0,V(V({},e),{bbox:!1,length:!0})).length}function IEe(r,e){if(!r)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=l1(r,void 0,V(V({},e),{bbox:!0,length:!0})),n=t.length,i=t.min,a=i.x,o=i.y,s=t.max,l=s.x,u=s.y,c=l-a,f=u-o;return{length:n,width:c,height:f,x:a,y:o,x2:l,y2:u,cx:a+c/2,cy:o+f/2,cz:Math.max(c,f)+Math.min(c,f)/2}}function OEe(r){var e=r.length,t=e-1;return r.map(function(n,i){return r.map(function(a,o){var s=i+o,l;return o===0||r[s]&&r[s][0]==="M"?(l=r[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=t),r[s])})})}function NEe(r,e){var t=r.length-1,n=[],i=0,a=0,o=OEe(r);return o.forEach(function(s,l){r.slice(1).forEach(function(u,c){a+=hh(r[(l+c)%t].slice(-2),e[c%t].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function $Ee(r,e,t,n,i,a,o,s){return 3*((s-e)*(t+i)-(o-r)*(n+a)+n*(r-i)-t*(e-a)+s*(i+r/3)-o*(a+e/3))/20}function zz(r){var e=0,t=0,n=0;return Fz(r).map(function(i){var a;switch(i[0]){case"M":return e=i[1],t=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],u=o[2],c=o[3],f=o[4],h=o[5];return n=$Ee(e,t,s,l,u,c,f,h),a=i.slice(-2),e=a[0],t=a[1],n}}).reduce(function(i,a){return i+a},0)}function DEe(r){return zz(r)>=0}function I0(r,e,t){return l1(r,e,V(V({},t),{bbox:!1,length:!0})).point}function REe(r,e){var t=o1(r);if(typeof t=="string")throw TypeError(t);var n=t.slice(),i=Bd(n),a=n.length-1,o=0,s=0,l=t[0],u=l.slice(-2),c=u[0],f=u[1],h={x:c,y:f};if(a<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:h,lengthAtSegment:o};if(e>=i)return n=t.slice(0,-1),o=Bd(n),s=i-o,{segment:t[a],index:a,length:s,lengthAtSegment:o};for(var d=[];a>0;)l=n[a],n=n.slice(0,-1),o=Bd(n),s=i-o,i=o,d.push({segment:l,index:a,length:s,lengthAtSegment:o}),a-=1;return d.find(function(v){var p=v.lengthAtSegment;return p<=e})}function PEe(r,e){for(var t=o1(r),n=s1(t),i=Bd(t),a=function(x){var S=x.x-e.x,_=x.y-e.y;return S*S+_*_},o=8,s,l=0,u,c=0,f=1/0,h=0;h<=i;h+=o)s=I0(n,h),l=a(s),l<f&&(u=s,c=h,f=l);o/=2;for(var d,v,p=0,g=0,m=0,y=0;o>.5;)p=c-o,d=I0(n,p),m=a(d),g=c+o,v=I0(n,g),y=a(v),p>=0&&m<f?(u=d,c=p,f=m):g<=i&&y<f?(u=v,c=g,f=y):o/=2;var w=REe(t,c),b=Math.sqrt(f);return{closest:u,distance:b,segment:w}}function FEe(r,e){var t=PEe(r,e).distance;return Math.abs(t)<.001}function BEe(r,e){e===void 0&&(e=.5);var t=r.slice(0,2),n=r.slice(2,4),i=r.slice(4,6),a=r.slice(6,8),o=Ml(t,n,e),s=Ml(n,i,e),l=Ml(i,a,e),u=Ml(o,s,e),c=Ml(s,l,e),f=Ml(u,c,e);return[["C"].concat(o,u,f),["C"].concat(c,l,a)]}function sN(r){return r.map(function(e,t,n){var i=t&&n[t-1].slice(-2).concat(e.slice(1)),a=t?Bz(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return t?o=a?BEe(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function Gz(r,e,t){var n=sN(r),i=sN(e),a=n.length,o=i.length,s=n.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,u=n.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/s||0,c=i.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/l||0,f=t||Math.max(a,o),h=[u,c],d=[f-a,f-o],v=0,p=[n,i].map(function(g,m){return g.l===f?g.map(function(y){return y.s}):g.map(function(y,w){return v=w&&d[m]&&y.l>=h[m],d[m]-=v?1:0,v?y.ss:[y.s]}).flat()});return p[0].length===p[1].length?p:Gz(p[0],p[1],f)}var zEe=1e-6;function $w(r){return Math.abs(r)<zEe?0:r<0?-1:1}function GEe(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function US(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(GEe(o,s,[e,t]))return!0;$w(o[1]-t)>0!=$w(s[1]-t)>0&&$w(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}var lN=function(r,e,t){return r>=e&&r<=t};function jEe(r,e,t,n){var i=.001,a={x:t.x-r.x,y:t.y-r.y},o={x:e.x-r.x,y:e.y-r.y},s={x:n.x-t.x,y:n.y-t.y},l=o.x*s.y-o.y*s.x,u=l*l,c=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,h=null;if(u>i*c*f){var d=(a.x*s.y-a.y*s.x)/l,v=(a.x*o.y-a.y*o.x)/l;lN(d,0,1)&&lN(v,0,1)&&(h={x:r.x+d*o.x,y:r.y+d*o.y})}return h}function uN(r){for(var e=[],t=r.length,n=0;n<t-1;n++){var i=r[n],a=r[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=r[0],s=r[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function UEe(r,e){var t=!1;return r.forEach(function(n){if(jEe(n.from,n.to,e.from,e.to))return t=!0,!1}),t}function cN(r){var e=r.map(function(n){return n[0]}),t=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function WEe(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function HEe(r,e){if(r.length<2||e.length<2)return!1;var t=cN(r),n=cN(e);if(!WEe(t,n))return!1;var i=!1;if(e.forEach(function(l){if(US(r,l[0],l[1]))return i=!0,!1}),i||(r.forEach(function(l){if(US(e,l[0],l[1]))return i=!0,!1}),i))return!0;var a=uN(r),o=uN(e),s=!1;return o.forEach(function(l){if(UEe(a,l))return s=!0,!1}),s}function VEe(r){var e=document.createElement("div");e.innerHTML=r;var t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}function YEe(r,e){if(r)return Object.keys(e).forEach(function(t){r.style[t]=e[t]}),r}const XEe=Object.freeze(Object.defineProperty({__proto__:null,Cache:U_e,angleTo:aEe,arcToCubic:aM,assign:Mf,augment:h_e,clamp:iSe,clearAnimationFrame:c_e,clone:d_e,clonePath:_Ee,contains:$m,createDOM:VEe,debounce:v_e,deepMix:b_e,difference:gxe,direction:Oz,distanceSquareRoot:hh,each:Xf,endsWith:Vxe,equalizeSegments:Gz,every:Xxe,extend:x_e,filter:dz,find:xxe,findIndex:Sxe,firstValue:Exe,fixedBase:oSe,flatten:Cxe,flattenDeep:Axe,forIn:Xf,get:I_e,getDrawDirection:DEe,getPathArea:zz,getPathBBox:LEe,getPathBBoxTotalLength:IEe,getPointAtLength:I0,getRange:kxe,getRotatedCurve:NEe,getTotalLength:Bd,getType:Cz,getWrapBehavior:Jxe,gradient:X_e,group:Qxe,groupBy:_z,groupToMap:Ez,has:nN,hasKey:nN,hasValue:OSe,head:Uxe,identity:z_e,includes:$m,indexOf:__e,isArguments:HSe,isArray:In,isArrayLike:zi,isBoolean:YSe,isDate:KSe,isDecimal:lSe,isElement:l_e,isEmpty:M_e,isEqual:Lz,isEqualWith:C_e,isError:ZSe,isEven:cSe,isFinite:QSe,isFunction:ha,isInteger:hSe,isMatch:pz,isNegative:vSe,isNil:tu,isNull:e_e,isNumber:Ys,isNumberEqual:gSe,isObject:a1,isObjectLike:Dm,isOdd:ySe,isPlainObject:Kf,isPointInPolygon:US,isPointInStroke:FEe,isPolygonsIntersect:HEe,isPositive:wSe,isPrototype:Az,isRegExp:i_e,isString:Yl,isType:as,isUndefined:o_e,keys:vz,last:Wxe,lowerCase:$Se,lowerFirst:RSe,map:T_e,mapValues:L_e,max:mz,maxBy:xSe,memoize:Tz,min:yz,minBy:SSe,mix:Mf,mod:ESe,modifyCSS:YEe,noop:B_e,normalizePath:s1,number2color:tSe,omit:D_e,parseRadius:rSe,path2Absolute:Pz,path2Array:SEe,path2Curve:Fz,path2String:lEe,pick:$_e,pull:Nxe,pullAt:wz,reduce:xz,remove:Fxe,requestAnimationFrame:u_e,reverseCurve:EEe,rgb2arr:fz,set:O_e,size:G_e,some:qxe,sortBy:Bxe,startsWith:Hxe,substitute:PSe,throttle:R_e,toArray:P_e,toCSSGradient:J_e,toDegree:ASe,toInteger:TSe,toRGB:Iz,toRadian:ISe,toString:rp,transform:iEe,union:Gxe,uniq:Sz,uniqueId:F_e,upperCase:BSe,upperFirst:GSe,values:Mz,valuesOfKey:jxe,vertical:oEe,wrapBehavior:eSe},Symbol.toStringTag,{value:"Module"})),jz=rs(XEe);Object.defineProperty(iM,"__esModule",{value:!0});var KEe=jz,qEe=function(r){for(var e={},t=r.nodes().filter(function(f){var h;return!(!((h=r.children(f))===null||h===void 0)&&h.length)}),n=t.map(function(f){return r.node(f).rank}),i=(0,KEe.max)(n),a=[],o=0;o<i+1;o++)a.push([]);var s=function(f){var h;if(!e.hasOwnProperty(f)){e[f]=!0;var d=r.node(f);isNaN(d.rank)||a[d.rank].push(f),(h=r.successors(f))===null||h===void 0||h.forEach(function(v){return s(v)})}},l=t.sort(function(f,h){return r.node(f).rank-r.node(h).rank}),u=l.filter(function(f){return r.node(f).fixorder!==void 0}),c=u.sort(function(f,h){return r.node(f).fixorder-r.node(h).fixorder});return c==null||c.forEach(function(f){isNaN(r.node(f).rank)||a[r.node(f).rank].push(f),e[f]=!0}),l==null||l.forEach(s),a};iM.default=qEe;var oM={};Object.defineProperty(oM,"__esModule",{value:!0});var ZEe=fa,QEe=function(r,e,t){for(var n=(0,ZEe.zipObject)(t,t.map(function(c,f){return f})),i=e.map(function(c){var f,h=(f=r.outEdges(c))===null||f===void 0?void 0:f.map(function(d){return{pos:n[d.w]||0,weight:r.edge(d).weight}});return h==null?void 0:h.sort(function(d,v){return d.pos-v.pos})}),a=i.flat().filter(function(c){return c!==void 0}),o=1;o<t.length;)o<<=1;var s=2*o-1;o-=1;var l=Array(s).fill(0,0,s),u=0;return a==null||a.forEach(function(c){if(c){var f=c.pos+o;l[f]+=c.weight;for(var h=0;f>0;)f%2&&(h+=l[f+1]),f=f-1>>1,l[f]+=c.weight;u+=c.weight*h}}),u},JEe=function(r,e){for(var t=0,n=1;n<(e==null?void 0:e.length);n+=1)t+=QEe(r,e[n-1],e[n]);return t};oM.default=JEe;var sM={};Object.defineProperty(sM,"__esModule",{value:!0});var e2e=Vs,t2e=function(r,e,t){var n=r2e(r),i=new e2e.Graph({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return r.nodes().forEach(function(a){var o,s=r.node(a),l=r.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,l||n),(o=r[t](a))===null||o===void 0||o.forEach(function(u){var c=u.v===a?u.w:u.v,f=i.edgeFromArgs(c,a),h=f!==void 0?f.weight:0;i.setEdge(c,a,{weight:r.edge(u).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i},r2e=function(r){for(var e;r.hasNode(e="_root".concat(Math.random())););return e};sM.default=t2e;var lM={};Object.defineProperty(lM,"__esModule",{value:!0});var n2e=function(r,e,t){var n={},i;t==null||t.forEach(function(a){for(var o=r.parent(a),s,l;o;){if(s=r.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=s}})};lM.default=n2e;var uM={},cM={};Object.defineProperty(cM,"__esModule",{value:!0});var i2e=function(r,e){return e.map(function(t){var n=r.inEdges(t);if(!(n!=null&&n.length))return{v:t};{var i={sum:0,weight:0};return n==null||n.forEach(function(a){var o=r.edge(a),s=r.node(a.v);i.sum+=o.weight*s.order,i.weight+=o.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}})};cM.default=i2e;var fM={};Object.defineProperty(fM,"__esModule",{value:!0});var a2e=function(r,e){var t,n,i,a={};r==null||r.forEach(function(s,l){a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};var u=a[s.v];s.barycenter!==void 0&&(u.barycenter=s.barycenter,u.weight=s.weight)}),(t=e.edges())===null||t===void 0||t.forEach(function(s){var l=a[s.v],u=a[s.w];l!==void 0&&u!==void 0&&(u.indegree++,l.out.push(a[s.w]))});var o=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,function(s){return!s.indegree});return o2e(o)},o2e=function(r){for(var e,t,n=[],i=function(u){return function(c){c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&s2e(u,c)}},a=function(u){return function(c){c.in.push(u),--c.indegree===0&&r.push(c)}},o=function(){var u=r.pop();n.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(function(c){return i(u)(c)}),(t=u.out)===null||t===void 0||t.forEach(function(c){return a(u)(c)})};r!=null&&r.length;)o();var s=n.filter(function(u){return!u.merged}),l=["vs","i","barycenter","weight"];return s.map(function(u){var c={};return l==null||l.forEach(function(f){u[f]!==void 0&&(c[f]=u[f])}),c})},s2e=function(r,e){var t,n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),r.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(e.i,r.i),e.merged=!0};fM.default=a2e;var hM={};Object.defineProperty(hM,"__esModule",{value:!0});var l2e=fa,u2e=function(r,e,t,n){var i=(0,l2e.partition)(r,function(h){var d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort(function(h,d){return-h.i- -d.i}),s=[],l=0,u=0,c=0;a==null||a.sort(c2e(!!e,!!t)),c=fN(s,o,c),a==null||a.forEach(function(h){var d;c+=(d=h.vs)===null||d===void 0?void 0:d.length,s.push(h.vs),l+=h.barycenter*h.weight,u+=h.weight,c=fN(s,o,c)});var f={vs:s.flat()};return u&&(f.barycenter=l/u,f.weight=u),f},fN=function(r,e,t){for(var n=t,i;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),r==null||r.push(i.vs),n++;return n},c2e=function(r,e){return function(t,n){if(t.fixorder!==void 0&&n.fixorder!==void 0)return t.fixorder-n.fixorder;if(t.barycenter<n.barycenter)return-1;if(t.barycenter>n.barycenter)return 1;if(e&&t.order!==void 0&&n.order!==void 0){if(t.order<n.order)return-1;if(t.order>n.order)return 1}return r?n.i-t.i:t.i-n.i}};hM.default=u2e;var dM=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(uM,"__esModule",{value:!0});var f2e=dM(cM),h2e=dM(fM),d2e=dM(hM),Uz=function(r,e,t,n,i,a){var o,s,l,u,c=r.children(e),f=r.node(e),h=f?f.borderLeft:void 0,d=f?f.borderRight:void 0,v={};h&&(c=c==null?void 0:c.filter(function(b){return b!==h&&b!==d}));var p=(0,f2e.default)(r,c||[]);p==null||p.forEach(function(b){var x;if(!((x=r.children(b.v))===null||x===void 0)&&x.length){var S=Uz(r,b.v,t,n,a);v[b.v]=S,S.hasOwnProperty("barycenter")&&p2e(b,S)}});var g=(0,h2e.default)(p,t);v2e(g,v),(o=g.filter(function(b){return b.vs.length>0}))===null||o===void 0||o.forEach(function(b){var x=r.node(b.vs[0]);x&&(b.fixorder=x.fixorder,b.order=x.order)});var m=(0,d2e.default)(g,n,i,a);if(h&&(m.vs=[h,m.vs,d].flat(),!((s=r.predecessors(h))===null||s===void 0)&&s.length)){var y=r.node(((l=r.predecessors(h))===null||l===void 0?void 0:l[0])||""),w=r.node(((u=r.predecessors(d))===null||u===void 0?void 0:u[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+w.order)/(m.weight+2),m.weight+=2}return m},v2e=function(r,e){r==null||r.forEach(function(t){var n,i=(n=t.vs)===null||n===void 0?void 0:n.map(function(a){return e[a]?e[a].vs:a});t.vs=i.flat()})},p2e=function(r,e){r.barycenter!==void 0?(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight):(r.barycenter=e.barycenter,r.weight=e.weight)};uM.default=Uz;var np=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nM,"__esModule",{value:!0});var hN=np(iM),dN=np(oM),g2e=np(sM),m2e=np(lM),y2e=np(uM),vN=vn(),b2e=Vs,Dw=fa,w2e=function(r,e){for(var t=(0,Dw.maxRank)(r),n=[],i=[],a=1;a<t+1;a++)n.push(a);for(var a=t-1;a>-1;a--)i.push(a);var o=pN(r,n,"inEdges"),s=pN(r,i,"outEdges"),l=(0,hN.default)(r);Rw(r,l);for(var u=Number.POSITIVE_INFINITY,c,a=0,f=0;f<4;++a,++f){gN(a%2?o:s,a%4>=2,!1,e),l=(0,Dw.buildLayerMatrix)(r);var h=(0,dN.default)(r,l);h<u&&(f=0,c=(0,vN.clone)(l),u=h)}l=(0,hN.default)(r),Rw(r,l);for(var a=0,f=0;f<4;++a,++f){gN(a%2?o:s,a%4>=2,!0,e),l=(0,Dw.buildLayerMatrix)(r);var h=(0,dN.default)(r,l);h<u&&(f=0,c=(0,vN.clone)(l),u=h)}Rw(r,c)},pN=function(r,e,t){return e.map(function(n){return(0,g2e.default)(r,n,t)})},gN=function(r,e,t,n){var i=new b2e.Graph;r==null||r.forEach(function(a){for(var o,s=a.graph().root,l=(0,y2e.default)(a,s,i,e,t,n),u=0;u<((o=l.vs)===null||o===void 0?void 0:o.length);u++){var c=a.node(l.vs[u]);c&&(c.order=u)}(0,m2e.default)(a,i,l.vs)})},Rw=function(r,e){e==null||e.forEach(function(t){t==null||t.forEach(function(n,i){r.node(n).order=i})})};nM.default=w2e;var vM={},Wz={};(function(r){var e=ze&&ze.__extends||function(){var b=function(x,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(_[A]=M[A])},b(x,S)};return function(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(x,S);function _(){this.constructor=x}x.prototype=S===null?Object.create(S):(_.prototype=S.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.width=r.sep=r.positionX=r.balance=r.alignCoordinates=r.findSmallestWidthAlignment=r.buildBlockGraph=r.horizontalCompaction=r.verticalAlignment=r.hasConflict=r.addConflict=r.findOtherInnerSegmentNode=r.findType2Conflicts=r.findType1Conflicts=void 0;var t=i1,n=jz,i=fa,a=function(b){e(x,b);function x(){return b!==null&&b.apply(this,arguments)||this}return x}(t.Graph),o=function(b,x){var S={},_=function(M,A){var E=0,T=0,C=M.length,k=A==null?void 0:A[(A==null?void 0:A.length)-1];return A==null||A.forEach(function(L,I){var O,N=(0,r.findOtherInnerSegmentNode)(b,L),D=N?b.node(N).order:C;(N||L===k)&&((O=A.slice(T,I+1))===null||O===void 0||O.forEach(function($){var R;(R=b.predecessors($))===null||R===void 0||R.forEach(function(B){var j,G=b.node(B),z=G.order;(z<E||D<z)&&!(G.dummy&&(!((j=b.node($))===null||j===void 0)&&j.dummy))&&(0,r.addConflict)(S,B,$)})}),T=I+1,E=D)}),A};return x!=null&&x.length&&x.reduce(_),S};r.findType1Conflicts=o;var s=function(b,x){var S={};function _(T,C,k,L,I){for(var O,N,D,$=C;$<k;$++)D=T[$],!((O=b.node(D))===null||O===void 0)&&O.dummy&&((N=b.predecessors(D))===null||N===void 0||N.forEach(function(R){var B=b.node(R);B.dummy&&(B.order<L||B.order>I)&&(0,r.addConflict)(S,R,D)}))}function M(T){return JSON.stringify(T.slice(1))}function A(T,C){var k=M(T);C.get(k)||(_.apply(void 0,T),C.set(k,!0))}var E=function(T,C){var k=-1,L,I=0,O=new Map;return C==null||C.forEach(function(N,D){var $;if((($=b.node(N))===null||$===void 0?void 0:$.dummy)==="border"){var R=b.predecessors(N)||[];R.length&&(L=b.node(R[0]).order,A([C,I,D,k,L],O),I=D,k=L)}A([C,I,C.length,L,T.length],O)}),C};return x!=null&&x.length&&x.reduce(E),S};r.findType2Conflicts=s;var l=function(b,x){var S,_;if(!((S=b.node(x))===null||S===void 0)&&S.dummy)return(_=b.predecessors(x))===null||_===void 0?void 0:_.find(function(M){return b.node(M).dummy})};r.findOtherInnerSegmentNode=l;var u=function(b,x,S){var _=x,M=S;if(_>M){var A=_;_=M,M=A}var E=b[_];E||(b[_]=E={}),E[M]=!0};r.addConflict=u;var c=function(b,x,S){var _=x,M=S;if(_>M){var A=x;_=M,M=A}return!!b[_]};r.hasConflict=c;var f=function(b,x,S,_){var M={},A={},E={};return x==null||x.forEach(function(T){T==null||T.forEach(function(C,k){M[C]=C,A[C]=C,E[C]=k})}),x==null||x.forEach(function(T){var C=-1;T==null||T.forEach(function(k){var L=_(k);if(L.length){L=L.sort(function($,R){return E[$]-E[R]});for(var I=(L.length-1)/2,O=Math.floor(I),N=Math.ceil(I);O<=N;++O){var D=L[O];A[k]===k&&C<E[D]&&!(0,r.hasConflict)(S,k,D)&&(A[D]=k,A[k]=M[k]=M[D],C=E[D])}}})}),{root:M,align:A}};r.verticalAlignment=f;var h=function(b,x,S,_,M){var A,E={},T=(0,r.buildBlockGraph)(b,x,S,M),C=M?"borderLeft":"borderRight",k=function(O,N){for(var D=T.nodes(),$=D.pop(),R={};$;)R[$]?O($):(R[$]=!0,D.push($),D=D.concat(N($))),$=D.pop()},L=function(O){E[O]=(T.inEdges(O)||[]).reduce(function(N,D){return Math.max(N,(E[D.v]||0)+T.edge(D))},0)},I=function(O){var N=(T.outEdges(O)||[]).reduce(function($,R){return Math.min($,(E[R.w]||0)-T.edge(R))},Number.POSITIVE_INFINITY),D=b.node(O);N!==Number.POSITIVE_INFINITY&&D.borderType!==C&&(E[O]=Math.max(E[O],N))};return k(L,T.predecessors.bind(T)),k(I,T.successors.bind(T)),(A=Object.values(_))===null||A===void 0||A.forEach(function(O){E[O]=E[S[O]]}),E};r.horizontalCompaction=h;var d=function(b,x,S,_){var M=new a,A=b.graph(),E=(0,r.sep)(A.nodesep,A.edgesep,_);return x==null||x.forEach(function(T){var C;T==null||T.forEach(function(k){var L=S[k];if(M.setNode(L),C){var I=S[C],O=M.edgeFromArgs(I,L);M.setEdge(I,L,Math.max(E(b,k,C),O||0))}C=k})}),M};r.buildBlockGraph=d;var v=function(b,x){return(0,i.minBy)(Object.values(x),function(S){var _,M=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return(_=Object.keys(S))===null||_===void 0||_.forEach(function(E){var T=S[E],C=(0,r.width)(b,E)/2;M=Math.max(T+C,M),A=Math.min(T-C,A)}),M-A})};r.findSmallestWidthAlignment=v;function p(b,x){var S=Object.values(x),_=(0,n.min)(S),M=(0,n.max)(S);["u","d"].forEach(function(A){["l","r"].forEach(function(E){var T=A+E,C=b[T],k;if(C!==x){var L=Object.values(C);k=E==="l"?_-(0,n.min)(L):M-(0,n.max)(L),k&&(b[T]={},Object.keys(C).forEach(function(I){b[T][I]=C[I]+k}))}})})}r.alignCoordinates=p;var g=function(b,x){var S={};return Object.keys(b.ul).forEach(function(_){if(x)S[_]=b[x.toLowerCase()][_];else{var M=Object.values(b).map(function(A){return A[_]});S[_]=(M[0]+M[1])/2}}),S};r.balance=g;var m=function(b){var x=(0,i.buildLayerMatrix)(b),S=Object.assign((0,r.findType1Conflicts)(b,x),(0,r.findType2Conflicts)(b,x)),_={},M;["u","d"].forEach(function(E){M=E==="u"?x:Object.values(x).reverse(),["l","r"].forEach(function(T){T==="r"&&(M=M.map(function(I){return Object.values(I).reverse()}));var C=(E==="u"?b.predecessors:b.successors).bind(b),k=(0,r.verticalAlignment)(b,M,S,C),L=(0,r.horizontalCompaction)(b,M,k.root,k.align,T==="r");T==="r"&&Object.keys(L).forEach(function(I){L[I]=-L[I]}),_[E+T]=L})});var A=(0,r.findSmallestWidthAlignment)(b,_);return p(_,A),(0,r.balance)(_,b.graph().align)};r.positionX=m;var y=function(b,x,S){return function(_,M,A){var E=_.node(M),T=_.node(A),C=0,k;if(C+=E.width/2,E.hasOwnProperty("labelpos"))switch((E.labelpos||"").toLowerCase()){case"l":k=-E.width/2;break;case"r":k=E.width/2;break}if(k&&(C+=S?k:-k),k=0,C+=(E.dummy?x:b)/2,C+=(T.dummy?x:b)/2,C+=T.width/2,T.labelpos)switch((T.labelpos||"").toLowerCase()){case"l":k=T.width/2;break;case"r":k=-T.width/2;break}return k&&(C+=S?k:-k),k=0,C}};r.sep=y;var w=function(b,x){return b.node(x).width||0};r.width=w})(Wz);var mN=ze&&ze.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(vM,"__esModule",{value:!0});var pM=fa,Tu=Wz,x2e=function(r){var e=(0,pM.buildLayerMatrix)(r),t=r.graph().ranksep,n=0;e==null||e.forEach(function(i){var a=i.map(function(s){return r.node(s).height}),o=Math.max.apply(Math,mN(mN([],a,!1),[0],!1));i==null||i.forEach(function(s){r.node(s).y=n+o/2}),n+=o+t})},S2e=function(r){var e=(0,pM.buildLayerMatrix)(r),t=Object.assign((0,Tu.findType1Conflicts)(r,e),(0,Tu.findType2Conflicts)(r,e)),n={},i=[];["u","d"].forEach(function(o){i=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(function(f){return Object.values(f).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=(0,Tu.verticalAlignment)(r,i,t,l),c=(0,Tu.horizontalCompaction)(r,i,u.root,u.align,s==="r");s==="r"&&Object.keys(c).forEach(function(f){return c[f]=-c[f]}),n[o+s]=c})});var a=(0,Tu.findSmallestWidthAlignment)(r,n);return a&&(0,Tu.alignCoordinates)(n,a),(0,Tu.balance)(n,r.graph().align)},_2e=function(r){var e,t=(0,pM.asNonCompoundGraph)(r);x2e(t);var n=S2e(t);(e=Object.keys(n))===null||e===void 0||e.forEach(function(i){t.node(i).x=n[i]})};vM.default=_2e;var gM={};Object.defineProperty(gM,"__esModule",{value:!0});var E2e=function(r,e){for(var t=r.nodes().filter(function(s){var l;return!(!((l=r.children(s))===null||l===void 0)&&l.length)}),n=t.map(function(s){return r.node(s).rank}),i=Math.max.apply(Math,n),a=[],o=0;o<i+1;o++)a[o]=[];e==null||e.forEach(function(s){var l=r.node(s);!l||l!=null&&l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(s))})};gM.default=E2e;var Rm=ze&&ze.__assign||function(){return Rm=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Rm.apply(this,arguments)},os=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H2,"__esModule",{value:!0});var yN=os(V2),bN=os(Z2),M2e=os(Q2),Xo=fa,C2e=os(J2),wN=os(eM),A2e=os(tM),xN=os(rM),T2e=os(nM),k2e=os(vM),L2e=os(gM),I2e=Vs,O2e=function(r,e){var t=e&&e.debugTiming?Xo.time:Xo.notime;t("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&t("  inheritOrder",function(){$2e(r,e.prevGraph)});var n=t("  buildLayoutGraph",function(){return j2e(r)});e&&e.edgeLabelSpace===!1||t("  makeSpaceForEdgeLabels",function(){U2e(n)});try{t("  runLayout",function(){N2e(n,t,e)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}throw i}t("  updateInputGraph",function(){D2e(r,n)})})},N2e=function(r,e,t){e("    removeSelfEdges",function(){Q2e(r)}),e("    acyclic",function(){yN.default.run(r)}),e("    nestingGraph.run",function(){wN.default.run(r)}),e("    rank",function(){(0,M2e.default)((0,Xo.asNonCompoundGraph)(r))}),e("    injectEdgeLabelProxies",function(){W2e(r)}),e("    removeEmptyRanks",function(){(0,Xo.removeEmptyRanks)(r)}),e("    nestingGraph.cleanup",function(){wN.default.cleanup(r)}),e("    normalizeRanks",function(){(0,Xo.normalizeRanks)(r)}),e("    assignRankMinMax",function(){H2e(r)}),e("    removeEdgeLabelProxies",function(){V2e(r)}),e("    normalize.run",function(){bN.default.run(r)}),e("    parentDummyChains",function(){(0,C2e.default)(r)}),e("    addBorderSegments",function(){(0,A2e.default)(r)}),t&&t.keepNodeOrder&&e("    initDataOrder",function(){(0,L2e.default)(r,t.nodeOrder)}),e("    order",function(){(0,T2e.default)(r,t==null?void 0:t.keepNodeOrder)}),e("    insertSelfEdges",function(){J2e(r)}),e("    adjustCoordinateSystem",function(){xN.default.adjust(r)}),e("    position",function(){(0,k2e.default)(r)}),e("    positionSelfEdges",function(){eMe(r)}),e("    removeBorderNodes",function(){Z2e(r)}),e("    normalize.undo",function(){bN.default.undo(r)}),e("    fixupEdgeLabelCoords",function(){K2e(r)}),e("    undoCoordinateSystem",function(){xN.default.undo(r)}),e("    translateGraph",function(){Y2e(r)}),e("    assignNodeIntersects",function(){X2e(r)}),e("    reversePoints",function(){q2e(r)}),e("    acyclic.undo",function(){yN.default.undo(r)})},$2e=function(r,e){r.nodes().forEach(function(t){var n=r.node(t),i=e.node(t);i!==void 0?(n.fixorder=i._order,delete i._order):delete n.fixorder})},D2e=function(r,e){r.nodes().forEach(function(t){var n,i=r.node(t);if(i){var a=e.node(t);i.x=a.x,i.y=a.y,i._order=a.order,i._rank=a.rank,!((n=e.children(t))===null||n===void 0)&&n.length&&(i.width=a.width,i.height=a.height)}}),r.edges().forEach(function(t){var n=r.edge(t),i=e.edge(t);n.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height},R2e=["nodesep","edgesep","ranksep","marginx","marginy"],P2e={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Pw=["acyclicer","ranker","rankdir","align"],F2e=["width","height","layer","fixorder"],B2e={width:0,height:0},z2e=["minlen","weight","width","height","labeloffset"],G2e={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Fw=["labelpos"],j2e=function(r){var e=new I2e.Graph({multigraph:!0,compound:!0}),t=zw(r.graph()),n={};return Pw==null||Pw.forEach(function(i){t[i]!==void 0&&(n[i]=t[i])}),e.setGraph(Object.assign({},P2e,Bw(t,R2e),n)),r.nodes().forEach(function(i){var a=zw(r.node(i)),o=Rm(Rm({},B2e),a),s=Bw(o,F2e);e.setNode(i,s),e.setParent(i,r.parent(i))}),r.edges().forEach(function(i){var a=zw(r.edge(i)),o={};Fw==null||Fw.forEach(function(s){a[s]!==void 0&&(o[s]=a[s])}),e.setEdgeObj(i,Object.assign({},G2e,Bw(a,z2e),o))}),e},U2e=function(r){var e=r.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,r.nodes().forEach(function(t){var n=r.node(t);isNaN(n.layer)||n.layer||(n.layer=0)}),r.edges().forEach(function(t){var n,i=r.edge(t);i.minlen*=2,((n=i.labelpos)===null||n===void 0?void 0:n.toLowerCase())!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},W2e=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),a={e,rank:(i.rank-n.rank)/2+n.rank};(0,Xo.addDummyNode)(r,"edge-proxy",a,"_ep")}})},H2e=function(r){var e=0;r.nodes().forEach(function(t){var n,i,a=r.node(t);a.borderTop&&(a.minRank=(n=r.node(a.borderTop))===null||n===void 0?void 0:n.rank,a.maxRank=(i=r.node(a.borderBottom))===null||i===void 0?void 0:i.rank,e=Math.max(e,a.maxRank||-1/0))}),r.graph().maxRank=e},V2e=function(r){r.nodes().forEach(function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})},Y2e=function(r){var e,t=0,n,i=0,a=r.graph(),o=a.marginx||0,s=a.marginy||0,l=function(u){if(u){var c=u.x,f=u.y,h=u.width,d=u.height;!isNaN(c)&&!isNaN(h)&&(e===void 0&&(e=c-h/2),e=Math.min(e,c-h/2),t=Math.max(t,c+h/2)),!isNaN(f)&&!isNaN(d)&&(n===void 0&&(n=f-d/2),n=Math.min(n,f-d/2),i=Math.max(i,f+d/2))}};r.nodes().forEach(function(u){l(r.node(u))}),r.edges().forEach(function(u){var c=r.edge(u);c!=null&&c.hasOwnProperty("x")&&l(c)}),e-=o,n-=s,r.nodes().forEach(function(u){var c=r.node(u);c&&(c.x-=e,c.y-=n)}),r.edges().forEach(function(u){var c,f=r.edge(u);(c=f.points)===null||c===void 0||c.forEach(function(h){h.x-=e,h.y-=n}),f.hasOwnProperty("x")&&(f.x-=e),f.hasOwnProperty("y")&&(f.y-=n)}),a.width=t-e+o,a.height=i-n+s},X2e=function(r){r.edges().forEach(function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),a,o;t.points?(a=t.points[0],o=t.points[t.points.length-1]):(t.points=[],a=i,o=n),t.points.unshift((0,Xo.intersectRect)(n,a)),t.points.push((0,Xo.intersectRect)(i,o))})},K2e=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t!=null&&t.hasOwnProperty("x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})},q2e=function(r){r.edges().forEach(function(e){var t,n=r.edge(e);n.reversed&&((t=n.points)===null||t===void 0||t.reverse())})},Z2e=function(r){r.nodes().forEach(function(e){var t,n,i;if(!((t=r.children(e))===null||t===void 0)&&t.length){var a=r.node(e),o=r.node(a.borderTop),s=r.node(a.borderBottom),l=r.node(a.borderLeft[((n=a.borderLeft)===null||n===void 0?void 0:n.length)-1]),u=r.node(a.borderRight[((i=a.borderRight)===null||i===void 0?void 0:i.length)-1]);a.width=Math.abs((u==null?void 0:u.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((s==null?void 0:s.y)-(o==null?void 0:o.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((o==null?void 0:o.y)||0)+a.height/2}}),r.nodes().forEach(function(e){var t;((t=r.node(e))===null||t===void 0?void 0:t.dummy)==="border"&&r.removeNode(e)})},Q2e=function(r){r.edges().forEach(function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdgeObj(e)}})},J2e=function(r){var e=(0,Xo.buildLayerMatrix)(r);e==null||e.forEach(function(t){var n=0;t==null||t.forEach(function(i,a){var o,s=r.node(i);s.order=a+n,(o=s.selfEdges)===null||o===void 0||o.forEach(function(l){(0,Xo.addDummyNode)(r,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})},eMe=function(r){r.nodes().forEach(function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,a=n.y,o=t.x-i,s=n.height/2;r.setEdgeObj(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],t.label.x=t.x,t.label.y=t.y}})},Bw=function(r,e){var t={};return e==null||e.forEach(function(n){r[n]!==void 0&&(t[n]=+r[n])}),t},zw=function(r){r===void 0&&(r={});var e={};return Object.keys(r).forEach(function(t){e[t.toLowerCase()]=r[t]}),e};H2.default=O2e;var tMe=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(W2,"__esModule",{value:!0});var rMe=tMe(H2),SN=fa;W2.default={layout:rMe.default,util:{time:SN.time,notime:SN.notime}};var nMe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iMe=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fh,"__esModule",{value:!0});fh.DagreLayout=void 0;var aMe=iMe(W2),Hi=vn(),oMe=_n,_N=Vs,sMe=function(r){nMe(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(i){var a=n,o=a.nodes,s=o.find(function(u){return u.id===i});if(s){var l=s.layout!==!1;return l}return!0},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t=this,n,i,a,o,s=this,l=s.nodes,u=s.nodeSize,c=s.rankdir,f=s.combos,h=s.begin,d=s.radial,v=s.comboEdges,p=v===void 0?[]:v,g=s.vedges,m=g===void 0?[]:g;if(l){var y=s.edges||[],w=new _N.Graph({multigraph:!0,compound:!0});s.nodeMap={};var b={};l.forEach(function(J){s.nodeMap[J.id]=J,J.comboId&&(b[J.comboId]=b[J.comboId]||[],b[J.comboId].push(J.id))});var x=[],S={};!((n=s.nodeOrder)===null||n===void 0)&&n.length?(s.nodeOrder.forEach(function(J){S[J]=!0,x.push(s.nodeMap[J])}),l.forEach(function(J){S[J.id]||x.push(J)})):x=l;var _;u?(0,Hi.isArray)(u)?_=function(){return u}:_=function(){return[u,u]}:_=function(J){return J.size?(0,Hi.isArray)(J.size)?J.size:(0,Hi.isObject)(J.size)?[J.size.width||40,J.size.height||40]:[J.size,J.size]:[40,40]};var M=(0,Hi.getFunc)(s.ranksep,50,s.ranksepFunc),A=(0,Hi.getFunc)(s.nodesep,50,s.nodesepFunc),E=A,T=M;(c==="LR"||c==="RL")&&(E=M,T=A),w.setDefaultEdgeLabel(function(){return{}}),w.setGraph(s);var C={};this.sortByCombo&&f&&f.forEach(function(J){if(C[J.id]=J,J.collapsed){var F=_(J),be=T(J),oe=E(J),X=F[0]+2*oe,de=F[1]+2*be;w.setNode(J.id,{width:X,height:de})}J.parentId&&(C[J.parentId]||w.setNode(J.parentId,{}),w.setParent(J.id,J.parentId))}),x.filter(function(J){return J.layout!==!1}).forEach(function(J){var F=_(J),be=T(J),oe=E(J),X=F[0]+2*oe,de=F[1]+2*be,xe=J.layer;(0,Hi.isNumber)(xe)?w.setNode(J.id,{width:X,height:de,layer:xe}):w.setNode(J.id,{width:X,height:de}),t.sortByCombo&&J.comboId&&(C[J.comboId]||(C[J.comboId]={id:J.comboId},w.setNode(J.comboId,{})),w.setParent(J.id,J.comboId))}),y.forEach(function(J){var F=(0,Hi.getEdgeTerminal)(J,"source"),be=(0,Hi.getEdgeTerminal)(J,"target");t.layoutNode(F)&&t.layoutNode(be)&&w.setEdge(F,be,{weight:J.weight||1})}),(i=p==null?void 0:p.concat(m||[]))===null||i===void 0||i.forEach(function(J){var F,be,oe=J.source,X=J.target,de=!((F=C[oe])===null||F===void 0)&&F.collapsed?[oe]:b[oe]||[oe],xe=!((be=C[X])===null||be===void 0)&&be.collapsed?[X]:b[X]||[X];de.forEach(function(ke){xe.forEach(function(Ge){w.setEdge(ke,Ge,{weight:J.weight||1})})})});var k=void 0;!((a=s.preset)===null||a===void 0)&&a.nodes&&(k=new _N.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach(function(J){k==null||k.setNode(J.id,J)})),aMe.default.layout(w,{prevGraph:k,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});var L=[0,0];if(h){var I=1/0,O=1/0;w.nodes().forEach(function(J){var F=w.node(J);I>F.x&&(I=F.x),O>F.y&&(O=F.y)}),w.edges().forEach(function(J){var F,be=w.edge(J);(F=be.points)===null||F===void 0||F.forEach(function(oe){I>oe.x&&(I=oe.x),O>oe.y&&(O=oe.y)})}),L[0]=h[0]-I,L[1]=h[1]-O}var N=c==="LR"||c==="RL";if(d){var D=this,$=D.focusNode,R=D.ranksep,B=D.getRadialPos,j=(0,Hi.isString)($)?$:$==null?void 0:$.id,G=j?(o=w.node(j))===null||o===void 0?void 0:o._rank:0,z=[],W=N?"y":"x",Q=N?"height":"width",ie=1/0,se=-1/0;w.nodes().forEach(function(J){var F=w.node(J);if(s.nodeMap[J]){var be=A(s.nodeMap[J]);if(G===0)z[F._rank]||(z[F._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),z[F._rank].nodes.push(J),z[F._rank].totalWidth+=be*2+F[Q],z[F._rank].maxSize<Math.max(F.width,F.height)&&(z[F._rank].maxSize=Math.max(F.width,F.height));else{var oe=F._rank-G;if(oe===0)z[oe]||(z[oe]={nodes:[],totalWidth:0,maxSize:-1/0}),z[oe].nodes.push(J),z[oe].totalWidth+=be*2+F[Q],z[oe].maxSize<Math.max(F.width,F.height)&&(z[oe].maxSize=Math.max(F.width,F.height));else{var X=Math.abs(oe);z[X]||(z[X]={left:[],right:[],totalWidth:0,maxSize:-1/0}),z[X].totalWidth+=be*2+F[Q],z[X].maxSize<Math.max(F.width,F.height)&&(z[X].maxSize=Math.max(F.width,F.height)),oe<0?z[X].left.push(J):z[X].right.push(J)}}var de=F[W]-F[Q]/2-be,xe=F[W]+F[Q]/2+be;de<ie&&(ie=de),xe>se&&(se=xe)}});var ae=R||50,pe={},De=(se-ie)/.9,Je=[(ie+se-De)*.5,(ie+se+De)*.5],ee=function(J,F,be,oe){be===void 0&&(be=-1/0),oe===void 0&&(oe=[0,1]);var X=be;return J.forEach(function(de){var xe=w.node(de);pe[de]=F;var ke=B(xe[W],Je,De,F,oe),Ge=ke.x,vt=ke.y;if(s.nodeMap[de]){s.nodeMap[de].x=Ge+L[0],s.nodeMap[de].y=vt+L[1],s.nodeMap[de]._order=xe._order;var Lt=M(s.nodeMap[de]);X<Lt&&(X=Lt)}}),X},ne=!0,me=0;z.forEach(function(J){var F,be,oe,X,de,xe,ke;if(!(!(!((F=J==null?void 0:J.nodes)===null||F===void 0)&&F.length)&&!(!((be=J==null?void 0:J.left)===null||be===void 0)&&be.length)&&!(!((oe=J==null?void 0:J.right)===null||oe===void 0)&&oe.length))){if(ne&&J.nodes.length===1){var Ge=J.nodes[0];if(!s.nodeMap[Ge])return;s.nodeMap[Ge].x=L[0],s.nodeMap[Ge].y=L[1],pe[J.nodes[0]]=0,ae=M(s.nodeMap[Ge]),ne=!1;return}ae=Math.max(ae,J.totalWidth/(2*Math.PI));var vt=-1/0;if(G===0||!((X=J.nodes)===null||X===void 0)&&X.length)vt=ee(J.nodes,ae,vt,[0,1]);else{var Lt=((de=J.left)===null||de===void 0?void 0:de.length)/(((xe=J.left)===null||xe===void 0?void 0:xe.length)+((ke=J.right)===null||ke===void 0?void 0:ke.length));vt=ee(J.left,ae,vt,[0,Lt]),vt=ee(J.right,ae,vt,[Lt+.05,1])}ae+=vt,ne=!1,me-J.maxSize}}),w.edges().forEach(function(J){var F,be,oe,X=w.edge(J),de=y.findIndex(function(zt){var jt=(0,Hi.getEdgeTerminal)(zt,"source"),pr=(0,Hi.getEdgeTerminal)(zt,"target");return jt===J.v&&pr===J.w});if(!(de<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[de].type!=="loop"){var xe=W==="x"?"y":"x",ke=(F=X==null?void 0:X.points)===null||F===void 0?void 0:F.slice(1,X.points.length-1),Ge=[],vt=(be=w.node(J.v))===null||be===void 0?void 0:be[xe],Lt=vt-((oe=w.node(J.w))===null||oe===void 0?void 0:oe[xe]),Kt=pe[J.v],Ct=Kt-pe[J.w];ke==null||ke.forEach(function(zt){var jt=(zt[xe]-vt)/Lt*Ct+Kt,pr=B(zt[W],Je,De,jt);Ge.push({x:pr.x+L[0],y:pr.y+L[1]})}),y[de].controlPoints=Ge}})}else{var Fe=new Set,Re=c==="BT"||c==="RL",$e=Re?function(J,F){return F-J}:function(J,F){return J-F};w.nodes().forEach(function(J){var F=w.node(J);if(F){var be=t.nodeMap[J];be||(be=f==null?void 0:f.find(function(oe){return oe.id===J})),be&&(be.x=F.x+L[0],be.y=F.y+L[1],be._order=F._order,Fe.add(N?be.x:be.y))}});var Ke=Array.from(Fe).sort($e),at=N?function(J,F){return J.x!==F.x}:function(J,F){return J.y!==F.y},Me=N?function(J,F,be){var oe=Math.max(F.y,be.y),X=Math.min(F.y,be.y);return J.filter(function(de){return de.y<=oe&&de.y>=X})}:function(J,F,be){var oe=Math.max(F.x,be.x),X=Math.min(F.x,be.x);return J.filter(function(de){return de.x<=oe&&de.x>=X})};w.edges().forEach(function(J){var F,be=w.edge(J),oe=y.findIndex(function(xe){var ke=(0,Hi.getEdgeTerminal)(xe,"source"),Ge=(0,Hi.getEdgeTerminal)(xe,"target");return ke===J.v&&Ge===J.w});if(!(oe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[oe].type!=="loop"){(F=be==null?void 0:be.points)===null||F===void 0||F.forEach(function(xe){xe.x+=L[0],xe.y+=L[1]});var X=s.nodeMap[J.v],de=s.nodeMap[J.w];y[oe].controlPoints=lMe(be==null?void 0:be.points,X,de,Ke,N,at,Me)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:l,edges:y}}},e.prototype.getRadialPos=function(t,n,i,a,o){o===void 0&&(o=[0,1]);var s=(t-n[0])/i;s=s*(o[1]-o[0])+o[0];var l=s*2*Math.PI;return{x:Math.cos(l)*a,y:Math.sin(l)*a}},e.prototype.getType=function(){return"dagre"},e}(oMe.Base);fh.DagreLayout=sMe;var lMe=function(r,e,t,n,i,a,o){var s=(r==null?void 0:r.slice(1,r.length-1))||[];if(e&&t){var l=e.x,u=e.y,c=t.x,f=t.y;if(i&&(l=e.y,u=e.x,c=t.y,f=t.x),f!==u&&l!==c){var h=n.indexOf(u),d=n[h+1];if(d){var v=s[0],p=i?{x:(u+d)/2,y:(v==null?void 0:v.y)||c}:{x:(v==null?void 0:v.x)||c,y:(u+d)/2};(!v||a(v,p))&&s.unshift(p)}var g=n.indexOf(f),m=Math.abs(g-h);if(m===1)s=o(s,e,t),s.length||s.push(i?{x:(u+f)/2,y:l}:{x:l,y:(u+f)/2});else if(m>1){var y=n[g-1];if(y){var w=s[s.length-1],b=i?{x:(f+y)/2,y:(w==null?void 0:w.y)||c}:{x:(w==null?void 0:w.x)||l,y:(f+y)/2};(!w||a(w,b))&&s.push(b)}}}}return s},ip={};const Pm={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function WS(r={},e=Pm){var t,n,i,a;const o=JSON.parse(JSON.stringify(e)),s=((t=r==null?void 0:r.graph)===null||t===void 0?void 0:t.meta)||{},l=((n=r==null?void 0:r.subScene)===null||n===void 0?void 0:n.meta)||{},u=((i=r==null?void 0:r.nodeSize)===null||i===void 0?void 0:i.meta)||{},c=((a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.node)||{},f=o.nodeSize.bridge;return{graph:{meta:Object.assign(o.graph.meta,s)},subScene:{meta:Object.assign(o.subScene.meta,l)},nodeSize:{meta:Object.assign(o.nodeSize.meta,u),node:Object.assign(o.nodeSize.node,c),bridge:f}}}function Hz(r){return`◬${r}◬`}const qf=Hz("ROOT"),Vz=Hz("BRIDGE_GRAPH");var Ni,dc,Zf,HS;(function(r){r[r.META=0]="META",r[r.NODE=1]="NODE",r[r.BRIDGE=2]="BRIDGE"})(Ni||(Ni={})),function(r){r[r.INCLUDE=0]="INCLUDE",r[r.EXCLUDE=1]="EXCLUDE",r[r.UNSPECIFIED=2]="UNSPECIFIED"}(dc||(dc={})),function(r){r[r.META=0]="META",r[r.CORE=1]="CORE",r[r.BRIDGE=2]="BRIDGE"}(Zf||(Zf={})),function(r){r[r.META=0]="META",r[r.OP=1]="OP",r[r.SERIES=2]="SERIES"}(HS||(HS={}));var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mM(r,e){return r(e={exports:{}},e.exports),e.exports}var uMe=function(){this.__data__=[],this.size=0},dh=function(r,e){return r===e||r!=r&&e!=e},u1=function(r,e){for(var t=r.length;t--;)if(dh(r[t][0],e))return t;return-1},cMe=Array.prototype.splice,fMe=function(r){var e=this.__data__,t=u1(e,r);return!(t<0)&&(t==e.length-1?e.pop():cMe.call(e,t,1),--this.size,!0)},hMe=function(r){var e=this.__data__,t=u1(e,r);return t<0?void 0:e[t][1]},dMe=function(r){return u1(this.__data__,r)>-1},vMe=function(r,e){var t=this.__data__,n=u1(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this};function af(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}af.prototype.clear=uMe,af.prototype.delete=fMe,af.prototype.get=hMe,af.prototype.has=dMe,af.prototype.set=vMe;var c1=af,pMe=function(){this.__data__=new c1,this.size=0},gMe=function(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t},mMe=function(r){return this.__data__.get(r)},yMe=function(r){return this.__data__.has(r)},Yz=typeof Ug=="object"&&Ug&&Ug.Object===Object&&Ug,bMe=typeof self=="object"&&self&&self.Object===Object&&self,vo=Yz||bMe||Function("return this")(),Ra=vo.Symbol,Xz=Object.prototype,wMe=Xz.hasOwnProperty,xMe=Xz.toString,Yh=Ra?Ra.toStringTag:void 0,SMe=function(r){var e=wMe.call(r,Yh),t=r[Yh];try{r[Yh]=void 0;var n=!0}catch{}var i=xMe.call(r);return n&&(e?r[Yh]=t:delete r[Yh]),i},_Me=Object.prototype.toString,EMe=function(r){return _Me.call(r)},EN=Ra?Ra.toStringTag:void 0,ru=function(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":EN&&EN in Object(r)?SMe(r):EMe(r)},Gi=function(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")},MN,ap=function(r){if(!Gi(r))return!1;var e=ru(r);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},Gw=vo["__core-js_shared__"],CN=(MN=/[^.]+$/.exec(Gw&&Gw.keys&&Gw.keys.IE_PROTO||""))?"Symbol(src)_1."+MN:"",MMe=function(r){return!!CN&&CN in r},CMe=Function.prototype.toString,Sc=function(r){if(r!=null){try{return CMe.call(r)}catch{}try{return r+""}catch{}}return""},AMe=/^\[object .+?Constructor\]$/,TMe=Function.prototype,kMe=Object.prototype,LMe=TMe.toString,IMe=kMe.hasOwnProperty,OMe=RegExp("^"+LMe.call(IMe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),NMe=function(r){return!(!Gi(r)||MMe(r))&&(ap(r)?OMe:AMe).test(Sc(r))},$Me=function(r,e){return r==null?void 0:r[e]},_c=function(r,e){var t=$Me(r,e);return NMe(t)?t:void 0},Cv=_c(vo,"Map"),Av=_c(Object,"create"),DMe=function(){this.__data__=Av?Av(null):{},this.size=0},RMe=function(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e},PMe=Object.prototype.hasOwnProperty,FMe=function(r){var e=this.__data__;if(Av){var t=e[r];return t==="__lodash_hash_undefined__"?void 0:t}return PMe.call(e,r)?e[r]:void 0},BMe=Object.prototype.hasOwnProperty,zMe=function(r){var e=this.__data__;return Av?e[r]!==void 0:BMe.call(e,r)},GMe=function(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Av&&e===void 0?"__lodash_hash_undefined__":e,this};function of(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}of.prototype.clear=DMe,of.prototype.delete=RMe,of.prototype.get=FMe,of.prototype.has=zMe,of.prototype.set=GMe;var AN=of,jMe=function(){this.size=0,this.__data__={hash:new AN,map:new(Cv||c1),string:new AN}},UMe=function(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null},f1=function(r,e){var t=r.__data__;return UMe(e)?t[typeof e=="string"?"string":"hash"]:t.map},WMe=function(r){var e=f1(this,r).delete(r);return this.size-=e?1:0,e},HMe=function(r){return f1(this,r).get(r)},VMe=function(r){return f1(this,r).has(r)},YMe=function(r,e){var t=f1(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this};function sf(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}sf.prototype.clear=jMe,sf.prototype.delete=WMe,sf.prototype.get=HMe,sf.prototype.has=VMe,sf.prototype.set=YMe;var h1=sf,XMe=function(r,e){var t=this.__data__;if(t instanceof c1){var n=t.__data__;if(!Cv||n.length<199)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new h1(n)}return t.set(r,e),this.size=t.size,this};function lf(r){var e=this.__data__=new c1(r);this.size=e.size}lf.prototype.clear=pMe,lf.prototype.delete=gMe,lf.prototype.get=mMe,lf.prototype.has=yMe,lf.prototype.set=XMe;var Cf=lf,yM=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r},Fm=function(){try{var r=_c(Object,"defineProperty");return r({},"",{}),r}catch{}}(),d1=function(r,e,t){e=="__proto__"&&Fm?Fm(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t},KMe=Object.prototype.hasOwnProperty,v1=function(r,e,t){var n=r[e];KMe.call(r,e)&&dh(n,t)&&(t!==void 0||e in r)||d1(r,e,t)},op=function(r,e,t,n){var i=!t;t||(t={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=void 0;l===void 0&&(l=r[s]),i?d1(t,s,l):v1(t,s,l)}return t},qMe=function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n},so=function(r){return r!=null&&typeof r=="object"},TN=function(r){return so(r)&&ru(r)=="[object Arguments]"},Kz=Object.prototype,ZMe=Kz.hasOwnProperty,QMe=Kz.propertyIsEnumerable,Qf=TN(function(){return arguments}())?TN:function(r){return so(r)&&ZMe.call(r,"callee")&&!QMe.call(r,"callee")},Sn=Array.isArray,JMe=function(){return!1},vc=mM(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t?vo.Buffer:void 0,a=(i?i.isBuffer:void 0)||JMe;r.exports=a}),eCe=/^(?:0|[1-9]\d*)$/,p1=function(r,e){var t=typeof r;return!!(e=e??9007199254740991)&&(t=="number"||t!="symbol"&&eCe.test(r))&&r>-1&&r%1==0&&r<e},bM=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991},Qr={};Qr["[object Float32Array]"]=Qr["[object Float64Array]"]=Qr["[object Int8Array]"]=Qr["[object Int16Array]"]=Qr["[object Int32Array]"]=Qr["[object Uint8Array]"]=Qr["[object Uint8ClampedArray]"]=Qr["[object Uint16Array]"]=Qr["[object Uint32Array]"]=!0,Qr["[object Arguments]"]=Qr["[object Array]"]=Qr["[object ArrayBuffer]"]=Qr["[object Boolean]"]=Qr["[object DataView]"]=Qr["[object Date]"]=Qr["[object Error]"]=Qr["[object Function]"]=Qr["[object Map]"]=Qr["[object Number]"]=Qr["[object Object]"]=Qr["[object RegExp]"]=Qr["[object Set]"]=Qr["[object String]"]=Qr["[object WeakMap]"]=!1;var tCe=function(r){return so(r)&&bM(r.length)&&!!Qr[ru(r)]},g1=function(r){return function(e){return r(e)}},Jf=mM(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t&&Yz.process,a=function(){try{var o=n&&n.require&&n.require("util").types;return o||i&&i.binding&&i.binding("util")}catch{}}();r.exports=a}),kN=Jf&&Jf.isTypedArray,sp=kN?g1(kN):tCe,rCe=Object.prototype.hasOwnProperty,qz=function(r,e){var t=Sn(r),n=!t&&Qf(r),i=!t&&!n&&vc(r),a=!t&&!n&&!i&&sp(r),o=t||n||i||a,s=o?qMe(r.length,String):[],l=s.length;for(var u in r)!e&&!rCe.call(r,u)||o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||p1(u,l))||s.push(u);return s},nCe=Object.prototype,m1=function(r){var e=r&&r.constructor;return r===(typeof e=="function"&&e.prototype||nCe)},Zz=function(r,e){return function(t){return r(e(t))}},iCe=Zz(Object.keys,Object),aCe=Object.prototype.hasOwnProperty,wM=function(r){if(!m1(r))return iCe(r);var e=[];for(var t in Object(r))aCe.call(r,t)&&t!="constructor"&&e.push(t);return e},Xs=function(r){return r!=null&&bM(r.length)&&!ap(r)},nu=function(r){return Xs(r)?qz(r):wM(r)},oCe=function(r,e){return r&&op(e,nu(e),r)},sCe=function(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e},lCe=Object.prototype.hasOwnProperty,uCe=function(r){if(!Gi(r))return sCe(r);var e=m1(r),t=[];for(var n in r)(n!="constructor"||!e&&lCe.call(r,n))&&t.push(n);return t},Ec=function(r){return Xs(r)?qz(r,!0):uCe(r)},cCe=function(r,e){return r&&op(e,Ec(e),r)},Qz=mM(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t?vo.Buffer:void 0,a=i?i.allocUnsafe:void 0;r.exports=function(o,s){if(s)return o.slice();var l=o.length,u=a?a(l):new o.constructor(l);return o.copy(u),u}}),Jz=function(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e},e8=function(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var o=r[t];e(o,t,r)&&(a[i++]=o)}return a},t8=function(){return[]},fCe=Object.prototype.propertyIsEnumerable,LN=Object.getOwnPropertySymbols,xM=LN?function(r){return r==null?[]:(r=Object(r),e8(LN(r),function(e){return fCe.call(r,e)}))}:t8,hCe=function(r,e){return op(r,xM(r),e)},SM=function(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r},y1=Zz(Object.getPrototypeOf,Object),r8=Object.getOwnPropertySymbols?function(r){for(var e=[];r;)SM(e,xM(r)),r=y1(r);return e}:t8,dCe=function(r,e){return op(r,r8(r),e)},n8=function(r,e,t){var n=e(r);return Sn(r)?n:SM(n,t(r))},VS=function(r){return n8(r,nu,xM)},vCe=function(r){return n8(r,Ec,r8)},YS=_c(vo,"DataView"),XS=_c(vo,"Promise"),Af=_c(vo,"Set"),KS=_c(vo,"WeakMap"),pCe=Sc(YS),gCe=Sc(Cv),mCe=Sc(XS),yCe=Sc(Af),bCe=Sc(KS),$u=ru;(YS&&$u(new YS(new ArrayBuffer(1)))!="[object DataView]"||Cv&&$u(new Cv)!="[object Map]"||XS&&$u(XS.resolve())!="[object Promise]"||Af&&$u(new Af)!="[object Set]"||KS&&$u(new KS)!="[object WeakMap]")&&($u=function(r){var e=ru(r),t=e=="[object Object]"?r.constructor:void 0,n=t?Sc(t):"";if(n)switch(n){case pCe:return"[object DataView]";case gCe:return"[object Map]";case mCe:return"[object Promise]";case yCe:return"[object Set]";case bCe:return"[object WeakMap]"}return e});var pc=$u,wCe=Object.prototype.hasOwnProperty,xCe=function(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&wCe.call(r,"index")&&(t.index=r.index,t.input=r.input),t},Bm=vo.Uint8Array,_M=function(r){var e=new r.constructor(r.byteLength);return new Bm(e).set(new Bm(r)),e},SCe=function(r,e){var t=e?_M(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)},_Ce=/\w*$/,ECe=function(r){var e=new r.constructor(r.source,_Ce.exec(r));return e.lastIndex=r.lastIndex,e},IN=Ra?Ra.prototype:void 0,ON=IN?IN.valueOf:void 0,MCe=function(r){return ON?Object(ON.call(r)):{}},i8=function(r,e){var t=e?_M(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)},CCe=function(r,e,t){var n=r.constructor;switch(e){case"[object ArrayBuffer]":return _M(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return SCe(r,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i8(r,t);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return ECe(r);case"[object Set]":return new n;case"[object Symbol]":return MCe(r)}},NN=Object.create,a8=function(){function r(){}return function(e){if(!Gi(e))return{};if(NN)return NN(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),o8=function(r){return typeof r.constructor!="function"||m1(r)?{}:a8(y1(r))},ACe=function(r){return so(r)&&pc(r)=="[object Map]"},$N=Jf&&Jf.isMap,TCe=$N?g1($N):ACe,kCe=function(r){return so(r)&&pc(r)=="[object Set]"},DN=Jf&&Jf.isSet,LCe=DN?g1(DN):kCe,Kr={};Kr["[object Arguments]"]=Kr["[object Array]"]=Kr["[object ArrayBuffer]"]=Kr["[object DataView]"]=Kr["[object Boolean]"]=Kr["[object Date]"]=Kr["[object Float32Array]"]=Kr["[object Float64Array]"]=Kr["[object Int8Array]"]=Kr["[object Int16Array]"]=Kr["[object Int32Array]"]=Kr["[object Map]"]=Kr["[object Number]"]=Kr["[object Object]"]=Kr["[object RegExp]"]=Kr["[object Set]"]=Kr["[object String]"]=Kr["[object Symbol]"]=Kr["[object Uint8Array]"]=Kr["[object Uint8ClampedArray]"]=Kr["[object Uint16Array]"]=Kr["[object Uint32Array]"]=!0,Kr["[object Error]"]=Kr["[object Function]"]=Kr["[object WeakMap]"]=!1;var s8=function r(e,t,n,i,a,o){var s,l=1&t,u=2&t,c=4&t;if(s!==void 0)return s;if(!Gi(e))return e;var f=Sn(e);if(f){if(s=xCe(e),!l)return Jz(e,s)}else{var h=pc(e),d=h=="[object Function]"||h=="[object GeneratorFunction]";if(vc(e))return Qz(e,l);if(h=="[object Object]"||h=="[object Arguments]"||d&&!a){if(s=u||d?{}:o8(e),!l)return u?dCe(e,cCe(s,e)):hCe(e,oCe(s,e))}else{if(!Kr[h])return a?e:{};s=CCe(e,h,l)}}o||(o=new Cf);var v=o.get(e);if(v)return v;o.set(e,s),LCe(e)?e.forEach(function(g){s.add(r(g,t,n,g,e,o))}):TCe(e)&&e.forEach(function(g,m){s.set(m,r(g,t,n,m,e,o))});var p=f?void 0:(c?u?vCe:VS:u?Ec:nu)(e);return yM(p||e,function(g,m){p&&(g=e[m=g]),v1(s,m,r(g,t,n,m,e,o))}),s},ICe=function(r){return s8(r,4)},EM=function(r){return function(){return r}},MM=function(r){return function(e,t,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[++i];if(t(a[l],l,a)===!1)break}return e}}(),CM=function(r,e){return r&&MM(r,e,nu)},b1=function(r,e){return function(t,n){if(t==null)return t;if(!Xs(t))return r(t,n);for(var i=t.length,a=-1,o=Object(t);++a<i&&n(o[a],a,o)!==!1;);return t}}(CM),Mc=function(r){return r},l8=function(r){return typeof r=="function"?r:Mc},u8=function(r,e){return(Sn(r)?yM:b1)(r,l8(e))},c8=u8,OCe=function(r,e){var t=[];return b1(r,function(n,i,a){e(n,i,a)&&t.push(n)}),t},NCe=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},$Ce=function(r){return this.__data__.has(r)};function O0(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new h1;++e<t;)this.add(r[e])}O0.prototype.add=O0.prototype.push=NCe,O0.prototype.has=$Ce;var f8=O0,DCe=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1},h8=function(r,e){return r.has(e)},d8=function(r,e,t,n,i,a){var o=1&t,s=r.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),c=a.get(e);if(u&&c)return u==e&&c==r;var f=-1,h=!0,d=2&t?new f8:void 0;for(a.set(r,e),a.set(e,r);++f<s;){var v=r[f],p=e[f];if(n)var g=o?n(p,v,f,e,r,a):n(v,p,f,r,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!DCe(e,function(m,y){if(!h8(d,y)&&(v===m||i(v,m,t,n,a)))return d.push(y)})){h=!1;break}}else if(v!==p&&!i(v,p,t,n,a)){h=!1;break}}return a.delete(r),a.delete(e),h},RCe=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t},AM=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t},RN=Ra?Ra.prototype:void 0,jw=RN?RN.valueOf:void 0,PCe=function(r,e,t,n,i,a,o){switch(t){case"[object DataView]":if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=e.byteLength||!a(new Bm(r),new Bm(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return dh(+r,+e);case"[object Error]":return r.name==e.name&&r.message==e.message;case"[object RegExp]":case"[object String]":return r==e+"";case"[object Map]":var s=RCe;case"[object Set]":var l=1&n;if(s||(s=AM),r.size!=e.size&&!l)return!1;var u=o.get(r);if(u)return u==e;n|=2,o.set(r,e);var c=d8(s(r),s(e),n,i,a,o);return o.delete(r),c;case"[object Symbol]":if(jw)return jw.call(r)==jw.call(e)}return!1},FCe=Object.prototype.hasOwnProperty,BCe=function(r,e,t,n,i,a){var o=1&t,s=VS(r),l=s.length;if(l!=VS(e).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in e:FCe.call(e,c)))return!1}var f=a.get(r),h=a.get(e);if(f&&h)return f==e&&h==r;var d=!0;a.set(r,e),a.set(e,r);for(var v=o;++u<l;){var p=r[c=s[u]],g=e[c];if(n)var m=o?n(g,p,c,e,r,a):n(p,g,c,r,e,a);if(!(m===void 0?p===g||i(p,g,t,n,a):m)){d=!1;break}v||(v=c=="constructor")}if(d&&!v){var y=r.constructor,w=e.constructor;y==w||!("constructor"in r)||!("constructor"in e)||typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w||(d=!1)}return a.delete(r),a.delete(e),d},PN=Object.prototype.hasOwnProperty,zCe=function(r,e,t,n,i,a){var o=Sn(r),s=Sn(e),l=o?"[object Array]":pc(r),u=s?"[object Array]":pc(e),c=(l=l=="[object Arguments]"?"[object Object]":l)=="[object Object]",f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",h=l==u;if(h&&vc(r)){if(!vc(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new Cf),o||sp(r)?d8(r,e,t,n,i,a):PCe(r,e,l,t,n,i,a);if(!(1&t)){var d=c&&PN.call(r,"__wrapped__"),v=f&&PN.call(e,"__wrapped__");if(d||v){var p=d?r.value():r,g=v?e.value():e;return a||(a=new Cf),i(p,g,t,n,a)}}return!!h&&(a||(a=new Cf),BCe(r,e,t,n,i,a))},v8=function r(e,t,n,i,a){return e===t||(e==null||t==null||!so(e)&&!so(t)?e!=e&&t!=t:zCe(e,t,n,i,r,a))},GCe=function(r,e,t,n){var i=t.length,a=i;if(r==null)return!a;for(r=Object(r);i--;){var o=t[i];if(o[2]?o[1]!==r[o[0]]:!(o[0]in r))return!1}for(;++i<a;){var s=(o=t[i])[0],l=r[s],u=o[1];if(o[2]){if(l===void 0&&!(s in r))return!1}else{var c=new Cf,f;if(!(f===void 0?v8(u,l,3,n,c):f))return!1}}return!0},p8=function(r){return r==r&&!Gi(r)},jCe=function(r){for(var e=nu(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,p8(i)]}return e},g8=function(r,e){return function(t){return t!=null&&t[r]===e&&(e!==void 0||r in Object(t))}},UCe=function(r){var e=jCe(r);return e.length==1&&e[0][2]?g8(e[0][0],e[0][1]):function(t){return t===r||GCe(t,r,e)}},gc=function(r){return typeof r=="symbol"||so(r)&&ru(r)=="[object Symbol]"},WCe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,HCe=/^\w*$/,TM=function(r,e){if(Sn(r))return!1;var t=typeof r;return!(t!="number"&&t!="symbol"&&t!="boolean"&&r!=null&&!gc(r))||HCe.test(r)||!WCe.test(r)||e!=null&&r in Object(e)};function kM(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(kM.Cache||h1),t}kM.Cache=h1;var VCe=kM,YCe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XCe=/\\(\\)?/g,KCe=function(r){var e=VCe(r,function(n){return t.size===500&&t.clear(),n}),t=e.cache;return e}(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(YCe,function(t,n,i,a){e.push(i?a.replace(XCe,"$1"):n||t)}),e}),Tf=function(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i},FN=Ra?Ra.prototype:void 0,BN=FN?FN.toString:void 0,qCe=function r(e){if(typeof e=="string")return e;if(Sn(e))return Tf(e,r)+"";if(gc(e))return BN?BN.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},m8=function(r){return r==null?"":qCe(r)},w1=function(r,e){return Sn(r)?r:TM(r,e)?[r]:KCe(m8(r))},lp=function(r){if(typeof r=="string"||gc(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e},x1=function(r,e){for(var t=0,n=(e=w1(e,r)).length;r!=null&&t<n;)r=r[lp(e[t++])];return t&&t==n?r:void 0},ZCe=function(r,e,t){var n=r==null?void 0:x1(r,e);return n===void 0?t:n},QCe=function(r,e){return r!=null&&e in Object(r)},y8=function(r,e,t){for(var n=-1,i=(e=w1(e,r)).length,a=!1;++n<i;){var o=lp(e[n]);if(!(a=r!=null&&t(r,o)))break;r=r[o]}return a||++n!=i?a:!!(i=r==null?0:r.length)&&bM(i)&&p1(o,i)&&(Sn(r)||Qf(r))},b8=function(r,e){return r!=null&&y8(r,e,QCe)},JCe=function(r,e){return TM(r)&&p8(e)?g8(lp(r),e):function(t){var n=ZCe(t,r);return n===void 0&&n===e?b8(t,r):v8(e,n,3)}},w8=function(r){return function(e){return e==null?void 0:e[r]}},eAe=function(r){return function(e){return x1(e,r)}},tAe=function(r){return TM(r)?w8(lp(r)):eAe(r)},Ks=function(r){return typeof r=="function"?r:r==null?Mc:typeof r=="object"?Sn(r)?JCe(r[0],r[1]):UCe(r):tAe(r)},x8=function(r,e){return(Sn(r)?e8:OCe)(r,Ks(e))},rAe=Object.prototype.hasOwnProperty,nAe=function(r,e){return r!=null&&rAe.call(r,e)},S8=function(r,e){return r!=null&&y8(r,e,nAe)},iAe=Object.prototype.hasOwnProperty,aAe=function(r){if(r==null)return!0;if(Xs(r)&&(Sn(r)||typeof r=="string"||typeof r.splice=="function"||vc(r)||sp(r)||Qf(r)))return!r.length;var e=pc(r);if(e=="[object Map]"||e=="[object Set]")return!r.size;if(m1(r))return!wM(r).length;for(var t in r)if(iAe.call(r,t))return!1;return!0},_8=function(r){return r===void 0},E8=function(r,e){var t=-1,n=Xs(r)?Array(r.length):[];return b1(r,function(i,a,o){n[++t]=e(i,a,o)}),n},M8=function(r,e){return(Sn(r)?Tf:E8)(r,Ks(e))},oAe=function(r,e,t,n){var i=-1,a=r==null?0:r.length;for(n&&a&&(t=r[++i]);++i<a;)t=e(t,r[i],i,r);return t},sAe=function(r,e,t,n,i){return i(r,function(a,o,s){t=n?(n=!1,a):e(t,a,o,s)}),t},C8=function(r,e,t){var n=Sn(r)?oAe:sAe,i=arguments.length<3;return n(r,Ks(e),t,i,b1)},lAe=function(r){return typeof r=="string"||!Sn(r)&&so(r)&&ru(r)=="[object String]"},uAe=w8("length"),cAe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),fAe=function(r){return cAe.test(r)},hAe="[\\ud800-\\udfff]",qS="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ZS="\\ud83c[\\udffb-\\udfff]",A8="[^\\ud800-\\udfff]",T8="(?:\\ud83c[\\udde6-\\uddff]){2}",k8="[\\ud800-\\udbff][\\udc00-\\udfff]",zN="(?:"+qS+"|"+ZS+")?",dAe="[\\ufe0e\\ufe0f]?"+zN+("(?:\\u200d(?:"+[A8,T8,k8].join("|")+")[\\ufe0e\\ufe0f]?"+zN+")*"),vAe="(?:"+[A8+qS+"?",qS,T8,k8,hAe].join("|")+")",GN=RegExp(ZS+"(?="+ZS+")|"+vAe+dAe,"g"),pAe=function(r){for(var e=GN.lastIndex=0;GN.test(r);)++e;return e},gAe=function(r){return fAe(r)?pAe(r):uAe(r)},mAe=function(r){if(r==null)return 0;if(Xs(r))return lAe(r)?gAe(r):r.length;var e=pc(r);return e=="[object Map]"||e=="[object Set]"?r.size:wM(r).length},yAe=function(r,e,t){var n=Sn(r),i=n||vc(r)||sp(r);if(e=Ks(e),t==null){var a=r&&r.constructor;t=i?n?new a:[]:Gi(r)&&ap(a)?a8(y1(r)):{}}return(i?yM:CM)(r,function(o,s,l){return e(t,o,s,l)}),t},jN=Ra?Ra.isConcatSpreadable:void 0,bAe=function(r){return Sn(r)||Qf(r)||!!(jN&&r&&r[jN])},LM=function(e,t,n,i,a){var o=-1,s=e.length;for(n||(n=bAe),a||(a=[]);++o<s;){var l=e[o];n(l)?SM(a,l):i||(a[a.length]=l)}return a},wAe=function(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)},UN=Math.max,L8=function(r,e,t){return e=UN(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,a=UN(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=t(o),wAe(r,this,s)}},xAe=Fm?function(r,e){return Fm(r,"toString",{configurable:!0,enumerable:!1,value:EM(e),writable:!0})}:Mc,SAe=Date.now,I8=function(r){var e=0,t=0;return function(){var n=SAe(),i=16-(n-t);if(t=n,i>0){if(++e>=800)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}(xAe),S1=function(r,e){return I8(L8(r,e,Mc),r+"")},O8=function(r,e,t,n){for(var i=r.length,a=t+-1;++a<i;)if(e(r[a],a,r))return a;return-1},_Ae=function(r){return r!=r},EAe=function(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1},MAe=function(r,e,t){return e==e?EAe(r,e,t):O8(r,_Ae,t)},CAe=function(r,e){return!!(r!=null&&r.length)&&MAe(r,e,0)>-1},AAe=function(){},TAe=Af&&1/AM(new Af([,-0]))[1]==1/0?function(r){return new Af(r)}:AAe,kAe=function(r,e,t){var n=-1,i=CAe,a=r.length,o=!0,s=[],l=s;if(a>=200){var u=TAe(r);if(u)return AM(u);o=!1,i=h8,l=new f8}else l=s;e:for(;++n<a;){var c=r[n],f=c;if(c=c!==0?c:0,o&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;s.push(c)}else i(l,f,t)||(l!==s&&l.push(f),s.push(c))}return s},N8=function(r){return so(r)&&Xs(r)},LAe=S1(function(r){return kAe(LM(r,1,N8,!0))}),IAe=function(r,e){return Tf(e,function(t){return r[t]})},zm,$8=function(r){return r==null?[]:IAe(r,nu(r))};try{zm={clone:ICe,constant:EM,each:c8,filter:x8,has:S8,isArray:Sn,isEmpty:aAe,isFunction:ap,isUndefined:_8,keys:nu,map:M8,reduce:C8,size:mAe,transform:yAe,union:LAe,values:$8}}catch{}zm||(zm=window._);var kt=zm,IM=Lr;function Lr(r){this._isDirected=!kt.has(r,"directed")||r.directed,this._isMultigraph=!!kt.has(r,"multigraph")&&r.multigraph,this._isCompound=!!kt.has(r,"compound")&&r.compound,this._label=void 0,this._defaultNodeLabelFn=kt.constant(void 0),this._defaultEdgeLabelFn=kt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function WN(r,e){r[e]?r[e]++:r[e]=1}function HN(r,e){--r[e]||delete r[e]}function md(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}return i+""+a+""+(kt.isUndefined(n)?"\0":n)}function OAe(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function Uw(r,e){return md(r,e.v,e.w,e.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(r){return this._label=r,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(r){return kt.isFunction(r)||(r=kt.constant(r)),this._defaultNodeLabelFn=r,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return kt.keys(this._nodes)},Lr.prototype.sources=function(){var r=this;return kt.filter(this.nodes(),function(e){return kt.isEmpty(r._in[e])})},Lr.prototype.sinks=function(){var r=this;return kt.filter(this.nodes(),function(e){return kt.isEmpty(r._out[e])})},Lr.prototype.setNodes=function(r,e){var t=arguments,n=this;return kt.each(r,function(i){t.length>1?n.setNode(i,e):n.setNode(i)}),this},Lr.prototype.setNode=function(r,e){return kt.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]="\0",this._children[r]={},this._children["\0"][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)},Lr.prototype.node=function(r){return this._nodes[r]},Lr.prototype.hasNode=function(r){return kt.has(this._nodes,r)},Lr.prototype.removeNode=function(r){var e=this;if(kt.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],kt.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),kt.each(kt.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],kt.each(kt.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this},Lr.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(kt.isUndefined(e))e="\0";else{for(var t=e+="";!kt.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this},Lr.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]},Lr.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!=="\0")return e}},Lr.prototype.children=function(r){if(kt.isUndefined(r)&&(r="\0"),this._isCompound){var e=this._children[r];if(e)return kt.keys(e)}else{if(r==="\0")return this.nodes();if(this.hasNode(r))return[]}},Lr.prototype.predecessors=function(r){var e=this._preds[r];if(e)return kt.keys(e)},Lr.prototype.successors=function(r){var e=this._sucs[r];if(e)return kt.keys(e)},Lr.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return kt.union(e,this.successors(r))},Lr.prototype.isLeaf=function(r){return(this.isDirected()?this.successors(r):this.neighbors(r)).length===0},Lr.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;kt.each(this._nodes,function(a,o){r(o)&&e.setNode(o,a)}),kt.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,t.edge(a))});var n={};function i(a){var o=t.parent(a);return o===void 0||e.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&kt.each(e.nodes(),function(a){e.setParent(a,i(a))}),e},Lr.prototype.setDefaultEdgeLabel=function(r){return kt.isFunction(r)||(r=kt.constant(r)),this._defaultEdgeLabelFn=r,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return kt.values(this._edgeObjs)},Lr.prototype.setPath=function(r,e){var t=this,n=arguments;return kt.reduce(r,function(i,a){return n.length>1?t.setEdge(i,a,e):t.setEdge(i,a),a}),this},Lr.prototype.setEdge=function(){var r,e,t,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,e=a.w,t=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,e=""+e,kt.isUndefined(t)||(t=""+t);var o=md(this._isDirected,r,e,t);if(kt.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!kt.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(r,e,t);var s=OAe(this._isDirected,r,e,t);return r=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,WN(this._preds[e],r),WN(this._sucs[r],e),this._in[e][o]=s,this._out[r][o]=s,this._edgeCount++,this},Lr.prototype.edge=function(r,e,t){var n=arguments.length===1?Uw(this._isDirected,arguments[0]):md(this._isDirected,r,e,t);return this._edgeLabels[n]},Lr.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?Uw(this._isDirected,arguments[0]):md(this._isDirected,r,e,t);return kt.has(this._edgeLabels,n)},Lr.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?Uw(this._isDirected,arguments[0]):md(this._isDirected,r,e,t),i=this._edgeObjs[n];return i&&(r=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],HN(this._preds[e],r),HN(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this},Lr.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=kt.values(t);return e?kt.filter(n,function(i){return i.v===e}):n}},Lr.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=kt.values(t);return e?kt.filter(n,function(i){return i.w===e}):n}},Lr.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};var VN={Graph:IM,version:"2.1.8"},NAe={write:function(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:$Ae(r),edges:DAe(r)};return kt.isUndefined(r.graph())||(e.value=kt.clone(r.graph())),e},read:function(r){var e=new IM(r.options).setGraph(r.value);return kt.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),kt.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function $Ae(r){return kt.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),i={v:e};return kt.isUndefined(t)||(i.value=t),kt.isUndefined(n)||(i.parent=n),i})}function DAe(r){return kt.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return kt.isUndefined(e.name)||(n.name=e.name),kt.isUndefined(t)||(n.value=t),n})}var RAe=function(r){var e,t={},n=[];function i(a){kt.has(t,a)||(t[a]=!0,e.push(a),kt.each(r.successors(a),i),kt.each(r.predecessors(a),i))}return kt.each(r.nodes(),function(a){e=[],i(a),e.length&&n.push(e)}),n},D8=ba;function ba(){this._arr=[],this._keyIndices={}}ba.prototype.size=function(){return this._arr.length},ba.prototype.keys=function(){return this._arr.map(function(r){return r.key})},ba.prototype.has=function(r){return kt.has(this._keyIndices,r)},ba.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority},ba.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ba.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!kt.has(t,r)){var n=this._arr,i=n.length;return t[r]=i,n.push({key:r,priority:e}),this._decrease(i),!0}return!1},ba.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},ba.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)},ba.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,i=r;t<e.length&&(i=e[t].priority<e[i].priority?t:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))},ba.prototype._decrease=function(r){for(var e,t=this._arr,n=t[r].priority;r!==0&&!(t[e=r>>1].priority<n);)this._swap(r,e),r=e},ba.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,i=t[r],a=t[e];t[r]=a,t[e]=i,n[a.key]=r,n[i.key]=e};var R8=function(r,e,t,n){return function(i,a,o,s){var l,u,c={},f=new D8,h=function(d){var v=d.v!==l?d.v:d.w,p=c[v],g=o(d),m=u.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+g);m<p.distance&&(p.distance=m,p.predecessor=l,f.decrease(v,m))};for(i.nodes().forEach(function(d){var v=d===a?0:Number.POSITIVE_INFINITY;c[d]={distance:v},f.add(d,v)});f.size()>0&&(l=f.removeMin(),(u=c[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(h);return c}(r,String(e),t||PAe,n||function(i){return r.outEdges(i)})},PAe=kt.constant(1),FAe=function(r,e,t){return kt.transform(r.nodes(),function(n,i){n[i]=R8(r,i,e,t)},{})},P8=function(r){var e=0,t=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:e,index:e++};if(t.push(o),r.successors(o).forEach(function(c){kt.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var l,u=[];do l=t.pop(),n[l].onStack=!1,u.push(l);while(o!==l);i.push(u)}}return r.nodes().forEach(function(o){kt.has(n,o)||a(o)}),i},BAe=function(r){return kt.filter(P8(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})},zAe=function(r,e,t){return function(n,i,a){var o={},s=n.nodes();return s.forEach(function(l){o[l]={},o[l][l]={distance:0},s.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var c=u.v===l?u.w:u.v,f=i(u);o[l][c]={distance:f,predecessor:l}})}),s.forEach(function(l){var u=o[l];s.forEach(function(c){var f=o[c];s.forEach(function(h){var d=f[l],v=u[h],p=f[h],g=d.distance+v.distance;g<p.distance&&(p.distance=g,p.predecessor=v.predecessor)})})}),o}(r,e||GAe,t||function(n){return r.outEdges(n)})},GAe=kt.constant(1),Ww=F8;function F8(r){var e={},t={},n=[];if(kt.each(r.sinks(),function i(a){if(kt.has(t,a))throw new Gm;kt.has(e,a)||(t[a]=!0,e[a]=!0,kt.each(r.predecessors(a),i),delete t[a],n.push(a))}),kt.size(e)!==r.nodeCount())throw new Gm;return n}function Gm(){}F8.CycleException=Gm,Gm.prototype=new Error;var YN=function(r,e,t){kt.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return kt.each(e,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);B8(r,o,t==="post",a,n,i)}),i};function B8(r,e,t,n,i,a){kt.has(n,e)||(n[e]=!0,t||a.push(e),kt.each(i(e),function(o){B8(r,o,t,n,i,a)}),t&&a.push(e))}var jm,jAe={Graph:VN.Graph,json:NAe,alg:{components:RAe,dijkstra:R8,dijkstraAll:FAe,findCycles:BAe,floydWarshall:zAe,isAcyclic:function(r){try{Ww(r)}catch(e){if(e instanceof Ww.CycleException)return!1;throw e}return!0},postorder:function(r,e){return YN(r,e,"post")},preorder:function(r,e){return YN(r,e,"pre")},prim:function(r,e){var t,n=new IM,i={},a=new D8;function o(l){var u=l.v===t?l.w:l.v,c=a.priority(u);if(c!==void 0){var f=e(l);f<c&&(i[u]=t,a.decrease(u,f))}}if(r.nodeCount()===0)return n;kt.each(r.nodes(),function(l){a.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),a.decrease(r.nodes()[0],0);for(var s=!1;a.size()>0;){if(t=a.removeMin(),kt.has(i,t))n.setEdge(t,i[t]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(t).forEach(o)}return n},tarjan:P8,topsort:Ww},version:VN.version};try{jm=jAe}catch{}jm||(jm=window.graphlib);var po=jm,UAe=function(r){return s8(r,5)},Tv=function(r,e,t){if(!Gi(t))return!1;var n=typeof e;return!!(n=="number"?Xs(t)&&p1(e,t.length):n=="string"&&e in t)&&dh(t[e],r)},z8=Object.prototype,WAe=z8.hasOwnProperty,HAe=S1(function(r,e){r=Object(r);var t=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Tv(e[0],e[1],i)&&(n=1);++t<n;)for(var a=e[t],o=Ec(a),s=-1,l=o.length;++s<l;){var u=o[s],c=r[u];(c===void 0||dh(c,z8[u])&&!WAe.call(r,u))&&(r[u]=a[u])}return r}),VAe=function(r){return function(e,t,n){var i=Object(e);if(!Xs(e)){var a=Ks(t);e=nu(e),t=function(s){return a(i[s],s,i)}}var o=r(e,t,n);return o>-1?i[a?e[o]:o]:void 0}},YAe=/^\s+|\s+$/g,XAe=/^[-+]0x[0-9a-f]+$/i,KAe=/^0b[01]+$/i,qAe=/^0o[0-7]+$/i,ZAe=parseInt,QAe=function(r){if(typeof r=="number")return r;if(gc(r))return NaN;if(Gi(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Gi(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(YAe,"");var t=KAe.test(r);return t||qAe.test(r)?ZAe(r.slice(2),t?2:8):XAe.test(r)?NaN:+r},N0=function(r){return r?(r=QAe(r))===1/0||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:r===0?r:0},JAe=function(r){var e=N0(r),t=e%1;return e==e?t?e-t:e:0},eTe=Math.max,tTe=VAe(function(r,e,t){var n=r==null?0:r.length;if(!n)return-1;var i=t==null?0:JAe(t);return i<0&&(i=eTe(n+i,0)),O8(r,Ks(e),i)}),G8=function(r){return r!=null&&r.length?LM(r):[]},rTe=function(r,e){return r==null?r:MM(r,l8(e),Ec)},nTe=function(r){var e=r==null?0:r.length;return e?r[e-1]:void 0},iTe=function(r,e){var t={};return e=Ks(e),CM(r,function(n,i,a){d1(t,i,e(n,i,a))}),t},OM=function(r,e,t){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=e(a);if(o!=null&&(s===void 0?o==o&&!gc(o):t(o,s)))var s=o,l=a}return l},aTe=function(r,e){return r>e},oTe=function(r){return r&&r.length?OM(r,Mc,aTe):void 0},QS=function(r,e,t){(t!==void 0&&!dh(r[e],t)||t===void 0&&!(e in r))&&d1(r,e,t)},sTe=Function.prototype,lTe=Object.prototype,j8=sTe.toString,uTe=lTe.hasOwnProperty,cTe=j8.call(Object),fTe=function(r){if(!so(r)||ru(r)!="[object Object]")return!1;var e=y1(r);if(e===null)return!0;var t=uTe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&j8.call(t)==cTe},XN=function(r,e){if((e!=="constructor"||typeof r[e]!="function")&&e!="__proto__")return r[e]},hTe=function(r){return op(r,Ec(r))},dTe=function(r,e,t,n,i,a,o){var s=XN(r,t),l=XN(e,t),u=o.get(l);if(u)QS(r,t,u);else{var c=void 0,f=c===void 0;if(f){var h=Sn(l),d=!h&&vc(l),v=!h&&!d&&sp(l);c=l,h||d||v?Sn(s)?c=s:N8(s)?c=Jz(s):d?(f=!1,c=Qz(l,!0)):v?(f=!1,c=i8(l,!0)):c=[]:fTe(l)||Qf(l)?(c=s,Qf(s)?c=hTe(s):Gi(s)&&!ap(s)||(c=o8(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),QS(r,t,c)}},vTe=function r(e,t,n,i,a){e!==t&&MM(t,function(o,s){if(a||(a=new Cf),Gi(o))dTe(e,t,s,n,r,i,a);else{var l=void 0;l===void 0&&(l=o),QS(e,s,l)}},Ec)},pTe=function(r){return S1(function(e,t){var n=-1,i=t.length,a=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&Tv(t[0],t[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=t[n];s&&r(e,s,n,a)}return e})}(function(r,e,t){vTe(r,e,t)}),U8=function(r,e){return r<e},gTe=function(r){return r&&r.length?OM(r,Mc,U8):void 0},mTe=function(r,e){return r&&r.length?OM(r,Ks(e),U8):void 0},yTe=function(){return vo.Date.now()},bTe=function(r,e,t,n){if(!Gi(r))return r;for(var i=-1,a=(e=w1(e,r)).length,o=a-1,s=r;s!=null&&++i<a;){var l=lp(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var c=s[l];(u=void 0)==void 0&&(u=Gi(c)?c:p1(e[i+1])?[]:{})}v1(s,l,u),s=s[l]}return r},wTe=function(r,e,t){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=x1(r,o);t(s,o)&&bTe(a,w1(o,r),s)}return a},xTe=function(r,e){return wTe(r,e,function(t,n){return b8(r,n)})},STe=function(r){return I8(L8(r,void 0,G8),r+"")}(function(r,e){return r==null?{}:xTe(r,e)}),_Te=Math.ceil,ETe=Math.max,MTe=function(r,e,t,n){for(var i=-1,a=ETe(_Te((e-r)/(t||1)),0),o=Array(a);a--;)o[++i]=r,r+=t;return o},CTe=function(r){return function(e,t,n){return n&&typeof n!="number"&&Tv(e,t,n)&&(t=n=void 0),e=N0(e),t===void 0?(t=e,e=0):t=N0(t),n=n===void 0?e<t?1:-1:N0(n),MTe(e,t,n)}}(),ATe=function(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r},TTe=function(r,e){if(r!==e){var t=r!==void 0,n=r===null,i=r==r,a=gc(r),o=e!==void 0,s=e===null,l=e==e,u=gc(e);if(!s&&!u&&!a&&r>e||a&&o&&l&&!s&&!u||n&&o&&l||!t&&l||!i)return 1;if(!n&&!a&&!u&&r<e||u&&t&&i&&!n&&!a||s&&t&&i||!o&&i||!l)return-1}return 0},kTe=function(r,e,t){for(var n=-1,i=r.criteria,a=e.criteria,o=i.length,s=t.length;++n<o;){var l=TTe(i[n],a[n]);if(l)return n>=s?l:l*(t[n]=="desc"?-1:1)}return r.index-e.index},LTe=function(r,e,t){e=e.length?Tf(e,function(a){return Sn(a)?function(o){return x1(o,a.length===1?a[0]:a)}:a}):[Mc];var n=-1;e=Tf(e,g1(Ks));var i=E8(r,function(a,o,s){return{criteria:Tf(e,function(l){return l(a)}),index:++n,value:a}});return ATe(i,function(a,o){return kTe(a,o,t)})},ITe=S1(function(r,e){if(r==null)return[];var t=e.length;return t>1&&Tv(r,e[0],e[1])?e=[]:t>2&&Tv(e[0],e[1],e[2])&&(e=[e[0]]),LTe(r,LM(e),[])}),OTe=0,NTe=function(r){var e=++OTe;return m8(r)+e},$Te=function(r,e,t){for(var n=-1,i=r.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;t(o,r[n],s)}return o},Um,DTe=function(r,e){return $Te(r||[],e||[],v1)};try{Um={cloneDeep:UAe,constant:EM,defaults:HAe,each:c8,filter:x8,find:tTe,flatten:G8,forEach:u8,forIn:rTe,has:S8,isUndefined:_8,last:nTe,map:M8,mapValues:iTe,max:oTe,merge:pTe,min:gTe,minBy:mTe,now:yTe,pick:STe,range:CTe,reduce:C8,sortBy:ITe,uniqueId:NTe,values:$8,zipObject:DTe}}catch{}Um||(Um=window._);var ce=Um,RTe=$0;function $0(){var r={};r._next=r._prev=r,this._sentinel=r}function KN(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function PTe(r,e){if(r!=="_next"&&r!=="_prev")return e}$0.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return KN(e),e},$0.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&KN(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e},$0.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,PTe)),t=t._prev;return"["+r.join(", ")+"]"};var FTe=po.Graph,BTe=function(r,e){if(r.nodeCount()<=1)return[];var t=function(i,a){var o=new FTe,s=0,l=0;ce.forEach(i.nodes(),function(f){o.setNode(f,{v:f,in:0,out:0})}),ce.forEach(i.edges(),function(f){var h=o.edge(f.v,f.w)||0,d=a(f),v=h+d;o.setEdge(f.v,f.w,v),l=Math.max(l,o.node(f.v).out+=d),s=Math.max(s,o.node(f.w).in+=d)});var u=ce.range(l+s+3).map(function(){return new RTe}),c=s+1;return ce.forEach(o.nodes(),function(f){JS(u,c,o.node(f))}),{graph:o,buckets:u,zeroIdx:c}}(r,e||zTe),n=function(i,a,o){for(var s,l=[],u=a[a.length-1],c=a[0];i.nodeCount();){for(;s=c.dequeue();)Hw(i,a,o,s);for(;s=u.dequeue();)Hw(i,a,o,s);if(i.nodeCount()){for(var f=a.length-2;f>0;--f)if(s=a[f].dequeue()){l=l.concat(Hw(i,a,o,s,!0));break}}}return l}(t.graph,t.buckets,t.zeroIdx);return ce.flatten(ce.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)},zTe=ce.constant(1);function Hw(r,e,t,n,i){var a=i?[]:void 0;return ce.forEach(r.inEdges(n.v),function(o){var s=r.edge(o),l=r.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,JS(e,t,l)}),ce.forEach(r.outEdges(n.v),function(o){var s=r.edge(o),l=o.w,u=r.node(l);u.in-=s,JS(e,t,u)}),r.removeNode(n.v),a}function JS(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var qN={run:function(r){var e=r.graph().acyclicer==="greedy"?BTe(r,function(t){return function(n){return t.edge(n).weight}}(r)):function(t){var n=[],i={},a={};function o(s){ce.has(a,s)||(a[s]=!0,i[s]=!0,ce.forEach(t.outEdges(s),function(l){ce.has(i,l.w)?n.push(l):o(l.w)}),delete i[s])}return ce.forEach(t.nodes(),o),n}(r);ce.forEach(e,function(t){var n=r.edge(t);r.removeEdge(t),n.forwardName=t.name,n.reversed=!0,r.setEdge(t.w,t.v,n,ce.uniqueId("rev"))})},undo:function(r){ce.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}},ZN=po.Graph,ii={addDummyNode:QN,simplify:function(r){var e=new ZN().setGraph(r.graph());return ce.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),ce.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e},asNonCompoundGraph:function(r){var e=new ZN({multigraph:r.isMultigraph()}).setGraph(r.graph());return ce.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),ce.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e},successorWeights:function(r){var e=ce.map(r.nodes(),function(t){var n={};return ce.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return ce.zipObject(r.nodes(),e)},predecessorWeights:function(r){var e=ce.map(r.nodes(),function(t){var n={};return ce.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return ce.zipObject(r.nodes(),e)},intersectRect:function(r,e){var t,n,i=r.x,a=r.y,o=e.x-i,s=e.y-a,l=r.width/2,u=r.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(o)*u?(s<0&&(u=-u),t=u*o/s,n=u):(o<0&&(l=-l),t=l,n=l*s/o),{x:i+t,y:a+n}},buildLayerMatrix:function(r){var e=ce.map(ce.range(JN(r)+1),function(){return[]});return ce.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;ce.isUndefined(i)||(e[i][n.order]=t)}),e},normalizeRanks:function(r){var e=ce.min(ce.map(r.nodes(),function(t){return r.node(t).rank}));ce.forEach(r.nodes(),function(t){var n=r.node(t);ce.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(r){var e=ce.min(ce.map(r.nodes(),function(a){return r.node(a).rank})),t=[];ce.forEach(r.nodes(),function(a){var o=r.node(a).rank-e;t[o]||(t[o]=[]),t[o].push(a)});var n=0,i=r.graph().nodeRankFactor;ce.forEach(t,function(a,o){ce.isUndefined(a)&&o%i!=0?--n:n&&ce.forEach(a,function(s){r.node(s).rank+=n})})},addBorderNode:function(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),QN(r,"border",i,e)},maxRank:JN,partition:function(r,e){var t={lhs:[],rhs:[]};return ce.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t},time:function(r,e){var t=ce.now();try{return e()}finally{console.log(r+" time: "+(ce.now()-t)+"ms")}},notime:function(r,e){return e()}};function QN(r,e,t,n){var i;do i=ce.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function JN(r){return ce.max(ce.map(r.nodes(),function(e){var t=r.node(e).rank;if(!ce.isUndefined(t))return t}))}var e$={run:function(r){r.graph().dummyChains=[],ce.forEach(r.edges(),function(e){(function(t,n){var i,a,o,s=n.v,l=t.node(s).rank,u=n.w,c=t.node(u).rank,f=n.name,h=t.edge(n),d=h.labelRank;if(c!==l+1){for(t.removeEdge(n),o=0,++l;l<c;++o,++l)h.points=[],a={width:0,height:0,edgeLabel:h,edgeObj:n,rank:l},i=ii.addDummyNode(t,"edge",a,"_d"),l===d&&(a.width=h.width,a.height=h.height,a.dummy="edge-label",a.labelpos=h.labelpos),t.setEdge(s,i,{weight:h.weight},f),o===0&&t.graph().dummyChains.push(i),s=i;t.setEdge(s,u,{weight:h.weight},f)}})(r,e)})},undo:function(r){ce.forEach(r.graph().dummyChains,function(e){var t,n=r.node(e),i=n.edgeLabel;for(r.setEdge(n.edgeObj,i);n.dummy;)t=r.successors(e)[0],r.removeNode(e),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=t,n=r.node(e)})}},W8=function(r){var e={};ce.forEach(r.sources(),function t(n){var i=r.node(n);if(ce.has(e,n))return i.rank;e[n]=!0;var a=ce.min(ce.map(r.outEdges(n),function(o){return t(o.w)-r.edge(o).minlen}));return a!==Number.POSITIVE_INFINITY&&a!=null||(a=0),i.rank=a})},H8=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen},GTe=po.Graph,Wm=H8,V8=function(r){var e,t,n=new GTe({directed:!1}),i=r.nodes()[0],a=r.nodeCount();for(n.setNode(i,{});jTe(n,r)<a;)e=UTe(n,r),t=n.hasNode(e.v)?Wm(r,e):-Wm(r,e),WTe(n,r,t);return n};function jTe(r,e){return ce.forEach(r.nodes(),function t(n){ce.forEach(e.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;r.hasNode(o)||Wm(e,i)||(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})}),r.nodeCount()}function UTe(r,e){return ce.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return Wm(e,t)})}function WTe(r,e,t){ce.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var HTe=H8,VTe=W8,YTe=po.alg.preorder,XTe=po.alg.postorder,KTe=ii.simplify,qTe=Du;function Du(r){r=KTe(r),VTe(r);var e,t=V8(r);for($M(t),NM(t,r);e=K8(t);)Z8(t,r,e,q8(t,r,e))}function NM(r,e){var t=XTe(r,r.nodes());t=t.slice(0,t.length-1),ce.forEach(t,function(n){(function(i,a,o){var s=i.node(o).parent;i.edge(o,s).cutvalue=Y8(i,a,o)})(r,e,n)})}function Y8(r,e,t){var n=r.node(t).parent,i=!0,a=e.edge(t,n),o=0;return a||(i=!1,a=e.edge(n,t)),o=a.weight,ce.forEach(e.nodeEdges(t),function(s){var l,u,c=s.v===t,f=c?s.w:s.v;if(f!==n){var h=c===i,d=e.edge(s).weight;if(o+=h?d:-d,l=t,u=f,r.hasEdge(l,u)){var v=r.edge(t,f).cutvalue;o+=h?-v:v}}}),o}function $M(r,e){arguments.length<2&&(e=r.nodes()[0]),X8(r,{},1,e)}function X8(r,e,t,n,i){var a=t,o=r.node(n);return e[n]=!0,ce.forEach(r.neighbors(n),function(s){ce.has(e,s)||(t=X8(r,e,t,s,n))}),o.low=a,o.lim=t++,i?o.parent=i:delete o.parent,t}function K8(r){return ce.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function q8(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var a=r.node(n),o=r.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=ce.filter(e.edges(),function(c){return l===t$(r,r.node(c.v),s)&&l!==t$(r,r.node(c.w),s)});return ce.minBy(u,function(c){return HTe(e,c)})}function Z8(r,e,t,n){var i=t.v,a=t.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),$M(r),NM(r,e),function(o,s){var l=ce.find(o.nodes(),function(c){return!s.node(c).parent}),u=YTe(o,l);u=u.slice(1),ce.forEach(u,function(c){var f=o.node(c).parent,h=s.edge(c,f),d=!1;h||(h=s.edge(f,c),d=!0),s.node(c).rank=s.node(f).rank+(d?h.minlen:-h.minlen)})}(r,e)}function t$(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}Du.initLowLimValues=$M,Du.initCutValues=NM,Du.calcCutValue=Y8,Du.leaveEdge=K8,Du.enterEdge=q8,Du.exchangeEdges=Z8;var Q8=W8,ZTe=function(r){switch(r.graph().ranker){case"network-simplex":r$(r);break;case"tight-tree":(function(e){Q8(e),V8(e)})(r);break;case"longest-path":QTe(r);break;default:r$(r)}},QTe=Q8;function r$(r){qTe(r)}var JTe=function(r){var e=function(t){var n={},i=0;function a(o){var s=i;ce.forEach(t.children(o),a),n[o]={low:s,lim:i++}}return ce.forEach(t.children(),a),n}(r);ce.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,a=function(f,h,d,v){var p,g,m=[],y=[],w=Math.min(h[d].low,h[v].low),b=Math.max(h[d].lim,h[v].lim);p=d;do p=f.parent(p),m.push(p);while(p&&(h[p].low>w||b>h[p].lim));for(g=p,p=v;(p=f.parent(p))!==g;)y.push(p);return{path:m.concat(y.reverse()),lca:g}}(r,e,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],c=!0;t!==i.w;){if(n=r.node(t),c){for(;(u=o[l])!==s&&r.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&r.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}r.setParent(t,u),t=r.successors(t)[0]}})},n$={run:function(r){var e=ii.addDummyNode(r,"root",{},"_root"),t=function(o){var s={};function l(u,c){var f=o.children(u);f&&f.length&&ce.forEach(f,function(h){l(h,c+1)}),s[u]=c}return ce.forEach(o.children(),function(u){l(u,1)}),s}(r),n=ce.max(ce.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,ce.forEach(r.edges(),function(o){r.edge(o).minlen*=i});var a=function(o){return ce.reduce(o.edges(),function(s,l){return s+o.edge(l).weight},0)}(r)+1;ce.forEach(r.children(),function(o){J8(r,e,i,a,n,t,o)}),r.graph().nodeRankFactor=i},cleanup:function(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,ce.forEach(r.edges(),function(t){r.edge(t).nestingEdge&&r.removeEdge(t)})}};function J8(r,e,t,n,i,a,o){var s=r.children(o);if(s.length){var l=ii.addBorderNode(r,"_bt"),u=ii.addBorderNode(r,"_bb"),c=r.node(o);r.setParent(l,o),c.borderTop=l,r.setParent(u,o),c.borderBottom=u,ce.forEach(s,function(f){J8(r,e,t,n,i,a,f);var h=r.node(f),d=h.borderTop?h.borderTop:f,v=h.borderBottom?h.borderBottom:f,p=h.borderTop?n:2*n,g=d!==v?1:i-a[o]+1;r.setEdge(l,d,{weight:p,minlen:g,nestingEdge:!0}),r.setEdge(v,u,{weight:p,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,l,{weight:0,minlen:i+a[o]})}else o!==e&&r.setEdge(e,o,{weight:0,minlen:t})}var eke=function(r){ce.forEach(r.children(),function e(t){var n=r.children(t),i=r.node(t);if(n.length&&ce.forEach(n,e),ce.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)i$(r,"borderLeft","_bl",t,i,a),i$(r,"borderRight","_br",t,i,a)}})};function i$(r,e,t,n,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],l=ii.addDummyNode(r,"border",o,t);i[e][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})}var a$={adjust:function(r){var e=r.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||o$(r)},undo:function(r){var e=r.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(t){ce.forEach(t.nodes(),function(n){Vw(t.node(n))}),ce.forEach(t.edges(),function(n){var i=t.edge(n);ce.forEach(i.points,Vw),ce.has(i,"y")&&Vw(i)})}(r),e!=="lr"&&e!=="rl"||(function(t){ce.forEach(t.nodes(),function(n){Yw(t.node(n))}),ce.forEach(t.edges(),function(n){var i=t.edge(n);ce.forEach(i.points,Yw),ce.has(i,"x")&&Yw(i)})}(r),o$(r))}};function o$(r){ce.forEach(r.nodes(),function(e){s$(r.node(e))}),ce.forEach(r.edges(),function(e){s$(r.edge(e))})}function s$(r){var e=r.width;r.width=r.height,r.height=e}function Vw(r){r.y=-r.y}function Yw(r){var e=r.x;r.x=r.y,r.y=e}var tke=function(r){var e={},t=ce.filter(r.nodes(),function(s){return!r.children(s).length}),n=ce.max(ce.map(t,function(s){return r.node(s).rank})),i=ce.map(ce.range(n+1),function(){return[]});function a(s){if(!ce.has(e,s)){e[s]=!0;var l=r.node(s);i[l.rank].push(s),ce.forEach(r.successors(s),a)}}var o=ce.sortBy(t,function(s){return r.node(s).rank});return ce.forEach(o,a),i},rke=function(r,e){for(var t=0,n=1;n<e.length;++n)t+=nke(r,e[n-1],e[n]);return t};function nke(r,e,t){for(var n=ce.zipObject(t,ce.map(t,function(u,c){return c})),i=ce.flatten(ce.map(e,function(u){return ce.sortBy(ce.map(r.outEdges(u),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var o=2*a-1;a-=1;var s=ce.map(new Array(o),function(){return 0}),l=0;return ce.forEach(i.forEach(function(u){var c=u.pos+a;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),s[c=c-1>>1]+=u.weight;l+=u.weight*f})),l}var ike=function(r,e){return ce.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=ce.reduce(n,function(a,o){var s=r.edge(o),l=r.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}})},ake=function(r,e){var t={};return ce.forEach(r,function(n,i){var a=t[n.v]={indegree:0,in:[],out:[],vs:[n.v],i};ce.isUndefined(n.barycenter)||(a.barycenter=n.barycenter,a.weight=n.weight)}),ce.forEach(e.edges(),function(n){var i=t[n.v],a=t[n.w];ce.isUndefined(i)||ce.isUndefined(a)||(a.indegree++,i.out.push(t[n.w]))}),function(n){var i=[];function a(l){return function(u){u.merged||(ce.isUndefined(u.barycenter)||ce.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&function(c,f){var h=0,d=0;c.weight&&(h+=c.barycenter*c.weight,d+=c.weight),f.weight&&(h+=f.barycenter*f.weight,d+=f.weight),c.vs=f.vs.concat(c.vs),c.barycenter=h/d,c.weight=d,c.i=Math.min(f.i,c.i),f.merged=!0}(l,u)}}function o(l){return function(u){u.in.push(l),--u.indegree==0&&n.push(u)}}for(;n.length;){var s=n.pop();i.push(s),ce.forEach(s.in.reverse(),a(s)),ce.forEach(s.out,o(s))}return ce.map(ce.filter(i,function(l){return!l.merged}),function(l){return ce.pick(l,["vs","i","barycenter","weight"])})}(ce.filter(t,function(n){return!n.indegree}))},oke=function(r,e){var t=ii.partition(r,function(f){return ce.has(f,"barycenter")}),n=t.lhs,i=ce.sortBy(t.rhs,function(f){return-f.i}),a=[],o=0,s=0,l=0;n.sort((u=!!e,function(f,h){return f.barycenter<h.barycenter?-1:f.barycenter>h.barycenter?1:u?h.i-f.i:f.i-h.i})),l=l$(a,i,l),ce.forEach(n,function(f){l+=f.vs.length,a.push(f.vs),o+=f.barycenter*f.weight,s+=f.weight,l=l$(a,i,l)});var u,c={vs:ce.flatten(a,!0)};return s&&(c.barycenter=o/s,c.weight=s),c};function l$(r,e,t){for(var n;e.length&&(n=ce.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}var ske=function r(e,t,n,i){var a=e.children(t),o=e.node(t),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=ce.filter(a,function(p){return p!==s&&p!==l}));var c=ike(e,a);ce.forEach(c,function(p){if(e.children(p.v).length){var g=r(e,p.v,n,i);u[p.v]=g,ce.has(g,"barycenter")&&(m=p,y=g,ce.isUndefined(m.barycenter)?(m.barycenter=y.barycenter,m.weight=y.weight):(m.barycenter=(m.barycenter*m.weight+y.barycenter*y.weight)/(m.weight+y.weight),m.weight+=y.weight))}var m,y});var f=ake(c,n);(function(p,g){ce.forEach(p,function(m){m.vs=ce.flatten(m.vs.map(function(y){return g[y]?g[y].vs:y}),!0)})})(f,u);var h=oke(f,i);if(s&&(h.vs=ce.flatten([s,h.vs,l],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),v=e.node(e.predecessors(l)[0]);ce.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+v.order)/(h.weight+2),h.weight+=2}return h},lke=po.Graph,uke=function(r,e,t){var n=function(a){for(var o;a.hasNode(o=ce.uniqueId("_root")););return o}(r),i=new lke({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return ce.forEach(r.nodes(),function(a){var o=r.node(a),s=r.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),ce.forEach(r[t](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=ce.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:r.edge(l).weight+f})}),ce.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i},cke=function(r,e,t){var n,i={};ce.forEach(t,function(a){for(var o,s,l=r.parent(a);l;){if((o=r.parent(l))?(s=i[o],i[o]=l):(s=n,n=l),s&&s!==l)return void e.setEdge(s,l);l=o}})},fke=po.Graph,hke=function(r){var e=ii.maxRank(r),t=u$(r,ce.range(1,e+1),"inEdges"),n=u$(r,ce.range(e-1,-1,-1),"outEdges"),i=tke(r);c$(r,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){dke(s%2?t:n,s%4>=2),i=ii.buildLayerMatrix(r);var u=rke(r,i);u<o&&(l=0,a=ce.cloneDeep(i),o=u)}c$(r,a)};function u$(r,e,t){return ce.map(e,function(n){return uke(r,n,t)})}function dke(r,e){var t=new fke;ce.forEach(r,function(n){var i=n.graph().root,a=ske(n,i,t,e);ce.forEach(a.vs,function(o,s){n.node(o).order=s}),cke(n,t,a.vs)})}function c$(r,e){ce.forEach(e,function(t){ce.forEach(t,function(n,i){r.node(n).order=i})})}var vke=po.Graph,pke=function(r){var e,t=ii.buildLayerMatrix(r),n=ce.merge(gke(r,t),mke(r,t)),i={};ce.forEach(["u","d"],function(o){e=o==="u"?t:ce.values(t).reverse(),ce.forEach(["l","r"],function(s){s==="r"&&(e=ce.map(e,function(f){return ce.values(f).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=bke(r,e,n,l),c=wke(r,e,u.root,u.align,s==="r");s==="r"&&(c=ce.mapValues(c,function(f){return-f})),i[o+s]=c})});var a=xke(r,i);return Ske(i,a),_ke(i,r.graph().align)};function gke(r,e){var t={};return ce.reduce(e,function(n,i){var a=0,o=0,s=n.length,l=ce.last(i);return ce.forEach(i,function(u,c){var f=function(d,v){if(d.node(v).dummy)return ce.find(d.predecessors(v),function(p){return d.node(p).dummy})}(r,u),h=f?r.node(f).order:s;(f||u===l)&&(ce.forEach(i.slice(o,c+1),function(d){ce.forEach(r.predecessors(d),function(v){var p=r.node(v),g=p.order;!(g<a||h<g)||p.dummy&&r.node(d).dummy||eG(t,v,d)})}),o=c+1,a=h)}),i}),t}function mke(r,e){var t={};function n(i,a,o,s,l){var u;ce.forEach(ce.range(a,o),function(c){u=i[c],r.node(u).dummy&&ce.forEach(r.predecessors(u),function(f){var h=r.node(f);h.dummy&&(h.order<s||h.order>l)&&eG(t,f,u)})})}return ce.reduce(e,function(i,a){var o,s=-1,l=0;return ce.forEach(a,function(u,c){if(r.node(u).dummy==="border"){var f=r.predecessors(u);f.length&&(o=r.node(f[0]).order,n(a,l,c,s,o),l=c,s=o)}n(a,l,a.length,o,i.length)}),a}),t}function eG(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function yke(r,e,t){if(e>t){var n=e;e=t,t=n}return ce.has(r[e],t)}function bke(r,e,t,n){var i={},a={},o={};return ce.forEach(e,function(s){ce.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),ce.forEach(e,function(s){var l=-1;ce.forEach(s,function(u){var c=n(u);if(c.length)for(var f=((c=ce.sortBy(c,function(p){return o[p]})).length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var v=c[h];a[u]===u&&l<o[v]&&!yke(t,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=o[v])}})}),{root:i,align:a}}function wke(r,e,t,n,i){var a={},o=function(u,c,f,h){var d=new vke,v=u.graph(),p=function(g,m,y){return function(w,b,x){var S,_=w.node(b),M=w.node(x),A=0;if(A+=_.width/2,ce.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":S=-_.width/2;break;case"r":S=_.width/2}if(S&&(A+=y?S:-S),S=0,A+=(_.dummy?m:g)/2,A+=(M.dummy?m:g)/2,A+=M.width/2,ce.has(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":S=M.width/2;break;case"r":S=-M.width/2}return S&&(A+=y?S:-S),S=0,A}}(v.nodesep,v.edgesep,h);return ce.forEach(c,function(g){var m;ce.forEach(g,function(y){var w=f[y];if(d.setNode(w),m){var b=f[m],x=d.edge(b,w);d.setEdge(b,w,Math.max(p(u,y,m),x||0))}m=y})}),d}(r,e,t,i),s=i?"borderLeft":"borderRight";function l(u,c){for(var f=o.nodes(),h=f.pop(),d={};h;)d[h]?u(h):(d[h]=!0,f.push(h),f=f.concat(c(h))),h=f.pop()}return l(function(u){a[u]=o.inEdges(u).reduce(function(c,f){return Math.max(c,a[f.v]+o.edge(f))},0)},o.predecessors.bind(o)),l(function(u){var c=o.outEdges(u).reduce(function(h,d){return Math.min(h,a[d.w]-o.edge(d))},Number.POSITIVE_INFINITY),f=r.node(u);c!==Number.POSITIVE_INFINITY&&f.borderType!==s&&(a[u]=Math.max(a[u],c))},o.successors.bind(o)),ce.forEach(n,function(u){a[u]=a[t[u]]}),a}function xke(r,e){return ce.minBy(ce.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return ce.forIn(t,function(a,o){var s=function(l,u){return l.node(u).width}(r,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function Ske(r,e){var t=ce.values(e),n=ce.min(t),i=ce.max(t);ce.forEach(["u","d"],function(a){ce.forEach(["l","r"],function(o){var s,l=a+o,u=r[l];if(u!==e){var c=ce.values(u);(s=o==="l"?n-ce.min(c):i-ce.max(c))&&(r[l]=ce.mapValues(u,function(f){return f+s}))}})})}function _ke(r,e){return ce.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=ce.sortBy(ce.map(r,n));return(i[1]+i[2])/2})}var Eke=pke,Mke=function(r){(function(e){var t=ii.buildLayerMatrix(e),n=e.graph().ranksep,i=0;ce.forEach(t,function(a){var o=ce.max(ce.map(a,function(s){return e.node(s).height}));ce.forEach(a,function(s){e.node(s).y=i+o/2}),i+=o+n})})(r=ii.asNonCompoundGraph(r)),ce.forEach(Eke(r),function(e,t){r.node(t).x=e})},Cke=ii.normalizeRanks,Ake=ii.removeEmptyRanks,ul=ii,Tke=po.Graph,kke=function(r,e){var t=e&&e.debugTiming?ul.time:ul.notime;t("layout",function(){var n=t("  buildLayoutGraph",function(){return function(i){var a=new Tke({multigraph:!0,compound:!0}),o=Kw(i.graph());return a.setGraph(ce.merge({},Ike,Xw(o,Lke),ce.pick(o,Oke))),ce.forEach(i.nodes(),function(s){var l=Kw(i.node(s));a.setNode(s,ce.defaults(Xw(l,Nke),$ke)),a.setParent(s,i.parent(s))}),ce.forEach(i.edges(),function(s){var l=Kw(i.edge(s));a.setEdge(s,ce.merge({},Rke,Xw(l,Dke),ce.pick(l,Pke)))}),a}(r)});t("  runLayout",function(){(function(i,a){a("    makeSpaceForEdgeLabels",function(){(function(o){var s=o.graph();s.ranksep/=2,ce.forEach(o.edges(),function(l){var u=o.edge(l);u.minlen*=2,u.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?u.width+=u.labeloffset:u.height+=u.labeloffset)})})(i)}),a("    removeSelfEdges",function(){(function(o){ce.forEach(o.edges(),function(s){if(s.v===s.w){var l=o.node(s.v);l.selfEdges||(l.selfEdges=[]),l.selfEdges.push({e:s,label:o.edge(s)}),o.removeEdge(s)}})})(i)}),a("    acyclic",function(){qN.run(i)}),a("    nestingGraph.run",function(){n$.run(i)}),a("    rank",function(){ZTe(ul.asNonCompoundGraph(i))}),a("    injectEdgeLabelProxies",function(){(function(o){ce.forEach(o.edges(),function(s){var l=o.edge(s);if(l.width&&l.height){var u=o.node(s.v),c={rank:(o.node(s.w).rank-u.rank)/2+u.rank,e:s};ul.addDummyNode(o,"edge-proxy",c,"_ep")}})})(i)}),a("    removeEmptyRanks",function(){Ake(i)}),a("    nestingGraph.cleanup",function(){n$.cleanup(i)}),a("    normalizeRanks",function(){Cke(i)}),a("    assignRankMinMax",function(){(function(o){var s=0;ce.forEach(o.nodes(),function(l){var u=o.node(l);u.borderTop&&(u.minRank=o.node(u.borderTop).rank,u.maxRank=o.node(u.borderBottom).rank,s=ce.max(s,u.maxRank))}),o.graph().maxRank=s})(i)}),a("    removeEdgeLabelProxies",function(){(function(o){ce.forEach(o.nodes(),function(s){var l=o.node(s);l.dummy==="edge-proxy"&&(o.edge(l.e).labelRank=l.rank,o.removeNode(s))})})(i)}),a("    normalize.run",function(){e$.run(i)}),a("    parentDummyChains",function(){JTe(i)}),a("    addBorderSegments",function(){eke(i)}),a("    order",function(){hke(i)}),a("    insertSelfEdges",function(){(function(o){var s=ul.buildLayerMatrix(o);ce.forEach(s,function(l){var u=0;ce.forEach(l,function(c,f){var h=o.node(c);h.order=f+u,ce.forEach(h.selfEdges,function(d){ul.addDummyNode(o,"selfedge",{width:d.label.width,height:d.label.height,rank:h.rank,order:f+ ++u,e:d.e,label:d.label},"_se")}),delete h.selfEdges})})})(i)}),a("    adjustCoordinateSystem",function(){a$.adjust(i)}),a("    position",function(){Mke(i)}),a("    positionSelfEdges",function(){(function(o){ce.forEach(o.nodes(),function(s){var l=o.node(s);if(l.dummy==="selfedge"){var u=o.node(l.e.v),c=u.x+u.width/2,f=u.y,h=l.x-c,d=u.height/2;o.setEdge(l.e,l.label),o.removeNode(s),l.label.points=[{x:c+2*h/3,y:f-d},{x:c+5*h/6,y:f-d},{x:c+h,y:f},{x:c+5*h/6,y:f+d},{x:c+2*h/3,y:f+d}],l.label.x=l.x,l.label.y=l.y}})})(i)}),a("    removeBorderNodes",function(){(function(o){ce.forEach(o.nodes(),function(s){if(o.children(s).length){var l=o.node(s),u=o.node(l.borderTop),c=o.node(l.borderBottom),f=o.node(ce.last(l.borderLeft)),h=o.node(ce.last(l.borderRight));l.width=Math.abs(h.x-f.x),l.height=Math.abs(c.y-u.y),l.x=f.x+l.width/2,l.y=u.y+l.height/2}}),ce.forEach(o.nodes(),function(s){o.node(s).dummy==="border"&&o.removeNode(s)})})(i)}),a("    normalize.undo",function(){e$.undo(i)}),a("    fixupEdgeLabelCoords",function(){(function(o){ce.forEach(o.edges(),function(s){var l=o.edge(s);if(ce.has(l,"x"))switch(l.labelpos!=="l"&&l.labelpos!=="r"||(l.width-=l.labeloffset),l.labelpos){case"l":l.x-=l.width/2+l.labeloffset;break;case"r":l.x+=l.width/2+l.labeloffset}})})(i)}),a("    undoCoordinateSystem",function(){a$.undo(i)}),a("    translateGraph",function(){(function(o){var s=Number.POSITIVE_INFINITY,l=0,u=Number.POSITIVE_INFINITY,c=0,f=o.graph(),h=f.marginx||0,d=f.marginy||0;function v(p){var g=p.x,m=p.y,y=p.width,w=p.height;s=Math.min(s,g-y/2),l=Math.max(l,g+y/2),u=Math.min(u,m-w/2),c=Math.max(c,m+w/2)}ce.forEach(o.nodes(),function(p){v(o.node(p))}),ce.forEach(o.edges(),function(p){var g=o.edge(p);ce.has(g,"x")&&v(g)}),s-=h,u-=d,ce.forEach(o.nodes(),function(p){var g=o.node(p);g.x-=s,g.y-=u}),ce.forEach(o.edges(),function(p){var g=o.edge(p);ce.forEach(g.points,function(m){m.x-=s,m.y-=u}),ce.has(g,"x")&&(g.x-=s),ce.has(g,"y")&&(g.y-=u)}),f.width=l-s+h,f.height=c-u+d})(i)}),a("    assignNodeIntersects",function(){(function(o){ce.forEach(o.edges(),function(s){var l,u,c=o.edge(s),f=o.node(s.v),h=o.node(s.w);c.points?(l=c.points[0],u=c.points[c.points.length-1]):(c.points=[],l=h,u=f),c.points.unshift(ul.intersectRect(f,l)),c.points.push(ul.intersectRect(h,u))})})(i)}),a("    reversePoints",function(){(function(o){ce.forEach(o.edges(),function(s){var l=o.edge(s);l.reversed&&l.points.reverse()})})(i)}),a("    acyclic.undo",function(){qN.undo(i)})})(n,t)}),t("  updateInputGraph",function(){(function(i,a){ce.forEach(i.nodes(),function(o){var s=i.node(o),l=a.node(o);s&&(s.x=l.x,s.y=l.y,a.children(o).length&&(s.width=l.width,s.height=l.height))}),ce.forEach(i.edges(),function(o){var s=i.edge(o),l=a.edge(o);s.points=l.points,ce.has(l,"x")&&(s.x=l.x,s.y=l.y)}),i.graph().width=a.graph().width,i.graph().height=a.graph().height})(r,n)})})},Lke=["nodesep","edgesep","ranksep","marginx","marginy"],Ike={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Oke=["acyclicer","ranker","rankdir","align"],Nke=["width","height"],$ke={width:0,height:0},Dke=["minlen","weight","width","height","labeloffset"],Rke={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Pke=["labelpos"];function Xw(r,e){return ce.mapValues(ce.pick(r,e),Number)}function Kw(r){var e={};return ce.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var Fke=po.Graph,tG={graphlib:po,layout:kke,debug:{debugOrdering:function(r){var e=ii.buildLayerMatrix(r),t=new Fke({compound:!0,multigraph:!0}).setGraph({});return ce.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),ce.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),ce.forEach(e,function(n,i){var a="layer"+i;t.setNode(a,{rank:"same"}),ce.reduce(n,function(o,s){return t.setEdge(o,s,{style:"invis"}),s})}),t}},util:{time:ii.time,notime:ii.notime},version:"0.8.5"},Bke=tG.graphlib,zke=tG.layout;class Gke{constructor(e){this.cardinality=1,this.include=dc.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Ni.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class jke{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Uke(r){const e=new jke;return r.nodes.map(t=>new Gke(t)).forEach(t=>{e.nodes[t.name]=t,t.inputs.forEach(n=>{(function(i,a,o){o.name!==a.name&&i.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:a.name}))})(e,t,n)})}),e}class Wke{constructor(e,t={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=dc.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Ni.META,this.path=[],this.name=e,this.metaGraph=DM(e,Zf.META,t)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(e=>this.metaGraph.node(e))}leaves(){let e,t=[],n=[this];for(;n.length;){let i=n.shift();i.isGroupNode?(e=i.metaGraph,e.nodes().forEach(a=>n.push(e.node(a)))):t.push(i.name)}return t}}class Hke{constructor(e,t){this.v=e,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,t){this.baseEdgeList.push(e)}}function rG(r,e={}){return new Wke(r,e)}function nG(r,e){return new Hke(r,e)}function DM(r,e,t){const n=t||{},i=new Bke.Graph(n);return i.setGraph({name:r,rankdir:n.rankdir,type:e,align:n.align}),i}class Vke{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=rG(qf,this.graphOptions),this.index[qf]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,t){this.index[e]=t}getBridgeGraph(e){const t=this.index[e];if(!t)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in t))return null;const n=t;if(n.bridgeGraph)return n.bridgeGraph;const i=DM(Vz,Zf.BRIDGE,this.graphOptions);if(n.bridgeGraph=i,!t.parentNode||!("metaGraph"in t.parentNode))return i;const a=t.parentNode;return[a.metaGraph,this.getBridgeGraph(a.name)].forEach(o=>{o.edges().filter(s=>s.v===e||s.w===e).forEach(s=>{const l=s.w===e;o.edge(s).baseEdgeList.forEach(u=>{const[c,f]=l?[u.w,s.v]:[u.v,s.w],h=this.getChildName(e,c),d={v:l?f:h,w:l?h:f};let v=i.edge(d);v||(v=nG(d.v,d.w),v.inbound=l,i.setEdge(d.v,d.w,v)),v.addBaseEdge(u,this)})})}),i}getChildName(e,t){let n=this.index[t];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+t)}getPredecessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!0)}getSuccessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!1)}getOneWayEdges(e,t){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const i=e.parentNode,a=i.metaGraph,o=this.getBridgeGraph(i.name);return f$(a,e,t,n),f$(o,e,t,n),n}}function Yke(r,e){const{rankDirection:t,align:n}=e,i=new Vke({rankdir:t,align:n});return function(a,o){Object.keys(o.nodes).forEach(s=>{const l=o.nodes[s],u=l.path;let c=a.root;c.depth=Math.max(u.length,c.depth);for(let f=0;f<u.length&&(c.depth=Math.max(c.depth,u.length-f),c.cardinality+=l.cardinality,f!==u.length-1);f++){const h=u[f];let d=a.node(h);d||(d=rG(h,a.graphOptions),d.path=l.path.slice(0,f+1),d.parentNode=c,a.setNode(h,d),c.metaGraph.setNode(h,d)),c=d}a.setNode(l.name,l),l.parentNode=c,c.metaGraph.setNode(l.name,l)})}(i,r),function(a,o){const s=a.getNodeMap();let l=[],u=[];const c=(f,h)=>{let d=0;for(;f;)h[d++]=f.name,f=f.parentNode;return d-1};o.edges.forEach(f=>{l=[],u=[];let h=c(o.nodes[f.v],l),d=c(o.nodes[f.w],u);for(;l[h]===u[d];)if(h--,d--,h<0||d<0)throw Error("No difference found between ancestor paths.");const v=s[l[h+1]],p=l[h],g=u[d];let m=v.metaGraph.edge(p,g);m||(m=nG(p,g),v.metaGraph.setEdge(p,g,m)),m.addBaseEdge(f,a)})}(i,r),i}function f$(r,e,t,n){(t?r.inEdges(e.name):r.outEdges(e.name)).forEach(i=>{const a=r.edge(i);n.push(a)})}class Xke{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new d$(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const t=this.index[e];if(t.node.type!==Ni.META)return;const n=t,i=n.node.metaGraph,a=n.coreGraph;i.nodes().forEach(c=>{const f=this.getOrCreateRenderNodeByName(c);a.setNode(c,f)}),i.edges().forEach(c=>{const f=i.edge(c),h=new h$(f);a.setEdge(c.v,c.w,h)});const o=n.node.parentNode;if(!o)return;const s=this.getRenderNodeByName(o.name),l=(c,...f)=>f.concat([c?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach(c=>{const f=u.edge(c),h=!!i.node(c.w),[d,v]=h?[c.w,c.v]:[c.v,c.w],p=x=>{const S=h?{v:x,w:e}:{v:e,w:x};return s.coreGraph.edge(S)};let g=p(v);g||(g=p(l(h,v,o.name)));const m=l(h,e),y=l(h,v,e);let w=a.node(y);if(!w){let x=a.node(m);if(!x){const _={name:m,type:Ni.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:dc.UNSPECIFIED,inbound:h,attr:{}};x=new D0(_),this.index[m]=x,a.setNode(m,x)}const S={name:y,type:Ni.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:dc.UNSPECIFIED,inbound:h,attr:{}};w=new D0(S),this.index[y]=w,a.setNode(y,w),a.setParent(y,m),x.node.cardinality++}const b=new h$(f);b.adjoiningMetaEdge=g,h?a.setEdge(y,d,b):a.setEdge(d,y,b)})}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const t=this.getNodeByName(e);return t?(this.index[e]=t.isGroupNode?new d$(t,this.hierarchy.graphOptions):new D0(t),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class D0{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class h${constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class d$ extends D0{constructor(e,t){super(e);const n=e.metaGraph.graph();t.compound=!0,this.coreGraph=DM(n.name,Zf.CORE,t)}}function iG(r,e){r.node.isGroupNode&&function(t,n){const i=WS(n);t.coreGraph.nodes().map(a=>t.coreGraph.node(a)).forEach(a=>{var o,s,l,u,c,f;const{height:h,width:d}=a;switch(a.node.type){case Ni.NODE:Object.assign(a,i.nodeSize.node),a.height=h||i.nodeSize.node.height,a.width=d||i.nodeSize.node.width;break;case Ni.BRIDGE:Object.assign(a,i.nodeSize.bridge);break;case Ni.META:a.expanded?iG(a,n):(Object.assign(a,i.nodeSize.meta),a.height=i.nodeSize.meta.height,a.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+a.node.type)}if(!a.expanded){const v=a.attr;(function(p,g=!1){if(p.coreBox.width=p.width,p.coreBox.height=p.height,!g){const m=`${p.displayName}`.length,y=3;p.width=Math.max(p.coreBox.width,m*y)}})(a,n&&(a.node.type===0&&!!(!((s=(o=n==null?void 0:n.nodeSize)===null||o===void 0?void 0:o.meta)===null||s===void 0)&&s.width)||a.node.type===1&&(!!(!((u=(l=n==null?void 0:n.nodeSize)===null||l===void 0?void 0:l.node)===null||u===void 0)&&u.width)||!!v.width)||a.node.type===2&&!!(!((f=(c=n==null?void 0:n.nodeSize)===null||c===void 0?void 0:c.bridge)===null||f===void 0)&&f.width)))}})}(r,e),r.node.type===Ni.META&&function(t,n){const i=WS(n),a=i.subScene.meta;Object.assign(t,a);const{nodeSep:o,rankSep:s,edgeSep:l,align:u}=i.graph.meta,c={nodesep:o,ranksep:s,edgesep:l,align:u};Object.assign(t.coreBox,function(d,v){const{ranksep:p,nodesep:g,edgesep:m,align:y}=v;Object.assign(d.graph(),{ranksep:p,nodesep:g,edgesep:m,align:y});const w=[];if(d.nodes().forEach(M=>{d.node(M).node.type!==Ni.BRIDGE&&w.push(M)}),!w.length)return{width:0,height:0};zke(d);let b=1/0,x=1/0,S=-1/0,_=-1/0;return w.forEach(M=>{const A=d.node(M),E=.5*A.width,T=A.x-E,C=A.x+E;b=T<b?T:b,S=C>S?C:S;const k=.5*A.height,L=A.y-k,I=A.y+k;x=L<x?L:x,_=I>_?I:_}),d.edges().forEach(M=>{const A=d.edge(M),E=d.node(A.metaEdge.v),T=d.node(A.metaEdge.w);if(A.points.length===3&&function(L){let I=v$(L[0],L[1]);for(let O=1;O<L.length-1;O++){const N=v$(L[O],L[O+1]);if(Math.abs(N-I)>1)return!1;I=N}return!0}(A.points)){if(E!=null){const L=E.expanded?E.x:e_(E);A.points[0].x=L}if(T!=null){const L=T.expanded?T.x:e_(T);A.points[2].x=L}A.points=[A.points[0],A.points[1]]}const C=A.points[A.points.length-2];T!=null&&(A.points[A.points.length-1]=p$(C,T));const k=A.points[1];E!=null&&(A.points[0]=p$(k,E)),A.points.forEach(L=>{b=L.x<b?L.x:b,S=L.x>S?L.x:S,x=L.y<x?L.y:x,_=L.y>_?L.y:_})}),d.nodes().forEach(M=>{const A=d.node(M);A.x-=b,A.y-=x}),d.edges().forEach(M=>{d.edge(M).points.forEach(A=>{A.x-=b,A.y-=x})}),{width:S-b,height:_-x}}(t.coreGraph,c));let f=0;t.coreGraph.nodeCount()>0&&f++;const h=f<=1?0:f;t.coreBox.width+=h+h,t.coreBox.height=a.labelHeight+t.coreBox.height,t.width=t.coreBox.width+a.paddingLeft+a.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(r,e)}function v$(r,e){const t=e.x-r.x,n=e.y-r.y;return 180*Math.atan(n/t)/Math.PI}function e_(r){return r.expanded?r.x:r.x-r.width/2+0+r.coreBox.width/2}function p$(r,e){const t=e.expanded?e.x:e_(e),n=e.y,i=r.x-t,a=r.y-n;let o,s,l=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(a)*l/2>Math.abs(i)*u/2?(a<0&&(u=-u),o=a===0?0:u/2*i/a,s=u/2):(i<0&&(l=-l),o=l/2,s=i===0?0:l/2*a/i),{x:t+o,y:n+s}}function Kke(r,e,t){var n,i,a,o;const s=r.nodes.filter((f,h,d)=>d.findIndex(v=>v.id===f.id)!==h).map(f=>f.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const l=function(f){const h={nodes:[]},d=f.compound,v=Object.keys(d||{}),p=new Map,g=(y,w=[])=>{if(p.has(y))return p.get(y);for(let b=0;b<v.length;b++){let x=v[b];if(d&&d[x].indexOf(y)!==-1)return w.unshift(x),g(x,w)}return w.length===0&&p.set(y,w),w},m=y=>f.edges.filter(w=>w.w===y).map(w=>({name:w.v}));return f.nodes.forEach(y=>{const w=y.id,b=[...g(w),w];let x=m(w);h.nodes.push({name:w,path:b,inputs:x,width:y.width,height:y.height,attr:Object.assign({},y)})}),h}(r),u=function(f,h){const d=(p,g)=>{for(let m of g.values())if(m.includes(p))return!0;return!1},v=(p,g=[])=>{if(Object.keys(p).length===0)return[...new Set(g)];const m=new Map(Object.keys(p).map(w=>[w,p[w]])),y={};for(let[w,b]of m)d(w,m)?y[w]=b:g=g.concat(w,b);return v(y,g)};return v(f).filter(p=>h.includes(p))}(r.compound||{},(e==null?void 0:e.expanded)||[]),c=function(f,h){return function(d){return new Xke(d)}(Yke(Uke(f),h))}(l,{rankDirection:((i=(n=t==null?void 0:t.graph)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.rankDir)||(e==null?void 0:e.rankDirection)||Pm.graph.meta.rankDir,align:((o=(a=t==null?void 0:t.graph)===null||a===void 0?void 0:a.meta)===null||o===void 0?void 0:o.align)||Pm.graph.meta.align});return function(f,h){h.forEach(d=>{const v=f.getRenderInfoNodes().find(m=>m.displayName===d);let p=v&&v.node&&v.node.name||"";const g=f.getRenderNodeByName(p);if(!g)throw new Error(`No nodes found: ${p}`);g.expanded=!0,f.buildSubHierarchy(p)})}(c,u),iG(c.root,t),aG(c.root)}function qke(r,e=!1){const t=JSON.parse(JSON.stringify(r)),n={nodes:[t],edges:[...t.edges]};return t.nodes.forEach(function i(a){(a.type===0||a.type===1)&&n.nodes.push(a),a.type===0&&(n.edges=n.edges.concat(a.edges)),Array.isArray(a.nodes)&&a.nodes.forEach(i)}),e&&n.nodes.forEach(i=>{const a=n.nodes.find(o=>o.id===i.parentNodeName);if(a){const o=a.x-a.width/2+a.paddingLeft,s=a.y-a.height/2+a.labelHeight+a.paddingTop;a.id!==qf&&(i.x+=o,i.y+=s),i.type===0&&i.edges.forEach(l=>{l.points.forEach(u=>{u.x+=i.x-i.width/2+i.paddingLeft,u.y+=i.y-i.height/2+i.labelHeight+i.paddingTop})})}}),n}function Zke(r,e,t,n){var i,a;let o=[];const s=((i=t.find(f=>f.id===r))===null||i===void 0?void 0:i.path)||[],l=((a=t.find(f=>f.id===e))===null||a===void 0?void 0:a.path)||[],u=[qf,...s].slice(0,s.length).reverse(),c=[qf,...l].slice(0,l.length);return u.forEach(f=>{const h=t.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(v=>v.v===((n==null?void 0:n.v)||r)&&v.w===((n==null?void 0:n.w)||e))))}),c.filter(f=>!u.includes(f)).forEach(f=>{const h=t.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(v=>v.v===((n==null?void 0:n.v)||r)&&v.w===((n==null?void 0:n.w)||e))))}),o}function aG(r){const e=r.coreGraph.nodes().map(n=>r.coreGraph.node(n));return Object.assign(Object.assign({},g$(r)),{expanded:r.expanded,nodes:r.expanded?(t=e,t.map(n=>n.node.type===Ni.META?aG(n):g$(n))):[],edges:r.expanded?Qke(r):[]});var t}function g$(r){return{id:r.node.name,name:r.node.name,type:r.node.type,cardinality:r.node.cardinality,attr:r.attr,parentNodeName:r.node.parentNode?r.node.parentNode.name:null,coreBox:Object.assign({},r.coreBox),x:r.x,y:r.y,width:r.width,height:r.height,radius:r.radius,labelHeight:r.labelHeight,labelOffset:r.labelOffset,outboxWidth:r.outboxWidth,paddingLeft:r.paddingLeft,paddingTop:r.paddingTop,paddingRight:r.paddingRight,paddingBottom:r.paddingBottom,path:r.node.path}}function Qke(r){return r.coreGraph.edges().map(e=>({renderInfoEdge:r.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:e})=>e.metaEdge).map(({edge:e,renderInfoEdge:t})=>{const n=function(i,a){const o=a.points.map(s=>Object.assign({},s));if(a.adjoiningMetaEdge){const s=a.adjoiningMetaEdge.points,l=a.metaEdge.inbound,u=l?s[s.length-1]:s[0],c=o[l?0:o.length-1],f=i.x-i.width/2,h=i.y-i.height/2,d=u.x-f,v=u.y-h,p=-i.paddingLeft,g=-(i.paddingTop+i.labelHeight);c.x=d+p,c.y=v+g}return o}(r,t);return{adjoiningEdge:t.adjoiningMetaEdge?{w:t.adjoiningMetaEdge.metaEdge.w,v:t.adjoiningMetaEdge.metaEdge.v}:null,inbound:t.metaEdge.inbound,w:e.w,v:e.v,points:n,weight:t.weight,baseEdgeList:t.metaEdge.baseEdgeList,parentNodeName:r.node.name}})}const Jke=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:Vz,get GraphType(){return Zf},get HierarchyNodeType(){return HS},get InclusionType(){return dc},LAYOUT_CONFIG:Pm,get NodeType(){return Ni},ROOT_NAME:qf,buildGraph:Kke,flatGraph:qke,getEdges:Zke,mergeConfig:WS},Symbol.toStringTag,{value:"Module"})),eLe=rs(Jke);var tLe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ka=ze&&ze.__assign||function(){return Ka=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ka.apply(this,arguments)},qc=ze&&ze.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(ip,"__esModule",{value:!0});ip.DagreCompoundLayout=void 0;var rLe=_n,ga=eLe,Wg=vn(),nLe=function(r){tLe(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var n=t.hiddenNodes||[],i=t.hiddenEdges||[],a=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(i)),this.combos=(t.combos||[]).concat(a.map(function(o){return Ka(Ka({},o),{collapsed:!0})}))},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges;if(n){var a=t.getLayoutConfig(),o=a.graphDef,s=a.graphOption,l=a.graphSettings,u=(0,ga.buildGraph)(o,s,l),c=(0,ga.flatGraph)(u,!0);return this.updatePosition(c),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}}},e.prototype.getNodePath=function(t){var n=this,i=n.nodes,a=n.combos,o=i.find(function(l){return l.id===t}),s=function(l,u){u===void 0&&(u=[]);var c=a.find(function(f){return f.id===l});return c?(u.unshift(l),c.parentId?s(c.parentId,u):u):u};return o&&o.comboId?s(o.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,n,i,a=this,o=a.nodes,s=a.edges,l=a.combos,u=a.nodeSize,c=a.rankdir,f=a.align,h=a.edgesep,d=a.nodesep,v=a.ranksep,p=a.settings,g=(l||[]).reduce(function(O,N){var D=o.filter(function(R){return R.comboId===N.id}).map(function(R){return R.id}),$=(l||[]).filter(function(R){return R.parentId===N.id}).map(function(R){return R.id});return(D.length||$.length)&&(O[N.id]=qc(qc([],D,!0),$,!0)),O},{}),m;u?(0,Wg.isArray)(u)?m=function(){return u}:m=function(){return[u,u]}:m=function(O){return O&&O.size?(0,Wg.isArray)(O.size)?O.size:(0,Wg.isObject)(O.size)?[O.size.width||40,O.size.height||40]:[O.size,O.size]:[40,40]};var y=function(O){return O&&O.size?(0,Wg.isArray)(O.size)?O.size:[O.size,O.size]:[80,40]},w=y(l==null?void 0:l[0]),b=w[0],x=w[1],S=(n=(t=a.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,_=((i=l.find(function(O){return!O.collapsed}))===null||i===void 0?void 0:i.padding)||[20,20,20,20],M=_[0],A=_[1],E=_[2],T=_[3],C={compound:g,nodes:qc([],(o||[]).map(function(O){var N=m(O),D=N[0],$=N[1];return Ka(Ka({},O),{width:D,height:$})}),!0),edges:qc([],(s||[]).map(function(O){return Ka(Ka({},O),{v:O.source,w:O.target})}),!0)},k={expanded:(l||[]).filter(function(O){return!O.collapsed}).map(function(O){return O.id})},L={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:h,rankSep:v}},subScene:{meta:{paddingTop:M||(S==null?void 0:S.paddingTop)||20,paddingRight:A||(S==null?void 0:S.paddingRight)||20,paddingBottom:E||(S==null?void 0:S.paddingBottom)||20,paddingLeft:T||(S==null?void 0:S.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:b,height:x}}},I=(0,ga.mergeConfig)(p,Ka({},(0,ga.mergeConfig)(L,ga.LAYOUT_CONFIG)));return a.graphSettings=I,{graphDef:C,graphOption:k,graphSettings:I}},e.prototype.updatePosition=function(t){var n=t.nodes,i=t.edges;this.updateNodePosition(n,i),this.updateEdgePosition(n,i)},e.prototype.getBegin=function(t,n){var i=this,a=i.begin,o=[0,0];if(a){var s=1/0,l=1/0;t.forEach(function(u){s>u.x&&(s=u.x),l>u.y&&(l=u.y)}),n.forEach(function(u){u.points.forEach(function(c){s>c.x&&(s=c.x),l>c.y&&(l=c.y)})}),o[0]=a[0]-s,o[1]=a[1]-l}return o},e.prototype.updateNodePosition=function(t,n){var i=this,a=i.combos,o=i.nodes,s=i.edges,l=i.anchorPoint,u=i.graphSettings,c=this.getBegin(t,n);t.forEach(function(f){var h,d=f.x,v=f.y,p=f.id,g=f.type,m=f.coreBox;if(g===ga.HierarchyNodeType.META&&p!==ga.ROOT_NAME){var y=a.findIndex(function(_){return _.id===p}),w=(h=u==null?void 0:u.subScene)===null||h===void 0?void 0:h.meta;a[y].offsetX=d+c[0],a[y].offsetY=v+c[1],a[y].fixSize=[m.width,m.height],a[y].fixCollapseSize=[m.width,m.height],f.expanded?a[y].padding=[w==null?void 0:w.paddingTop,w==null?void 0:w.paddingRight,w==null?void 0:w.paddingBottom,w==null?void 0:w.paddingLeft]:a[y].padding=[0,0,0,0]}else if(g===ga.HierarchyNodeType.OP){var y=o.findIndex(function(M){return M.id===p});if(o[y].x=d+c[0],o[y].y=v+c[1],l){var b=[],x=n.filter(function(M){return M.v===p}),S=n.filter(function(M){return M.w===p});x.length>0&&x.forEach(function(M){var A=M.points[0],E=(A.x-d)/f.width+.5,T=(A.y-v)/f.height+.5;b.push([E,T]),M.baseEdgeList.forEach(function(C){var k=s.find(function(L){return L.source===C.v&&L.target===C.w});k&&(k.sourceAnchor=b.length-1)})}),S.length>0&&S.forEach(function(M){var A=M.points[M.points.length-1],E=(A.x-d)/f.width+.5,T=(A.y-v)/f.height+.5;b.push([E,T]),M.baseEdgeList.forEach(function(C){var k=s.find(function(L){return L.source===C.v&&L.target===C.w});k&&(k.targetAnchor=b.length-1)})}),o[y].anchorPoints=b.length>0?b:o[y].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(t,n){var i=this,a=i.combos,o=i.edges,s=i.controlPoints,l=this.getBegin(t,n);s&&(a.forEach(function(u){u.inEdges=[],u.outEdges=[]}),o.forEach(function(u){var c,f,h,d,v=t.find(function(_){return _.id===u.source}),p=t.find(function(_){return _.id===u.target}),g=[],m=[];if(v&&p)m=(0,ga.getEdges)(v==null?void 0:v.id,p==null?void 0:p.id,t);else if(!v||!p){var y=i.getNodePath(u.source),w=i.getNodePath(u.target),b=y.reverse().slice(v?0:1).find(function(_){return t.find(function(M){return M.id===_})}),x=w.reverse().slice(p?0:1).find(function(_){return t.find(function(M){return M.id===_})});v=t.find(function(_){return _.id===b}),p=t.find(function(_){return _.id===x}),m=(0,ga.getEdges)(v==null?void 0:v.id,p==null?void 0:p.id,t,{v:u.source,w:u.target})}if(g=m.reduce(function(_,M){return qc(qc([],_,!0),M.points.map(function(A){return Ka(Ka({},A),{x:A.x+l[0],y:A.y+l[1]})}),!0)},[]),g=g.slice(1,-1),u.controlPoints=g,(p==null?void 0:p.type)===ga.NodeType.META){var S=a.findIndex(function(_){return _.id===(p==null?void 0:p.id)});if(!a[S]||!((c=a[S].inEdges)===null||c===void 0)&&c.some(function(_){return _.source===v.id&&_.target===p.id}))return;(f=a[S].inEdges)===null||f===void 0||f.push({source:v.id,target:p.id,controlPoints:g})}if((v==null?void 0:v.type)===ga.NodeType.META){var S=a.findIndex(function(M){return M.id===(v==null?void 0:v.id)});if(!a[S]||!((h=a[S].outEdges)===null||h===void 0)&&h.some(function(M){return M.source===v.id&&M.target===p.id}))return;(d=a[S].outEdges)===null||d===void 0||d.push({source:v.id,target:p.id,controlPoints:g})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every(function(n){return n.layoutOrder!==void 0})||t.forEach(function(n,i){n.layoutOrder=i}),t.sort(function(n,i){return n.layoutOrder-i.layoutOrder})},e}(rLe.Base);ip.DagreCompoundLayout=nLe;var RM={},_1={},PM={};const iLe=Object.prototype.toString;function Hm(r){const e=iLe.call(r);return e.endsWith("Array]")&&!e.includes("Big")}function aLe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Hm(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]>o&&(o=r[s]);return o}function oLe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Hm(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]<o&&(o=r[s]);return o}function m$(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Hm(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Hm(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=oLe(r),i=aLe(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?n:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),c=0;c<r.length;c++)t[c]=(r[c]-n)*u+o;return t}const Hg=" ".repeat(2),oG=" ".repeat(4);function sLe(){return sG(this)}function sG(r,e={}){const{maxRows:t=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${r.constructor.name} {
${Hg}[
${oG}${lLe(r,t,n,i)}
${Hg}]
${Hg}rows: ${r.rows}
${Hg}columns: ${r.columns}
}`}function lLe(r,e,t,n){const{rows:i,columns:a}=r,o=Math.min(i,e),s=Math.min(a,t),l=[];for(let u=0;u<o;u++){let c=[];for(let f=0;f<s;f++)c.push(uLe(r.get(u,f),n));l.push(`${c.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-t} more columns`),o!==i&&l.push(`... ${i-e} more rows`),l.join(`
${oG}`)}function uLe(r,e){const t=String(r);if(t.length<=e)return t.padEnd(e," ");const n=r.toPrecision(e-2);if(n.length<=e)return n;const i=r.toExponential(e-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,e-o.length)+o}function cLe(r,e){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},r.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},r.add=function(n,i){return new e(n).add(i)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},r.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},r.sub=function(n,i){return new e(n).sub(i)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},r.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},r.mul=function(n,i){return new e(n).mul(i)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},r.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},r.div=function(n,i){return new e(n).div(i)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},r.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},r.mod=function(n,i){return new e(n).mod(i)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},r.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},r.and=function(n,i){return new e(n).and(i)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},r.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},r.or=function(n,i){return new e(n).or(i)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},r.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},r.xor=function(n,i){return new e(n).xor(i)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},r.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},r.leftShift=function(n,i){return new e(n).leftShift(i)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},r.signPropagatingRightShift=function(n,i){return new e(n).signPropagatingRightShift(i)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},r.rightShift=function(n,i){return new e(n).rightShift(i)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},r.not=function(n){return new e(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},r.abs=function(n){return new e(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},r.acos=function(n){return new e(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},r.acosh=function(n){return new e(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},r.asin=function(n){return new e(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},r.asinh=function(n){return new e(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},r.atan=function(n){return new e(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},r.atanh=function(n){return new e(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},r.cbrt=function(n){return new e(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},r.ceil=function(n){return new e(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},r.clz32=function(n){return new e(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},r.cos=function(n){return new e(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},r.cosh=function(n){return new e(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},r.exp=function(n){return new e(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},r.expm1=function(n){return new e(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},r.floor=function(n){return new e(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},r.fround=function(n){return new e(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},r.log=function(n){return new e(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},r.log1p=function(n){return new e(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},r.log10=function(n){return new e(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},r.log2=function(n){return new e(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},r.round=function(n){return new e(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},r.sign=function(n){return new e(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},r.sin=function(n){return new e(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},r.sinh=function(n){return new e(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},r.sqrt=function(n){return new e(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},r.tan=function(n){return new e(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},r.tanh=function(n){return new e(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},r.trunc=function(n){return new e(n).trunc()},r.pow=function(n,i){return new e(n).pow(i)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},r.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function xa(r,e,t){let n=t?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function Sa(r,e,t){let n=t?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function uf(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function cf(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function lG(r,e,t){return{row:uG(r,e),column:cG(r,t)}}function uG(r,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");if(e.some(n=>n<0||n>=r.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function cG(r,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");if(e.some(n=>n<0||n>=r.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function t_(r,e,t,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Vg("startRow",e),Vg("endRow",t),Vg("startColumn",n),Vg("endColumn",i),e>t||n>i||e<0||e>=r.rows||t<0||t>=r.rows||n<0||n>=r.columns||i<0||i>=r.columns)throw new RangeError("Submatrix indices are out of range")}function E1(r,e=0){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function Vg(r,e){if(typeof e!="number")throw new TypeError(`${r} must be a number`)}function fLe(r){let e=E1(r.rows);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]+=r.get(t,n);return e}function hLe(r){let e=E1(r.columns);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]+=r.get(t,n);return e}function dLe(r){let e=0;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e+=r.get(t,n);return e}function vLe(r){let e=E1(r.rows,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]*=r.get(t,n);return e}function pLe(r){let e=E1(r.columns,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]*=r.get(t,n);return e}function gLe(r){let e=1;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e*=r.get(t,n);return e}function mLe(r,e,t){const n=r.rows,i=r.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let c=0;c<i;c++)u=r.get(o,c)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function yLe(r,e,t){const n=r.rows,i=r.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let c=0;c<n;c++)u=r.get(c,o)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function bLe(r,e,t){const n=r.rows,i=r.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let c=0;c<i;c++)l=r.get(u,c)-t,o+=l,s+=l*l;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}function wLe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[t])}function xLe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[n])}function SLe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e)}function _Le(r){const e=[];for(let t=0;t<r.rows;t++){let n=0;for(let i=0;i<r.columns;i++)n+=Math.pow(r.get(t,i),2)/(r.columns-1);e.push(Math.sqrt(n))}return e}function ELe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[t])}function MLe(r){const e=[];for(let t=0;t<r.columns;t++){let n=0;for(let i=0;i<r.rows;i++)n+=Math.pow(r.get(i,t),2)/(r.rows-1);e.push(Math.sqrt(n))}return e}function CLe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[n])}function ALe(r){const e=r.size-1;let t=0;for(let n=0;n<r.columns;n++)for(let i=0;i<r.rows;i++)t+=Math.pow(r.get(i,n),2)/e;return Math.sqrt(t)}function TLe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e)}class xr{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Pt(e,t);for(let o=0;o<e;o++)for(let s=0;s<t;s++)a.set(o,s,n[o*t+s]);return a}static rowVector(e){let t=new Pt(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new Pt(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new Pt(e,t)}static ones(e,t){return new Pt(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Pt(e,t);for(let o=0;o<e;o++)for(let s=0;s<t;s++)a.set(o,s,i());return a}static randInt(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Pt(e,t);for(let u=0;u<e;u++)for(let c=0;c<t;c++){let f=i+Math.round(o()*s);l.set(u,c,f)}return l}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let i=Math.min(e,t),a=this.zeros(e,t);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(e,t,n){let i=e.length;t===void 0&&(t=i),n===void 0&&(n=t);let a=Math.min(i,t,n),o=this.zeros(t,n);for(let s=0;s<a;s++)o.set(s,s,e[s]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new Pt(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(e.get(o,s),t.get(o,s)));return a}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(e.get(o,s),t.get(o,s)));return a}static checkMatrix(e){return xr.isMatrix(e)?e:new Pt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);for(let o=t+1;o<this.rows;o++)this.get(e,o)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let i=t;for(let a=t;a<e.rows;a++)e.get(a,n)>e.get(i,n)&&(i=a);if(e.get(i,n)===0)n++;else{e.swapRows(t,i);let a=e.get(t,n);for(let o=n;o<e.columns;o++)e.set(t,o,e.get(t,o)/a);for(let o=t+1;o<e.rows;o++){let s=e.get(o,n)/e.get(t,n);e.set(o,n,0);for(let l=n+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(t,l)*s)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,i=n-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)e.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=e.get(s,a);for(let u=a;u<t;u++){let c=e.get(s,u)-l*e.get(i,u);e.set(s,u,c)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Pt(this.rows*t,this.columns*n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){xa(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return Pt.rowVector(this.getRow(e))}setRow(e,t){xa(this,e),t=uf(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){xa(this,e),xa(this,t);for(let n=0;n<this.columns;n++){let i=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,i)}return this}getColumn(e){Sa(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return Pt.columnVector(this.getColumn(e))}setColumn(e,t){Sa(this,e),t=cf(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){Sa(this,e),Sa(this,t);for(let n=0;n<this.rows;n++){let i=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,i)}return this}addRowVector(e){e=uf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=uf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=uf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=uf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=cf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=cf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=cf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=cf(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){xa(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){Sa(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(){let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxIndex(){let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}min(){let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minIndex(){let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}maxRow(e){xa(this,e);let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){xa(this,e);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>t&&(t=this.get(e,i),n[1]=i);return n}minRow(e){xa(this,e);let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){xa(this,e);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<t&&(t=this.get(e,i),n[1]=i);return n}maxColumn(e){Sa(this,e);let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){Sa(this,e);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>t&&(t=this.get(i,e),n[0]=i);return n}minColumn(e){Sa(this,e);let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){Sa(this,e);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<t&&(t=this.get(i,e),n[0]=i);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){let t=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)t=t+this.get(n,i)*this.get(n,i);return Math.sqrt(t)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){xr.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<t.length;i++)n+=t[i]*e[i];return n}mmul(e){e=Pt.checkMatrix(e);let t=this.rows,n=this.columns,i=e.columns,a=new Pt(t,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=e.get(l,s);for(let l=0;l<t;l++){let u=0;for(let c=0;c<n;c++)u+=this.get(l,c)*o[c];a.set(l,s,u)}}return a}strassen2x2(e){e=Pt.checkMatrix(e);let t=new Pt(2,2);const n=this.get(0,0),i=e.get(0,0),a=this.get(0,1),o=e.get(0,1),s=this.get(1,0),l=e.get(1,0),u=this.get(1,1),c=e.get(1,1),f=(n+u)*(i+c),h=(s+u)*i,d=n*(o-c),v=u*(l-i),p=(n+a)*c,g=(s-n)*(i+o),m=(a-u)*(l+c),y=f+v-p+m,w=d+p,b=h+v,x=f-h+d+g;return t.set(0,0,y),t.set(0,1,w),t.set(1,0,b),t.set(1,1,x),t}strassen3x3(e){e=Pt.checkMatrix(e);let t=new Pt(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),h=e.get(0,0),d=e.get(0,1),v=e.get(0,2),p=e.get(1,0),g=e.get(1,1),m=e.get(1,2),y=e.get(2,0),w=e.get(2,1),b=e.get(2,2),x=(n+i+a-o-s-c-f)*g,S=(n-o)*(-d+g),_=s*(-h+d+p-g-m-y+b),M=(-n+o+s)*(h-d+g),A=(o+s)*(-h+d),E=n*h,T=(-n+u+c)*(h-v+m),C=(-n+u)*(v-m),k=(u+c)*(-h+v),L=(n+i+a-s-l-u-c)*m,I=c*(-h+v+p-g-m-y+w),O=(-a+c+f)*(g+y-w),N=(a-f)*(g-w),D=a*y,$=(c+f)*(-y+w),R=(-a+s+l)*(m+y-b),B=(a-l)*(m-b),j=(s+l)*(-y+b),G=i*p,z=l*w,W=o*v,Q=u*d,ie=f*b,se=E+D+G,ae=x+M+A+E+O+D+$,pe=E+T+k+L+D+R+j,De=S+_+M+E+D+R+B,Je=S+M+A+E+z,ee=D+R+B+j+W,ne=E+T+C+I+O+N+D,me=O+N+D+$+Q,Fe=E+T+C+k+ie;return t.set(0,0,se),t.set(0,1,ae),t.set(0,2,pe),t.set(1,0,De),t.set(1,1,Je),t.set(1,2,ee),t.set(2,0,ne),t.set(2,1,me),t.set(2,2,Fe),t}mmulStrassen(e){e=Pt.checkMatrix(e);let t=this.clone(),n=t.rows,i=t.columns,a=e.rows,o=e.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(f,h,d){let v=f.rows,p=f.columns;if(v===h&&p===d)return f;{let g=xr.zeros(h,d);return g=g.setSubMatrix(f,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);t=s(t,l,u),e=s(e,l,u);function c(f,h,d,v){if(d<=512||v<=512)return f.mmul(h);d%2===1&&v%2===1?(f=s(f,d+1,v+1),h=s(h,d+1,v+1)):d%2===1?(f=s(f,d+1,v),h=s(h,d+1,v)):v%2===1&&(f=s(f,d,v+1),h=s(h,d,v+1));let p=parseInt(f.rows/2,10),g=parseInt(f.columns/2,10),m=f.subMatrix(0,p-1,0,g-1),y=h.subMatrix(0,p-1,0,g-1),w=f.subMatrix(0,p-1,g,f.columns-1),b=h.subMatrix(0,p-1,g,h.columns-1),x=f.subMatrix(p,f.rows-1,0,g-1),S=h.subMatrix(p,h.rows-1,0,g-1),_=f.subMatrix(p,f.rows-1,g,f.columns-1),M=h.subMatrix(p,h.rows-1,g,h.columns-1),A=c(xr.add(m,_),xr.add(y,M),p,g),E=c(xr.add(x,_),y,p,g),T=c(m,xr.sub(b,M),p,g),C=c(_,xr.sub(S,y),p,g),k=c(xr.add(m,w),M,p,g),L=c(xr.sub(x,m),xr.add(y,b),p,g),I=c(xr.sub(w,_),xr.add(S,M),p,g),O=xr.add(A,C);O.sub(k),O.add(I);let N=xr.add(T,k),D=xr.add(E,C),$=xr.sub(A,E);$.add(T),$.add(L);let R=xr.zeros(2*O.rows,2*O.columns);return R=R.setSubMatrix(O,0,0),R=R.setSubMatrix(N,O.rows,0),R=R.setSubMatrix(D,0,O.columns),R=R.setSubMatrix($,O.rows,O.columns),R.subMatrix(0,d-1,0,v-1)}return c(t,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new Pt(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);m$(o,{min:t,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new Pt(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);m$(o,{min:t,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let i=this.get(t,n),a=this.get(t,this.columns-1-n);this.set(t,n,a),this.set(t,this.columns-1-n,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let i=this.get(n,t),a=this.get(this.rows-1-n,t);this.set(n,t,a),this.set(this.rows-1-n,t,i)}return this}kroneckerProduct(e){e=Pt.checkMatrix(e);let t=this.rows,n=this.columns,i=e.rows,a=e.columns,o=new Pt(t*i,n*a);for(let s=0;s<t;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let c=0;c<a;c++)o.set(i*s+u,a*l+c,this.get(s,l)*e.get(u,c));return o}transpose(){let e=new Pt(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=y$){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=y$){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,i){t_(this,e,t,n,i);let a=new Pt(t-e+1,i-n+1);for(let o=e;o<=t;o++)for(let s=n;s<=i;s++)a.set(o-e,s-n,this.get(o,s));return a}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Pt(e.length,n-t+1);for(let a=0;a<e.length;a++)for(let o=t;o<=n;o++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,o-t,this.get(e[a],o))}return i}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Pt(n-t+1,e.length);for(let a=0;a<e.length;a++)for(let o=t;o<=n;o++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(o-t,a,this.get(o,e[a]))}return i}setSubMatrix(e,t,n){e=Pt.checkMatrix(e);let i=t+e.rows-1,a=n+e.columns-1;t_(this,t,i,n,a);for(let o=0;o<e.rows;o++)for(let s=0;s<e.columns;s++)this.set(t+o,n+s,e.get(o,s));return this}selection(e,t){let n=lG(this,e,t),i=new Pt(e.length,t.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new Pt(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return fLe(this);case"column":return hLe(this);case void 0:return dLe(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return vLe(this);case"column":return pLe(this);case void 0:return gLe(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)t[n]/=this.columns;return t}case"column":{for(let n=0;n<this.columns;n++)t[n]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(e)}=t;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return mLe(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return yLe(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return bLe(this,n,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return wLe(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return xLe(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return SLe(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":{if(n===void 0)n=_Le(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return ELe(this,n),this}case"column":{if(n===void 0)n=MLe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return CLe(this,n),this}case void 0:{if(n===void 0)n=ALe(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return TLe(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return sG(this,e)}}xr.prototype.klass="Matrix";typeof Symbol<"u"&&(xr.prototype[Symbol.for("nodejs.util.inspect.custom")]=sLe);function y$(r,e){return r-e}xr.random=xr.rand;xr.randomInt=xr.randInt;xr.diagonal=xr.diag;xr.prototype.diagonal=xr.prototype.diag;xr.identity=xr.eye;xr.prototype.negate=xr.prototype.neg;xr.prototype.tensorProduct=xr.prototype.kroneckerProduct;class Pt extends xr{constructor(e,t){if(super(),Pt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>0)if(this.data=[],Number.isInteger(t)&&t>0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){const n=e;if(e=n.length,t=n[0].length,typeof t!="number"||t===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<e;i++){if(n[i].length!==t)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=t,this}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){if(xa(this,e),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),xa(this,e,!0),t=Float64Array.from(uf(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){if(Sa(this,e),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let i=0;i<e;i++)n[i]=this.data[t][i];for(let i=e+1;i<this.columns;i++)n[i-1]=this.data[t][i];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){typeof t>"u"&&(t=e,e=this.columns),Sa(this,e,!0),t=cf(this,t);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<e;a++)i[a]=this.data[n][a];for(i[a++]=t[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}cLe(xr,Pt);class qs extends xr{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class kLe extends qs{constructor(e,t){Sa(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class LLe extends qs{constructor(e,t){t=cG(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class ILe extends qs{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class OLe extends qs{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class NLe extends qs{constructor(e,t){xa(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}}class $Le extends qs{constructor(e,t){t=uG(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class R0 extends qs{constructor(e,t,n){let i=lG(e,t,n);super(e,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class DLe extends qs{constructor(e,t,n,i,a){t_(e,t,n,i,a),super(e,n-t+1,a-i+1),this.startRow=t,this.startColumn=i}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class RLe extends qs{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}}class fG extends xr{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let i=this._calculateIndex(e,t);return this.data[i]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class ua extends xr{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function PLe(r,e){if(Array.isArray(r))return r[0]&&Array.isArray(r[0])?new ua(r):new fG(r,e);throw new Error("the argument is not an array")}class Vm{constructor(e){e=ua.checkMatrix(e);let t=e.clone(),n=t.rows,i=t.columns,a=new Float64Array(n),o=1,s,l,u,c,f,h,d,v,p;for(s=0;s<n;s++)a[s]=s;for(v=new Float64Array(n),l=0;l<i;l++){for(s=0;s<n;s++)v[s]=t.get(s,l);for(s=0;s<n;s++){for(p=Math.min(s,l),f=0,u=0;u<p;u++)f+=t.get(s,u)*v[u];v[s]-=f,t.set(s,l,v[s])}for(c=l,s=l+1;s<n;s++)Math.abs(v[s])>Math.abs(v[c])&&(c=s);if(c!==l){for(u=0;u<i;u++)h=t.get(c,u),t.set(c,u,t.get(l,u)),t.set(l,u,h);d=a[c],a[c]=a[l],a[l]=d,o=-o}if(l<n&&t.get(l,l)!==0)for(s=l+1;s<n;s++)t.set(s,l,t.get(s,l)/t.get(l,l))}this.LU=t,this.pivotVector=a,this.pivotSign=o}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=Pt.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),o=t.columns,s,l,u;for(u=0;u<o;u++)for(s=u+1;s<o;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u));for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/t.get(u,u));for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let i=0;i<n;i++)t*=e.get(i,i);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new Pt(t,n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)a>o?i.set(a,o,e.get(a,o)):a===o?i.set(a,o,1):i.set(a,o,0);return i}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new Pt(t,n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)a<=o?i.set(a,o,e.get(a,o)):i.set(a,o,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function As(r,e){let t=0;return Math.abs(r)>Math.abs(e)?(t=e/r,Math.abs(r)*Math.sqrt(1+t*t)):e!==0?(t=r/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class r_{constructor(e){e=ua.checkMatrix(e);let t=e.clone(),n=e.rows,i=e.columns,a=new Float64Array(i),o,s,l,u;for(l=0;l<i;l++){let c=0;for(o=l;o<n;o++)c=As(c,t.get(o,l));if(c!==0){for(t.get(l,l)<0&&(c=-c),o=l;o<n;o++)t.set(o,l,t.get(o,l)/c);for(t.set(l,l,t.get(l,l)+1),s=l+1;s<i;s++){for(u=0,o=l;o<n;o++)u+=t.get(o,l)*t.get(o,s);for(u=-u/t.get(l,l),o=l;o<n;o++)t.set(o,s,t.get(o,s)+u*t.get(o,l))}}a[l]=-c}this.QR=t,this.Rdiag=a}solve(e){e=Pt.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),o=t.columns,s,l,u,c;for(u=0;u<o;u++)for(l=0;l<i;l++){for(c=0,s=u;s<n;s++)c+=t.get(s,u)*a.get(s,l);for(c=-c/t.get(u,u),s=u;s<n;s++)a.set(s,l,a.get(s,l)+c*t.get(s,u))}for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/this.Rdiag[u]);for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u))}return a.subMatrix(0,o-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new Pt(t,t),i,a;for(i=0;i<t;i++)for(a=0;a<t;a++)i<a?n.set(i,a,e.get(i,a)):i===a?n.set(i,a,this.Rdiag[i]):n.set(i,a,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,i=new Pt(t,n),a,o,s,l;for(s=n-1;s>=0;s--){for(a=0;a<t;a++)i.set(a,s,0);for(i.set(s,s,1),o=s;o<n;o++)if(e.get(s,s)!==0){for(l=0,a=s;a<t;a++)l+=e.get(a,s)*i.get(a,o);for(l=-l/e.get(s,s),a=s;a<t;a++)i.set(a,o,i.get(a,o)+l*e.get(a,s))}}return i}}class eh{constructor(e,t={}){e=ua.checkMatrix(e);let n=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=t;let l=!!a,u=!!o,c=!1,f;if(n<i)if(!s)f=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=e.transpose(),n=f.rows,i=f.columns,c=!0;let E=l;l=u,u=E}else f=e.clone();let h=Math.min(n,i),d=Math.min(n+1,i),v=new Float64Array(d),p=new Pt(n,h),g=new Pt(i,i),m=new Float64Array(i),y=new Float64Array(n),w=new Float64Array(d);for(let E=0;E<d;E++)w[E]=E;let b=Math.min(n-1,i),x=Math.max(0,Math.min(i-2,n)),S=Math.max(b,x);for(let E=0;E<S;E++){if(E<b){v[E]=0;for(let T=E;T<n;T++)v[E]=As(v[E],f.get(T,E));if(v[E]!==0){f.get(E,E)<0&&(v[E]=-v[E]);for(let T=E;T<n;T++)f.set(T,E,f.get(T,E)/v[E]);f.set(E,E,f.get(E,E)+1)}v[E]=-v[E]}for(let T=E+1;T<i;T++){if(E<b&&v[E]!==0){let C=0;for(let k=E;k<n;k++)C+=f.get(k,E)*f.get(k,T);C=-C/f.get(E,E);for(let k=E;k<n;k++)f.set(k,T,f.get(k,T)+C*f.get(k,E))}m[T]=f.get(E,T)}if(l&&E<b)for(let T=E;T<n;T++)p.set(T,E,f.get(T,E));if(E<x){m[E]=0;for(let T=E+1;T<i;T++)m[E]=As(m[E],m[T]);if(m[E]!==0){m[E+1]<0&&(m[E]=0-m[E]);for(let T=E+1;T<i;T++)m[T]/=m[E];m[E+1]+=1}if(m[E]=-m[E],E+1<n&&m[E]!==0){for(let T=E+1;T<n;T++)y[T]=0;for(let T=E+1;T<n;T++)for(let C=E+1;C<i;C++)y[T]+=m[C]*f.get(T,C);for(let T=E+1;T<i;T++){let C=-m[T]/m[E+1];for(let k=E+1;k<n;k++)f.set(k,T,f.get(k,T)+C*y[k])}}if(u)for(let T=E+1;T<i;T++)g.set(T,E,m[T])}}let _=Math.min(i,n+1);if(b<i&&(v[b]=f.get(b,b)),n<_&&(v[_-1]=0),x+1<_&&(m[x]=f.get(x,_-1)),m[_-1]=0,l){for(let E=b;E<h;E++){for(let T=0;T<n;T++)p.set(T,E,0);p.set(E,E,1)}for(let E=b-1;E>=0;E--)if(v[E]!==0){for(let T=E+1;T<h;T++){let C=0;for(let k=E;k<n;k++)C+=p.get(k,E)*p.get(k,T);C=-C/p.get(E,E);for(let k=E;k<n;k++)p.set(k,T,p.get(k,T)+C*p.get(k,E))}for(let T=E;T<n;T++)p.set(T,E,-p.get(T,E));p.set(E,E,1+p.get(E,E));for(let T=0;T<E-1;T++)p.set(T,E,0)}else{for(let T=0;T<n;T++)p.set(T,E,0);p.set(E,E,1)}}if(u)for(let E=i-1;E>=0;E--){if(E<x&&m[E]!==0)for(let T=E+1;T<i;T++){let C=0;for(let k=E+1;k<i;k++)C+=g.get(k,E)*g.get(k,T);C=-C/g.get(E+1,E);for(let k=E+1;k<i;k++)g.set(k,T,g.get(k,T)+C*g.get(k,E))}for(let T=0;T<i;T++)g.set(T,E,0);g.set(E,E,1)}let M=_-1,A=Number.EPSILON;for(;_>0;){let E,T;for(E=_-2;E>=-1&&E!==-1;E--){const C=Number.MIN_VALUE+A*Math.abs(v[E]+Math.abs(v[E+1]));if(Math.abs(m[E])<=C||Number.isNaN(m[E])){m[E]=0;break}}if(E===_-2)T=4;else{let C;for(C=_-1;C>=E&&C!==E;C--){let k=(C!==_?Math.abs(m[C]):0)+(C!==E+1?Math.abs(m[C-1]):0);if(Math.abs(v[C])<=A*k){v[C]=0;break}}C===E?T=3:C===_-1?T=1:(T=2,E=C)}switch(E++,T){case 1:{let C=m[_-2];m[_-2]=0;for(let k=_-2;k>=E;k--){let L=As(v[k],C),I=v[k]/L,O=C/L;if(v[k]=L,k!==E&&(C=-O*m[k-1],m[k-1]=I*m[k-1]),u)for(let N=0;N<i;N++)L=I*g.get(N,k)+O*g.get(N,_-1),g.set(N,_-1,-O*g.get(N,k)+I*g.get(N,_-1)),g.set(N,k,L)}break}case 2:{let C=m[E-1];m[E-1]=0;for(let k=E;k<_;k++){let L=As(v[k],C),I=v[k]/L,O=C/L;if(v[k]=L,C=-O*m[k],m[k]=I*m[k],l)for(let N=0;N<n;N++)L=I*p.get(N,k)+O*p.get(N,E-1),p.set(N,E-1,-O*p.get(N,k)+I*p.get(N,E-1)),p.set(N,k,L)}break}case 3:{const C=Math.max(Math.abs(v[_-1]),Math.abs(v[_-2]),Math.abs(m[_-2]),Math.abs(v[E]),Math.abs(m[E])),k=v[_-1]/C,L=v[_-2]/C,I=m[_-2]/C,O=v[E]/C,N=m[E]/C,D=((L+k)*(L-k)+I*I)/2,$=k*I*(k*I);let R=0;(D!==0||$!==0)&&(D<0?R=0-Math.sqrt(D*D+$):R=Math.sqrt(D*D+$),R=$/(D+R));let B=(O+k)*(O-k)+R,j=O*N;for(let G=E;G<_-1;G++){let z=As(B,j);z===0&&(z=Number.MIN_VALUE);let W=B/z,Q=j/z;if(G!==E&&(m[G-1]=z),B=W*v[G]+Q*m[G],m[G]=W*m[G]-Q*v[G],j=Q*v[G+1],v[G+1]=W*v[G+1],u)for(let ie=0;ie<i;ie++)z=W*g.get(ie,G)+Q*g.get(ie,G+1),g.set(ie,G+1,-Q*g.get(ie,G)+W*g.get(ie,G+1)),g.set(ie,G,z);if(z=As(B,j),z===0&&(z=Number.MIN_VALUE),W=B/z,Q=j/z,v[G]=z,B=W*m[G]+Q*v[G+1],v[G+1]=-Q*m[G]+W*v[G+1],j=Q*m[G+1],m[G+1]=W*m[G+1],l&&G<n-1)for(let ie=0;ie<n;ie++)z=W*p.get(ie,G)+Q*p.get(ie,G+1),p.set(ie,G+1,-Q*p.get(ie,G)+W*p.get(ie,G+1)),p.set(ie,G,z)}m[_-2]=B;break}case 4:{if(v[E]<=0&&(v[E]=v[E]<0?-v[E]:0,u))for(let C=0;C<=M;C++)g.set(C,E,-g.get(C,E));for(;E<M&&!(v[E]>=v[E+1]);){let C=v[E];if(v[E]=v[E+1],v[E+1]=C,u&&E<i-1)for(let k=0;k<i;k++)C=g.get(k,E+1),g.set(k,E+1,g.get(k,E)),g.set(k,E,C);if(l&&E<n-1)for(let k=0;k<n;k++)C=p.get(k,E+1),p.set(k,E+1,p.get(k,E)),p.set(k,E,C);E++}_--;break}}}if(c){let E=g;g=p,p=E}this.m=n,this.n=i,this.s=v,this.U=p,this.V=g}solve(e){let t=e,n=this.threshold,i=this.s.length,a=Pt.zeros(i,i);for(let h=0;h<i;h++)Math.abs(this.s[h])<=n?a.set(h,h,0):a.set(h,h,1/this.s[h]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,c=o.rows,f=Pt.zeros(u,c);for(let h=0;h<u;h++)for(let d=0;d<c;d++){let v=0;for(let p=0;p<i;p++)v+=l.get(h,p)*o.get(d,p);f.set(h,d,v)}return f.mmul(t)}solveForDiagonal(e){return this.solve(Pt.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,i=e.columns,a=new Pt(n,this.s.length);for(let c=0;c<n;c++)for(let f=0;f<i;f++)Math.abs(this.s[f])>t&&a.set(c,f,e.get(c,f)/this.s[f]);let o=this.U,s=o.rows,l=o.columns,u=new Pt(n,s);for(let c=0;c<n;c++)for(let f=0;f<s;f++){let h=0;for(let d=0;d<l;d++)h+=a.get(c,d)*o.get(f,d);u.set(c,f,h)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Pt.diag(this.s)}}function FLe(r,e=!1){return r=ua.checkMatrix(r),e?new eh(r).inverse():hG(r,Pt.eye(r.rows))}function hG(r,e,t=!1){return r=ua.checkMatrix(r),e=ua.checkMatrix(e),t?new eh(r).solve(e):r.isSquare()?new Vm(r).solve(e):new r_(r).solve(e)}function P0(r){if(r=Pt.checkMatrix(r),r.isSquare()){let e,t,n,i;if(r.columns===2)return e=r.get(0,0),t=r.get(0,1),n=r.get(1,0),i=r.get(1,1),e*i-t*n;if(r.columns===3){let a,o,s;return a=new R0(r,[1,2],[1,2]),o=new R0(r,[1,2],[0,2]),s=new R0(r,[1,2],[0,1]),e=r.get(0,0),t=r.get(0,1),n=r.get(0,2),e*P0(a)-t*P0(o)+n*P0(s)}else return new Vm(r).determinant}else throw Error("determinant can only be calculated for a square matrix")}function BLe(r,e){let t=[];for(let n=0;n<r;n++)n!==e&&t.push(n);return t}function zLe(r,e,t,n=1e-9,i=1e-9){if(r>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(t,[0]);for(let o=0;o<a.rows;o++)Math.abs(a.get(o,0))<n&&a.set(o,0,0);return a.to1DArray()}}function GLe(r,e={}){const{thresholdValue:t=1e-9,thresholdError:n=1e-9}=e;r=Pt.checkMatrix(r);let i=r.rows,a=new Pt(i,i);for(let o=0;o<i;o++){let s=Pt.columnVector(r.getRow(o)),l=r.subMatrixRow(BLe(i,o)).transpose(),c=new eh(l).solve(s),f=Pt.sub(s,l.mmul(c)).abs().max();a.setRow(o,zLe(f,c,o,t,n))}return a}function jLe(r,e=Number.EPSILON){r=Pt.checkMatrix(r);let t=new eh(r,{autoTranspose:!0}),n=t.leftSingularVectors,i=t.rightSingularVectors,a=t.diagonal;for(let o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(Pt.diag(a).mmul(n.transpose()))}function ULe(r,e=r,t={}){r=new Pt(r);let n=!1;if(typeof e=="object"&&!Pt.isMatrix(e)&&!Array.isArray(e)?(t=e,e=r,n=!0):e=new Pt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=t;i&&(r=r.center("column"),n||(e=e.center("column")));const a=r.transpose().mmul(e);for(let o=0;o<a.rows;o++)for(let s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(r.rows-1)));return a}function WLe(r,e=r,t={}){r=new Pt(r);let n=!1;if(typeof e=="object"&&!Pt.isMatrix(e)&&!Array.isArray(e)?(t=e,e=r,n=!0):e=new Pt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=t;i&&(r.center("column"),n||e.center("column")),a&&(r.scale("column"),n||e.scale("column"));const o=r.standardDeviation("column",{unbiased:!0}),s=n?o:e.standardDeviation("column",{unbiased:!0}),l=r.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let c=0;c<l.columns;c++)l.set(u,c,l.get(u,c)*(1/(o[u]*s[c]))*(1/(r.rows-1)));return l}class b${constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(e=ua.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");let i=e.columns,a=new Pt(i,i),o=new Float64Array(i),s=new Float64Array(i),l=e,u,c,f=!1;if(n?f=!0:f=e.isSymmetric(),f){for(u=0;u<i;u++)for(c=0;c<i;c++)a.set(u,c,l.get(u,c));HLe(i,s,o,a),VLe(i,s,o,a)}else{let h=new Pt(i,i),d=new Float64Array(i);for(c=0;c<i;c++)for(u=0;u<i;u++)h.set(u,c,l.get(u,c));YLe(i,h,d,a),XLe(i,s,o,a,h)}this.n=i,this.e=s,this.d=o,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,i=new Pt(e,e),a,o;for(a=0;a<e;a++){for(o=0;o<e;o++)i.set(a,o,0);i.set(a,a,n[a]),t[a]>0?i.set(a,a+1,t[a]):t[a]<0&&i.set(a,a-1,t[a])}return i}}function HLe(r,e,t,n){let i,a,o,s,l,u,c,f;for(l=0;l<r;l++)t[l]=n.get(r-1,l);for(s=r-1;s>0;s--){for(f=0,o=0,u=0;u<s;u++)f=f+Math.abs(t[u]);if(f===0)for(e[s]=t[s-1],l=0;l<s;l++)t[l]=n.get(s-1,l),n.set(s,l,0),n.set(l,s,0);else{for(u=0;u<s;u++)t[u]/=f,o+=t[u]*t[u];for(i=t[s-1],a=Math.sqrt(o),i>0&&(a=-a),e[s]=f*a,o=o-i*a,t[s-1]=i-a,l=0;l<s;l++)e[l]=0;for(l=0;l<s;l++){for(i=t[l],n.set(l,s,i),a=e[l]+n.get(l,l)*i,u=l+1;u<=s-1;u++)a+=n.get(u,l)*t[u],e[u]+=n.get(u,l)*i;e[l]=a}for(i=0,l=0;l<s;l++)e[l]/=o,i+=e[l]*t[l];for(c=i/(o+o),l=0;l<s;l++)e[l]-=c*t[l];for(l=0;l<s;l++){for(i=t[l],a=e[l],u=l;u<=s-1;u++)n.set(u,l,n.get(u,l)-(i*e[u]+a*t[u]));t[l]=n.get(s-1,l),n.set(s,l,0)}}t[s]=o}for(s=0;s<r-1;s++){if(n.set(r-1,s,n.get(s,s)),n.set(s,s,1),o=t[s+1],o!==0){for(u=0;u<=s;u++)t[u]=n.get(u,s+1)/o;for(l=0;l<=s;l++){for(a=0,u=0;u<=s;u++)a+=n.get(u,s+1)*n.get(u,l);for(u=0;u<=s;u++)n.set(u,l,n.get(u,l)-a*t[u])}}for(u=0;u<=s;u++)n.set(u,s+1,0)}for(l=0;l<r;l++)t[l]=n.get(r-1,l),n.set(r-1,l,0);n.set(r-1,r-1,1),e[0]=0}function VLe(r,e,t,n){let i,a,o,s,l,u,c,f,h,d,v,p,g,m,y,w;for(o=1;o<r;o++)e[o-1]=e[o];e[r-1]=0;let b=0,x=0,S=Number.EPSILON;for(u=0;u<r;u++){for(x=Math.max(x,Math.abs(t[u])+Math.abs(e[u])),c=u;c<r&&!(Math.abs(e[c])<=S*x);)c++;if(c>u)do{for(i=t[u],f=(t[u+1]-i)/(2*e[u]),h=As(f,1),f<0&&(h=-h),t[u]=e[u]/(f+h),t[u+1]=e[u]*(f+h),d=t[u+1],a=i-t[u],o=u+2;o<r;o++)t[o]-=a;for(b=b+a,f=t[c],v=1,p=v,g=v,m=e[u+1],y=0,w=0,o=c-1;o>=u;o--)for(g=p,p=v,w=y,i=v*e[o],a=v*f,h=As(f,e[o]),e[o+1]=y*h,y=e[o]/h,v=f/h,f=v*t[o]-y*i,t[o+1]=a+y*(v*i+y*t[o]),l=0;l<r;l++)a=n.get(l,o+1),n.set(l,o+1,y*n.get(l,o)+v*a),n.set(l,o,v*n.get(l,o)-y*a);f=-y*w*g*m*e[u]/d,e[u]=y*f,t[u]=v*f}while(Math.abs(e[u])>S*x);t[u]=t[u]+b,e[u]=0}for(o=0;o<r-1;o++){for(l=o,f=t[o],s=o+1;s<r;s++)t[s]<f&&(l=s,f=t[s]);if(l!==o)for(t[l]=t[o],t[o]=f,s=0;s<r;s++)f=n.get(s,o),n.set(s,o,n.get(s,l)),n.set(s,l,f)}}function YLe(r,e,t,n){let i=0,a=r-1,o,s,l,u,c,f,h;for(f=i+1;f<=a-1;f++){for(h=0,u=f;u<=a;u++)h=h+Math.abs(e.get(u,f-1));if(h!==0){for(l=0,u=a;u>=f;u--)t[u]=e.get(u,f-1)/h,l+=t[u]*t[u];for(s=Math.sqrt(l),t[f]>0&&(s=-s),l=l-t[f]*s,t[f]=t[f]-s,c=f;c<r;c++){for(o=0,u=a;u>=f;u--)o+=t[u]*e.get(u,c);for(o=o/l,u=f;u<=a;u++)e.set(u,c,e.get(u,c)-o*t[u])}for(u=0;u<=a;u++){for(o=0,c=a;c>=f;c--)o+=t[c]*e.get(u,c);for(o=o/l,c=f;c<=a;c++)e.set(u,c,e.get(u,c)-o*t[c])}t[f]=h*t[f],e.set(f,f-1,h*s)}}for(u=0;u<r;u++)for(c=0;c<r;c++)n.set(u,c,u===c?1:0);for(f=a-1;f>=i+1;f--)if(e.get(f,f-1)!==0){for(u=f+1;u<=a;u++)t[u]=e.get(u,f-1);for(c=f;c<=a;c++){for(s=0,u=f;u<=a;u++)s+=t[u]*n.get(u,c);for(s=s/t[f]/e.get(f,f-1),u=f;u<=a;u++)n.set(u,c,n.get(u,c)+s*t[u])}}}function XLe(r,e,t,n,i){let a=r-1,o=0,s=r-1,l=Number.EPSILON,u=0,c=0,f=0,h=0,d=0,v=0,p=0,g=0,m,y,w,b,x,S,_,M,A,E,T,C,k,L,I;for(m=0;m<r;m++)for((m<o||m>s)&&(t[m]=i.get(m,m),e[m]=0),y=Math.max(m-1,0);y<r;y++)c=c+Math.abs(i.get(m,y));for(;a>=o;){for(b=a;b>o&&(v=Math.abs(i.get(b-1,b-1))+Math.abs(i.get(b,b)),v===0&&(v=c),!(Math.abs(i.get(b,b-1))<l*v));)b--;if(b===a)i.set(a,a,i.get(a,a)+u),t[a]=i.get(a,a),e[a]=0,a--,g=0;else if(b===a-1){if(_=i.get(a,a-1)*i.get(a-1,a),f=(i.get(a-1,a-1)-i.get(a,a))/2,h=f*f+_,p=Math.sqrt(Math.abs(h)),i.set(a,a,i.get(a,a)+u),i.set(a-1,a-1,i.get(a-1,a-1)+u),M=i.get(a,a),h>=0){for(p=f>=0?f+p:f-p,t[a-1]=M+p,t[a]=t[a-1],p!==0&&(t[a]=M-_/p),e[a-1]=0,e[a]=0,M=i.get(a,a-1),v=Math.abs(M)+Math.abs(p),f=M/v,h=p/v,d=Math.sqrt(f*f+h*h),f=f/d,h=h/d,y=a-1;y<r;y++)p=i.get(a-1,y),i.set(a-1,y,h*p+f*i.get(a,y)),i.set(a,y,h*i.get(a,y)-f*p);for(m=0;m<=a;m++)p=i.get(m,a-1),i.set(m,a-1,h*p+f*i.get(m,a)),i.set(m,a,h*i.get(m,a)-f*p);for(m=o;m<=s;m++)p=n.get(m,a-1),n.set(m,a-1,h*p+f*n.get(m,a)),n.set(m,a,h*n.get(m,a)-f*p)}else t[a-1]=M+f,t[a]=M+f,e[a-1]=p,e[a]=-p;a=a-2,g=0}else{if(M=i.get(a,a),A=0,_=0,b<a&&(A=i.get(a-1,a-1),_=i.get(a,a-1)*i.get(a-1,a)),g===10){for(u+=M,m=o;m<=a;m++)i.set(m,m,i.get(m,m)-M);v=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),M=A=.75*v,_=-.4375*v*v}if(g===30&&(v=(A-M)/2,v=v*v+_,v>0)){for(v=Math.sqrt(v),A<M&&(v=-v),v=M-_/((A-M)/2+v),m=o;m<=a;m++)i.set(m,m,i.get(m,m)-v);u+=v,M=A=_=.964}for(g=g+1,x=a-2;x>=b&&(p=i.get(x,x),d=M-p,v=A-p,f=(d*v-_)/i.get(x+1,x)+i.get(x,x+1),h=i.get(x+1,x+1)-p-d-v,d=i.get(x+2,x+1),v=Math.abs(f)+Math.abs(h)+Math.abs(d),f=f/v,h=h/v,d=d/v,!(x===b||Math.abs(i.get(x,x-1))*(Math.abs(h)+Math.abs(d))<l*(Math.abs(f)*(Math.abs(i.get(x-1,x-1))+Math.abs(p)+Math.abs(i.get(x+1,x+1))))));)x--;for(m=x+2;m<=a;m++)i.set(m,m-2,0),m>x+2&&i.set(m,m-3,0);for(w=x;w<=a-1&&(L=w!==a-1,w!==x&&(f=i.get(w,w-1),h=i.get(w+1,w-1),d=L?i.get(w+2,w-1):0,M=Math.abs(f)+Math.abs(h)+Math.abs(d),M!==0&&(f=f/M,h=h/M,d=d/M)),M!==0);w++)if(v=Math.sqrt(f*f+h*h+d*d),f<0&&(v=-v),v!==0){for(w!==x?i.set(w,w-1,-v*M):b!==x&&i.set(w,w-1,-i.get(w,w-1)),f=f+v,M=f/v,A=h/v,p=d/v,h=h/f,d=d/f,y=w;y<r;y++)f=i.get(w,y)+h*i.get(w+1,y),L&&(f=f+d*i.get(w+2,y),i.set(w+2,y,i.get(w+2,y)-f*p)),i.set(w,y,i.get(w,y)-f*M),i.set(w+1,y,i.get(w+1,y)-f*A);for(m=0;m<=Math.min(a,w+3);m++)f=M*i.get(m,w)+A*i.get(m,w+1),L&&(f=f+p*i.get(m,w+2),i.set(m,w+2,i.get(m,w+2)-f*d)),i.set(m,w,i.get(m,w)-f),i.set(m,w+1,i.get(m,w+1)-f*h);for(m=o;m<=s;m++)f=M*n.get(m,w)+A*n.get(m,w+1),L&&(f=f+p*n.get(m,w+2),n.set(m,w+2,n.get(m,w+2)-f*d)),n.set(m,w,n.get(m,w)-f),n.set(m,w+1,n.get(m,w+1)-f*h)}}}if(c!==0){for(a=r-1;a>=0;a--)if(f=t[a],h=e[a],h===0)for(b=a,i.set(a,a,1),m=a-1;m>=0;m--){for(_=i.get(m,m)-f,d=0,y=b;y<=a;y++)d=d+i.get(m,y)*i.get(y,a);if(e[m]<0)p=_,v=d;else if(b=m,e[m]===0?i.set(m,a,_!==0?-d/_:-d/(l*c)):(M=i.get(m,m+1),A=i.get(m+1,m),h=(t[m]-f)*(t[m]-f)+e[m]*e[m],S=(M*v-p*d)/h,i.set(m,a,S),i.set(m+1,a,Math.abs(M)>Math.abs(p)?(-d-_*S)/M:(-v-A*S)/p)),S=Math.abs(i.get(m,a)),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a,i.get(y,a)/S)}else if(h<0)for(b=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,h/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-f)/i.get(a,a-1))):(I=Yg(0,-i.get(a-1,a),i.get(a-1,a-1)-f,h),i.set(a-1,a-1,I[0]),i.set(a-1,a,I[1])),i.set(a,a-1,0),i.set(a,a,1),m=a-2;m>=0;m--){for(E=0,T=0,y=b;y<=a;y++)E=E+i.get(m,y)*i.get(y,a-1),T=T+i.get(m,y)*i.get(y,a);if(_=i.get(m,m)-f,e[m]<0)p=_,d=E,v=T;else if(b=m,e[m]===0?(I=Yg(-E,-T,_,h),i.set(m,a-1,I[0]),i.set(m,a,I[1])):(M=i.get(m,m+1),A=i.get(m+1,m),C=(t[m]-f)*(t[m]-f)+e[m]*e[m]-h*h,k=(t[m]-f)*2*h,C===0&&k===0&&(C=l*c*(Math.abs(_)+Math.abs(h)+Math.abs(M)+Math.abs(A)+Math.abs(p))),I=Yg(M*d-p*E+h*T,M*v-p*T-h*E,C,k),i.set(m,a-1,I[0]),i.set(m,a,I[1]),Math.abs(M)>Math.abs(p)+Math.abs(h)?(i.set(m+1,a-1,(-E-_*i.get(m,a-1)+h*i.get(m,a))/M),i.set(m+1,a,(-T-_*i.get(m,a)-h*i.get(m,a-1))/M)):(I=Yg(-d-A*i.get(m,a-1),-v-A*i.get(m,a),p,h),i.set(m+1,a-1,I[0]),i.set(m+1,a,I[1]))),S=Math.max(Math.abs(i.get(m,a-1)),Math.abs(i.get(m,a))),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a-1,i.get(y,a-1)/S),i.set(y,a,i.get(y,a)/S)}for(m=0;m<r;m++)if(m<o||m>s)for(y=m;y<r;y++)n.set(m,y,i.get(m,y));for(y=r-1;y>=o;y--)for(m=o;m<=s;m++){for(p=0,w=o;w<=Math.min(y,s);w++)p=p+n.get(m,w)*i.get(w,y);n.set(m,y,p)}}}function Yg(r,e,t,n){let i,a;return Math.abs(t)>Math.abs(n)?(i=n/t,a=t+i*n,[(r+i*e)/a,(e-i*r)/a]):(i=t/n,a=n+i*t,[(i*r+e)/a,(i*e-r)/a])}class w${constructor(e){if(e=ua.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,n=t.rows,i=new Pt(n,n),a=!0,o,s,l;for(s=0;s<n;s++){let u=0;for(l=0;l<s;l++){let c=0;for(o=0;o<l;o++)c+=i.get(l,o)*i.get(s,o);c=(t.get(s,l)-c)/i.get(l,l),i.set(s,l,c),u=u+c*c}for(u=t.get(s,s)-u,a&=u>0,i.set(s,s,Math.sqrt(Math.max(u,0))),l=s+1;l<n;l++)i.set(s,l,0)}this.L=i,this.positiveDefinite=!!a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=ua.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),o,s,l;for(l=0;l<n;l++)for(s=0;s<i;s++){for(o=0;o<l;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*t.get(l,o));a.set(l,s,a.get(l,s)/t.get(l,l))}for(l=n-1;l>=0;l--)for(s=0;s<i;s++){for(o=l+1;o<n;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*t.get(o,l));a.set(l,s,a.get(l,s)/t.get(l,l))}return a}get lowerTriangularMatrix(){return this.L}}class x${constructor(e,t={}){e=ua.checkMatrix(e);let{Y:n}=t;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=t;let s;if(n){if(Array.isArray(n)&&typeof n[0]=="number"?n=Pt.columnVector(n):n=ua.checkMatrix(n),!n.isColumnVector()||n.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");s=n}else s=e.getColumnVector(0);let l=1,u,c,f,h;for(let d=0;d<a&&l>o;d++)f=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),f=f.div(f.norm()),u=e.mmul(f).div(f.transpose().mmul(f).get(0,0)),d>0&&(l=u.clone().sub(h).pow(2).sum()),h=u.clone(),n?(c=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),s=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=u;if(n){let d=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));d=d.div(d.norm());let v=e.clone().sub(u.clone().mmul(d.transpose())),p=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),g=n.clone().sub(u.clone().mulS(p.get(0,0)).mmul(c.transpose()));this.t=u,this.p=d.transpose(),this.w=f.transpose(),this.q=c,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=v,this.yResidual=g,this.betas=p}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),i?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(f.transpose()))}}const KLe=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:xr,CHO:w$,CholeskyDecomposition:w$,EVD:b$,EigenvalueDecomposition:b$,LU:Vm,LuDecomposition:Vm,Matrix:Pt,MatrixColumnSelectionView:LLe,MatrixColumnView:kLe,MatrixFlipColumnView:ILe,MatrixFlipRowView:OLe,MatrixRowSelectionView:$Le,MatrixRowView:NLe,MatrixSelectionView:R0,MatrixSubView:DLe,MatrixTransposeView:RLe,NIPALS:x$,Nipals:x$,QR:r_,QrDecomposition:r_,SVD:eh,SingularValueDecomposition:eh,WrapperMatrix1D:fG,WrapperMatrix2D:ua,correlation:WLe,covariance:ULe,default:Pt,determinant:P0,inverse:FLe,linearDependencies:GLe,pseudoInverse:jLe,solve:hG,wrap:PLe},Symbol.toStringTag,{value:"Module"})),dG=rs(KLe);Object.defineProperty(PM,"__esModule",{value:!0});var Xh=dG,qLe=function(){function r(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return r.prototype.layout=function(){var e=this,t=e.dimension,n=e.distances,i=e.linkDistance;try{var a=Xh.Matrix.mul(Xh.Matrix.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Xh.SingularValueDecomposition(a),c=Xh.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(p){return Xh.Matrix.mul([p],[c]).toJSON()[0].splice(0,t)})}catch{for(var f=[],h=0;h<n.length;h++){var d=Math.random()*i,v=Math.random()*i;f.push([d,v])}return f}},r}();PM.default=qLe;var FM={};Object.defineProperty(FM,"__esModule",{value:!0});var ZLe=800,QLe=function(){function r(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return r.prototype.layout=function(){var e=this,t=e.positions,n=[],i=e.iterations,a=e.width/10;e.maxDisplace=a,e.disp=n;for(var o=0;o<i;o++)t.forEach(function(s,l){n[l]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return t},r.prototype.getRepulsion=function(){var e=this,t=e.positions,n=e.nodes,i=e.disp,a=e.k,o=e.radii||[];t.forEach(function(s,l){i[l]={x:0,y:0},t.forEach(function(u,c){if(l!==c&&o[l]===o[c]){var f=s[0]-u[0],h=s[1]-u[1],d=Math.sqrt(f*f+h*h);if(d===0){d=1;var v=l>c?1:-1;f=.01*v,h=.01*v}if(d<e.nodeSizeFunc(n[l])/2+e.nodeSizeFunc(n[c])/2){var p=a*a/d;i[l].x+=f/d*p,i[l].y+=h/d*p}}})})},r.prototype.updatePositions=function(){var e=this,t=e.positions,n=e.disp,i=e.speed,a=e.strictRadial,o=e.focusID,s=e.maxDisplace||e.width/10;a&&n.forEach(function(u,c){var f=t[c][0]-t[o][0],h=t[c][1]-t[o][1],d=Math.sqrt(f*f+h*h),v=h/d,p=-f/d,g=Math.sqrt(u.x*u.x+u.y*u.y),m=Math.acos((v*u.x+p*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,v*=-1,p*=-1);var y=Math.cos(m)*g;u.x=v*y,u.y=p*y});var l=e.radii;t.forEach(function(u,c){if(c!==o){var f=Math.sqrt(n[c].x*n[c].x+n[c].y*n[c].y);if(f>0&&c!==o){var h=Math.min(s*(i/ZLe),f);if(u[0]+=n[c].x/f*h,u[1]+=n[c].y/f*h,a){var d=u[0]-t[o][0],v=u[1]-t[o][1],p=Math.sqrt(d*d+v*v);d=d/p*l[c],v=v/p*l[c],u[0]=t[o][0]+d,u[1]=t[o][1]+v}}}})},r}();FM.default=QLe;var JLe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vG=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_1,"__esModule",{value:!0});_1.RadialLayout=void 0;var ma=vn(),eIe=_n,tIe=vG(PM),rIe=vG(FM);function nIe(r){for(var e=r.length,t=r[0].length,n=[],i=0;i<e;i++){for(var a=[],o=0;o<t;o++)r[i][o]!==0?a.push(1/(r[i][o]*r[i][o])):a.push(0);n.push(a)}return n}function iIe(r,e){var t=-1;return r.forEach(function(n,i){n.id===e&&(t=i)}),t}function S$(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}var aIe=function(r){JLe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var a=t.center;if(n.length===1){n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}var o=t.linkDistance,s=null;if((0,ma.isString)(t.focusNode)){for(var l=!1,u=0;u<n.length;u++)n[u].id===t.focusNode&&(s=n[u],t.focusNode=s,l=!0,u=n.length);l||(s=null)}else s=t.focusNode;s||(s=n[0],t.focusNode=s);var c=iIe(n,s.id);c<0&&(c=0),t.focusIndex=c;var f=(0,ma.getAdjMatrix)({nodes:n,edges:i},!1),h=(0,ma.floydWarshall)(f),d=t.maxToFocus(h,c);t.handleInfinity(h,c,d+1),t.distances=h;var v=h[c],p=t.width||500,g=t.height||500,m=p-a[0]>a[0]?a[0]:p-a[0],y=g-a[1]>a[1]?a[1]:g-a[1];m===0&&(m=p/2),y===0&&(y=g/2);var w=y>m?m:y,b=Math.max.apply(Math,v),x=[];v.forEach(function(D,$){t.unitRadius||(t.unitRadius=w/b),x[$]=D*t.unitRadius}),t.radii=x;var S=t.eIdealDisMatrix();t.eIdealDistances=S;var _=nIe(S);t.weights=_;var M=new tIe.default({linkDistance:o,distances:S}),A=M.layout();A.forEach(function(D){(0,ma.isNaN)(D[0])&&(D[0]=Math.random()*o),(0,ma.isNaN)(D[1])&&(D[1]=Math.random()*o)}),t.positions=A,A.forEach(function(D,$){n[$].x=D[0]+a[0],n[$].y=D[1]+a[1]}),A.forEach(function(D){D[0]-=A[c][0],D[1]-=A[c][1]}),t.run();var E=t.preventOverlap,T=t.nodeSize,C,k=t.strictRadial;if(E){var L=t.nodeSpacing,I;(0,ma.isNumber)(L)?I=function(){return L}:(0,ma.isFunction)(L)?I=L:I=function(){return 0},T?(0,ma.isArray)(T)?C=function(D){var $=T[0]>T[1]?T[0]:T[1];return $+I(D)}:C=function(D){return T+I(D)}:C=function(D){if(D.size){if((0,ma.isArray)(D.size)){var $=D.size[0]>D.size[1]?D.size[0]:D.size[1];return $+I(D)}if((0,ma.isObject)(D.size)){var $=D.size.width>D.size.height?D.size.width:D.size.height;return $+I(D)}return D.size+I(D)}return 10+I(D)};var O={nodes:n,nodeSizeFunc:C,adjMatrix:f,positions:A,radii:x,height:g,width:p,strictRadial:k,focusID:c,iterations:t.maxPreventOverlapIteration||200,k:A.length/4.5},N=new rIe.default(O);A=N.layout()}return A.forEach(function(D,$){n[$].x=D[0]+a[0],n[$].y=D[1]+a[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}},e.prototype.run=function(){for(var t=this,n=t.maxIteration,i=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],s=t.radii||[],l=0;l<=n;l++){var u=l/n;t.oneIteration(u,i,s,o,a)}},e.prototype.oneIteration=function(t,n,i,a,o){var s=this,l=1-t,u=s.focusIndex;n.forEach(function(c,f){var h=S$(c,[0,0]),d=h===0?0:1/h;if(f!==u){var v=0,p=0,g=0;n.forEach(function(y,w){if(f!==w){var b=S$(c,y),x=b===0?0:1/b,S=a[w][f];g+=o[f][w],v+=o[f][w]*(y[0]+S*(c[0]-y[0])*x),p+=o[f][w]*(y[1]+S*(c[1]-y[1])*x)}});var m=i[f]===0?0:1/i[f];g*=l,g+=t*m*m,v*=l,v+=t*m*c[0]*d,c[0]=v/g,p*=l,p+=t*m*c[1]*d,c[1]=p/g}})},e.prototype.eIdealDisMatrix=function(){var t=this,n=t.nodes;if(!n)return[];var i=t.distances,a=t.linkDistance,o=t.radii||[],s=t.unitRadius||50,l=[];return i&&i.forEach(function(u,c){var f=[];u.forEach(function(h,d){if(c===d)f.push(0);else if(o[c]===o[d])if(t.sortBy==="data")f.push(h*(Math.abs(c-d)*t.sortStrength)/(o[c]/s));else if(t.sortBy){var v=n[c][t.sortBy]||0,p=n[d][t.sortBy]||0;(0,ma.isString)(v)&&(v=v.charCodeAt(0)),(0,ma.isString)(p)&&(p=p.charCodeAt(0)),f.push(h*(Math.abs(v-p)*t.sortStrength)/(o[c]/s))}else f.push(h*a/(o[c]/s));else{var g=(a+s)/2;f.push(h*g)}}),l.push(f)}),l},e.prototype.handleInfinity=function(t,n,i){for(var a=t.length,o=0;o<a;o++)if(t[n][o]===1/0){t[n][o]=i,t[o][n]=i;for(var s=0;s<a;s++)t[o][s]!==1/0&&t[n][s]===1/0&&(t[n][s]=i+t[o][s],t[s][n]=i+t[o][s])}for(var o=0;o<a;o++)if(o!==n){for(var s=0;s<a;s++)if(t[o][s]===1/0){var l=Math.abs(t[n][o]-t[n][s]);l=l===0?1:l,t[o][s]=l}}},e.prototype.maxToFocus=function(t,n){for(var i=0,a=0;a<t[n].length;a++)t[n][a]!==1/0&&(i=t[n][a]>i?t[n][a]:i);return i},e.prototype.getType=function(){return"radial"},e}(eIe.Base);_1.RadialLayout=aIe;(function(r){var e=ze&&ze.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ze&&ze.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(_1,r)})(RM);var up={},oIe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(up,"__esModule",{value:!0});up.ConcentricLayout=void 0;var _o=vn(),sIe=_n,lIe=function(r){oIe(e,r);function e(t){var n=r.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=3/2*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,n,i=this,a=i.nodes,o=i.edges,s=a.length;if(s===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var l=i.center;if(s===1){a[0].x=l[0],a[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var u=i.nodeSize,c=i.nodeSpacing,f=[],h,d=0;(0,_o.isArray)(u)?h=Math.max(u[0],u[1]):h=u,(0,_o.isArray)(c)?d=Math.max(c[0],c[1]):(0,_o.isNumber)(c)&&(d=c),a.forEach(function(k){f.push(k);var L=h;(0,_o.isArray)(k.size)?L=Math.max(k.size[0],k.size[1]):(0,_o.isNumber)(k.size)?L=k.size:(0,_o.isObject)(k.size)&&(L=Math.max(k.size.width,k.size.height)),h=Math.max(h,L),(0,_o.isFunction)(c)&&(d=Math.max(c(k),d))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;var v={},p={};if(f.forEach(function(k,L){v[k.id]=k,p[k.id]=L}),(i.sortBy==="degree"||!(0,_o.isString)(i.sortBy)||f[0][i.sortBy]===void 0)&&(i.sortBy="degree",!(0,_o.isNumber)(a[0].degree))){var g=(0,_o.getDegree)(a.length,p,o);f.forEach(function(k,L){k.degree=g[L].all})}f.sort(function(k,L){return L[i.sortBy]-k[i.sortBy]}),i.maxValueNode=f[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;var m=[[]],y=m[0];f.forEach(function(k){if(y.length>0){var L=Math.abs(y[0][i.sortBy]-k[i.sortBy]);i.maxLevelDiff&&L>=i.maxLevelDiff&&(y=[],m.push(y))}y.push(k)});var w=h+(d||i.minNodeSpacing);if(!i.preventOverlap){var b=m.length>0&&m[0].length>1,x=Math.min(i.width,i.height)/2-w,S=x/(m.length+(b?1:0));w=Math.min(w,S)}var _=0;if(m.forEach(function(k){var L=i.sweep;L===void 0&&(L=2*Math.PI-2*Math.PI/k.length);var I=k.dTheta=L/Math.max(1,k.length-1);if(k.length>1&&i.preventOverlap){var O=Math.cos(I)-Math.cos(0),N=Math.sin(I)-Math.sin(0),D=Math.sqrt(w*w/(O*O+N*N));_=Math.max(D,_)}k.r=_,_+=w}),i.equidistant){for(var M=0,A=0,E=0;E<m.length;E++){var T=m[E],C=T.r-A;M=Math.max(M,C)}A=0,m.forEach(function(k,L){L===0&&(A=k.r),k.r=A,A+=M})}return m.forEach(function(k){var L=k.dTheta,I=k.r;k.forEach(function(O,N){var D=i.startAngle+(i.clockwise?1:-1)*L*N;O.x=l[0]+I*Math.cos(D),O.y=l[1]+I*Math.sin(D)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:o}},e.prototype.getType=function(){return"concentric"},e}(sIe.Base);up.ConcentricLayout=lIe;var cp={},uIe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cp,"__esModule",{value:!0});cp.MDSLayout=void 0;var Kh=dG,qw=vn(),cIe=_n,fIe=function(r){uIe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges,a=i===void 0?[]:i,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}var s=t.linkDistance,l=(0,qw.getAdjMatrix)({nodes:n,edges:a},!1),u=(0,qw.floydWarshall)(l);t.handleInfinity(u);var c=(0,qw.scaleMatrix)(u,s);t.scaledDistances=c;var f=t.runMDS();return t.positions=f,f.forEach(function(h,d){n[d].x=h[0]+o[0],n[d].y=h[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a}},e.prototype.runMDS=function(){var t=this,n=2,i=t.scaledDistances,a=Kh.Matrix.mul(Kh.Matrix.pow(i,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Kh.SingularValueDecomposition(a),c=Kh.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(f){return Kh.Matrix.mul([f],[c]).toJSON()[0].splice(0,n)})},e.prototype.handleInfinity=function(t){var n=-999999;t.forEach(function(i){i.forEach(function(a){a!==1/0&&n<a&&(n=a)})}),t.forEach(function(i,a){i.forEach(function(o,s){o===1/0&&(t[a][s]=n)})})},e.prototype.getType=function(){return"mds"},e}(cIe.Base);cp.MDSLayout=fIe;var fp={},hIe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(fp,"__esModule",{value:!0});fp.FruchtermanLayout=void 0;var dIe=_n,bn=vn(),vIe=800,pIe=function(r){hIe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t=this,n,i,a=this,o=a.nodes;if(a.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(a.timeInterval),!o||o.length===0){(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var s=a.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],(i=a.onLayoutEnd)===null||i===void 0||i.call(a);return}var l={},u={};return o.forEach(function(c,f){(0,bn.isNumber)(c.x)||(c.x=Math.random()*t.width),(0,bn.isNumber)(c.y)||(c.y=Math.random()*t.height),l[c.id]=c,u[c.id]=f}),a.nodeMap=l,a.nodeIdxMap=u,a.run()},e.prototype.run=function(){var t,n=this,i=n.nodes;if(i){var a=n.edges,o=n.maxIteration,s=n.workerEnabled,l=n.clustering,u=n.animate,c={};if(l&&i.forEach(function(d){c[d.cluster]===void 0&&(c[d.cluster]={name:d.cluster,cx:0,cy:0,count:0})}),s||!u){for(var f=0;f<o;f++)n.runOneStep(c);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var h=0;this.timeInterval=window.setInterval(function(){var d;n.runOneStep(c),h++,h>=o&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:i,edges:a}}},e.prototype.runOneStep=function(t){var n,i=this,a=i.nodes;if(a){var o=i.edges,s=i.center,l=i.gravity,u=i.speed,c=i.clustering,f=i.height*i.width,h=Math.sqrt(f)/10,d=f/(a.length+1),v=Math.sqrt(d),p=[];if(a.forEach(function(y,w){p[w]={x:0,y:0}}),i.applyCalculate(a,o,p,v,d),c){for(var g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;a.forEach(function(y){var w=t[y.cluster];(0,bn.isNumber)(y.x)&&(w.cx+=y.x),(0,bn.isNumber)(y.y)&&(w.cy+=y.y),w.count++});for(var g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count;var m=i.clusterGravity||l;a.forEach(function(y,w){if(!(!(0,bn.isNumber)(y.x)||!(0,bn.isNumber)(y.y))){var b=t[y.cluster],x=Math.sqrt((y.x-b.cx)*(y.x-b.cx)+(y.y-b.cy)*(y.y-b.cy)),S=v*m;p[w].x-=S*(y.x-b.cx)/x,p[w].y-=S*(y.y-b.cy)/x}})}a.forEach(function(y,w){if(!(!(0,bn.isNumber)(y.x)||!(0,bn.isNumber)(y.y))){var b=.01*v*l;p[w].x-=b*(y.x-s[0]),p[w].y-=b*(y.y-s[1])}}),a.forEach(function(y,w){if((0,bn.isNumber)(y.fx)&&(0,bn.isNumber)(y.fy)){y.x=y.fx,y.y=y.fy;return}if(!(!(0,bn.isNumber)(y.x)||!(0,bn.isNumber)(y.y))){var b=Math.sqrt(p[w].x*p[w].x+p[w].y*p[w].y);if(b>0){var x=Math.min(h*(u/vIe),b);y.x+=p[w].x/b*x,y.y+=p[w].y/b*x}}}),(n=i.tick)===null||n===void 0||n.call(i)}},e.prototype.applyCalculate=function(t,n,i,a,o){var s=this;s.calRepulsive(t,i,o),n&&s.calAttractive(n,i,a)},e.prototype.calRepulsive=function(t,n,i){t.forEach(function(a,o){n[o]={x:0,y:0},t.forEach(function(s,l){if(o!==l&&!(!(0,bn.isNumber)(a.x)||!(0,bn.isNumber)(s.x)||!(0,bn.isNumber)(a.y)||!(0,bn.isNumber)(s.y))){var u=a.x-s.x,c=a.y-s.y,f=u*u+c*c;if(f===0){f=1;var h=o>l?1:-1;u=.01*h,c=.01*h}var d=i/f;n[o].x+=u*d,n[o].y+=c*d}})})},e.prototype.calAttractive=function(t,n,i){var a=this;t.forEach(function(o){var s=(0,bn.getEdgeTerminal)(o,"source"),l=(0,bn.getEdgeTerminal)(o,"target");if(!(!s||!l)){var u=a.nodeIdxMap[s],c=a.nodeIdxMap[l];if(u!==c){var f=a.nodeMap[s],h=a.nodeMap[l];if(!(!(0,bn.isNumber)(h.x)||!(0,bn.isNumber)(f.x)||!(0,bn.isNumber)(h.y)||!(0,bn.isNumber)(f.y))){var d=h.x-f.x,v=h.y-f.y,p=Math.sqrt(d*d+v*v),g=p*p/i;n[c].x-=d/p*g,n[c].y-=v/p*g,n[u].x+=d/p*g,n[u].y+=v/p*g}}}})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(dIe.Base);fp.FruchtermanLayout=pIe;var hp={};function _$(r,e,t,n,i,a,o){try{var s=r[a](o),l=s.value}catch(u){return void t(u)}s.done?e(l):Promise.resolve(l).then(n,i)}function Nl(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function o(l){_$(a,n,i,o,s,"next",l)}function s(l){_$(a,n,i,o,s,"throw",l)}o(void 0)})}}function th(r){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(r)}function gIe(r,e){if(th(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function pG(r){var e=gIe(r,"string");return th(e)=="symbol"?e:e+""}function wt(r,e,t){return(e=pG(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function go(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function E$(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,pG(n.key),n)}}function mo(r,e,t){return e&&E$(r.prototype,e),t&&E$(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var mIe=typeof ze=="object"&&ze&&ze.Object===Object&&ze,gG=mIe,yIe=gG,bIe=typeof self=="object"&&self&&self.Object===Object&&self,wIe=yIe||bIe||Function("return this")(),xIe=wIe,SIe=xIe,_Ie=SIe.Symbol,mG=_Ie,M$=mG,yG=Object.prototype,EIe=yG.hasOwnProperty,MIe=yG.toString,qh=M$?M$.toStringTag:void 0;function CIe(r){var e=EIe.call(r,qh),t=r[qh];try{r[qh]=void 0;var n=!0}catch{}var i=MIe.call(r);return n&&(e?r[qh]=t:delete r[qh]),i}var AIe=CIe,TIe=Object.prototype,kIe=TIe.toString;function LIe(r){return kIe.call(r)}var IIe=LIe,C$=mG,OIe=AIe,NIe=IIe,$Ie="[object Null]",DIe="[object Undefined]",A$=C$?C$.toStringTag:void 0;function RIe(r){return r==null?r===void 0?DIe:$Ie:A$&&A$ in Object(r)?OIe(r):NIe(r)}var BM=RIe,PIe=9007199254740991;function FIe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=PIe}var BIe=FIe;function zIe(r){return r!=null&&typeof r=="object"}var zM=zIe,GIe=BM,jIe=BIe,UIe=zM,WIe="[object Arguments]",HIe="[object Array]",VIe="[object Boolean]",YIe="[object Date]",XIe="[object Error]",KIe="[object Function]",qIe="[object Map]",ZIe="[object Number]",QIe="[object Object]",JIe="[object RegExp]",eOe="[object Set]",tOe="[object String]",rOe="[object WeakMap]",nOe="[object ArrayBuffer]",iOe="[object DataView]",aOe="[object Float32Array]",oOe="[object Float64Array]",sOe="[object Int8Array]",lOe="[object Int16Array]",uOe="[object Int32Array]",cOe="[object Uint8Array]",fOe="[object Uint8ClampedArray]",hOe="[object Uint16Array]",dOe="[object Uint32Array]",en={};en[aOe]=en[oOe]=en[sOe]=en[lOe]=en[uOe]=en[cOe]=en[fOe]=en[hOe]=en[dOe]=!0;en[WIe]=en[HIe]=en[nOe]=en[VIe]=en[iOe]=en[YIe]=en[XIe]=en[KIe]=en[qIe]=en[ZIe]=en[QIe]=en[JIe]=en[eOe]=en[tOe]=en[rOe]=!1;function vOe(r){return UIe(r)&&jIe(r.length)&&!!en[GIe(r)]}var pOe=vOe;function gOe(r){return function(e){return r(e)}}var mOe=gOe,Ym={exports:{}};Ym.exports;(function(r,e){var t=gG,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a&&t.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s})(Ym,Ym.exports);var yOe=Ym.exports,bOe=pOe,wOe=mOe,T$=yOe,k$=T$&&T$.isTypedArray,xOe=k$?wOe(k$):bOe,SOe=xOe;const Xm=co(SOe);var _Oe=BM,EOe=zM,MOe="[object Number]";function COe(r){return typeof r=="number"||EOe(r)&&_Oe(r)==MOe}var AOe=COe;const TOe=co(AOe);var kOe=Array.isArray,LOe=kOe;const IOe=co(LOe);var bG={exports:{}},wG={exports:{}};(function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(wG);var OOe=wG.exports;(function(r){var e=OOe.default;function t(){r.exports=t=function(){return i},r.exports.__esModule=!0,r.exports.default=r.exports;var n,i={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function($,R,B){$[R]=B.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function h($,R,B){return Object.defineProperty($,R,{value:B,enumerable:!0,configurable:!0,writable:!0}),$[R]}try{h({},"")}catch{h=function(B,j,G){return B[j]=G}}function d($,R,B,j){var G=R&&R.prototype instanceof b?R:b,z=Object.create(G.prototype),W=new N(j||[]);return s(z,"_invoke",{value:k($,B,W)}),z}function v($,R,B){try{return{type:"normal",arg:$.call(R,B)}}catch(j){return{type:"throw",arg:j}}}i.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",y="completed",w={};function b(){}function x(){}function S(){}var _={};h(_,u,function(){return this});var M=Object.getPrototypeOf,A=M&&M(M(D([])));A&&A!==a&&o.call(A,u)&&(_=A);var E=S.prototype=b.prototype=Object.create(_);function T($){["next","throw","return"].forEach(function(R){h($,R,function(B){return this._invoke(R,B)})})}function C($,R){function B(G,z,W,Q){var ie=v($[G],$,z);if(ie.type!=="throw"){var se=ie.arg,ae=se.value;return ae&&e(ae)=="object"&&o.call(ae,"__await")?R.resolve(ae.__await).then(function(pe){B("next",pe,W,Q)},function(pe){B("throw",pe,W,Q)}):R.resolve(ae).then(function(pe){se.value=pe,W(se)},function(pe){return B("throw",pe,W,Q)})}Q(ie.arg)}var j;s(this,"_invoke",{value:function(z,W){function Q(){return new R(function(ie,se){B(z,W,ie,se)})}return j=j?j.then(Q,Q):Q()}})}function k($,R,B){var j=p;return function(G,z){if(j===m)throw Error("Generator is already running");if(j===y){if(G==="throw")throw z;return{value:n,done:!0}}for(B.method=G,B.arg=z;;){var W=B.delegate;if(W){var Q=L(W,B);if(Q){if(Q===w)continue;return Q}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(j===p)throw j=y,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);j=m;var ie=v($,R,B);if(ie.type==="normal"){if(j=B.done?y:g,ie.arg===w)continue;return{value:ie.arg,done:B.done}}ie.type==="throw"&&(j=y,B.method="throw",B.arg=ie.arg)}}}function L($,R){var B=R.method,j=$.iterator[B];if(j===n)return R.delegate=null,B==="throw"&&$.iterator.return&&(R.method="return",R.arg=n,L($,R),R.method==="throw")||B!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+B+"' method")),w;var G=v(j,$.iterator,R.arg);if(G.type==="throw")return R.method="throw",R.arg=G.arg,R.delegate=null,w;var z=G.arg;return z?z.done?(R[$.resultName]=z.value,R.next=$.nextLoc,R.method!=="return"&&(R.method="next",R.arg=n),R.delegate=null,w):z:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,w)}function I($){var R={tryLoc:$[0]};1 in $&&(R.catchLoc=$[1]),2 in $&&(R.finallyLoc=$[2],R.afterLoc=$[3]),this.tryEntries.push(R)}function O($){var R=$.completion||{};R.type="normal",delete R.arg,$.completion=R}function N($){this.tryEntries=[{tryLoc:"root"}],$.forEach(I,this),this.reset(!0)}function D($){if($||$===""){var R=$[u];if(R)return R.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var B=-1,j=function G(){for(;++B<$.length;)if(o.call($,B))return G.value=$[B],G.done=!1,G;return G.value=n,G.done=!0,G};return j.next=j}}throw new TypeError(e($)+" is not iterable")}return x.prototype=S,s(E,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:x,configurable:!0}),x.displayName=h(S,f,"GeneratorFunction"),i.isGeneratorFunction=function($){var R=typeof $=="function"&&$.constructor;return!!R&&(R===x||(R.displayName||R.name)==="GeneratorFunction")},i.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,S):($.__proto__=S,h($,f,"GeneratorFunction")),$.prototype=Object.create(E),$},i.awrap=function($){return{__await:$}},T(C.prototype),h(C.prototype,c,function(){return this}),i.AsyncIterator=C,i.async=function($,R,B,j,G){G===void 0&&(G=Promise);var z=new C(d($,R,B,j),G);return i.isGeneratorFunction(R)?z:z.next().then(function(W){return W.done?W.value:z.next()})},T(E),h(E,f,"Generator"),h(E,u,function(){return this}),h(E,"toString",function(){return"[object Generator]"}),i.keys=function($){var R=Object($),B=[];for(var j in R)B.push(j);return B.reverse(),function G(){for(;B.length;){var z=B.pop();if(z in R)return G.value=z,G.done=!1,G}return G.done=!0,G}},i.values=D,N.prototype={constructor:N,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!R)for(var B in this)B.charAt(0)==="t"&&o.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=n)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var B=this;function j(se,ae){return W.type="throw",W.arg=R,B.next=se,ae&&(B.method="next",B.arg=n),!!ae}for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G],W=z.completion;if(z.tryLoc==="root")return j("end");if(z.tryLoc<=this.prev){var Q=o.call(z,"catchLoc"),ie=o.call(z,"finallyLoc");if(Q&&ie){if(this.prev<z.catchLoc)return j(z.catchLoc,!0);if(this.prev<z.finallyLoc)return j(z.finallyLoc)}else if(Q){if(this.prev<z.catchLoc)return j(z.catchLoc,!0)}else{if(!ie)throw Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return j(z.finallyLoc)}}}},abrupt:function(R,B){for(var j=this.tryEntries.length-1;j>=0;--j){var G=this.tryEntries[j];if(G.tryLoc<=this.prev&&o.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var z=G;break}}z&&(R==="break"||R==="continue")&&z.tryLoc<=B&&B<=z.finallyLoc&&(z=null);var W=z?z.completion:{};return W.type=R,W.arg=B,z?(this.method="next",this.next=z.finallyLoc,w):this.complete(W)},complete:function(R,B){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&B&&(this.next=B),w},finish:function(R){for(var B=this.tryEntries.length-1;B>=0;--B){var j=this.tryEntries[B];if(j.finallyLoc===R)return this.complete(j.completion,j.afterLoc),O(j),w}},catch:function(R){for(var B=this.tryEntries.length-1;B>=0;--B){var j=this.tryEntries[B];if(j.tryLoc===R){var G=j.completion;if(G.type==="throw"){var z=G.arg;O(j)}return z}}throw Error("illegal catch attempt")},delegateYield:function(R,B,j){return this.delegate={iterator:D(R),resultName:B,nextLoc:j},this.method==="next"&&(this.arg=n),w}},i}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(bG);var NOe=bG.exports,F0=NOe(),$Oe=F0;try{regeneratorRuntime=F0}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=F0:Function("r","regeneratorRuntime = r")(F0)}const vi=co($Oe);var DOe=1;function xG(){return DOe++}var Qe;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Qe||(Qe={}));var ROe=function(){function r(){go(this,r),this.config=void 0}return mo(r,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),r}(),kv;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(kv||(kv={}));var L$;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(L$||(L$={}));var rh;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(rh||(rh={}));var zd;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(zd||(zd={}));var POe="__DefineValuePlaceholder__";function FOe(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function I$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function O$(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(t),!0).forEach(function(n){wt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):I$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var SG=function(){function r(e,t){go(this,r),this.engine=e,this.configService=t,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return mo(r,[{key:"init",value:function(){var t=this.configService.get(),n=t.canvas,i=t.engineOptions;this.initPromise=this.engine.init(O$({canvas:n||FOe(),antialiasing:!1},i))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,n){var i=this;if(typeof t=="string"){var a=TOe(n)||Xm(n)||IOe(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===t});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===t});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===rh.Uniform?this.model&&this.model.updateUniform(t,n):this.model&&this.model.updateBuffer(t,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(t).forEach(function(l){i.setBinding(l,t[l])});return this}},{key:"execute",value:function(){var e=Nl(vi.mark(function n(){var i=this,a,o,s=arguments;return vi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,h=c.name;i.model.confirmInput(f.model,h)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getOutput",value:function(){var e=Nl(vi.mark(function n(){return vi.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"compile",value:function(){var e=Nl(vi.mark(function n(){var i,a,o;return vi.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=O$({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?zd.WGSL:zd.GLSL450:zd.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(POe).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===rh.StorageBuffer){var c=1;u.type===kv.FloatArray?c=1:u.type===kv.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()}]),r}(),_G={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(ze,function(){var t=function(P){return P instanceof Uint8Array||P instanceof Uint16Array||P instanceof Uint32Array||P instanceof Int8Array||P instanceof Int16Array||P instanceof Int32Array||P instanceof Float32Array||P instanceof Float64Array||P instanceof Uint8ClampedArray},n=function(P,Y){for(var re=Object.keys(Y),Ae=0;Ae<re.length;++Ae)P[re[Ae]]=Y[re[Ae]];return P},i=`
`;function a(P){return typeof atob<"u"?atob(P):"base64:"+P}function o(P){var Y=new Error("(regl) "+P);throw console.error(Y),Y}function s(P,Y){P||o(Y)}function l(P){return P?": "+P:""}function u(P,Y,re){P in Y||o("unknown parameter ("+P+")"+l(re)+". possible values: "+Object.keys(Y).join())}function c(P,Y){t(P)||o("invalid parameter type"+l(Y)+". must be a typed array")}function f(P,Y){switch(Y){case"number":return typeof P=="number";case"object":return typeof P=="object";case"string":return typeof P=="string";case"boolean":return typeof P=="boolean";case"function":return typeof P=="function";case"undefined":return typeof P>"u";case"symbol":return typeof P=="symbol"}}function h(P,Y,re){f(P,Y)||o("invalid parameter type"+l(re)+". expected "+Y+", got "+typeof P)}function d(P,Y){P>=0&&(P|0)===P||o("invalid parameter type, ("+P+")"+l(Y)+". must be a nonnegative integer")}function v(P,Y,re){Y.indexOf(P)<0&&o("invalid value"+l(re)+". must be one of: "+Y)}var p=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(P){Object.keys(P).forEach(function(Y){p.indexOf(Y)<0&&o('invalid regl constructor argument "'+Y+'". must be one of '+p)})}function m(P,Y){for(P=P+"";P.length<Y;)P=" "+P;return P}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function w(P,Y){this.number=P,this.line=Y,this.errors=[]}function b(P,Y,re){this.file=P,this.line=Y,this.message=re}function x(){var P=new Error,Y=(P.stack||P).toString(),re=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Y);if(re)return re[1];var Ae=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Y);return Ae?Ae[1]:"unknown"}function S(){var P=new Error,Y=(P.stack||P).toString(),re=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Y);if(re)return re[1];var Ae=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Y);return Ae?Ae[1]:"unknown"}function _(P,Y){var re=P.split(`
`),Ae=1,je=0,Ce={unknown:new y,0:new y};Ce.unknown.name=Ce[0].name=Y||x(),Ce.unknown.lines.push(new w(0,""));for(var Ie=0;Ie<re.length;++Ie){var qe=re[Ie],et=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(qe);if(et)switch(et[1]){case"line":var ot=/(\d+)(\s+\d+)?/.exec(et[2]);ot&&(Ae=ot[1]|0,ot[2]&&(je=ot[2]|0,je in Ce||(Ce[je]=new y)));break;case"define":var tt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(et[2]);tt&&(Ce[je].name=tt[1]?a(tt[2]):tt[2]);break}Ce[je].lines.push(new w(Ae++,qe))}return Object.keys(Ce).forEach(function(lt){var pt=Ce[lt];pt.lines.forEach(function(Ze){pt.index[Ze.number]=Ze})}),Ce}function M(P){var Y=[];return P.split(`
`).forEach(function(re){if(!(re.length<5)){var Ae=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(re);Ae?Y.push(new b(Ae[1]|0,Ae[2]|0,Ae[3].trim())):re.length>0&&Y.push(new b("unknown",0,re))}}),Y}function A(P,Y){Y.forEach(function(re){var Ae=P[re.file];if(Ae){var je=Ae.index[re.line];if(je){je.errors.push(re),Ae.hasErrors=!0;return}}P.unknown.hasErrors=!0,P.unknown.lines[0].errors.push(re)})}function E(P,Y,re,Ae,je){if(!P.getShaderParameter(Y,P.COMPILE_STATUS)){var Ce=P.getShaderInfoLog(Y),Ie=Ae===P.FRAGMENT_SHADER?"fragment":"vertex";N(re,"string",Ie+" shader source must be a string",je);var qe=_(re,je),et=M(Ce);A(qe,et),Object.keys(qe).forEach(function(ot){var tt=qe[ot];if(!tt.hasErrors)return;var lt=[""],pt=[""];function Ze(ct,we){lt.push(ct),pt.push(we||"")}Ze("file number "+ot+": "+tt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),tt.lines.forEach(function(ct){if(ct.errors.length>0){Ze(m(ct.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ze(ct.line+i,"color:red; background-color:yellow; font-weight:bold");var we=0;ct.errors.forEach(function(Oe){var it=Oe.message,mt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(it);if(mt){var Ve=mt[1];switch(it=mt[2],Ve){case"assign":Ve="=";break}we=Math.max(ct.line.indexOf(Ve,we),0)}else we=0;Ze(m("| ",6)),Ze(m("^^^",we+3)+i,"font-weight:bold"),Ze(m("| ",6)),Ze(it+i,"font-weight:bold")}),Ze(m("| ",6)+i)}else Ze(m(ct.number,4)+"|  "),Ze(ct.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(pt[0]=lt.join("%c"),console.log.apply(console,pt)):console.log(lt.join(""))}),s.raise("Error compiling "+Ie+" shader, "+qe[0].name)}}function T(P,Y,re,Ae,je){if(!P.getProgramParameter(Y,P.LINK_STATUS)){var Ce=P.getProgramInfoLog(Y),Ie=_(re,je),qe=_(Ae,je),et='Error linking program with vertex shader, "'+qe[0].name+'", and fragment shader "'+Ie[0].name+'"';typeof document<"u"?console.log("%c"+et+i+"%c"+Ce,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(et+i+Ce),s.raise(et)}}function C(P){P._commandRef=x()}function k(P,Y,re,Ae){C(P);function je(et){return et?Ae.id(et):0}P._fragId=je(P.static.frag),P._vertId=je(P.static.vert);function Ce(et,ot){Object.keys(ot).forEach(function(tt){et[Ae.id(tt)]=!0})}var Ie=P._uniformSet={};Ce(Ie,Y.static),Ce(Ie,Y.dynamic);var qe=P._attributeSet={};Ce(qe,re.static),Ce(qe,re.dynamic),P._hasCount="count"in P.static||"count"in P.dynamic||"elements"in P.static||"elements"in P.dynamic}function L(P,Y){var re=S();o(P+" in command "+(Y||x())+(re==="unknown"?"":" called from "+re))}function I(P,Y,re){P||L(Y,re||x())}function O(P,Y,re,Ae){P in Y||L("unknown parameter ("+P+")"+l(re)+". possible values: "+Object.keys(Y).join(),Ae||x())}function N(P,Y,re,Ae){f(P,Y)||L("invalid parameter type"+l(re)+". expected "+Y+", got "+typeof P,Ae||x())}function D(P){P()}function $(P,Y,re){P.texture?v(P.texture._texture.internalformat,Y,"unsupported texture format for attachment"):v(P.renderbuffer._renderbuffer.format,re,"unsupported renderbuffer format for attachment")}var R=33071,B=9728,j=9984,G=9985,z=9986,W=9987,Q=5120,ie=5121,se=5122,ae=5123,pe=5124,De=5125,Je=5126,ee=32819,ne=32820,me=33635,Fe=34042,Re=36193,$e={};$e[Q]=$e[ie]=1,$e[se]=$e[ae]=$e[Re]=$e[me]=$e[ee]=$e[ne]=2,$e[pe]=$e[De]=$e[Je]=$e[Fe]=4;function Ke(P,Y){return P===ne||P===ee||P===me?2:P===Fe?4:$e[P]*Y}function at(P){return!(P&P-1)&&!!P}function Me(P,Y,re){var Ae,je=Y.width,Ce=Y.height,Ie=Y.channels;s(je>0&&je<=re.maxTextureSize&&Ce>0&&Ce<=re.maxTextureSize,"invalid texture shape"),(P.wrapS!==R||P.wrapT!==R)&&s(at(je)&&at(Ce),"incompatible wrap mode for texture, both width and height must be power of 2"),Y.mipmask===1?je!==1&&Ce!==1&&s(P.minFilter!==j&&P.minFilter!==z&&P.minFilter!==G&&P.minFilter!==W,"min filter requires mipmap"):(s(at(je)&&at(Ce),"texture must be a square power of 2 to support mipmapping"),s(Y.mipmask===(je<<1)-1,"missing or incomplete mipmap data")),Y.type===Je&&(re.extensions.indexOf("oes_texture_float_linear")<0&&s(P.minFilter===B&&P.magFilter===B,"filter not supported, must enable oes_texture_float_linear"),s(!P.genMipmaps,"mipmap generation not supported with float textures"));var qe=Y.images;for(Ae=0;Ae<16;++Ae)if(qe[Ae]){var et=je>>Ae,ot=Ce>>Ae;s(Y.mipmask&1<<Ae,"missing mipmap data");var tt=qe[Ae];if(s(tt.width===et&&tt.height===ot,"invalid shape for mip images"),s(tt.format===Y.format&&tt.internalformat===Y.internalformat&&tt.type===Y.type,"incompatible type for mip image"),!tt.compressed)if(tt.data){var lt=Math.ceil(Ke(tt.type,Ie)*et/tt.unpackAlignment)*tt.unpackAlignment;s(tt.data.byteLength===lt*ot,"invalid data for image, buffer size is inconsistent with image format")}else tt.element||tt.copy}else P.genMipmaps||s((Y.mipmask&1<<Ae)===0,"extra mipmap data");Y.compressed&&s(!P.genMipmaps,"mipmap generation for compressed images not supported")}function J(P,Y,re,Ae){var je=P.width,Ce=P.height,Ie=P.channels;s(je>0&&je<=Ae.maxTextureSize&&Ce>0&&Ce<=Ae.maxTextureSize,"invalid texture shape"),s(je===Ce,"cube map must be square"),s(Y.wrapS===R&&Y.wrapT===R,"wrap mode not supported by cube map");for(var qe=0;qe<re.length;++qe){var et=re[qe];s(et.width===je&&et.height===Ce,"inconsistent cube map face shape"),Y.genMipmaps&&(s(!et.compressed,"can not generate mipmap for compressed textures"),s(et.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ot=et.images,tt=0;tt<16;++tt){var lt=ot[tt];if(lt){var pt=je>>tt,Ze=Ce>>tt;s(et.mipmask&1<<tt,"missing mipmap data"),s(lt.width===pt&&lt.height===Ze,"invalid shape for mip images"),s(lt.format===P.format&&lt.internalformat===P.internalformat&&lt.type===P.type,"incompatible type for mip image"),lt.compressed||(lt.data?s(lt.data.byteLength===pt*Ze*Math.max(Ke(lt.type,Ie),lt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):lt.element||lt.copy)}}}}var F=n(s,{optional:D,raise:o,commandRaise:L,command:I,parameter:u,commandParameter:O,constructor:g,type:h,commandType:N,isTypedArray:c,nni:d,oneOf:v,shaderError:E,linkError:T,callSite:S,saveCommandRef:C,saveDrawInfo:k,framebufferFormat:$,guessCommand:x,texture2D:Me,textureCube:J}),be=0,oe=0,X=5,de=6;function xe(P,Y){this.id=be++,this.type=P,this.data=Y}function ke(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ge(P){if(P.length===0)return[];var Y=P.charAt(0),re=P.charAt(P.length-1);if(P.length>1&&Y===re&&(Y==='"'||Y==="'"))return['"'+ke(P.substr(1,P.length-2))+'"'];var Ae=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(P);if(Ae)return Ge(P.substr(0,Ae.index)).concat(Ge(Ae[1])).concat(Ge(P.substr(Ae.index+Ae[0].length)));var je=P.split(".");if(je.length===1)return['"'+ke(P)+'"'];for(var Ce=[],Ie=0;Ie<je.length;++Ie)Ce=Ce.concat(Ge(je[Ie]));return Ce}function vt(P){return"["+Ge(P).join("][")+"]"}function Lt(P,Y){return new xe(P,vt(Y+""))}function Kt(P){return typeof P=="function"&&!P._reglType||P instanceof xe}function Ct(P,Y){if(typeof P=="function")return new xe(oe,P);if(typeof P=="number"||typeof P=="boolean")return new xe(X,P);if(Array.isArray(P))return new xe(de,P.map((re,Ae)=>Ct(re,Y+"["+Ae+"]")));if(P instanceof xe)return P;F(!1,"invalid option type in uniform "+Y)}var zt={DynamicVariable:xe,define:Lt,isDynamic:Kt,unbox:Ct,accessor:vt},jt={next:typeof requestAnimationFrame=="function"?function(P){return requestAnimationFrame(P)}:function(P){return setTimeout(P,16)},cancel:typeof cancelAnimationFrame=="function"?function(P){return cancelAnimationFrame(P)}:clearTimeout},pr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ir(){var P={"":0},Y=[""];return{id:function(re){var Ae=P[re];return Ae||(Ae=P[re]=Y.length,Y.push(re),Ae)},str:function(re){return Y[re]}}}function oi(P,Y,re){var Ae=document.createElement("canvas");n(Ae.style,{border:0,margin:0,padding:0,top:0,left:0}),P.appendChild(Ae),P===document.body&&(Ae.style.position="absolute",n(P.style,{margin:0,padding:0}));function je(){var qe=window.innerWidth,et=window.innerHeight;if(P!==document.body){var ot=P.getBoundingClientRect();qe=ot.right-ot.left,et=ot.bottom-ot.top}Ae.width=re*qe,Ae.height=re*et,n(Ae.style,{width:qe+"px",height:et+"px"})}var Ce;P!==document.body&&typeof ResizeObserver=="function"?(Ce=new ResizeObserver(function(){setTimeout(je)}),Ce.observe(P)):window.addEventListener("resize",je,!1);function Ie(){Ce?Ce.disconnect():window.removeEventListener("resize",je),P.removeChild(Ae)}return je(),{canvas:Ae,onDestroy:Ie}}function Or(P,Y){function re(Ae){try{return P.getContext(Ae,Y)}catch{return null}}return re("webgl")||re("experimental-webgl")||re("webgl-experimental")}function En(P){return typeof P.nodeName=="string"&&typeof P.appendChild=="function"&&typeof P.getBoundingClientRect=="function"}function Ba(P){return typeof P.drawArrays=="function"||typeof P.drawElements=="function"}function On(P){return typeof P=="string"?P.split():(F(Array.isArray(P),"invalid extension array"),P)}function Qs(P){return typeof P=="string"?(F(typeof document<"u","not supported outside of DOM"),document.querySelector(P)):P}function vh(P){var Y=P||{},re,Ae,je,Ce,Ie={},qe=[],et=[],ot=typeof window>"u"?1:window.devicePixelRatio,tt=!1,lt=function(ct){ct&&F.raise(ct)},pt=function(){};if(typeof Y=="string"?(F(typeof document<"u","selector queries only supported in DOM enviroments"),re=document.querySelector(Y),F(re,"invalid query string for element")):typeof Y=="object"?En(Y)?re=Y:Ba(Y)?(Ce=Y,je=Ce.canvas):(F.constructor(Y),"gl"in Y?Ce=Y.gl:"canvas"in Y?je=Qs(Y.canvas):"container"in Y&&(Ae=Qs(Y.container)),"attributes"in Y&&(Ie=Y.attributes,F.type(Ie,"object","invalid context attributes")),"extensions"in Y&&(qe=On(Y.extensions)),"optionalExtensions"in Y&&(et=On(Y.optionalExtensions)),"onDone"in Y&&(F.type(Y.onDone,"function","invalid or missing onDone callback"),lt=Y.onDone),"profile"in Y&&(tt=!!Y.profile),"pixelRatio"in Y&&(ot=+Y.pixelRatio,F(ot>0,"invalid pixel ratio"))):F.raise("invalid arguments to regl"),re&&(re.nodeName.toLowerCase()==="canvas"?je=re:Ae=re),!Ce){if(!je){F(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ze=oi(Ae||document.body,lt,ot);if(!Ze)return null;je=Ze.canvas,pt=Ze.onDestroy}Ie.premultipliedAlpha===void 0&&(Ie.premultipliedAlpha=!0),Ce=Or(je,Ie)}return Ce?{gl:Ce,canvas:je,container:Ae,extensions:qe,optionalExtensions:et,pixelRatio:ot,profile:tt,onDone:lt,onDestroy:pt}:(pt(),lt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ph(P,Y){var re={};function Ae(Ie){F.type(Ie,"string","extension name must be string");var qe=Ie.toLowerCase(),et;try{et=re[qe]=P.getExtension(qe)}catch{}return!!et}for(var je=0;je<Y.extensions.length;++je){var Ce=Y.extensions[je];if(!Ae(Ce))return Y.onDestroy(),Y.onDone('"'+Ce+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Y.optionalExtensions.forEach(Ae),{extensions:re,restore:function(){Object.keys(re).forEach(function(Ie){if(re[Ie]&&!Ae(Ie))throw new Error("(regl): error restoring extension "+Ie)})}}}function Yn(P,Y){for(var re=Array(P),Ae=0;Ae<P;++Ae)re[Ae]=Y(Ae);return re}var us=5120,au=5121,gh=5122,mh=5123,yh=5124,za=5125,Mn=5126;function Ga(P){for(var Y=16;Y<=1<<28;Y*=16)if(P<=Y)return Y;return 0}function er(P){var Y,re;return Y=(P>65535)<<4,P>>>=Y,re=(P>255)<<3,P>>>=re,Y|=re,re=(P>15)<<2,P>>>=re,Y|=re,re=(P>3)<<1,P>>>=re,Y|=re,Y|P>>1}function Ur(){var P=Yn(8,function(){return[]});function Y(Ce){var Ie=Ga(Ce),qe=P[er(Ie)>>2];return qe.length>0?qe.pop():new ArrayBuffer(Ie)}function re(Ce){P[er(Ce.byteLength)>>2].push(Ce)}function Ae(Ce,Ie){var qe=null;switch(Ce){case us:qe=new Int8Array(Y(Ie),0,Ie);break;case au:qe=new Uint8Array(Y(Ie),0,Ie);break;case gh:qe=new Int16Array(Y(2*Ie),0,Ie);break;case mh:qe=new Uint16Array(Y(2*Ie),0,Ie);break;case yh:qe=new Int32Array(Y(4*Ie),0,Ie);break;case za:qe=new Uint32Array(Y(4*Ie),0,Ie);break;case Mn:qe=new Float32Array(Y(4*Ie),0,Ie);break;default:return null}return qe.length!==Ie?qe.subarray(0,Ie):qe}function je(Ce){re(Ce.buffer)}return{alloc:Y,free:re,allocType:Ae,freeType:je}}var Ht=Ur();Ht.zero=Ur();var un=3408,si=3410,ou=3411,su=3412,cs=3413,lu=3414,uu=3415,cu=33901,Lj=33902,Ij=3379,Oj=3386,Nj=34921,$j=36347,Dj=36348,Rj=35661,Pj=35660,Fj=34930,Bj=36349,zj=34076,Gj=34024,jj=7936,Uj=7937,Wj=7938,Hj=35724,Vj=34047,Yj=36063,Xj=34852,bp=3553,aC=34067,Kj=34069,qj=33984,bh=6408,k1=5126,oC=5121,L1=36160,Zj=36053,Qj=36064,Jj=16384,eU=function(P,Y){var re=1;Y.ext_texture_filter_anisotropic&&(re=P.getParameter(Vj));var Ae=1,je=1;Y.webgl_draw_buffers&&(Ae=P.getParameter(Xj),je=P.getParameter(Yj));var Ce=!!Y.oes_texture_float;if(Ce){var Ie=P.createTexture();P.bindTexture(bp,Ie),P.texImage2D(bp,0,bh,1,1,0,bh,k1,null);var qe=P.createFramebuffer();if(P.bindFramebuffer(L1,qe),P.framebufferTexture2D(L1,Qj,bp,Ie,0),P.bindTexture(bp,null),P.checkFramebufferStatus(L1)!==Zj)Ce=!1;else{P.viewport(0,0,1,1),P.clearColor(1,0,0,1),P.clear(Jj);var et=Ht.allocType(k1,4);P.readPixels(0,0,1,1,bh,k1,et),P.getError()?Ce=!1:(P.deleteFramebuffer(qe),P.deleteTexture(Ie),Ce=et[0]===1),Ht.freeType(et)}}var ot=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),tt=!0;if(!ot){var lt=P.createTexture(),pt=Ht.allocType(oC,36);P.activeTexture(qj),P.bindTexture(aC,lt),P.texImage2D(Kj,0,bh,3,3,0,bh,oC,pt),Ht.freeType(pt),P.bindTexture(aC,null),P.deleteTexture(lt),tt=!P.getError()}return{colorBits:[P.getParameter(si),P.getParameter(ou),P.getParameter(su),P.getParameter(cs)],depthBits:P.getParameter(lu),stencilBits:P.getParameter(uu),subpixelBits:P.getParameter(un),extensions:Object.keys(Y).filter(function(Ze){return!!Y[Ze]}),maxAnisotropic:re,maxDrawbuffers:Ae,maxColorAttachments:je,pointSizeDims:P.getParameter(cu),lineWidthDims:P.getParameter(Lj),maxViewportDims:P.getParameter(Oj),maxCombinedTextureUnits:P.getParameter(Rj),maxCubeMapSize:P.getParameter(zj),maxRenderbufferSize:P.getParameter(Gj),maxTextureUnits:P.getParameter(Fj),maxTextureSize:P.getParameter(Ij),maxAttributes:P.getParameter(Nj),maxVertexUniforms:P.getParameter($j),maxVertexTextureUnits:P.getParameter(Pj),maxVaryingVectors:P.getParameter(Dj),maxFragmentUniforms:P.getParameter(Bj),glsl:P.getParameter(Hj),renderer:P.getParameter(Uj),vendor:P.getParameter(jj),version:P.getParameter(Wj),readFloat:Ce,npotTextureCube:tt}};function ja(P){return!!P&&typeof P=="object"&&Array.isArray(P.shape)&&Array.isArray(P.stride)&&typeof P.offset=="number"&&P.shape.length===P.stride.length&&(Array.isArray(P.data)||t(P.data))}var Wi=function(P){return Object.keys(P).map(function(Y){return P[Y]})},wp={shape:iU,flatten:nU};function tU(P,Y,re){for(var Ae=0;Ae<Y;++Ae)re[Ae]=P[Ae]}function rU(P,Y,re,Ae){for(var je=0,Ce=0;Ce<Y;++Ce)for(var Ie=P[Ce],qe=0;qe<re;++qe)Ae[je++]=Ie[qe]}function sC(P,Y,re,Ae,je,Ce){for(var Ie=Ce,qe=0;qe<Y;++qe)for(var et=P[qe],ot=0;ot<re;++ot)for(var tt=et[ot],lt=0;lt<Ae;++lt)je[Ie++]=tt[lt]}function lC(P,Y,re,Ae,je){for(var Ce=1,Ie=re+1;Ie<Y.length;++Ie)Ce*=Y[Ie];var qe=Y[re];if(Y.length-re===4){var et=Y[re+1],ot=Y[re+2],tt=Y[re+3];for(Ie=0;Ie<qe;++Ie)sC(P[Ie],et,ot,tt,Ae,je),je+=Ce}else for(Ie=0;Ie<qe;++Ie)lC(P[Ie],Y,re+1,Ae,je),je+=Ce}function nU(P,Y,re,Ae){var je=1;if(Y.length)for(var Ce=0;Ce<Y.length;++Ce)je*=Y[Ce];else je=0;var Ie=Ae||Ht.allocType(re,je);switch(Y.length){case 0:break;case 1:tU(P,Y[0],Ie);break;case 2:rU(P,Y[0],Y[1],Ie);break;case 3:sC(P,Y[0],Y[1],Y[2],Ie,0);break;default:lC(P,Y,0,Ie,0)}return Ie}function iU(P){for(var Y=[],re=P;re.length;re=re[0])Y.push(re.length);return Y}var I1={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},aU=5120,oU=5122,sU=5124,lU=5121,uU=5123,cU=5125,fU=5126,hU=5126,fu={int8:aU,int16:oU,int32:sU,uint8:lU,uint16:uU,uint32:cU,float:fU,float32:hU},dU=35048,vU=35040,xp={dynamic:dU,stream:vU,static:35044},O1=wp.flatten,uC=wp.shape,cC=35044,pU=35040,N1=5121,$1=5126,Js=[];Js[5120]=1,Js[5122]=2,Js[5124]=4,Js[5121]=1,Js[5123]=2,Js[5125]=4,Js[5126]=4;function Sp(P){return I1[Object.prototype.toString.call(P)]|0}function fC(P,Y){for(var re=0;re<Y.length;++re)P[re]=Y[re]}function hC(P,Y,re,Ae,je,Ce,Ie){for(var qe=0,et=0;et<re;++et)for(var ot=0;ot<Ae;++ot)P[qe++]=Y[je*et+Ce*ot+Ie]}function gU(P,Y,re,Ae){var je=0,Ce={};function Ie(we){this.id=je++,this.buffer=P.createBuffer(),this.type=we,this.usage=cC,this.byteLength=0,this.dimension=1,this.dtype=N1,this.persistentData=null,re.profile&&(this.stats={size:0})}Ie.prototype.bind=function(){P.bindBuffer(this.type,this.buffer)},Ie.prototype.destroy=function(){pt(this)};var qe=[];function et(we,Oe){var it=qe.pop();return it||(it=new Ie(we)),it.bind(),lt(it,Oe,pU,0,1,!1),it}function ot(we){qe.push(we)}function tt(we,Oe,it){we.byteLength=Oe.byteLength,P.bufferData(we.type,Oe,it)}function lt(we,Oe,it,mt,Ve,xt){var Xe;if(we.usage=it,Array.isArray(Oe)){if(we.dtype=mt||$1,Oe.length>0){var ft;if(Array.isArray(Oe[0])){Xe=uC(Oe);for(var Ye=1,ht=1;ht<Xe.length;++ht)Ye*=Xe[ht];we.dimension=Ye,ft=O1(Oe,Xe,we.dtype),tt(we,ft,it),xt?we.persistentData=ft:Ht.freeType(ft)}else if(typeof Oe[0]=="number"){we.dimension=Ve;var Ft=Ht.allocType(we.dtype,Oe.length);fC(Ft,Oe),tt(we,Ft,it),xt?we.persistentData=Ft:Ht.freeType(Ft)}else t(Oe[0])?(we.dimension=Oe[0].length,we.dtype=mt||Sp(Oe[0])||$1,ft=O1(Oe,[Oe.length,Oe[0].length],we.dtype),tt(we,ft,it),xt?we.persistentData=ft:Ht.freeType(ft)):F.raise("invalid buffer data")}}else if(t(Oe))we.dtype=mt||Sp(Oe),we.dimension=Ve,tt(we,Oe,it),xt&&(we.persistentData=new Uint8Array(new Uint8Array(Oe.buffer)));else if(ja(Oe)){Xe=Oe.shape;var tr=Oe.stride,gt=Oe.offset,st=0,He=0,Qt=0,sr=0;Xe.length===1?(st=Xe[0],He=1,Qt=tr[0],sr=0):Xe.length===2?(st=Xe[0],He=Xe[1],Qt=tr[0],sr=tr[1]):F.raise("invalid shape"),we.dtype=mt||Sp(Oe.data)||$1,we.dimension=He;var At=Ht.allocType(we.dtype,st*He);hC(At,Oe.data,st,He,Qt,sr,gt),tt(we,At,it),xt?we.persistentData=At:Ht.freeType(At)}else Oe instanceof ArrayBuffer?(we.dtype=N1,we.dimension=Ve,tt(we,Oe,it),xt&&(we.persistentData=new Uint8Array(new Uint8Array(Oe)))):F.raise("invalid buffer data")}function pt(we){Y.bufferCount--,Ae(we);var Oe=we.buffer;F(Oe,"buffer must not be deleted already"),P.deleteBuffer(Oe),we.buffer=null,delete Ce[we.id]}function Ze(we,Oe,it,mt){Y.bufferCount++;var Ve=new Ie(Oe);Ce[Ve.id]=Ve;function xt(Ye){var ht=cC,Ft=null,tr=0,gt=0,st=1;return Array.isArray(Ye)||t(Ye)||ja(Ye)||Ye instanceof ArrayBuffer?Ft=Ye:typeof Ye=="number"?tr=Ye|0:Ye&&(F.type(Ye,"object","buffer arguments must be an object, a number or an array"),"data"in Ye&&(F(Ft===null||Array.isArray(Ft)||t(Ft)||ja(Ft),"invalid data for buffer"),Ft=Ye.data),"usage"in Ye&&(F.parameter(Ye.usage,xp,"invalid buffer usage"),ht=xp[Ye.usage]),"type"in Ye&&(F.parameter(Ye.type,fu,"invalid buffer type"),gt=fu[Ye.type]),"dimension"in Ye&&(F.type(Ye.dimension,"number","invalid dimension"),st=Ye.dimension|0),"length"in Ye&&(F.nni(tr,"buffer length must be a nonnegative integer"),tr=Ye.length|0)),Ve.bind(),Ft?lt(Ve,Ft,ht,gt,st,mt):(tr&&P.bufferData(Ve.type,tr,ht),Ve.dtype=gt||N1,Ve.usage=ht,Ve.dimension=st,Ve.byteLength=tr),re.profile&&(Ve.stats.size=Ve.byteLength*Js[Ve.dtype]),xt}function Xe(Ye,ht){F(ht+Ye.byteLength<=Ve.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ye.byteLength+" starting from offset "+ht+" to a buffer of size "+Ve.byteLength),P.bufferSubData(Ve.type,ht,Ye)}function ft(Ye,ht){var Ft=(ht||0)|0,tr;if(Ve.bind(),t(Ye)||Ye instanceof ArrayBuffer)Xe(Ye,Ft);else if(Array.isArray(Ye)){if(Ye.length>0)if(typeof Ye[0]=="number"){var gt=Ht.allocType(Ve.dtype,Ye.length);fC(gt,Ye),Xe(gt,Ft),Ht.freeType(gt)}else if(Array.isArray(Ye[0])||t(Ye[0])){tr=uC(Ye);var st=O1(Ye,tr,Ve.dtype);Xe(st,Ft),Ht.freeType(st)}else F.raise("invalid buffer data")}else if(ja(Ye)){tr=Ye.shape;var He=Ye.stride,Qt=0,sr=0,At=0,hr=0;tr.length===1?(Qt=tr[0],sr=1,At=He[0],hr=0):tr.length===2?(Qt=tr[0],sr=tr[1],At=He[0],hr=He[1]):F.raise("invalid shape");var nr=Array.isArray(Ye.data)?Ve.dtype:Sp(Ye.data),cr=Ht.allocType(nr,Qt*sr);hC(cr,Ye.data,Qt,sr,At,hr,Ye.offset),Xe(cr,Ft),Ht.freeType(cr)}else F.raise("invalid data for buffer subdata");return xt}return it||xt(we),xt._reglType="buffer",xt._buffer=Ve,xt.subdata=ft,re.profile&&(xt.stats=Ve.stats),xt.destroy=function(){pt(Ve)},xt}function ct(){Wi(Ce).forEach(function(we){we.buffer=P.createBuffer(),P.bindBuffer(we.type,we.buffer),P.bufferData(we.type,we.persistentData||we.byteLength,we.usage)})}return re.profile&&(Y.getTotalBufferSize=function(){var we=0;return Object.keys(Ce).forEach(function(Oe){we+=Ce[Oe].stats.size}),we}),{create:Ze,createStream:et,destroyStream:ot,clear:function(){Wi(Ce).forEach(pt),qe.forEach(pt)},getBuffer:function(we){return we&&we._buffer instanceof Ie?we._buffer:null},restore:ct,_initBuffer:lt}}var mU=0,yU=0,bU=1,wU=1,xU=4,SU=4,Cc={points:mU,point:yU,lines:bU,line:wU,triangles:xU,triangle:SU,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_U=0,EU=1,wh=4,MU=5120,Ac=5121,dC=5122,Tc=5123,vC=5124,hu=5125,D1=34963,CU=35040,AU=35044;function TU(P,Y,re,Ae){var je={},Ce=0,Ie={uint8:Ac,uint16:Tc};Y.oes_element_index_uint&&(Ie.uint32=hu);function qe(ct){this.id=Ce++,je[this.id]=this,this.buffer=ct,this.primType=wh,this.vertCount=0,this.type=0}qe.prototype.bind=function(){this.buffer.bind()};var et=[];function ot(ct){var we=et.pop();return we||(we=new qe(re.create(null,D1,!0,!1)._buffer)),lt(we,ct,CU,-1,-1,0,0),we}function tt(ct){et.push(ct)}function lt(ct,we,Oe,it,mt,Ve,xt){ct.buffer.bind();var Xe;if(we){var ft=xt;!xt&&(!t(we)||ja(we)&&!t(we.data))&&(ft=Y.oes_element_index_uint?hu:Tc),re._initBuffer(ct.buffer,we,Oe,ft,3)}else P.bufferData(D1,Ve,Oe),ct.buffer.dtype=Xe||Ac,ct.buffer.usage=Oe,ct.buffer.dimension=3,ct.buffer.byteLength=Ve;if(Xe=xt,!xt){switch(ct.buffer.dtype){case Ac:case MU:Xe=Ac;break;case Tc:case dC:Xe=Tc;break;case hu:case vC:Xe=hu;break;default:F.raise("unsupported type for element array")}ct.buffer.dtype=Xe}ct.type=Xe,F(Xe!==hu||!!Y.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ye=mt;Ye<0&&(Ye=ct.buffer.byteLength,Xe===Tc?Ye>>=1:Xe===hu&&(Ye>>=2)),ct.vertCount=Ye;var ht=it;if(it<0){ht=wh;var Ft=ct.buffer.dimension;Ft===1&&(ht=_U),Ft===2&&(ht=EU),Ft===3&&(ht=wh)}ct.primType=ht}function pt(ct){Ae.elementsCount--,F(ct.buffer!==null,"must not double destroy elements"),delete je[ct.id],ct.buffer.destroy(),ct.buffer=null}function Ze(ct,we){var Oe=re.create(null,D1,!0),it=new qe(Oe._buffer);Ae.elementsCount++;function mt(Ve){if(!Ve)Oe(),it.primType=wh,it.vertCount=0,it.type=Ac;else if(typeof Ve=="number")Oe(Ve),it.primType=wh,it.vertCount=Ve|0,it.type=Ac;else{var xt=null,Xe=AU,ft=-1,Ye=-1,ht=0,Ft=0;Array.isArray(Ve)||t(Ve)||ja(Ve)?xt=Ve:(F.type(Ve,"object","invalid arguments for elements"),"data"in Ve&&(xt=Ve.data,F(Array.isArray(xt)||t(xt)||ja(xt),"invalid data for element buffer")),"usage"in Ve&&(F.parameter(Ve.usage,xp,"invalid element buffer usage"),Xe=xp[Ve.usage]),"primitive"in Ve&&(F.parameter(Ve.primitive,Cc,"invalid element buffer primitive"),ft=Cc[Ve.primitive]),"count"in Ve&&(F(typeof Ve.count=="number"&&Ve.count>=0,"invalid vertex count for elements"),Ye=Ve.count|0),"type"in Ve&&(F.parameter(Ve.type,Ie,"invalid buffer type"),Ft=Ie[Ve.type]),"length"in Ve?ht=Ve.length|0:(ht=Ye,Ft===Tc||Ft===dC?ht*=2:(Ft===hu||Ft===vC)&&(ht*=4))),lt(it,xt,Xe,ft,Ye,ht,Ft)}return mt}return mt(ct),mt._reglType="elements",mt._elements=it,mt.subdata=function(Ve,xt){return Oe.subdata(Ve,xt),mt},mt.destroy=function(){pt(it)},mt}return{create:Ze,createStream:ot,destroyStream:tt,getElements:function(ct){return typeof ct=="function"&&ct._elements instanceof qe?ct._elements:null},clear:function(){Wi(je).forEach(pt)}}}var pC=new Float32Array(1),kU=new Uint32Array(pC.buffer),LU=5123;function gC(P){for(var Y=Ht.allocType(LU,P.length),re=0;re<P.length;++re)if(isNaN(P[re]))Y[re]=65535;else if(P[re]===1/0)Y[re]=31744;else if(P[re]===-1/0)Y[re]=64512;else{pC[0]=P[re];var Ae=kU[0],je=Ae>>>31<<15,Ce=(Ae<<1>>>24)-127,Ie=Ae>>13&1023;if(Ce<-24)Y[re]=je;else if(Ce<-14){var qe=-14-Ce;Y[re]=je+(Ie+1024>>qe)}else Ce>15?Y[re]=je+31744:Y[re]=je+(Ce+15<<10)+Ie}return Y}function cn(P){return Array.isArray(P)||t(P)}var mC=function(P){return!(P&P-1)&&!!P},IU=34467,yo=3553,R1=34067,_p=34069,du=6408,P1=6406,Ep=6407,xh=6409,Mp=6410,yC=32854,F1=32855,bC=36194,OU=32819,NU=32820,$U=33635,DU=34042,B1=6402,Cp=34041,z1=35904,G1=35906,kc=36193,j1=33776,U1=33777,W1=33778,H1=33779,wC=35986,xC=35987,SC=34798,_C=35840,EC=35841,MC=35842,CC=35843,AC=36196,Lc=5121,V1=5123,Y1=5125,Sh=5126,RU=10242,PU=10243,FU=10497,X1=33071,BU=33648,zU=10240,GU=10241,K1=9728,jU=9729,q1=9984,TC=9985,kC=9986,Z1=9987,UU=33170,Ap=4352,WU=4353,HU=4354,VU=34046,YU=3317,XU=37440,KU=37441,qU=37443,LC=37444,_h=33984,ZU=[q1,kC,TC,Z1],Tp=[0,xh,Mp,Ep,du],da={};da[xh]=da[P1]=da[B1]=1,da[Cp]=da[Mp]=2,da[Ep]=da[z1]=3,da[du]=da[G1]=4;function Ic(P){return"[object "+P+"]"}var IC=Ic("HTMLCanvasElement"),OC=Ic("OffscreenCanvas"),NC=Ic("CanvasRenderingContext2D"),$C=Ic("ImageBitmap"),DC=Ic("HTMLImageElement"),RC=Ic("HTMLVideoElement"),QU=Object.keys(I1).concat([IC,OC,NC,$C,DC,RC]),Oc=[];Oc[Lc]=1,Oc[Sh]=4,Oc[kc]=2,Oc[V1]=2,Oc[Y1]=4;var Xn=[];Xn[yC]=2,Xn[F1]=2,Xn[bC]=2,Xn[Cp]=4,Xn[j1]=.5,Xn[U1]=.5,Xn[W1]=1,Xn[H1]=1,Xn[wC]=.5,Xn[xC]=1,Xn[SC]=1,Xn[_C]=.5,Xn[EC]=.25,Xn[MC]=.5,Xn[CC]=.25,Xn[AC]=.5;function PC(P){return Array.isArray(P)&&(P.length===0||typeof P[0]=="number")}function FC(P){if(!Array.isArray(P))return!1;var Y=P.length;return!(Y===0||!cn(P[0]))}function vu(P){return Object.prototype.toString.call(P)}function BC(P){return vu(P)===IC}function zC(P){return vu(P)===OC}function JU(P){return vu(P)===NC}function eW(P){return vu(P)===$C}function tW(P){return vu(P)===DC}function rW(P){return vu(P)===RC}function Q1(P){if(!P)return!1;var Y=vu(P);return QU.indexOf(Y)>=0?!0:PC(P)||FC(P)||ja(P)}function GC(P){return I1[Object.prototype.toString.call(P)]|0}function nW(P,Y){var re=Y.length;switch(P.type){case Lc:case V1:case Y1:case Sh:var Ae=Ht.allocType(P.type,re);Ae.set(Y),P.data=Ae;break;case kc:P.data=gC(Y);break;default:F.raise("unsupported texture type, must specify a typed array")}}function jC(P,Y){return Ht.allocType(P.type===kc?Sh:P.type,Y)}function UC(P,Y){P.type===kc?(P.data=gC(Y),Ht.freeType(Y)):P.data=Y}function iW(P,Y,re,Ae,je,Ce){for(var Ie=P.width,qe=P.height,et=P.channels,ot=Ie*qe*et,tt=jC(P,ot),lt=0,pt=0;pt<qe;++pt)for(var Ze=0;Ze<Ie;++Ze)for(var ct=0;ct<et;++ct)tt[lt++]=Y[re*Ze+Ae*pt+je*ct+Ce];UC(P,tt)}function kp(P,Y,re,Ae,je,Ce){var Ie;if(typeof Xn[P]<"u"?Ie=Xn[P]:Ie=da[P]*Oc[Y],Ce&&(Ie*=6),je){for(var qe=0,et=re;et>=1;)qe+=Ie*et*et,et/=2;return qe}else return Ie*re*Ae}function aW(P,Y,re,Ae,je,Ce,Ie){var qe={"don't care":Ap,"dont care":Ap,nice:HU,fast:WU},et={repeat:FU,clamp:X1,mirror:BU},ot={nearest:K1,linear:jU},tt=n({mipmap:Z1,"nearest mipmap nearest":q1,"linear mipmap nearest":TC,"nearest mipmap linear":kC,"linear mipmap linear":Z1},ot),lt={none:0,browser:LC},pt={uint8:Lc,rgba4:OU,rgb565:$U,"rgb5 a1":NU},Ze={alpha:P1,luminance:xh,"luminance alpha":Mp,rgb:Ep,rgba:du,rgba4:yC,"rgb5 a1":F1,rgb565:bC},ct={};Y.ext_srgb&&(Ze.srgb=z1,Ze.srgba=G1),Y.oes_texture_float&&(pt.float32=pt.float=Sh),Y.oes_texture_half_float&&(pt.float16=pt["half float"]=kc),Y.webgl_depth_texture&&(n(Ze,{depth:B1,"depth stencil":Cp}),n(pt,{uint16:V1,uint32:Y1,"depth stencil":DU})),Y.webgl_compressed_texture_s3tc&&n(ct,{"rgb s3tc dxt1":j1,"rgba s3tc dxt1":U1,"rgba s3tc dxt3":W1,"rgba s3tc dxt5":H1}),Y.webgl_compressed_texture_atc&&n(ct,{"rgb atc":wC,"rgba atc explicit alpha":xC,"rgba atc interpolated alpha":SC}),Y.webgl_compressed_texture_pvrtc&&n(ct,{"rgb pvrtc 4bppv1":_C,"rgb pvrtc 2bppv1":EC,"rgba pvrtc 4bppv1":MC,"rgba pvrtc 2bppv1":CC}),Y.webgl_compressed_texture_etc1&&(ct["rgb etc1"]=AC);var we=Array.prototype.slice.call(P.getParameter(IU));Object.keys(ct).forEach(function(te){var Te=ct[te];we.indexOf(Te)>=0&&(Ze[te]=Te)});var Oe=Object.keys(Ze);re.textureFormats=Oe;var it=[];Object.keys(Ze).forEach(function(te){var Te=Ze[te];it[Te]=te});var mt=[];Object.keys(pt).forEach(function(te){var Te=pt[te];mt[Te]=te});var Ve=[];Object.keys(ot).forEach(function(te){var Te=ot[te];Ve[Te]=te});var xt=[];Object.keys(tt).forEach(function(te){var Te=tt[te];xt[Te]=te});var Xe=[];Object.keys(et).forEach(function(te){var Te=et[te];Xe[Te]=te});var ft=Oe.reduce(function(te,Te){var Ee=Ze[Te];return Ee===xh||Ee===P1||Ee===xh||Ee===Mp||Ee===B1||Ee===Cp||Y.ext_srgb&&(Ee===z1||Ee===G1)?te[Ee]=Ee:Ee===F1||Te.indexOf("rgba")>=0?te[Ee]=du:te[Ee]=Ep,te},{});function Ye(){this.internalformat=du,this.format=du,this.type=Lc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=LC,this.width=0,this.height=0,this.channels=0}function ht(te,Te){te.internalformat=Te.internalformat,te.format=Te.format,te.type=Te.type,te.compressed=Te.compressed,te.premultiplyAlpha=Te.premultiplyAlpha,te.flipY=Te.flipY,te.unpackAlignment=Te.unpackAlignment,te.colorSpace=Te.colorSpace,te.width=Te.width,te.height=Te.height,te.channels=Te.channels}function Ft(te,Te){if(!(typeof Te!="object"||!Te)){if("premultiplyAlpha"in Te&&(F.type(Te.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),te.premultiplyAlpha=Te.premultiplyAlpha),"flipY"in Te&&(F.type(Te.flipY,"boolean","invalid texture flip"),te.flipY=Te.flipY),"alignment"in Te&&(F.oneOf(Te.alignment,[1,2,4,8],"invalid texture unpack alignment"),te.unpackAlignment=Te.alignment),"colorSpace"in Te&&(F.parameter(Te.colorSpace,lt,"invalid colorSpace"),te.colorSpace=lt[Te.colorSpace]),"type"in Te){var Ee=Te.type;F(Y.oes_texture_float||!(Ee==="float"||Ee==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),F(Y.oes_texture_half_float||!(Ee==="half float"||Ee==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),F(Y.webgl_depth_texture||!(Ee==="uint16"||Ee==="uint32"||Ee==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(Ee,pt,"invalid texture type"),te.type=pt[Ee]}var Et=te.width,dr=te.height,q=te.channels,H=!1;"shape"in Te?(F(Array.isArray(Te.shape)&&Te.shape.length>=2,"shape must be an array"),Et=Te.shape[0],dr=Te.shape[1],Te.shape.length===3&&(q=Te.shape[2],F(q>0&&q<=4,"invalid number of channels"),H=!0),F(Et>=0&&Et<=re.maxTextureSize,"invalid width"),F(dr>=0&&dr<=re.maxTextureSize,"invalid height")):("radius"in Te&&(Et=dr=Te.radius,F(Et>=0&&Et<=re.maxTextureSize,"invalid radius")),"width"in Te&&(Et=Te.width,F(Et>=0&&Et<=re.maxTextureSize,"invalid width")),"height"in Te&&(dr=Te.height,F(dr>=0&&dr<=re.maxTextureSize,"invalid height")),"channels"in Te&&(q=Te.channels,F(q>0&&q<=4,"invalid number of channels"),H=!0)),te.width=Et|0,te.height=dr|0,te.channels=q|0;var ue=!1;if("format"in Te){var ye=Te.format;F(Y.webgl_depth_texture||!(ye==="depth"||ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(ye,Ze,"invalid texture format");var Se=te.internalformat=Ze[ye];te.format=ft[Se],ye in pt&&("type"in Te||(te.type=pt[ye])),ye in ct&&(te.compressed=!0),ue=!0}!H&&ue?te.channels=da[te.format]:H&&!ue?te.channels!==Tp[te.format]&&(te.format=te.internalformat=Tp[te.channels]):ue&&H&&F(te.channels===da[te.format],"number of channels inconsistent with specified format")}}function tr(te){P.pixelStorei(XU,te.flipY),P.pixelStorei(KU,te.premultiplyAlpha),P.pixelStorei(qU,te.colorSpace),P.pixelStorei(YU,te.unpackAlignment)}function gt(){Ye.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function st(te,Te){var Ee=null;if(Q1(Te)?Ee=Te:Te&&(F.type(Te,"object","invalid pixel data type"),Ft(te,Te),"x"in Te&&(te.xOffset=Te.x|0),"y"in Te&&(te.yOffset=Te.y|0),Q1(Te.data)&&(Ee=Te.data)),F(!te.compressed||Ee instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Te.copy){F(!Ee,"can not specify copy and data field for the same texture");var Et=je.viewportWidth,dr=je.viewportHeight;te.width=te.width||Et-te.xOffset,te.height=te.height||dr-te.yOffset,te.needsCopy=!0,F(te.xOffset>=0&&te.xOffset<Et&&te.yOffset>=0&&te.yOffset<dr&&te.width>0&&te.width<=Et&&te.height>0&&te.height<=dr,"copy texture read out of bounds")}else if(!Ee)te.width=te.width||1,te.height=te.height||1,te.channels=te.channels||4;else if(t(Ee))te.channels=te.channels||4,te.data=Ee,!("type"in Te)&&te.type===Lc&&(te.type=GC(Ee));else if(PC(Ee))te.channels=te.channels||4,nW(te,Ee),te.alignment=1,te.needsFree=!0;else if(ja(Ee)){var q=Ee.data;!Array.isArray(q)&&te.type===Lc&&(te.type=GC(q));var H=Ee.shape,ue=Ee.stride,ye,Se,he,fe,ve,Z;H.length===3?(he=H[2],Z=ue[2]):(F(H.length===2,"invalid ndarray pixel data, must be 2 or 3D"),he=1,Z=1),ye=H[0],Se=H[1],fe=ue[0],ve=ue[1],te.alignment=1,te.width=ye,te.height=Se,te.channels=he,te.format=te.internalformat=Tp[he],te.needsFree=!0,iW(te,q,fe,ve,Z,Ee.offset)}else if(BC(Ee)||zC(Ee)||JU(Ee))BC(Ee)||zC(Ee)?te.element=Ee:te.element=Ee.canvas,te.width=te.element.width,te.height=te.element.height,te.channels=4;else if(eW(Ee))te.element=Ee,te.width=Ee.width,te.height=Ee.height,te.channels=4;else if(tW(Ee))te.element=Ee,te.width=Ee.naturalWidth,te.height=Ee.naturalHeight,te.channels=4;else if(rW(Ee))te.element=Ee,te.width=Ee.videoWidth,te.height=Ee.videoHeight,te.channels=4;else if(FC(Ee)){var le=te.width||Ee[0].length,K=te.height||Ee.length,ge=te.channels;cn(Ee[0][0])?ge=ge||Ee[0][0].length:ge=ge||1;for(var _e=wp.shape(Ee),Be=1,Ue=0;Ue<_e.length;++Ue)Be*=_e[Ue];var Ne=jC(te,Be);wp.flatten(Ee,_e,"",Ne),UC(te,Ne),te.alignment=1,te.width=le,te.height=K,te.channels=ge,te.format=te.internalformat=Tp[ge],te.needsFree=!0}te.type===Sh?F(re.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):te.type===kc&&F(re.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function He(te,Te,Ee){var Et=te.element,dr=te.data,q=te.internalformat,H=te.format,ue=te.type,ye=te.width,Se=te.height;tr(te),Et?P.texImage2D(Te,Ee,H,H,ue,Et):te.compressed?P.compressedTexImage2D(Te,Ee,q,ye,Se,0,dr):te.needsCopy?(Ae(),P.copyTexImage2D(Te,Ee,H,te.xOffset,te.yOffset,ye,Se,0)):P.texImage2D(Te,Ee,H,ye,Se,0,H,ue,dr||null)}function Qt(te,Te,Ee,Et,dr){var q=te.element,H=te.data,ue=te.internalformat,ye=te.format,Se=te.type,he=te.width,fe=te.height;tr(te),q?P.texSubImage2D(Te,dr,Ee,Et,ye,Se,q):te.compressed?P.compressedTexSubImage2D(Te,dr,Ee,Et,ue,he,fe,H):te.needsCopy?(Ae(),P.copyTexSubImage2D(Te,dr,Ee,Et,te.xOffset,te.yOffset,he,fe)):P.texSubImage2D(Te,dr,Ee,Et,he,fe,ye,Se,H)}var sr=[];function At(){return sr.pop()||new gt}function hr(te){te.needsFree&&Ht.freeType(te.data),gt.call(te),sr.push(te)}function nr(){Ye.call(this),this.genMipmaps=!1,this.mipmapHint=Ap,this.mipmask=0,this.images=Array(16)}function cr(te,Te,Ee){var Et=te.images[0]=At();te.mipmask=1,Et.width=te.width=Te,Et.height=te.height=Ee,Et.channels=te.channels=4}function Ar(te,Te){var Ee=null;if(Q1(Te))Ee=te.images[0]=At(),ht(Ee,te),st(Ee,Te),te.mipmask=1;else if(Ft(te,Te),Array.isArray(Te.mipmap))for(var Et=Te.mipmap,dr=0;dr<Et.length;++dr)Ee=te.images[dr]=At(),ht(Ee,te),Ee.width>>=dr,Ee.height>>=dr,st(Ee,Et[dr]),te.mipmask|=1<<dr;else Ee=te.images[0]=At(),ht(Ee,te),st(Ee,Te),te.mipmask=1;ht(te,te.images[0]),te.compressed&&(te.internalformat===j1||te.internalformat===U1||te.internalformat===W1||te.internalformat===H1)&&F(te.width%4===0&&te.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function gn(te,Te){for(var Ee=te.images,Et=0;Et<Ee.length;++Et){if(!Ee[Et])return;He(Ee[Et],Te,Et)}}var Nn=[];function gr(){var te=Nn.pop()||new nr;Ye.call(te),te.mipmask=0;for(var Te=0;Te<16;++Te)te.images[Te]=null;return te}function Cn(te){for(var Te=te.images,Ee=0;Ee<Te.length;++Ee)Te[Ee]&&hr(Te[Ee]),Te[Ee]=null;Nn.push(te)}function Hr(){this.minFilter=K1,this.magFilter=K1,this.wrapS=X1,this.wrapT=X1,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ap}function mn(te,Te){if("min"in Te){var Ee=Te.min;F.parameter(Ee,tt),te.minFilter=tt[Ee],ZU.indexOf(te.minFilter)>=0&&!("faces"in Te)&&(te.genMipmaps=!0)}if("mag"in Te){var Et=Te.mag;F.parameter(Et,ot),te.magFilter=ot[Et]}var dr=te.wrapS,q=te.wrapT;if("wrap"in Te){var H=Te.wrap;typeof H=="string"?(F.parameter(H,et),dr=q=et[H]):Array.isArray(H)&&(F.parameter(H[0],et),F.parameter(H[1],et),dr=et[H[0]],q=et[H[1]])}else{if("wrapS"in Te){var ue=Te.wrapS;F.parameter(ue,et),dr=et[ue]}if("wrapT"in Te){var ye=Te.wrapT;F.parameter(ye,et),q=et[ye]}}if(te.wrapS=dr,te.wrapT=q,"anisotropic"in Te){var Se=Te.anisotropic;F(typeof Se=="number"&&Se>=1&&Se<=re.maxAnisotropic,"aniso samples must be between 1 and "),te.anisotropic=Te.anisotropic}if("mipmap"in Te){var he=!1;switch(typeof Te.mipmap){case"string":F.parameter(Te.mipmap,qe,"invalid mipmap hint"),te.mipmapHint=qe[Te.mipmap],te.genMipmaps=!0,he=!0;break;case"boolean":he=te.genMipmaps=Te.mipmap;break;case"object":F(Array.isArray(Te.mipmap),"invalid mipmap type"),te.genMipmaps=!1,he=!0;break;default:F.raise("invalid mipmap type")}he&&!("min"in Te)&&(te.minFilter=q1)}}function An(te,Te){P.texParameteri(Te,GU,te.minFilter),P.texParameteri(Te,zU,te.magFilter),P.texParameteri(Te,RU,te.wrapS),P.texParameteri(Te,PU,te.wrapT),Y.ext_texture_filter_anisotropic&&P.texParameteri(Te,VU,te.anisotropic),te.genMipmaps&&(P.hint(UU,te.mipmapHint),P.generateMipmap(Te))}var Tn=0,Rn={},Kn=re.maxTextureUnits,fn=Array(Kn).map(function(){return null});function lr(te){Ye.call(this),this.mipmask=0,this.internalformat=du,this.id=Tn++,this.refCount=1,this.target=te,this.texture=P.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Hr,Ie.profile&&(this.stats={size:0})}function qn(te){P.activeTexture(_h),P.bindTexture(te.target,te.texture)}function Dr(){var te=fn[0];te?P.bindTexture(te.target,te.texture):P.bindTexture(yo,null)}function Ut(te){var Te=te.texture;F(Te,"must not double destroy texture");var Ee=te.unit,Et=te.target;Ee>=0&&(P.activeTexture(_h+Ee),P.bindTexture(Et,null),fn[Ee]=null),P.deleteTexture(Te),te.texture=null,te.params=null,te.pixels=null,te.refCount=0,delete Rn[te.id],Ce.textureCount--}n(lr.prototype,{bind:function(){var te=this;te.bindCount+=1;var Te=te.unit;if(Te<0){for(var Ee=0;Ee<Kn;++Ee){var Et=fn[Ee];if(Et){if(Et.bindCount>0)continue;Et.unit=-1}fn[Ee]=te,Te=Ee;break}Te>=Kn&&F.raise("insufficient number of texture units"),Ie.profile&&Ce.maxTextureUnits<Te+1&&(Ce.maxTextureUnits=Te+1),te.unit=Te,P.activeTexture(_h+Te),P.bindTexture(te.target,te.texture)}return Te},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ut(this)}});function vr(te,Te){var Ee=new lr(yo);Rn[Ee.id]=Ee,Ce.textureCount++;function Et(H,ue){var ye=Ee.texInfo;Hr.call(ye);var Se=gr();return typeof H=="number"?typeof ue=="number"?cr(Se,H|0,ue|0):cr(Se,H|0,H|0):H?(F.type(H,"object","invalid arguments to regl.texture"),mn(ye,H),Ar(Se,H)):cr(Se,1,1),ye.genMipmaps&&(Se.mipmask=(Se.width<<1)-1),Ee.mipmask=Se.mipmask,ht(Ee,Se),F.texture2D(ye,Se,re),Ee.internalformat=Se.internalformat,Et.width=Se.width,Et.height=Se.height,qn(Ee),gn(Se,yo),An(ye,yo),Dr(),Cn(Se),Ie.profile&&(Ee.stats.size=kp(Ee.internalformat,Ee.type,Se.width,Se.height,ye.genMipmaps,!1)),Et.format=it[Ee.internalformat],Et.type=mt[Ee.type],Et.mag=Ve[ye.magFilter],Et.min=xt[ye.minFilter],Et.wrapS=Xe[ye.wrapS],Et.wrapT=Xe[ye.wrapT],Et}function dr(H,ue,ye,Se){F(!!H,"must specify image data");var he=ue|0,fe=ye|0,ve=Se|0,Z=At();return ht(Z,Ee),Z.width=0,Z.height=0,st(Z,H),Z.width=Z.width||(Ee.width>>ve)-he,Z.height=Z.height||(Ee.height>>ve)-fe,F(Ee.type===Z.type&&Ee.format===Z.format&&Ee.internalformat===Z.internalformat,"incompatible format for texture.subimage"),F(he>=0&&fe>=0&&he+Z.width<=Ee.width&&fe+Z.height<=Ee.height,"texture.subimage write out of bounds"),F(Ee.mipmask&1<<ve,"missing mipmap data"),F(Z.data||Z.element||Z.needsCopy,"missing image data"),qn(Ee),Qt(Z,yo,he,fe,ve),Dr(),hr(Z),Et}function q(H,ue){var ye=H|0,Se=ue|0||ye;if(ye===Ee.width&&Se===Ee.height)return Et;Et.width=Ee.width=ye,Et.height=Ee.height=Se,qn(Ee);for(var he=0;Ee.mipmask>>he;++he){var fe=ye>>he,ve=Se>>he;if(!fe||!ve)break;P.texImage2D(yo,he,Ee.format,fe,ve,0,Ee.format,Ee.type,null)}return Dr(),Ie.profile&&(Ee.stats.size=kp(Ee.internalformat,Ee.type,ye,Se,!1,!1)),Et}return Et(te,Te),Et.subimage=dr,Et.resize=q,Et._reglType="texture2d",Et._texture=Ee,Ie.profile&&(Et.stats=Ee.stats),Et.destroy=function(){Ee.decRef()},Et}function _r(te,Te,Ee,Et,dr,q){var H=new lr(R1);Rn[H.id]=H,Ce.cubeCount++;var ue=new Array(6);function ye(fe,ve,Z,le,K,ge){var _e,Be=H.texInfo;for(Hr.call(Be),_e=0;_e<6;++_e)ue[_e]=gr();if(typeof fe=="number"||!fe){var Ue=fe|0||1;for(_e=0;_e<6;++_e)cr(ue[_e],Ue,Ue)}else if(typeof fe=="object")if(ve)Ar(ue[0],fe),Ar(ue[1],ve),Ar(ue[2],Z),Ar(ue[3],le),Ar(ue[4],K),Ar(ue[5],ge);else if(mn(Be,fe),Ft(H,fe),"faces"in fe){var Ne=fe.faces;for(F(Array.isArray(Ne)&&Ne.length===6,"cube faces must be a length 6 array"),_e=0;_e<6;++_e)F(typeof Ne[_e]=="object"&&!!Ne[_e],"invalid input for cube map face"),ht(ue[_e],H),Ar(ue[_e],Ne[_e])}else for(_e=0;_e<6;++_e)Ar(ue[_e],fe);else F.raise("invalid arguments to cube map");for(ht(H,ue[0]),re.npotTextureCube||F(mC(H.width)&&mC(H.height),"your browser does not support non power or two texture dimensions"),Be.genMipmaps?H.mipmask=(ue[0].width<<1)-1:H.mipmask=ue[0].mipmask,F.textureCube(H,Be,ue,re),H.internalformat=ue[0].internalformat,ye.width=ue[0].width,ye.height=ue[0].height,qn(H),_e=0;_e<6;++_e)gn(ue[_e],_p+_e);for(An(Be,R1),Dr(),Ie.profile&&(H.stats.size=kp(H.internalformat,H.type,ye.width,ye.height,Be.genMipmaps,!0)),ye.format=it[H.internalformat],ye.type=mt[H.type],ye.mag=Ve[Be.magFilter],ye.min=xt[Be.minFilter],ye.wrapS=Xe[Be.wrapS],ye.wrapT=Xe[Be.wrapT],_e=0;_e<6;++_e)Cn(ue[_e]);return ye}function Se(fe,ve,Z,le,K){F(!!ve,"must specify image data"),F(typeof fe=="number"&&fe===(fe|0)&&fe>=0&&fe<6,"invalid face");var ge=Z|0,_e=le|0,Be=K|0,Ue=At();return ht(Ue,H),Ue.width=0,Ue.height=0,st(Ue,ve),Ue.width=Ue.width||(H.width>>Be)-ge,Ue.height=Ue.height||(H.height>>Be)-_e,F(H.type===Ue.type&&H.format===Ue.format&&H.internalformat===Ue.internalformat,"incompatible format for texture.subimage"),F(ge>=0&&_e>=0&&ge+Ue.width<=H.width&&_e+Ue.height<=H.height,"texture.subimage write out of bounds"),F(H.mipmask&1<<Be,"missing mipmap data"),F(Ue.data||Ue.element||Ue.needsCopy,"missing image data"),qn(H),Qt(Ue,_p+fe,ge,_e,Be),Dr(),hr(Ue),ye}function he(fe){var ve=fe|0;if(ve!==H.width){ye.width=H.width=ve,ye.height=H.height=ve,qn(H);for(var Z=0;Z<6;++Z)for(var le=0;H.mipmask>>le;++le)P.texImage2D(_p+Z,le,H.format,ve>>le,ve>>le,0,H.format,H.type,null);return Dr(),Ie.profile&&(H.stats.size=kp(H.internalformat,H.type,ye.width,ye.height,!1,!0)),ye}}return ye(te,Te,Ee,Et,dr,q),ye.subimage=Se,ye.resize=he,ye._reglType="textureCube",ye._texture=H,Ie.profile&&(ye.stats=H.stats),ye.destroy=function(){H.decRef()},ye}function hn(){for(var te=0;te<Kn;++te)P.activeTexture(_h+te),P.bindTexture(yo,null),fn[te]=null;Wi(Rn).forEach(Ut),Ce.cubeCount=0,Ce.textureCount=0}Ie.profile&&(Ce.getTotalTextureSize=function(){var te=0;return Object.keys(Rn).forEach(function(Te){te+=Rn[Te].stats.size}),te});function wo(){for(var te=0;te<Kn;++te){var Te=fn[te];Te&&(Te.bindCount=0,Te.unit=-1,fn[te]=null)}Wi(Rn).forEach(function(Ee){Ee.texture=P.createTexture(),P.bindTexture(Ee.target,Ee.texture);for(var Et=0;Et<32;++Et)if(Ee.mipmask&1<<Et)if(Ee.target===yo)P.texImage2D(yo,Et,Ee.internalformat,Ee.width>>Et,Ee.height>>Et,0,Ee.internalformat,Ee.type,null);else for(var dr=0;dr<6;++dr)P.texImage2D(_p+dr,Et,Ee.internalformat,Ee.width>>Et,Ee.height>>Et,0,Ee.internalformat,Ee.type,null);An(Ee.texInfo,Ee.target)})}function xu(){for(var te=0;te<Kn;++te){var Te=fn[te];Te&&(Te.bindCount=0,Te.unit=-1,fn[te]=null),P.activeTexture(_h+te),P.bindTexture(yo,null),P.bindTexture(R1,null)}}return{create2D:vr,createCube:_r,clear:hn,getTexture:function(te){return null},restore:wo,refresh:xu}}var el=36161,Lp=32854,WC=32855,HC=36194,VC=33189,YC=36168,XC=34041,KC=35907,qC=34836,ZC=34842,QC=34843,Ua=[];Ua[Lp]=2,Ua[WC]=2,Ua[HC]=2,Ua[VC]=2,Ua[YC]=1,Ua[XC]=4,Ua[KC]=4,Ua[qC]=16,Ua[ZC]=8,Ua[QC]=6;function JC(P,Y,re){return Ua[P]*Y*re}var oW=function(P,Y,re,Ae,je){var Ce={rgba4:Lp,rgb565:HC,"rgb5 a1":WC,depth:VC,stencil:YC,"depth stencil":XC};Y.ext_srgb&&(Ce.srgba=KC),Y.ext_color_buffer_half_float&&(Ce.rgba16f=ZC,Ce.rgb16f=QC),Y.webgl_color_buffer_float&&(Ce.rgba32f=qC);var Ie=[];Object.keys(Ce).forEach(function(Ze){var ct=Ce[Ze];Ie[ct]=Ze});var qe=0,et={};function ot(Ze){this.id=qe++,this.refCount=1,this.renderbuffer=Ze,this.format=Lp,this.width=0,this.height=0,je.profile&&(this.stats={size:0})}ot.prototype.decRef=function(){--this.refCount<=0&&tt(this)};function tt(Ze){var ct=Ze.renderbuffer;F(ct,"must not double destroy renderbuffer"),P.bindRenderbuffer(el,null),P.deleteRenderbuffer(ct),Ze.renderbuffer=null,Ze.refCount=0,delete et[Ze.id],Ae.renderbufferCount--}function lt(Ze,ct){var we=new ot(P.createRenderbuffer());et[we.id]=we,Ae.renderbufferCount++;function Oe(mt,Ve){var xt=0,Xe=0,ft=Lp;if(typeof mt=="object"&&mt){var Ye=mt;if("shape"in Ye){var ht=Ye.shape;F(Array.isArray(ht)&&ht.length>=2,"invalid renderbuffer shape"),xt=ht[0]|0,Xe=ht[1]|0}else"radius"in Ye&&(xt=Xe=Ye.radius|0),"width"in Ye&&(xt=Ye.width|0),"height"in Ye&&(Xe=Ye.height|0);"format"in Ye&&(F.parameter(Ye.format,Ce,"invalid renderbuffer format"),ft=Ce[Ye.format])}else typeof mt=="number"?(xt=mt|0,typeof Ve=="number"?Xe=Ve|0:Xe=xt):mt?F.raise("invalid arguments to renderbuffer constructor"):xt=Xe=1;if(F(xt>0&&Xe>0&&xt<=re.maxRenderbufferSize&&Xe<=re.maxRenderbufferSize,"invalid renderbuffer size"),!(xt===we.width&&Xe===we.height&&ft===we.format))return Oe.width=we.width=xt,Oe.height=we.height=Xe,we.format=ft,P.bindRenderbuffer(el,we.renderbuffer),P.renderbufferStorage(el,ft,xt,Xe),F(P.getError()===0,"invalid render buffer format"),je.profile&&(we.stats.size=JC(we.format,we.width,we.height)),Oe.format=Ie[we.format],Oe}function it(mt,Ve){var xt=mt|0,Xe=Ve|0||xt;return xt===we.width&&Xe===we.height||(F(xt>0&&Xe>0&&xt<=re.maxRenderbufferSize&&Xe<=re.maxRenderbufferSize,"invalid renderbuffer size"),Oe.width=we.width=xt,Oe.height=we.height=Xe,P.bindRenderbuffer(el,we.renderbuffer),P.renderbufferStorage(el,we.format,xt,Xe),F(P.getError()===0,"invalid render buffer format"),je.profile&&(we.stats.size=JC(we.format,we.width,we.height))),Oe}return Oe(Ze,ct),Oe.resize=it,Oe._reglType="renderbuffer",Oe._renderbuffer=we,je.profile&&(Oe.stats=we.stats),Oe.destroy=function(){we.decRef()},Oe}je.profile&&(Ae.getTotalRenderbufferSize=function(){var Ze=0;return Object.keys(et).forEach(function(ct){Ze+=et[ct].stats.size}),Ze});function pt(){Wi(et).forEach(function(Ze){Ze.renderbuffer=P.createRenderbuffer(),P.bindRenderbuffer(el,Ze.renderbuffer),P.renderbufferStorage(el,Ze.format,Ze.width,Ze.height)}),P.bindRenderbuffer(el,null)}return{create:lt,clear:function(){Wi(et).forEach(tt)},restore:pt}},fs=36160,J1=36161,pu=3553,Ip=34069,eA=36064,tA=36096,rA=36128,nA=33306,iA=36053,sW=36054,lW=36055,uW=36057,cW=36061,fW=36193,hW=5121,dW=5126,aA=6407,oA=6408,vW=6402,pW=[aA,oA],eb=[];eb[oA]=4,eb[aA]=3;var Op=[];Op[hW]=1,Op[dW]=4,Op[fW]=2;var gW=32854,mW=32855,yW=36194,bW=33189,wW=36168,sA=34041,xW=35907,SW=34836,_W=34842,EW=34843,MW=[gW,mW,yW,xW,_W,EW,SW],Nc={};Nc[iA]="complete",Nc[sW]="incomplete attachment",Nc[uW]="incomplete dimensions",Nc[lW]="incomplete, missing attachment",Nc[cW]="unsupported";function CW(P,Y,re,Ae,je,Ce){var Ie={cur:null,next:null,dirty:!1,setFBO:null},qe=["rgba"],et=["rgba4","rgb565","rgb5 a1"];Y.ext_srgb&&et.push("srgba"),Y.ext_color_buffer_half_float&&et.push("rgba16f","rgb16f"),Y.webgl_color_buffer_float&&et.push("rgba32f");var ot=["uint8"];Y.oes_texture_half_float&&ot.push("half float","float16"),Y.oes_texture_float&&ot.push("float","float32");function tt(gt,st,He){this.target=gt,this.texture=st,this.renderbuffer=He;var Qt=0,sr=0;st?(Qt=st.width,sr=st.height):He&&(Qt=He.width,sr=He.height),this.width=Qt,this.height=sr}function lt(gt){gt&&(gt.texture&&gt.texture._texture.decRef(),gt.renderbuffer&&gt.renderbuffer._renderbuffer.decRef())}function pt(gt,st,He){if(gt)if(gt.texture){var Qt=gt.texture._texture,sr=Math.max(1,Qt.width),At=Math.max(1,Qt.height);F(sr===st&&At===He,"inconsistent width/height for supplied texture"),Qt.refCount+=1}else{var hr=gt.renderbuffer._renderbuffer;F(hr.width===st&&hr.height===He,"inconsistent width/height for renderbuffer"),hr.refCount+=1}}function Ze(gt,st){st&&(st.texture?P.framebufferTexture2D(fs,gt,st.target,st.texture._texture.texture,0):P.framebufferRenderbuffer(fs,gt,J1,st.renderbuffer._renderbuffer.renderbuffer))}function ct(gt){var st=pu,He=null,Qt=null,sr=gt;typeof gt=="object"&&(sr=gt.data,"target"in gt&&(st=gt.target|0)),F.type(sr,"function","invalid attachment data");var At=sr._reglType;return At==="texture2d"?(He=sr,F(st===pu)):At==="textureCube"?(He=sr,F(st>=Ip&&st<Ip+6,"invalid cube map target")):At==="renderbuffer"?(Qt=sr,st=J1):F.raise("invalid regl object for attachment"),new tt(st,He,Qt)}function we(gt,st,He,Qt,sr){if(He){var At=Ae.create2D({width:gt,height:st,format:Qt,type:sr});return At._texture.refCount=0,new tt(pu,At,null)}else{var hr=je.create({width:gt,height:st,format:Qt});return hr._renderbuffer.refCount=0,new tt(J1,null,hr)}}function Oe(gt){return gt&&(gt.texture||gt.renderbuffer)}function it(gt,st,He){gt&&(gt.texture?gt.texture.resize(st,He):gt.renderbuffer&&gt.renderbuffer.resize(st,He),gt.width=st,gt.height=He)}var mt=0,Ve={};function xt(){this.id=mt++,Ve[this.id]=this,this.framebuffer=P.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Xe(gt){gt.colorAttachments.forEach(lt),lt(gt.depthAttachment),lt(gt.stencilAttachment),lt(gt.depthStencilAttachment)}function ft(gt){var st=gt.framebuffer;F(st,"must not double destroy framebuffer"),P.deleteFramebuffer(st),gt.framebuffer=null,Ce.framebufferCount--,delete Ve[gt.id]}function Ye(gt){var st;P.bindFramebuffer(fs,gt.framebuffer);var He=gt.colorAttachments;for(st=0;st<He.length;++st)Ze(eA+st,He[st]);for(st=He.length;st<re.maxColorAttachments;++st)P.framebufferTexture2D(fs,eA+st,pu,null,0);P.framebufferTexture2D(fs,nA,pu,null,0),P.framebufferTexture2D(fs,tA,pu,null,0),P.framebufferTexture2D(fs,rA,pu,null,0),Ze(tA,gt.depthAttachment),Ze(rA,gt.stencilAttachment),Ze(nA,gt.depthStencilAttachment);var Qt=P.checkFramebufferStatus(fs);!P.isContextLost()&&Qt!==iA&&F.raise("framebuffer configuration not supported, status = "+Nc[Qt]),P.bindFramebuffer(fs,Ie.next?Ie.next.framebuffer:null),Ie.cur=Ie.next,P.getError()}function ht(gt,st){var He=new xt;Ce.framebufferCount++;function Qt(At,hr){var nr;F(Ie.next!==He,"can not update framebuffer which is currently in use");var cr=0,Ar=0,gn=!0,Nn=!0,gr=null,Cn=!0,Hr="rgba",mn="uint8",An=1,Tn=null,Rn=null,Kn=null,fn=!1;if(typeof At=="number")cr=At|0,Ar=hr|0||cr;else if(!At)cr=Ar=1;else{F.type(At,"object","invalid arguments for framebuffer");var lr=At;if("shape"in lr){var qn=lr.shape;F(Array.isArray(qn)&&qn.length>=2,"invalid shape for framebuffer"),cr=qn[0],Ar=qn[1]}else"radius"in lr&&(cr=Ar=lr.radius),"width"in lr&&(cr=lr.width),"height"in lr&&(Ar=lr.height);("color"in lr||"colors"in lr)&&(gr=lr.color||lr.colors,Array.isArray(gr)&&F(gr.length===1||Y.webgl_draw_buffers,"multiple render targets not supported")),gr||("colorCount"in lr&&(An=lr.colorCount|0,F(An>0,"invalid color buffer count")),"colorTexture"in lr&&(Cn=!!lr.colorTexture,Hr="rgba4"),"colorType"in lr&&(mn=lr.colorType,Cn?(F(Y.oes_texture_float||!(mn==="float"||mn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),F(Y.oes_texture_half_float||!(mn==="half float"||mn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):mn==="half float"||mn==="float16"?(F(Y.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Hr="rgba16f"):(mn==="float"||mn==="float32")&&(F(Y.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Hr="rgba32f"),F.oneOf(mn,ot,"invalid color type")),"colorFormat"in lr&&(Hr=lr.colorFormat,qe.indexOf(Hr)>=0?Cn=!0:et.indexOf(Hr)>=0?Cn=!1:Cn?F.oneOf(lr.colorFormat,qe,"invalid color format for texture"):F.oneOf(lr.colorFormat,et,"invalid color format for renderbuffer"))),("depthTexture"in lr||"depthStencilTexture"in lr)&&(fn=!!(lr.depthTexture||lr.depthStencilTexture),F(!fn||Y.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in lr&&(typeof lr.depth=="boolean"?gn=lr.depth:(Tn=lr.depth,Nn=!1)),"stencil"in lr&&(typeof lr.stencil=="boolean"?Nn=lr.stencil:(Rn=lr.stencil,gn=!1)),"depthStencil"in lr&&(typeof lr.depthStencil=="boolean"?gn=Nn=lr.depthStencil:(Kn=lr.depthStencil,gn=!1,Nn=!1))}var Dr=null,Ut=null,vr=null,_r=null;if(Array.isArray(gr))Dr=gr.map(ct);else if(gr)Dr=[ct(gr)];else for(Dr=new Array(An),nr=0;nr<An;++nr)Dr[nr]=we(cr,Ar,Cn,Hr,mn);F(Y.webgl_draw_buffers||Dr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),F(Dr.length<=re.maxColorAttachments,"too many color attachments, not supported"),cr=cr||Dr[0].width,Ar=Ar||Dr[0].height,Tn?Ut=ct(Tn):gn&&!Nn&&(Ut=we(cr,Ar,fn,"depth","uint32")),Rn?vr=ct(Rn):Nn&&!gn&&(vr=we(cr,Ar,!1,"stencil","uint8")),Kn?_r=ct(Kn):!Tn&&!Rn&&Nn&&gn&&(_r=we(cr,Ar,fn,"depth stencil","depth stencil")),F(!!Tn+!!Rn+!!Kn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var hn=null;for(nr=0;nr<Dr.length;++nr)if(pt(Dr[nr],cr,Ar),F(!Dr[nr]||Dr[nr].texture&&pW.indexOf(Dr[nr].texture._texture.format)>=0||Dr[nr].renderbuffer&&MW.indexOf(Dr[nr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nr+" is invalid"),Dr[nr]&&Dr[nr].texture){var wo=eb[Dr[nr].texture._texture.format]*Op[Dr[nr].texture._texture.type];hn===null?hn=wo:F(hn===wo,"all color attachments much have the same number of bits per pixel.")}return pt(Ut,cr,Ar),F(!Ut||Ut.texture&&Ut.texture._texture.format===vW||Ut.renderbuffer&&Ut.renderbuffer._renderbuffer.format===bW,"invalid depth attachment for framebuffer object"),pt(vr,cr,Ar),F(!vr||vr.renderbuffer&&vr.renderbuffer._renderbuffer.format===wW,"invalid stencil attachment for framebuffer object"),pt(_r,cr,Ar),F(!_r||_r.texture&&_r.texture._texture.format===sA||_r.renderbuffer&&_r.renderbuffer._renderbuffer.format===sA,"invalid depth-stencil attachment for framebuffer object"),Xe(He),He.width=cr,He.height=Ar,He.colorAttachments=Dr,He.depthAttachment=Ut,He.stencilAttachment=vr,He.depthStencilAttachment=_r,Qt.color=Dr.map(Oe),Qt.depth=Oe(Ut),Qt.stencil=Oe(vr),Qt.depthStencil=Oe(_r),Qt.width=He.width,Qt.height=He.height,Ye(He),Qt}function sr(At,hr){F(Ie.next!==He,"can not resize a framebuffer which is currently in use");var nr=Math.max(At|0,1),cr=Math.max(hr|0||nr,1);if(nr===He.width&&cr===He.height)return Qt;for(var Ar=He.colorAttachments,gn=0;gn<Ar.length;++gn)it(Ar[gn],nr,cr);return it(He.depthAttachment,nr,cr),it(He.stencilAttachment,nr,cr),it(He.depthStencilAttachment,nr,cr),He.width=Qt.width=nr,He.height=Qt.height=cr,Ye(He),Qt}return Qt(gt,st),n(Qt,{resize:sr,_reglType:"framebuffer",_framebuffer:He,destroy:function(){ft(He),Xe(He)},use:function(At){Ie.setFBO({framebuffer:Qt},At)}})}function Ft(gt){var st=Array(6);function He(sr){var At;F(st.indexOf(Ie.next)<0,"can not update framebuffer which is currently in use");var hr={color:null},nr=0,cr=null,Ar="rgba",gn="uint8",Nn=1;if(typeof sr=="number")nr=sr|0;else if(!sr)nr=1;else{F.type(sr,"object","invalid arguments for framebuffer");var gr=sr;if("shape"in gr){var Cn=gr.shape;F(Array.isArray(Cn)&&Cn.length>=2,"invalid shape for framebuffer"),F(Cn[0]===Cn[1],"cube framebuffer must be square"),nr=Cn[0]}else"radius"in gr&&(nr=gr.radius|0),"width"in gr?(nr=gr.width|0,"height"in gr&&F(gr.height===nr,"must be square")):"height"in gr&&(nr=gr.height|0);("color"in gr||"colors"in gr)&&(cr=gr.color||gr.colors,Array.isArray(cr)&&F(cr.length===1||Y.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in gr&&(Nn=gr.colorCount|0,F(Nn>0,"invalid color buffer count")),"colorType"in gr&&(F.oneOf(gr.colorType,ot,"invalid color type"),gn=gr.colorType),"colorFormat"in gr&&(Ar=gr.colorFormat,F.oneOf(gr.colorFormat,qe,"invalid color format for texture"))),"depth"in gr&&(hr.depth=gr.depth),"stencil"in gr&&(hr.stencil=gr.stencil),"depthStencil"in gr&&(hr.depthStencil=gr.depthStencil)}var Hr;if(cr)if(Array.isArray(cr))for(Hr=[],At=0;At<cr.length;++At)Hr[At]=cr[At];else Hr=[cr];else{Hr=Array(Nn);var mn={radius:nr,format:Ar,type:gn};for(At=0;At<Nn;++At)Hr[At]=Ae.createCube(mn)}for(hr.color=Array(Hr.length),At=0;At<Hr.length;++At){var An=Hr[At];F(typeof An=="function"&&An._reglType==="textureCube","invalid cube map"),nr=nr||An.width,F(An.width===nr&&An.height===nr,"invalid cube map shape"),hr.color[At]={target:Ip,data:Hr[At]}}for(At=0;At<6;++At){for(var Tn=0;Tn<Hr.length;++Tn)hr.color[Tn].target=Ip+At;At>0&&(hr.depth=st[0].depth,hr.stencil=st[0].stencil,hr.depthStencil=st[0].depthStencil),st[At]?st[At](hr):st[At]=ht(hr)}return n(He,{width:nr,height:nr,color:Hr})}function Qt(sr){var At,hr=sr|0;if(F(hr>0&&hr<=re.maxCubeMapSize,"invalid radius for cube fbo"),hr===He.width)return He;var nr=He.color;for(At=0;At<nr.length;++At)nr[At].resize(hr);for(At=0;At<6;++At)st[At].resize(hr);return He.width=He.height=hr,He}return He(gt),n(He,{faces:st,resize:Qt,_reglType:"framebufferCube",destroy:function(){st.forEach(function(sr){sr.destroy()})}})}function tr(){Ie.cur=null,Ie.next=null,Ie.dirty=!0,Wi(Ve).forEach(function(gt){gt.framebuffer=P.createFramebuffer(),Ye(gt)})}return n(Ie,{getFramebuffer:function(gt){if(typeof gt=="function"&&gt._reglType==="framebuffer"){var st=gt._framebuffer;if(st instanceof xt)return st}return null},create:ht,createCube:Ft,clear:function(){Wi(Ve).forEach(ft)},restore:tr})}var AW=5126,lA=34962;function tb(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=AW,this.offset=0,this.stride=0,this.divisor=0}function TW(P,Y,re,Ae,je){for(var Ce=re.maxAttributes,Ie=new Array(Ce),qe=0;qe<Ce;++qe)Ie[qe]=new tb;var et=0,ot={},tt={Record:tb,scope:{},state:Ie,currentVAO:null,targetVAO:null,restore:pt()?Ve:function(){},createVAO:xt,getVAO:ct,destroyBuffer:lt,setVAO:pt()?we:Oe,clear:pt()?it:function(){}};function lt(Xe){for(var ft=0;ft<Ie.length;++ft){var Ye=Ie[ft];Ye.buffer===Xe&&(P.disableVertexAttribArray(ft),Ye.buffer=null)}}function pt(){return Y.oes_vertex_array_object}function Ze(){return Y.angle_instanced_arrays}function ct(Xe){return typeof Xe=="function"&&Xe._vao?Xe._vao:null}function we(Xe){if(Xe!==tt.currentVAO){var ft=pt();Xe?ft.bindVertexArrayOES(Xe.vao):ft.bindVertexArrayOES(null),tt.currentVAO=Xe}}function Oe(Xe){if(Xe!==tt.currentVAO){if(Xe)Xe.bindAttrs();else for(var ft=Ze(),Ye=0;Ye<Ie.length;++Ye){var ht=Ie[Ye];ht.buffer?(P.enableVertexAttribArray(Ye),P.vertexAttribPointer(Ye,ht.size,ht.type,ht.normalized,ht.stride,ht.offfset),ft&&ht.divisor&&ft.vertexAttribDivisorANGLE(Ye,ht.divisor)):(P.disableVertexAttribArray(Ye),P.vertexAttrib4f(Ye,ht.x,ht.y,ht.z,ht.w))}tt.currentVAO=Xe}}function it(){Wi(ot).forEach(function(Xe){Xe.destroy()})}function mt(){this.id=++et,this.attributes=[];var Xe=pt();Xe?this.vao=Xe.createVertexArrayOES():this.vao=null,ot[this.id]=this,this.buffers=[]}mt.prototype.bindAttrs=function(){for(var Xe=Ze(),ft=this.attributes,Ye=0;Ye<ft.length;++Ye){var ht=ft[Ye];ht.buffer?(P.enableVertexAttribArray(Ye),P.bindBuffer(lA,ht.buffer.buffer),P.vertexAttribPointer(Ye,ht.size,ht.type,ht.normalized,ht.stride,ht.offset),Xe&&ht.divisor&&Xe.vertexAttribDivisorANGLE(Ye,ht.divisor)):(P.disableVertexAttribArray(Ye),P.vertexAttrib4f(Ye,ht.x,ht.y,ht.z,ht.w))}for(var Ft=ft.length;Ft<Ce;++Ft)P.disableVertexAttribArray(Ft)},mt.prototype.refresh=function(){var Xe=pt();Xe&&(Xe.bindVertexArrayOES(this.vao),this.bindAttrs(),tt.currentVAO=this)},mt.prototype.destroy=function(){if(this.vao){var Xe=pt();this===tt.currentVAO&&(tt.currentVAO=null,Xe.bindVertexArrayOES(null)),Xe.deleteVertexArrayOES(this.vao),this.vao=null}ot[this.id]&&(delete ot[this.id],Ae.vaoCount-=1)};function Ve(){var Xe=pt();Xe&&Wi(ot).forEach(function(ft){ft.refresh()})}function xt(Xe){var ft=new mt;Ae.vaoCount+=1;function Ye(ht){F(Array.isArray(ht),"arguments to vertex array constructor must be an array"),F(ht.length<Ce,"too many attributes"),F(ht.length>0,"must specify at least one attribute");var Ft={},tr=ft.attributes;tr.length=ht.length;for(var gt=0;gt<ht.length;++gt){var st=ht[gt],He=tr[gt]=new tb,Qt=st.data||st;if(Array.isArray(Qt)||t(Qt)||ja(Qt)){var sr;ft.buffers[gt]&&(sr=ft.buffers[gt],t(Qt)&&sr._buffer.byteLength>=Qt.byteLength?sr.subdata(Qt):(sr.destroy(),ft.buffers[gt]=null)),ft.buffers[gt]||(sr=ft.buffers[gt]=je.create(st,lA,!1,!0)),He.buffer=je.getBuffer(sr),He.size=He.buffer.dimension|0,He.normalized=!1,He.type=He.buffer.dtype,He.offset=0,He.stride=0,He.divisor=0,He.state=1,Ft[gt]=1}else je.getBuffer(st)?(He.buffer=je.getBuffer(st),He.size=He.buffer.dimension|0,He.normalized=!1,He.type=He.buffer.dtype,He.offset=0,He.stride=0,He.divisor=0,He.state=1):je.getBuffer(st.buffer)?(He.buffer=je.getBuffer(st.buffer),He.size=(+st.size||He.buffer.dimension)|0,He.normalized=!!st.normalized||!1,"type"in st?(F.parameter(st.type,fu,"invalid buffer type"),He.type=fu[st.type]):He.type=He.buffer.dtype,He.offset=(st.offset||0)|0,He.stride=(st.stride||0)|0,He.divisor=(st.divisor||0)|0,He.state=1,F(He.size>=1&&He.size<=4,"size must be between 1 and 4"),F(He.offset>=0,"invalid offset"),F(He.stride>=0&&He.stride<=255,"stride must be between 0 and 255"),F(He.divisor>=0,"divisor must be positive"),F(!He.divisor||!!Y.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in st?(F(gt>0,"first attribute must not be a constant"),He.x=+st.x||0,He.y=+st.y||0,He.z=+st.z||0,He.w=+st.w||0,He.state=2):F(!1,"invalid attribute spec for location "+gt)}for(var At=0;At<ft.buffers.length;++At)!Ft[At]&&ft.buffers[At]&&(ft.buffers[At].destroy(),ft.buffers[At]=null);return ft.refresh(),Ye}return Ye.destroy=function(){for(var ht=0;ht<ft.buffers.length;++ht)ft.buffers[ht]&&ft.buffers[ht].destroy();ft.buffers.length=0,ft.destroy()},Ye._vao=ft,Ye._reglType="vao",Ye(Xe)}return tt}var uA=35632,kW=35633,LW=35718,IW=35721;function OW(P,Y,re,Ae){var je={},Ce={};function Ie(we,Oe,it,mt){this.name=we,this.id=Oe,this.location=it,this.info=mt}function qe(we,Oe){for(var it=0;it<we.length;++it)if(we[it].id===Oe.id){we[it].location=Oe.location;return}we.push(Oe)}function et(we,Oe,it){var mt=we===uA?je:Ce,Ve=mt[Oe];if(!Ve){var xt=Y.str(Oe);Ve=P.createShader(we),P.shaderSource(Ve,xt),P.compileShader(Ve),F.shaderError(P,Ve,xt,we,it),mt[Oe]=Ve}return Ve}var ot={},tt=[],lt=0;function pt(we,Oe){this.id=lt++,this.fragId=we,this.vertId=Oe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ae.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ze(we,Oe,it){var mt,Ve,xt=et(uA,we.fragId),Xe=et(kW,we.vertId),ft=we.program=P.createProgram();if(P.attachShader(ft,xt),P.attachShader(ft,Xe),it)for(mt=0;mt<it.length;++mt){var Ye=it[mt];P.bindAttribLocation(ft,Ye[0],Ye[1])}P.linkProgram(ft),F.linkError(P,ft,Y.str(we.fragId),Y.str(we.vertId),Oe);var ht=P.getProgramParameter(ft,LW);Ae.profile&&(we.stats.uniformsCount=ht);var Ft=we.uniforms;for(mt=0;mt<ht;++mt)if(Ve=P.getActiveUniform(ft,mt),Ve)if(Ve.size>1)for(var tr=0;tr<Ve.size;++tr){var gt=Ve.name.replace("[0]","["+tr+"]");qe(Ft,new Ie(gt,Y.id(gt),P.getUniformLocation(ft,gt),Ve))}else qe(Ft,new Ie(Ve.name,Y.id(Ve.name),P.getUniformLocation(ft,Ve.name),Ve));var st=P.getProgramParameter(ft,IW);Ae.profile&&(we.stats.attributesCount=st);var He=we.attributes;for(mt=0;mt<st;++mt)Ve=P.getActiveAttrib(ft,mt),Ve&&qe(He,new Ie(Ve.name,Y.id(Ve.name),P.getAttribLocation(ft,Ve.name),Ve))}Ae.profile&&(re.getMaxUniformsCount=function(){var we=0;return tt.forEach(function(Oe){Oe.stats.uniformsCount>we&&(we=Oe.stats.uniformsCount)}),we},re.getMaxAttributesCount=function(){var we=0;return tt.forEach(function(Oe){Oe.stats.attributesCount>we&&(we=Oe.stats.attributesCount)}),we});function ct(){je={},Ce={};for(var we=0;we<tt.length;++we)Ze(tt[we],null,tt[we].attributes.map(function(Oe){return[Oe.location,Oe.name]}))}return{clear:function(){var we=P.deleteShader.bind(P);Wi(je).forEach(we),je={},Wi(Ce).forEach(we),Ce={},tt.forEach(function(Oe){P.deleteProgram(Oe.program)}),tt.length=0,ot={},re.shaderCount=0},program:function(we,Oe,it,mt){F.command(we>=0,"missing vertex shader",it),F.command(Oe>=0,"missing fragment shader",it);var Ve=ot[Oe];Ve||(Ve=ot[Oe]={});var xt=Ve[we];if(xt&&(xt.refCount++,!mt))return xt;var Xe=new pt(Oe,we);return re.shaderCount++,Ze(Xe,it,mt),xt||(Ve[we]=Xe),tt.push(Xe),n(Xe,{destroy:function(){if(Xe.refCount--,Xe.refCount<=0){P.deleteProgram(Xe.program);var ft=tt.indexOf(Xe);tt.splice(ft,1),re.shaderCount--}Ve[Xe.vertId].refCount<=0&&(P.deleteShader(Ce[Xe.vertId]),delete Ce[Xe.vertId],delete ot[Xe.fragId][Xe.vertId]),Object.keys(ot[Xe.fragId]).length||(P.deleteShader(je[Xe.fragId]),delete je[Xe.fragId],delete ot[Xe.fragId])}})},restore:ct,shader:et,frag:-1,vert:-1}}var NW=6408,Eh=5121,$W=3333,Np=5126;function DW(P,Y,re,Ae,je,Ce,Ie){function qe(tt){var lt;Y.next===null?(F(je.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),lt=Eh):(F(Y.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),lt=Y.next.colorAttachments[0].texture._texture.type,Ce.oes_texture_float?(F(lt===Eh||lt===Np,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),lt===Np&&F(Ie.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):F(lt===Eh,"Reading from a framebuffer is only allowed for the type 'uint8'"));var pt=0,Ze=0,ct=Ae.framebufferWidth,we=Ae.framebufferHeight,Oe=null;t(tt)?Oe=tt:tt&&(F.type(tt,"object","invalid arguments to regl.read()"),pt=tt.x|0,Ze=tt.y|0,F(pt>=0&&pt<Ae.framebufferWidth,"invalid x offset for regl.read"),F(Ze>=0&&Ze<Ae.framebufferHeight,"invalid y offset for regl.read"),ct=(tt.width||Ae.framebufferWidth-pt)|0,we=(tt.height||Ae.framebufferHeight-Ze)|0,Oe=tt.data||null),Oe&&(lt===Eh?F(Oe instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):lt===Np&&F(Oe instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),F(ct>0&&ct+pt<=Ae.framebufferWidth,"invalid width for read pixels"),F(we>0&&we+Ze<=Ae.framebufferHeight,"invalid height for read pixels"),re();var it=ct*we*4;return Oe||(lt===Eh?Oe=new Uint8Array(it):lt===Np&&(Oe=Oe||new Float32Array(it))),F.isTypedArray(Oe,"data buffer for regl.read() must be a typedarray"),F(Oe.byteLength>=it,"data buffer for regl.read() too small"),P.pixelStorei($W,4),P.readPixels(pt,Ze,ct,we,NW,lt,Oe),Oe}function et(tt){var lt;return Y.setFBO({framebuffer:tt.framebuffer},function(){lt=qe(tt)}),lt}function ot(tt){return!tt||!("framebuffer"in tt)?qe(tt):et(tt)}return ot}function $c(P){return Array.prototype.slice.call(P)}function Dc(P){return $c(P).join("")}function RW(){var P=0,Y=[],re=[];function Ae(lt){for(var pt=0;pt<re.length;++pt)if(re[pt]===lt)return Y[pt];var Ze="g"+P++;return Y.push(Ze),re.push(lt),Ze}function je(){var lt=[];function pt(){lt.push.apply(lt,$c(arguments))}var Ze=[];function ct(){var we="v"+P++;return Ze.push(we),arguments.length>0&&(lt.push(we,"="),lt.push.apply(lt,$c(arguments)),lt.push(";")),we}return n(pt,{def:ct,toString:function(){return Dc([Ze.length>0?"var "+Ze.join(",")+";":"",Dc(lt)])}})}function Ce(){var lt=je(),pt=je(),Ze=lt.toString,ct=pt.toString;function we(Oe,it){pt(Oe,it,"=",lt.def(Oe,it),";")}return n(function(){lt.apply(lt,$c(arguments))},{def:lt.def,entry:lt,exit:pt,save:we,set:function(Oe,it,mt){we(Oe,it),lt(Oe,it,"=",mt,";")},toString:function(){return Ze()+ct()}})}function Ie(){var lt=Dc(arguments),pt=Ce(),Ze=Ce(),ct=pt.toString,we=Ze.toString;return n(pt,{then:function(){return pt.apply(pt,$c(arguments)),this},else:function(){return Ze.apply(Ze,$c(arguments)),this},toString:function(){var Oe=we();return Oe&&(Oe="else{"+Oe+"}"),Dc(["if(",lt,"){",ct(),"}",Oe])}})}var qe=je(),et={};function ot(lt,pt){var Ze=[];function ct(){var Ve="a"+Ze.length;return Ze.push(Ve),Ve}pt=pt||0;for(var we=0;we<pt;++we)ct();var Oe=Ce(),it=Oe.toString,mt=et[lt]=n(Oe,{arg:ct,toString:function(){return Dc(["function(",Ze.join(),"){",it(),"}"])}});return mt}function tt(){var lt=['"use strict";',qe,"return {"];Object.keys(et).forEach(function(ct){lt.push('"',ct,'":',et[ct].toString(),",")}),lt.push("}");var pt=Dc(lt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ze=Function.apply(null,Y.concat(pt));return Ze.apply(null,re)}return{global:qe,link:Ae,block:je,proc:ot,scope:Ce,cond:Ie,compile:tt}}var Rc="xyzw".split(""),cA=5121,Pc=1,rb=2,nb=0,ib=1,ab=2,ob=3,$p=4,fA=5,hA=6,dA="dither",vA="blend.enable",pA="blend.color",sb="blend.equation",lb="blend.func",gA="depth.enable",mA="depth.func",yA="depth.range",bA="depth.mask",ub="colorMask",wA="cull.enable",xA="cull.face",cb="frontFace",fb="lineWidth",SA="polygonOffset.enable",hb="polygonOffset.offset",_A="sample.alpha",EA="sample.enable",db="sample.coverage",MA="stencil.enable",CA="stencil.mask",vb="stencil.func",pb="stencil.opFront",Mh="stencil.opBack",AA="scissor.enable",Dp="scissor.box",hs="viewport",Ch="profile",gu="framebuffer",Ah="vert",Th="frag",mu="elements",yu="primitive",bu="count",Rp="offset",Pp="instances",kh="vao",gb="Width",mb="Height",Fc=gu+gb,Bc=gu+mb,PW=hs+gb,FW=hs+mb,TA="drawingBuffer",kA=TA+gb,LA=TA+mb,BW=[lb,sb,vb,pb,Mh,db,hs,Dp,hb],zc=34962,zW=34963,GW=35632,jW=35633,IA=3553,UW=34067,WW=2884,HW=3042,VW=3024,YW=2960,XW=2929,KW=3089,qW=32823,ZW=32926,QW=32928,yb=5126,Fp=35664,Bp=35665,zp=35666,bb=5124,Gp=35667,jp=35668,Up=35669,wb=35670,Wp=35671,Hp=35672,Vp=35673,Lh=35674,Ih=35675,Oh=35676,Nh=35678,$h=35680,OA=4,Dh=1028,wu=1029,NA=2304,xb=2305,JW=32775,e9=32776,t9=519,tl=7680,$A=0,DA=1,RA=32774,r9=513,PA=36160,n9=36064,bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},FA=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Gc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},rl={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},BA={frag:GW,vert:jW},Sb={cw:NA,ccw:xb};function Yp(P){return Array.isArray(P)||t(P)||ja(P)}function zA(P){return P.sort(function(Y,re){return Y===hs?-1:re===hs?1:Y<re?-1:1})}function bi(P,Y,re,Ae){this.thisDep=P,this.contextDep=Y,this.propDep=re,this.append=Ae}function nl(P){return P&&!(P.thisDep||P.contextDep||P.propDep)}function pn(P){return new bi(!1,!1,!1,P)}function Ti(P,Y){var re=P.type;if(re===nb){var Ae=P.data.length;return new bi(!0,Ae>=1,Ae>=2,Y)}else if(re===$p){var je=P.data;return new bi(je.thisDep,je.contextDep,je.propDep,Y)}else{if(re===fA)return new bi(!1,!1,!1,Y);if(re===hA){for(var Ce=!1,Ie=!1,qe=!1,et=0;et<P.data.length;++et){var ot=P.data[et];if(ot.type===ib)qe=!0;else if(ot.type===ab)Ie=!0;else if(ot.type===ob)Ce=!0;else if(ot.type===nb){Ce=!0;var tt=ot.data;tt>=1&&(Ie=!0),tt>=2&&(qe=!0)}else ot.type===$p&&(Ce=Ce||ot.data.thisDep,Ie=Ie||ot.data.contextDep,qe=qe||ot.data.propDep)}return new bi(Ce,Ie,qe,Y)}else return new bi(re===ob,re===ab,re===ib,Y)}}var GA=new bi(!1,!1,!1,function(){});function i9(P,Y,re,Ae,je,Ce,Ie,qe,et,ot,tt,lt,pt,Ze,ct){var we=ot.Record,Oe={add:32774,subtract:32778,"reverse subtract":32779};re.ext_blend_minmax&&(Oe.min=JW,Oe.max=e9);var it=re.angle_instanced_arrays,mt=re.webgl_draw_buffers,Ve={dirty:!0,profile:ct.profile},xt={},Xe=[],ft={},Ye={};function ht(q){return q.replace(".","_")}function Ft(q,H,ue){var ye=ht(q);Xe.push(q),xt[ye]=Ve[ye]=!!ue,ft[ye]=H}function tr(q,H,ue){var ye=ht(q);Xe.push(q),Array.isArray(ue)?(Ve[ye]=ue.slice(),xt[ye]=ue.slice()):Ve[ye]=xt[ye]=ue,Ye[ye]=H}Ft(dA,VW),Ft(vA,HW),tr(pA,"blendColor",[0,0,0,0]),tr(sb,"blendEquationSeparate",[RA,RA]),tr(lb,"blendFuncSeparate",[DA,$A,DA,$A]),Ft(gA,XW,!0),tr(mA,"depthFunc",r9),tr(yA,"depthRange",[0,1]),tr(bA,"depthMask",!0),tr(ub,ub,[!0,!0,!0,!0]),Ft(wA,WW),tr(xA,"cullFace",wu),tr(cb,cb,xb),tr(fb,fb,1),Ft(SA,qW),tr(hb,"polygonOffset",[0,0]),Ft(_A,ZW),Ft(EA,QW),tr(db,"sampleCoverage",[1,!1]),Ft(MA,YW),tr(CA,"stencilMask",-1),tr(vb,"stencilFunc",[t9,0,-1]),tr(pb,"stencilOpSeparate",[Dh,tl,tl,tl]),tr(Mh,"stencilOpSeparate",[wu,tl,tl,tl]),Ft(AA,KW),tr(Dp,"scissor",[0,0,P.drawingBufferWidth,P.drawingBufferHeight]),tr(hs,hs,[0,0,P.drawingBufferWidth,P.drawingBufferHeight]);var gt={gl:P,context:pt,strings:Y,next:xt,current:Ve,draw:lt,elements:Ce,buffer:je,shader:tt,attributes:ot.state,vao:ot,uniforms:et,framebuffer:qe,extensions:re,timer:Ze,isBufferArgs:Yp},st={primTypes:Cc,compareFuncs:Gc,blendFuncs:bo,blendEquations:Oe,stencilOps:rl,glTypes:fu,orientationType:Sb};F.optional(function(){gt.isArrayLike=cn}),mt&&(st.backBuffer=[wu],st.drawBuffer=Yn(Ae.maxDrawbuffers,function(q){return q===0?[0]:Yn(q,function(H){return n9+H})}));var He=0;function Qt(){var q=RW(),H=q.link,ue=q.global;q.id=He++,q.batchId="0";var ye=H(gt),Se=q.shared={props:"a0"};Object.keys(gt).forEach(function(le){Se[le]=ue.def(ye,".",le)}),F.optional(function(){q.CHECK=H(F),q.commandStr=F.guessCommand(),q.command=H(q.commandStr),q.assert=function(le,K,ge){le("if(!(",K,"))",this.CHECK,".commandRaise(",H(ge),",",this.command,");")},st.invalidBlendCombinations=FA});var he=q.next={},fe=q.current={};Object.keys(Ye).forEach(function(le){Array.isArray(Ve[le])&&(he[le]=ue.def(Se.next,".",le),fe[le]=ue.def(Se.current,".",le))});var ve=q.constants={};Object.keys(st).forEach(function(le){ve[le]=ue.def(JSON.stringify(st[le]))}),q.invoke=function(le,K){switch(K.type){case nb:var ge=["this",Se.context,Se.props,q.batchId];return le.def(H(K.data),".call(",ge.slice(0,Math.max(K.data.length+1,4)),")");case ib:return le.def(Se.props,K.data);case ab:return le.def(Se.context,K.data);case ob:return le.def("this",K.data);case $p:return K.data.append(q,le),K.data.ref;case fA:return K.data.toString();case hA:return K.data.map(function(_e){return q.invoke(le,_e)})}},q.attribCache={};var Z={};return q.scopeAttrib=function(le){var K=Y.id(le);if(K in Z)return Z[K];var ge=ot.scope[K];ge||(ge=ot.scope[K]=new we);var _e=Z[K]=H(ge);return _e},q}function sr(q){var H=q.static,ue=q.dynamic,ye;if(Ch in H){var Se=!!H[Ch];ye=pn(function(fe,ve){return Se}),ye.enable=Se}else if(Ch in ue){var he=ue[Ch];ye=Ti(he,function(fe,ve){return fe.invoke(ve,he)})}return ye}function At(q,H){var ue=q.static,ye=q.dynamic;if(gu in ue){var Se=ue[gu];return Se?(Se=qe.getFramebuffer(Se),F.command(Se,"invalid framebuffer object"),pn(function(fe,ve){var Z=fe.link(Se),le=fe.shared;ve.set(le.framebuffer,".next",Z);var K=le.context;return ve.set(K,"."+Fc,Z+".width"),ve.set(K,"."+Bc,Z+".height"),Z})):pn(function(fe,ve){var Z=fe.shared;ve.set(Z.framebuffer,".next","null");var le=Z.context;return ve.set(le,"."+Fc,le+"."+kA),ve.set(le,"."+Bc,le+"."+LA),"null"})}else if(gu in ye){var he=ye[gu];return Ti(he,function(fe,ve){var Z=fe.invoke(ve,he),le=fe.shared,K=le.framebuffer,ge=ve.def(K,".getFramebuffer(",Z,")");F.optional(function(){fe.assert(ve,"!"+Z+"||"+ge,"invalid framebuffer object")}),ve.set(K,".next",ge);var _e=le.context;return ve.set(_e,"."+Fc,ge+"?"+ge+".width:"+_e+"."+kA),ve.set(_e,"."+Bc,ge+"?"+ge+".height:"+_e+"."+LA),ge})}else return null}function hr(q,H,ue){var ye=q.static,Se=q.dynamic;function he(Z){if(Z in ye){var le=ye[Z];F.commandType(le,"object","invalid "+Z,ue.commandStr);var K=!0,ge=le.x|0,_e=le.y|0,Be,Ue;return"width"in le?(Be=le.width|0,F.command(Be>=0,"invalid "+Z,ue.commandStr)):K=!1,"height"in le?(Ue=le.height|0,F.command(Ue>=0,"invalid "+Z,ue.commandStr)):K=!1,new bi(!K&&H&&H.thisDep,!K&&H&&H.contextDep,!K&&H&&H.propDep,function(It,ur){var Tt=It.shared.context,Vt=Be;"width"in le||(Vt=ur.def(Tt,".",Fc,"-",ge));var ar=Ue;return"height"in le||(ar=ur.def(Tt,".",Bc,"-",_e)),[ge,_e,Vt,ar]})}else if(Z in Se){var Ne=Se[Z],nt=Ti(Ne,function(It,ur){var Tt=It.invoke(ur,Ne);F.optional(function(){It.assert(ur,Tt+"&&typeof "+Tt+'==="object"',"invalid "+Z)});var Vt=It.shared.context,ar=ur.def(Tt,".x|0"),Tr=ur.def(Tt,".y|0"),nn=ur.def('"width" in ',Tt,"?",Tt,".width|0:","(",Vt,".",Fc,"-",ar,")"),wi=ur.def('"height" in ',Tt,"?",Tt,".height|0:","(",Vt,".",Bc,"-",Tr,")");return F.optional(function(){It.assert(ur,nn+">=0&&"+wi+">=0","invalid "+Z)}),[ar,Tr,nn,wi]});return H&&(nt.thisDep=nt.thisDep||H.thisDep,nt.contextDep=nt.contextDep||H.contextDep,nt.propDep=nt.propDep||H.propDep),nt}else return H?new bi(H.thisDep,H.contextDep,H.propDep,function(It,ur){var Tt=It.shared.context;return[0,0,ur.def(Tt,".",Fc),ur.def(Tt,".",Bc)]}):null}var fe=he(hs);if(fe){var ve=fe;fe=new bi(fe.thisDep,fe.contextDep,fe.propDep,function(Z,le){var K=ve.append(Z,le),ge=Z.shared.context;return le.set(ge,"."+PW,K[2]),le.set(ge,"."+FW,K[3]),K})}return{viewport:fe,scissor_box:he(Dp)}}function nr(q,H){var ue=q.static,ye=typeof ue[Th]=="string"&&typeof ue[Ah]=="string";if(ye){if(Object.keys(H.dynamic).length>0)return null;var Se=H.static,he=Object.keys(Se);if(he.length>0&&typeof Se[he[0]]=="number"){for(var fe=[],ve=0;ve<he.length;++ve)F(typeof Se[he[ve]]=="number","must specify all vertex attribute locations when using vaos"),fe.push([Se[he[ve]]|0,he[ve]]);return fe}}return null}function cr(q,H,ue){var ye=q.static,Se=q.dynamic;function he(K){if(K in ye){var ge=Y.id(ye[K]);F.optional(function(){tt.shader(BA[K],ge,F.guessCommand())});var _e=pn(function(){return ge});return _e.id=ge,_e}else if(K in Se){var Be=Se[K];return Ti(Be,function(Ue,Ne){var nt=Ue.invoke(Ne,Be),It=Ne.def(Ue.shared.strings,".id(",nt,")");return F.optional(function(){Ne(Ue.shared.shader,".shader(",BA[K],",",It,",",Ue.command,");")}),It})}return null}var fe=he(Th),ve=he(Ah),Z=null,le;return nl(fe)&&nl(ve)?(Z=tt.program(ve.id,fe.id,null,ue),le=pn(function(K,ge){return K.link(Z)})):le=new bi(fe&&fe.thisDep||ve&&ve.thisDep,fe&&fe.contextDep||ve&&ve.contextDep,fe&&fe.propDep||ve&&ve.propDep,function(K,ge){var _e=K.shared.shader,Be;fe?Be=fe.append(K,ge):Be=ge.def(_e,".",Th);var Ue;ve?Ue=ve.append(K,ge):Ue=ge.def(_e,".",Ah);var Ne=_e+".program("+Ue+","+Be;return F.optional(function(){Ne+=","+K.command}),ge.def(Ne+")")}),{frag:fe,vert:ve,progVar:le,program:Z}}function Ar(q,H){var ue=q.static,ye=q.dynamic;function Se(){if(mu in ue){var K=ue[mu];Yp(K)?K=Ce.getElements(Ce.create(K,!0)):K&&(K=Ce.getElements(K),F.command(K,"invalid elements",H.commandStr));var ge=pn(function(Be,Ue){if(K){var Ne=Be.link(K);return Be.ELEMENTS=Ne,Ne}return Be.ELEMENTS=null,null});return ge.value=K,ge}else if(mu in ye){var _e=ye[mu];return Ti(_e,function(Be,Ue){var Ne=Be.shared,nt=Ne.isBufferArgs,It=Ne.elements,ur=Be.invoke(Ue,_e),Tt=Ue.def("null"),Vt=Ue.def(nt,"(",ur,")"),ar=Be.cond(Vt).then(Tt,"=",It,".createStream(",ur,");").else(Tt,"=",It,".getElements(",ur,");");return F.optional(function(){Be.assert(ar.else,"!"+ur+"||"+Tt,"invalid elements")}),Ue.entry(ar),Ue.exit(Be.cond(Vt).then(It,".destroyStream(",Tt,");")),Be.ELEMENTS=Tt,Tt})}return null}var he=Se();function fe(){if(yu in ue){var K=ue[yu];return F.commandParameter(K,Cc,"invalid primitve",H.commandStr),pn(function(_e,Be){return Cc[K]})}else if(yu in ye){var ge=ye[yu];return Ti(ge,function(_e,Be){var Ue=_e.constants.primTypes,Ne=_e.invoke(Be,ge);return F.optional(function(){_e.assert(Be,Ne+" in "+Ue,"invalid primitive, must be one of "+Object.keys(Cc))}),Be.def(Ue,"[",Ne,"]")})}else if(he)return nl(he)?he.value?pn(function(_e,Be){return Be.def(_e.ELEMENTS,".primType")}):pn(function(){return OA}):new bi(he.thisDep,he.contextDep,he.propDep,function(_e,Be){var Ue=_e.ELEMENTS;return Be.def(Ue,"?",Ue,".primType:",OA)});return null}function ve(K,ge){if(K in ue){var _e=ue[K]|0;return F.command(!ge||_e>=0,"invalid "+K,H.commandStr),pn(function(Ue,Ne){return ge&&(Ue.OFFSET=_e),_e})}else if(K in ye){var Be=ye[K];return Ti(Be,function(Ue,Ne){var nt=Ue.invoke(Ne,Be);return ge&&(Ue.OFFSET=nt,F.optional(function(){Ue.assert(Ne,nt+">=0","invalid "+K)})),nt})}else if(ge&&he)return pn(function(Ue,Ne){return Ue.OFFSET="0",0});return null}var Z=ve(Rp,!0);function le(){if(bu in ue){var K=ue[bu]|0;return F.command(typeof K=="number"&&K>=0,"invalid vertex count",H.commandStr),pn(function(){return K})}else if(bu in ye){var ge=ye[bu];return Ti(ge,function(Ue,Ne){var nt=Ue.invoke(Ne,ge);return F.optional(function(){Ue.assert(Ne,"typeof "+nt+'==="number"&&'+nt+">=0&&"+nt+"===("+nt+"|0)","invalid vertex count")}),nt})}else if(he)if(nl(he)){if(he)return Z?new bi(Z.thisDep,Z.contextDep,Z.propDep,function(Ue,Ne){var nt=Ne.def(Ue.ELEMENTS,".vertCount-",Ue.OFFSET);return F.optional(function(){Ue.assert(Ne,nt+">=0","invalid vertex offset/element buffer too small")}),nt}):pn(function(Ue,Ne){return Ne.def(Ue.ELEMENTS,".vertCount")});var _e=pn(function(){return-1});return F.optional(function(){_e.MISSING=!0}),_e}else{var Be=new bi(he.thisDep||Z.thisDep,he.contextDep||Z.contextDep,he.propDep||Z.propDep,function(Ue,Ne){var nt=Ue.ELEMENTS;return Ue.OFFSET?Ne.def(nt,"?",nt,".vertCount-",Ue.OFFSET,":-1"):Ne.def(nt,"?",nt,".vertCount:-1")});return F.optional(function(){Be.DYNAMIC=!0}),Be}return null}return{elements:he,primitive:fe(),count:le(),instances:ve(Pp,!1),offset:Z}}function gn(q,H){var ue=q.static,ye=q.dynamic,Se={};return Xe.forEach(function(he){var fe=ht(he);function ve(Z,le){if(he in ue){var K=Z(ue[he]);Se[fe]=pn(function(){return K})}else if(he in ye){var ge=ye[he];Se[fe]=Ti(ge,function(_e,Be){return le(_e,Be,_e.invoke(Be,ge))})}}switch(he){case wA:case vA:case dA:case MA:case gA:case AA:case SA:case _A:case EA:case bA:return ve(function(Z){return F.commandType(Z,"boolean",he,H.commandStr),Z},function(Z,le,K){return F.optional(function(){Z.assert(le,"typeof "+K+'==="boolean"',"invalid flag "+he,Z.commandStr)}),K});case mA:return ve(function(Z){return F.commandParameter(Z,Gc,"invalid "+he,H.commandStr),Gc[Z]},function(Z,le,K){var ge=Z.constants.compareFuncs;return F.optional(function(){Z.assert(le,K+" in "+ge,"invalid "+he+", must be one of "+Object.keys(Gc))}),le.def(ge,"[",K,"]")});case yA:return ve(function(Z){return F.command(cn(Z)&&Z.length===2&&typeof Z[0]=="number"&&typeof Z[1]=="number"&&Z[0]<=Z[1],"depth range is 2d array",H.commandStr),Z},function(Z,le,K){F.optional(function(){Z.assert(le,Z.shared.isArrayLike+"("+K+")&&"+K+".length===2&&typeof "+K+'[0]==="number"&&typeof '+K+'[1]==="number"&&'+K+"[0]<="+K+"[1]","depth range must be a 2d array")});var ge=le.def("+",K,"[0]"),_e=le.def("+",K,"[1]");return[ge,_e]});case lb:return ve(function(Z){F.commandType(Z,"object","blend.func",H.commandStr);var le="srcRGB"in Z?Z.srcRGB:Z.src,K="srcAlpha"in Z?Z.srcAlpha:Z.src,ge="dstRGB"in Z?Z.dstRGB:Z.dst,_e="dstAlpha"in Z?Z.dstAlpha:Z.dst;return F.commandParameter(le,bo,fe+".srcRGB",H.commandStr),F.commandParameter(K,bo,fe+".srcAlpha",H.commandStr),F.commandParameter(ge,bo,fe+".dstRGB",H.commandStr),F.commandParameter(_e,bo,fe+".dstAlpha",H.commandStr),F.command(FA.indexOf(le+", "+ge)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+le+", "+ge+")",H.commandStr),[bo[le],bo[ge],bo[K],bo[_e]]},function(Z,le,K){var ge=Z.constants.blendFuncs;F.optional(function(){Z.assert(le,K+"&&typeof "+K+'==="object"',"invalid blend func, must be an object")});function _e(Tt,Vt){var ar=le.def('"',Tt,Vt,'" in ',K,"?",K,".",Tt,Vt,":",K,".",Tt);return F.optional(function(){Z.assert(le,ar+" in "+ge,"invalid "+he+"."+Tt+Vt+", must be one of "+Object.keys(bo))}),ar}var Be=_e("src","RGB"),Ue=_e("dst","RGB");F.optional(function(){var Tt=Z.constants.invalidBlendCombinations;Z.assert(le,Tt+".indexOf("+Be+'+", "+'+Ue+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ne=le.def(ge,"[",Be,"]"),nt=le.def(ge,"[",_e("src","Alpha"),"]"),It=le.def(ge,"[",Ue,"]"),ur=le.def(ge,"[",_e("dst","Alpha"),"]");return[Ne,It,nt,ur]});case sb:return ve(function(Z){if(typeof Z=="string")return F.commandParameter(Z,Oe,"invalid "+he,H.commandStr),[Oe[Z],Oe[Z]];if(typeof Z=="object")return F.commandParameter(Z.rgb,Oe,he+".rgb",H.commandStr),F.commandParameter(Z.alpha,Oe,he+".alpha",H.commandStr),[Oe[Z.rgb],Oe[Z.alpha]];F.commandRaise("invalid blend.equation",H.commandStr)},function(Z,le,K){var ge=Z.constants.blendEquations,_e=le.def(),Be=le.def(),Ue=Z.cond("typeof ",K,'==="string"');return F.optional(function(){function Ne(nt,It,ur){Z.assert(nt,ur+" in "+ge,"invalid "+It+", must be one of "+Object.keys(Oe))}Ne(Ue.then,he,K),Z.assert(Ue.else,K+"&&typeof "+K+'==="object"',"invalid "+he),Ne(Ue.else,he+".rgb",K+".rgb"),Ne(Ue.else,he+".alpha",K+".alpha")}),Ue.then(_e,"=",Be,"=",ge,"[",K,"];"),Ue.else(_e,"=",ge,"[",K,".rgb];",Be,"=",ge,"[",K,".alpha];"),le(Ue),[_e,Be]});case pA:return ve(function(Z){return F.command(cn(Z)&&Z.length===4,"blend.color must be a 4d array",H.commandStr),Yn(4,function(le){return+Z[le]})},function(Z,le,K){return F.optional(function(){Z.assert(le,Z.shared.isArrayLike+"("+K+")&&"+K+".length===4","blend.color must be a 4d array")}),Yn(4,function(ge){return le.def("+",K,"[",ge,"]")})});case CA:return ve(function(Z){return F.commandType(Z,"number",fe,H.commandStr),Z|0},function(Z,le,K){return F.optional(function(){Z.assert(le,"typeof "+K+'==="number"',"invalid stencil.mask")}),le.def(K,"|0")});case vb:return ve(function(Z){F.commandType(Z,"object",fe,H.commandStr);var le=Z.cmp||"keep",K=Z.ref||0,ge="mask"in Z?Z.mask:-1;return F.commandParameter(le,Gc,he+".cmp",H.commandStr),F.commandType(K,"number",he+".ref",H.commandStr),F.commandType(ge,"number",he+".mask",H.commandStr),[Gc[le],K,ge]},function(Z,le,K){var ge=Z.constants.compareFuncs;F.optional(function(){function Ne(){Z.assert(le,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ne(K+"&&typeof ",K,'==="object"'),Ne('!("cmp" in ',K,")||(",K,".cmp in ",ge,")")});var _e=le.def('"cmp" in ',K,"?",ge,"[",K,".cmp]",":",tl),Be=le.def(K,".ref|0"),Ue=le.def('"mask" in ',K,"?",K,".mask|0:-1");return[_e,Be,Ue]});case pb:case Mh:return ve(function(Z){F.commandType(Z,"object",fe,H.commandStr);var le=Z.fail||"keep",K=Z.zfail||"keep",ge=Z.zpass||"keep";return F.commandParameter(le,rl,he+".fail",H.commandStr),F.commandParameter(K,rl,he+".zfail",H.commandStr),F.commandParameter(ge,rl,he+".zpass",H.commandStr),[he===Mh?wu:Dh,rl[le],rl[K],rl[ge]]},function(Z,le,K){var ge=Z.constants.stencilOps;F.optional(function(){Z.assert(le,K+"&&typeof "+K+'==="object"',"invalid "+he)});function _e(Be){return F.optional(function(){Z.assert(le,'!("'+Be+'" in '+K+")||("+K+"."+Be+" in "+ge+")","invalid "+he+"."+Be+", must be one of "+Object.keys(rl))}),le.def('"',Be,'" in ',K,"?",ge,"[",K,".",Be,"]:",tl)}return[he===Mh?wu:Dh,_e("fail"),_e("zfail"),_e("zpass")]});case hb:return ve(function(Z){F.commandType(Z,"object",fe,H.commandStr);var le=Z.factor|0,K=Z.units|0;return F.commandType(le,"number",fe+".factor",H.commandStr),F.commandType(K,"number",fe+".units",H.commandStr),[le,K]},function(Z,le,K){F.optional(function(){Z.assert(le,K+"&&typeof "+K+'==="object"',"invalid "+he)});var ge=le.def(K,".factor|0"),_e=le.def(K,".units|0");return[ge,_e]});case xA:return ve(function(Z){var le=0;return Z==="front"?le=Dh:Z==="back"&&(le=wu),F.command(!!le,fe,H.commandStr),le},function(Z,le,K){return F.optional(function(){Z.assert(le,K+'==="front"||'+K+'==="back"',"invalid cull.face")}),le.def(K,'==="front"?',Dh,":",wu)});case fb:return ve(function(Z){return F.command(typeof Z=="number"&&Z>=Ae.lineWidthDims[0]&&Z<=Ae.lineWidthDims[1],"invalid line width, must be a positive number between "+Ae.lineWidthDims[0]+" and "+Ae.lineWidthDims[1],H.commandStr),Z},function(Z,le,K){return F.optional(function(){Z.assert(le,"typeof "+K+'==="number"&&'+K+">="+Ae.lineWidthDims[0]+"&&"+K+"<="+Ae.lineWidthDims[1],"invalid line width")}),K});case cb:return ve(function(Z){return F.commandParameter(Z,Sb,fe,H.commandStr),Sb[Z]},function(Z,le,K){return F.optional(function(){Z.assert(le,K+'==="cw"||'+K+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),le.def(K+'==="cw"?'+NA+":"+xb)});case ub:return ve(function(Z){return F.command(cn(Z)&&Z.length===4,"color.mask must be length 4 array",H.commandStr),Z.map(function(le){return!!le})},function(Z,le,K){return F.optional(function(){Z.assert(le,Z.shared.isArrayLike+"("+K+")&&"+K+".length===4","invalid color.mask")}),Yn(4,function(ge){return"!!"+K+"["+ge+"]"})});case db:return ve(function(Z){F.command(typeof Z=="object"&&Z,fe,H.commandStr);var le="value"in Z?Z.value:1,K=!!Z.invert;return F.command(typeof le=="number"&&le>=0&&le<=1,"sample.coverage.value must be a number between 0 and 1",H.commandStr),[le,K]},function(Z,le,K){F.optional(function(){Z.assert(le,K+"&&typeof "+K+'==="object"',"invalid sample.coverage")});var ge=le.def('"value" in ',K,"?+",K,".value:1"),_e=le.def("!!",K,".invert");return[ge,_e]})}}),Se}function Nn(q,H){var ue=q.static,ye=q.dynamic,Se={};return Object.keys(ue).forEach(function(he){var fe=ue[he],ve;if(typeof fe=="number"||typeof fe=="boolean")ve=pn(function(){return fe});else if(typeof fe=="function"){var Z=fe._reglType;Z==="texture2d"||Z==="textureCube"?ve=pn(function(le){return le.link(fe)}):Z==="framebuffer"||Z==="framebufferCube"?(F.command(fe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+he+'"',H.commandStr),ve=pn(function(le){return le.link(fe.color[0])})):F.commandRaise('invalid data for uniform "'+he+'"',H.commandStr)}else cn(fe)?ve=pn(function(le){var K=le.global.def("[",Yn(fe.length,function(ge){return F.command(typeof fe[ge]=="number"||typeof fe[ge]=="boolean","invalid uniform "+he,le.commandStr),fe[ge]}),"]");return K}):F.commandRaise('invalid or missing data for uniform "'+he+'"',H.commandStr);ve.value=fe,Se[he]=ve}),Object.keys(ye).forEach(function(he){var fe=ye[he];Se[he]=Ti(fe,function(ve,Z){return ve.invoke(Z,fe)})}),Se}function gr(q,H){var ue=q.static,ye=q.dynamic,Se={};return Object.keys(ue).forEach(function(he){var fe=ue[he],ve=Y.id(he),Z=new we;if(Yp(fe))Z.state=Pc,Z.buffer=je.getBuffer(je.create(fe,zc,!1,!0)),Z.type=0;else{var le=je.getBuffer(fe);if(le)Z.state=Pc,Z.buffer=le,Z.type=0;else if(F.command(typeof fe=="object"&&fe,"invalid data for attribute "+he,H.commandStr),"constant"in fe){var K=fe.constant;Z.buffer="null",Z.state=rb,typeof K=="number"?Z.x=K:(F.command(cn(K)&&K.length>0&&K.length<=4,"invalid constant for attribute "+he,H.commandStr),Rc.forEach(function(It,ur){ur<K.length&&(Z[It]=K[ur])}))}else{Yp(fe.buffer)?le=je.getBuffer(je.create(fe.buffer,zc,!1,!0)):le=je.getBuffer(fe.buffer),F.command(!!le,'missing buffer for attribute "'+he+'"',H.commandStr);var ge=fe.offset|0;F.command(ge>=0,'invalid offset for attribute "'+he+'"',H.commandStr);var _e=fe.stride|0;F.command(_e>=0&&_e<256,'invalid stride for attribute "'+he+'", must be integer betweeen [0, 255]',H.commandStr);var Be=fe.size|0;F.command(!("size"in fe)||Be>0&&Be<=4,'invalid size for attribute "'+he+'", must be 1,2,3,4',H.commandStr);var Ue=!!fe.normalized,Ne=0;"type"in fe&&(F.commandParameter(fe.type,fu,"invalid type for attribute "+he,H.commandStr),Ne=fu[fe.type]);var nt=fe.divisor|0;"divisor"in fe&&(F.command(nt===0||it,'cannot specify divisor for attribute "'+he+'", instancing not supported',H.commandStr),F.command(nt>=0,'invalid divisor for attribute "'+he+'"',H.commandStr)),F.optional(function(){var It=H.commandStr,ur=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(fe).forEach(function(Tt){F.command(ur.indexOf(Tt)>=0,'unknown parameter "'+Tt+'" for attribute pointer "'+he+'" (valid parameters are '+ur+")",It)})}),Z.buffer=le,Z.state=Pc,Z.size=Be,Z.normalized=Ue,Z.type=Ne||le.dtype,Z.offset=ge,Z.stride=_e,Z.divisor=nt}}Se[he]=pn(function(It,ur){var Tt=It.attribCache;if(ve in Tt)return Tt[ve];var Vt={isStream:!1};return Object.keys(Z).forEach(function(ar){Vt[ar]=Z[ar]}),Z.buffer&&(Vt.buffer=It.link(Z.buffer),Vt.type=Vt.type||Vt.buffer+".dtype"),Tt[ve]=Vt,Vt})}),Object.keys(ye).forEach(function(he){var fe=ye[he];function ve(Z,le){var K=Z.invoke(le,fe),ge=Z.shared,_e=Z.constants,Be=ge.isBufferArgs,Ue=ge.buffer;F.optional(function(){Z.assert(le,K+"&&(typeof "+K+'==="object"||typeof '+K+'==="function")&&('+Be+"("+K+")||"+Ue+".getBuffer("+K+")||"+Ue+".getBuffer("+K+".buffer)||"+Be+"("+K+'.buffer)||("constant" in '+K+"&&(typeof "+K+'.constant==="number"||'+ge.isArrayLike+"("+K+".constant))))",'invalid dynamic attribute "'+he+'"')});var Ne={isStream:le.def(!1)},nt=new we;nt.state=Pc,Object.keys(nt).forEach(function(Vt){Ne[Vt]=le.def(""+nt[Vt])});var It=Ne.buffer,ur=Ne.type;le("if(",Be,"(",K,")){",Ne.isStream,"=true;",It,"=",Ue,".createStream(",zc,",",K,");",ur,"=",It,".dtype;","}else{",It,"=",Ue,".getBuffer(",K,");","if(",It,"){",ur,"=",It,".dtype;",'}else if("constant" in ',K,"){",Ne.state,"=",rb,";","if(typeof "+K+'.constant === "number"){',Ne[Rc[0]],"=",K,".constant;",Rc.slice(1).map(function(Vt){return Ne[Vt]}).join("="),"=0;","}else{",Rc.map(function(Vt,ar){return Ne[Vt]+"="+K+".constant.length>"+ar+"?"+K+".constant["+ar+"]:0;"}).join(""),"}}else{","if(",Be,"(",K,".buffer)){",It,"=",Ue,".createStream(",zc,",",K,".buffer);","}else{",It,"=",Ue,".getBuffer(",K,".buffer);","}",ur,'="type" in ',K,"?",_e.glTypes,"[",K,".type]:",It,".dtype;",Ne.normalized,"=!!",K,".normalized;");function Tt(Vt){le(Ne[Vt],"=",K,".",Vt,"|0;")}return Tt("size"),Tt("offset"),Tt("stride"),Tt("divisor"),le("}}"),le.exit("if(",Ne.isStream,"){",Ue,".destroyStream(",It,");","}"),Ne}Se[he]=Ti(fe,ve)}),Se}function Cn(q,H){var ue=q.static,ye=q.dynamic;if(kh in ue){var Se=ue[kh];return Se!==null&&ot.getVAO(Se)===null&&(Se=ot.createVAO(Se)),pn(function(fe){return fe.link(ot.getVAO(Se))})}else if(kh in ye){var he=ye[kh];return Ti(he,function(fe,ve){var Z=fe.invoke(ve,he);return ve.def(fe.shared.vao+".getVAO("+Z+")")})}return null}function Hr(q){var H=q.static,ue=q.dynamic,ye={};return Object.keys(H).forEach(function(Se){var he=H[Se];ye[Se]=pn(function(fe,ve){return typeof he=="number"||typeof he=="boolean"?""+he:fe.link(he)})}),Object.keys(ue).forEach(function(Se){var he=ue[Se];ye[Se]=Ti(he,function(fe,ve){return fe.invoke(ve,he)})}),ye}function mn(q,H,ue,ye,Se){var he=q.static,fe=q.dynamic;F.optional(function(){var Tt=[gu,Ah,Th,mu,yu,Rp,bu,Pp,Ch,kh].concat(Xe);function Vt(ar){Object.keys(ar).forEach(function(Tr){F.command(Tt.indexOf(Tr)>=0,'unknown parameter "'+Tr+'"',Se.commandStr)})}Vt(he),Vt(fe)});var ve=nr(q,H),Z=At(q),le=hr(q,Z,Se),K=Ar(q,Se),ge=gn(q,Se),_e=cr(q,Se,ve);function Be(Tt){var Vt=le[Tt];Vt&&(ge[Tt]=Vt)}Be(hs),Be(ht(Dp));var Ue=Object.keys(ge).length>0,Ne={framebuffer:Z,draw:K,shader:_e,state:ge,dirty:Ue,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ne.profile=sr(q),Ne.uniforms=Nn(ue,Se),Ne.drawVAO=Ne.scopeVAO=Cn(q),!Ne.drawVAO&&_e.program&&!ve&&re.angle_instanced_arrays){var nt=!0,It=_e.program.attributes.map(function(Tt){var Vt=H.static[Tt];return nt=nt&&!!Vt,Vt});if(nt&&It.length>0){var ur=ot.getVAO(ot.createVAO(It));Ne.drawVAO=new bi(null,null,null,function(Tt,Vt){return Tt.link(ur)}),Ne.useVAO=!0}}return ve?Ne.useVAO=!0:Ne.attributes=gr(H,Se),Ne.context=Hr(ye),Ne}function An(q,H,ue){var ye=q.shared,Se=ye.context,he=q.scope();Object.keys(ue).forEach(function(fe){H.save(Se,"."+fe);var ve=ue[fe],Z=ve.append(q,H);Array.isArray(Z)?he(Se,".",fe,"=[",Z.join(),"];"):he(Se,".",fe,"=",Z,";")}),H(he)}function Tn(q,H,ue,ye){var Se=q.shared,he=Se.gl,fe=Se.framebuffer,ve;mt&&(ve=H.def(Se.extensions,".webgl_draw_buffers"));var Z=q.constants,le=Z.drawBuffer,K=Z.backBuffer,ge;ue?ge=ue.append(q,H):ge=H.def(fe,".next"),ye||H("if(",ge,"!==",fe,".cur){"),H("if(",ge,"){",he,".bindFramebuffer(",PA,",",ge,".framebuffer);"),mt&&H(ve,".drawBuffersWEBGL(",le,"[",ge,".colorAttachments.length]);"),H("}else{",he,".bindFramebuffer(",PA,",null);"),mt&&H(ve,".drawBuffersWEBGL(",K,");"),H("}",fe,".cur=",ge,";"),ye||H("}")}function Rn(q,H,ue){var ye=q.shared,Se=ye.gl,he=q.current,fe=q.next,ve=ye.current,Z=ye.next,le=q.cond(ve,".dirty");Xe.forEach(function(K){var ge=ht(K);if(!(ge in ue.state)){var _e,Be;if(ge in fe){_e=fe[ge],Be=he[ge];var Ue=Yn(Ve[ge].length,function(nt){return le.def(_e,"[",nt,"]")});le(q.cond(Ue.map(function(nt,It){return nt+"!=="+Be+"["+It+"]"}).join("||")).then(Se,".",Ye[ge],"(",Ue,");",Ue.map(function(nt,It){return Be+"["+It+"]="+nt}).join(";"),";"))}else{_e=le.def(Z,".",ge);var Ne=q.cond(_e,"!==",ve,".",ge);le(Ne),ge in ft?Ne(q.cond(_e).then(Se,".enable(",ft[ge],");").else(Se,".disable(",ft[ge],");"),ve,".",ge,"=",_e,";"):Ne(Se,".",Ye[ge],"(",_e,");",ve,".",ge,"=",_e,";")}}}),Object.keys(ue.state).length===0&&le(ve,".dirty=false;"),H(le)}function Kn(q,H,ue,ye){var Se=q.shared,he=q.current,fe=Se.current,ve=Se.gl;zA(Object.keys(ue)).forEach(function(Z){var le=ue[Z];if(!(ye&&!ye(le))){var K=le.append(q,H);if(ft[Z]){var ge=ft[Z];nl(le)?K?H(ve,".enable(",ge,");"):H(ve,".disable(",ge,");"):H(q.cond(K).then(ve,".enable(",ge,");").else(ve,".disable(",ge,");")),H(fe,".",Z,"=",K,";")}else if(cn(K)){var _e=he[Z];H(ve,".",Ye[Z],"(",K,");",K.map(function(Be,Ue){return _e+"["+Ue+"]="+Be}).join(";"),";")}else H(ve,".",Ye[Z],"(",K,");",fe,".",Z,"=",K,";")}})}function fn(q,H){it&&(q.instancing=H.def(q.shared.extensions,".angle_instanced_arrays"))}function lr(q,H,ue,ye,Se){var he=q.shared,fe=q.stats,ve=he.current,Z=he.timer,le=ue.profile;function K(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ge,_e;function Be(Tt){ge=H.def(),Tt(ge,"=",K(),";"),typeof Se=="string"?Tt(fe,".count+=",Se,";"):Tt(fe,".count++;"),Ze&&(ye?(_e=H.def(),Tt(_e,"=",Z,".getNumPendingQueries();")):Tt(Z,".beginQuery(",fe,");"))}function Ue(Tt){Tt(fe,".cpuTime+=",K(),"-",ge,";"),Ze&&(ye?Tt(Z,".pushScopeStats(",_e,",",Z,".getNumPendingQueries(),",fe,");"):Tt(Z,".endQuery();"))}function Ne(Tt){var Vt=H.def(ve,".profile");H(ve,".profile=",Tt,";"),H.exit(ve,".profile=",Vt,";")}var nt;if(le){if(nl(le)){le.enable?(Be(H),Ue(H.exit),Ne("true")):Ne("false");return}nt=le.append(q,H),Ne(nt)}else nt=H.def(ve,".profile");var It=q.block();Be(It),H("if(",nt,"){",It,"}");var ur=q.block();Ue(ur),H.exit("if(",nt,"){",ur,"}")}function qn(q,H,ue,ye,Se){var he=q.shared;function fe(Z){switch(Z){case Fp:case Gp:case Wp:return 2;case Bp:case jp:case Hp:return 3;case zp:case Up:case Vp:return 4;default:return 1}}function ve(Z,le,K){var ge=he.gl,_e=H.def(Z,".location"),Be=H.def(he.attributes,"[",_e,"]"),Ue=K.state,Ne=K.buffer,nt=[K.x,K.y,K.z,K.w],It=["buffer","normalized","offset","stride"];function ur(){H("if(!",Be,".buffer){",ge,".enableVertexAttribArray(",_e,");}");var Vt=K.type,ar;if(K.size?ar=H.def(K.size,"||",le):ar=le,H("if(",Be,".type!==",Vt,"||",Be,".size!==",ar,"||",It.map(function(nn){return Be+"."+nn+"!=="+K[nn]}).join("||"),"){",ge,".bindBuffer(",zc,",",Ne,".buffer);",ge,".vertexAttribPointer(",[_e,ar,Vt,K.normalized,K.stride,K.offset],");",Be,".type=",Vt,";",Be,".size=",ar,";",It.map(function(nn){return Be+"."+nn+"="+K[nn]+";"}).join(""),"}"),it){var Tr=K.divisor;H("if(",Be,".divisor!==",Tr,"){",q.instancing,".vertexAttribDivisorANGLE(",[_e,Tr],");",Be,".divisor=",Tr,";}")}}function Tt(){H("if(",Be,".buffer){",ge,".disableVertexAttribArray(",_e,");",Be,".buffer=null;","}if(",Rc.map(function(Vt,ar){return Be+"."+Vt+"!=="+nt[ar]}).join("||"),"){",ge,".vertexAttrib4f(",_e,",",nt,");",Rc.map(function(Vt,ar){return Be+"."+Vt+"="+nt[ar]+";"}).join(""),"}")}Ue===Pc?ur():Ue===rb?Tt():(H("if(",Ue,"===",Pc,"){"),ur(),H("}else{"),Tt(),H("}"))}ye.forEach(function(Z){var le=Z.name,K=ue.attributes[le],ge;if(K){if(!Se(K))return;ge=K.append(q,H)}else{if(!Se(GA))return;var _e=q.scopeAttrib(le);F.optional(function(){q.assert(H,_e+".state","missing attribute "+le)}),ge={},Object.keys(new we).forEach(function(Be){ge[Be]=H.def(_e,".",Be)})}ve(q.link(Z),fe(Z.info.type),ge)})}function Dr(q,H,ue,ye,Se){for(var he=q.shared,fe=he.gl,ve,Z=0;Z<ye.length;++Z){var le=ye[Z],K=le.name,ge=le.info.type,_e=ue.uniforms[K],Be=q.link(le),Ue=Be+".location",Ne;if(_e){if(!Se(_e))continue;if(nl(_e)){var nt=_e.value;if(F.command(nt!==null&&typeof nt<"u",'missing uniform "'+K+'"',q.commandStr),ge===Nh||ge===$h){F.command(typeof nt=="function"&&(ge===Nh&&(nt._reglType==="texture2d"||nt._reglType==="framebuffer")||ge===$h&&(nt._reglType==="textureCube"||nt._reglType==="framebufferCube")),"invalid texture for uniform "+K,q.commandStr);var It=q.link(nt._texture||nt.color[0]._texture);H(fe,".uniform1i(",Ue,",",It+".bind());"),H.exit(It,".unbind();")}else if(ge===Lh||ge===Ih||ge===Oh){F.optional(function(){F.command(cn(nt),"invalid matrix for uniform "+K,q.commandStr),F.command(ge===Lh&&nt.length===4||ge===Ih&&nt.length===9||ge===Oh&&nt.length===16,"invalid length for matrix uniform "+K,q.commandStr)});var ur=q.global.def("new Float32Array(["+Array.prototype.slice.call(nt)+"])"),Tt=2;ge===Ih?Tt=3:ge===Oh&&(Tt=4),H(fe,".uniformMatrix",Tt,"fv(",Ue,",false,",ur,");")}else{switch(ge){case yb:F.commandType(nt,"number","uniform "+K,q.commandStr),ve="1f";break;case Fp:F.command(cn(nt)&&nt.length===2,"uniform "+K,q.commandStr),ve="2f";break;case Bp:F.command(cn(nt)&&nt.length===3,"uniform "+K,q.commandStr),ve="3f";break;case zp:F.command(cn(nt)&&nt.length===4,"uniform "+K,q.commandStr),ve="4f";break;case wb:F.commandType(nt,"boolean","uniform "+K,q.commandStr),ve="1i";break;case bb:F.commandType(nt,"number","uniform "+K,q.commandStr),ve="1i";break;case Wp:F.command(cn(nt)&&nt.length===2,"uniform "+K,q.commandStr),ve="2i";break;case Gp:F.command(cn(nt)&&nt.length===2,"uniform "+K,q.commandStr),ve="2i";break;case Hp:F.command(cn(nt)&&nt.length===3,"uniform "+K,q.commandStr),ve="3i";break;case jp:F.command(cn(nt)&&nt.length===3,"uniform "+K,q.commandStr),ve="3i";break;case Vp:F.command(cn(nt)&&nt.length===4,"uniform "+K,q.commandStr),ve="4i";break;case Up:F.command(cn(nt)&&nt.length===4,"uniform "+K,q.commandStr),ve="4i";break}H(fe,".uniform",ve,"(",Ue,",",cn(nt)?Array.prototype.slice.call(nt):nt,");")}continue}else Ne=_e.append(q,H)}else{if(!Se(GA))continue;Ne=H.def(he.uniforms,"[",Y.id(K),"]")}ge===Nh?(F(!Array.isArray(Ne),"must specify a scalar prop for textures"),H("if(",Ne,"&&",Ne,'._reglType==="framebuffer"){',Ne,"=",Ne,".color[0];","}")):ge===$h&&(F(!Array.isArray(Ne),"must specify a scalar prop for cube maps"),H("if(",Ne,"&&",Ne,'._reglType==="framebufferCube"){',Ne,"=",Ne,".color[0];","}")),F.optional(function(){function wi(Wa,XA){q.assert(H,Wa,'bad data or missing for uniform "'+K+'".  '+XA)}function _b(Wa){F(!Array.isArray(Ne),"must not specify an array type for uniform"),wi("typeof "+Ne+'==="'+Wa+'"',"invalid type, expected "+Wa)}function va(Wa,XA){Array.isArray(Ne)?F(Ne.length===Wa,"must have length "+Wa):wi(he.isArrayLike+"("+Ne+")&&"+Ne+".length==="+Wa,"invalid vector, should have length "+Wa,q.commandStr)}function YA(Wa){F(!Array.isArray(Ne),"must not specify a value type"),wi("typeof "+Ne+'==="function"&&'+Ne+'._reglType==="texture'+(Wa===IA?"2d":"Cube")+'"',"invalid texture type",q.commandStr)}switch(ge){case bb:_b("number");break;case Gp:va(2);break;case jp:va(3);break;case Up:va(4);break;case yb:_b("number");break;case Fp:va(2);break;case Bp:va(3);break;case zp:va(4);break;case wb:_b("boolean");break;case Wp:va(2);break;case Hp:va(3);break;case Vp:va(4);break;case Lh:va(4);break;case Ih:va(9);break;case Oh:va(16);break;case Nh:YA(IA);break;case $h:YA(UW);break}});var Vt=1;switch(ge){case Nh:case $h:var ar=H.def(Ne,"._texture");H(fe,".uniform1i(",Ue,",",ar,".bind());"),H.exit(ar,".unbind();");continue;case bb:case wb:ve="1i";break;case Gp:case Wp:ve="2i",Vt=2;break;case jp:case Hp:ve="3i",Vt=3;break;case Up:case Vp:ve="4i",Vt=4;break;case yb:ve="1f";break;case Fp:ve="2f",Vt=2;break;case Bp:ve="3f",Vt=3;break;case zp:ve="4f",Vt=4;break;case Lh:ve="Matrix2fv";break;case Ih:ve="Matrix3fv";break;case Oh:ve="Matrix4fv";break}if(H(fe,".uniform",ve,"(",Ue,","),ve.charAt(0)==="M"){var Tr=Math.pow(ge-Lh+2,2),nn=q.global.def("new Float32Array(",Tr,")");Array.isArray(Ne)?H("false,(",Yn(Tr,function(wi){return nn+"["+wi+"]="+Ne[wi]}),",",nn,")"):H("false,(Array.isArray(",Ne,")||",Ne," instanceof Float32Array)?",Ne,":(",Yn(Tr,function(wi){return nn+"["+wi+"]="+Ne+"["+wi+"]"}),",",nn,")")}else Vt>1?H(Yn(Vt,function(wi){return Array.isArray(Ne)?Ne[wi]:Ne+"["+wi+"]"})):(F(!Array.isArray(Ne),"uniform value must not be an array"),H(Ne));H(");")}}function Ut(q,H,ue,ye){var Se=q.shared,he=Se.gl,fe=Se.draw,ve=ye.draw;function Z(){var ar=ve.elements,Tr,nn=H;return ar?((ar.contextDep&&ye.contextDynamic||ar.propDep)&&(nn=ue),Tr=ar.append(q,nn)):Tr=nn.def(fe,".",mu),Tr&&nn("if("+Tr+")"+he+".bindBuffer("+zW+","+Tr+".buffer.buffer);"),Tr}function le(){var ar=ve.count,Tr,nn=H;return ar?((ar.contextDep&&ye.contextDynamic||ar.propDep)&&(nn=ue),Tr=ar.append(q,nn),F.optional(function(){ar.MISSING&&q.assert(H,"false","missing vertex count"),ar.DYNAMIC&&q.assert(nn,Tr+">=0","missing vertex count")})):(Tr=nn.def(fe,".",bu),F.optional(function(){q.assert(nn,Tr+">=0","missing vertex count")})),Tr}var K=Z();function ge(ar){var Tr=ve[ar];return Tr?Tr.contextDep&&ye.contextDynamic||Tr.propDep?Tr.append(q,ue):Tr.append(q,H):H.def(fe,".",ar)}var _e=ge(yu),Be=ge(Rp),Ue=le();if(typeof Ue=="number"){if(Ue===0)return}else ue("if(",Ue,"){"),ue.exit("}");var Ne,nt;it&&(Ne=ge(Pp),nt=q.instancing);var It=K+".type",ur=ve.elements&&nl(ve.elements);function Tt(){function ar(){ue(nt,".drawElementsInstancedANGLE(",[_e,Ue,It,Be+"<<(("+It+"-"+cA+")>>1)",Ne],");")}function Tr(){ue(nt,".drawArraysInstancedANGLE(",[_e,Be,Ue,Ne],");")}K?ur?ar():(ue("if(",K,"){"),ar(),ue("}else{"),Tr(),ue("}")):Tr()}function Vt(){function ar(){ue(he+".drawElements("+[_e,Ue,It,Be+"<<(("+It+"-"+cA+")>>1)"]+");")}function Tr(){ue(he+".drawArrays("+[_e,Be,Ue]+");")}K?ur?ar():(ue("if(",K,"){"),ar(),ue("}else{"),Tr(),ue("}")):Tr()}it&&(typeof Ne!="number"||Ne>=0)?typeof Ne=="string"?(ue("if(",Ne,">0){"),Tt(),ue("}else if(",Ne,"<0){"),Vt(),ue("}")):Tt():Vt()}function vr(q,H,ue,ye,Se){var he=Qt(),fe=he.proc("body",Se);return F.optional(function(){he.commandStr=H.commandStr,he.command=he.link(H.commandStr)}),it&&(he.instancing=fe.def(he.shared.extensions,".angle_instanced_arrays")),q(he,fe,ue,ye),he.compile().body}function _r(q,H,ue,ye){fn(q,H),ue.useVAO?ue.drawVAO?H(q.shared.vao,".setVAO(",ue.drawVAO.append(q,H),");"):H(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(H(q.shared.vao,".setVAO(null);"),qn(q,H,ue,ye.attributes,function(){return!0})),Dr(q,H,ue,ye.uniforms,function(){return!0}),Ut(q,H,H,ue)}function hn(q,H){var ue=q.proc("draw",1);fn(q,ue),An(q,ue,H.context),Tn(q,ue,H.framebuffer),Rn(q,ue,H),Kn(q,ue,H.state),lr(q,ue,H,!1,!0);var ye=H.shader.progVar.append(q,ue);if(ue(q.shared.gl,".useProgram(",ye,".program);"),H.shader.program)_r(q,ue,H,H.shader.program);else{ue(q.shared.vao,".setVAO(null);");var Se=q.global.def("{}"),he=ue.def(ye,".id"),fe=ue.def(Se,"[",he,"]");ue(q.cond(fe).then(fe,".call(this,a0);").else(fe,"=",Se,"[",he,"]=",q.link(function(ve){return vr(_r,q,H,ve,1)}),"(",ye,");",fe,".call(this,a0);"))}Object.keys(H.state).length>0&&ue(q.shared.current,".dirty=true;")}function wo(q,H,ue,ye){q.batchId="a1",fn(q,H);function Se(){return!0}qn(q,H,ue,ye.attributes,Se),Dr(q,H,ue,ye.uniforms,Se),Ut(q,H,H,ue)}function xu(q,H,ue,ye){fn(q,H);var Se=ue.contextDep,he=H.def(),fe="a0",ve="a1",Z=H.def();q.shared.props=Z,q.batchId=he;var le=q.scope(),K=q.scope();H(le.entry,"for(",he,"=0;",he,"<",ve,";++",he,"){",Z,"=",fe,"[",he,"];",K,"}",le.exit);function ge(It){return It.contextDep&&Se||It.propDep}function _e(It){return!ge(It)}if(ue.needsContext&&An(q,K,ue.context),ue.needsFramebuffer&&Tn(q,K,ue.framebuffer),Kn(q,K,ue.state,ge),ue.profile&&ge(ue.profile)&&lr(q,K,ue,!1,!0),ye)ue.useVAO?ue.drawVAO?ge(ue.drawVAO)?K(q.shared.vao,".setVAO(",ue.drawVAO.append(q,K),");"):le(q.shared.vao,".setVAO(",ue.drawVAO.append(q,le),");"):le(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(le(q.shared.vao,".setVAO(null);"),qn(q,le,ue,ye.attributes,_e),qn(q,K,ue,ye.attributes,ge)),Dr(q,le,ue,ye.uniforms,_e),Dr(q,K,ue,ye.uniforms,ge),Ut(q,le,K,ue);else{var Be=q.global.def("{}"),Ue=ue.shader.progVar.append(q,K),Ne=K.def(Ue,".id"),nt=K.def(Be,"[",Ne,"]");K(q.shared.gl,".useProgram(",Ue,".program);","if(!",nt,"){",nt,"=",Be,"[",Ne,"]=",q.link(function(It){return vr(wo,q,ue,It,2)}),"(",Ue,");}",nt,".call(this,a0[",he,"],",he,");")}}function te(q,H){var ue=q.proc("batch",2);q.batchId="0",fn(q,ue);var ye=!1,Se=!0;Object.keys(H.context).forEach(function(Be){ye=ye||H.context[Be].propDep}),ye||(An(q,ue,H.context),Se=!1);var he=H.framebuffer,fe=!1;he?(he.propDep?ye=fe=!0:he.contextDep&&ye&&(fe=!0),fe||Tn(q,ue,he)):Tn(q,ue,null),H.state.viewport&&H.state.viewport.propDep&&(ye=!0);function ve(Be){return Be.contextDep&&ye||Be.propDep}Rn(q,ue,H),Kn(q,ue,H.state,function(Be){return!ve(Be)}),(!H.profile||!ve(H.profile))&&lr(q,ue,H,!1,"a1"),H.contextDep=ye,H.needsContext=Se,H.needsFramebuffer=fe;var Z=H.shader.progVar;if(Z.contextDep&&ye||Z.propDep)xu(q,ue,H,null);else{var le=Z.append(q,ue);if(ue(q.shared.gl,".useProgram(",le,".program);"),H.shader.program)xu(q,ue,H,H.shader.program);else{ue(q.shared.vao,".setVAO(null);");var K=q.global.def("{}"),ge=ue.def(le,".id"),_e=ue.def(K,"[",ge,"]");ue(q.cond(_e).then(_e,".call(this,a0,a1);").else(_e,"=",K,"[",ge,"]=",q.link(function(Be){return vr(xu,q,H,Be,2)}),"(",le,");",_e,".call(this,a0,a1);"))}}Object.keys(H.state).length>0&&ue(q.shared.current,".dirty=true;")}function Te(q,H){var ue=q.proc("scope",3);q.batchId="a2";var ye=q.shared,Se=ye.current;An(q,ue,H.context),H.framebuffer&&H.framebuffer.append(q,ue),zA(Object.keys(H.state)).forEach(function(fe){var ve=H.state[fe],Z=ve.append(q,ue);cn(Z)?Z.forEach(function(le,K){ue.set(q.next[fe],"["+K+"]",le)}):ue.set(ye.next,"."+fe,Z)}),lr(q,ue,H,!0,!0),[mu,Rp,bu,Pp,yu].forEach(function(fe){var ve=H.draw[fe];ve&&ue.set(ye.draw,"."+fe,""+ve.append(q,ue))}),Object.keys(H.uniforms).forEach(function(fe){var ve=H.uniforms[fe].append(q,ue);Array.isArray(ve)&&(ve="["+ve.join()+"]"),ue.set(ye.uniforms,"["+Y.id(fe)+"]",ve)}),Object.keys(H.attributes).forEach(function(fe){var ve=H.attributes[fe].append(q,ue),Z=q.scopeAttrib(fe);Object.keys(new we).forEach(function(le){ue.set(Z,"."+le,ve[le])})}),H.scopeVAO&&ue.set(ye.vao,".targetVAO",H.scopeVAO.append(q,ue));function he(fe){var ve=H.shader[fe];ve&&ue.set(ye.shader,"."+fe,ve.append(q,ue))}he(Ah),he(Th),Object.keys(H.state).length>0&&(ue(Se,".dirty=true;"),ue.exit(Se,".dirty=true;")),ue("a1(",q.shared.context,",a0,",q.batchId,");")}function Ee(q){if(!(typeof q!="object"||cn(q))){for(var H=Object.keys(q),ue=0;ue<H.length;++ue)if(zt.isDynamic(q[H[ue]]))return!0;return!1}}function Et(q,H,ue){var ye=H.static[ue];if(!ye||!Ee(ye))return;var Se=q.global,he=Object.keys(ye),fe=!1,ve=!1,Z=!1,le=q.global.def("{}");he.forEach(function(ge){var _e=ye[ge];if(zt.isDynamic(_e)){typeof _e=="function"&&(_e=ye[ge]=zt.unbox(_e));var Be=Ti(_e,null);fe=fe||Be.thisDep,Z=Z||Be.propDep,ve=ve||Be.contextDep}else{switch(Se(le,".",ge,"="),typeof _e){case"number":Se(_e);break;case"string":Se('"',_e,'"');break;case"object":Array.isArray(_e)&&Se("[",_e.join(),"]");break;default:Se(q.link(_e));break}Se(";")}});function K(ge,_e){he.forEach(function(Be){var Ue=ye[Be];if(zt.isDynamic(Ue)){var Ne=ge.invoke(_e,Ue);_e(le,".",Be,"=",Ne,";")}})}H.dynamic[ue]=new zt.DynamicVariable($p,{thisDep:fe,contextDep:ve,propDep:Z,ref:le,append:K}),delete H.static[ue]}function dr(q,H,ue,ye,Se){var he=Qt();he.stats=he.link(Se),Object.keys(H.static).forEach(function(ve){Et(he,H,ve)}),BW.forEach(function(ve){Et(he,q,ve)});var fe=mn(q,H,ue,ye,he);return hn(he,fe),Te(he,fe),te(he,fe),n(he.compile(),{destroy:function(){fe.shader.program.destroy()}})}return{next:xt,current:Ve,procs:function(){var q=Qt(),H=q.proc("poll"),ue=q.proc("refresh"),ye=q.block();H(ye),ue(ye);var Se=q.shared,he=Se.gl,fe=Se.next,ve=Se.current;ye(ve,".dirty=false;"),Tn(q,H),Tn(q,ue,null,!0);var Z;it&&(Z=q.link(it)),re.oes_vertex_array_object&&ue(q.link(re.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var le=0;le<Ae.maxAttributes;++le){var K=ue.def(Se.attributes,"[",le,"]"),ge=q.cond(K,".buffer");ge.then(he,".enableVertexAttribArray(",le,");",he,".bindBuffer(",zc,",",K,".buffer.buffer);",he,".vertexAttribPointer(",le,",",K,".size,",K,".type,",K,".normalized,",K,".stride,",K,".offset);").else(he,".disableVertexAttribArray(",le,");",he,".vertexAttrib4f(",le,",",K,".x,",K,".y,",K,".z,",K,".w);",K,".buffer=null;"),ue(ge),it&&ue(Z,".vertexAttribDivisorANGLE(",le,",",K,".divisor);")}return ue(q.shared.vao,".currentVAO=null;",q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"),Object.keys(ft).forEach(function(_e){var Be=ft[_e],Ue=ye.def(fe,".",_e),Ne=q.block();Ne("if(",Ue,"){",he,".enable(",Be,")}else{",he,".disable(",Be,")}",ve,".",_e,"=",Ue,";"),ue(Ne),H("if(",Ue,"!==",ve,".",_e,"){",Ne,"}")}),Object.keys(Ye).forEach(function(_e){var Be=Ye[_e],Ue=Ve[_e],Ne,nt,It=q.block();if(It(he,".",Be,"("),cn(Ue)){var ur=Ue.length;Ne=q.global.def(fe,".",_e),nt=q.global.def(ve,".",_e),It(Yn(ur,function(Tt){return Ne+"["+Tt+"]"}),");",Yn(ur,function(Tt){return nt+"["+Tt+"]="+Ne+"["+Tt+"];"}).join("")),H("if(",Yn(ur,function(Tt){return Ne+"["+Tt+"]!=="+nt+"["+Tt+"]"}).join("||"),"){",It,"}")}else Ne=ye.def(fe,".",_e),nt=ye.def(ve,".",_e),It(Ne,");",ve,".",_e,"=",Ne,";"),H("if(",Ne,"!==",nt,"){",It,"}");ue(It)}),q.compile()}(),compile:dr}}function a9(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var o9=34918,s9=34919,jA=35007,l9=function(P,Y){if(!Y.ext_disjoint_timer_query)return null;var re=[];function Ae(){return re.pop()||Y.ext_disjoint_timer_query.createQueryEXT()}function je(it){re.push(it)}var Ce=[];function Ie(it){var mt=Ae();Y.ext_disjoint_timer_query.beginQueryEXT(jA,mt),Ce.push(mt),Ze(Ce.length-1,Ce.length,it)}function qe(){Y.ext_disjoint_timer_query.endQueryEXT(jA)}function et(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ot=[];function tt(){return ot.pop()||new et}function lt(it){ot.push(it)}var pt=[];function Ze(it,mt,Ve){var xt=tt();xt.startQueryIndex=it,xt.endQueryIndex=mt,xt.sum=0,xt.stats=Ve,pt.push(xt)}var ct=[],we=[];function Oe(){var it,mt,Ve=Ce.length;if(Ve!==0){we.length=Math.max(we.length,Ve+1),ct.length=Math.max(ct.length,Ve+1),ct[0]=0,we[0]=0;var xt=0;for(it=0,mt=0;mt<Ce.length;++mt){var Xe=Ce[mt];Y.ext_disjoint_timer_query.getQueryObjectEXT(Xe,s9)?(xt+=Y.ext_disjoint_timer_query.getQueryObjectEXT(Xe,o9),je(Xe)):Ce[it++]=Xe,ct[mt+1]=xt,we[mt+1]=it}for(Ce.length=it,it=0,mt=0;mt<pt.length;++mt){var ft=pt[mt],Ye=ft.startQueryIndex,ht=ft.endQueryIndex;ft.sum+=ct[ht]-ct[Ye];var Ft=we[Ye],tr=we[ht];tr===Ft?(ft.stats.gpuTime+=ft.sum/1e6,lt(ft)):(ft.startQueryIndex=Ft,ft.endQueryIndex=tr,pt[it++]=ft)}pt.length=it}}return{beginQuery:Ie,endQuery:qe,pushScopeStats:Ze,update:Oe,getNumPendingQueries:function(){return Ce.length},clear:function(){re.push.apply(re,Ce);for(var it=0;it<re.length;it++)Y.ext_disjoint_timer_query.deleteQueryEXT(re[it]);Ce.length=0,re.length=0},restore:function(){Ce.length=0,re.length=0}}},u9=16384,c9=256,f9=1024,h9=34962,UA="webglcontextlost",WA="webglcontextrestored",HA=1,d9=2,v9=3;function VA(P,Y){for(var re=0;re<P.length;++re)if(P[re]===Y)return re;return-1}function p9(P){var Y=vh(P);if(!Y)return null;var re=Y.gl,Ae=re.getContextAttributes(),je=re.isContextLost(),Ce=ph(re,Y);if(!Ce)return null;var Ie=Ir(),qe=a9(),et=Ce.extensions,ot=l9(re,et),tt=pr(),lt=re.drawingBufferWidth,pt=re.drawingBufferHeight,Ze={tick:0,time:0,viewportWidth:lt,viewportHeight:pt,framebufferWidth:lt,framebufferHeight:pt,drawingBufferWidth:lt,drawingBufferHeight:pt,pixelRatio:Y.pixelRatio},ct={},we={elements:null,primitive:4,count:-1,offset:0,instances:-1},Oe=eU(re,et),it=gU(re,qe,Y,Ve),mt=TW(re,et,Oe,qe,it);function Ve(Ut){return mt.destroyBuffer(Ut)}var xt=TU(re,et,it,qe),Xe=OW(re,Ie,qe,Y),ft=aW(re,et,Oe,function(){Ft.procs.poll()},Ze,qe,Y),Ye=oW(re,et,Oe,qe,Y),ht=CW(re,et,Oe,ft,Ye,qe),Ft=i9(re,Ie,et,Oe,it,xt,ft,ht,ct,mt,Xe,we,Ze,ot,Y),tr=DW(re,ht,Ft.procs.poll,Ze,Ae,et,Oe),gt=Ft.next,st=re.canvas,He=[],Qt=[],sr=[],At=[Y.onDestroy],hr=null;function nr(){if(He.length===0){ot&&ot.update(),hr=null;return}hr=jt.next(nr),Kn();for(var Ut=He.length-1;Ut>=0;--Ut){var vr=He[Ut];vr&&vr(Ze,null,0)}re.flush(),ot&&ot.update()}function cr(){!hr&&He.length>0&&(hr=jt.next(nr))}function Ar(){hr&&(jt.cancel(nr),hr=null)}function gn(Ut){Ut.preventDefault(),je=!0,Ar(),Qt.forEach(function(vr){vr()})}function Nn(Ut){re.getError(),je=!1,Ce.restore(),Xe.restore(),it.restore(),ft.restore(),Ye.restore(),ht.restore(),mt.restore(),ot&&ot.restore(),Ft.procs.refresh(),cr(),sr.forEach(function(vr){vr()})}st&&(st.addEventListener(UA,gn,!1),st.addEventListener(WA,Nn,!1));function gr(){He.length=0,Ar(),st&&(st.removeEventListener(UA,gn),st.removeEventListener(WA,Nn)),Xe.clear(),ht.clear(),Ye.clear(),ft.clear(),xt.clear(),it.clear(),mt.clear(),ot&&ot.clear(),At.forEach(function(Ut){Ut()})}function Cn(Ut){F(!!Ut,"invalid args to regl({...})"),F.type(Ut,"object","invalid args to regl({...})");function vr(Se){var he=n({},Se);delete he.uniforms,delete he.attributes,delete he.context,delete he.vao,"stencil"in he&&he.stencil.op&&(he.stencil.opBack=he.stencil.opFront=he.stencil.op,delete he.stencil.op);function fe(ve){if(ve in he){var Z=he[ve];delete he[ve],Object.keys(Z).forEach(function(le){he[ve+"."+le]=Z[le]})}}return fe("blend"),fe("depth"),fe("cull"),fe("stencil"),fe("polygonOffset"),fe("scissor"),fe("sample"),"vao"in Se&&(he.vao=Se.vao),he}function _r(Se,he){var fe={},ve={};return Object.keys(Se).forEach(function(Z){var le=Se[Z];if(zt.isDynamic(le)){ve[Z]=zt.unbox(le,Z);return}else if(he&&Array.isArray(le)){for(var K=0;K<le.length;++K)if(zt.isDynamic(le[K])){ve[Z]=zt.unbox(le,Z);return}}fe[Z]=le}),{dynamic:ve,static:fe}}var hn=_r(Ut.context||{},!0),wo=_r(Ut.uniforms||{},!0),xu=_r(Ut.attributes||{},!1),te=_r(vr(Ut),!1),Te={gpuTime:0,cpuTime:0,count:0},Ee=Ft.compile(te,xu,wo,hn,Te),Et=Ee.draw,dr=Ee.batch,q=Ee.scope,H=[];function ue(Se){for(;H.length<Se;)H.push(null);return H}function ye(Se,he){var fe;if(je&&F.raise("context lost"),typeof Se=="function")return q.call(this,null,Se,0);if(typeof he=="function")if(typeof Se=="number")for(fe=0;fe<Se;++fe)q.call(this,null,he,fe);else if(Array.isArray(Se))for(fe=0;fe<Se.length;++fe)q.call(this,Se[fe],he,fe);else return q.call(this,Se,he,0);else if(typeof Se=="number"){if(Se>0)return dr.call(this,ue(Se|0),Se|0)}else if(Array.isArray(Se)){if(Se.length)return dr.call(this,Se,Se.length)}else return Et.call(this,Se)}return n(ye,{stats:Te,destroy:function(){Ee.destroy()}})}var Hr=ht.setFBO=Cn({framebuffer:zt.define.call(null,HA,"framebuffer")});function mn(Ut,vr){var _r=0;Ft.procs.poll();var hn=vr.color;hn&&(re.clearColor(+hn[0]||0,+hn[1]||0,+hn[2]||0,+hn[3]||0),_r|=u9),"depth"in vr&&(re.clearDepth(+vr.depth),_r|=c9),"stencil"in vr&&(re.clearStencil(vr.stencil|0),_r|=f9),F(!!_r,"called regl.clear with no buffer specified"),re.clear(_r)}function An(Ut){if(F(typeof Ut=="object"&&Ut,"regl.clear() takes an object as input"),"framebuffer"in Ut)if(Ut.framebuffer&&Ut.framebuffer_reglType==="framebufferCube")for(var vr=0;vr<6;++vr)Hr(n({framebuffer:Ut.framebuffer.faces[vr]},Ut),mn);else Hr(Ut,mn);else mn(null,Ut)}function Tn(Ut){F.type(Ut,"function","regl.frame() callback must be a function"),He.push(Ut);function vr(){var _r=VA(He,Ut);F(_r>=0,"cannot cancel a frame twice");function hn(){var wo=VA(He,hn);He[wo]=He[He.length-1],He.length-=1,He.length<=0&&Ar()}He[_r]=hn}return cr(),{cancel:vr}}function Rn(){var Ut=gt.viewport,vr=gt.scissor_box;Ut[0]=Ut[1]=vr[0]=vr[1]=0,Ze.viewportWidth=Ze.framebufferWidth=Ze.drawingBufferWidth=Ut[2]=vr[2]=re.drawingBufferWidth,Ze.viewportHeight=Ze.framebufferHeight=Ze.drawingBufferHeight=Ut[3]=vr[3]=re.drawingBufferHeight}function Kn(){Ze.tick+=1,Ze.time=lr(),Rn(),Ft.procs.poll()}function fn(){ft.refresh(),Rn(),Ft.procs.refresh(),ot&&ot.update()}function lr(){return(pr()-tt)/1e3}fn();function qn(Ut,vr){F.type(vr,"function","listener callback must be a function");var _r;switch(Ut){case"frame":return Tn(vr);case"lost":_r=Qt;break;case"restore":_r=sr;break;case"destroy":_r=At;break;default:F.raise("invalid event, must be one of frame,lost,restore,destroy")}return _r.push(vr),{cancel:function(){for(var hn=0;hn<_r.length;++hn)if(_r[hn]===vr){_r[hn]=_r[_r.length-1],_r.pop();return}}}}var Dr=n(Cn,{clear:An,prop:zt.define.bind(null,HA),context:zt.define.bind(null,d9),this:zt.define.bind(null,v9),draw:Cn({}),buffer:function(Ut){return it.create(Ut,h9,!1,!1)},elements:function(Ut){return xt.create(Ut,!1)},texture:ft.create2D,cube:ft.createCube,renderbuffer:Ye.create,framebuffer:ht.create,framebufferCube:ht.createCube,vao:mt.createVAO,attributes:Ae,frame:Tn,on:qn,limits:Oe,hasExtension:function(Ut){return Oe.extensions.indexOf(Ut.toLowerCase())>=0},read:tr,destroy:gr,_gl:re,_refresh:fn,poll:function(){Kn(),ot&&ot.update()},now:lr,stats:qe});return Y.onDone(null,Dr),Dr}return p9})})(_G);var BOe=_G.exports;const zOe=co(BOe);var GOe=function(){function r(e,t){go(this,r),this.attribute=void 0,this.buffer=void 0;var n=t.buffer,i=t.offset,a=t.stride,o=t.normalized,s=t.size,l=t.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return mo(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),gs,Zh,ms,ya,Qh,cl,Jh,Xg,Eo,ku,li,Mo,Co,Kg,jOe=(gs={},wt(gs,Qe.POINTS,"points"),wt(gs,Qe.LINES,"lines"),wt(gs,Qe.LINE_LOOP,"line loop"),wt(gs,Qe.LINE_STRIP,"line strip"),wt(gs,Qe.TRIANGLES,"triangles"),wt(gs,Qe.TRIANGLE_FAN,"triangle fan"),wt(gs,Qe.TRIANGLE_STRIP,"triangle strip"),gs),EG=(Zh={},wt(Zh,Qe.STATIC_DRAW,"static"),wt(Zh,Qe.DYNAMIC_DRAW,"dynamic"),wt(Zh,Qe.STREAM_DRAW,"stream"),Zh),GM=(ms={},wt(ms,Qe.BYTE,"int8"),wt(ms,Qe.UNSIGNED_INT,"int16"),wt(ms,Qe.INT,"int32"),wt(ms,Qe.UNSIGNED_BYTE,"uint8"),wt(ms,Qe.UNSIGNED_SHORT,"uint16"),wt(ms,Qe.UNSIGNED_INT,"uint32"),wt(ms,Qe.FLOAT,"float"),ms),UOe=(ya={},wt(ya,Qe.ALPHA,"alpha"),wt(ya,Qe.LUMINANCE,"luminance"),wt(ya,Qe.LUMINANCE_ALPHA,"luminance alpha"),wt(ya,Qe.RGB,"rgb"),wt(ya,Qe.RGBA,"rgba"),wt(ya,Qe.RGBA4,"rgba4"),wt(ya,Qe.RGB5_A1,"rgb5 a1"),wt(ya,Qe.RGB565,"rgb565"),wt(ya,Qe.DEPTH_COMPONENT,"depth"),wt(ya,Qe.DEPTH_STENCIL,"depth stencil"),ya),WOe=(Qh={},wt(Qh,Qe.DONT_CARE,"dont care"),wt(Qh,Qe.NICEST,"nice"),wt(Qh,Qe.FASTEST,"fast"),Qh),N$=(cl={},wt(cl,Qe.NEAREST,"nearest"),wt(cl,Qe.LINEAR,"linear"),wt(cl,Qe.LINEAR_MIPMAP_LINEAR,"mipmap"),wt(cl,Qe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),wt(cl,Qe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),wt(cl,Qe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),cl),$$=(Jh={},wt(Jh,Qe.REPEAT,"repeat"),wt(Jh,Qe.CLAMP_TO_EDGE,"clamp"),wt(Jh,Qe.MIRRORED_REPEAT,"mirror"),Jh),HOe=(Xg={},wt(Xg,Qe.NONE,"none"),wt(Xg,Qe.BROWSER_DEFAULT_WEBGL,"browser"),Xg),VOe=(Eo={},wt(Eo,Qe.NEVER,"never"),wt(Eo,Qe.ALWAYS,"always"),wt(Eo,Qe.LESS,"less"),wt(Eo,Qe.LEQUAL,"lequal"),wt(Eo,Qe.GREATER,"greater"),wt(Eo,Qe.GEQUAL,"gequal"),wt(Eo,Qe.EQUAL,"equal"),wt(Eo,Qe.NOTEQUAL,"notequal"),Eo),D$=(ku={},wt(ku,Qe.FUNC_ADD,"add"),wt(ku,Qe.MIN_EXT,"min"),wt(ku,Qe.MAX_EXT,"max"),wt(ku,Qe.FUNC_SUBTRACT,"subtract"),wt(ku,Qe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),ku),qg=(li={},wt(li,Qe.ZERO,"zero"),wt(li,Qe.ONE,"one"),wt(li,Qe.SRC_COLOR,"src color"),wt(li,Qe.ONE_MINUS_SRC_COLOR,"one minus src color"),wt(li,Qe.SRC_ALPHA,"src alpha"),wt(li,Qe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),wt(li,Qe.DST_COLOR,"dst color"),wt(li,Qe.ONE_MINUS_DST_COLOR,"one minus dst color"),wt(li,Qe.DST_ALPHA,"dst alpha"),wt(li,Qe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),wt(li,Qe.CONSTANT_COLOR,"constant color"),wt(li,Qe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),wt(li,Qe.CONSTANT_ALPHA,"constant alpha"),wt(li,Qe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),wt(li,Qe.SRC_ALPHA_SATURATE,"src alpha saturate"),li),YOe=(Mo={},wt(Mo,Qe.NEVER,"never"),wt(Mo,Qe.ALWAYS,"always"),wt(Mo,Qe.LESS,"less"),wt(Mo,Qe.LEQUAL,"lequal"),wt(Mo,Qe.GREATER,"greater"),wt(Mo,Qe.GEQUAL,"gequal"),wt(Mo,Qe.EQUAL,"equal"),wt(Mo,Qe.NOTEQUAL,"notequal"),Mo),Zc=(Co={},wt(Co,Qe.ZERO,"zero"),wt(Co,Qe.KEEP,"keep"),wt(Co,Qe.REPLACE,"replace"),wt(Co,Qe.INVERT,"invert"),wt(Co,Qe.INCR,"increment"),wt(Co,Qe.DECR,"decrement"),wt(Co,Qe.INCR_WRAP,"increment wrap"),wt(Co,Qe.DECR_WRAP,"decrement wrap"),Co),XOe=(Kg={},wt(Kg,Qe.FRONT,"front"),wt(Kg,Qe.BACK,"back"),Kg),KOe=function(){function r(e,t){go(this,r),this.buffer=void 0;var n=t.data,i=t.usage,a=t.type;this.buffer=e.buffer({data:n,usage:EG[i||Qe.STATIC_DRAW],type:GM[a||Qe.UNSIGNED_BYTE]})}return mo(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var n=t.data,i=t.offset;this.buffer.subdata(n,i)}}]),r}();function n_(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function qOe(r){if(Array.isArray(r))return n_(r)}function ZOe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function QOe(r,e){if(r){if(typeof r=="string")return n_(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n_(r,e):void 0}}function JOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eNe(r){return qOe(r)||ZOe(r)||QOe(r)||JOe()}function R$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function P$(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(t),!0).forEach(function(n){wt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):R$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var tNe=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,F$=0,rNe=function(){function r(e,t){var n=this;go(this,r),this.reGl=e,this.context=t,this.entity=xG(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,h=u.data,d=u.isReferer,v=u.storageClass;if(v===rh.StorageBuffer){if(d)n.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return h.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,h);var p=n.textureCache[c],g=p.textureWidth,m=p.isOutput;i["".concat(c,"Size")]=[g,g],m&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,h)))}i[c]=function(){return n.textureCache[c].texture}}else if(v===rh.Uniform){if(h&&(Array.isArray(h)||Xm(h))&&h.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:tNe,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return mo(r,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()})}},{key:"readData",value:function(){var e=Nl(vi.mark(function n(){var i=this,a,o,s,l,u,c,f,h;return vi.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){v.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(h=0;h<a.length;h+=4)l===1?f.push(a[h]):l===2?f.push(a[h],a[h+1]):f.push(a[h],a[h+1],a[h+2]);else f=a;return v.abrupt("return",new c(f.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"confirmInput",value:function(t,n){var i;this.entity===t.entity?(this.dynamicPingpong=!0,i=this):i=t,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===t});if(i){var a=this.calcDataTexture(t,i.type,n),o=a.texture,s=a.data;this.textureCache[t].data=s,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var n=t.data,i=t.textureWidth;return P$(P$({},t),{},{id:F$++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(t,n,i){var a=1;n===kv.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,eNe(new Array((f-u)*4).fill(0)));var h=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:F$++,data:o,originalDataLength:l,typedArrayConstructor:Xm(i)?i.constructor:void 0,textureWidth:c,texture:h,texelCount:u,elementsPerTexel:a,isOutput:t===this.context.output.name}}}]),r}(),nNe=function(){function r(e,t){go(this,r),this.elements=void 0;var n=t.data,i=t.usage,a=t.type,o=t.count;this.elements=e.elements({data:n,usage:EG[i||Qe.STATIC_DRAW],type:GM[a||Qe.UNSIGNED_BYTE],count:o})}return mo(r,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var n=t.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),r}(),iNe=function(){function r(e,t){go(this,r),this.framebuffer=void 0;var n=t.width,i=t.height,a=t.color,o=t.colors;t.depth,t.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=e.framebuffer(s)}return mo(r,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var n=t.width,i=t.height;this.framebuffer.resize(n,i)}}]),r}();function aNe(r,e){return function(t){return r(e(t))}}var oNe=aNe,sNe=oNe,lNe=sNe(Object.getPrototypeOf,Object),uNe=lNe,cNe=BM,fNe=uNe,hNe=zM,dNe="[object Object]",vNe=Function.prototype,pNe=Object.prototype,MG=vNe.toString,gNe=pNe.hasOwnProperty,mNe=MG.call(Object);function yNe(r){if(!hNe(r)||cNe(r)!=dNe)return!1;var e=fNe(r);if(e===null)return!0;var t=gNe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&MG.call(t)==mNe}var bNe=yNe;const wNe=co(bNe);function Zw(r){var e={};return Object.keys(r).forEach(function(t){i_(t,r[t],e,"")}),e}function i_(r,e,t,n){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||Xm(e)||e===""||e.resize!==void 0){t["".concat(n&&n+".").concat(r)]=e;return}wNe(e)&&Object.keys(e).forEach(function(i){i_(i,e[i],t,"".concat(n&&n+".").concat(r))}),Array.isArray(e)&&e.forEach(function(i,a){Object.keys(i).forEach(function(o){i_(o,i[o],t,"".concat(n&&n+".").concat(r,"[").concat(a,"]"))})})}function B$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(t),!0).forEach(function(n){wt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):B$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var xNe=function(){function r(e,t){go(this,r),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=t.vs,i=t.fs,a=t.defines,o=t.attributes,s=t.uniforms,l=t.primitive,u=t.count,c=t.elements,f=t.depth,h=t.blend,d=t.stencil,v=t.cull,p=t.instances,g=t.scissor,m=t.viewport,y={};s&&(this.uniforms=Zw(s),Object.keys(s).forEach(function(S){y[S]=e.prop(S)}));var w={};Object.keys(o).forEach(function(S){w[S]=o[S].get()});var b=a&&this.generateDefines(a)||"",x={attributes:w,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(b,`
`).concat(i),uniforms:y,vert:`
`.concat(b,`
`).concat(n),primitive:jOe[l===void 0?Qe.TRIANGLES:l]};p&&(x.instances=p),u&&(x.count=u),c&&(x.elements=c.get()),g&&(x.scissor=g),m&&(x.viewport=m),this.initDepthDrawParams({depth:f},x),this.initBlendDrawParams({blend:h},x),this.initStencilDrawParams({stencil:d},x),this.initCullDrawParams({cull:v},x),this.drawCommand=e(x)}return mo(r,[{key:"addUniforms",value:function(t){this.uniforms=Qc(Qc({},this.uniforms),Zw(t))}},{key:"draw",value:function(t){var n=Qc(Qc({},this.uniforms),Zw(t.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=th(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,n){var i=t.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:VOe[i.func||Qe.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,n){var i=t.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:qg[o&&o.srcRGB||Qe.SRC_ALPHA],srcAlpha:qg[o&&o.srcAlpha||Qe.SRC_ALPHA],dstRGB:qg[o&&o.dstRGB||Qe.ONE_MINUS_SRC_ALPHA],dstAlpha:qg[o&&o.dstAlpha||Qe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:D$[s&&s.rgb||Qe.FUNC_ADD],alpha:D$[s&&s.alpha||Qe.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,n){var i=t.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Qe.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:c,h=i.opBack,d=h===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:h;n.stencil={enable:!!a,mask:s,func:Qc(Qc({},u),{},{cmp:YOe[u.cmp]}),opFront:{fail:Zc[f.fail],zfail:Zc[f.zfail],zpass:Zc[f.zpass]},opBack:{fail:Zc[d.fail],zfail:Zc[d.zfail],zpass:Zc[d.zpass]}}}}},{key:"initCullDrawParams",value:function(t,n){var i=t.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Qe.BACK:o;n.cull={enable:!!a,face:XOe[s]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(n){return"#define ".concat(n," ").concat(Number(t[n]))}).join(`
`)}}]),r}(),SNe=function(){function r(e,t){go(this,r),this.texture=void 0,this.width=void 0,this.height=void 0;var n=t.data,i=t.type,a=i===void 0?Qe.UNSIGNED_BYTE:i,o=t.width,s=t.height,l=t.flipY,u=l===void 0?!1:l,c=t.format,f=c===void 0?Qe.RGBA:c,h=t.mipmap,d=h===void 0?!1:h,v=t.wrapS,p=v===void 0?Qe.CLAMP_TO_EDGE:v,g=t.wrapT,m=g===void 0?Qe.CLAMP_TO_EDGE:g,y=t.aniso,w=y===void 0?0:y,b=t.alignment,x=b===void 0?1:b,S=t.premultiplyAlpha,_=S===void 0?!1:S,M=t.mag,A=M===void 0?Qe.NEAREST:M,E=t.min,T=E===void 0?Qe.NEAREST:E,C=t.colorSpace,k=C===void 0?Qe.BROWSER_DEFAULT_WEBGL:C;this.width=o,this.height=s;var L={width:o,height:s,type:GM[a],format:UOe[f],wrapS:$$[p],wrapT:$$[m],mag:N$[A],min:N$[T],alignment:x,flipY:u,colorSpace:HOe[k],premultiplyAlpha:_,aniso:w};n&&(L.data=n),typeof d=="number"?L.mipmap=WOe[d]:typeof d=="boolean"&&(L.mipmap=d),this.texture=e.texture(L)}return mo(r,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var n=t.width,i=t.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}(),_Ne=function(){function r(){var e=this;go(this,r),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Nl(vi.mark(function n(i){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=Nl(vi.mark(function l(u){var c;return vi.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){h.next=5;break}return h.next=3,i.uniforms[u].load();case 3:c=h.sent,i.uniforms[u]=c;case 5:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new xNe(e.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new GOe(e.gl,t)},this.createBuffer=function(t){return new KOe(e.gl,t)},this.createElements=function(t){return new nNe(e.gl,t)},this.createTexture2D=function(t){return new SNe(e.gl,t)},this.createFramebuffer=function(t){return new iNe(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Nl(vi.mark(function n(i){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new rNe(e.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,i=t.depth,a=t.stencil,o=t.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),e.gl.clear(l)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qe.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qe.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,i=t.y,a=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,i,a,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,i=t.x,a=t.y,o=t.width,s=t.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),e.gl.read(l)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return mo(r,[{key:"init",value:function(){var e=Nl(vi.mark(function n(i){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){zOe({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function t(n){return e.apply(this,arguments)}return t}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),r}(),ENe=function(){function r(){go(this,r),this.engine=void 0,this.configService=new ROe}return mo(r,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return xG()}},{key:"createKernel",value:function(t){var n=new SG(this.engine,this.configService);return typeof t=="string"?n.setBundle(JSON.parse(t)):n.setBundle(t),n.init(),n}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new r;return n.setConfig(t),n.setEngine(new _Ne),n}}]),r}();const MNe=Object.freeze(Object.defineProperty({__proto__:null,Kernel:SG,World:ENe},Symbol.toStringTag,{value:"Module"})),CG=rs(MNe);var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.arrayToTextureData=ea.attributesToTextureData=ea.buildTextureDataWithTwoEdgeAttr=ea.buildTextureData=ea.proccessToFunc=void 0;var CNe=vn(),Km=Qy,ANe=function(r,e){var t;return r?(0,CNe.isNumber)(r)?t=function(){return r}:t=r:t=function(){return e||1},t};ea.proccessToFunc=ANe;var TNe=function(r,e){var t=[],n=[],i={},a=0;for(a=0;a<r.length;a++){var o=r[a];i[o.id]=a,t.push(o.x),t.push(o.y),t.push(0),t.push(0),n.push([])}for(a=0;a<e.length;a++){var s=e[a],l=(0,Km.getEdgeTerminal)(s,"source"),u=(0,Km.getEdgeTerminal)(s,"target");!isNaN(i[l])&&!isNaN(i[u])&&(n[i[l]].push(i[u]),n[i[u]].push(i[l]))}var c=0;for(a=0;a<r.length;a++){var f=t.length,h=n[a],d=h.length;t[a*4+2]=f,t[a*4+3]=d,c=Math.max(c,d);for(var v=0;v<d;++v){var p=h[v];t.push(+p)}}for(;t.length%4!==0;)t.push(0);return{maxEdgePerVetex:c,array:new Float32Array(t)}};ea.buildTextureData=TNe;var kNe=function(r,e,t,n){var i=[],a=[],o={},s=0;for(s=0;s<r.length;s++){var l=r[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s],c=(0,Km.getEdgeTerminal)(u,"source"),f=(0,Km.getEdgeTerminal)(u,"target");a[o[c]].push(o[f]),a[o[c]].push(t(u)),a[o[c]].push(n(u)),a[o[c]].push(0),a[o[f]].push(o[c]),a[o[f]].push(t(u)),a[o[f]].push(n(u)),a[o[f]].push(0)}var h=0;for(s=0;s<r.length;s++){var d=i.length,v=a[s],p=v.length;i[s*4+2]=d+1048576*p/4,i[s*4+3]=0,h=Math.max(h,p/4);for(var g=0;g<p;++g){var m=v[g];i.push(+m)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}};ea.buildTextureDataWithTwoEdgeAttr=kNe;var LNe=function(r,e){var t=[],n=r.length,i={};return e.forEach(function(a){r.forEach(function(o,s){if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),t.push(i[a[o]]),s===n-1)for(;t.length%4!==0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(i).length}};ea.attributesToTextureData=LNe;var INe=function(r){for(var e=[],t=r.length,n=r[0].length,i=function(o){r.forEach(function(s,l){if(e.push(s[o]),l===t-1)for(;e.length%4!==0;)e.push(0)})},a=0;a<n;a++)i(a);return new Float32Array(e)};ea.arrayToTextureData=INe;var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.clusterBundle=Go.clusterCode=Go.fruchtermanBundle=Go.fruchtermanCode=void 0;Go.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;Go.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';Go.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;Go.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var ONe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zg=ze&&ze.__awaiter||function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},Qg=ze&&ze.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(hp,"__esModule",{value:!0});hp.FruchtermanGPULayout=void 0;var NNe=_n,Jc=vn(),z$=CG,G$=ea,j$=Go,$Ne=Gs,DNe=function(r){ONe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return Zg(this,void 0,void 0,function(){var t,n,i,a,o,s=this;return Qg(this,function(l){switch(l.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(u,c){(0,Jc.isNumber)(u.x)||(u.x=Math.random()*s.width),(0,Jc.isNumber)(u.y)||(u.y=Math.random()*s.height),a[u.id]=u,o[u.id]=c}),t.nodeMap=a,t.nodeIdxMap=o,[4,t.run()]));case 1:return l.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){return Zg(this,void 0,void 0,function(){var i,a,o,s,l,u=this;return Qg(this,function(c){switch(c.label){case 0:return i=this,a=i.nodes,o=i.center,!a||a.length===0?[2]:a.length===1?(a[0].x=o[0],a[0].y=o[1],[2]):(s={},l={},a.forEach(function(f,h){(0,Jc.isNumber)(f.x)||(f.x=Math.random()*u.width),(0,Jc.isNumber)(f.y)||(f.y=Math.random()*u.height),s[f.id]=f,l[f.id]=h}),i.nodeMap=s,i.nodeIdxMap=l,[4,i.run(t,n)]);case 1:return c.sent(),[2]}})})},e.prototype.run=function(t,n){return Zg(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,v,p,g,m,y,w,b,x,S,_,M,A,E,T,C,k,L=this;return Qg(this,function(I){switch(I.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,l=i.center,u=i.height*i.width,c=Math.sqrt(u)/10,f=u/(a.length+1),h=Math.sqrt(f),d=i.speed,v=i.clustering,p=(0,G$.attributesToTextureData)([i.clusterField],a),g=p.array,m=p.count,a.forEach(function(O,N){var D=0,$=0;(0,Jc.isNumber)(O.fx)&&(0,Jc.isNumber)(O.fy)&&(D=O.fx||.001,$=O.fy||.001),g[4*N+1]=D,g[4*N+2]=$}),y=a.length,w=(0,G$.buildTextureData)(a,o),b=w.maxEdgePerVetex,x=w.array,S=i.workerEnabled,S?_=z$.World.create({canvas:t,engineOptions:{supportCompute:!0}}):_=z$.World.create({engineOptions:{supportCompute:!0}}),M=i.onLayoutEnd,A=[],E=0;E<m;E++)A.push(0,0,0,0);return T=_.createKernel(j$.fruchtermanBundle).setDispatch([y,1,1]).setBinding({u_Data:x,u_K:h,u_K2:f,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:v?1:0,u_Center:l,u_AttributeArray:g,u_ClusterCenters:A,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),v&&(C=_.createKernel(j$.clusterBundle).setDispatch([m,1,1]).setBinding({u_Data:x,u_NodeAttributes:g,u_ClusterCenters:A,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Zg(L,void 0,void 0,function(){var O,N;return Qg(this,function(D){switch(D.label){case 0:O=0,D.label=1;case 1:return O<s?[4,T.execute()]:[3,6];case 2:return D.sent(),v?(C.setBinding({u_Data:T}),[4,C.execute()]):[3,4];case 3:D.sent(),T.setBinding({u_ClusterCenters:C}),D.label=4;case 4:T.setBinding({u_MaxDisplace:c*=.99}),D.label=5;case 5:return O++,[3,1];case 6:return[4,T.getOutput()];case 7:return N=D.sent(),t?n.postMessage({type:$Ne.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:N}):a.forEach(function($,R){var B=N[4*R],j=N[4*R+1];$.x=B,$.y=j}),M&&M(),[2]}})})},[4,k()];case 1:return I.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(NNe.Base);hp.FruchtermanGPULayout=DNe;var dp={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.aveMovementBundle=jo.aveMovementCode=jo.gForceBundle=jo.gForceCode=void 0;jo.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;jo.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';jo.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;jo.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var RNe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qw=ze&&ze.__awaiter||function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},Jw=ze&&ze.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(dp,"__esModule",{value:!0});dp.GForceGPULayout=void 0;var PNe=_n,ys=vn(),U$=CG,bs=ea,FNe=Qy,W$=jo,BNe=Gs,zNe=function(r){RNe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return Qw(this,void 0,void 0,function(){var t,n,i,a,o;return Jw(this,function(s){switch(s.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(l,u){(0,ys.isNumber)(l.x)||(l.x=Math.random()*t.width),(0,ys.isNumber)(l.y)||(l.y=Math.random()*t.height),a[l.id]=l,o[l.id]=u}),t.nodeMap=a,t.nodeIdxMap=o,t.nodeStrength=(0,bs.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,bs.proccessToFunc)(t.edgeStrength,1),[4,t.run()]));case 1:return s.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){var i=this,a=i.nodes,o=i.center;if(!(!a||a.length===0)){if(a.length===1){a[0].x=o[0],a[0].y=o[1];return}var s={},l={};a.forEach(function(u,c){(0,ys.isNumber)(u.x)||(u.x=Math.random()*i.width),(0,ys.isNumber)(u.y)||(u.y=Math.random()*i.height),s[u.id]=u,l[u.id]=c}),i.nodeMap=s,i.nodeIdxMap=l,i.nodeStrength=(0,bs.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,bs.proccessToFunc)(i.edgeStrength,1),i.run(t,n)}},e.prototype.run=function(t,n){return Qw(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,v,p,g,m,y,w,b,x,S,_,M,A,E,T,C,k,L,I=this;return Jw(this,function(O){switch(O.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),l=a.length,i.linkDistance=(0,bs.proccessToFunc)(i.linkDistance),i.edgeStrength=(0,bs.proccessToFunc)(i.edgeStrength),u=(0,bs.buildTextureDataWithTwoEdgeAttr)(a,o,i.linkDistance,i.edgeStrength),c=u.maxEdgePerVetex,f=u.array,i.degrees=(0,FNe.getDegree)(a.length,i.nodeIdxMap,o).map(function(N){return N.all}),h=[],d=[],v=[],p=[],g=[],m=[],y=[],i.getMass||(i.getMass=function(N){return i.degrees[i.nodeIdxMap[N.id]]||1}),w=i.gravity,b=i.center,a.forEach(function(N,D){h.push(i.getMass(N)),d.push(i.nodeStrength(N)),i.degrees[D]||(i.degrees[D]=0);var $=[b[0],b[1],w];if(i.getCenter){var R=i.getCenter(N,i.degrees[D]);R&&(0,ys.isNumber)(R[0])&&(0,ys.isNumber)(R[1])&&(0,ys.isNumber)(R[2])&&($=R)}v.push($[0]),p.push($[1]),g.push($[2]),(0,ys.isNumber)(N.fx)&&(0,ys.isNumber)(N.fy)?(m.push(N.fx||.001),y.push(N.fy||.001)):(m.push(0),y.push(0))}),x=(0,bs.arrayToTextureData)([h,i.degrees,d,m]),S=(0,bs.arrayToTextureData)([v,p,g,y]),_=i.workerEnabled,_?M=U$.World.create({canvas:t,engineOptions:{supportCompute:!0}}):M=U$.World.create({engineOptions:{supportCompute:!0}}),A=i.onLayoutEnd,E=[],f.forEach(function(N){E.push(N)}),T=0;T<4;T++)E.push(0);return C=M.createKernel(W$.gForceBundle).setDispatch([l,1,1]).setBinding({u_Data:f,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:x,u_NodeAttributeArray2:S,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:l,u_AveMovement:E,u_interval:i.interval}),k=M.createKernel(W$.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:l,u_AveMovement:[0,0,0,0]}),L=function(){return Qw(I,void 0,void 0,function(){var N,D,$;return Jw(this,function(R){switch(R.label){case 0:N=0,R.label=1;case 1:return N<s?[4,C.execute()]:[3,5];case 2:return R.sent(),k.setBinding({u_Data:C}),[4,k.execute()];case 3:R.sent(),D=Math.max(.02,i.interval-N*.002),C.setBinding({u_interval:D,u_AveMovement:k}),R.label=4;case 4:return N++,[3,1];case 5:return[4,C.getOutput()];case 6:return $=R.sent(),t?n.postMessage({type:BNe.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:$}):a.forEach(function(B,j){var G=$[4*j],z=$[4*j+1];B.x=G,B.y=z}),A&&A(),[2]}})})},[4,L()];case 1:return O.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(PNe.Base);dp.GForceGPULayout=zNe;var vp={},GNe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(vp,"__esModule",{value:!0});vp.ComboForceLayout=void 0;var jNe=_n,yr=vn(),UNe=function(r){GNe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,n=t.nodes,i=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var l=function(h){var d=[];n.forEach(function(v,p){d[p]={x:0,y:0}}),t.applyCalculate(d),t.applyComboCenterForce(d),n.forEach(function(v,p){!(0,yr.isNumber)(v.x)||!(0,yr.isNumber)(v.y)||(v.x+=d[p].x*o,v.y+=d[p].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<i;u++)l();var c=[0,0];n.forEach(function(h){!(0,yr.isNumber)(h.x)||!(0,yr.isNumber)(h.y)||(c[0]+=h.x,c[1]+=h.y)}),c[0]/=n.length,c[1]/=n.length;var f=[a[0]-c[0],a[1]-c[1]];n.forEach(function(h,d){!(0,yr.isNumber)(h.x)||!(0,yr.isNumber)(h.y)||(h.x+=f[0],h.y+=f[1])}),t.combos.forEach(function(h){var d=s[h.id];d&&d.empty&&(h.x=d.cx||h.x,h.y=d.cy||h.y)}),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,n=t.edges,i=t.nodes,a=t.combos,o={},s={},l={};i.forEach(function(N,D){s[N.id]=N,l[N.id]=D}),t.nodeMap=s,t.indexMap=l;var u={};a.forEach(function(N){u[N.id]=N}),t.oriComboMap=u,t.comboMap=t.getComboMap();var c=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||c,t.preventNodeOverlap=t.preventNodeOverlap||c;var f=t.collideStrength;f&&(t.comboCollideStrength=f,t.nodeCollideStrength=f),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var h=0;h<n.length;++h){var d=(0,yr.getEdgeTerminal)(n[h],"source"),v=(0,yr.getEdgeTerminal)(n[h],"target");o[d]?o[d]++:o[d]=1,o[v]?o[v]++:o[v]=1}for(var p=[],h=0;h<n.length;++h){var d=(0,yr.getEdgeTerminal)(n[h],"source"),v=(0,yr.getEdgeTerminal)(n[h],"target");p[h]=o[d]/(o[d]+o[v])}this.bias=p;var g=t.nodeSize,m=t.nodeSpacing,y,w;if((0,yr.isNumber)(m)?w=function(){return m}:(0,yr.isFunction)(m)?w=m:w=function(){return 0},this.nodeSpacing=w,!g)y=function(N){if(N.size){if((0,yr.isArray)(N.size)){var D=N.size[0]>N.size[1]?N.size[0]:N.size[1];return D/2}if((0,yr.isObject)(N.size)){var D=N.size.width>N.size.height?N.size.width:N.size.height;return D/2}return N.size/2}return 10};else if((0,yr.isFunction)(g))y=function(N){return g(N)};else if((0,yr.isArray)(g)){var b=g[0]>g[1]?g[0]:g[1],x=b/2;y=function(N){return x}}else{var S=g/2;y=function(N){return S}}this.nodeSize=y;var _=t.comboSpacing,M;(0,yr.isNumber)(_)?M=function(){return _}:(0,yr.isFunction)(_)?M=_:M=function(){return 0},this.comboSpacing=M;var A=t.comboPadding,E;(0,yr.isNumber)(A)?E=function(){return A}:(0,yr.isArray)(A)?E=function(){return Math.max.apply(null,A)}:(0,yr.isFunction)(A)?E=A:E=function(){return 0},this.comboPadding=E;var T=this.linkDistance,C;T||(T=10),(0,yr.isNumber)(T)?C=function(N){return T}:C=T,this.linkDistance=C;var k=this.edgeStrength,L;k||(k=1),(0,yr.isNumber)(k)?L=function(N){return k}:L=k,this.edgeStrength=L;var I=this.nodeStrength,O;I||(I=30),(0,yr.isNumber)(I)?O=function(N){return I}:O=I,this.nodeStrength=O},e.prototype.initPos=function(t){var n=this,i=n.nodes;i.forEach(function(a,o){var s=a.comboId,l=t[s];s&&l?(a.x=l.cx+100/(o+1),a.y=l.cy+100/(o+1)):(a.x=100/(o+1),a.y=100/(o+1))})},e.prototype.getComboMap=function(){var t=this,n=t.nodeMap,i=t.comboTrees,a=t.oriComboMap,o={};return(i||[]).forEach(function(s){var l=[];(0,yr.traverseTreeUp)(s,function(u){if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){var c={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};o[u.id]=c}var f=u.children;f&&f.forEach(function(v){if(!o[v.id]&&!n[v.id])return!0;l.push(v)});var h=o[u.id];if(h.cx=0,h.cy=0,l.length===0){h.empty=!0;var d=a[u.id];h.cx=d.x,h.cy=d.y}return l.forEach(function(v){if(h.count++,v.itemType!=="node"){var p=o[v.id];(0,yr.isNumber)(p.cx)&&(h.cx+=p.cx),(0,yr.isNumber)(p.cy)&&(h.cy+=p.cy);return}var g=n[v.id];g&&((0,yr.isNumber)(g.x)&&(h.cx+=g.x),(0,yr.isNumber)(g.y)&&(h.cy+=g.y))}),h.cx/=h.count||1,h.cy/=h.count||1,h.children=l,!0})}),o},e.prototype.applyComboCenterForce=function(t){var n=this,i=n.gravity,a=n.comboGravity||i,o=this.alpha,s=n.comboTrees,l=n.indexMap,u=n.nodeMap,c=n.comboMap;(s||[]).forEach(function(f){(0,yr.traverseTreeUp)(f,function(h){if(h.itemType==="node")return!0;var d=c[h.id];if(!d)return!0;var v=c[h.id],p=(v.depth+1)/10*.5,g=v.cx,m=v.cy;return v.cx=0,v.cy=0,v.children.forEach(function(y){if(y.itemType!=="node"){var w=c[y.id];w&&(0,yr.isNumber)(w.cx)&&(v.cx+=w.cx),w&&(0,yr.isNumber)(w.cy)&&(v.cy+=w.cy);return}var b=u[y.id],x=b.x-g||.005,S=b.y-m||.005,_=Math.sqrt(x*x+S*S),M=l[b.id],A=a*o/_*p;t[M].x-=x*A,t[M].y-=S*A,(0,yr.isNumber)(b.x)&&(v.cx+=b.x),(0,yr.isNumber)(b.y)&&(v.cy+=b.y)}),v.cx/=v.count||1,v.cy/=v.count||1,!0})})},e.prototype.applyCalculate=function(t){var n=this,i=n.comboMap,a=n.nodes,o={};a.forEach(function(l,u){a.forEach(function(c,f){if(!(u<f)){var h=l.x-c.x||.005,d=l.y-c.y||.005,v=h*h+d*d,p=Math.sqrt(v);v<1&&(v=p),o["".concat(l.id,"-").concat(c.id)]={vx:h,vy:d,vl2:v,vl:p},o["".concat(c.id,"-").concat(l.id)]={vl2:v,vl:p,vx:-h,vy:-d}}})}),n.updateComboSizes(i),n.calRepulsive(t,o),n.calAttractive(t,o);var s=n.preventComboOverlap;s&&n.comboNonOverlapping(t,i)},e.prototype.updateComboSizes=function(t){var n=this,i=n.comboTrees,a=n.nodeMap,o=n.nodeSize,s=n.comboSpacing,l=n.comboPadding;(i||[]).forEach(function(u){var c=[];(0,yr.traverseTreeUp)(u,function(f){if(f.itemType==="node")return!0;var h=t[f.id];if(!h)return!1;var d=f.children;d&&d.forEach(function(g){!t[g.id]&&!a[g.id]||c.push(g)}),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0,c.forEach(function(g){if(g.itemType!=="node")return!0;var m=a[g.id];if(!m)return!0;var y=o(m),w=m.x-y,b=m.y-y,x=m.x+y,S=m.y+y;h.minX>w&&(h.minX=w),h.minY>b&&(h.minY=b),h.maxX<x&&(h.maxX=x),h.maxY<S&&(h.maxY=S)});var v=n.oriComboMap[f.id].size||10;(0,yr.isArray)(v)&&(v=v[0]);var p=Math.max(h.maxX-h.minX,h.maxY-h.minY,v);return h.r=p/2+s(h)/2+l(h),!0})})},e.prototype.comboNonOverlapping=function(t,n){var i=this,a=i.comboTree,o=i.comboCollideStrength,s=i.indexMap,l=i.nodeMap;(0,yr.traverseTreeUp)(a,function(u){if(!n[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")return!1;var c=u.children;return c&&c.length>1&&c.forEach(function(f,h){if(f.itemType==="node")return!1;var d=n[f.id];d&&c.forEach(function(v,p){if(h<=p||v.itemType==="node")return!1;var g=n[v.id];if(!g)return!1;var m=d.cx-g.cx||.005,y=d.cy-g.cy||.005,w=m*m+y*y,b=d.r||1,x=g.r||1,S=b+x,_=x*x,M=b*b;if(w<S*S){var A=f.children;if(!A||A.length===0)return!1;var E=v.children;if(!E||E.length===0)return!1;var T=Math.sqrt(w),C=(S-T)/T*o,k=m*C,L=y*C,I=_/(M+_),O=1-I;A.forEach(function(N){if(N.itemType!=="node")return!1;if(l[N.id]){var D=s[N.id];E.forEach(function($){if($.itemType!=="node"||!l[$.id])return!1;var R=s[$.id];t[D].x+=k*I,t[D].y+=L*I,t[R].x-=k*O,t[R].y-=L*O})}})}})}),!0})},e.prototype.calRepulsive=function(t,n){var i=this,a=i.nodes,o=i.width*i.optimizeRangeFactor,s=i.nodeStrength,l=i.alpha,u=i.nodeCollideStrength,c=i.preventNodeOverlap,f=i.nodeSize,h=i.nodeSpacing,d=i.depthRepulsiveForceScale,v=i.center;a.forEach(function(p,g){if(!(!p.x||!p.y)){if(v){var m=i.gravity,y=p.x-v[0]||.005,w=p.y-v[1]||.005,b=Math.sqrt(y*y+w*w);t[g].x-=y*m*l/b,t[g].y-=w*m*l/b}a.forEach(function(x,S){if(g!==S&&!(!x.x||!x.y)){var _=n["".concat(p.id,"-").concat(x.id)],M=_.vl2,A=_.vl;if(!(A>o)){var E=n["".concat(p.id,"-").concat(x.id)],T=E.vx,C=E.vy,k=Math.log(Math.abs(x.depth-p.depth)/10)+1||1;k=k<1?1:k,x.comboId!==p.comboId&&(k+=1);var L=k?Math.pow(d,k):1,I=s(x)*l/M*L;if(t[g].x+=T*I,t[g].y+=C*I,g<S&&c){var O=f(p)+h(p)||1,N=f(x)+h(x)||1,D=O+N;if(M<D*D){var $=(D-A)/A*u,R=N*N,B=R/(O*O+R),j=T*$,G=C*$;t[g].x+=j*B,t[g].y+=G*B,B=1-B,t[S].x-=j*B,t[S].y-=G*B}}}}})}})},e.prototype.calAttractive=function(t,n){var i=this,a=i.edges,o=i.linkDistance,s=i.alpha,l=i.edgeStrength,u=i.bias,c=i.depthAttractiveForceScale;a.forEach(function(f,h){var d=(0,yr.getEdgeTerminal)(f,"source"),v=(0,yr.getEdgeTerminal)(f,"target");if(!(!d||!v||d===v)){var p=i.indexMap[d],g=i.indexMap[v],m=i.nodeMap[d],y=i.nodeMap[v];if(!(!m||!y)){var w=m.depth===y.depth?0:Math.log(Math.abs(m.depth-y.depth)/10);m.comboId===y.comboId&&(w=w/2);var b=w?Math.pow(c,w):1;if(m.comboId!==y.comboId&&b===1?b=c/2:m.comboId===y.comboId&&(b=2),!(!(0,yr.isNumber)(y.x)||!(0,yr.isNumber)(m.x)||!(0,yr.isNumber)(y.y)||!(0,yr.isNumber)(m.y))){var x=n["".concat(v,"-").concat(d)],S=x.vl,_=x.vx,M=x.vy,A=(S-o(f))/S*s*l(f)*b,E=_*A,T=M*A,C=u[h];t[g].x-=E*C,t[g].y-=T*C,t[p].x+=E*(1-C),t[p].y+=T*(1-C)}}}})},e.prototype.getType=function(){return"comboForce"},e}(jNe.Base);vp.ComboForceLayout=UNe;var ed={},H$;function AG(){if(H$)return ed;H$=1;var r=ze&&ze.__extends||function(){var s=function(l,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");s(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),e=ze&&ze.__assign||function(){return e=Object.assign||function(s){for(var l,u=1,c=arguments.length;u<c;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])}return s},e.apply(this,arguments)};Object.defineProperty(ed,"__esModule",{value:!0}),ed.ComboCombinedLayout=void 0;var t=Gs,n=_n,i=vn(),a=DG(),o=function(s){r(l,s);function l(u){var c=s.call(this)||this;return c.center=[0,0],c.nodes=[],c.edges=[],c.combos=[],c.comboEdges=[],c.comboPadding=10,c.comboTrees=[],c.updateCfg(u),c}return l.prototype.getDefaultCfg=function(){return{}},l.prototype.execute=function(){var u=this,c=u.nodes,f=u.center;if(!c||c.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}if(c.length===1){c[0].x=f[0],c[0].y=f[1],u.onLayoutEnd&&u.onLayoutEnd();return}u.initVals(),u.run(),u.onLayoutEnd&&u.onLayoutEnd()},l.prototype.run=function(){var u,c=this,f=c.nodes,h=c.edges,d=c.combos,v=c.comboEdges,p=c.center,g={};f.forEach(function(I){g[I.id]=I});var m={};d.forEach(function(I){m[I.id]=I});var y=c.getInnerGraphs(g),w=[],b=[],x={},S=!0;this.comboTrees.forEach(function(I){var O=y[I.id];if(O){var N=e(e({},I),{x:O.x||m[I.id].x,y:O.y||m[I.id].y,fx:O.fx||m[I.id].fx,fy:O.fy||m[I.id].fy,mass:O.mass||m[I.id].mass,size:O.size});b.push(N),!isNaN(N.x)&&N.x!==0&&!isNaN(N.y)&&N.y!==0?S=!1:(N.x=Math.random()*100,N.y=Math.random()*100),w.push(I.id),(0,i.traverseTreeUp)(I,function(D){return D.id!==I.id&&(x[D.id]=I.id),!0})}}),f.forEach(function(I){if(!(I.comboId&&m[I.comboId])){var O=e({},I);b.push(O),!isNaN(O.x)&&O.x!==0&&!isNaN(O.y)&&O.y!==0?S=!1:(O.x=Math.random()*100,O.y=Math.random()*100),w.push(I.id)}});var _=[];if(h.concat(v).forEach(function(I){var O=x[I.source]||I.source,N=x[I.target]||I.target;O!==N&&w.includes(O)&&w.includes(N)&&_.push({source:O,target:N})}),b!=null&&b.length){if(b.length===1)b[0].x=p[0],b[0].y=p[1];else{var M={nodes:b,edges:_},A=this.outerLayout||new a.GForceLayout({gravity:1,factor:4,linkDistance:function(I,O,N){var D,$,R=((((D=O.size)===null||D===void 0?void 0:D[0])||30)+((($=N.size)===null||$===void 0?void 0:$[0])||30))/2;return Math.min(R*1.5,700)}}),E=(u=A.getType)===null||u===void 0?void 0:u.call(A);if(A.updateCfg({center:p,kg:5,preventOverlap:!0,animate:!1}),S&&t.FORCE_LAYOUT_TYPE_MAP[E]){var T=b.length<100?new a.MDSLayout:new a.GridLayout;T.layout(M)}A.layout(M)}b.forEach(function(I){var O=y[I.id];if(!O){var N=g[I.id];N&&(N.x=I.x,N.y=I.y);return}O.visited=!0,O.x=I.x,O.y=I.y,O.nodes.forEach(function(D){D.x+=I.x,D.y+=I.y})})}for(var C=Object.keys(y),k=function(I){var O=C[I],N=y[O];if(!N)return"continue";N.nodes.forEach(function(D){N.visited||(D.x+=N.x||0,D.y+=N.y||0),g[D.id]&&(g[D.id].x=D.x,g[D.id].y=D.y)}),m[O]&&(m[O].x=N.x,m[O].y=N.y)},L=C.length-1;L>=0;L--)k(L);return{nodes:f,edges:h,combos:d,comboEdges:v}},l.prototype.getInnerGraphs=function(u){var c=this,f=c.comboTrees,h=c.nodeSize,d=c.edges,v=c.comboPadding,p=c.spacing,g={},m=this.innerLayout||new a.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=p,(f||[]).forEach(function(y){(0,i.traverseTreeUp)(y,function(w){var b,x=(v==null?void 0:v(w))||10;if((0,i.isArray)(x)&&(x=Math.max.apply(Math,x)),!((b=w.children)===null||b===void 0)&&b.length){var _=w.children.map(function($){if($.itemType==="combo")return g[$.id];var R=u[$.id]||{};return e(e({},R),$)}),M=_.map(function($){return $.id}),A={nodes:_,edges:d.filter(function($){return M.includes($.source)&&M.includes($.target)})},E=1/0;_.forEach(function($){var R;$.size||($.size=((R=g[$.id])===null||R===void 0?void 0:R.size)||(h==null?void 0:h($))||[30,30]),(0,i.isNumber)($.size)&&($.size=[$.size,$.size]),E>$.size[0]&&(E=$.size[0]),E>$.size[1]&&(E=$.size[1])}),m.layout(A);var T=(0,i.getLayoutBBox)(_),C=T.minX,k=T.minY,L=T.maxX,I=T.maxY,O={x:(L+C)/2,y:(I+k)/2};A.nodes.forEach(function($){$.x-=O.x,$.y-=O.y});var N=Math.max(L-C,E)+x*2,D=Math.max(I-k,E)+x*2;g[w.id]={id:w.id,nodes:_,size:[N,D]}}else if(w.itemType==="combo"){var S=x?[x*2,x*2]:[30,30];g[w.id]={id:w.id,nodes:[],size:S}}return!0})}),g},l.prototype.initVals=function(){var u=this,c=u.nodeSize,f=u.spacing,h,d;if((0,i.isNumber)(f)?d=function(){return f}:(0,i.isFunction)(f)?d=f:d=function(){return 0},this.spacing=d,!c)h=function(w){var b=d(w);if(w.size){if((0,i.isArray)(w.size)){var x=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(x+b)/2}if((0,i.isObject)(w.size)){var x=w.size.width>w.size.height?w.size.width:w.size.height;return(x+b)/2}return(w.size+b)/2}return 10+b/2};else if((0,i.isFunction)(c))h=function(w){var b=c(w),x=d(w);if((0,i.isArray)(w.size)){var S=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(S+x)/2}return((b||10)+x)/2};else if((0,i.isArray)(c)){var v=c[0]>c[1]?c[0]:c[1],p=v/2;h=function(w){return p+d(w)/2}}else{var g=c/2;h=function(w){return g+d(w)/2}}this.nodeSize=h;var m=u.comboPadding,y;(0,i.isNumber)(m)?y=function(){return m}:(0,i.isArray)(m)?y=function(){return Math.max.apply(null,m)}:(0,i.isFunction)(m)?y=m:y=function(){return 0},this.comboPadding=y},l.prototype.getType=function(){return"comboCombined"},l}(n.Base);return ed.ComboCombinedLayout=o,ed}var pp={},jM={};Object.defineProperty(jM,"__esModule",{value:!0});var WNe=function(){function r(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return r.prototype.distanceTo=function(e){var t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)},r.prototype.setPos=function(e,t){this.rx=e,this.ry=t},r.prototype.resetForce=function(){this.fx=0,this.fy=0},r.prototype.addForce=function(e){var t=e.rx-this.rx,n=e.ry-this.ry,i=Math.hypot(t,n);i=i<1e-4?1e-4:i;var a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*n/i},r.prototype.in=function(e){return e.contains(this.rx,this.ry)},r.prototype.add=function(e){var t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,o={rx:n,ry:i,mass:t,degree:a};return new r(o)},r}();jM.default=WNe;var UM={};Object.defineProperty(UM,"__esModule",{value:!0});var HNe=function(){function r(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return r.prototype.getLength=function(){return this.length},r.prototype.contains=function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n},r.prototype.NW=function(){var e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.NE=function(){var e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.SW=function(){var e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.SE=function(){var e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r}();UM.default=HNe;var WM={};Object.defineProperty(WM,"__esModule",{value:!0});var VNe=function(){function r(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}return r.prototype.insert=function(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new r(this.quad.NW()),this.NE=new r(this.quad.NE()),this.SW=new r(this.quad.SW()),this.SE=new r(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))},r.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},r.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},r.prototype.updateForce=function(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{var t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}},r}();WM.default=VNe;var YNe=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HM=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pp,"__esModule",{value:!0});pp.ForceAtlas2Layout=void 0;var XNe=_n,ws=vn(),KNe=HM(jM),qNe=HM(UM),ZNe=HM(WM),QNe=function(r){YNe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.onLayoutEnd,a=t.prune,o=t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);for(var s=[],l=n.length,u=0;u<l;u+=1){var c=n[u],f=10,h=10;(0,ws.isNumber)(c.size)&&(f=c.size,h=c.size),(0,ws.isArray)(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(h=c.size[1])):(0,ws.isObject)(c.size)&&(f=c.size.width,h=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(h=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(f=t.getHeight(c));var d=Math.max(f,h);s.push(d)}t.barnesHut===void 0&&l>250&&(t.barnesHut=!0),t.prune===void 0&&l>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(o=250,l<=200&&l>100?o=1e3:l>200&&(o=1200),this.maxIteration=o):this.maxIteration===0&&a&&(o=100,l<=200&&l>100?o=500:l>200&&(o=950),this.maxIteration=o),t.kr||(t.kr=50,l>100&&l<=500?t.kr=20:l>500&&(t.kr=1)),t.kg||(t.kg=20,l>100&&l<=500?t.kg=10:l>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(s),i()},e.prototype.updateNodesByForces=function(t){for(var n=this,i=n.edges,a=n.maxIteration,o=n.nodes,s=i.filter(function(_){var M=(0,ws.getEdgeTerminal)(_,"source"),A=(0,ws.getEdgeTerminal)(_,"target");return M!==A}),l=o.length,u=s.length,c=[],f={},h={},d=[],v=0;v<l;v+=1)f[o[v].id]=v,c[v]=0,(o[v].x===void 0||isNaN(o[v].x))&&(o[v].x=Math.random()*1e3),(o[v].y===void 0||isNaN(o[v].y))&&(o[v].y=Math.random()*1e3),d.push({x:o[v].x,y:o[v].y});for(var v=0;v<u;v+=1){for(var p=void 0,g=void 0,m=0,y=0,w=0;w<l;w+=1){var b=(0,ws.getEdgeTerminal)(s[v],"source"),x=(0,ws.getEdgeTerminal)(s[v],"target");o[w].id===b?(p=o[w],m=w):o[w].id===x&&(g=o[w],y=w),h[v]={sourceIdx:m,targetIdx:y}}p&&(c[f[p.id]]+=1),g&&(c[f[g.id]]+=1)}var S=a;if(o=this.iterate(S,f,h,u,c,t),n.prune){for(var w=0;w<u;w+=1)c[h[w].sourceIdx]<=1?(o[h[w].sourceIdx].x=o[h[w].targetIdx].x,o[h[w].sourceIdx].y=o[h[w].targetIdx].y):c[h[w].targetIdx]<=1&&(o[h[w].targetIdx].x=o[h[w].sourceIdx].x,o[h[w].targetIdx].y=o[h[w].sourceIdx].y);n.prune=!1,n.barnesHut=!1,S=100,o=this.iterate(S,f,h,u,c,t)}return o},e.prototype.iterate=function(t,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.kr,f=l.preventOverlap,h=l.barnesHut,d=u.length,v=0,p=100,g=t,m=50,y=[],w=[],b=[],x=0;x<d;x+=1)if(y[2*x]=0,y[2*x+1]=0,h){var S={id:x,rx:u[x].x,ry:u[x].y,mass:1,g:c,degree:o[x]};b[x]=new KNe.default(S)}for(;g>0;){for(var x=0;x<d;x+=1)w[2*x]=y[2*x],w[2*x+1]=y[2*x+1],y[2*x]=0,y[2*x+1]=0;y=this.getAttrForces(g,m,a,n,i,o,s,y),h&&(f&&g>m||!f)?y=this.getOptRepGraForces(y,b,o):y=this.getRepGraForces(g,m,y,p,s,o);var _=this.updatePos(y,w,v,o);u=_.nodes,v=_.sg,g--,l.tick&&l.tick()}return u},e.prototype.getAttrForces=function(t,n,i,a,o,s,l,u){for(var c=this,f=c.nodes,h=c.preventOverlap,d=c.dissuadeHubs,v=c.mode,p=c.prune,g=0;g<i;g+=1){var m=f[o[g].sourceIdx],y=o[g].sourceIdx,w=f[o[g].targetIdx],b=o[g].targetIdx;if(!(p&&(s[y]<=1||s[b]<=1))){var x=[w.x-m.x,w.y-m.y],S=Math.hypot(x[0],x[1]);S=S<1e-4?1e-4:S,x[0]=x[0]/S,x[1]=x[1]/S,h&&t<n&&(S=S-l[y]-l[b]);var _=S,M=_;v==="linlog"&&(_=Math.log(1+S),M=_),d&&(_=S/s[y],M=S/s[b]),h&&t<n&&S<=0?(_=0,M=0):h&&t<n&&S>0&&(_=S,M=S),u[2*a[m.id]]+=_*x[0],u[2*a[w.id]]-=M*x[0],u[2*a[m.id]+1]+=_*x[1],u[2*a[w.id]+1]-=M*x[1]}}return u},e.prototype.getRepGraForces=function(t,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.preventOverlap,f=l.kr,h=l.kg,d=l.center,v=l.prune,p=u.length,g=0;g<p;g+=1){for(var m=g+1;m<p;m+=1)if(!(v&&(s[g]<=1||s[m]<=1))){var y=[u[m].x-u[g].x,u[m].y-u[g].y],w=Math.hypot(y[0],y[1]);w=w<1e-4?1e-4:w,y[0]=y[0]/w,y[1]=y[1]/w,c&&t<n&&(w=w-o[g]-o[m]);var b=f*(s[g]+1)*(s[m]+1)/w;c&&t<n&&w<0?b=a*(s[g]+1)*(s[m]+1):c&&t<n&&w===0?b=0:c&&t<n&&w>0&&(b=f*(s[g]+1)*(s[m]+1)/w),i[2*g]-=b*y[0],i[2*m]+=b*y[0],i[2*g+1]-=b*y[1],i[2*m+1]+=b*y[1]}var x=[u[g].x-d[0],u[g].y-d[1]],S=Math.hypot(x[0],x[1]);x[0]=x[0]/S,x[1]=x[1]/S;var _=h*(s[g]+1);i[2*g]-=_*x[0],i[2*g+1]-=_*x[1]}return i},e.prototype.getOptRepGraForces=function(t,n,i){for(var a=this,o=a.nodes,s=a.kg,l=a.center,u=a.prune,c=o.length,f=9e10,h=-9e10,d=9e10,v=-9e10,p=0;p<c;p+=1)u&&i[p]<=1||(n[p].setPos(o[p].x,o[p].y),o[p].x>=h&&(h=o[p].x),o[p].x<=f&&(f=o[p].x),o[p].y>=v&&(v=o[p].y),o[p].y<=d&&(d=o[p].y));for(var g=Math.max(h-f,v-d),m={xmid:(h+f)/2,ymid:(v+d)/2,length:g,massCenter:l,mass:c},y=new qNe.default(m),w=new ZNe.default(y),p=0;p<c;p+=1)u&&i[p]<=1||n[p].in(y)&&w.insert(n[p]);for(var p=0;p<c;p+=1)if(!(u&&i[p]<=1)){n[p].resetForce(),w.updateForce(n[p]),t[2*p]-=n[p].fx,t[2*p+1]-=n[p].fy;var b=[o[p].x-l[0],o[p].y-l[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var S=s*(i[p]+1);t[2*p]-=S*b[0],t[2*p+1]-=S*b[1]}return t},e.prototype.updatePos=function(t,n,i,a){for(var o=this,s=o.nodes,l=o.ks,u=o.tao,c=o.prune,f=o.ksmax,h=s.length,d=[],v=[],p=0,g=0,m=0;m<h;m+=1)if(!(c&&a[m]<=1)){var y=[t[2*m]-n[2*m],t[2*m+1]-n[2*m+1]],w=Math.hypot(y[0],y[1]),b=[t[2*m]+n[2*m],t[2*m+1]+n[2*m+1]],x=Math.hypot(b[0],b[1]);d[m]=w,v[m]=x/2,p+=(a[m]+1)*d[m],g+=(a[m]+1)*v[m]}var S=i;i=u*g/p,S!==0&&(i=i>1.5*S?1.5*S:i);for(var m=0;m<h;m+=1)if(!(c&&a[m]<=1)&&!((0,ws.isNumber)(s[m].fx)&&(0,ws.isNumber)(s[m].fy))){var _=l*i/(1+i*Math.sqrt(d[m])),M=Math.hypot(t[2*m],t[2*m+1]);M=M<1e-4?1e-4:M;var A=f/M;_=_>A?A:_;var E=_*t[2*m],T=_*t[2*m+1];s[m].x+=E,s[m].y+=T}return{nodes:s,sg:i}},e}(XNe.Base);pp.ForceAtlas2Layout=QNe;var gp={},VM={},YM={},XM={},df=ze&&ze.__assign||function(){return df=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},df.apply(this,arguments)};Object.defineProperty(XM,"__esModule",{value:!0});var JNe=function(){function r(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return r.prototype.init=function(e,t,n){this.cells=[],this.CELL_W=n.CELL_W||r.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||r.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(t/this.CELL_H),r.MIN_DIST=Math.pow(e,2)+Math.pow(t,2);for(var i=0;i<this.columnNum;i++){for(var a=[],o=0;o<this.rowNum;o++){var s={dx:i,dy:o,x:i*this.CELL_W,y:o*this.CELL_H,occupied:!1};a.push(s)}this.cells.push(a)}},r.prototype.findGridByNodeId=function(e){for(var t,n,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)if(this.cells[i][a].node&&((n=(t=this.cells[i][a])===null||t===void 0?void 0:t.node)===null||n===void 0?void 0:n.id)===e)return{column:i,row:a};return null},r.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},r.prototype.occupyNearest=function(e){for(var t=r.MIN_DIST,n,i=null,a=0;a<this.columnNum;a++)for(var o=0;o<this.rowNum;o++)!this.cells[a][o].occupied&&(n=this.sqdist(e,this.cells[a][o]))<t&&(t=n,i=this.cells[a][o]);return i&&(i.occupied=!0),i},r.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[n+this.columnNum][i]={dx:n,dy:i,x:n*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(var n=this.columnNum-1;n>e;n--)for(var i=0;i<this.rowNum;i++)this.cells[n+t][i]=df(df({},this.cells[n][i]),{x:(n+t)*this.CELL_W,y:i*this.CELL_H}),this.cells[n][i]={x:n*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(var i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=e&&(this.additionColumn[i]+=t);for(var n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},r.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var i=0;i<this.columnNum;i++)this.cells[i][n+this.rowNum]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var i=0;i<this.columnNum;i++)for(var n=this.rowNum-1;n>e;n--)this.cells[i][n+t]=df(df({},this.cells[i][n]),{dx:i,dy:n+t,x:i*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[i][n]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(var i=0;i<t;i++)this.additionRow.push(e+i+1);this.rowNum+=t}},r.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var n=0;n<this.rowNum;n++)this.cells[t][n].node&&e.push(this.cells[t][n]);return e},r.MIN_DIST=50,r.DEFAULT_CELL_W=80,r.DEFAULT_CELL_H=80,r}();XM.default=JNe;var e$e=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(YM,"__esModule",{value:!0});var t$e=e$e(XM);function r$e(r,e){if(!r.nodes||r.nodes.length===0)return r;var t=e.width,n=e.height,i=e.nodeMinGap,a=1e4,o=1e4;r.nodes.forEach(function(y){var w=y.size[0]||50,b=y.size[1]||50;a=Math.min(w,a),o=Math.min(b,o)});var s=new t$e.default;s.init(t,n,{CELL_H:o,CELL_W:a}),r.nodes.forEach(function(y){var w=s.occupyNearest(y);w&&(w.node={id:y.id,size:y.size},y.x=w.x,y.y=w.y,y.dx=w.dx,y.dy=w.dy)});for(var l=0;l<r.nodes.length;l++){var u=r.nodes[l],c=s.findGridByNodeId(u.id);if(!c)throw new Error("can not find node cell");var f=c.column,h=c.row;if(u.size[0]+i>a){for(var d=Math.ceil((u.size[0]+i)/a)-1,v=d,p=0;p<d;p++){var g=s.additionColumn.indexOf(f+p+1)>-1;if(g&&!s.cells[f+p+1][h].node)v--;else break}s.insertColumn(f,v)}if(u.size[1]+i>o){for(var d=Math.ceil((u.size[1]+i)/o)-1,v=d,p=0;p<d;p++){var g=s.additionRow.indexOf(h+p+1)>-1;if(g&&!s.cells[f][h+p+1].node)v--;else break}s.insertRow(h,v)}}for(var l=0;l<s.columnNum;l++)for(var m=function(w){var b=s.cells[l][w];if(b.node){var x=r.nodes.find(function(S){var _;return S.id===((_=b==null?void 0:b.node)===null||_===void 0?void 0:_.id)});x&&(x.x=b.x+x.size[0]/2,x.y=b.y+x.size[1]/2)}},p=0;p<s.rowNum;p++)m(p)}YM.default=r$e;var KM={};Object.defineProperty(KM,"__esModule",{value:!0});var TG=1200,kG=800,Jg=1e7,td=10,LG=3.141592653589793,ex=1.5707963267948966,n$e=LG*.375,i$e=LG*.625,B0=new Map,a$e=10,o$e=10,tx=.8,V$=.1,s$e=.5;function l$e(r,e,t){var n=r.x-r.size[0]/2,i=r.y-r.size[1]/2,a=r.x+r.size[0]/2,o=r.y+r.size[1]/2,s=e.x-e.size[0]/2,l=e.y-e.size[1]/2,u=e.x+e.size[0]/2,c=e.y+e.size[1]/2,f=r.x,h=r.y,d=e.x,v=e.y,p=d-f,g=Math.atan2(p,v-h),m=0,y=0,w=0,b=0;g>ex?(y=i-c,m=s-a,w=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)),b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):0<g&&g<=ex?(y=l-o,m=s-a,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):g<-ex?(y=i-c,m=-(u-n),y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):(y=l-o,Math.abs(p)>(a-n)/2?m=n-u:m=p,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m&&g!==0?(m/Math.sin(g)).toFixed(2):y.toFixed(2)));var x=parseFloat(g.toFixed(2)),S=t;return t&&(S=n$e<x&&x<i$e),{distance:Math.abs(w<b?w:b),isHoriz:S}}function IG(r,e){var t=B0.get(r.id)||[],n=t.find(function(O){return O.source===e.id||O.target===e.id}),i=r.size[0]*r.size[1],a=e.size[0]*e.size[1],o=i>a?e:r,s=i>a?r:e,l=o.x-o.size[0]/2,u=o.y-o.size[1]/2,c=o.x+o.size[0]/2,f=o.y+o.size[1]/2,h=s.x-s.size[0]/2,d=s.y-s.size[1]/2,v=s.x+s.size[0]/2,p=s.y+s.size[1]/2,g=o.x,m=o.y,y=s.x,w=s.y,b=c>=h&&v>=l&&f>=d&&p>=u,x=0,S=0;if(b){S=Math.sqrt(Math.pow(y-g,2)+Math.pow(w-m,2));var _=l>h?l:h,M=u>d?u:d,A=c<v?c:v,E=f<p?f:p,T=A-_,C=E-M,k=T*C;S===0&&(S=1e-7),x=td*1/S*100+k,x*=Jg}else{var L=!1,I=l$e(o,s,L);S=I.distance,L=I.isHoriz,S<=td?S!==0?n?x+=td+Jg*1/S:x+=td+Jg*td/S:x+=Jg:(x+=S,n&&(x+=S*S))}return x}function OG(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];(n.x<0||n.y<0||n.x>TG||n.y>kG)&&(e+=1e12);for(var i=t+1;i<r.length;i++)e+=IG(n,r[i])}return e}function u$e(r,e,t,n){var i=new Map;t.forEach(function(g,m){i.set(g.id,g)});var a=n.filter(function(g){return g.source===r.id||g.target===r.id})||[],o=[];a.forEach(function(g){var m=g.source===r.id?g.target:g.source,y=i.get(m);y&&o.push(y)});for(var s=!0,l=0;l<o.length;l++){var u=o[l],c=Math.atan((r.y-u.y)/(u.x-r.y))*180,f=Math.atan((e.y-u.y)/(u.x-e.y))*180,h=c<30||c>150,d=f<30||f>150,v=c>70&&c<110,p=f>70&&f<110;if(h&&!d||c*f<0){s=!1;break}else if(v&&!p||c*f<0){s=!1;break}else if((u.x-r.x)*(u.x-e.x)<0){s=!1;break}else if((u.y-r.y)*(u.y-e.y)<0){s=!1;break}}return s}function c$e(r,e){for(var t=!1,n=1,i=a$e*n,a=o$e*n,o=[i,-i,0,0],s=[0,0,a,-a],l=0;l<r.length;++l)for(var u=r[l],c=Y$(u,r),f=0;f<o.length;f++){var h=u$e(u,{x:u.x+o[f],y:u.y+s[f]},r,e);if(h){u.x+=o[f],u.y+=s[f];var d=Y$(u,r),v=Math.random();d<c||v<tx&&v>V$?(c=d,t=!0):(u.x-=o[f],u.y-=s[f])}}return tx>V$&&(tx*=s$e),t?OG(r):0}function Y$(r,e){var t=0;(r.x<0||r.y<0||r.x+r.size[0]+20>TG||r.y+r.size[1]+20>kG)&&(t+=1e12);for(var n=0;n<e.length;++n)r.id!==e[n].id&&(t+=IG(r,e[n]));return t}function f$e(r,e){if(r.length===0)return{nodes:r,edges:e};r.forEach(function(u){var c=e.filter(function(f){return f.source===u.id||f.target===u.id});B0.set(u,c)}),r.sort(function(u,c){var f,h;return((f=B0.get(u.id))===null||f===void 0?void 0:f.length)-((h=B0.get(c.id))===null||h===void 0?void 0:h.length)});for(var t=OG(r),n=20,i=1,a=0,o=50,s=0;n>0&&(s++,!(s>=o));){var l=c$e(r,e);l!==0&&(a=l),i=a-t,t=a,i===0?--n:n=20}return r.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:r,edges:e}}KM.default=f$e;var a_=ze&&ze.__assign||function(){return a_=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},a_.apply(this,arguments)},h$e=ze&&ze.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),d$e=ze&&ze.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),v$e=ze&&ze.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&h$e(e,r,t);return d$e(e,r),e},NG=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(VM,"__esModule",{value:!0});var ef=v$e(j2),p$e=NG(YM),g$e=NG(KM),m$e=fh;function y$e(r,e){var t=r.nodes,n=r.edges,i=e.width,a=e.height;if(!(t!=null&&t.length))return Promise.resolve();var o=[];t.forEach(function(v){var p=n.filter(function(m){return m.source===v.id||m.target===v.id});if(p.length>1){var g=a_({},v);delete g.size,o.push(g)}});var s=[];n.forEach(function(v){var p=o.find(function(m){return m.id===v.source}),g=o.find(function(m){return m.id===v.target});p&&g&&s.push(v)});var l=new m$e.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),u=l.layout({nodes:o,edges:s}).nodes;t.forEach(function(v){var p=(u||[]).find(function(g){return g.id===v.id});v.x=(p==null?void 0:p.x)||i/2,v.y=(p==null?void 0:p.y)||a/2});var c=JSON.parse(JSON.stringify(t)),f=JSON.parse(JSON.stringify(n)),h=ef.forceSimulation().nodes(c).force("link",ef.forceLink(f).id(function(v){return v.id}).distance(function(v){var p=s.find(function(g){return g.source===v.source&&g.target===v.target});return p?30:20})).force("charge",ef.forceManyBody()).force("center",ef.forceCenter(i/2,a/2)).force("x",ef.forceX(i/2)).force("y",ef.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),d=new Promise(function(v){h.on("end",function(){t.forEach(function(x){var S=c.find(function(_){return _.id===x.id});S&&(x.x=S.x,x.y=S.y)});var p=Math.min.apply(Math,t.map(function(x){return x.x})),g=Math.max.apply(Math,t.map(function(x){return x.x})),m=Math.min.apply(Math,t.map(function(x){return x.y})),y=Math.max.apply(Math,t.map(function(x){return x.y})),w=i/(g-p),b=a/(y-m);t.forEach(function(x){x.x!==void 0&&w<1&&(x.x=(x.x-p)*w),x.y!==void 0&&b<1&&(x.y=(x.y-m)*b)}),t.forEach(function(x){x.sizeTemp=x.size,x.size=[10,10]}),(0,g$e.default)(t,n),t.forEach(function(x){x.size=x.sizeTemp||[],delete x.sizeTemp}),(0,p$e.default)({nodes:t,edges:n},e),v()})});return d}VM.default=y$e;var b$e=ze&&ze.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),w$e=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gp,"__esModule",{value:!0});gp.ERLayout=void 0;var x$e=_n,S$e=w$e(VM),_$e=function(r){b$e(e,r);function e(t){var n=r.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges;return n==null||n.forEach(function(a){a.size||(a.size=[50,50])}),(0,S$e.default)({nodes:n,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(x$e.Base);gp.ERLayout=_$e;var Lu={},X$;function E$e(){if(X$)return Lu;X$=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.Layouts=Lu.Layout=void 0;var r=Ps,e=Zv,t=Qv,n=ep,i=Jv,a=G2,o=tp,s=fh,l=RM,u=up,c=cp,f=fp,h=hp,d=dp,v=vp,p=AG(),g=pp,m=gp,y=ip,w=vn(),b=function(){function x(S){var _=(0,r.getLayoutByName)(S.type);this.layoutInstance=new _(S)}return x.prototype.layout=function(S){return this.layoutInstance.layout(S)},x.prototype.updateCfg=function(S){this.layoutInstance.updateCfg(S)},x.prototype.init=function(S){this.correctLayers(S.nodes),this.layoutInstance.init(S)},x.prototype.correctLayers=function(S){if(S!=null&&S.length){var _=1/0,M=[];if(S.forEach(function(E){(0,w.isString)(E.layer)&&(E.layer=parseInt(E.layer,10)),!(E.layer===void 0||isNaN(E.layer))&&(M.push(E),E.layer<_&&(_=E.layer))}),_<=0){var A=Math.abs(_)+1;M.forEach(function(E){return E.layer+=A})}}},x.prototype.execute=function(){this.layoutInstance.execute()},x.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},x.prototype.destroy=function(){return this.layoutInstance.destroy()},x}();return Lu.Layout=b,Lu.Layouts={force:a.ForceLayout,fruchterman:f.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:i.GForceLayout,force2:n.Force2Layout,dagre:s.DagreLayout,dagreCompound:y.DagreCompoundLayout,circular:o.CircularLayout,radial:l.RadialLayout,concentric:u.ConcentricLayout,grid:e.GridLayout,mds:c.MDSLayout,comboForce:v.ComboForceLayout,comboCombined:p.ComboCombinedLayout,random:t.RandomLayout,"gForce-gpu":d.GForceGPULayout,"fruchterman-gpu":h.FruchtermanGPULayout,er:m.ERLayout},Lu}var $G={};Object.defineProperty($G,"__esModule",{value:!0});var K$;function DG(){return K$||(K$=1,function(r){var e=ze&&ze.__createBinding||(Object.create?function(S,_,M,A){A===void 0&&(A=M);var E=Object.getOwnPropertyDescriptor(_,M);(!E||("get"in E?!_.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return _[M]}}),Object.defineProperty(S,A,E)}:function(S,_,M,A){A===void 0&&(A=M),S[A]=_[M]}),t=ze&&ze.__exportStar||function(S,_){for(var M in S)M!=="default"&&!Object.prototype.hasOwnProperty.call(_,M)&&e(_,S,M)};Object.defineProperty(r,"__esModule",{value:!0}),r.ERLayout=r.ForceAtlas2Layout=r.ComboCombinedLayout=r.ComboForceLayout=r.GForceGPULayout=r.FruchtermanGPULayout=r.FruchtermanLayout=r.MDSLayout=r.ConcentricLayout=r.RadialLayout=r.DagreCompoundLayout=r.DagreLayout=r.CircularLayout=r.ForceLayout=r.Force2Layout=r.GForceLayout=r.RandomLayout=r.GridLayout=r.Layouts=r.Layout=void 0;var n=Zv;Object.defineProperty(r,"GridLayout",{enumerable:!0,get:function(){return n.GridLayout}});var i=Qv;Object.defineProperty(r,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var a=Jv;Object.defineProperty(r,"GForceLayout",{enumerable:!0,get:function(){return a.GForceLayout}});var o=ep;Object.defineProperty(r,"Force2Layout",{enumerable:!0,get:function(){return o.Force2Layout}});var s=G2;Object.defineProperty(r,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var l=tp;Object.defineProperty(r,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var u=fh;Object.defineProperty(r,"DagreLayout",{enumerable:!0,get:function(){return u.DagreLayout}});var c=ip;Object.defineProperty(r,"DagreCompoundLayout",{enumerable:!0,get:function(){return c.DagreCompoundLayout}});var f=RM;Object.defineProperty(r,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}});var h=up;Object.defineProperty(r,"ConcentricLayout",{enumerable:!0,get:function(){return h.ConcentricLayout}});var d=cp;Object.defineProperty(r,"MDSLayout",{enumerable:!0,get:function(){return d.MDSLayout}});var v=fp;Object.defineProperty(r,"FruchtermanLayout",{enumerable:!0,get:function(){return v.FruchtermanLayout}});var p=hp;Object.defineProperty(r,"FruchtermanGPULayout",{enumerable:!0,get:function(){return p.FruchtermanGPULayout}});var g=dp;Object.defineProperty(r,"GForceGPULayout",{enumerable:!0,get:function(){return g.GForceGPULayout}});var m=vp;Object.defineProperty(r,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var y=AG();Object.defineProperty(r,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var w=pp;Object.defineProperty(r,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}});var b=gp;Object.defineProperty(r,"ERLayout",{enumerable:!0,get:function(){return b.ERLayout}});var x=E$e();Object.defineProperty(r,"Layout",{enumerable:!0,get:function(){return x.Layout}}),Object.defineProperty(r,"Layouts",{enumerable:!0,get:function(){return x.Layouts}}),t($G,r)}(Ew)),Ew}(function(r){var e=ze&&ze.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,l)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),t=ze&&ze.__exportStar||function(i,a){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.getLayoutByName=r.unRegisterLayout=r.registerLayout=void 0;var n=Ps;Object.defineProperty(r,"registerLayout",{enumerable:!0,get:function(){return n.registerLayout}}),Object.defineProperty(r,"unRegisterLayout",{enumerable:!0,get:function(){return n.unRegisterLayout}}),Object.defineProperty(r,"getLayoutByName",{enumerable:!0,get:function(){return n.getLayoutByName}}),t(DG(),r)})(wr);function M$e(r,e,t,n){return n===void 0&&(n="height"),t==="center"?(r[n]+e[n])/2:r.height}var iu={assign:Object.assign,getHeight:M$e},RG=iu,qM=18,C$e=qM*2,q$=qM,A$e={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||q$},getVGap:function(e){return e.vgap||q$},getChildren:function(e){return e.children},getHeight:function(e){return e.height||C$e},getWidth:function(e){var t=e.label||" ";return e.width||t.split("").length*qM}};function qm(r,e){var t=this;if(t.vgap=t.hgap=0,r instanceof qm)return r;t.data=r;var n=e.getHGap(r),i=e.getVGap(r);return t.preH=e.getPreH(r),t.preV=e.getPreV(r),t.width=e.getWidth(r),t.height=e.getHeight(r),t.width+=t.preH,t.height+=t.preV,t.id=e.getId(r),t.x=t.y=0,t.depth=0,t.children||(t.children=[]),t.addGap(n,i),t}RG.assign(qm.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(e,t){var n=this;n.hgap+=e,n.vgap+=t,n.width+=2*e,n.height+=2*t},eachNode:function(e){for(var t=this,n=[t],i;i=n.shift();)e(i),n=i.children.concat(n)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t=this,n=[t],i;i=n.shift();)e(i),n=n.concat(i.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e},translate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.eachNode(function(n){n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(n){n.x=n.x-(n.x-t.left)*2-n.width}),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(n){n.y=n.y-(n.y-t.top)*2-n.height}),e.translate(0,t.height)}});function T$e(r,e,t){e===void 0&&(e={}),e=RG.assign({},A$e,e);var n=new qm(r,e),i=[n],a;if(!t&&!r.collapsed){for(;a=i.shift();)if(!a.data.collapsed){var o=e.getChildren(a.data),s=o?o.length:0;if(a.children=new Array(s),o&&s)for(var l=0;l<s;l++){var u=new qm(o[l],e);a.children[l]=u,i.push(u),u.parent=a,u.depth=a.depth+1}}}return n}var PG=T$e,k$e=PG,L$e=function(){function r(t,n){n===void 0&&(n={});var i=this;i.options=n,i.rootNode=k$e(t,n)}var e=r.prototype;return e.execute=function(){throw new Error("please override this method")},r}(),M1=L$e;function yd(r,e,t,n){n===void 0&&(n=[]);var i=this;i.w=r||0,i.h=e||0,i.y=t||0,i.x=0,i.c=n||[],i.cs=n.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}yd.fromNode=function(r,e){if(!r)return null;var t=[];return r.children.forEach(function(n){t.push(yd.fromNode(n,e))}),e?new yd(r.height,r.width,r.x,t):new yd(r.width,r.height,r.y,t)};function FG(r,e,t){t?r.y+=e:r.x+=e,r.children.forEach(function(n){FG(n,e,t)})}function BG(r,e){var t=e?r.y:r.x;return r.children.forEach(function(n){t=Math.min(BG(n,e),t)}),t}function I$e(r,e){var t=BG(r,e);FG(r,-t,e)}function zG(r,e,t){t?e.y=r.x:e.x=r.x,r.c.forEach(function(n,i){zG(n,e.children[i],t)})}function GG(r,e,t){t===void 0&&(t=0),e?(r.x=t,t+=r.width):(r.y=t,t+=r.height),r.children.forEach(function(n){GG(n,e,t)})}var O$e=function(r,e){e===void 0&&(e={});var t=e.isHorizontal;function n(y){if(y.cs===0){i(y);return}n(y.c[0]);for(var w=g(u(y.c[0].el),0,null),b=1;b<y.cs;++b){n(y.c[b]);var x=u(y.c[b].er);a(y,b,w),w=g(x,b,w)}h(y),i(y)}function i(y){y.cs===0?(y.el=y,y.er=y,y.msel=y.mser=0):(y.el=y.c[0].el,y.msel=y.c[0].msel,y.er=y.c[y.cs-1].er,y.mser=y.c[y.cs-1].mser)}function a(y,w,b){for(var x=y.c[w-1],S=x.mod,_=y.c[w],M=_.mod;x!==null&&_!==null;){u(x)>b.low&&(b=b.nxt);var A=S+x.prelim+x.w-(M+_.prelim);A>0&&(M+=A,o(y,w,b.index,A));var E=u(x),T=u(_);E<=T&&(x=l(x),x!==null&&(S+=x.mod)),E>=T&&(_=s(_),_!==null&&(M+=_.mod))}!x&&_?c(y,w,_,M):x&&!_&&f(y,w,x,S)}function o(y,w,b,x){y.c[w].mod+=x,y.c[w].msel+=x,y.c[w].mser+=x,v(y,w,b,x)}function s(y){return y.cs===0?y.tl:y.c[0]}function l(y){return y.cs===0?y.tr:y.c[y.cs-1]}function u(y){return y.y+y.h}function c(y,w,b,x){var S=y.c[0].el;S.tl=b;var _=x-b.mod-y.c[0].msel;S.mod+=_,S.prelim-=_,y.c[0].el=y.c[w].el,y.c[0].msel=y.c[w].msel}function f(y,w,b,x){var S=y.c[w].er;S.tr=b;var _=x-b.mod-y.c[w].mser;S.mod+=_,S.prelim-=_,y.c[w].er=y.c[w-1].er,y.c[w].mser=y.c[w-1].mser}function h(y){y.prelim=(y.c[0].prelim+y.c[0].mod+y.c[y.cs-1].mod+y.c[y.cs-1].prelim+y.c[y.cs-1].w)/2-y.w/2}function d(y,w){w+=y.mod,y.x=y.prelim+w,p(y);for(var b=0;b<y.cs;b++)d(y.c[b],w)}function v(y,w,b,x){if(b!==w-1){var S=w-b;y.c[b+1].shift+=x/S,y.c[w].shift-=x/S,y.c[w].change-=x-x/S}}function p(y){for(var w=0,b=0,x=0;x<y.cs;x++)w+=y.c[x].shift,b+=w+y.c[x].change,y.c[x].mod+=b}function g(y,w,b){for(;b!==null&&y>=b.low;)b=b.nxt;return{low:y,index:w,nxt:b}}GG(r,t);var m=yd.fromNode(r,t);return n(m),d(m,0),zG(m,r,t),I$e(r,t),r},Z$=PG,jG=function(r,e){for(var t=Z$(r.data,e,!0),n=Z$(r.data,e,!0),i=r.children.length,a=Math.round(i/2),o=e.getSide||function(c,f){return f<a?"right":"left"},s=0;s<i;s++){var l=r.children[s],u=o(l,s);u==="right"?n.children.push(l):t.children.push(l)}return t.eachNode(function(c){c.isRoot()||(c.side="left")}),n.eachNode(function(c){c.isRoot()||(c.side="right")}),{left:t,right:n}},N$e=jG,yl=["LR","RL","TB","BT","H","V"],$$e=["LR","RL","H"],D$e=function(e){return $$e.indexOf(e)>-1},R$e=yl[0],ZM=function(r,e,t){var n=e.direction||R$e;if(e.isHorizontal=D$e(n),n&&yl.indexOf(n)===-1)throw new TypeError("Invalid direction: "+n);if(n===yl[0])t(r,e);else if(n===yl[1])t(r,e),r.right2left();else if(n===yl[2])t(r,e);else if(n===yl[3])t(r,e),r.bottom2top();else if(n===yl[4]||n===yl[5]){var i=N$e(r,e),a=i.left,o=i.right;t(a,e),t(o,e),e.isHorizontal?a.right2left():a.bottom2top(),o.translate(a.x-o.x,a.y-o.y),r.x=a.x,r.y=o.y;var s=r.getBoundingBox();e.isHorizontal?s.top<0&&r.translate(0,-s.top):s.left<0&&r.translate(-s.left,0)}var l=e.fixedRoot;return l===void 0&&(l=!0),l&&r.translate(-(r.x+r.width/2+r.hgap),-(r.y+r.height/2+r.vgap)),r};function P$e(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,o_(r,e)}function o_(r,e){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},o_(r,e)}var F$e=M1,B$e=O$e,z$e=ZM,G$e=iu,j$e=function(r){function e(){return r.apply(this,arguments)||this}P$e(e,r);var t=e.prototype;return t.execute=function(){var i=this;return z$e(i.rootNode,i.options,B$e)},e}(F$e),U$e={};function W$e(r,e){return e=G$e.assign({},U$e,e),new j$e(r,e).execute()}var H$e=W$e,V$e=iu;function Y$e(r,e){e===void 0&&(e=[]);var t=this;t.x=t.y=0,t.leftChild=t.rightChild=null,t.height=0,t.children=e}var X$e={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function UG(r,e,t){t?(e.x=r.x,e.y=r.y):(e.x=r.y,e.y=r.x),r.children.forEach(function(n,i){UG(n,e.children[i],t)})}var K$e=function(r,e){e===void 0&&(e={}),e=V$e.assign({},X$e,e);var t=0;function n(l){if(!l)return null;l.width=0,l.depth&&l.depth>t&&(t=l.depth);var u=l.children,c=u.length,f=new Y$e(l.height,[]);return u.forEach(function(h,d){var v=n(h);f.children.push(v),d===0&&(f.leftChild=v),d===c-1&&(f.rightChild=v)}),f.originNode=l,f.isLeaf=l.isLeaf(),f}function i(l){if(l.isLeaf||l.children.length===0)l.drawingDepth=t;else{var u=l.children.map(function(f){return i(f)}),c=Math.min.apply(null,u);l.drawingDepth=c-1}return l.drawingDepth}var a;function o(l){l.x=l.drawingDepth*e.rankSep,l.isLeaf?(l.y=0,a&&(l.y=a.y+a.height+e.nodeSep,l.originNode.parent!==a.originNode.parent&&(l.y+=e.subTreeSep)),a=l):(l.children.forEach(function(u){o(u)}),l.y=(l.leftChild.y+l.rightChild.y)/2)}var s=n(r);return i(s),o(s),UG(s,r,e.isHorizontal),r};function q$e(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,s_(r,e)}function s_(r,e){return s_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},s_(r,e)}var Z$e=M1,Q$e=K$e,J$e=ZM,eDe=iu,tDe=function(r){function e(){return r.apply(this,arguments)||this}q$e(e,r);var t=e.prototype;return t.execute=function(){var i=this;return i.rootNode.width=0,J$e(i.rootNode,i.options,Q$e)},e}(Z$e),rDe={};function nDe(r,e){return e=eDe.assign({},rDe,e),new tDe(r,e).execute()}var iDe=nDe,Q$=iu;function aDe(r,e,t,n,i){var a=typeof t=="function"?t(r):t*r.depth;if(!n)try{if(r.id===r.parent.children[0].id){r.x+=a,r.y=e?e.y:0;return}}catch{}if(r.x+=a,e){if(r.y=e.y+Q$.getHeight(e,r,i),e.parent&&r.parent.id!==e.parent.id){var o=e.parent,s=o.y+Q$.getHeight(o,r,i);r.y=s>r.y?s:r.y}}else r.y=0}var oDe=function(r,e,t,n){var i=null;r.eachNode(function(a){aDe(a,i,e,t,n),i=a})};function sDe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,l_(r,e)}function l_(r,e){return l_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},l_(r,e)}var lDe=M1,e0=oDe,uDe=jG,cDe=iu,bd=["LR","RL","H"],fDe=bd[0],hDe=function(r){function e(){return r.apply(this,arguments)||this}sDe(e,r);var t=e.prototype;return t.execute=function(){var i=this,a=i.options,o=i.rootNode;a.isHorizontal=!0;var s=a.indent,l=s===void 0?20:s,u=a.dropCap,c=u===void 0?!0:u,f=a.direction,h=f===void 0?fDe:f,d=a.align;if(h&&bd.indexOf(h)===-1)throw new TypeError("Invalid direction: "+h);if(h===bd[0])e0(o,l,c,d);else if(h===bd[1])e0(o,l,c,d),o.right2left();else if(h===bd[2]){var v=uDe(o,a),p=v.left,g=v.right;e0(p,l,c,d),p.right2left(),e0(g,l,c,d);var m=p.getBoundingBox();g.translate(m.width,0),o.x=g.x-o.width/2}return o},e}(lDe),dDe={};function vDe(r,e){return e=cDe.assign({},dDe,e),new hDe(r,e).execute()}var pDe=vDe,gDe=iu;function WG(r,e){var t=0;return r.children.length?r.children.forEach(function(n){t+=WG(n,e)}):t=r.height,r._subTreeSep=e.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,t)+2*r._subTreeSep,r.totalHeight}function HG(r){var e=r.children,t=e.length;if(t){e.forEach(function(l){HG(l)});var n=e[0],i=e[t-1],a=i.y-n.y+i.height,o=0;if(e.forEach(function(l){o+=l.totalHeight}),a>r.height)r.y=n.y+a/2-r.height/2;else if(e.length!==1||r.height>o){var s=r.y+(r.height-a)/2-n.y;e.forEach(function(l){l.translate(0,s)})}else r.y=(n.y+n.height/2+i.y+i.height/2)/2-r.height/2}}var mDe={getSubTreeSep:function(){return 0}},yDe=function(r,e){e===void 0&&(e={}),e=gDe.assign({},mDe,e),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),r.parent=null,WG(r,e),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(function(t){var n=t.children,i=n.length;if(i){var a=n[0];if(a.startY=t.startY+t._subTreeSep,i===1)a.y=t.y+t.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(var o=1;o<i;o++){var s=n[o];s.startY=n[o-1].startY+n[o-1].totalHeight,s.y=s.startY+s.totalHeight/2-s.height/2}}}}),HG(r)};function bDe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,u_(r,e)}function u_(r,e){return u_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},u_(r,e)}var wDe=M1,xDe=yDe,SDe=ZM,_De=iu,EDe=function(r){function e(){return r.apply(this,arguments)||this}bDe(e,r);var t=e.prototype;return t.execute=function(){var i=this;return SDe(i.rootNode,i.options,xDe)},e}(wDe),MDe={};function CDe(r,e){return e=_De.assign({},MDe,e),new EDe(r,e).execute()}var ADe=CDe,TDe={compactBox:H$e,dendrogram:iDe,indented:pDe,mindmap:ADe},kDe=TDe;const Zm=co(kDe);var J$=hi.traverseTree,LDe=function(e,t){var n;return e?Rt(e)?n=function(a){return e}:n=e:n=function(a){return t||1},n},IDe=function(e,t){var n=[],i=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<t.length;o++){var l=t[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<e.length;o++){var c=n.length,f=i[o],h=f.length;n[o*4+2]=c,n[o*4+3]=f.length,u=Math.max(u,f.length);for(var d=0;d<h;++d){var v=f[d];n.push(+v)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},ODe=function(e,t,n){var i=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var l=e[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<t.length;s++){var u=t[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var c=0;for(s=0;s<e.length;s++){var f=i.length,h=a[s],d=h.length;i[s*4+2]=f,i[s*4+3]=d/2,c=Math.max(c,d/2);for(var v=0;v<d;++v){var p=h[v];i.push(+p)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},NDe=function(e,t,n,i){var a=[],o=[],s={},l=0;for(l=0;l<e.length;l++){var u=e[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<t.length;l++){var c=t[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<e.length;l++){var h=a.length,d=o[l],v=d.length;a[l*4+2]=h+1048576*v/4,a[l*4+3]=0,f=Math.max(f,v/4);for(var p=0;p<v;++p){var g=d[p];a.push(+g)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},$De=function(e,t){var n=[],i=e.length,a={};return t.forEach(function(o){e.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},DDe=function(e){for(var t=[],n=e.length,i=e[0].length,a=function(l){e.forEach(function(u,c){if(t.push(u[l]),c===n-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(t)},RDe=function(e,t){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&n.indexOf(t)>=0&&(s="x",o="y");var l=0;J$(e,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||J$(e,function(f){var h=(f[s]-i[s])/c*(Math.PI*2-u)+u,d=Math.abs(o==="x"?f.x-e.x:f.y-e.y);return f.x=d*Math.cos(h),f.y=d*Math.sin(h),!0}),e};const PDe=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:DDe,attributesToTextureData:$De,buildTextureData:IDe,buildTextureDataWithOneEdgeAttr:ODe,buildTextureDataWithTwoEdgeAttr:NDe,proccessToFunc:LDe,radialLayout:RDe},Symbol.toStringTag,{value:"Module"}));var VG=function r(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var n=t.parent!==void 0?t.parent:document.body,i=t.id!==void 0?t.id:"oldie",a=r().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}};const FDe=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:VG},Symbol.toStringTag,{value:"Module"}));var YG=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const BDe=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:YG},Symbol.toStringTag,{value:"Module"}));var Zs=V(V(V(V(V({},hi),yye),PDe),FDe),BDe),zDe=Zs.radialLayout,GDe=function(){function r(e){this.type=e.type,this.radial=e.radial,this.config=e}return r.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(n){var i=Zm[t.type](n,t.config);return zDe(i),i};return}this.layoutMethod=function(n){return Zm[t.type](n,t.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(e){return this.init(e),this.execute()},r}();wr.registerLayout("grid",wr.GridLayout);wr.registerLayout("random",wr.RandomLayout);wr.registerLayout("force",wr.ForceLayout);wr.registerLayout("circular",wr.CircularLayout);wr.registerLayout("dagre",wr.DagreLayout);wr.registerLayout("dagreCompound",wr.DagreCompoundLayout);wr.registerLayout("radial",wr.RadialLayout);wr.registerLayout("concentric",wr.ConcentricLayout);wr.registerLayout("mds",wr.MDSLayout);wr.registerLayout("fruchterman",wr.FruchtermanLayout);wr.registerLayout("fruchterman-gpu",wr.FruchtermanGPULayout);wr.registerLayout("gForce",wr.GForceLayout);wr.registerLayout("force2",wr.Force2Layout);wr.registerLayout("gForce-gpu",wr.GForceGPULayout);wr.registerLayout("comboForce",wr.ComboForceLayout);wr.registerLayout("comboCombined",wr.ComboCombinedLayout);wr.registerLayout("forceAtlas2",wr.ForceAtlas2Layout);var jDe=function(e,t){t.isCustomLayout=!0,wr.Layouts[e]=wr.registerLayout(e,t)},UDe=function(){function r(e,t){var n=e.toString(),i=new Blob(["importScripts('".concat(t,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return r}(),WDe=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,h=c.edges,d=c.layoutCfg,v=d===void 0?{}:d,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(p," not found")});break}var m;v.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),m==null||m.destroy()},m=new g(v),m.init({nodes:f,edges:h}),m.execute();break}case i.GPURUN:{var y=s.data,w=y.nodes,h=y.edges,b=y.layoutCfg,v=b===void 0?{}:b,x=y.canvas,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(p," not found")});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout ".concat(p," does not support GPU")});break}var S=new g(v);S.init({nodes:w,edges:h}),S.executeWithWorker(x,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new UDe(t,e);return n},tf={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function c_(r){"@babel/helpers - typeof";return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c_(r)}var eD=function(e){return setTimeout(e,16)},tD=function(e){return clearTimeout(e)},t0={requestAnimationFrame:function(e){var t=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||eD;return t(e)},cancelAnimationFrame:function(e){var t=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||tD;return t(e)}},HDe=["fruchterman","gForce"],VDe=["force","grid","circular"],YDe=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=WDe(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(t0.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(t0.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,n){var i=this;return new Promise(function(a,o){return qi(i,void 0,void 0,function(){var s,l,u,c,f,p,h,d,v,p,g;return Zi(this,function(m){switch(m.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(XG(l)?l="".concat(l,"-gpu"):console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU."))),hi.isForce(l)?(u=t.onTick,c=t.animate,f=c===void 0&&(l==="force"||l==="force2"),p=function(){u&&u(),(c||f)&&s.refreshPositions()},t.tick=p):(l==="comboForce"||l==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),h=!1;try{d=new wr.Layouts[l](t),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=d}catch{console.warn("The layout method: '".concat(l,"' does not exist! Please specify it first.")),o()}return h=d.enableTick,h&&(v=t.onTick,p=function(){v&&v(),s.refreshPositions()},d.tick=p),g=this.filterLayoutData(this.data,t),qDe(g,n),d.init(g),s.emit("beforesublayout",{type:l}),[4,d.execute()];case 1:return m.sent(),d.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,n){var i=this;return new Promise(function(a,o){return qi(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return Zi(this,function(v){switch(v.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},hi.isForce(l)&&(u=n.onTick,c=n.animate,f=c===void 0&&(l==="force"||l==="force2"),h=function(){u==null||u(),(c||f)&&s.refreshPositions()},n.tick=h),d=this.filterLayoutData(this.data,n),t.init(d),t.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,t.execute()];case 1:return v.sent(),t.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var n=this,i,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,l=o.hiddenNodes;if(!s)return!1;var u=a.get("width"),c=a.get("height"),f={};Object.assign(f,{width:u,height:c,center:[u/2,c/2]},this.layoutCfg),this.layoutCfg=f;var h=f.type,d=!1;(i=this.layoutMethods)===null||i===void 0||i.forEach(function(x){var S;return d=!!(!((S=x.nodes)===null||S===void 0)&&S.length)||d});var v=this.destoryLayoutMethods();a.emit("beforelayout");var p=Promise.resolve();d&&h&&(v==null?void 0:v.length)===1&&v[0]===h?this.tweakInit():p=this.initPositions(f.center,s);var g=this.initPositions(f.center,l);g.then(),this.isGPU=rD(f,h);var m=f.onLayoutEnd,y=f.layoutEndFormatted,w=f.adjust;if(y||(f.layoutEndFormatted=!0,f.onAllLayoutEnd=function(){return qi(n,void 0,void 0,function(){return Zi(this,function(x){switch(x.label){case 0:return m&&m(s),this.refreshLayout(),w&&f.pipes?[4,this.adjustPipesBox(this.data,w)]:[3,2];case 1:x.sent(),this.refreshLayout(),x.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),f.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var b=!1;return f.type?(b=!0,p=p.then(function(){return qi(n,void 0,void 0,function(){return Zi(this,function(x){switch(x.label){case 0:return[4,this.execLayoutMethod(f,0)];case 1:return[2,x.sent()]}})})})):f.pipes&&(b=!0,f.pipes.forEach(function(x,S){p=p.then(function(){return qi(n,void 0,void 0,function(){return Zi(this,function(_){switch(_.label){case 0:return[4,this.execLayoutMethod(x,S)];case 1:return[2,_.sent()]}})})})})),b?p.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd(),t&&t()}).catch(function(x){console.warn("graph layout failed,",x)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,n=t.data,i=t.graph,a=n.nodes,o=n.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var f=c.x,h=c.y;!isNaN(f)&&!isNaN(h)&&(s[c.id]={x:f,y:h},c.mass=c.mass||2)}),o.forEach(function(c){var f=c.source,h=c.target,d=s[f],v=s[h];!d&&v?s[f]={x:v.x+(Math.random()-.5)*80,y:v.y+(Math.random()-.5)*80}:!v&&d&&(s[h]={x:d.x+(Math.random()-.5)*80,y:d.y+(Math.random()-.5)*80})});var l=i.get("width"),u=i.get("height");a.forEach(function(c){var f=s[c.id]||{x:l/2+(Math.random()-.5)*20,y:u/2+(Math.random()-.5)*20};c.x=f.x,c.y=f.y})}},e.prototype.initWithPreset=function(t,n){var i=this;return new Promise(function(a,o){return qi(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return Zi(this,function(v){switch(v.label){case 0:return s=this,l=s.layoutCfg,u=s.data,c=l.preset,!(c!=null&&c.type)||!wr.Layouts[c==null?void 0:c.type]?(n==null||n(),a(),[2,!1]):(f=rD(c,c.type),h=f?"".concat(c.type,"-gpu"):c.type,d=new wr.Layouts[h](c),delete l.preset,d.init(u),[4,d.execute()]);case 1:return v.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,n){var i=this,a=this,o=a.layoutCfg,s=a.graph,l=this.getWorker(),u=this.workerData;if(!l)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),f=!1;if(o.type)f=!0,c=c.then(function(){return i.runWebworker(l,t,o)});else if(o.pipes){f=!0;for(var h=function(m){c=c.then(function(){return i.runWebworker(l,t,m)})},d=0,v=o.pipes;d<v.length;d++){var p=v[d];h(p)}}return f&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),n==null||n()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(t,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,h=XDe(i,function(v){return typeof v!="function"});if(!f)t.postMessage({type:tf.RUN,nodes:l,edges:u,layoutCfg:h});else{var d=c.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),t.postMessage({type:tf.GPURUN,nodes:l,edges:u,layoutCfg:h,canvas:d},[d])}return new Promise(function(v,p){t.onmessage=function(g){a.handleWorkerMessage(v,p,g,s,i)}})},e.prototype.handleWorkerMessage=function(t,n,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,h=function(){o.onTick&&o.onTick()};switch(f){case tf.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=t0.requestAnimationFrame(function(){rx(a,c),l.refreshPositions(),h(),c.currentTick===c.totalTicks?t():u.currentTick===c.totalTicks&&(u.requestId2=t0.requestAnimationFrame(function(){rx(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,h(),t()})),u.requestId=null}));break;case tf.END:u.currentTick==null&&(rx(a,c),t());break;case tf.GPUEND:u.currentTick==null&&(KDe(a,c),t());break;case tf.ERROR:console.warn("Web-Worker layout error!",c.message),n();break;default:n();break}},e.prototype.updateLayoutCfg=function(t){var n=this,i=this,a=i.graph,o=i.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,l=zn(t,["disableTriggerLayout"]),u=Gt({},this.layoutCfg,l);if(this.layoutCfg=u,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(l.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),f=!1;(o==null?void 0:o.length)===1?(f=!0,c=c.then(function(){return qi(n,void 0,void 0,function(){return Zi(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,h.sent()]}})})})):o!=null&&o.length&&(f=!0,o.forEach(function(h,d){var v=u.pipes[d];c=c.then(function(){return qi(n,void 0,void 0,function(){return Zi(this,function(p){switch(p.label){case 0:return[4,this.updateLayoutMethod(h,v)];case 1:return[2,p.sent()]}})})})})),f&&c.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(h){console.warn("layout failed",h)})}}}},e.prototype.adjustPipesBox=function(t,n){var i=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),VDe.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:i.layoutCfg.center,nodeSize:function(v){return Math.max(v.height,v.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=br(c);s.onLayoutEnd=function(){c==null||c.forEach(function(d,v){var p,g,m,y=d.x-((p=f[v])===null||p===void 0?void 0:p.x),w=d.y-((g=f[v])===null||g===void 0?void 0:g.y);(m=u[v])===null||m===void 0||m.forEach(function(b){b.x+=y,b.y+=w})}),a()};var h=new wr.Layouts[n](s);h.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(kB);function rx(r,e){for(var t=r.nodes,n=e.nodes,i=t.length,a=0;a<i;a++){var o=t[a];o.x=n[a].x,o.y=n[a].y}}function XDe(r,e){var t={};return r&&c_(r)==="object"?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&e(r[n])&&(t[n]=r[n])}),t):r}function KDe(r,e){for(var t=r.nodes,n=e.vertexEdgeData,i=t.length,a=0;a<i;a++){var o=t[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function qDe(r,e){var t;if(!((t=r==null?void 0:r.nodes)===null||t===void 0)&&t.length){var n=r.nodes;n.forEach(function(i){i.layoutOrder=e})}}function XG(r){return HDe.includes(r)}function rD(r,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],r.gpuEnabled=!0);var n=!1;return r.gpuEnabled&&(n=!0,VG().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!XG(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var nD=Pa,ZDe="svg",KG=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return e.prototype.initLayoutController=function(){var t=new YDe(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Mye(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var n=t.clientWidth,i=t.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===ZDe)l=new Dd({container:t,width:a,height:o});else{var u={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c,window.devicePixelRatio=c),l=new Ts(u)}this.set("canvas",l)},e.prototype.initPlugins=function(){var t=this;Pe(t.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,n,i,a){return qi(this,void 0,void 0,function(){var o,s,l;return Zi(this,function(u){switch(u.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=f,n.fill(),c("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),h=s||c.get("el"),d="";t||(t="image/png"),setTimeout(function(){return qi(l,void 0,void 0,function(){var v,p,g,m,y,w,b,x,S,_;return Zi(this,function(M){switch(M.label){case 0:return f!=="svg"?[3,1]:(v=h.cloneNode(!0),p=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",p),g.replaceChild(v,g.documentElement),m=new XMLSerializer().serializeToString(g),d="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(m)),[3,4]);case 1:return y=void 0,w=h.getContext("2d"),b=a||this.get("width"),x=o||this.get("height"),S=void 0,u?[4,this.downloadImageWatermark(u,w,b,x)]:[3,3];case 2:M.sent(),M.label=3;case 3:if(n){_=typeof window<"u"?window.devicePixelRatio:1;try{y=w.getImageData(0,0,b*_,x*_),S=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=n,w.fillRect(0,0,b,x)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}d=h.toDataURL(t),n&&(w.clearRect(0,0,b,x),w.putImageData(y,0,0),w.globalCompositeOperation=S),M.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(t,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");t||(t="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(f))}else{var h=void 0,d=o.getContext("2d"),v=Math.max(this.get("width"),500),p=Math.max(this.get("height"),500),g=void 0;if(n){var m=typeof window<"u"&&window.devicePixelRatio||1;try{h=d.getImageData(0,0,v*m,p*m),g=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=n,d.fillRect(0,0,v,p)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),n&&(d.clearRect(0,0,v,p),d.putImageData(h,0,0),d.globalCompositeOperation=g)}return s},e.prototype.toFullDataURL=function(t,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=Zr('<div id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?Rt(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=o+f[0]+f[2],d=s+f[1]+f[3],v={container:u,height:h,width:d,quickHit:!0},p=l==="svg"?new Dd(v):new Ts(v),g=this.get("group"),m=g.clone(),y=br(m.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var w=(a.maxX+a.minX)/2,b=(a.maxY+a.minY)/2;y=nD(y,[["t",-w,-b],["t",s/2+f[3],o/2+f[0]]]),m.resetMatrix(),m.setMatrix(y),p.add(m);var x=p.get("el"),S="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var _=x.cloneNode(!0),M=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),A=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",M);A.replaceChild(_,A.documentElement);var E=new XMLSerializer().serializeToString(A);S="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(E))}else{var T=void 0,C=x.getContext("2d"),k=void 0;if(c){var L=typeof window<"u"?window.devicePixelRatio:1;try{T=C.getImageData(0,0,d*L,h*L),k=C.globalCompositeOperation,C.globalCompositeOperation="destination-over",C.fillStyle=c,C.fillRect(0,0,d,h)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}S=x.toDataURL(n),c&&(C.clearRect(0,0,d,h),C.putImageData(T,0,0),C.globalCompositeOperation=k)}t&&t(S)},16)},e.prototype.downloadFullImage=function(t,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=Zr('<div id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?Rt(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var v=s+d[0]+d[2],p=l+d[1]+d[3];if(f){var g=this.get("graphWaterMarker").cfg||{},m=g.width,y=g.height;v=Math.ceil(v/y)*y,p=Math.ceil(p/m)*m}var w={container:c,height:v,width:p},b=u==="svg"?new Dd(w):new Ts(w),x=this.get("group"),S=xye(x),_=br(S.getMatrix());_||(_=[1,0,0,0,1,0,0,0,1]);var M=(o.maxX+o.minX)/2,A=(o.maxY+o.minY)/2;_=nD(_,[["t",-M,-A],["t",l/2+d[3],s/2+d[0]]]),S.resetMatrix(),S.setMatrix(_),b.add(S);var E=b.get("el");n||(n="image/png"),this.asyncToDataUrl(n,h,function(T){var C=document.createElement("a"),k=(t||"graph")+(u==="svg"?".svg":".".concat(n.split("/")[1]));a.dataURLToImage(T,u,C,k);var L=document.createEvent("MouseEvents");L.initEvent("click",!1,!1),C.dispatchEvent(L)},p,v,E)},e.prototype.downloadImage=function(t,n,i){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(t||"graph")+(l==="svg"?".svg":".".concat(n.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(n,i,function(f){a.dataURLToImage(f,l,c,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},e.prototype.dataURLToImage=function(t,n,i,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var h=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=a,i.href=t})},e.prototype.addPlugin=function(t){var n=this;t.destroyed||(n.get("plugins").push(t),t.initPlugin(n))},e.prototype.removePlugin=function(t){var n=this.get("plugins"),i=n.indexOf(t);i>=0&&(t.destroyPlugin(),n.splice(i,1))},e.prototype.setImageWaterMarker=function(t,n){t===void 0&&(t=Ju.waterMarkerImage);var i=this.get("container");rt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Vr({},Ju.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!t){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new Ts(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var v=a.get("context"),p=c.rotate,g=c.x,m=c.y;v.rotate(-p*Math.PI/180);var y=new Image;y.crossOrigin="anonymous",y.src=t,y.onload=function(){if(v.drawImage(y,g,m,c.width,c.height),v.rotate(p*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var w=document.querySelector(".g6-graph-watermarker");w||(w=document.createElement("div"),w.className="g6-graph-watermarker"),w.className="g6-graph-watermarker",a.destroyed||(w.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(w))}}},e.prototype.setTextWaterMarker=function(t,n){var i=this.get("container");rt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Vr({},Ju.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!(t!=null&&t.length)){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new Ts(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var v=a.get("context"),p=c.rotate,g=c.fill,m=c.fontFamily,y=c.fontSize,w=c.baseline,b=c.x,x=c.y,S=c.lineHeight;v.rotate(-p*Math.PI/180),v.font="".concat(y,"px ").concat(m),v.fillStyle=g,v.textBaseline=w;for(var _=rt(t)?[t]:t,M=_.length-1;M>=0;M--)v.fillText(_[M],b,x+M*S);if(v.rotate(p*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var A=document.querySelector(".g6-graph-watermarker");A||(A=document.createElement("div"),A.className="g6-graph-watermarker"),A.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(A)}},e.prototype.destroy=function(){var t,n,i,a;Pe(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(l){var u=l.parentElement;u&&u.removeChild(l)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),r.prototype.destroy.call(this)},e}(MB);function f_(r){"@babel/helpers - typeof";return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f_(r)}function qG(r,e){if(e===void 0&&(e=new WeakMap),r===null)return r;if(r instanceof Date)return new Date(r);if(r instanceof RegExp)return new RegExp(r);if(f_(r)!=="object")return r;if(e.get(r))return e.get(r);var t=Array.isArray(r)?[]:{};e.set(r,t);for(var n in r)r.hasOwnProperty(n)&&r[n]!==void 0&&(t[n]=qG(r[n],e));return t}function QDe(r){try{return structuredClone(r)}catch{return qG(r)}}var JDe=Zs.radialLayout,nx=Zs.traverseTree,eRe=function(r){ir(e,r);function e(t){var n=r.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(n){var i=Zm[t.type](n,t);return JDe(i),i}:function(n){return Zm[t.type](n,t)}):null},e.indexOfChild=function(t,n){var i=-1;return Pe(t,function(a,o){if(n===a.id)return i=o,!1}),i},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,n,i){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:"".concat(n.get("id"),":").concat(s.get("id"))},!1)}return Pe(t.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},e.prototype.innerUpdateChild=function(t,n,i){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,n,i);return}Pe(t.children||[],function(v){a.innerUpdateChild(v,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},i),s.splice(u,1))}}var f,h;o.get("originAttrs")&&(f=o.get("originAttrs").x,h=o.get("originAttrs").y);var d=o.getModel();i&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",Object.assign(d,t.data)),(f!==t.x||h!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,n,i){var a=this,o=a.findById(t);if(o)if(Pe(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,n){n===void 0&&(n=!0);var i=this;this.getNodes().map(function(a){return i.clearItemStates(a)}),this.getEdges().map(function(a){return i.clearItemStates(a)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:t||i.get("data")}),t?(i.data(t),i.render(!1)):i.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(t)},e.prototype.updateLayout=function(t,n,i,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*l[0]+l[6],s.y=s.y*l[0]+l[7];var u=this.getGroup().getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY,v={x:(c+f)/2,y:(h+d)/2};n==="begin"&&(v.x=c,v.y=h),this.translate(s.x-v.x,s.y-v.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(t)},e.prototype.layout=function(t){var n=this,i=this,a=i.get("data"),o=i.get("layoutMethod"),s=i.get("layout"),l=a;if(s!=null&&s.excludeInvisibles){a=br(i.get("data"));var u={};nx(a,function(h){var d=h.children;if(!(d!=null&&d.length))return!0;for(var v=d.length-1;v>=0;v--){var p=n.findById(d[v].id),g=p?!p.isVisible():d[v].visible===!1;g&&(u[h.id]=u[h.id]||[],u[h.id].push({idx:v,child:d.splice(v,1)[0]}))}}),l=o?o(a,i.get("layout")):a,nx(l,function(h){var d=u[h.id];if(d!=null&&d.length)for(var v=d.length-1;v>=0;v--){var p=d[v],g=p.idx,m=p.child;h.children.splice(g,0,m)}})}else l=o?o(a,i.get("layout")):a;var c=i.get("animate");if(i.emit("beforerefreshlayout",{data:a,layoutData:l}),i.emit("beforelayout"),i.innerUpdateChild(l,void 0,c),t){var f=i.get("viewController");f.fitView()}c?i.layoutAnimate(l):(i.refresh(),i.paint()),i.emit("afterrefreshlayout",{data:a,layoutData:l}),i.emit("afterlayout")},e.prototype.addChild=function(t,n,i){i===void 0&&(i=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:n}),rt(n)||(n=n.get("id"));var o=a.findDataById(n);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(n);s.refresh(),a.changeData(void 0,i)}},e.prototype.updateChildren=function(t,n,i){i===void 0&&(i=!0);var a=this,o=a.findById(n);if(!n||!o){console.warn("Update children failed! There is no node with id '".concat(n,"'"));return}var s=a.findDataById(n);s.children=t,o.refresh(),a.changeData(void 0,i)},e.prototype.updateChild=function(t,n,i){i===void 0&&(i=!0);var a=this;if(!n||!a.findById(n)){a.changeData(t,i);return}var o=a.findDataById(n),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var l=e.indexOfChild(o.children,t.id);l>-1&&(o.children[l]=t)}var u=a.findById(n);u==null||u.refresh(),a.changeData(void 0,i)},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0);var i=this,a=i.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=i.getNodes().find(function(f){var h=f.getModel().children||[];return!!h.find(function(d){return d.id===t})}),o&&!o.destroyed){var s=o.get("id"),l=i.findDataById(s),u=l&&l.children||[],c=e.indexOfChild(u,t);u.splice(c,1),o.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,n){var i=this;if(n||(n=i.get("data")),t===n.id)return n;var a=null;return Pe(n.children||[],function(o){if(o.id===t)return a=o,!1;if(a=i.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){nx(t,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),n){var f=n(l,o,u,t);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),Pe(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){Pe(i.getNodes(),function(s){s.set("originAttrs",null)}),Pe(i.get("removeList"),function(s){i.removeItem(s,!1)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var n=this,i=n.get("data");if(!i||!ni(i)||!Object.keys(i).length)throw new Error("data must be defined first");n.clear(),t&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){r.prototype.data.call(this,t),this.set("originData",QDe(t))},e}(KG),Ui=function(){function r(e){this._cfgs=Vr(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),i={};Pe(n,function(a,o){var s=Gu(t,a);i[o]=s,e.on(o,s)}),this._events=i,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},r.prototype.set=function(e,t){this._cfgs[e]=t},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;Pe(t,function(n,i){e.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}(),tRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iD="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",rRe=function(r){tRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:iD,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),n=t.get("container"),i=t.get("canvas").get("el"),a=this.get("img")||iD;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Zr(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Zr(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},e.prototype.positionInit=function(){var t=this.get("graph"),n=t.get("minZoom"),i=t.get("width"),a=t.get("height");mr(this.get("container"),{width:"".concat(i,"px"),height:"".concat(a,"px")});var o=i*80/n,s=a*80/n;mr(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var n=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(a?i[6]:"0",", ").concat(a?i[7]:"0",")");mr(n,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),n=t.get("container"),i=this.get("container");n.removeChild(i)},e}(Ui),QM={exports:{}},aD=[],rd=[],nRe="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function ZG(r,e){if(e=e||{},r===void 0)throw new Error(nRe);var t=e.prepend===!0?"prepend":"append",n=e.container!==void 0?e.container:document.querySelector("head"),i=aD.indexOf(n);i===-1&&(i=aD.push(n)-1,rd[i]={});var a;return rd[i]!==void 0&&rd[i][t]!==void 0?a=rd[i][t]:(a=rd[i][t]=iRe(),t==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),a.styleSheet?a.styleSheet.cssText+=r:a.textContent+=r,a}function iRe(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}QM.exports=ZG;QM.exports.insertCss=ZG;var aRe=QM.exports;const C1=co(aRe);var oRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&C1(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var sRe=function(r){oRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>菜单项1</li>
            <li>菜单项2</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),n=Zr("<div class=".concat(t||"g6-component-contextmenu","></div>"));mr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),rt(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(t){var n=this;t.preventDefault();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&i.indexOf(t.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(t,l);rt(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(M){c(M.target,t.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var h=l.get("width"),d=l.get("height"),v=o.getBoundingClientRect(),p=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,y=l.getContainer().offsetLeft,w=t.canvasX+y+p,b=t.canvasY+m+g;w+v.width>h&&(w=t.canvasX-v.width-p+y),b+v.height>d&&(b=t.canvasY-v.height-g+m),b<0&&(b=0),mr(o,{top:"".concat(b,"px"),left:"".concat(w,"px"),visibility:"visible"});var x=this.get("trigger")==="click",S=function(M){if(x){x=!1;return}n.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),n=this.get("handler");if(t){var i=this.get("menu");i.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&mr(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(Ui),lRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),h_=function(){return h_=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},h_.apply(this,arguments)},oD=Math.max,uRe=Pa,cRe="default",fRe="keyShape",hRe="delegate",sD="svg",dRe=function(r){lRe(e,r);function e(t){var n=r.call(this,t)||this;return n.handleUpdateCanvas=jv(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Zr(`
      <div
        class=`.concat(n.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(u||l),`
      </div>`)),f=0,h=0,d=!1,v=0,p=0,g=0,m=0,y=0,w=0,b=u||l?"mousedown":"dragstart";c.addEventListener(b,function(M){var A,E;if(M.dataTransfer){var T=new Image;T.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(E=(A=M.dataTransfer).setDragImage)===null||E===void 0||E.call(A,T,0,0);try{M.dataTransfer.setData("text/html","view-port-minimap")}catch{M.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,M.target===c){var C=c.style;v=parseInt(C.left,10),p=parseInt(C.top,10),g=parseInt(C.width,10),m=parseInt(C.height,10),!(g>i[0]||m>i[1])&&(w=a.getZoom(),y=t.get("ratio"),d=!0,f=M.clientX,h=M.clientY)}},!1);var x=function(A){if(!(!d||Dt(A.clientX)||Dt(A.clientY))){var E=f-A.clientX,T=h-A.clientY;(v-E<0||v-E+g>=i[0])&&(E=0),(p-T<0||p-T+m>=i[1])&&(T=0),v-=E,p-=T,mr(c,{left:"".concat(v,"px"),top:"".concat(p,"px")}),a.translate(E*w/y,T*w/y),f=A.clientX,h=A.clientY}};!u&&!l&&c.addEventListener("drag",x,!1);var S=function(){d=!1,n.refresh=!0},_=u||l?"mouseup":"dragend";c.addEventListener(_,S,!1),s.addEventListener("mouseleave",S),s.addEventListener("mouseup",S),(u||l)&&s.addEventListener("mousemove",x,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),l=a.get("width")||s.scrollWidth||500,u=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),f=a.getPointByCanvas(l,u),h=this.get("viewport");h||this.initViewport();var d=(f.x-c.x)*t,v=(f.y-c.y)*t,p=c.x*t+n,g=c.y*t+i,m=p+d,y=g+v;p<0&&(d+=p,p=0),m>o[0]&&(d=d-(m-o[0])),g<0&&(v+=g,g=0),y>o[1]&&(v=v-(y-o[1])),this.set("ratio",t);var w="".concat(p,"px"),b="".concat(g,"px");mr(h,{left:w,top:b,width:"".concat(d,"px"),height:"".concat(v,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,n=this.get("canvas"),i=t.get("group");if(!i.destroyed){n.clear();var a;this.get("hideEdge")?(a=n.addGroup(),i.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=i.clone(),a.resetMatrix(),n.add(a));var o=t.get("renderer");o===sD&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var n=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var i=t.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Pe(n.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),Pe(n.getNodes(),function(l){t.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(Pe(o,function(l){t.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var f=t.getModel().depth;isNaN(f)||a.set("zIndex",f),i[t.get("id")]=a,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(t,n){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?(u=Object.assign(l,u),a.toFront()):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var f=t.getModel().depth;isNaN(f)||a.set("zIndex",f),i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Pe(n.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),Pe(n.getNodes(),function(l){t.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(Pe(o,function(l){t.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},n=Object.keys(t);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=t[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[n[i]])}},e.prototype.updateOneEdgeKeyShape=function(t,n){var i=this.get("itemMap")||{},a=i[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),n.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(t,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l),o.toFront()}else o=n.addShape("rect",{attrs:h_({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=t.get("size"),a=t.get("className"),o=t.get("container"),s=Zr("<div class='".concat(a,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));rt(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),t.set("container",s);var l=Zr('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=n.get("renderer");c===sD?u=new Dd({container:l,width:i[0],height:i[1]}):u=new Ts({container:l,width:i[0],height:i[1]}),t.set("canvas",u),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case cRe:this.updateGraphShapes();break;case fRe:this.updateKeyShapes();break;case hRe:this.updateDelegateShapes();break}var l=a.get("children")[0];if(l){l.resetMatrix();var u=l.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,h=c.width/f,d=c.height/f;Number.isFinite(u.width)&&(h=oD(u.width,h),d=oD(u.height,d)),h+=2*s,d+=2*s;var v=Math.min(i[0]/h,i[1]/d),p=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var y=(i[0]-(h-2*s)*v)/2,w=(i[1]-(d-2*s)*v)/2;p=uRe(p,[["t",g,m],["s",v,v],["t",y,w]]),l.setMatrix(p),this.set("ratio",v),this.set("totaldx",y+g*v),this.set("totaldy",w+m*v),this.set("dx",y),this.set("dy",w),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("container");n!=null&&n.parentNode&&n.parentNode.removeChild(n)},e}(Ui),vRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function Ao(r,e,t){var n=r.x-e.x,i=r.y-e.y;return Math.sqrt(n*n+i*i)}function pRe(r,e){return r.x*e.x+r.y*e.y}function lD(r,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(t*t*e.source.x+t*(r.y-e.source.y)+r.x)/(t*t+1),i=t*(n-e.source.x)+e.source.y;return{x:n,y:i}}var gRe=function(r){vRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),t.refreshPositions()};this.set("tick",i)},e.prototype.bundling=function(t){var n=this;if(n.set("data",t),!n.isTicking()){var i=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(b){(b.x===null||!b.y===null||b.x===void 0||!b.y===void 0)&&(s=!0),o[b.id]=b}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),c=n.divideEdges(l);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var h=n.get("cycles"),d=n.get("iterations"),v=n.get("iterRate"),p=n.get("lambda"),g=0;g<h;g++){for(var m=function(x){var S=[];i.forEach(function(_,M){if(_.source!==_.target){var A=o[_.source],E=o[_.target];S[M]=n.getEdgeForces({source:A,target:E},M,l,p);for(var T=0;T<l+1;T++)c[M][T].x+=S[M][T].x,c[M][T].y+=S[M][T].y}})},y=0;y<d;y++)m(y);p=p/2,l*=u,d*=v,c=n.divideEdges(l),n.set("edgePoints",c)}i.forEach(function(b,x){b.source!==b.target&&(b.type="polyline",b.controlPoints=c[x].slice(1,c[x].length-1))});var w=n.get("graph");w.refresh()}},e.prototype.updateBundling=function(t){var n=this,i=t.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach(function(o){n.set(o,t[o])}),t.onTick){var a=this.get("graph");n.set("tick",function(){t.onTick(),a.refresh()})}n.bundling(i)},e.prototype.divideEdges=function(t){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){var u;(!o[l]||o[l]===void 0)&&(o[l]=[]);var c=a[s.source],f=a[s.target];if(t===1)o[l].push({x:c.x,y:c.y}),o[l].push({x:.5*(c.x+f.x),y:.5*(c.y+f.y)}),o[l].push({x:f.x,y:f.y});else{var h=0;!((u=o[l])===null||u===void 0)&&u.length?h=n.getEdgeLength(o[l]):h=Ao({x:c.x,y:c.y},{x:f.x,y:f.y});var d=h/(t+1),v=d,p=[{x:c.x,y:c.y}];o[l].forEach(function(g,m){if(m!==0){for(var y=Ao(g,o[l][m-1]);y>v;){var w=v/y,b={x:o[l][m-1].x,y:o[l][m-1].y};b.x+=w*(g.x-o[l][m-1].x),b.y+=w*(g.y-o[l][m-1].y),p.push(b),y-=v,v=d}v-=y}}),p.push({x:f.x,y:f.y}),o[l]=p}}),o},e.prototype.getEdgeLength=function(t){var n=0;return t.forEach(function(i,a){a!==0&&(n+=Ao(i,t[a-1]))}),n},e.prototype.getEdgeBundles=function(){var t=this,n=t.get("data"),i=n.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(h,d){if(!(d<=u)){var v=o[h.source],p=o[h.target],g=t.getBundleScore({source:c,target:f},{source:v,target:p});g>=a&&(s[u].push(d),s[d].push(u))}})}),s},e.prototype.getBundleScore=function(t,n){var i=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,t.length=Ao({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.length=Ao({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(t,n),o=i.getScaleScore(t,n),s=i.getPositionScore(t,n),l=i.getVisibilityScore(t,n);return a*o*s*l},e.prototype.getAngleScore=function(t,n){var i=pRe({x:t.vx,y:t.vy},{x:n.vx,y:n.vy});return i/(t.length*n.length)},e.prototype.getScaleScore=function(t,n){var i=(t.length+n.length)/2,a=2/(i/Math.min(t.length,n.length)+Math.max(t.length,n.length)/i);return a},e.prototype.getPositionScore=function(t,n){var i=(t.length+n.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=Ao(a,o);return i/(i+s)},e.prototype.getVisibilityScore=function(t,n){var i=this.getEdgeVisibility(t,n),a=this.getEdgeVisibility(n,t);return i<a?i:a},e.prototype.getEdgeVisibility=function(t,n){var i=lD(n.source,t),a=lD(n.target,t),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Ao(o,s)/Ao(i,a))},e.prototype.getEdgeForces=function(t,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Ao(t.source,t.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var h={x:0,y:0},d=o.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},u),v=o.getElectrostaticForce(f,n);h.x=a*(d.x+v.x),h.y=a*(d.y+v.y),c.push(h)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,n){var i=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return i*=n,a*=n,{x:i,y:a}},e.prototype.getElectrostaticForce=function(t,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][t].x-s[n][t].x,y:s[c][t].y-s[n][t].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var h=Ao(s[c][t],s[n][t]),d=1/h;u.x+=f.x*d,u.y+=f.y*d}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},e}(Ui),mRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),d_=function(){return d_=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},d_.apply(this,arguments)},r0=.05,uD={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},yRe=function(r){mRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:br(uD),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,n=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",n*n);var i=t.get("d");t.set("molecularParam",(i+1)*n)},e.prototype.createDelegate=function(t){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(t),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-r0:a=1/(1-r0);var u=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.set("r2",f*f);var h=n.get("d");n.set("molecularParam",(h+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(t,l)}},e.prototype.scaleRByDrag=function(t){var n=this;if(t){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-i.x<0?o=1-r0:o=1/(1-r0);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,n.set("r",c),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(t,s),n.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var n=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=0;t.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(t,f)}}},e.prototype.scaleDByDrag=function(t){var n=this,i=n.get("dragPrePos"),a=t.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(t)}n.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),h=i.get("molecularParam"),d=a.getNodes(),v=d.length,p=n?{x:n.x,y:n.y}:{x:t.x,y:t.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(p=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(p.x+=g.x,p.y+=g.y),i.updateDelegate(p,u);for(var m=0;m<v;m++){var y=d[m].getModel(),w=y.x,b=y.y;if(!(isNaN(w)||isNaN(b))){var x=(w-p.x)*(w-p.x)+(b-p.y)*(b-p.y);if(!isNaN(x)&&x<c&&x!==0){var S=Math.sqrt(x),_=h*S/(f*S+u),M=(w-p.x)/S,A=(b-p.y)/S;if(y.x=M*_+p.x,y.y=A*_+p.y,s[y.id]||(s[y.id]={x:w,y:b,texts:[]}),o.push(y),l&&2*S<u)for(var E=d[m],T=E.getContainer(),C=T.getChildren(),k=C.length,L=0;L<k;L++){var I=C[L];I.get("type")==="text"&&(s[y.id].texts.push({visible:I.get("visible"),shape:I}),I.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,n=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var h=u.texts[f];h.shape.set("visible",h.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var n=this,i=t.r,a=t.d,o=t.trigger,s=t.minD,l=t.maxD,u=t.minR,c=t.maxR,f=t.scaleDBy,h=t.scaleRBy;isNaN(t.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u);var d=n.get("d"),v=n.get("r");if(n.set("molecularParam",(d+1)*v),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}if(h==="drag"||h==="wheel"||h==="unset"){n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}},e.prototype.updateDelegate=function(t,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||uD;s=l.addShape("circle",{attrs:d_({r:n/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(v){a.scaleRByWheel(v)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){a.scaleRByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(v){i.scaleDByWheel(v)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){i.scaleDByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:n/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),h=t.y+n/1.5+16;if(!f||f.destroyed){var d=o.get("group");f=d.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:"".concat(c,"%"),x:t.x,y:h})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Ui),bRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cD=.05;typeof document<"u"&&C1(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var wRe=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),n.tagName==="HTML")return t.push(document,window),t;n=n.parentElement}return t},xRe=function(r){bRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;rt(a)&&(o=Zr(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),rt(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var h=wRe(f).filter(function(v){return v.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");d&&(u?u(d,n):t.handleDefaultOperator(d))}});var c=this.get("position");c&&mr(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===0?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),n=t.getUndoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action;t.pushStack(a,br(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var v=t.findById(d.id);d.visible?t.showItem(v,!1):t.hideItem(v,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var v=t.findById(d.id);delete d.id,t.updateItem(v,d,!1),v.getType()==="combo"&&t.updateCombo(v)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var v=d.itemType;delete d.itemType,t.addItem(v,d,!1)})});break}case"add":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){t.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,l=s[s.length-1];Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})}),t.removeItem(l.id,!1);break;case"uncombo":var u=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(f){return f.id}).filter(function(f){return f!==u.id});t.createCombo(u,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.redo=function(){var t=this.get("graph"),n=t.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(t.pushStack(a,br(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=t.findById(h.id);h.visible?t.showItem(d,!1):t.hideItem(d,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=t.findById(h.id);delete h.id,t.updateItem(d,h,!1),d.getType()==="combo"&&t.updateCombo(d)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=h.itemType;delete h.itemType,t.addItem(d,h,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){t.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var l=i.data.before.combos,u=l[l.length-1];t.uncombo(u.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),n=t.getZoom(),i=1/(1-cD*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");i*n>a||t.zoomTo(n*i)},e.prototype.zoomIn=function(){var t=this.get("graph"),n=t.getZoom(),i=1-cD*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");i*n<a||t.zoomTo(n*i)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},e}(Ui),SRe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&C1(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var _Re=function(r){SRe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>类型：`.concat(n.item.getType(),`</h4>
          <span class='tooltip-id'>ID：`).concat(n.item.getID(),`</span>
        `)},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,n=t.get("className")||"g6-component-tooltip",i=Zr("<div class='".concat(n,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),rt(a)&&(a=document.getElementById(a)),mr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),t.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){mr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",i)},e.prototype.onClick=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var n=this.get("itemTypes");t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var n=this.get("itemTypes");if(!(t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(t);rt(o)?i.innerHTML=o:(this.clearContainer(),i.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&mr(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(t)){mr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),f=this.get("fixToNode"),h=t.item;if(h.getType&&h.getType()==="node"&&f&&Bt(f)&&f.length>=2){var d=h.getBBox();c={x:d.minX+d.width*f[0],y:d.minY+d.height*f[1]}}var v=a.getCanvasByPoint(c.x,c.y),p=v.x,g=v.y,m=a.getContainer(),y={x:p+m.offsetLeft+l,y:g+m.offsetTop+u};mr(i,{visibility:"visible",display:"unset"});var w=i.getBoundingClientRect();p+w.width+l>o&&(y.x-=w.width+l),g+w.height+u>s&&(y.y-=w.height+u,y.y<0&&(y.y=0)),mr(i,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(Ui),QG="timebarstartplay",JG="timebarendplay",$o="valuechange",ec="timebarConfigChanged",$l="playPauseBtn",Lv="nextStepBtn",Iv="preStepBtn",ERe=function(){function r(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.container,s=e.text,l=e.padding,u=l===void 0?[4,4,4,4]:l,c=e.className,f=c===void 0?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=h===void 0?"#000":h,v=e.textColor,p=v===void 0?"#fff":v,g=e.opacity,m=g===void 0?.8:g,y=e.fontSize,w=y===void 0?12:y;this.container=o,this.className=f,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=w,this.render()}return r.prototype.render=function(){var e=this,t=e.className;e.x,e.y;var n=e.backgroundColor,i=e.textColor,a=e.text,o=e.padding,s=e.opacity,l=e.fontSize,u=e.container,c=Zr("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(s,'"></div>'));rt(u)&&(u=document.getElementById(u)),u.appendChild(c),e.parentHeight=u.offsetHeight,e.parentWidth=u.offsetWidth,mr(c,{visibility:"hidden",top:0,left:0});var f=Zr(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(n,"; font-size: ").concat(l,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));f.innerHTML=a,c.appendChild(f),e.backgroundDOM=f;var h=Zr("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));c.appendChild(h),e.arrowDOM=h,e.container=c},r.prototype.show=function(e){var t=this,n=e.text,i=e.x;e.y,e.clientX,e.clientY,t.backgroundDOM.innerHTML=n;var a=t.backgroundDOM.offsetWidth,o=t.backgroundDOM.offsetHeight,s=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;mr(t.container,{top:"".concat(-o-l,"px"),left:"".concat(i,"px"),visibility:"visible"}),mr(t.backgroundDOM,{marginLeft:"".concat(-a/2,"px")}),mr(t.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(o,"px")});var u=i-a/2,c=i+a/2;u<0?mr(t.backgroundDOM,{marginLeft:"".concat(-a/2-u,"px")}):c>t.parentWidth&&mr(t.backgroundDOM,{marginLeft:"".concat(-a/2-c+t.parentWidth+12,"px")})},r.prototype.hide=function(){mr(this.container,{top:0,left:0,visibility:"hidden"})},r}(),v_=function(){return v_=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},v_.apply(this,arguments)},MRe=function(){function r(e){this.config=Vr({},e),this.init()}return r.prototype.update=function(e){this.config=Vr({},this.config,e),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,h=t.addGroup({name:$l});this.startMarkerGroup=h.addGroup({name:$l}),this.circle=t.addShape("circle",{attrs:v_({x:c,y:f,r:this.config.r*a},n),name:$l}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:$l});var d=.25*this.config.r*a,v=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-v/2,width:d,height:v,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-v/2,width:d,height:v,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=t===void 0?1:t,i=e.offsetX,a=i===void 0?0:i,o=e.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(e,t,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-i/Math.sqrt(3)/2,t-i/2],["L",e+i/Math.sqrt(3),t],["L",e-i/Math.sqrt(3)/2,t+i/2]]},r}(),kn=function(){return kn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},kn.apply(this,arguments)},nd=Pa,CRe="#aaa",ARe="green",TRe={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},kRe={fill:"#fff"},LRe={fill:"green"},ej={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},tj={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},IRe={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:ej,timeTypeControllerStyle:tj},ix=110,fl=50,Io={SINGLE:"single",RANGE:"range"},rj=function(){function r(e){this.controllerCfg=Vr({},IRe,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Io.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},r.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},r.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,i=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,l=s===void 0?CRe:s,u=e.stroke,c=u===void 0?ARe:u,f=e.containerStyle,h=f===void 0?{}:f,d=kn(kn({},TRe),e.playBtnStyle||{}),v=kn(kn({},kRe),e.preBtnStyle||{}),p=kn(kn({},LRe),e.nextBtnStyle||{}),g=n/2-5,m=a+10,y=this.controllerGroup.addShape("rect",{attrs:kn({x:i,y:m,width:t,height:n,stroke:c,fill:l},h),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:m,r:g}):this.playButton=new MRe({group:this.controllerGroup,x:t/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var w=v.offsetX||0,b=v.offsetY||0,x=(v.scale||1)*g;this.controllerGroup.addShape("path",{attrs:kn({path:this.getPreMarkerPath(t/2-5*g+w,m+g+5+b,x*.5)},v),name:Iv});var S=p.offsetX||0,_=p.offsetY||0,M=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:kn({path:this.getNextMarkerPath(t/2+5*g+S,m+g+5+_,M*.5)},p),name:Lv}),y.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var A=this.controllerCfg.scale,E=A===void 0?1:A,T=this.controllerGroup.getCanvasBBox(),C=(T.maxX+T.minX)/2,k=(T.maxY+T.minY)/2,L=nd([1,0,0,0,1,0,0,0,1],[["t",-C,-k],["s",E,E],["t",C,k]]);this.controllerGroup.setMatrix(L)},r.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,i=e.hideTimeTypeController,a=kn(kn({},ej),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,h=a.scale,d=h===void 0?1:h,v=a.offsetX,p=v===void 0?0:v,g=a.offsetY,m=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var w=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var x=t+this.speedAxisY[b],S=n-(i?fl:ix);y.addShape("line",{attrs:kn({x1:S,x2:S+15,y1:x,y2:x},s),speed:w,name:"speed-rect"}),this.speedAxisY[b]=x,w=w-1}this.speedText=y.addShape("text",{attrs:kn({x:n-(i?fl:ix)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:kn({path:this.getPointerPath(n-(i?fl:ix),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f),name:"speed-pointer"});var _=this.speedGroup.getCanvasBBox(),M=(_.maxX+_.minX)/2,A=(_.maxY+_.minY)/2,E=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=nd(E,[["t",-M,-A],["s",d,d],["t",M+p*d,A+m*d]]),this.speedGroup.setMatrix(E)},r.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},r.prototype.renderToggleTime=function(){var e,t,n=this.controllerCfg,i=n.width,a=n.defaultTimeType,o=kn(kn({},tj),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,l=s===void 0?1:s,u=o.offsetX,c=u===void 0?0:u,f=o.offsetY,h=f===void 0?0:f,d=o.box,v=d===void 0?{}:d,p=o.check,g=p===void 0?{}:p,m=o.text,y=m===void 0?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var w=a===Io.SINGLE;this.toggleGroup.addShape("rect",{attrs:kn({x:i-fl,y:this.speedAxisY[0]+3.5},v),isChecked:w,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:kn({path:[["M",i-fl+3,this.speedAxisY[1]+6],["L",i-fl+7,this.speedAxisY[1]+10],["L",i-fl+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),w||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:kn({text:w?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"时间范围":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"单一时间",x:i-fl+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,S=(b.maxY+b.minY)/2,_=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=nd(_,[["t",-x,-S],["s",l,l],["t",x+c*l,S+h*l]]),this.toggleGroup.setMatrix(_)},r.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var n=t.target.attr("y1"),i=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(i[7]||0),o=e.speedAxisY.indexOf(n),s=e.speedAxisY[o]-e.speedAxisY[a];i=nd(i,[["t",0,s]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ec,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=e.speedAxisY.indexOf(i);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-i;n=nd(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ec,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var n,i,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((i=e.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"单一时间"),e.currentType=Io.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"时间范围"),e.currentType=Io.SINGLE),t.target.set("isChecked",!a),e.group.emit(ec,{type:e.currentType,speed:e.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}(),Gd=function(){return Gd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Gd.apply(this,arguments)},ORe=Pa,NRe={fill:"#5B8FF9"},$Re={fill:"#e6e8e9"},DRe=function(){function r(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,i=e.group,a=e.width,o=e.height,s=e.padding,l=e.data,u=e.start,c=e.end,f=e.x,h=f===void 0?0:f,d=e.y,v=d===void 0?0:d,p=e.tickLabelFormatter,g=e.selectedTickStyle,m=g===void 0?NRe:g,y=e.unselectedTickStyle,w=y===void 0?$Re:y,b=e.tooltipBackgroundColor,x=e.tooltipFomatter,S=e.tickLabelStyle,_=e.controllerCfg,M=_===void 0?{speed:1}:_;this.graph=t,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=p,this.tickLabelStyle=S||{},this.selectedTickStyle=m,this.unselectedTickStyle=w,this.controllerCfg=M,this.currentSpeed=M.speed||1,this.x=h,this.y=v,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var e=this,t=this,n=t.width,i=t.height,a=t.padding,o=t.data,s=t.start,l=t.end,u=t.tickLabelFormatter,c=t.selectedTickStyle,f=t.unselectedTickStyle,h=t.tickLabelStyle,d=n-2*a,v=10,p=4,g=3*a+p+v,m=i-g-2*a,y=2,w=o.length,b=(d-y*(w-1))/w;this.tickWidth=b;var x=this.sliceGroup,S=[],_=[],M=Math.round(w*s),A=Math.round(w*l);this.startTickRectId=M,this.endTickRectId=A;var E=h.rotate;delete h.rotate,o.forEach(function(C,k){var L=k>=M&&k<=A,I=L?c:f,O=x.addShape("rect",{attrs:Gd({x:a+k*(b+y),y:a,width:b,height:m},I),draggable:!0,name:"tick-rect-".concat(k)}),N=x.addShape("rect",{attrs:{x:a+k*b+y*(2*k-1)/2,y:a,width:k===0||k===w-1?b+y/2:b+y,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(k)});N.toFront();var D=O.getBBox(),$=(D.minX+D.maxX)/2;S.push({rect:O,pickRect:N,value:C.date,x:$,y:D.minY});var R;if(u?(R=u(C),!rt(R)&&R&&(R=C.date)):k%Math.round(w/10)===0&&(R=C.date),R){_.push(R);var B=D.maxY+a*2;x.addShape("line",{attrs:{stroke:"#BFBFBF",x1:$,y1:B,x2:$,y2:B+p},name:"tick-line"});var j=B+p+a,G=x.addShape("text",{attrs:Gd({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:$,y:j,textAlign:"center",text:R,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),z=G.getBBox();if(z.maxX>n?G.attr("textAlign","right"):z.minX<0&&G.attr("textAlign","left"),Rt(E)&&_.length!==10){var W=ORe([1,0,0,0,1,0,0,0,1],[["t",-$,-j],["r",E],["t",$-5,j+2]]);G.attr({textAlign:"left",matrix:W})}_.length===1?G.attr({textAlign:"left"}):_.length===10&&G.attr({textAlign:"right"})}}),this.tickRects=S;var T=this.group;this.currentSpeed=1,this.controllerBtnGroup=new rj(Gd({group:T,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},r.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var h=parseInt(f.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,v=e.unselectedTickStyle;d.forEach(function(y){y.rect.attr(v)});var p=e.selectedTickStyle;d[h].rect.attr(p),e.startTickRectId=h,e.endTickRectId=h;var g=d.length,m=h/g;e.graph.emit($o,{value:[m,m]})}}}),t.on("dragstart",function(c){var f=e.tickRects,h=e.unselectedTickStyle;f.forEach(function(y){y.rect.attr(h)});var d=c.target,v=parseInt(d.get("name").split("-")[2],10),p=e.selectedTickStyle;f[v].rect.attr(p),e.startTickRectId=v;var g=f.length,m=v/g;e.graph.emit($o,{value:[m,m]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,v=e.selectedTickStyle,p=e.unselectedTickStyle,g=0;g<d.length;g++){var m=g>=h&&g<=f?v:p;d[g].rect.attr(m)}var y=d.length;e.endTickRectId=f;var w=h/y,b=f/y;e.graph.emit($o,{value:[w,b]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var f=e.startTickRectId,h=parseInt(c.target.get("name").split("-")[2],10);if(!(h<f)){var d=e.selectedTickStyle,v=e.tickRects;v[h].rect.attr(d),e.endTickRectId=h;var p=v.length,g=f/p,m=h/p;e.graph.emit($o,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new ERe({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(h){var d=h.target;if(d.get("type")==="rect"){var v=parseInt(d.get("name").split("-")[2],10),p=o.getClientByPoint(l[v].x,l[v].y);s.show({x:l[v].x,y:l[v].y,clientX:p.x,clientY:p.y,text:a?a(l[v].value):l[v].value})}}),f.on("mouseleave",function(h){s.hide()})});var u=this.group;u.on("".concat($l,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on("".concat(Lv,":click"),function(){e.updateStartEnd(1)}),u.on("".concat(Iv,":click"),function(){e.updateStartEnd(-1)}),u.on(ec,function(c){c.type;var f=c.speed;e.currentSpeed=f})},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(QG,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(JG,null))},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var l=t.startTickRectId;l<=t.endTickRectId-1;l++)n[l].rect.attr(a);t.startTickRectId=t.endTickRectId}if(n[t.endTickRectId]){n[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/i,c=t.endTickRectId/i;this.graph.emit($o,{value:[u,c]})}},r.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var n=t.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat($l,":click")),e.off("".concat(Lv,":click")),e.off("".concat(Iv,":click")),e.off(ec),this.sliceGroup.destroy()},r}(),nj={};function RRe(r){return nj[r]}function ss(r,e){nj[r]=e}var JM=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){Gt(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return sc(this.ticks,function(t,n){return ni(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var n=this.formatter,i=n?n(e,t):e;return Dt(i)||!tn(i.toString)?"":i.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){Gt(this,this.__cfg__),this.setDomain(),b5(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(rt(e)){var n=RRe(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else tn(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,n){return Rt(e)?(e-t)/(n-t):NaN},r.prototype.calcValue=function(e,t,n){return t+e*(n-t)},r}(),mp=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var n=this.translateIndexMap.get(t);return n===void 0&&(n=Rt(t)?t:NaN),n},e.prototype.scale=function(t){var n=this.translate(t),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var n=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=t;return Rt(t)&&!this.values.includes(t)&&(a=this.values[a]),r.prototype.getText.apply(this,Ay([a],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Dt(this.getConfig("min"))&&(this.min=0),Dt(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(JM),ij=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,bl="\\d\\d?",hl="\\d\\d",PRe="\\d{3}",FRe="\\d{4}",jd="[^\\s]+",aj=/\[([^]*?)\]/gm;function oj(r,e){for(var t=[],n=0,i=r.length;n<i;n++)t.push(r[n].substr(0,e));return t}var fD=function(r){return function(e,t){var n=t[r].map(function(a){return a.toLowerCase()}),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function Xl(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0,i=e;n<i.length;n++){var a=i[n];for(var o in a)r[o]=a[o]}return r}var sj=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lj=["January","February","March","April","May","June","July","August","September","October","November","December"],BRe=oj(lj,3),zRe=oj(sj,3),eC={dayNamesShort:zRe,dayNames:sj,monthNamesShort:BRe,monthNames:lj,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},Qm=Xl({},eC),uj=function(r){return Qm=Xl(Qm,r)},hD=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Li=function(r,e){for(e===void 0&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},GRe={D:function(r){return String(r.getDate())},DD:function(r){return Li(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Li(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Li(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return Li(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Li(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Li(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Li(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Li(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Li(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Li(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Li(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Li(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Li(Math.floor(Math.abs(e)/60),2)+":"+Li(Math.abs(e)%60,2)}},dD=function(r){return+r-1},vD=[null,bl],pD=[null,jd],gD=["isPm",jd,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],mD=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],jRe={D:["day",bl],DD:["day",hl],Do:["day",bl+jd,function(r){return parseInt(r,10)}],M:["month",bl,dD],MM:["month",hl,dD],YY:["year",hl,function(r){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",bl,void 0,"isPm"],hh:["hour",hl,void 0,"isPm"],H:["hour",bl],HH:["hour",hl],m:["minute",bl],mm:["minute",hl],s:["second",bl],ss:["second",hl],YYYY:["year",FRe],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",hl,function(r){return+r*10}],SSS:["millisecond",PRe],d:vD,dd:vD,ddd:pD,dddd:pD,MMM:["month",jd,fD("monthNamesShort")],MMMM:["month",jd,fD("monthNames")],a:gD,A:gD,ZZ:mD,Z:mD},Jm={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},cj=function(r){return Xl(Jm,r)},fj=function(r,e,t){if(e===void 0&&(e=Jm.default),t===void 0&&(t={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");e=Jm[e]||e;var n=[];e=e.replace(aj,function(a,o){return n.push(o),"@@@"});var i=Xl(Xl({},Qm),t);return e=e.replace(ij,function(a){return GRe[a](r,i)}),e.replace(/@@@/g,function(){return n.shift()})};function hj(r,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Jm[e]||e,r.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(aj,function(b,x){return o.push(hD(x)),"@@@"}),l={},u={};s=hD(s).replace(ij,function(b){var x=jRe[b],S=x[0],_=x[1],M=x[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,M&&(u[M]=!0),a.push(x),"("+_+")"}),Object.keys(u).forEach(function(b){if(!l[b])throw new Error("Invalid format. "+b+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=r.match(new RegExp(s,"i"));if(!c)return null;for(var f=Xl(Xl({},Qm),t),h=1;h<c.length;h++){var d=a[h-1],v=d[0],p=d[2],g=p?p(c[h],f):+c[h];if(g==null)return null;i[v]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,w=y.length;h<w;h++)if(l[y[h][0]]&&i[y[h][0]]!==m[y[h][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var dj={format:fj,parse:hj,defaultI18n:eC,setGlobalDateI18n:uj,setGlobalDateMasks:cj};const URe=Object.freeze(Object.defineProperty({__proto__:null,assign:Xl,default:dj,defaultI18n:eC,format:fj,parse:hj,setGlobalDateI18n:uj,setGlobalDateMasks:cj},Symbol.toStringTag,{value:"Module"}));function WRe(r){return function(e,t,n,i){for(var a=Dt(n)?0:n,o=Dt(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a}}var yD="format";function vj(r,e){var t=URe[yD]||dj[yD];return t(r,e)}function ey(r){return rt(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),jE(r)&&(r=r.getTime()),r}var qa=1e3,tc=60*qa,rc=60*tc,Is=24*rc,Ud=Is*31,bD=Is*365,id=[["HH:mm:ss",qa],["HH:mm:ss",qa*10],["HH:mm:ss",qa*30],["HH:mm",tc],["HH:mm",tc*10],["HH:mm",tc*30],["HH",rc],["HH",rc*6],["HH",rc*12],["YYYY-MM-DD",Is],["YYYY-MM-DD",Is*4],["YYYY-WW",Is*7],["YYYY-MM",Ud],["YYYY-MM",Ud*4],["YYYY-MM",Ud*6],["YYYY",Is*380]];function HRe(r,e,t){var n=(e-r)/t,i=WRe(function(o){return o[1]})(id,n)-1,a=id[i];return i<0?a=id[0]:i>=id.length&&(a=La(id)),a}var VRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=ey(t);var n=this.values.indexOf(t);return n===-1&&(Rt(t)&&t<this.values.length?n=t:n=NaN),n},e.prototype.getText=function(t,n){var i=this.translate(t);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):vj(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;Pe(t,function(n,i){t[i]=ey(n)}),t.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},e}(mp),A1=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if(Dt(t))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(t);return n+s*(i-n)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,n=Vo(t),i=La(t);n<this.min&&(this.min=n),i>this.max&&(this.max=i),Dt(this.minLimit)||(this.min=n),Dt(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=s5(this.values),n=t.min,i=t.max;Dt(this.min)&&(this.min=n),Dt(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var t=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=Ty(n,function(i){return i>=t.min&&i<=t.max})),n},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;return(t-i)/(n-i)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(JM),yp=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(A1);function Cl(r,e){var t=Math.E,n;return e>=0?n=Math.pow(t,Math.log(e)/r):n=Math.pow(t,Math.log(-e)/r)*-1,n}function _a(r,e){return r===1?1:Math.log(e)/Math.log(r)}function pj(r,e,t){Dt(t)&&(t=Math.max.apply(null,r));var n=t;return Pe(r,function(i){i>0&&i<n&&(n=i)}),n===t&&(n=t/e),n>1&&(n=1),n}var YRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var n=this.base,i=_a(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(t===0)return 0;s=_a(n,l/n);var u=1/(i-s)*o;if(t<u)return t/u*l}else s=_a(n,this.min);var c=(t-a)/o,f=c*(i-s)+s;return Math.pow(n,f)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=pj(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return t<o?s=t/o/(_a(a,n)-_a(a,i)):s=(_a(a,t)-_a(a,i))/(_a(a,n)-_a(a,i)),s},e}(A1),XRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t),i=this.exponent,a=Cl(i,this.max),o=Cl(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(Cl(a,t)-Cl(a,i))/(Cl(a,n)-Cl(a,i));return o},e}(A1),KRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,n){var i=this.translate(t),a=this.formatter;return a?a(i,n):vj(i,this.mask)},e.prototype.scale=function(t){var n=t;return(rt(n)||jE(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},e.prototype.translate=function(t){return ey(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!Dt(n)||!Rt(n))&&(this.min=this.translate(this.min)),(!Dt(i)||!Rt(i))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,l=0;Pe(t,function(u){var c=ey(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),Dt(n)&&(this.min=o),Dt(i)&&(this.max=l)}},e}(yp),gj=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var n=this.ticks,i=n.length,a=this.getInvertPercent(t),o=Math.floor(a*(i-1));if(o>=i-1)return La(n);if(o<0)return Vo(n);var s=n[o],l=n[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||(La(t)!==this.max&&t.push(this.max),Vo(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var n=this.ticks;if(t<Vo(n))return 0;if(t>La(n))return 1;var i=0;return Pe(n,function(a,o){if(t>=a)i=o;else return!1}),i/(n.length-1)},e}(A1),qRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(gj),mj={};function ZRe(r){return mj[r]}function ls(r,e){if(ZRe(r))throw new Error("type '"+r+"' existed.");mj[r]=e}var QRe=function(r){ir(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&Rt(t)?t:this.range[0]},e.prototype.invert=function(t){var n=this.range;return t<n[0]||t>n[1]?NaN:this.values[0]},e}(JM);function yj(r){var e=r.values,t=r.tickInterval,n=r.tickCount,i=r.showLast;if(Rt(t)){var a=Ty(e,function(v,p){return p%t===0}),o=La(e);return i&&La(a)!==o&&a.push(o),a}var s=e.length,l=r.min,u=r.max;if(Dt(l)&&(l=0),Dt(u)&&(u=e.length-1),!Rt(n)||n>=s)return e.slice(l,u+1);if(n<=0||u<=0)return[];for(var c=n===1?s:Math.floor(s/(n-1)),f=[],h=l,d=0;d<n&&!(h>=u);d++)h=Math.min(l+d*c,u),d===n-1&&i?f.push(e[u]):f.push(e[h]);return f}function JRe(r){var e=r.min,t=r.max,n=r.nice,i=r.tickCount,a=new e3e;return a.domain([e,t]),n&&a.nice(i),a.ticks(i)}var ax=5,wD=Math.sqrt(50),xD=Math.sqrt(10),SD=Math.sqrt(2),e3e=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,n;e===void 0&&(e=ax);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(t=[l,s],s=t[0],l=t[1],n=[o,a],a=n[0],o=n[1]),u=z0(s,l,e),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=z0(s,l,e)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=z0(s,l,e)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},r.prototype.ticks=function(e){return e===void 0&&(e=ax),t3e(this._domain[0],this._domain[this._domain.length-1],e||ax)},r}();function t3e(r,e,t){var n,i=-1,a,o,s;if(e=+e,r=+r,t=+t,r===e&&t>0)return[r];if((n=e<r)&&(a=r,r=e,e=a),(s=z0(r,e,t))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-r+1));++i<a;)o[i]=(r+i)*s;else for(r=Math.floor(r*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(r-e+1));++i<a;)o[i]=(r-i)/s;return n&&o.reverse(),o}function z0(r,e,t){var n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=wD?10:a>=xD?5:a>=SD?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=wD?10:a>=xD?5:a>=SD?2:1)}function _D(r,e,t){var n;return t==="ceil"?n=Math.ceil(r/e):t==="floor"?n=Math.floor(r/e):n=Math.round(r/e),n*e}function tC(r,e,t){var n=_D(r,t,"floor"),i=_D(e,t,"ceil");n=g0(n,t),i=g0(i,t);for(var a=[],o=Math.max((i-n)/(Math.pow(2,12)-1),t),s=n;s<=i;s=s+o){var l=g0(s,o);a.push(l)}return{min:n,max:i,ticks:a}}function rC(r,e,t){var n,i=r.minLimit,a=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,u=l===void 0?5:l,c=Dt(i)?Dt(e)?o:e:i,f=Dt(a)?Dt(t)?s:t:a;if(c>f&&(n=[c,f],f=n[0],c=n[1]),u<=2)return[c,f];for(var h=(f-c)/(u-1),d=[],v=0;v<u;v++)d.push(c+h*v);return d}function r3e(r){var e=r.min,t=r.max,n=r.tickInterval,i=r.minLimit,a=r.maxLimit,o=JRe(r);return!Dt(i)||!Dt(a)?rC(r,Vo(o),La(o)):n?tC(e,t,n).ticks:o}function Ru(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var n3e=[1,5,2,2.5,4,3],ED=Number.EPSILON*100;function i3e(r,e){return(r%e+e)%e}function a3e(r){return Math.round(r*1e12)/1e12}function o3e(r,e,t,n,i,a){var o=Iy(e),s=UE(e,r),l=0,u=i3e(n,a);return(u<ED||a-u<ED)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-t+l}function s3e(r,e,t){var n=Iy(e),i=UE(e,r),a=1;return 1-i/(n-1)-t+a}function l3e(r,e,t,n,i,a){var o=(r-1)/(a-i),s=(e-1)/(Math.max(a,n)-Math.min(t,i));return 2-Math.max(o/s,s/o)}function u3e(r,e){return r>=e?2-(r-1)/(e-1):1}function c3e(r,e,t,n){var i=e-r;return 1-.5*(Math.pow(e-n,2)+Math.pow(r-t,2))/Math.pow(.1*i,2)}function f3e(r,e,t){var n=e-r;if(t>n){var i=(t-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function h3e(){return 1}function d3e(r,e,t,n,i,a){t===void 0&&(t=5),n===void 0&&(n=!0),i===void 0&&(i=n3e),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||typeof r!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-r<1e-15||o===1)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var s=t||5,l=(e-r)/s;return{min:r,max:e,ticks:Array(s).fill(null).map(function(B,j){return Ru(r+l*j)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var f=0;f<i.length;f+=1){var h=i[f],d=s3e(h,i,c);if(a[0]*d+a[1]+a[2]+a[3]<u.score){c=1/0;break}for(var v=2;v<1/0;){var p=u3e(v,o);if(a[0]*d+a[1]+a[2]*p+a[3]<u.score)break;for(var g=(e-r)/(v+1)/c/h,m=Math.ceil(Math.log10(g));m<1/0;){var y=c*h*Math.pow(10,m),w=f3e(r,e,y*(v-1));if(a[0]*d+a[1]*w+a[2]*p+a[3]<u.score)break;var b=Math.floor(e/y)*c-(v-1)*c,x=Math.ceil(r/y)*c;if(b<=x)for(var s=x-b,S=0;S<=s;S+=1){var _=b+S,M=_*(y/c),A=M+y*(v-1),E=y,T=o3e(h,i,c,M,A,E),C=c3e(r,e,M,A),k=l3e(v,o,r,e,M,A),L=h3e(),I=a[0]*T+a[1]*C+a[2]*k+a[3]*L;I>u.score&&(!n||M<=r&&A>=e)&&(u.lmin=M,u.lmax=A,u.lstep=E,u.score=I)}m+=1}v+=1}}c+=1}var O=Ru(u.lmax),N=Ru(u.lmin),D=Ru(u.lstep),$=Math.floor(a3e((O-N)/D))+1,R=new Array($);R[0]=Ru(N);for(var f=1;f<$;f++)R[f]=Ru(R[f-1]+D);return{min:Math.min(r,Vo(R)),max:Math.max(e,La(R)),ticks:R}}function v3e(r){var e=r.min,t=r.max,n=r.tickCount,i=r.nice,a=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=d3e(e,t,n,i).ticks;return!Dt(o)||!Dt(s)?rC(r,Vo(l),La(l)):a?tC(e,t,a).ticks:l}function p3e(r){var e=r.base,t=r.tickCount,n=r.min,i=r.max,a=r.values,o,s=_a(e,i);if(n>0)o=Math.floor(_a(e,n));else{var l=pj(a,e,i);o=Math.floor(_a(e,l))}for(var u=s-o,c=Math.ceil(u/t),f=[],h=o;h<s+c;h=h+c)f.push(Math.pow(e,h));return n<=0&&f.unshift(0),f}function bj(r,e,t){if(t===void 0&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var n=t<0?0:Math.round(t);if(n===0)return{max:e,min:r,ticks:[]};var i=1.5,a=.5+1.5*i,o=e-r,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(e/u),f=Math.floor(r/u),h=Math.max(c*u,e),d=Math.min(f*u,r),v=Math.floor((h-d)/u)+1,p=new Array(v),g=0;g<v;g++)p[g]=Ru(d+g*u);return{min:d,max:h,ticks:p}}function g3e(r){var e=r.exponent,t=r.tickCount,n=Math.ceil(Cl(e,r.max)),i=Math.floor(Cl(e,r.min)),a=bj(i,n,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function m3e(r,e){var t=r.length*e;return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function y3e(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var n=t.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(m3e(n,o))}return i}function b3e(r){var e=r.min,t=r.max,n=r.tickCount,i=r.tickInterval,a=r.minLimit,o=r.maxLimit,s=bj(e,t,n).ticks;return!Dt(a)||!Dt(o)?rC(r,Vo(s),La(s)):i?tC(e,t,i).ticks:s}function w3e(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickInterval,a=r.tickCount;if(i)a=Math.ceil((t-e)/i);else{i=HRe(e,t,a)[1];var o=(t-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);for(var l=[],u=e;u<t+i;u+=i)l.push(u);return l}function x3e(r){var e=yj(V({showLast:!0},r));return e}function ty(r){return new Date(r).getFullYear()}function S3e(r){return new Date(r,0,1).getTime()}function p_(r){return new Date(r).getMonth()}function _3e(r,e){var t=ty(r),n=ty(e),i=p_(r),a=p_(e);return(n-t)*12+(a-i)%12}function E3e(r,e){return new Date(r,e,1).getTime()}function M3e(r,e){return Math.ceil((e-r)/Is)}function C3e(r,e){return Math.ceil((e-r)/rc)}function A3e(r,e){return Math.ceil((e-r)/(60*1e3))}function T3e(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickCount,a=r.tickInterval,o=[];a||(a=(t-e)/i,n&&a<n&&(a=n)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=ty(e);if(a>bD)for(var l=ty(t),u=Math.ceil(a/bD),c=s;c<=l+u;c=c+u)o.push(S3e(c));else if(a>Ud)for(var f=Math.ceil(a/Ud),h=p_(e),d=_3e(e,t),c=0;c<=d+f;c=c+f)o.push(E3e(s,c+h));else if(a>Is)for(var v=new Date(e),p=v.getFullYear(),g=v.getMonth(),m=v.getDate(),y=Math.ceil(a/Is),w=M3e(e,t),c=0;c<w+y;c=c+y)o.push(new Date(p,g,m+c).getTime());else if(a>rc)for(var v=new Date(e),p=v.getFullYear(),g=v.getMonth(),y=v.getDate(),b=v.getHours(),x=Math.ceil(a/rc),S=C3e(e,t),c=0;c<=S+x;c=c+x)o.push(new Date(p,g,y,b+c).getTime());else if(a>tc)for(var _=A3e(e,t),M=Math.ceil(a/tc),c=0;c<=_+M;c=c+M)o.push(e+c*tc);else{var A=a;A<qa&&(A=qa);for(var E=Math.floor(e/qa)*qa,T=Math.ceil((t-e)/qa),C=Math.ceil(A/qa),c=0;c<T+C;c=c+C)o.push(E+c*qa)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}ss("cat",yj);ss("time-cat",x3e);ss("wilkinson-extended",v3e);ss("r-pretty",b3e);ss("time",w3e);ss("time-pretty",T3e);ss("log",p3e);ss("pow",g3e);ss("quantile",y3e);ss("d3-linear",r3e);ls("cat",mp);ls("category",mp);ls("identity",QRe);ls("linear",yp);ls("log",YRe);ls("pow",XRe);ls("time",KRe);ls("timeCat",VRe);ls("quantize",gj);ls("quantile",qRe);var k3e=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};function L3e(r){return sc(r,function(e,t){var n=t===0?"M":"L",i=e[0],a=e[1];return[n,i,a]})}function wj(r){return L3e(r)}function I3e(r){if(r.length<=2)return wj(r);var e=[];Pe(r,function(o){Gl(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=sB(e,!1),n=Vo(r),i=n[0],a=n[1];return t.unshift(["M",i,a]),t}function O3e(r,e,t,n){n===void 0&&(n=!0);var i=new yp({values:r}),a=new mp({values:sc(r,function(s,l){return l})}),o=sc(r,function(s,l){return[a.scale(l)*e,t-i.scale(s)*t]});return n?I3e(o):wj(o)}function N3e(r,e,t,n){n===void 0&&(n=5);for(var i=new yp({values:r}),a=new mp({values:sc(r,function(h,d){return d})}),o=sc(r,function(h,d){return[a.scale(d)*e,t-i.scale(h)*t]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:t,size:n},f=R3e(c);s.push.apply(s,f)}return P3e(s)}function $3e(r,e){var t=new yp({values:r}),n=Math.max(0,t.min);return e-t.scale(n)*e}function D3e(r,e,t,n){var i=k3e([],r,!0),a=$3e(n,t);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}function R3e(r){var e=r.x,t=r.y,n=r.y0,i=r.size,a,o;Bt(t)?(a=t[0],o=t[1]):(a=n,o=t);var s,l;Bt(e)?(s=e[0],l=e[1]):(s=e-i/2,l=e+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function P3e(r,e){e===void 0&&(e=!0);var t=[],n=r[0];t.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)t.push(["L",r[i].x,r[i].y]);return e&&(t.push(["L",n.x,n.y]),t.push(["z"])),t}var Wd=function(){return Wd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Wd.apply(this,arguments)},F3e={stroke:"#C5C5C5",strokeOpacity:.85},B3e={fill:"#CACED4",opacity:.85},z3e=function(){function r(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?200:o,l=e.height,u=l===void 0?26:l,c=e.smooth,f=c===void 0?!0:c,h=e.isArea,d=h===void 0?!1:h,v=e.data,p=v===void 0?[]:v,g=e.lineStyle,m=e.areaStyle,y=e.group,w=e.interval,b=w===void 0?null:w;this.group=y,this.x=n,this.y=a,this.width=s,this.height=u,this.data=p,this.smooth=f,this.isArea=d,this.lineStyle=Object.assign({},F3e,g),this.areaStyle=Object.assign({},B3e,m),this.intervalConfig=b,this.renderLine()}return r.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,i=e.width,a=e.height;e.barWidth;var o=e.data,s=e.smooth,l=e.isArea,u=e.lineStyle,c=e.areaStyle,f=this.group.addGroup({name:"trend-group"});if(o){var h=O3e(o,i,a,s);if(f.addShape("path",{attrs:Wd({path:h},u),name:"trend-line"}),l){var d=D3e(h,i,a,o);f.addShape("path",{attrs:Wd({path:d},c),name:"trend-area"})}}this.intervalConfig&&f.addShape("path",{attrs:Wd({path:N3e(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),f.move(t,n)},r.prototype.destory=function(){this.group.destroy()},r}(),vf=function(){return vf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},vf.apply(this,arguments)},G3e={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},j3e={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},MD=function(){function r(e){var t=e.group,n=e.name,i=e.type,a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s,u=e.width,c=u===void 0?2:u,f=e.height,h=f===void 0?24:f,d=e.style,v=d===void 0?{}:d;this.group=t,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=h,i==="trend"?this.style=vf(vf({},G3e),v):i==="simple"&&(this.style=vf(vf({},j3e),v)),this.renderHandle()}return r.prototype.setX=function(e){this.setXY(e,void 0)},r.prototype.setY=function(e){this.setXY(void 0,e)},r.prototype.setXY=function(e,t){Rt(e)&&(this.x=e),Rt(t)&&(this.y=t),this.updateXY()},r.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,i=e.style,a=e.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.topCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.topCircle.attr("fill",n)})},r.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}(),Xr=function(){return Xr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Xr.apply(this,arguments)},U3e=Pa,W3e={fill:"#416180",opacity:.05},H3e={fill:"#416180",opacity:.15,radius:5},V3e={fill:"#5B8FF9",opacity:.3,cursor:"grab"},g_=2,Y3e={width:g_,height:24},X3e={textBaseline:"middle",fill:"#000",opacity:.45},K3e={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},q3e={lineWidth:1,stroke:"#ccc"},Z3e=function(){function r(e){var t=this;this.prevX=0,this.onMouseDown=function(B){return function(j){t.currentHandler=B;var G=j.originalEvent;G.stopPropagation(),G.preventDefault(),t.prevX=Ms(G,"touches.0.pageX",G.pageX);var z=t.canvas.get("container");z.addEventListener("mousemove",t.onMouseMove),z.addEventListener("mouseup",t.onMouseUp),z.addEventListener("mouseleave",t.onMouseUp),z.addEventListener("touchmove",t.onMouseMove),z.addEventListener("touchend",t.onMouseUp),z.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(B){B.stopPropagation(),B.preventDefault();var j=Ms(B,"touches.0.pageX",B.pageX),G=j-t.prevX,z=t.adjustOffsetRange(G/t.width);t.updateStartEnd(z),t.updateUI(),t.prevX=j},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var B=t.canvas.get("container");B&&(B.removeEventListener("mousemove",t.onMouseMove),B.removeEventListener("mouseup",t.onMouseUp),B.removeEventListener("mouseleave",t.onMouseUp),B.removeEventListener("touchmove",t.onMouseMove),B.removeEventListener("touchend",t.onMouseUp),B.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=s===void 0?100:s,u=e.height,c=e.padding,f=c===void 0?10:c,h=e.trendCfg,d=e.controllerCfg,v=d===void 0?{speed:1}:d,p=e.backgroundStyle,g=p===void 0?{}:p,m=e.foregroundStyle,y=m===void 0?{}:m,w=e.handlerStyle,b=w===void 0?{}:w,x=e.textStyle,S=x===void 0?{}:x,_=e.start,M=_===void 0?0:_,A=e.end,E=A===void 0?1:A,T=e.minText,C=T===void 0?"":T,k=e.maxText,L=k===void 0?"":k,I=e.group,O=e.graph,N=e.canvas,D=e.tick,$=D===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(j){return j},ticks:[]}:D,R=e.type;this.graph=O,this.canvas=N,this.group=I,this.timeBarType=R,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=$.ticks,this.trendCfg=h,this.controllerCfg=v,this.currentSpeed=v.speed||1,this.tickLabelFormatter=$.tickLabelFormatter,R==="trend"?this.backgroundStyle=Xr(Xr({},W3e),g):R==="simple"&&(this.backgroundStyle=Xr(Xr({},H3e),g)),this.foregroundStyle=Xr(Xr({},V3e),y),this.handlerStyle=Xr(Xr({},Y3e),b),this.textStyle=Xr(Xr({},X3e),S),this.tickLabelStyle=Xr(Xr({},K3e),$.tickLabelStyle),this.tickLineStyle=Xr(Xr({},q3e),$.tickLineStyle),this.currentMode=v.defaultTimeType||Io.RANGE,this.start=M,this.end=E,this.minText=C,this.maxText=L,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(e){var t=e.x,n=e.y,i=e.width,a=e.height,o=e.minText,s=e.maxText,l=e.start,u=e.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),Gt(this,{x:t,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},r.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},r.prototype.renderSlider=function(){var e=this,t=this,n=t.width,i=t.height,a=t.timeBarType;if(a==="trend"&&Iy(Ms(this.trendCfg,"data"))){var o=new z3e(Xr(Xr({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Xr({x:0,y:0,width:n,height:i},this.backgroundStyle),name:"background"});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:Xr({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:Xr({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=l.addShape("text",{attrs:Xr({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:Xr({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Xr({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=Ms(this.handlerStyle,"width",2),c=Ms(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new MD({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new MD({name:"maxHandlerShape",group:h,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.ticks,v=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var p=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map(function(m,y){e.tickPosList.push(e.x+y*v);var w;e.tickLabelFormatter?(w=e.tickLabelFormatter(m),!rt(w)&&w&&(w=m.date)):w=m.date;var b=e.x+y*v,x=e.y+i+5,S=e.group.addShape("text",{attrs:Xr({x:b,y:x,text:w,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(Rt(g)&&y!==d.length-1){var _=U3e([1,0,0,0,1,0,0,0,1],[["t",-b,-x],["r",g],["t",b-5,x+2]]);S.attr({textAlign:"left",matrix:_})}y===0?S.attr({textAlign:"left"}):y!==d.length-1&&S.attr({textAlign:"right"});var M=e.group.addShape("line",{attrs:Xr({x1:e.x+y*v,y1:e.y+i+2,x2:e.x+y*v,y2:e.y+i+6},e.tickLineStyle),name:"tick-line"});M.toBack();var A=S.getBBox();return A.minX>p?(S.show(),M.show(),p=A.minX+A.width+10):(S.hide(),M.hide()),S}),this.controllerBtnGroup=new rj(Xr({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Io.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},r.prototype.bindEvents=function(){var e=this,t=this.group.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat($l,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Lv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Iv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(ec,function(i){var a=i.type,o=i.speed;e.currentSpeed=o,e.currentMode=a,a===Io.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Io.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},r.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},r.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,n=1-this.end;return Math.min(n,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,n=1-this.end;return Math.min(n,Math.max(t,e))}default:return 0}},r.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n==null?void 0:n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},r.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var i=Ms(this.handlerStyle,"width",g_);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,n]),o=a[0],s=a[1];this.minHandlerShape.setX(t-i/2),Pe(o,function(l,u){return e.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),Pe(s,function(l,u){return e.maxTextShape.attr(u,l)}),this.currentMode===Io.RANGE?this.graph.emit($o,{value:[this.start,this.end].sort()}):this.currentMode===Io.SINGLE&&this.graph.emit($o,{value:[this.end,this.end]})},r.prototype.dodgeText=function(e){var t,n,i=2,a=Ms(this.handlerStyle,"width",g_),o=this.minTextShape,s=this.maxTextShape,l=e[0],u=e[1],c=!1;l>u&&(t=[u,l],l=t[0],u=t[1],n=[s,o],o=n[0],s=n[1],c=!0);var f=o.getBBox(),h=s.getBBox(),d=null,v=null;return this.timeBarType==="trend"?(d=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},v=u+h.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(d=o.attr("x")>f.width?{x:l,textAlign:"center"}:{x:l,textAlign:"left"},v=s.attr("x")>this.width-h.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),c?[v,d]:[d,v]},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e,n=t.ticks,i=t.width,a=e.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=e.adjustOffsetRange(s/e.width);e.updateStartEnd(l),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(QG,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(JG,null))},r.prototype.destory=function(){this.graph.off($o,function(){});var e=this.group,t=e.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat($l,":click")),e.off("".concat(Lv,":click")),e.off("".concat(Iv,":click")),e.off(ec),e.destroy(),this.trendComponent&&this.trendComponent.destory()},r}(),Q3e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cs=function(){return Cs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cs.apply(this,arguments)},J3e=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},ePe=4,tPe=26,rPe=function(r){Q3e(e,r);function e(t){var n=r.call(this,t)||this;return n.afterrenderListener=function(i){return n.filterData({})},n.valueChangeListener=uv(function(i){return n.filterData(i)},200,{trailing:!0,leading:!0}),n.changeData=function(i){var a=n.get("graph");n.cacheGraphData=a.get("data"),n.filterData({})},n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=n.putInGraphContainer,s=this.get("className")||"g6-component-timebar",l=this.get("container"),u;if(l?(rt(l)&&(l=document.getElementById(l)),u=l):(u=Zr("<div class='".concat(s,"'></div>")),mr(u,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(u)}this.set("timeBarContainer",u);var f,h=t.get("renderer");h==="SVG"?f=new Dd({container:u,width:i,height:a}):f=new Ts({container:u,width:i,height:a}),this.get("containerCSS")&&mr(u,this.get("containerCSS")),this.set("canvas",f)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),n=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var n=this.get("timebar");n&&(n.isPlay=!!t,n.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,n=this._cfgs,i=n.width,a=n.x,o=n.y,s=n.padding,l=n.type,u=n.trend,c=n.slider,f=n.controllerCfg,h=n.textStyle,d=n.tick,v=n.backgroundStyle,p=n.foregroundStyle,g=u.data,m=J3e(u,["data"]),y=i-2*s,w=l==="trend"?tPe:ePe,b=this.get("graph"),x=this.get("timeBarGroup"),S=this.get("canvas"),_=null;if(l==="trend"||l==="simple"){var M=this.get("getValue");_=new Z3e(Cs(Cs({graph:b,canvas:S,group:x,type:l,x:a+s,y:l==="trend"?o+s:o+s+15,width:y,height:w,padding:s,backgroundStyle:v,foregroundStyle:p,trendCfg:Cs(Cs({},m),{data:g.map(function(E){return(M==null?void 0:M(E))||E.value})})},c),{tick:{ticks:g,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:Cs(Cs({},c.handlerStyle),{height:c.height||w}),controllerCfg:f,textStyle:h}))}else l==="tick"&&(_=new DRe(Cs({graph:b,canvas:S,group:x,x:a+s,y:o+s,width:i,height:42,padding:2,controllerCfg:f},d)));var A=function E(){var T=t.get("timebar");T.draggingHandler=!1,T.isPlay&&(T.isPlay=!1,T.currentHandler=T.maxHandlerShape,T.changePlayStatus()),document.removeEventListener("mouseup",E)};S.on("mousedown",function(E){(E.target.get("name")==="maxHandlerShape-handler"||E.target.get("name")==="minHandlerShape-handler"||E.target===_.foregroundShape)&&document.addEventListener("mouseup",A)}),this.set("timebar",_)},e.prototype.filterData=function(t){var n,i=t.value;if(!i){i=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end):a==="tick"&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("请配置 TimeBar 组件的数据");return}var l=this.get("rangeChange"),u=this.get("graph"),c=Math.round(o.length*i[0]),f=Math.round(o.length*i[1]);f=f>=o.length?o.length-1:f,c=c>=o.length?o.length-1:c;var h=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=h?h(o[c]):o[c].date,v=h?h(o[f]):o[f].date;if(s!=="tick"){var p=this.get("timebar");p.setText(d,v)}if(l)l(u,d,v);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=u.get("data"));var g=this.get("filterItemTypes"),m=this.get("changeData"),y=this.get("getDate"),w=this.get("shouldIgnore"),b=o[c].date,x=o[f].date;if(m||m===void 0){var S=this.cacheGraphData.nodes,_=this.cacheGraphData.edges,M={},A={};u.getNodes().forEach(function(E){return M[E.getID()]=!0}),u.getEdges().forEach(function(E){return A[E.getID()]=!0}),g.includes("node")&&(S==null||S.forEach(function(E){var T=+((y==null?void 0:y(E))||E.date),C=T>=b&&T<=x||(w==null?void 0:w("node",E,{min:b,max:x})),k=M[E.id];k&&!C?(u.removeItem(E.id),M[E.id]=!1):!k&&C&&(u.addItem("node",E),M[E.id]=!0)}),_==null||_.forEach(function(E){var T=M[E.source]&&M[E.target]||(w==null?void 0:w("edge",E,{min:b,max:x})),C=!!u.findById(E.id);C&&!T?(u.removeItem(E.id),A[E.id]=!1):!C&&T?(u.addItem("edge",E),A[E.id]=!0):C||(A[E.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(_==null||_.filter(function(E){var T=+((y==null?void 0:y(E))||E.date),C=T>=b&&T<=x||(w==null?void 0:w("edge",E,{min:b,max:x})),k=M[E.source]&&M[E.target],L=C&&k,I=A[E.id];I&&!L?(A[E.id]=!1,u.removeItem(E.id)):!I&&L&&(A[E.id]=!0,u.addItem("edge",E))}))}else g.includes("node")&&u.getNodes().forEach(function(E){var T=E.getModel();if(!(w!=null&&w("node",T,{min:b,max:x}))){var C=+((y==null?void 0:y(T))||T.date);C<b||C>x?u.hideItem(E):u.showItem(E)}}),(this.get("filterEdge")||g.includes("edge"))&&u.getEdges().forEach(function(E){var T=E.getModel();if(!(w!=null&&w("edge",T,{min:o[c].date,max:o[f].date}))){var C=+((y==null?void 0:y(T))||T.date);if(C<o[c].date||C>o[f].date)u.hideItem(E);else{var k=E.getSource().isVisible(),L=E.getTarget().isVisible();k&&L&&u.showItem(E)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on($o,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off($o,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),r.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var a=this.get("container");a||(a=this.get("graph").get("container")),rt(a)&&(a=document.getElementById(a)),a===i&&(a=a.parentElement),a.removeChild(i)}},e}(Ui),nPe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iPe=hi.applyMatrix;function aPe(r,e){var t,n;if(r.naturalWidth)t=r.naturalWidth,n=r.naturalHeight;else{var i=new Image;i.src=r.src,i.onload=function(){}}return[t,n]}var oPe=function(r){nPe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");rt(a)&&(a=document.getElementById(a));var o=Zr("<div class=".concat(n.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,l=0,u=!1,c=0,f=0,h=0,d=0,v=0,p=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;h=parseInt(m.width,10),d=parseInt(m.height,10);var y=t.get("width"),w=t.get("height");h>y||d>w||(p=i.getZoom(),v=t.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||Dt(g.clientX)||Dt(g.clientY))){var m=t.get("width"),y=t.get("height"),w=o.style;c=parseInt(w.left,10),f=parseInt(w.top,10),h=parseInt(w.width,10),d=parseInt(w.height,10);var b=s-g.clientX,x=l-g.clientY;c-b<0?b=c:c-b+h>=m&&(b=0),f-x<0?x=f:f-x+d>=y&&(x=0),c-=b,f-=x,mr(o,{left:"".concat(c,"px"),top:"".concat(f,"px")}),i.translate(b*p/v,x*p/v),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(d.width=h[0],d.height=d.width/l):(d.height=h[1],d.width=d.height*l),d.minX=f[0]-d.width/2,d.minY=f[1]-d.height/2;var v=u.getMatrix();v||(v=[1,0,0,0,1,0,0,0,1]);var p=HE([1,0,0,0,1,0,0,0,1],v),g=iPe({x:d.minX,y:d.minY},p),m=a.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var w=o/d.width,b=w*n,x=w*i,S=n*-m.x/d.width,_=i*-m.y/d.height,M=S+b,A=_+x;S<0&&(b+=S,S=0),M>n&&(b=b-(M-n)),_<0&&(x+=_,_=0),A>i&&(x=x-(A-i)),this.set("ratio",t);var E="".concat(S,"px"),T="".concat(_,"px");mr(y,{left:E,top:T,width:"".concat(b,"px"),height:"".concat(x,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=t.get("className"),l=t.get("container"),u=t.get("width"),c=t.get("height");!u&&!c&&(u=200),u?(c=o*u,t.set("height",c)):(u=1/o*c,t.set("width",u));var f=Zr("<div class='".concat(s,"' style='width: ").concat(u,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));rt(l)&&(l=document.getElementById(l)),l?l.appendChild(f):n.get("container").appendChild(f),t.set("container",f);var h=Zr('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(h);var d=Zr('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),t.set("containerDOM",h),t.set("containerSpan",d);var v=Zr('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",v),t.updateImgSize(),d.appendChild(v),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,n=t.get("imgDOM"),i=t.get("width"),a=t.get("height");n.onload=function(){var o=aPe(n);o[0]>o[1]?n.width=i:n.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",t);var a=Zr('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",a),a.src=t,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Ui),sPe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),m_=function(){return m_=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},m_.apply(this,arguments)},lPe=hi.distance,CD=.05,AD={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},uPe=function(r){sPe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:br(AD),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,n=t.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";t.set("showNodeLabel",i),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(t),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(t.clientX,t.clientY),t.originalEvent.wheelDelta<0?a=1-CD:a=1/(1-CD);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||i.get("height"))&&a>1||c<(u||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.filter(t)}},e.prototype.filter=function(t){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:t.x,y:t.y};n.updateDelegate(u,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(m){m.remove(),m.destroy()}),f=[],a.forEach(function(m){var y=m.getModel(),w=y.x,b=y.y;lPe({x:w,y:b},u)<s&&(o[y.id]=m)});var h=i.getEdges(),d=[];h.forEach(function(m){var y=m.getModel(),w=y.source,b=y.target;c(y)&&(l==="only-source"||l==="one"?o[w]&&!o[b]&&d.push(m):l==="only-target"||l==="one"?o[b]&&!o[w]&&d.push(m):l==="both"&&o[w]&&o[b]&&d.push(m))});var v=n.get("showNodeLabel"),p=n.get("showEdgelabel"),g=i.get("group");d.forEach(function(m){var y=m.get("group").get("children");y.forEach(function(w){var b=w.get("type"),x=g.addShape(b,{attrs:w.attr()});f.push(x),v&&b==="text"&&x.set("visible",!0)})}),Object.keys(o).forEach(function(m){var y=o[m],w=y.get("group").clone();if(g.add(w),f.push(w),p)for(var b=w.get("children"),x=0;x<b.length;x++){var S=b[x];S.get("type")==="text"&&S.set("visible",!0)}}),n.set("vShapes",f)},e.prototype.updateParams=function(t){var n=this,i=t.r,a=t.trigger,o=t.minR,s=t.maxR,l=t.scaleRBy,u=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},e.prototype.updateDelegate=function(t,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||AD;o=s.addShape("circle",{attrs:m_({r:n,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r:n});i.set("delegate",o)},e.prototype.clear=function(){var t=this,n=t.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],t.set("vShapes",n);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Ui),cPe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fPe=hi.pointLineDistance,hPe={stroke:"#FA8C16",lineWidth:1},dPe=function(r){cPe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:hPe,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var n=t.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(n["".concat(c,"tltr")]=[u.minX,u.minY,u.maxX,u.minY,l],n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l],n["".concat(c,"blbr")]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i["".concat(c,"tlbl")]=[u.minX,u.minY,u.minX,u.maxY,l],i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l],i["".concat(c,"trbr")]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},e.prototype.show=function(t,n){var i=Gt({},t);return this.itemAlign(t,n,i),t},e.prototype.itemAlign=function(t,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x+n.width/2,y:i.y+n.height},d={x:i.x,y:i.y+n.height/2},v={x:i.x+n.width,y:i.y+n.height/2},p=[],g=[],m=null;if(this.clearAlignLine(),Pe(s,function(w){w[4].isVisible&&(p.push(a.getLineDisObject(w,c)),p.push(a.getLineDisObject(w,f)),p.push(a.getLineDisObject(w,h)))}),Pe(l,function(w){w[4].isVisible&&(g.push(a.getLineDisObject(w,d)),g.push(a.getLineDisObject(w,f)),g.push(a.getLineDisObject(w,v)))}),p.sort(function(w,b){return w.dis-b.dis}),g.sort(function(w,b){return w.dis-b.dis}),p.length!==0&&p[0].dis<u){t.y=p[0].line[1]-p[0].point.y+i.y,m={type:"item",horizontals:[p[0]]};for(var y=1;y<3;y++)p[0].dis===p[y].dis&&m.horizontals.push(p[y])}if(g.length!==0&&g[0].dis<u){t.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.verticals.push(g[y])}m&&(m.bbox=n,this.addAlignLine(m))},e.prototype.addAlignLine=function(t){var n=t.bbox,i=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&Pe(a,function(h){var d=h.line,v=h.point,p=(d[0]+d[2])/2,g,m;v.x<p?(g=v.x-n.width/2,m=Math.max(d[0],d[2])):(g=v.x+n.width/2,m=Math.min(d[0],d[2]));var y=Gt({x1:g,y1:d[1],x2:m,y2:d[1]},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}),o&&Pe(o,function(h){var d=h.line,v=h.point,p=(d[1]+d[3])/2,g,m;v.y<p?(g=v.y-n.height/2,m=Math.max(d[1],d[3])):(g=v.y+n.height/2,m=Math.min(d[1],d[3]));var y=Gt({x1:d[0],y1:g,x2:d[0],y2:m},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}))},e.prototype.getLineDisObject=function(t,n){return{line:t,point:n,dis:fPe(t,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;Pe(t,function(n){n.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n["".concat(l,"tltr")],delete n["".concat(l,"lcrc")],delete n["".concat(l,"blbr")],delete i["".concat(l,"tlbl")],delete i["".concat(l,"tcbc")],delete i["".concat(l,"trbr")]}),this.clearAlignLine()},e}(Ui),vPe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),an=function(){return an=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},an.apply(this,arguments)},pPe=["click","mouseenter"],gPe=function(r){vPe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},n=t.multiple;n&&t.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=Zr(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();mr(l,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,h={left:(i.getWidth()-t[0])/2+c,top:(i.getHeight()-t[1])/2+f};return l.forEach(function(d){var v=s[u[d]],p=d;switch(d){case"top":v+=f;break;case"left":v+=c;break;case"bottom":v=i.getHeight()-t[1]-v+f,p="top";break;default:v=i.getWidth()-t[0]-v+c,p="left";break}h[p]=v}),h.top+=o+i.getContainer().offsetTop,h.left+=a+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]="".concat(h[d],"px")}),h},e.prototype.bindEvents=function(){var t=this,n=t.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";pPe.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=t.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var n=this.render();mr(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(t){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var h=f.get("children"),d=h[0],v=h[1];d.attr(an(an({},d.get("oriAttrs")),s)),v.attr(an(an({},v.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var h=f.get("children"),d=h[0],v=h[1];d.attr(an(an({},d.get("oriAttrs")),u)),v.attr(an(an({},v.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(t)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(t)===i}):o.get("children").filter(function(l){return!!l.get(t)===i}).concat(s.get("children").filter(function(l){return!!l.get(t)===i}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),n=t.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(t){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(m){return m.get("name")==="root"}),f=c.find(function(m){return m.get("name")==="node-group"}),h=c.find(function(m){return m.get("name")==="edge-group"}),d=f.get("children").filter(function(m){return m.get("active")}),v=h.get("children").filter(function(m){return m.get("active")}),p=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(y){var w=!1,b=m==="getNodes"?d:v;b.forEach(function(x){var S=i[x.get("id")];w=w||S(y.getModel())}),w?(o.setItemState(y,l,!1),o.setItemState(y,s,!0),p++):(o.setItemState(y,s,!1),o.setItemState(y,l,!0))})}),p||g.forEach(function(m){o[m]().forEach(function(y){o.clearItemStates(y,[l])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),n=this.get("filter");if(n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[i,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[i,a])})}},e.prototype.render=function(){var t=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new Ts({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"}),a=i.addGroup({name:"node-group"}),o=i.addGroup({name:"edge-group"});this.set("legendCanvas",n);var s=this.get("itemsData"),l=["nodes","edges"],u=[a,o];l.forEach(function(O,N){s[O].forEach(function(D){var $,R=u[N].addGroup({id:D.id,name:"node-container"}),B,j=D.type,G=t.getShapeSize(D),z=G.width,W=G.height,Q=G.r,ie=t.getStyle(O.substr(0,4),D);switch(D.type){case"circle":B={r:Q,x:0,y:0};break;case"rect":B={width:z,height:W,x:-z/2,y:-W/2};break;case"ellipse":B={rx:z,ry:W,x:0,y:0},j="ellipse";break;case"line":B={x1:-z/2,y1:0,x2:z/2,y2:0},j="line";break;case"quadratic":B={path:[["M",-z/2,0],["Q",0,z/2,z/2,0]]},j="path";break;case"cubic":B={path:[["M",-z/2,0],["C",-z/6,z/2,z/6,-z/2,z/2,0]]},j="path";break;case"diamond":B={path:[["M",0,-W],["L",z,0],["L",0,W],["L",-z,0],["Z"]]},j="path";break;case"triangle":B={path:[["M",-z,W],["L",0,-W],["L",z,W],["Z"]]},j="path";break;case"star":B={path:hi.getStarPath(Q*3,Q*1.2)},j="path";break;default:B={r:Q,x:0,y:0};break}var se=R.addShape(j,{attrs:an(an({},B),ie),name:"".concat(D.type,"-node-keyShape"),oriAttrs:an({opacity:1},ie)});if(D.label){var ae=se.getBBox(),pe=(($=D.labelCfg)===null||$===void 0?void 0:$.style)||{},De=an({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},pe);R.addShape("text",{attrs:an({x:ae.maxX+4,y:0,text:D.label},De),className:"legend-label",name:"".concat(D.type,"-node-text"),oriAttrs:De})}})});var c=this.get("padding"),f,h=i.find(function(O){return O.get("name")==="title-container"}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var v={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},p=this.get("titleConfig")||{},g=Object.assign(v,p.style||{});f=h.addShape("text",{attrs:an({text:this.get("title")},g)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,p.offsetX,p.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),y=a.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=d.maxY<y.minY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1];a.setMatrix(x),m=i.getCanvasBBox();var S=[m.minX+m.width+c[1],m.minY+m.height+c[2]];if(f){var p=an({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=h.getCanvasBBox();var _=h.getMatrix()||[1,0,0,0,1,0,0,0,1];p.position==="center"?_[6]=S[0]/2+p.offsetX:p.position==="right"?(_[6]=S[0]-c[3]+p.offsetX,f.attr({textAlign:"right"})):(_[6]=c[3]+p.offsetX,f.attr({textAlign:"left"})),h.setMatrix(_),d=h.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=y.minY<d.maxY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1],a.setMatrix(x);var M=[1,0,0,0,1,0,w,b,1];this.get("layout")==="vertical"?M[6]+=y.maxX+this.get("horiSep"):M[7]+=y.maxY+this.get("vertiSep"),o.setMatrix(M)}else{y=a.getCanvasBBox();var A=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?A[6]+=x[6]+y.maxX+this.get("horiSep"):A[7]+=x[7]+y.maxY+this.get("vertiSep"),o.setMatrix(A)}m=i.getCanvasBBox(),y=a.getCanvasBBox(),x=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=o.getMatrix()||[1,0,0,0,1,0,0,0,1],T=o.getCanvasBBox();S=[Math.max(y.width+x[6],T.width+E[6])+c[1],Math.max(y.height+x[7],T.height+E[7])+c[2]],n.changeSize(S[0],S[1]);var C=this.get("containerStyle"),k=i.getMatrix()||[1,0,0,0,1,0,0,0,1],L=hi.invertMatrix({x:0,y:0},k),I=i.addShape("rect",{attrs:an({x:L.x+(C.lineWidth||1),y:L.y+(C.lineWidth||1),width:S[0]-2*(C.lineWidth||1),height:S[1]-2*(C.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},C),name:"legend-back-rect",capture:!1});return I.toBack(),S},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=t.find(function(w){return w.get("name")==="root"}),u=l.find(function(w){return w.get("name")==="node-group"}),c=l.find(function(w){return w.get("name")==="edge-group"}),f={min:0,max:-1/0};u.get("children").forEach(function(w,b){b===0&&(f.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),_=x.getBBox(),M=_.width,A=_.height,E=0,T=0;a==="vertical"?(E=s[1],T=s[0]+M/2,s[0]=T+S.height+i,S.maxX+E+M/2):(E=s[0]+M/2,T=s[1],s[0]=E+S.width+n,S.maxY+T+A/2),s[0]>f.max&&(f.max=s[0]),w.setMatrix([1,0,0,0,1,0,E,T,1])});var h=f.max-f.min,d={min:0,max:-1/0},v=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?v.maxX+n:v.maxY+i,c.get("children").forEach(function(w,b){b===0&&(d.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),_=x.getBBox(),M=_.width,A=_.height,E=0,T=0;a==="vertical"?(E=s[1],T=s[0],s[0]=T+S.height+i,w.setMatrix([1,0,0,0,1,0,0,T+A/2,1])):(E=s[0],T=s[1],s[0]=E+S.width+n,w.setMatrix([1,0,0,0,1,0,E+M/2,0,1])),s[0]>d.max&&(d.max=s[0])});var p=d.max-d.min;if(o&&o!==""&&o!=="left"){var g=h-p,m=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:c;y.get("children").forEach(function(w){var b=w.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?b[7]+=m:b[6]+=m,w.setMatrix(b)})}},e.prototype.processData=function(){var t=this.get("data"),n={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(i,a){return i.order-a.order}),t.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||es(),type:i.type||"circle",style:an({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:an({fontFamily:"Arial"},f)}})})),t.edges&&(t.edges.sort(function(i,a){return i.order-a.order}),t.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||es(),type:s,size:u,style:an({lineWidth:Bt(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:an({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var n=this.get(t);if(Rt(n))this.set(t,[n,n,n,n]);else if(Bt(n))switch(n.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(t,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(t,[n[0],n[1],n[2],n[1]]);break}return this.get(t)},e.prototype.getShapeSize=function(t){var n,i,a;return t.size&&(Bt(t.size)?(n=t.size[0],i=t.size[1]||t.size[0],a=t.size[0]/2):Rt(t.size)&&(n=t.size,i=t.size,a=t.size/2)),t.style&&(t.style.width&&(n=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},e.prototype.getStyle=function(t,n){var i=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return an(an({},i),n.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var n=this.get("graph"),i=n.get("container"),a=this.get("container");i.removeChild(a)},e}(Ui),mPe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wa=function(){return wa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wa.apply(this,arguments)},TD=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};typeof document<"u"&&C1(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var kD="canvas-annotation",yPe=function(r){mPe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=wa(wa({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var n=t.collapsed,i=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,l=s===void 0?"":s,u=t.borderRadius,c=u===void 0?5:u,f=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",h=n?"":" <p class='g6-annotation-content'>".concat(l,"</p>"),d="<p class='g6-annotation-close'>x</p>",v=n?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(i,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(v,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(f,`
          `).concat(d,`
        </div>
        `).concat(h,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var n=t.get("graph"),i=n.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),i.appendChild(a)):a=i,this.set("container",a);var s=i.getBoundingClientRect(),l=new Ts({container:i,width:s.right-s.left,height:s.bottom-s.top});mr(l.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",jv(function(){return t.resizeCanvas(t)},100));var u=l.addGroup({id:"annotation-link-group"});t.set("linkGroup",u),t.set("canvas",l),t.get("getTitle")||t.set("getTitle",function(f){var h,d=((h=f==null?void 0:f.getModel)===null||h===void 0?void 0:h.call(f))||{},v=d.label,p=d.id;return v||p||"-"}),t.get("getContent")||t.set("getContent",function(f){var h,d;if(!f)return"-";var v=((h=f.getModel)===null||h===void 0?void 0:h.call(f))||{},p=v.label,g=v.id,m=(d=f.getType)===null||d===void 0?void 0:d.call(f),y=m?"".concat(m,": "):"";return"".concat(y).concat(p||g||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var n=this.get("containerCfg"),i=this.get("graph"),a=i.getContainer(),o=a.getBoundingClientRect(),s=o.left,l=o.right,u=o.top,c=o.bottom,f=c-u,h=l-s,d=n.position,v=d===void 0?"top":d,p=n.offsetX,g=p===void 0?0:p,m=n.offsetY,y=m===void 0?0:m,w=TD(n,["position","offsetX","offsetY"]),b=n.height,x=b===void 0?"fit-content":b,S=n.width,_=S===void 0?i.getWidth():S;x==="100%"&&(x=f),_==="100%"&&(_=h);var M="unset",A="unset",E={};switch(v){case"right":M="".concat(f,"px"),E={top:0,right:0},E.right+=s+g,E.top+=u+y;break;case"bottom":A="".concat(h,"px"),E={bottom:0,left:0},E.left+=s+g,E.bottom+=u+y;break;case"top":A="".concat(h,"px");case"left":M="".concat(f,"px");default:E={top:0,left:0},E.left+=s+g,E.top+=u+y;break}Object.keys(E).forEach(function(C){E[C]="".concat(E[C],"px")});var T=Zr("<div class='".concat(n.className," g6-annotation-container'></div>"));return mr(T,wa(wa({position:"absolute",display:v==="top"||v==="bottom"?"inline-flex":"unset",width:Rt(_)?"".concat(_,"px"):_,height:Rt(x)?"".concat(x,"px"):x,maxHeight:M,maxWidth:A,overflow:"scroll"},E),w)),a.appendChild(T),T.addEventListener("scroll",function(C){t.updateLinks()}),T}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var n=t.get("container").getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top;t.get("canvas").changeSize(i,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var n=t||this,i=n.get("cardInfoMap")||{},a=n.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),l=a.getClientByPoint(o.x,o.y),u=l.x,c=l.y,f=a.getClientByPoint(s.x,s.y),h=f.x,d=f.y;Object.values(i).forEach(function(v){var p=v.card;if(p){var g=p.style,m=Iu(g.left),y=Iu(g.top),w=p.getBoundingClientRect(),b=w.width,x=w.height,S=m,_=y;m+b>h-u&&(S=h-u-b),m<0&&(S=0),y+x>d-c&&(_=d-c-x),y<0&&(_=0),mr(p,{left:"".concat(S,"px"),top:"".concat(_,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var n=t.item;this.toggleAnnotation(n)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var n=t.get("cardInfoMap")||{};Object.keys(n).forEach(function(i){t.hideCard(i)})}},e.prototype.toggleAnnotation=function(t,n){var i,a;n===void 0&&(n={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},l=o.get("graph"),u=o.get("container"),c=o.get("containerCfg"),f=Object.assign({},o.get("cardCfg")||{},n),h=f.minHeight,d=f.minWidth,v=f.width,p=f.height,g=f.collapsed,m=g===void 0?!1:g,y=f.x,w=f.y,b=f.title,x=f.content,S=f.maxTitleLength,_=f.defaultBegin,M=TD(f,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),A=o.get("linkGroup"),E=this.get("rows")||[[]],T=(i=t.isCanvas)===null||i===void 0?void 0:i.call(t),C=T?kD:t.getID(),k=s[C]||{},L=k.card,I=k.link,O=k.x,N=k.y,D=k.title,$=k.content,R=this.get("getTitle"),B=this.get("getContent"),j=this.get("getContentPlaceholder")||function(){return""},G=this.get("getTitlePlaceHolder")||function(){return""},z=j(t),W=G(t),Q=Zr(this.getDOMContent(wa({itemId:C,collapsed:m,title:((a=D||b||(R==null?void 0:R(t)))===null||a===void 0?void 0:a.substr(0,S))||W,content:$||x||(B==null?void 0:B(t))||z},M))),ie=Rt(h)?"".concat(h,"px"):h;mr(Q,{minHeight:m?"unset":ie,minWidth:Rt(d)?"".concat(d,"px"):d,height:p,width:v});var se=!!L;se?(I==null||I.remove(!0),u.replaceChild(Q,L)):u.appendChild(Q);var ae;if(!c){if(ae=u.getBoundingClientRect()||{},y!==void 0&&w!==void 0)O=y,N=w;else if(!se&&!T){var pe=ae.top,De=_||{},Je=De.left,ee=De.right,ne=ee===void 0?16:ee,me=De.top,Fe=me===void 0?8:me,Re=De.bottom,$e=ne,Ke=Fe;isNaN(Je)||($e=u.scrollWidth-Je),isNaN(Re)||(Ke=u.scrollHeight-Re);var at=Rt(d)?d:100;O=u.scrollWidth-Q.scrollWidth-(E.length-1)*at-$e;var Me=E[E.length-1],J=(Me[Me.length-1]||{}).bbox;N=(J==null?void 0:J.bottom)-pe||Ke}mr(Q,{position:"absolute",left:"".concat(O,"px"),top:"".concat(N,"px"),cusor:c?"unset":"move"})}this.bindListener(Q,C);var F=Q.getBoundingClientRect();if(!T){var be=ox(t,F,l,this.get("canvas")),oe=this.get("linkStyle");I=A.addShape("path",{attrs:wa({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:be},oe)})}if(s[C]=wa(wa({},s[C]||{}),{id:C,collapsed:m,card:Q,link:I,x:O,y:N,cardBBox:F,content:$||x,title:D||b,contentPlaceholder:z,titlePlaceholder:W,isCanvas:T}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var X=!isNaN(y)&&!isNaN(w);if(!se&&!T&&!X){var de=ae.bottom,xe=de===void 0?0:de,pe=ae.top;E[E.length-1].push({id:C,bbox:F}),F.top>xe-pe-F.height-16&&E.push([]),this.set("rows",E)}}this.updateCardSize(C);var ke=this.get("onAnnotationChange");ke==null||ke(s[C],se?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=this.get("container"),i=this.get("containerCfg").position,a=n.getBoundingClientRect().width,o=getComputedStyle(n),s=Iu(o.paddingLeft)+Iu(o.paddingRight);a-=s,Object.values(t).forEach(function(l){var u=l.card,c=u.getBoundingClientRect().width;switch(i){case"right":mr(u,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":mr(u,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var n=this.get("graph"),i=this.get("cardInfoMap");if(i){var a=i[t].collapsed,o=n.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),i[t]=wa(wa({},i[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(!(!n||!n[t])){var i=n[t],a=i.card,o=i.link;mr(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(n[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=n[t],a=i.card,o=i.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete n[t];var l=this.get("onAnnotationChange");l(i,"remove")}}},e.prototype.bindListener=function(t,n){var i=this;if(!this.destroyed){t.addEventListener("mousemove",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseEnterIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),t.addEventListener("mouseout",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseLeaveIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),t.addEventListener("mouseenter",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!0)}var d=u[n].link;if(d){var v=i.get("linkHighlightStyle")||{};d.attr(v)}}}),t.addEventListener("mouseleave",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!1)}var d=u[n].link;if(d){var v=i.get("linkHighlightStyle")||{};Object.keys(v).forEach(function(g){d.attr(g,void 0),d.attr(g,void 0)});var p=i.get("linkStyle");d.attr(p)}}}),t.addEventListener("click",function(l){var u=(i.get("cardCfg")||{}).onClickIcon;if(l.target.className==="g6-annotation-collapse"||l.target.className==="g6-annotation-expand"){var c=i.get("cardCfg").collapseType;c==="hide"?i.hideCard(n):i.handleExpandCollapseCard(n),u==null||u(l,n,l.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(l.target.className==="g6-annotation-close"){var f=i.get("cardCfg").closeType;f==="remove"?i.removeCard(n):i.hideCard(n),u==null||u(l,n,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(l){var u=i.get("cardInfoMap"),c=(i.get("cardCfg")||{}).maxTitleLength,f=c===void 0?20:c;if(u){var h=l.target,d=h.className;if(!(d!=="g6-annotation-title"&&d!=="g6-annotation-content")){var v=d==="g6-annotation-title"?h.getBoundingClientRect():h.parentNode.getBoundingClientRect(),p=v.width,g=v.height,m=getComputedStyle(h),y=d==="g6-annotation-title"?"input":"textarea",w=Zr("<".concat(y,' class="').concat(d,'-input" type="textarea" style="width:').concat(p,"px; height: ").concat(g,'px; min-width: 16px;"/>')),b=Zr('<div class="'.concat(d,'-input-wrapper" style="width: ').concat(p,"px; height: ").concat(g,"px; min-width: 16px; margin-right: ").concat(m.marginRight,'" />'));b.appendChild(w),h.parentNode.replaceChild(b,h);var x=u[n],S=x.contentPlaceholder,_=x.titlePlaceholder,M=x.content,A=x.title,E=M;d==="g6-annotation-title"?(w.name="title",w.maxLength=f,E=A):w.name="content",E?(w.innerHTML=h.innerHTML,w.value=h.innerHTML):w.placeholder=d==="g6-annotation-title"?_:S,w.focus(),w.addEventListener("blur",function(T){w.value&&(h.innerHTML=w.value,x[w.name||"title"]=w.value),b.parentNode.replaceChild(h,b),i.updateCardSize(n);var C=i.get("onAnnotationChange");C==null||C(x,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(l){var u=l.target.className;if(!o.includes(u)){var c=t.style;i.set("dragging",{card:t,x:l.clientX,y:l.clientY,left:Iu(c.left),top:Iu(c.top)})}}),t.addEventListener("drag",function(l){l.preventDefault();var u=i.get("cardInfoMap");if(u){var c=l.clientX,f=l.clientY,h=i.get("dragging");if(!(isNaN(c)||isNaN(f)||!h)){var d=h.x,v=h.y,p=h.left,g=h.top,m=h.card,y=c-d,w=f-v;p+=y,g+=w;var b=i.get("graph"),x=b.getPointByCanvas(0,0),S=b.getPointByCanvas(b.getWidth(),b.getHeight()),_=b.getClientByPoint(x.x,x.y),M=_.x,A=_.y,E=b.getClientByPoint(S.x,S.y),T=E.x,C=E.y,k=m.getBoundingClientRect(),L=k.right-k.left,I=k.bottom-k.top;(p>T-M-L&&y>0||p<0&&y<0)&&(p-=y),(g>C-A-I&&w>0||g<0&&w<0)&&(g-=w),mr(m,{left:"".concat(p,"px"),top:"".concat(g,"px"),visibility:"hidden"}),d=c,v=f;var O=(u[n]||{}).link;if(O){var N=b.findById(n);O.attr("path",ox(N,k,b,i.get("canvas")))}i.set("dragging",{x:d,y:v,left:p,top:g,card:m})}}});var s=function(u){var c=i.get("cardInfoMap");if(c){var f=i.get("dragging");if(f){var h=f.left,d=f.top,v=f.card;c[n].x=h,c[n].y=d,mr(v,{visibility:"visible"}),i.set("dragging",!1);var p=i.get("rows");p==null||p.forEach(function(m){for(var y=m.length-1;y>=0;y--)m[y].id===n&&m.splice(y,1)});var g=i.get("onAnnotationChange");g==null||g(c[n],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var n=this.get("cardInfoMap");if(n){var i=n[t].card,a=i.getBoundingClientRect().width,o=i.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),l=Iu(s.marginLeft),u=o.getBoundingClientRect().width;mr(o,{marginRight:"".concat(a-l-24-16-u,"px")})}}},e.prototype.updateLink=function(t){var n=t.item;if(n){var i=this.get("cardInfoMap");if(i){var a=this.get("canvas"),o=this.get("graph"),s=n.getID(),l=i[s]||{},u=l.link,c=l.card;if(u){var f=ox(n,c.getBoundingClientRect(),o,a);u.attr("path",f)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=i.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=a.card,l=a.isCanvas;if(!(!s||l||s.style.display==="none")){var u=i.findById(o);u&&u.isVisible()?t.toggleAnnotation(u):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var n=t.item,i=t.visible;if(!(!n||n.destroyed)){var a=this.get("cardInfoMap");if(a){var o=n.getID();a[o]&&(i||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var n=this.get("cardInfoMap");if(n){var i=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(n).forEach(function(l){var u=l.title,c=l.content,f=l.x,h=l.y,d=l.id,v=l.collapsed,p=l.card;if(!(p&&p.style.display==="none"&&!t)){var g=i.findById(d)||i.get("canvas");s.push({id:d,x:f,y:h,collapsed:v,title:u||(a==null?void 0:a(g)),content:c||(o==null?void 0:o(g)),visible:p&&p.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var n=this,i=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,l=a.y,u=a.title,c=a.content,f=a.collapsed,h=a.visible,d=i.findById(o);if(!d&&o===kD&&(d=i.get("canvas")),!d){var v=n.get("cardInfoMap")||{};v[o]=a,n.set("cardInfoMap",v);return}n.toggleAnnotation(d,{x:s,y:l,title:u,content:c,collapsed:f}),h||n.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var n=this.get("container");Object.values(t).forEach(function(i){var a=i.card,o=i.link;n.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Ui),bPe=function(e,t){var n,i,a=1/0;Object.keys(e).forEach(function(l){var u=e[l];Object.keys(t).forEach(function(c){var f=t[c],h=u.x-f.x,d=u.y-f.y,v=h*h+d*d;a>v&&(a=v,n=u,i=f)})});var o=20,s=hi.getControlPoint(n,i,.5,o);return[["M",n.x,n.y],["Q",s.x,s.y,i.x,i.y]]},ox=function(e,t,n,i){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var l=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY,d=e.getModel(),v=d.x,p=d.y;u+=v,c+=p,f+=v,h+=p,o={left:{x:u,y:(c+h)/2},right:{x:f,y:(c+h)/2},top:{x:(u+f)/2,y:c},bottom:{x:(u+f)/2,y:h}}}Object.keys(o).forEach(function(A){var E=o[A],T=E.x,C=E.y,k=n.getClientByPoint(T,C);o[A]=i.getPointByClient(k.x,k.y)});var g=t.top,m=g===void 0?0:g,y=t.left,w=y===void 0?0:y,b=t.right,x=b===void 0?0:b,S=t.bottom,_=S===void 0?0:S,M={left:i.getPointByClient(w,(m+_)/2),right:i.getPointByClient(x,(m+_)/2),top:i.getPointByClient((w+x)/2,m),bottom:i.getPointByClient((w+x)/2,_)};return bPe(o,M)},Iu=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Qi={PluginBase:Ui,Menu:sRe,Grid:rRe,Minimap:dRe,Bundling:gRe,ToolBar:xRe,Tooltip:_Re,Fisheye:yRe,TimeBar:rPe,ImageMinimap:oPe,EdgeFilterLens:uPe,SnapLine:dPe,Legend:gPe,Annotation:yPe};Hs("circle",{options:{size:yt.defaultNode.size,style:{x:0,y:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:V({},yt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=Vr({},i,e.icon),s="".concat(this.type,"-keyShape"),l=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=l;var u=o.width,c=o.height,f=o.show,h=o.text;if(f){var d="".concat(this.type,"-icon");h?t.shapeMap[d]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):t.shapeMap[d]=t.addShape("image",{attrs:V({x:-u/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=zn(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2;if(o){var v="link-point-left";t.shapeMap[v]=t.addShape("circle",{attrs:V(V({},f),{x:-d,y:0,r:u/2||c||5}),className:v,name:v,isAnchorPoint:!0})}if(s){var p="link-point-right";t.shapeMap[p]=t.addShape("circle",{attrs:V(V({},f),{x:d,y:0,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(a){var g="link-point-top";t.shapeMap[g]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:-d,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";t.shapeMap[m]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:d,r:u/2||c||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Vr({},t,n),a=this.getSize(e),o=a[0]/2,s=V({x:0,y:0,r:o},i);return s},update:function(e,t,n){var i=t.getContainer(),a=this.getSize(e),o=V({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,i)}},"single-node");Hs("rect",{options:{size:[100,30],style:{radius:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:V({},yt.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=i,this.drawLinkPoints(e,t),i},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=zn(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=V({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=Gt({},a,s.attr(),l);u=Gt(u,e.style),this.updateShape(e,t,u,!1,n),this.updateLinkPoints(e,i)}},"single-node");Hs("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:V({},yt.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:V({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=zn(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,v=h[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},f),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},f),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:-v,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:v,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getSize(e),o=a[0]/2,s=a[1]/2,l=V({x:0,y:0,rx:o,ry:s},i);return l},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},l=t.get("keyShape"),u=Gt({},a,l.attr(),s);u=Gt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");Hs("diamond",{options:{size:[80,80],style:{stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:V({},yt.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:V({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=zn(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),n=t[0],i=t[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getPath(e),o=V({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=Gt({},a,l.attr(),s);u=Gt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");Hs("triangle",{options:{size:40,direction:"up",style:{stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:V({},yt.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(e),l=e.direction||o,u=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var c=a.width,f=a.height,h=a.show,d=a.offset,v=a.text;if(h)if(v)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-c/2,g=-f/2;(l==="up"||l==="down")&&(g+=d),(l==="left"||l==="right")&&(p+=d),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:V({x:p,y:g},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=e.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,h=a.size,d=a.r,v=zn(a,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0];if(u){var m=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?m=[-w,y]:s==="down"?m=[-w,-y]:s==="left"&&(m=[-w,w-y]),m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},v),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var b=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?b=[w,y]:s==="down"?b=[w,-y]:s==="right"&&(b=[w,w-y]),b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},v),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var x=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?x=[w-y,-y]:s==="left"?x=[w,-y]:s==="right"&&(x=[-w,-y]),x&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},v),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var S=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="down"?S=[-w+y,y]:s==="left"?S=[w,y]:s==="right"&&(S=[-w,y]),S&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},v),{x:S[0],y:S[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||t,i=this.getSize(e),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getPath(e),o=V({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=Gt({},a,l.attr(),s);u=Gt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(O){return O.get("className")==="link-point-left"}),l=t.shapeMap["link-point-right"]||t.find(function(O){return O.get("className")==="link-point-right"}),u=t.shapeMap["link-point-top"]||t.find(function(O){return O.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(O){return O.get("className")==="link-point-bottom"}),f=i,h=s||l||u||c;h&&(f=h.attr());var d=Gt({},f,e.linkPoints),v=d.fill,p=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var y=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},w=y.left,b=y.right,x=y.top,S=y.bottom,_=this.getSize(e),M=_[0],A={r:m,fill:v,stroke:p,lineWidth:g},E=null,T=M*Math.sin(1/3*Math.PI),C=M*Math.sin(1/3*Math.PI);o==="up"?E=[-C,T]:o==="down"?E=[-C,-T]:o==="left"&&(E=[-C,C-T]),E&&(s?!w&&w!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr(V(V({},A),{x:E[0],y:E[1]})):w&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},A),{x:E[0],y:E[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var k=null;o==="up"?k=[C,T]:o==="down"?k=[C,-T]:o==="right"&&(k=[C,C-T]),k&&(l?!b&&b!==void 0?(l.remove(),delete t.shapeMap["link-point-right"]):l.attr(V(V({},A),{x:k[0],y:k[1]})):b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},A),{x:k[0],y:k[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var L=null;o==="up"?L=[C-T,-T]:o==="left"?L=[C,-T]:o==="right"&&(L=[-C,-T]),L&&(u?!x&&x!==void 0?(u.remove(),delete t.shapeMap["link-point-top"]):u.attr(V(V({},A),{x:L[0],y:L[1]})):x&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},A),{x:L[0],y:L[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var I=null;o==="down"?I=[-C+T,T]:o==="left"?I=[C,T]:o==="right"&&(I=[-C,T]),I&&(c?!S&&S!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr(V(V({},A),{x:I[0],y:I[1]})):S&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},A),{x:I[0],y:I[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");Hs("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:yt.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:yt.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:yt.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],l=o[1],u=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var c=i.show,f=zn(i,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:V({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),u},drawLogoIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=zn(i,["width","height","x","y","offset","text"]);h?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:V(V({},d),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=zn(i,["width","height","x","y","offset","text"]);h?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:V(V({},d),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=zn(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=null,d=s.show,v=s.width,p=-f/2+a.offset;d&&(p=-f/2+v+a.offset);var g=a.style,m=u.style,y=u.paddingTop;return rt(e.description)?(h=t.addShape("text",{attrs:V(V({},g),{x:p,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h,t.shapeMap["rect-description"]=t.addShape("text",{attrs:V(V({},m),{x:p,y:17+(y||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=t.addShape("text",{attrs:V(V({},g),{x:p,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=V({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=c[1],d=t.get("keyShape");d.attr(V(V({},a),{x:-f/2,y:-h/2,width:f,height:h}));var v=t.getContainer(),p=v.shapeMap["rect-logo-icon"]||v.find(function(Q){return Q.get("className")==="rect-logo-icon"}),g=p?p.attr():{},m=Gt({},g,e.logoIcon),y=m.width;y===void 0&&(y=this.options.logoIcon.width);var w=e.logoIcon?e.logoIcon.show:void 0,b=s.offset,x=-f/2+y+b;!w&&w!==void 0&&(x=-f/2+b);var S=v.shapeMap["node-label"]||v.find(function(Q){return Q.get("className")==="node-label"}),_=v.shapeMap["rect-description"]||v.find(function(Q){return Q.get("className")==="rect-description"});if(e.label)if(!S)v.shapeMap["node-label"]=v.addShape("text",{attrs:V(V({},s.style),{x,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var M=e.labelCfg?e.labelCfg.style:{},A=Gt({},S.attr(),M);e.label&&(A.text=e.label),A.x=x,rt(e.description)&&(A.y=-5),_&&(_.resetMatrix(),_.attr({x})),S.resetMatrix(),S.attr(A)}if(rt(e.description)){var E=u.paddingTop;if(!_)v.shapeMap["rect-description"]=v.addShape("text",{attrs:V(V({},u.style),{x,y:17+(E||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var M=e.descriptionCfg?e.descriptionCfg.style:{},T=Gt({},_.attr(),M);rt(e.description)&&(T.text=e.description),T.x=x,_.resetMatrix(),_.attr(V(V({},T),{y:17+(E||0)}))}}var C=v.shapeMap["pre-rect"]||v.find(function(Q){return Q.get("className")==="pre-rect"});if(C&&!C.destroyed){var k=Gt({},C.attr(),e.preRect);C.attr(V(V({},k),{x:-f/2,y:-h/2,height:h}))}if(p&&!p.destroyed)if(!w&&w!==void 0)p.remove(),delete v.shapeMap["pre-rect"];else{var L=m.width,I=m.height,O=m.x,N=m.y,D=m.offset,$=zn(m,["width","height","x","y","offset"]);p.attr(V(V({},$),{x:O||-f/2+L+D,y:N||-I/2,width:L,height:I}))}else w&&this.drawLogoIcon(e,v);var R=v.shapeMap["rect-state-icon"]||v.find(function(Q){return Q.get("className")==="rect-state-icon"}),B=R?R.attr():{},j=Gt({},B,e.stateIcon);if(R){!j.show&&j.show!==void 0&&(R.remove(),delete v.shapeMap["rect-state-icon"]);var G=j.width,I=j.height,O=j.x,N=j.y,z=j.offset,W=zn(j,["width","height","x","y","offset"]);R.attr(V(V({},W),{x:O||f/2-G+z,y:N||-I/2,width:G,height:I}))}else j.show&&this.drawStateIcon(e,v);this.updateLinkPoints(e,v)},getOptions:function(e,t){return t==="move"?e:Vr({},this.options,this.getCustomConfig(e)||{},e)}},"single-node");Hs("star",{options:{size:60,style:{stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:V({},yt.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:V({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,h=zn(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e),v=d[0];if(s){var p=Math.cos(.1*Math.PI)*v,g=Math.sin((18+72*0)/180*Math.PI)*v;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},h),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos(.5*Math.PI)*v,g=Math.sin((18+72*1)/180*Math.PI)*v;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},h),{x:p,y:-g,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos(.9*Math.PI)*v,g=Math.sin((18+72*2)/180*Math.PI)*v;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},h),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var p=Math.cos(1.3*Math.PI)*v,g=Math.sin((18+72*3)/180*Math.PI)*v;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:V(V({},h),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var p=Math.cos(1.7*Math.PI)*v,g=Math.sin((18+72*4)/180*Math.PI)*v;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:V(V({},h),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),n=t[0],i=n*3/8,a=e.innerR||i;return hi.getStarPath(n,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=Gt({},t,n),a=this.getPath(e),o=V({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=Gt({},a,l.attr(),s);u=Gt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(T){return T.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(T){return T.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(T){return T.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(T){return T.get("className")==="link-point-left-bottom"}),l=t.shapeMap["link-point-left-bottom"]||t.find(function(T){return T.get("className")==="link-point-right-bottom"}),u=n,c=i||a||o||s||l;c&&(u=c.attr());var f=Gt({},u,e.linkPoints),h=f.fill,d=f.stroke,v=f.lineWidth,p=f.size/2;p||(p=f.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,w=g.top,b=g.leftBottom,x=g.rightBottom,S=this.getSize(e),_=S[0],M={r:p,fill:h,stroke:d,lineWidth:v},A=Math.cos((18+72*0)/180*Math.PI)*_,E=Math.sin((18+72*0)/180*Math.PI)*_;a?!y&&y!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr(V(V({},M),{x:A,y:-E})):y&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:V(V({},M),{x:A,y:-E}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),A=Math.cos((18+72*1)/180*Math.PI)*_,E=Math.sin((18+72*1)/180*Math.PI)*_,o?!w&&w!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr(V(V({},M),{x:A,y:-E})):w&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:V(V({},M),{x:A,y:-E}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),A=Math.cos((18+72*2)/180*Math.PI)*_,E=Math.sin((18+72*2)/180*Math.PI)*_,i?!m&&m!==void 0?(i.remove(),delete t.shapeMap["link-point-left"]):i.attr(V(V({},M),{x:A,y:-E})):m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:V(V({},M),{x:A,y:-E}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A=Math.cos((18+72*3)/180*Math.PI)*_,E=Math.sin((18+72*3)/180*Math.PI)*_,s?!b&&b!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr(V(V({},M),{x:A,y:-E})):b&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:V(V({},M),{x:A,y:-E}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),A=Math.cos((18+72*4)/180*Math.PI)*_,E=Math.sin((18+72*4)/180*Math.PI)*_,l?!x&&x!==void 0?(l.remove(),delete t.shapeMap["link-point-right-bottom"]):l.attr(V(V({},M),{x:A,y:-E})):x&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:V(V({},M),{x:A,y:-E}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var LD=hi.defaultSubjectColors,Hd="fan-shape-";Hs("donut",{options:{size:yt.defaultNode.size,style:{x:0,y:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:yt.defaultNode.linkPoints.size,lineWidth:yt.defaultNode.linkPoints.lineWidth,fill:yt.defaultNode.linkPoints.fill,stroke:yt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:V({},yt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=Vr({},i,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var l=o.width,u=o.height,c=o.show,f=o.text;return c&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:V({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:V({x:-l/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),wPe(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,n,i,a){var o=t.get("keyShape");o.attr(V({},n)),xPe(e,t,o),this.updateLabel(e,t,a),i&&this.updateIcon(e,t)}},"circle");var wPe=function(e,t,n){var i=e.donutAttrs,a=i===void 0?{}:i,o=e.donutColorMap,s=o===void 0?{}:o,l=Object.keys(a).length;if(a&&l>1){var u=xj(a,s),c=u.configs,f=u.totalValue;if(f){var h=Sj(n),d=h.lineWidth,v=h.arcR,p=[v,0],g=0;if(l===1){y_(t,{arcR:v,arcBegin:p,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:f,drawWhole:!0});return}for(var m=0;m<c.length;m++){var y=y_(t,{arcR:v,arcBegin:p,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f});if(y.shouldEnd)return;p=y.arcBegin,g=y.beginAngle}}}},y_=function(e,t){var n=t.arcR,i=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,l=t.lineWidth,u=t.totalValue,c=t.drawWhole,f=c===void 0?!1:c,h=t.updateShape,d=h===void 0?void 0:h,v=o.value/u;if(v<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};var p,g,m;if(f||v>.999)p=[n,1e-4],m=1;else{var y=v*Math.PI*2;g=a+y,p=[n*Math.cos(g),-n*Math.sin(g)],m=y>Math.PI?1:0}var w={path:[["M",i[0],i[1]],["A",n,n,0,m,0,p[0],p[1]]],stroke:o.color||(d==null?void 0:d.attr("stroke"))||LD[s%LD.length],lineWidth:l};return d?d.attr(w):e.shapeMap["".concat(Hd).concat(s)]=e.addShape("path",{attrs:w,name:"".concat(Hd).concat(s),draggable:!0}),{beginAngle:g,arcBegin:p,shape:e.shapeMap["".concat(Hd).concat(s)],shouldEnd:f||v>.999}},xPe=function(e,t,n){var i=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},l=t.getContainer();if(i){var u=xj(i,o),c=u.configs,f=u.totalValue;if(f)for(var h=Sj(n),d=h.lineWidth,v=h.arcR,p=[v,0],g=0,m=0;m<c.length;m++){var y="".concat(Hd).concat(m),w=y_(l,{arcR:v,arcBegin:p,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f,drawWhole:c.length===1,updateShape:l.shapeMap[y]});if(w.shape&&(s[y]=!0),w.shouldEnd)break;p=w.arcBegin,g=w.beginAngle}}var b=Object.keys(l.shapeMap).filter(function(x){return x.includes(Hd)});b.forEach(function(x){s[x]||(l.shapeMap[x].remove(!0),delete l.shapeMap[x])})},xj=function(e,t){var n=0,i=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(i.push({key:a,value:o,color:t[a]}),n+=o)}),{totalValue:n,configs:i}},Sj=function(e){var t=e.attr("r"),n=.6*t,i=(t+n)/2,a=t-n;return{lineWidth:a,arcR:i}},n0=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},SPe=function(e){e===void 0&&(e=[]);var t=[],n=[];e.forEach(function(l){t.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},nC=function(e){for(var t=[],n={},i=e.length,a=i-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,t.push(o))}return t},_j=function(e){return nC(e)},ry=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},_Pe=function(e,t){var n=Math.abs(e.x-t.centerX),i=Math.abs(e.y-t.centerY);return n===0&&i===0?0:n/t.width>i/t.height},b_=function(e,t,n){var i=_Pe(t,e);if(i===0){var a=e.centerX,o=e.centerY;return n.y<t.y?o=e.minY:n.x>t.x?a=e.maxX:n.x<t.x?a=e.minX:n.x===t.x&&(o=e.maxY),{x:a,y:o}}return i?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},ID=function(e,t){var n=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},w_=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},i0=function(e,t){var n=e.x,i=e.y;return n<t.minX||n>t.maxX||i<t.minY||i>t.maxY},EPe=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},MPe=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},CPe=function(e,t){return EPe(e,t.x).concat(MPe(e,t.y))},Ov=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},APe=function(e,t){var n=-2,i=0;return t.forEach(function(a){a&&(e.x===a.x&&(i+=n),e.y===a.y&&(i+=n))}),i},OD=function(e,t,n,i,a){return Ov(e,t)+Ov(e,n)+APe(e,[t,n,i,a])},TPe=function r(e,t,n,i,a){a===void 0&&(a=0),e.unshift(t[i]),n[i]&&n[i]!==i&&a<=100&&r(e,t,n,n[i],a+1)},a0=function(e,t,n,i){var a=n.x-e.x,o=n.y-e.y,s=i.x-e.x,l=i.y-e.y,u=n.x-t.x,c=n.y-t.y,f=i.x-t.x,h=i.y-t.y,d=a*l-o*s,v=u*h-c*f,p=a*c-o*u,g=s*h-l*f;return d*v<=0&&p*g<=0},x_=function(e,t,n){if(n.width||n.height){var i=w_(n),a=i[0],o=i[1],s=i[2],l=i[3];return a0(e,t,a,o)||a0(e,t,a,l)||a0(e,t,o,s)||a0(e,t,s,l)}return!1},kPe=function(e,t,n,i){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(x_(o,t,n)||x_(o,t,i))return;a.push(o)}}),nC(a)},LPe=function(e,t,n,i,a,o,s){var l,u=[],c=(l={},l[t.id]=t,l),f={},h={},d={};h[t.id]=0,d[t.id]=OD(t,n,t);var v=new Mj;v.add({id:t.id,value:d[t.id]});var p={};e.forEach(function(x){p[x.id]=x});for(var g;Object.keys(c).length;){var m=v.minId(!1);if(m)g=c[m];else break;if(g===n){var y=[];return TPe(y,p,f,n.id),y}delete c[g.id],v.remove(g.id),u.push(g);var w=kPe(e,g,i,a),b=function(S){S.forEach(function(_){if(u.indexOf(_)===-1){var M=_.id;c[M]||(c[M]=_);var A=d[g.id]+Ov(g,_);if(h[M]&&A>=h[M]){v.add({id:M,value:d[M]});return}f[M]=g.id,h[M]=A,d[M]=h[M]+OD(_,n,t,o,s),v.add({id:M,value:d[M]})}})};b(w)}return[t,n]},IPe=function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)},OPe=function(e,t,n,i){var a=Ov(e,t),o=Ov(n,t);a<i&&(i=a),o<i&&(i=o);var s={x:t.x-i/a*(t.x-e.x),y:t.y-i/a*(t.y-e.y)},l={x:t.x-i/o*(t.x-n.x),y:t.y-i/o*(t.y-n.y)};return[s,l]},ND=function(e,t){var n=[],i=e[0];return n.push("M".concat(i.x," ").concat(i.y)),e.forEach(function(a,o){var s=e[o+1],l=e[o+2];if(s&&l)if(IPe(a,s,l)){var u=OPe(a,s,l,t),c=u[0],f=u[1];n.push("L".concat(c.x," ").concat(c.y)),n.push("Q".concat(s.x," ").concat(s.y," ").concat(f.x," ").concat(f.y)),n.push("L".concat(f.x," ").concat(f.y))}else n.push("L".concat(s.x," ").concat(s.y));else s&&n.push("L".concat(s.x," ").concat(s.y))}),n.join("")},Ej=function(e,t,n,i,a){var o,s;if(!n||!n.getType())o=n0(e);else if(n.getType()==="combo"){var l=n.getKeyShape().getBBox();if(l){var u=n.getModel(),c=u.x,f=u.y;o={x:c,y:f,width:l.width,height:l.height,minX:l.minX+c,maxX:l.maxX+c,minY:l.minY+f,maxY:l.maxY+f},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n0(e)}else o=n&&n.getBBox();if(!i||!i.getType())s=n0(t);else if(i.getType()==="combo"){var h=i.getKeyShape().getBBox();if(h){var d=i.getModel(),v=d.x,p=d.y;s={x:v,y:p,width:h.width,height:h.height,minX:h.minX+v,maxX:h.maxX+v,minY:h.minY+p,maxY:h.maxY+p},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=n0(t)}else s=i&&i.getBBox();var g=ry(o,a),m=ry(s,a),y=b_(g,e,t),w=b_(m,t,e),b=SPe([y,w]),x=ID(g,b),S=ID(m,b),_=[];_=_.concat(w_(x)).concat(w_(S));var M={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[b,x,S].forEach(function(E){_=_.concat(CPe(E,M).filter(function(T){return i0(T,g)&&i0(T,m)}))}),[{x:y.x,y:w.y},{x:w.x,y:y.y}].forEach(function(E){i0(E,g)&&i0(E,m)&&_.push(E)}),_.unshift(y),_.push(w),_=nC(_);var A=LPe(_,y,w,o,s,e,t);return A.unshift(e),A.push(t),_j(A)},NPe=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],n={x:t.x,y:t.y},i=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===n.x?i.push(s):(i=[s],n.x=s.x),s.y===n.y?a.push(s):(a=[s],n.y=s.y),i.length>2){var l=e.indexOf(i[1]);l>-1&&e.splice(l,1);continue}if(a.length>2){var l=e.indexOf(a[1]);l>-1&&e.splice(l,1)}}return e},Mj=function(){function r(){this.arr=[],this.map={},this.arr=[],this.map={}}return r.prototype._innerAdd=function(e,t){for(var n=[0,t-1];n[1]-n[0]>1;){var i=Math.floor((n[0]+n[1])/2);if(this.arr[i].value>e.value)n[1]=i;else if(this.arr[i].value<e.value)n[0]=i;else{this.arr.splice(i,0,e),this.map[e.id]=!0;return}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},r.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},r.prototype.remove=function(e){this.map[e]&&delete this.map[e]},r.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},r.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},r.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},r}(),$Pe=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},DPe=function(e,t,n,i,a){return _j(Ej(e,t,n,i,a.offset))},RPe={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:$Pe,fallbackRoute:DPe},Os=function(e,t){var n=Math.round(Math.abs(e/t)),i=e<0?-1:1;return n<0?0:i*n},PPe=function(e,t,n){var i={};return e.forEach(function(a){if(a)for(var o=ry(a.getBBox(),n),s=Os(o.minX,t);s<=Os(o.maxX,t);s+=1)for(var l=Os(o.minY,t);l<=Os(o.maxY,t);l+=1)i["".concat(s,"|||").concat(l)]=!0}),i},sx=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n||i?Math.atan2(i,n):0},$D=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},DD=function(e,t,n){for(var i=1/0,a=0,o=t.length;a<o;a++){var s=n(e,t[a]);s<i&&(i=s)}return i},RD=function(e,t,n,i,a){var o=[];if(!n)return[e];var s=a.directions,l=a.offset,u=n.getBBox(),c=t.x>u.minX&&t.x<u.maxX&&t.y>u.minY&&t.y<u.maxY,f=ry(u,l);for(var h in f)f[h]=Os(f[h],a.gridSize);if(c){for(var d=0,v=s;d<v.length;d++)for(var p=v[d],g=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],h=0;h<4;h++){var m=g[h],y=hi.getLineIntersect(e,{x:e.x+p.stepX*f.width,y:e.y+p.stepY*f.height},m[0],m[1]);y&&!x_(e,y,u)&&(y.id="".concat(y.x,"|||").concat(y.y),o.push(y))}return o}var w=b_(f,e,i);return w.id="".concat(w.x,"|||").concat(w.y),[w]},S_=function(e,t,n,i){var a=sx(e,t),o=n[e.id];if(!o){var s=sx(i,e);return $D(s,a)}var l=sx({x:o.x,y:o.y},e);return $D(l,a)},FPe=function(e,t,n,i,a,o,s){var l=[i],u=i,c=e.id,f=e.x,h=e.y,d={x:f,y:h,id:c};S_(d,o,t,n)&&(u={x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s},l.unshift(u));for(var v=t[c];v&&v.id!==c;){var p={x:f,y:h,id:c},g={x:v.x,y:v.y,id:v.id},m=S_(g,p,t,n);m&&(u={x:g.x===p.x?u.x:g.x*s,y:g.y===p.y?u.y:g.y*s},l.unshift(u)),c=g.id,f=g.x,h=g.y,v=t[c]}return l[0].x=f===n.x?a.x:u.x,l[0].y=h===n.y?a.y:u.y,l.unshift(a),l},BPe=function(e,t,n,i,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=Vr(RPe,a);o.obstacles=o.obstacles||[];var s=o.penalties,l=o.gridSize,u=PPe(o.obstacles.concat([n,i]),l,o.offset),c={x:Os(e.x,l),y:Os(e.y,l)},f={x:Os(t.x,l),y:Os(t.y,l)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(f.x,"|||").concat(f.y);var h=RD(c,e,n,f,o),d=RD(f,t,i,c,o);h.forEach(function($){delete u[$.id]}),d.forEach(function($){delete u[$.id]});for(var v={},p={},g={},m={},y={},w=new Mj,b=0;b<h.length;b++){var x=h[b];v[x.id]=x,m[x.id]=0,y[x.id]=DD(x,d,o.distFunc),w.add({id:x.id,value:y[x.id]})}var S=o.maximumLoops,_,M,A,E,T,C,k=1/0,L={};for(d.forEach(function($){L["".concat($.x,"|||").concat($.y)]=!0}),Object.keys(v).forEach(function($){var R=v[$].id;y[R]<=k&&(k=y[R],_=v[R])});Object.keys(v).length>0&&S>0;){var I=w.minId((S+1)%30===0);if(I)_=v[I];else break;if(L["".concat(_.x,"|||").concat(_.y)])return FPe(_,g,c,t,e,f,l);delete v[_.id],w.remove(_.id),p[_.id]=!0;for(var b=0;b<o.directions.length;b++){M=o.directions[b];var O="".concat(Math.round(_.x)+M.stepX,"|||").concat(Math.round(_.y)+M.stepY);if(A={x:_.x+M.stepX,y:_.y+M.stepY,id:O},!p[O]&&(C=S_(_,A,g,c),!(C>o.maxAllowedDirectionChange)&&!u[O])){v[O]||(v[O]=A);var N=s[C];E=o.distFunc(_,A)+(isNaN(N)?l:N),T=m[_.id]+E;var D=m[O];D&&T>=D||(g[O]=_,m[O]=T,y[O]=T+DD(A,d,o.distFunc),w.add({id:O,value:y[O]}))}}S-=1}return o.fallbackRoute(e,t,n,i,o)};IB("polyline",{options:{color:yt.defaultEdge.color,size:yt.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:yt.defaultEdge.style.stroke,lineAppendWidth:yt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:yt.edgeLabel.style.fill,fontSize:yt.edgeLabel.style.fontSize,fontFamily:yt.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:V({},yt.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);n.radius===0&&delete n.radius;var i=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return t.shapeMap["edge-shape"]=i,i},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},i=Gt({},t,n,e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),l=[a];s&&(l=l.concat(s)),l.push(o);var u=e.sourceNode,c=e.targetNode,f=i.radius,h=this.options.routeCfg,d=Gt({},h,e.routeCfg);d.offset=i.offset;var v=this.getPath(l,u,c,f,d,!s);(Bt(v)&&v.length<=1||rt(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(v="M0 0, L0 0");var p=Gt({},yt.defaultEdge.style,i,{lineWidth:e.size,path:v});return p},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var i={stroke:e.color},a=n.shapeMap["edge-shape"]||n.find(function(b){return b.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),h=Gt({},i,f,e.style),d=e.sourceNode,v=e.targetNode,p=h.radius,g=this.options.routeCfg,m=Gt({},g,e.routeCfg);m.offset=h.offset;var y=this.getPath(c,d,v,p,m,!u);(Bt(y)&&y.length<=1||rt(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(y="M0 0, L0 0"),f.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),f.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var w=Gt(i,a.attr(),{lineWidth:o,path:y},e.style);a&&a.attr(w)}},getPath:function(e,t,n,i,a,o){var s=a.offset,l=a.obstacles,u=a.simple;if(!s||e.length>2||o===!1){if(i)return ND(e,i);var c=[];return Pe(e,function(v,p){p===0?c.push(["M",v.x,v.y]):c.push(["L",v.x,v.y])}),c}u!==!1&&!(l!=null&&l.length)&&(u=!0);var f=u?Ej(e[e.length-1],e[0],n,t,s):BPe(e[0],e[e.length-1],t,n,a);if(!f||!f.length)return"M0 0, L0 0";if(i){var h=ND(f,i);return h}f=NPe(f);var d=hi.pointsToPolygon(f);return d}},"single-edge");var PD=Zs.cloneEvent,FD=Zs.isNaN,BD=Math.abs,zPe=10,GPe=["shift","ctrl","alt","control"];const jPe={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,i=+e.clientY;if(!(FD(n)||FD(i))){var a=n-t.x,o=i-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,n=e.originalEvent.touches,i=n[0],a=n[1];i&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,n=e.originalEvent;if(!(n&&e.name!=="touchstart"&&n.button!==0)&&!(e.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var i=this.graph,a=i.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");l&&l.forEach(function(w){w.set("ori-visibility",w.get("ori-visibility")||w.get("visible")),w.hide()})}for(var u=i.getNodes(),c=0,f=u.length;c<f;c++)for(var h=u[c].getContainer(),d=h.get("children"),v=0,p=d;v<p.length;v++){var g=p[v],m=g.get("isKeyShape");m||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if(typeof window<"u"){var y=this;this.handleDOMContextMenu=function(w){return y.onMouseUp(w)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=PD(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(BD(this.origin.x-e.clientX)+BD(this.origin.y-e.clientY)<zPe)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,n;this.mousedown=!1,this.dragstart=!1;var i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(_){return _.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var h=u[c].get("group").get("children");h&&h.forEach(function(_){var M=_.get("ori-visibility");_.set("ori-visibility",void 0),M&&_.show()})}if(a>l)for(var d=i.getNodes(),v=0,p=d.length;v<p;v++)for(var g=d[v].getContainer(),m=g.get("children"),y=0,w=m;y<w.length;y++){var b=w[y],x=b.get("isKeyShape");if(!x){var S=b.get("ori-visibility");b.set("ori-visibility",void 0),S&&b.show()}}}if(!this.dragging){this.origin=null;return}e=PD(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,i.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,n=e.key;n&&(GPe.indexOf(n.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Gv(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(ni(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}},UPe={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){t.onDragEnd(e);return}e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,n;if(((n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(V(V({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(V(V({},e),this.mousedown),this)){var n=this.mousedown,i=n.item,a=n.target;if(!(!i||i.destroyed||i.hasLocked())){var o=i.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(i),a){var s=a.get("isAnchorPoint");if(s)return}var l=this.graph;this.targets=[],this.targetCombo=null;var u=l.findAllByState("node",this.selectedState),c=i.get("id"),f=u.filter(function(d){var v=d.get("id");return c===v});if(f.length===0?this.targets.push(i):u.length>1?u.forEach(function(d){var v=d.hasLocked();v||t.targets.push(d)}):this.targets.push(i),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach(function(d){var v=d.getModel(),p=v.x,g=v.y,m=v.id;h.push({x:p,y:g,id:m})}),this.set("beforeDragNodes",h)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var v=d.getEdges();v.forEach(function(p){p.isVisible()&&(t.hidenEdge[p.getID()]=!0,p.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(i){t.update(i,e);var a=i.getModel().comboId;a&&(n[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,n;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){t.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),l=s.x,u=s.y,c=s.id;a.after.nodes.push({x:l,y:u,id:c})}),i.pushStack("update",br(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var i=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&t.updateComboTree(n)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,n=e.item,i=t.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=i.findById(a);t.comboActiveState&&i.setItemState(s,t.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(i){return n.update(i,e)}):this.targets.map(function(i){return n.update(i,e,t)}))},update:function(e,t,n){var i=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-i.x+this.point[o].x,l=t.y-i.y+this.point[o].y;n&&(s+=i.x-t.x,l+=i.y-t.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:jv(function(r){var e=r.targets,t=r.graph,n=r.point,i=r.origin,a=r.evt,o=r.updateEdge,s=r.onlyChangeComboSize,l=r.updateParentCombos;e.map(function(u){var c=u.get("model"),f=u.get("id");n[f]||(n[f]={x:c.x||0,y:c.y||0});var h=a.x-i.x+n[f].x,d=a.y-i.y+n[f].y,v={x:h,y:d};o?t.updateItem(u,v,!1):u.updatePosition(v)}),s&&l(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var n=t.get("group"),i=Vr({},Ju.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=n.addShape("rect",{attrs:V({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var l=t[s],u=l.getBBox(),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY;c<n&&(n=c),f<a&&(a=f),h>i&&(i=h),d>o&&(o=d)}var v=Math.floor(n),p=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:v,y:p,width:g,height:m,minX:n,minY:a}},updateParentCombos:function(e,t){var n=e||this.graph,i=t||this.targets,a={};i==null||i.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=n.findById(s))}),Object.values(a).forEach(function(o){o&&n.updateCombo(o)})}};var o0=null;const WPe={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,n=this.shouldClearStatusOnSecond;n&&(o0=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:uv(function(r,e){var t=r.item,n=e.graph;if(!(!n||n.destroyed)&&(e.item=t,!!e.shouldUpdate(r.item,{event:r,action:"activate"},e))){var i=e.shouldClearStatusOnSecond,a=t.getModel().id;if(o0===a&&i){e.throttleClearActiveState(r,e),o0=null;return}for(var o=e.activeState,s=e.inactiveState,l=n.getNodes(),u=n.getCombos(),c=n.getEdges(),f=n.get("vedges"),h=l.length,d=u.length,v=c.length,p=f.length,g=e.inactiveItems||{},m=e.activeItems||{},y=0;y<h;y++){var w=l[y],b=w.getID(),x=w.hasState("selected");e.resetSelected&&x&&n.setItemState(w,"selected",!1),m[b]&&(n.setItemState(w,o,!1),delete m[b]),s&&!g[b]&&(n.setItemState(w,s,!0),g[b]=w)}for(var y=0;y<d;y++){var S=u[y],_=S.getID(),x=S.hasState("selected");e.resetSelected&&x&&n.setItemState(S,"selected",!1),m[_]&&(n.setItemState(S,o,!1),delete m[_]),s&&!g[_]&&(n.setItemState(S,s,!0),g[_]=S)}for(var y=0;y<v;y++){var M=c[y],A=M.getID();m[A]&&(n.setItemState(M,o,!1),delete m[A]),s&&!g[A]&&(n.setItemState(M,s,!0),g[A]=M)}for(var y=0;y<p;y++){var E=f[y],T=E.getID();m[T]&&(n.setItemState(E,o,!1),delete m[T]),s&&!g[T]&&(n.setItemState(E,s,!0),g[T]=E)}if(t&&!t.destroyed){s&&(n.setItemState(t,s,!1),delete g[t.getID()]),m[t.getID()]||(n.setItemState(t,o,!0),m[t.getID()]=t);for(var C=t.getEdges(),k=C.length,y=0;y<k;y++){var M=C[y],A=M.getID(),L=void 0;M.getSource()===t?L=M.getTarget():L=M.getSource();var I=L.getID();s&&g[I]&&(n.setItemState(L,s,!1),delete g[I]),m[I]||(n.setItemState(L,o,!0),m[I]=L),g[A]&&(n.setItemState(M,s,!1),delete g[A]),m[A]||(n.setItemState(M,o,!0),m[A]=M),M.toFront()}}e.activeItems=m,e.inactiveItems=g,i&&(o0=t.getModel().id),n.emit("afteractivaterelations",{item:r.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:uv(function(r,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(r.item,{event:r,action:"deactivate"},e)){var n=e.activeState,i=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,i)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:r.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var s0=Math.min,zD=Math.max,GD=Math.abs,jD="shift",HPe=["drag","shift","ctrl","alt","control"];const VPe={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:jD,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return HPe.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=jD,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush,i=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!i||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1))},clearStates:function(){var e=this,t=e.graph,n=e.selectedState,i=t.findAllByState("node",n),a=t.findAllByState("edge",n),o=t.findAllByState("combo",n);i.forEach(function(s){return t.setItemState(s,n,!1)}),a.forEach(function(s){return t.setItemState(s,n,!1)}),o.forEach(function(s){return t.setItemState(s,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,i,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=n&&o.centerY>=i&&o.centerY<=a},getSelectedNodes:function(e){var t=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=n.isBBoxCenterInRect,l=this.selectedState,u={x:e.x,y:e.y},c=i.getPointByCanvas(a.x,a.y),f=s0(u.x,c.x),h=zD(u.x,c.x),d=s0(u.y,c.y),v=zD(u.y,c.y),p=[],g=[];i.getNodes().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,v)&&o(w,"select",t)){p.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}});var m=[];this.includeEdges&&p.forEach(function(w){var b=w.getOutEdges();b.forEach(function(x){if(x.isVisible()){var S=x.getModel(),_=S.source,M=S.target;g.includes(_)&&g.includes(M)&&o(x,"select",t)&&(m.push(x),i.setItemState(x,t.selectedState,!0))}})});var y=[];this.includeCombos&&i.getCombos().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,v)&&o(w,"select",t)){y.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}}),this.selectedEdges=m,this.selectedNodes=p,this.selectedCombos=y,this.onSelect&&this.onSelect(p,m,y),i.emit("nodeselectchange",{selectedItems:{nodes:p,edges:m,combos:y},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:GD(e.canvasX-t.x),height:GD(e.canvasY-t.y),x:s0(e.canvasX,t.x),y:s0(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var UD="shift",YPe=["shift","ctrl","alt","control"];const XPe={getDefaultCfg:function(){return{multiple:!0,trigger:UD,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return YPe.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=UD,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(!(!n||n.destroyed)){var i=n.getType(),a=t.graph,o=t.keydown,s=t.multiple,l=t.shouldUpdate,u=t.shouldBegin;if(u(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));Pe(c,function(p){p!==n&&a.setItemState(p,t.selectedState,!1)})}var f=function(){switch(i){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!f){var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:v},select:!1});return}if(n.hasState(t.selectedState)){l(e,t)&&a.setItemState(n,t.selectedState,!1);var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:v},select:!1})}else{l(e,t)&&a.setItemState(n,t.selectedState,!0);var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:v},select:!0})}}}},onCanvasClick:function(e){var t=this,n=this,i=n.graph,a=n.shouldBegin;if(a(e,this)){var o=i.findAllByState("node",this.selectedState);Pe(o,function(u){i.setItemState(u,t.selectedState,!1)});var s=i.findAllByState("edge",this.selectedState);Pe(s,function(u){i.setItemState(u,t.selectedState,!1)});var l=i.findAllByState("combo",this.selectedState);Pe(l,function(u){i.setItemState(u,t.selectedState,!1)}),i.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}};var KPe=Pa,l0=.05;const qPe={getDefaultCfg:function(){return this.isFireFox=YG()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],i=t[1];e.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],i=t[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(p,g){return Math.hypot(g.x-p.x,g.y-p.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.get("animate"),f=this.get("animateCfg"),h=this.graph.get("canvas"),d=h.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:d.x,y:d.y},c,f),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-l0*l:c=1/(1-l0*l):e.wheelDelta<0?c=1-l0*l:c=1/(1-l0*l),f=u*c;var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");f>d?f=d:f<h&&(f=h);var v=this.get("enableOptimize");if(v){var p=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),y=i.getEdges(),w=m.length,b=y.length;if(!g){for(var x=0;x<w;x++){var S=m[x];if(!S.destroyed)for(var _=S.get("group").get("children"),M=_.length,A=0;A<M;A++){var E=_[A];!E.destoryed&&!E.get("isKeyShape")&&(E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide())}}for(var T=0;T<b;T++)for(var C=y[T],_=C.get("group").get("children"),M=_.length,A=0;A<M;A++){var E=_[A];E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var k=setTimeout(function(){var Me=i.getZoom(),J=t.get("optimized");if(J){t.set("optimized",!1);for(var F=0;F<w;F++){var be=m[F],oe=be.get("group").get("children"),X=oe.length;if(Me<p){var de=be.getKeyShape(),xe=de.get("ori-visibility");de.set("ori-visibility",void 0),xe&&de.show()}else for(var ke=0;ke<X;ke++){var Ge=oe[ke],xe=Ge.get("ori-visibility");Ge.set("ori-visibility",void 0),!Ge.get("visible")&&xe&&xe&&Ge.show()}}for(var vt=0;vt<b;vt++){var Lt=y[vt],oe=Lt.get("group").get("children"),X=oe.length;if(Me<p){var de=Lt.getKeyShape(),xe=de.get("ori-visibility");de.set("ori-visibility",void 0),xe&&de.show()}else for(var ke=0;ke<X;ke++){var Ge=oe[ke];if(!Ge.get("visible")){var xe=Ge.get("ori-visibility");Ge.set("ori-visibility",void 0),xe&&Ge.show()}}}}},100);this.set("timeout",k)}if(u<=1){var L=void 0,I=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){L=i.findAllByState("node",a.fixState),I=i.findAllByState("edge",a.fixState);for(var O=u/f,N=L.length,D=0;D<N;D++){var S=L[D],$=S.getContainer(),R=S.getModel(),B=S.getOriginStyle(),j=S.getStateStyle(a.fixState),G=S.get("shapeFactory").getShape(R.type).getStateStyle(a.fixState,S)[a.fixState];if(a.fixAll){if(f<=1){var z=br($.getMatrix());z||(z=[1,0,0,0,1,0,0,0,1]);var W=S.getModel(),Q=W.x,ie=W.y;z=KPe(z,[["t",-Q,-ie],["s",O,O],["t",Q,ie]]),$.setMatrix(z)}}else for(var _=$.get("children"),M=_.length,A=0;A<M;A++){var E=_[A],se=void 0,ae=void 0;if(a.fixLabel){var pe=E.get("type");if(pe==="text"){se=E.attr("fontSize")||12;var De=j[E.get("name")],Je=G[E.get("name")],ee=De?De.fontSize:12,ne=Je?Je.fontSize:12,me=ee||ne||12;if(f<=1&&E.attr("fontSize",me/f),ae)break}}if(a.fixLineWidth&&E.get("isKeyShape")){ae=E.attr("lineWidth")||0;var Fe=j.lineWidth||G.lineWidth||B.lineWidth||0;if(f<=1&&E.attr("lineWidth",Fe/f),se)break}}}for(var Re=I.length,$e=0;$e<Re;$e++)for(var C=I[$e],$=C.getContainer(),_=$.get("children"),R=C.getModel(),j=C.getStateStyle(a.fixState),G=C.get("shapeFactory").getShape(R.type).getStateStyle(a.fixState,C)[a.fixState],M=_.length,A=0;A<M;A++){var E=_[A],se=void 0,ae=void 0;if(a.fixLabel||a.fixAll){var pe=E.get("type");if(pe==="text"){se=E.attr("fontSize")||12;var De=j[E.get("name")],Je=G[E.get("name")],ee=De?De.fontSize:12,ne=Je?Je.fontSize:12,me=ee||ne||12;if(f<=1&&E.attr("fontSize",me/f),ae)break}}if((a.fixLineWidth||a.fixAll)&&E.get("isKeyShape")){ae=E.attr("lineWidth")||0;var Fe=j.lineWidth||G.lineWidth||1;if(f<=1&&E.attr("lineWidth",Fe/f),se)break}}}}var Ke=this.get("animate"),at=this.get("animateCfg");i.zoomTo(f,{x:s.x,y:s.y},Ke,at),i.emit("wheelzoom",e)}}},Cj={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,mr(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){mr(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!t(e,this)){mr(o,{visibility:"hidden"});return}var l=s.getPointByClient(e.clientX,e.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,h=o.getBoundingClientRect();c>i/2?c-=h.width:c+=this.offset,f>a/2?f-=h.height:f+=this.offset;var d="".concat(c,"px"),v="".concat(f,"px");mr(this.container,{left:d,top:v,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=Zr('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(n),mr(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},ZPe=V({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Cj),QPe=V({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Cj);var WD="click",JPe=["click","dblclick"];const e5e={getDefaultCfg:function(){return{trigger:WD,onChange:function(){}}},getEvents:function(){var e,t;return JPe.includes(this.trigger)?t=this.trigger:(t=WD,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;this.shouldBegin(e,a,this)&&(n.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}};var t5e=Zs.calculationItemsBBox,r5e=function r(e,t){if(t(e)!==!1&&e){var n=e.get("combos");if(n.length===0)return!1;Pe(n,function(i){r(i,t)})}};const n5e={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var n=t.getType();return n==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,n=this.graph,i=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(u){var c=u.get("id");return o===c});s.length===0?this.targets.push(i):this.targets=a;var l=[];this.targets.forEach(function(u){var c=u.getModel(),f=c.x,h=c.y,d=c.id;l.push({x:f,y:h,id:d})}),this.set("beforeDragItems",l),this.activeState&&this.targets.map(function(u){var c=u.getModel();if(c.parentId){var f=n.findById(c.parentId);f&&n.setItemState(f,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],r5e(i,function(u){if(u.destroyed)return!1;var c=u.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,i=e.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(h){var d=h.getModel();return a.parentId,d.id!==a.id&&!t.currentItemChildCombos.includes(d.id)});f.map(function(h){var d=h.getBBox(),v=d.centerX,p=d.centerY,g=d.width,m=l-v,y=u-p,w=2*Math.sqrt(m*m+y*y);c+g-w>.8*c?n.setItemState(h,t.activeState,!0):n.setItemState(h,t.activeState,!1)})}Pe(this.targets,function(h){t.updateCombo(h,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&Pe(this.targets,function(i){n.updateCombo(i,e,t)})},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&i.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id,!1)):i.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=e.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){t.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a,!1))})}else this.targets.map(function(u){if(t.onlyChangeComboSize)n.updateCombo(u);else{var c=u.getModel();c.comboId&&n.updateComboTree(u,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&i.setItemState(e,this.activeState,!1),!e){var o=i.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(l){if(!n.onlyChangeComboSize)i.updateComboTree(l,void 0,o);else{i.updateCombo(l);var u=l.getModel(),c=u.x,f=u.y,h=u.id;s.after.combos.push({x:c,y:f,id:h}),i.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,n){var i=this;if(n===void 0&&(n={}),t(e,n)!==!1&&e){var a=e.get("combos");Pe(a,function(s){i.traverse(s,t,n)});var o=e.get("nodes");Pe(o,function(s){i.traverse(s,t,n)})}},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);var i={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},i),Object.values(i).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,n){var i=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=t.x-i.x+this.point[s].x,u=t.y-i.y+this.point[s].y;n&&(l+=i.x-t.x,u+=i.y-t.y),a.updateItem(e,{x:l,y:u},!1)},getParentCombo:function(e){var t=this.graph;if(e){var n=t.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:h,y:d})}else{var n=t.get("delegateGroup"),i=null;this.targets.length>1?i=t5e(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=V(V({},Ju.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:V({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,n=e.targets,i={};n==null||n.forEach(function(a){var o=a.getModel().parentId;o&&(i[o]=t.findById(o))}),Object.values(i).forEach(function(a){a&&t.updateCombo(a)})}};var HD="dblclick",i5e=["click","dblclick"];const a5e={getDefaultCfg:function(){return{trigger:HD,relayout:!0}},getEvents:function(){var e,t;return i5e.includes(this.trigger)?t=this.trigger:(t=HD,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,n=this,i=n.graph,a=n.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}};var o5e=Zs.isPolygonsIntersect,s5e=Zs.pathToPoints,VD="shift",l5e=["drag","shift","ctrl","alt","control"],u5e=function(e,t){var n,i=e.getKeyShape();if(e.get("type")==="path")n=s5e(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return o5e(t,n)};const c5e={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:VD,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return l5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=VD,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,n=e.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(n,i){i===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,n=t.graph,i=t.selectedState,a=t.shouldDeselect,o=n.findAllByState("node",i),s=n.findAllByState("edge",i);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(l){return n.setItemState(l,i,!1)}),s.forEach(function(l){return n.setItemState(l,i,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,n=t.graph,i=t.shouldUpdate,a=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(c){if(c.isVisible()&&u5e(c,a)&&i(c,"select",e)){s.push(c);var f=c.getModel();l.push(f.id),n.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(h){if(h.isVisible()){var d=h.getModel(),v=d.source,p=d.target;l.includes(v)&&l.includes(p)&&i(h,"select",e)&&(u.push(h),n.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:V({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var YD="click",f5e=["click","drag"],XD=void 0,h5e=["shift","ctrl","control","alt","meta",void 0];const d5e={getDefaultCfg:function(){return{trigger:YD,key:XD,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;f5e.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=YD,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&h5e.indexOf(e.key.toLowerCase())===-1&&(e.trigger=XD,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item;(!n||n.getID()===t.source||n.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item,i=t.graph,a=n.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&tn(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var l=V({target:a.id},s);if(t.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(t.edge,l,!1),i.get("enabledStack")){var u=V(V({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&tn(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=i.addItem("edge",V({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var n={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1)}},cancelCreating:function(e){var t,n,i=this;if(!(i.key&&!i.keydown)){var a=i.graph,o=e.item;if(i.addingEdge&&(i.edge===o||!((n=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||n===void 0)&&n.call(t))){i.edge&&!i.edge.destroyed&&a.removeItem(i.edge,!1),i.edge=null,i.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var KD="ctrl",v5e=["shift","ctrl","alt","control"],p5e="1";const g5e={getDefaultCfg:function(){return{trigger:KD,combinedKey:p5e,functionName:"fitView",functionParams:[]}},getEvents:function(){return v5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=KD,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var m5e=["shift","ctrl","alt","control","meta"];const y5e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||m5e.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var n=this.graph,i=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];i.includes("control")&&i.push("ctrl");var a=i.some(function(R){return e["".concat(R,"Key")]});if(a){var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=n.getZoom();e.wheelDelta>0?l=l+l*.05:l=l-l*.05,n.zoomTo(l,{x:s.x,y:s.y})}else{var u=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var f=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),v=this.scalableRange,p=this.scalableRange;v<1&&v>-1&&(v=f*v,p=h*p);var g=d.minX,m=d.maxX,y=d.minY,w=d.maxY;u>0?m<-v?u=0:m-u<-v&&(u=m+v):u<0&&(g>f+v?u=0:g-u>f+v&&(u=g-(f+v))),c>0?w<-p?c=0:w-c<-p&&(c=w+p):c<0&&(y>h+p?c=0:y-c>h+p&&(c=y-(h+p))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(u=0),n.translate(-u,-c)}e.preventDefault();var b=this.get("enableOptimize");if(b){var x=this.get("optimizeZoom"),S=this.get("optimized"),_=n.getNodes(),M=n.getEdges(),A=_.length,E=M.length;if(!S){for(var T=0;T<A;T++){var C=_[T];if(!C.destroyed)for(var k=C.get("group").get("children"),L=k.length,I=0;I<L;I++){var O=k[I];!O.destoryed&&!O.get("isKeyShape")&&(O.set("ori-visibility",O.get("ori-visibility")||O.get("visible")),O.hide())}}for(var N=0;N<E;N++)for(var D=M[N],k=D.get("group").get("children"),L=k.length,I=0;I<L;I++){var O=k[I];O.set("ori-visibility",O.get("ori-visibility")||O.get("visible")),O.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var $=setTimeout(function(){var R=n.getZoom(),B=t.get("optimized");if(B){t.set("optimized",!1);for(var j=0;j<A;j++){var G=_[j],z=G.get("group").get("children"),W=z.length;if(R<x){var Q=G.getKeyShape(),ie=Q.get("ori-visibility");ie&&Q.show()}else for(var se=0;se<W;se++){var ae=z[se],ie=ae.get("ori-visibility");!ae.get("visible")&&ie&&ie&&ae.show()}}for(var pe=0;pe<E;pe++){var De=M[pe],z=De.get("group").get("children"),W=z.length;if(R<x){var Q=De.getKeyShape(),ie=Q.get("ori-visibility");ie&&Q.show()}else for(var se=0;se<W;se++){var ae=z[se];if(!ae.get("visible")){var ie=ae.get("ori-visibility");ie&&ae.show()}}}}},100);this.set("timeout",$)}}},allowDrag:function(e){var t,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Gv(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(ni(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}};var b5e={"drag-canvas":jPe,"zoom-canvas":qPe,"drag-node":UPe,"activate-relations":WPe,"brush-select":VPe,"click-select":XPe,"lasso-select":c5e,tooltip:ZPe,"edge-tooltip":QPe,"collapse-expand":e5e,"drag-combo":n5e,"collapse-expand-combo":a5e,"create-edge":d5e,"shortcuts-call":g5e,"scroll-canvas":y5e};Pe(b5e,function(r,e){OB(e,r)});var w5e=V(V({},Zce),i0e),x5e=Qi.Fisheye,S5e=Qi.TimeBar,_5e=Qi.ImageMinimap,E5e=Qi.EdgeFilterLens,M5e=Qi.SnapLine,C5e=Qi.Annotation;const Vu={version:Ju.version,Graph:KG,TreeGraph:eRe,Util:Zs,Layout:wr.Layouts,TreeLayout:GDe,registerLayout:jDe,Global:Ju,registerBehavior:OB,registerCombo:zve,registerEdge:IB,registerNode:Hs,Minimap:Qi.Minimap,Grid:Qi.Grid,Bundling:Qi.Bundling,Menu:Qi.Menu,ToolBar:Qi.ToolBar,Tooltip:Qi.Tooltip,Legend:Qi.Legend,TimeBar:S5e,SnapLine:M5e,Fisheye:x5e,ImageMinimap:_5e,EdgeFilterLens:E5e,Annotation:C5e,Algorithm:w5e,Arrow:CB,Marker:AB,Shape:Yr};Vu.version="4.8.23";const Aj="BloodOption",__=()=>localStorage.getItem(Aj),A5e=r=>{localStorage.setItem(Aj,r)},Si=42,E_=24,qD=12,ZD=Si/2+E_/2,M_=6,T5e=-1,Vd=400,xs=JSON.parse(__()||"{}"),lx={0:{fill:(xs==null?void 0:xs.sourceColor)||"#91c050"},1:{fill:(xs==null?void 0:xs.midColor)||"#d26b58"},2:{fill:(xs==null?void 0:xs.endColor)||"#419a60"}},QD=r=>typeof r=="string"&&r.length>26?r.slice(0,26)+"...":r;Vu.registerNode("dice-er-box",{draw:function(e,t){var h;const n=e.style,i=e.boxStyle,a=e.level,{attrs:o}=e,s=Si*(o.length+1),l=((h=lx[a])==null?void 0:h.fill)||n.fill,u=o.length>0?[i.radius,i.radius,0,0]:i.radius;t.addShape("rect",{attrs:{fill:l,height:Si,width:Vd,radius:u},draggable:!0,name:e.label}),t.addShape("text",{attrs:{y:ZD,x:qD,fill:"#fff",text:QD(e.label),fontSize:E_,fontWeight:500},draggable:!0,name:e.label});const c=t.addShape("rect",{attrs:{x:0,y:0,width:Vd,height:s,stroke:l,lineWidth:M_,radius:i.radius,boxStyle:{...i}},draggable:!0}),f=t.addGroup({});return o&&o.forEach((d,v)=>{const{key:p}=d;f.addShape("rect",{attrs:{x:0,y:v*Si+Si,fill:"#ffffff",width:Vd,height:Si,cursor:"pointer"},name:p,draggable:!0}),f.addShape("text",{attrs:{x:qD,y:(v+1)*Si+ZD,text:QD(p),fontSize:E_,fill:"#000",fontWeight:500,cursor:"pointer"},name:p,draggable:!0})}),c},setState(r,e,t){var n,i;if(r&&r.startsWith("highlight")){const a=r.split("-")[1],o=t.get("keyShape"),s=t.getModel().attrs.findIndex(u=>u.key===a),l=o.get("parent").get("children")[3].get("children")[s*2+1];e?l.attr("fontWeight",800):l.attr("fontWeight",500)}if(r&&r.startsWith("tableHighlight")){const o=t.get("keyShape").get("parent").get("children")[1];e?(o.attr("fill","red"),o.attr("fontWeight",800)):(o.attr("fill","red"),o.attr("fontWeight",500))}if(r&&r.startsWith("fill")){const a=t.get("keyShape"),o=a.get("parent").get("children")[0],s=a.get("parent").get("children")[1],l=a.get("parent").get("children")[2];e?(o.attr("fill",r.split("-")[1]),s.attr("fill","#fff"),l.attr("stroke",r.split("-")[1])):(o.attr("fill",(n=lx[t.getModel().level])==null?void 0:n.fill),s.attr("fill","#fff"),l.attr("stroke",(i=lx[t.getModel().level])==null?void 0:i.fill))}},getAnchorPoints(){return[[0,0],[1,0]]}});Vu.registerEdge("dice-er-edge",{draw:function(e,t){const n=t.cfg.item,i=e.style,a=n.getSource().getModel(),o=n.getTarget().getModel(),s=a.attrs.findIndex(g=>g.key===e.sourceAnchor),l=a.startIndex||0;let u=Si/2+M_/2;s>l-1&&(u=Si+(s-l+.5)*Si);const c=o.attrs.findIndex(g=>g.key===e.targetAnchor),f=o.startIndex||0;let h=Si/2+M_/2;c>f-1&&(h=(c-f+.5)*Si+Si);const d={...e.startPoint},v={...e.endPoint};d.y=d.y+u,v.y=v.y+h;let p;return a.id!==o.id&&(p=t.addShape("path",{attrs:{stroke:i.stroke,lineWidth:i.lineWidth,path:[["M",d.x,d.y],["C",v.x/3+2/3*d.x,d.y,v.x/3+2/3*d.x,v.y,v.x,v.y]],endArrow:!0},name:"path-shape"})),p},setState(r,e,t){const n=t.get("keyShape");if(r&&r.startsWith("highlight")){const i=r.split("-")[1];e?(n.attr("stroke",i),n.attr("lineWidth",3)):(n.attr("stroke","#6C6B6B"),n.attr("lineWidth",2))}}});const JD=r=>{const e=[],t=new Map,n=new Set;r.forEach(a=>{const o=a.targetField,s=T1(o);n.add(s),a.refFields&&k5e(t,n,s,a.refFields)}),L5e(e,n);const i=Array.from(t.values());return{nodes:e,edges:i}},k5e=(r,e,t,n)=>{const i=nh(t),a=i.tableName,o=i.tableField;n.forEach(s=>{const l=T1(s);e.add(l);const u=nh(l),c=u.tableName,f=u.tableField;if(a===c)return;const h={};h.source=c,h.sourceAnchor=f,h.target=a,h.targetAnchor=o,h.label=s.label;let d=c+f+"-"+a+o;r.set(d,h)})},T1=r=>{const e=r.fieldName;let t="";return r.final?t=e:r.level===void 0?t=`${e}`:t=`${r.level}-0:${e}`,t},nh=r=>{const e=r.split(":");let t="",n="";if(e.length===1){const i=e[0].split(".");t=i[1],n=i[2]}else{const i=e[1].split(".");t=i[1]+"_"+e[0],n=i[2]}return{tableName:t,tableField:n}},Tj=r=>{let e=T5e,t=0;const n=/\$\$[^$]*\$\$/g,i=r.match(n);if(i){const a=i[0].split(",");e=Number(a[1].replace("$$",""))}return{level:e,order:t}},L5e=(r,e)=>{const t=new Map;e.forEach(n=>{const i=nh(n),a=i.tableName,o=i.tableField;if(!t.has(a))t.set(a,[o]);else{const s=t.get(a);s!=null&&s.includes(o)||(s==null||s.push(o),t.set(a,s))}}),t.forEach((n,i,a)=>{const o=[];n.forEach(f=>{o.push({nodeId:i,key:f,type:""})});const{level:s,order:l}=Tj(i),u=Si*(o.length+1),c={id:i,key:i,label:i.replace(/\$\$[^$]*\$\$/g,""),x:100,y:100,level:s,order:l,attrs:o,size:[Vd,u]};r.push(c)})},I5e=r=>{const e=[],t=new Map,n=new Set;r.forEach(a=>{const o=a.targetField,s=T1(o);n.add(s),a.refFields&&O5e(t,n,s,a.refFields)});const i=Array.from(t.values());return N5e(e,n),{nodes:e,edges:i}},O5e=(r,e,t,n)=>{const a=nh(t).tableName;n.forEach(o=>{const s=T1(o);e.add(s);const u=nh(s).tableName;if(a===u)return;const c={};c.source=u,c.sourceAnchor=u,c.target=a,c.targetAnchor=a,c.label=o.label;let f=u+"-"+a;r.set(f,c)})},N5e=(r,e)=>{const t=new Set;e.forEach(n=>{const a=nh(n).tableName;t.add(a)}),t.forEach((n,i)=>{const{level:a,order:o}=Tj(n),s={id:n,key:n,label:n.replace(/\$\$[^$]*\$\$/g,""),x:100,y:100,level:a,order:o,attrs:[],size:[Vd,Si]};r.push(s)})},C_=(r,e,t,n)=>{const i=e.id;r.filter(a=>!n.includes(a)).forEach(a=>{if(a.getModel().target===i&&a.getModel().targetAnchor===t){n.push(a);const o=a.getSource(),s=o.getModel(),l=o.getInEdges(),u=a.getModel().sourceAnchor;C_(l,s,u,n)}})},A_=(r,e,t,n)=>{const i=e.id;r.filter(a=>!n.includes(a)).forEach(a=>{if(a.getModel().source===i&&a.getModel().sourceAnchor===t){n.push(a);const o=a.getTarget(),s=o.getModel(),l=o.getOutEdges(),u=a.getModel().targetAnchor;A_(l,s,u,n)}})},T_=({relationData:r})=>{const e=[];return r.forEach(t=>{var a,o;let n={},i=[];(a=t.targetColumns)!=null&&a.length&&(n={id:t.targetColumns[0].columnName+"_"+t.targetColumns[0].columnId,fieldName:"default."+t.targetColumns[0].columnParentName+"$$"+t.targetColumns[0].columnParentId+","+t.targetColumns[0].level+"$$."+t.targetColumns[0].columnName}),(o=t.sourceColumns)!=null&&o.length&&(i=t.sourceColumns.map(s=>({id:s.columnName+"_"+s.columnId,fieldName:"default."+s.columnParentName+"$$"+s.columnParentId+","+s.level+"$$."+s.columnName}))),e.push({targetField:n,refFields:i})}),e},k_=(r,e={_table:"table",_midTable:"rs",_endTable:"re",_relation:"relation",_relationId:"id",_column:"column",_tableId:"id",_tableName:"name",_columnId:"id",_columnName:"name",_target:"target",_source:"source",_targetId:"columnId",_sourceId:"columnId",_targetName:"columnName",_sourceName:"columnName"})=>{const{_table:t,_midTable:n,_endTable:i,_relation:a,_relationId:o,_column:s,_tableId:l,_tableName:u,_columnId:c,_columnName:f,_target:h,_source:d,_targetId:v,_sourceId:p,_targetName:g,_sourceName:m}=e,w=new DOMParser().parseFromString(r,"text/xml"),b=w.getElementsByTagName(t),x=w.getElementsByTagName(n),S=w.getElementsByTagName(i),_=w.getElementsByTagName(a),M=Array.from(b).map(C=>{const k=C.getAttribute(l),L=C.getAttribute(u),I=Array.from(C.getElementsByTagName(s)).map(O=>{const N=O.getAttribute(f),D=O.getAttribute(c);return{columnName:N,columnId:D}});return{tableId:k,tableName:L,tableColumns:I,level:0}}),A=Array.from(x).map(C=>{const k=C.getAttribute(l),L=C.getAttribute(u),I=Array.from(C.getElementsByTagName(s)).map(O=>{const N=O.getAttribute(f),D=O.getAttribute(c);return{columnName:N,columnId:D}});return{tableId:k,tableName:L,tableColumns:I,level:1}}),E=Array.from(S).map(C=>{const k=C.getAttribute(l),L=C.getAttribute(u),I=Array.from(C.getElementsByTagName(s)).map(O=>{const N=O.getAttribute(f),D=O.getAttribute(c);return{columnName:N,columnId:D}});return{tableId:k,tableName:L,tableColumns:I,level:2}}),T=Array.from(_).map(C=>{const k=C.getAttribute(o),L=Array.from(C.getElementsByTagName(h)).map(O=>{const N=O.getAttribute(g),D=O.getAttribute(v),$=[...M,...A,...E].find(G=>G.tableColumns.find(z=>z.columnId===D)),R=$==null?void 0:$.tableId,B=$==null?void 0:$.tableName,j=$==null?void 0:$.level;return{columnName:N,columnId:D,columnParentId:R,columnParentName:B,level:j}}),I=Array.from(C.getElementsByTagName(d)).map(O=>{const N=O.getAttribute(m),D=O.getAttribute(p),$=[...M,...A,...E].find(G=>G.tableColumns.find(z=>z.columnId===D)),R=$==null?void 0:$.tableId,B=$==null?void 0:$.tableName,j=$==null?void 0:$.level;return{columnName:N,columnParentId:R,columnParentName:B,columnId:D,level:j}});return{relationId:k,targetColumns:L,sourceColumns:I}});return{tableData:M,midTableData:A,endTableData:E,relationData:T}},$5e={class:"min-w-full text-gray-600"},D5e={class:"flex items-center justify-between px-5 py-3 shadow-md"},R5e={class:"flex items-center gap-4"},P5e=bt("span",{class:"text-2xl font-bold"},"血缘分析",-1),F5e={class:"flex items-center gap-4"},B5e=bt("svg",{t:"1724743992133",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4273",width:"20",height:"20"},[bt("path",{d:"M153.6 902.656a32.256 32.256 0 0 1 0-64h716.8a32.256 32.256 0 0 1 0 64z m390.656-665.6v494.592a32.256 32.256 0 0 1-64 0V237.056L236.032 481.28a31.744 31.744 0 1 1-45.056-45.056l294.912-295.424a36.864 36.864 0 0 1 51.2 0l294.912 294.912a31.744 31.744 0 0 1-45.056 45.056z",fill:"#5A5A68","p-id":"4274"})],-1),z5e=bt("svg",{t:"1724655351674",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4287",width:"20",height:"20"},[bt("path",{d:"M512 357c-85.5 0-155 69.5-155 155s69.5 155 155 155 155-69.5 155-155-69.5-155-155-155z m0 250c-52.4 0-95-42.6-95-95s42.6-95 95-95 95 42.6 95 95-42.6 95-95 95z",fill:"#B3B3B3","p-id":"4288"}),bt("path",{d:"M910.1 405.8c-1.9-7.8-6.9-14.5-13.8-18.6-6.9-4.1-15.1-5.3-22.9-3.3-33.6 8.7-69.3-7.3-86.8-38.8-17.6-31.8-13.2-72.6 10.8-99.3 10.7-11.9 10.2-30.1-1.1-41.4-48.4-48-107.8-83.4-171.9-102.3-15.9-4.7-32.5 4.4-37.2 20.2-10.4 34.8-40.6 58.2-75.2 58.2s-64.8-23.4-75.2-58.2c-4.7-15.8-21.4-24.9-37.2-20.2-64.1 18.9-123.5 54.2-171.9 102.3-11.3 11.3-11.9 29.5-1.1 41.4 24 26.7 28.5 67.5 10.8 99.3-17.5 31.5-53.2 47.5-86.8 38.8-7.8-2-16-0.8-22.9 3.3-6.9 4.1-11.8 10.8-13.8 18.6-8.6 34.6-12.9 70.4-12.9 106.5 0 33.6 3.8 67.2 11.3 99.6 1.8 8 6.8 14.8 13.9 19 7 4.2 15.4 5.3 23.3 3.2 34-9.3 70.1 6.5 87.9 38.5 18.5 33.3 13 75.1-13.2 101.9-11.5 11.7-11.5 30.4 0 42 48.5 49.4 108.6 85.8 173.6 105.3 7.9 2.4 16.4 1.4 23.6-2.7 7.1-4.1 12.3-11 14.2-19 8.8-37 40.3-62.8 76.5-62.8s67.7 25.8 76.5 62.8c1.9 8 7.1 14.9 14.2 19 4.6 2.7 9.8 4 15 4 2.9 0 5.8-0.4 8.6-1.3 65-19.5 125-55.9 173.6-105.3 11.5-11.7 11.5-30.4 0-42-26.2-26.7-31.7-68.6-13.2-101.9 17.8-32 53.9-47.8 87.9-38.5 7.9 2.2 16.3 1 23.3-3.2s12-11.1 13.9-19c7.5-32.5 11.3-66 11.3-99.6-0.2-36.1-4.6-71.9-13.1-106.5z m-51.7 165.6c-50.2-1.4-98.5 25.6-124.3 72-26.2 47.2-23.9 104.7 3.9 148.9-30.5 26.8-65.3 48.1-102.5 62.7-8.9-17.9-21.5-34-36.9-46.7-24.5-20.2-55.3-31.3-86.7-31.3-31.4 0-62.2 11.1-86.7 31.3-15.4 12.7-28 28.7-36.9 46.7-37.2-14.6-71.9-35.9-102.5-62.7 27.7-44.2 30.1-101.8 3.9-148.9-25.8-46.5-74-73.4-124.3-72-3-19.5-4.6-39.3-4.6-59.2 0-22.2 1.9-44.3 5.7-66 19.3 0.3 38.6-3.4 56.5-11.1 28.3-12.3 51.4-33.3 66.7-60.8 15-27 21-57.5 17.4-88.3-2.4-20.1-8.7-39.1-18.5-56.2 30.7-26.4 65.5-47.3 102.7-61.5 9.3 16.8 21.8 31.5 37.1 43.5 24.2 18.9 53.1 28.8 83.6 28.8 30.4 0 59.3-10 83.6-28.8 15.3-11.9 27.9-26.6 37.1-43.5 37.1 14.2 72 35.1 102.7 61.5-9.9 17-16.2 36-18.5 56.2-3.6 30.8 2.4 61.4 17.4 88.3 15.3 27.5 38.4 48.6 66.7 60.8 17.9 7.7 37.2 11.5 56.5 11.1 3.8 21.7 5.7 43.8 5.7 66-0.2 19.9-1.7 39.7-4.8 59.2z",fill:"#B3B3B3","p-id":"4289"})],-1),G5e={class:"flex justify-end"},j5e=_t({__name:"header",props:{waterMaker:{},highlight:{},layout:{},sourceColor:{},midColor:{},endColor:{}},emits:["update:waterMaker","update:highlight","update:layout","update:sourceColor","update:midColor","update:endColor","upload","render"],setup(r,{emit:e}){const t=r,n=e,i=Le({get(){return t.waterMaker},set(g){n("update:waterMaker",g)}}),a=Le({get(){return t.highlight},set(g){n("update:highlight",g)}}),o=Le({get(){return t.layout},set(g){n("update:layout",g)}}),s=Le({get(){return t.sourceColor},set(g){n("update:sourceColor",g)}}),l=Le({get(){return t.midColor},set(g){n("update:midColor",g)}}),u=Le({get(){return t.endColor},set(g){n("update:endColor",g)}}),c=()=>{f.value=!1},f=ut(!1),h=ut(),d=g=>{const m=new FileReader;m.onload=y=>{var w,b,x;try{if((w=y.target)!=null&&w.result){const{tableData:S,midTableData:_,endTableData:M,relationData:A}=k_((b=y.target)==null?void 0:b.result);n("upload",{withProcessData:{data:T_({tableData:[...S,..._,...M],relationData:A})}},(x=y.target)==null?void 0:x.result)}}catch(S){console.log(S),alert("文件解析失败")}},m.readAsText(g.raw)},v=g=>{h.value.clearFiles();const m=g[0];m.uid=sm(),h.value.handleStart(m)},p=()=>{n("render")};return(g,m)=>{const y=om,w=nie,b=bP,x=Pee,S=ane,_=Nre,M=$re,A=Ree,E=_ne;return We(),Mt("header",$5e,[bt("div",D5e,[bt("div",R5e,[P5e,St(y,{onClick:p,type:"primary"},{default:Nt(()=>[Ea("重新渲染")]),_:1})]),bt("div",F5e,[St(w,{ref_key:"upload",ref:h,"auto-upload":!1,class:"flex items-center",title:"上传","on-change":d,"on-exceed":v,"show-file-list":!1,limit:1,accept:"text/xml"},{trigger:Nt(()=>[St(y,{class:"!p-2"},{default:Nt(()=>[B5e]),_:1})]),_:1},512),St(E,{visible:f.value,placement:"bottom",title:"设置",width:300,teleported:!1},{reference:Nt(()=>[St(y,{class:"!p-2",onClick:m[0]||(m[0]=T=>f.value=!f.value)},{default:Nt(()=>[z5e]),_:1})]),default:Nt(()=>[St(A,{ref:"formRef","label-width":"auto"},{default:Nt(()=>[St(x,{label:"水印文字：",prop:"waterMaker"},{default:Nt(()=>[St(b,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=T=>i.value=T),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1}),St(x,{label:"选择线条高亮颜色：",prop:"highlight"},{default:Nt(()=>[St(S,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=T=>a.value=T),"show-alpha":""},null,8,["modelValue"])]),_:1}),St(x,{label:"起始表颜色：",prop:"sourceColor"},{default:Nt(()=>[St(S,{modelValue:s.value,"onUpdate:modelValue":m[3]||(m[3]=T=>s.value=T),"show-alpha":""},null,8,["modelValue"])]),_:1}),St(x,{label:"中间表颜色：",prop:"midColor"},{default:Nt(()=>[St(S,{modelValue:l.value,"onUpdate:modelValue":m[4]||(m[4]=T=>l.value=T),"show-alpha":""},null,8,["modelValue"])]),_:1}),St(x,{label:"最终表颜色：",prop:"endColor"},{default:Nt(()=>[St(S,{modelValue:u.value,"onUpdate:modelValue":m[5]||(m[5]=T=>u.value=T),"show-alpha":""},null,8,["modelValue"])]),_:1}),St(x,{label:"布局方式：",prop:"showLayout"},{default:Nt(()=>[St(M,{modelValue:o.value,"onUpdate:modelValue":m[6]||(m[6]=T=>o.value=T)},{default:Nt(()=>[St(_,{label:"asdie+main"},{default:Nt(()=>[Ea("编码区+内容区")]),_:1}),St(_,{label:"main"},{default:Nt(()=>[Ea("内容区")]),_:1}),St(_,{label:"asdie"},{default:Nt(()=>[Ea("编码区")]),_:1})]),_:1},8,["modelValue"])]),_:1}),bt("div",G5e,[St(y,{onClick:c},{default:Nt(()=>[Ea("关 闭")]),_:1})])]),_:1},512)]),_:1},8,["visible"])])])])}}});var kj={exports:{}};(function(r,e){(function(){var t="ace",n=function(){return this}();!n&&typeof window<"u"&&(n=window);var i=function(c,f,h){if(typeof c!="string"){i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=f),i.modules[c]||(i.payloads[c]=h,i.modules[c]=null)};i.modules={},i.payloads={};var a=function(c,f,h){if(typeof f=="string"){var d=l(c,f);if(d!=null)return h&&h(),d}else if(Object.prototype.toString.call(f)==="[object Array]"){for(var v=[],p=0,g=f.length;p<g;++p){var m=l(c,f[p]);if(m==null&&o.original)return;v.push(m)}return h&&h.apply(null,v)||!0}},o=function(c,f){var h=a("",c,f);return h==null&&o.original?o.original.apply(this,arguments):h},s=function(c,f){if(f.indexOf("!")!==-1){var h=f.split("!");return s(c,h[0])+"!"+s(c,h[1])}if(f.charAt(0)=="."){var d=c.split("/").slice(0,-1).join("/");for(f=d+"/"+f;f.indexOf(".")!==-1&&v!=f;){var v=f;f=f.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return f},l=function(c,f){f=s(c,f);var h=i.modules[f];if(!h){if(h=i.payloads[f],typeof h=="function"){var d={},v={id:f,uri:"",exports:d,packaged:!0},p=function(m,y){return a(f,m,y)},g=h(p,d,v);d=g||v.exports,i.modules[f]=d,delete i.payloads[f]}h=i.modules[f]=d||h}return h};function u(c){var f=n;n[c]||(n[c]={}),f=n[c],(!f.define||!f.define.packaged)&&(i.original=f.define,f.define=i,f.define.packaged=!0),(!f.require||!f.require.packaged)&&(o.original=f.require,f.require=o,f.require.packaged=!0)}u(t)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(t,n,i){function a(o,s,l){Object.defineProperty(o,s,{value:l,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||a(String.prototype,"startsWith",function(o,s){return s=s||0,this.lastIndexOf(o,s)===s}),String.prototype.endsWith||a(String.prototype,"endsWith",function(o,s){var l=this;(s===void 0||s>l.length)&&(s=l.length),s-=o.length;var u=l.indexOf(o,s);return u!==-1&&u===s}),String.prototype.repeat||a(String.prototype,"repeat",function(o){for(var s="",l=this;o>0;)o&1&&(s+=l),(o>>=1)&&(l+=l);return s}),String.prototype.includes||a(String.prototype,"includes",function(o,s){return this.indexOf(o,s)!=-1}),Object.assign||(Object.assign=function(o){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(o),l=1;l<arguments.length;l++){var u=arguments[l];u!=null&&Object.keys(u).forEach(function(c){s[c]=u[c]})}return s}),Object.values||(Object.values=function(o){return Object.keys(o).map(function(s){return o[s]})}),Array.prototype.find||a(Array.prototype,"find",function(o){for(var s=this.length,l=arguments[1],u=0;u<s;u++){var c=this[u];if(o.call(l,c,u,this))return c}}),Array.prototype.findIndex||a(Array.prototype,"findIndex",function(o){for(var s=this.length,l=arguments[1],u=0;u<s;u++){var c=this[u];if(o.call(l,c,u,this))return u}}),Array.prototype.includes||a(Array.prototype,"includes",function(o,s){return this.indexOf(o,s)!=-1}),Array.prototype.fill||a(Array.prototype,"fill",function(o){for(var s=this,l=s.length>>>0,u=arguments[1],c=u>>0,f=c<0?Math.max(l+c,0):Math.min(c,l),h=arguments[2],d=h===void 0?l:h>>0,v=d<0?Math.max(l+d,0):Math.min(d,l);f<v;)s[f]=o,f++;return s}),Array.of||a(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(t,n,i){t("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(t,n,i){n.deepCopy=function a(o){if(typeof o!="object"||!o)return o;var s;if(Array.isArray(o)){s=[];for(var l=0;l<o.length;l++)s[l]=a(o[l]);return s}if(Object.prototype.toString.call(o)!=="[object Object]")return o;s={};for(var l in o)s[l]=a(o[l]);return s}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(t,n,i){n.last=function(s){return s[s.length-1]},n.stringReverse=function(s){return s.split("").reverse().join("")},n.stringRepeat=function(s,l){for(var u="";l>0;)l&1&&(u+=s),(l>>=1)&&(s+=s);return u};var a=/^\s\s*/,o=/\s\s*$/;n.stringTrimLeft=function(s){return s.replace(a,"")},n.stringTrimRight=function(s){return s.replace(o,"")},n.copyObject=function(s){var l={};for(var u in s)l[u]=s[u];return l},n.copyArray=function(s){for(var l=[],u=0,c=s.length;u<c;u++)s[u]&&typeof s[u]=="object"?l[u]=this.copyObject(s[u]):l[u]=s[u];return l},n.deepCopy=t("./deep_copy").deepCopy,n.arrayToMap=function(s){for(var l={},u=0;u<s.length;u++)l[s[u]]=1;return l},n.createMap=function(s){var l=Object.create(null);for(var u in s)l[u]=s[u];return l},n.arrayRemove=function(s,l){for(var u=0;u<=s.length;u++)l===s[u]&&s.splice(u,1)},n.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},n.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},n.getMatchOffsets=function(s,l){var u=[];return s.replace(l,function(c){u.push({offset:arguments[arguments.length-2],length:c.length})}),u},n.deferredCall=function(s){var l=null,u=function(){l=null,s()},c=function(f){return c.cancel(),l=setTimeout(u,f||0),c};return c.schedule=c,c.call=function(){return this.cancel(),s(),c},c.cancel=function(){return clearTimeout(l),l=null,c},c.isPending=function(){return l},c},n.delayedCall=function(s,l){var u=null,c=function(){u=null,s()},f=function(h){u==null&&(u=setTimeout(c,h||l))};return f.delay=function(h){u&&clearTimeout(u),u=setTimeout(c,h||l)},f.schedule=f,f.call=function(){this.cancel(),s()},f.cancel=function(){u&&clearTimeout(u),u=null},f.isPending=function(){return u},f},n.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},n.skipEmptyMatch=function(s,l,u){return u&&s.codePointAt(l)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,n,i){n.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},n.getOS=function(){return n.isMac?n.OS.MAC:n.isLinux?n.OS.LINUX:n.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},o=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),s=a.userAgent||"",l=a.appName||"";n.isWin=o=="win",n.isMac=o=="mac",n.isLinux=o=="linux",n.isIE=l=="Microsoft Internet Explorer"||l.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),n.isOldIE=n.isIE&&n.isIE<9,n.isGecko=n.isMozilla=s.match(/ Gecko\/\d+/),n.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",n.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,n.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,n.isSafari=parseFloat(s.split(" Safari/")[1])&&!n.isChrome||void 0,n.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,n.isAIR=s.indexOf("AdobeAIR")>=0,n.isAndroid=s.indexOf("Android")>=0,n.isChromeOS=s.indexOf(" CrOS ")>=0,n.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,n.isIOS&&(n.isMac=!0),n.isMobile=n.isIOS||n.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(t,n,i){var a=t("./useragent"),o="http://www.w3.org/1999/xhtml";n.buildDom=function h(d,v,p){if(typeof d=="string"&&d){var g=document.createTextNode(d);return v&&v.appendChild(g),g}if(!Array.isArray(d))return d&&d.appendChild&&v&&v.appendChild(d),d;if(typeof d[0]!="string"||!d[0]){for(var m=[],y=0;y<d.length;y++){var w=h(d[y],v,p);w&&m.push(w)}return m}var b=document.createElement(d[0]),x=d[1],S=1;x&&typeof x=="object"&&!Array.isArray(x)&&(S=2);for(var y=S;y<d.length;y++)h(d[y],b,p);return S==2&&Object.keys(x).forEach(function(_){var M=x[_];_==="class"?b.className=Array.isArray(M)?M.join(" "):M:typeof M=="function"||_=="value"||_[0]=="$"?b[_]=M:_==="ref"?p&&(p[M]=b):_==="style"?typeof M=="string"&&(b.style.cssText=M):M!=null&&b.setAttribute(_,M)}),v&&v.appendChild(b),b},n.getDocumentHead=function(h){return h||(h=document),h.head||h.getElementsByTagName("head")[0]||h.documentElement},n.createElement=function(h,d){return document.createElementNS?document.createElementNS(d||o,h):document.createElement(h)},n.removeChildren=function(h){h.innerHTML=""},n.createTextNode=function(h,d){var v=d?d.ownerDocument:document;return v.createTextNode(h)},n.createFragment=function(h){var d=h?h.ownerDocument:document;return d.createDocumentFragment()},n.hasCssClass=function(h,d){var v=(h.className+"").split(/\s+/g);return v.indexOf(d)!==-1},n.addCssClass=function(h,d){n.hasCssClass(h,d)||(h.className+=" "+d)},n.removeCssClass=function(h,d){for(var v=h.className.split(/\s+/g);;){var p=v.indexOf(d);if(p==-1)break;v.splice(p,1)}h.className=v.join(" ")},n.toggleCssClass=function(h,d){for(var v=h.className.split(/\s+/g),p=!0;;){var g=v.indexOf(d);if(g==-1)break;p=!1,v.splice(g,1)}return p&&v.push(d),h.className=v.join(" "),p},n.setCssClass=function(h,d,v){v?n.addCssClass(h,d):n.removeCssClass(h,d)},n.hasCssString=function(h,d){var v=0,p;if(d=d||document,p=d.querySelectorAll("style")){for(;v<p.length;)if(p[v++].id===h)return!0}},n.removeElementById=function(h,d){d=d||document,d.getElementById(h)&&d.getElementById(h).remove()};var s,l=[];n.useStrictCSP=function(h){s=h,h==!1?u():l||(l=[])};function u(){var h=l;l=null,h&&h.forEach(function(d){c(d[0],d[1])})}function c(h,d,v){if(!(typeof document>"u")){if(l){if(v)u();else if(v===!1)return l.push([h,d])}if(!s){var p=v;!v||!v.getRootNode?p=document:(p=v.getRootNode(),(!p||p==v)&&(p=document));var g=p.ownerDocument||p;if(d&&n.hasCssString(d,p))return null;d&&(h+=`
/*# sourceURL=ace/css/`+d+" */");var m=n.createElement("style");m.appendChild(g.createTextNode(h)),d&&(m.id=d),p==g&&(p=n.getDocumentHead(g)),p.insertBefore(m,p.firstChild)}}}if(n.importCssString=c,n.importCssStylsheet=function(h,d){n.buildDom(["link",{rel:"stylesheet",href:h}],n.getDocumentHead(d))},n.scrollbarWidth=function(h){var d=n.createElement("ace_inner");d.style.width="100%",d.style.minWidth="0px",d.style.height="200px",d.style.display="block";var v=n.createElement("ace_outer"),p=v.style;p.position="absolute",p.left="-10000px",p.overflow="hidden",p.width="200px",p.minWidth="0px",p.height="150px",p.display="block",v.appendChild(d);var g=h&&h.documentElement||document&&document.documentElement;if(!g)return 0;g.appendChild(v);var m=d.offsetWidth;p.overflow="scroll";var y=d.offsetWidth;return m===y&&(y=v.clientWidth),g.removeChild(v),m-y},n.computedStyle=function(h,d){return window.getComputedStyle(h,"")||{}},n.setStyle=function(h,d,v){h[d]!==v&&(h[d]=v)},n.HAS_CSS_ANIMATION=!1,n.HAS_CSS_TRANSFORMS=!1,n.HI_DPI=a.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,a.isChromeOS&&(n.HI_DPI=!1),typeof document<"u"){var f=document.createElement("div");n.HI_DPI&&f.style.transform!==void 0&&(n.HAS_CSS_TRANSFORMS=!0),!a.isEdge&&typeof f.style.animationName<"u"&&(n.HAS_CSS_ANIMATION=!0),f=null}n.HAS_CSS_TRANSFORMS?n.translate=function(h,d,v){h.style.transform="translate("+Math.round(d)+"px, "+Math.round(v)+"px)"}:n.translate=function(h,d,v){h.style.top=Math.round(v)+"px",h.style.left=Math.round(d)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,n,i){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var a=t("./dom");n.get=function(o,s){var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){l.readyState===4&&s(l.responseText)},l.send(null)},n.loadScript=function(o,s){var l=a.getDocumentHead(),u=document.createElement("script");u.src=o,l.appendChild(u),u.onload=u.onreadystatechange=function(c,f){(f||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,f||s())}},n.qualifyURL=function(o){var s=document.createElement("a");return s.href=o,s.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,n,i){n.inherits=function(a,o){a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},n.mixin=function(a,o){for(var s in o)a[s]=o[s];return a},n.implement=function(a,o){n.mixin(a,o)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,n,i){var a={},o=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(l,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var c=this._eventRegistry[l]||[],f=this._defaultHandlers[l];if(!(!c.length&&!f)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=l),u.stopPropagation||(u.stopPropagation=o),u.preventDefault||(u.preventDefault=s),c=c.slice();for(var h=0;h<c.length&&(c[h](u,this),!u.propagationStopped);h++);if(f&&!u.defaultPrevented)return f(u,this)}},a._signal=function(l,u){var c=(this._eventRegistry||{})[l];if(c){c=c.slice();for(var f=0;f<c.length;f++)c[f](u,this)}},a.once=function(l,u){var c=this;if(this.on(l,function f(){c.off(l,f),u.apply(null,arguments)}),!u)return new Promise(function(f){u=f})},a.setDefaultHandler=function(l,u){var c=this._defaultHandlers;if(c||(c=this._defaultHandlers={_disabled_:{}}),c[l]){var f=c[l],h=c._disabled_[l];h||(c._disabled_[l]=h=[]),h.push(f);var d=h.indexOf(u);d!=-1&&h.splice(d,1)}c[l]=u},a.removeDefaultHandler=function(l,u){var c=this._defaultHandlers;if(c){var f=c._disabled_[l];if(c[l]==u)f&&this.setDefaultHandler(l,f.pop());else if(f){var h=f.indexOf(u);h!=-1&&f.splice(h,1)}}},a.on=a.addEventListener=function(l,u,c){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[l];return f||(f=this._eventRegistry[l]=[]),f.indexOf(u)==-1&&f[c?"unshift":"push"](u),u},a.off=a.removeListener=a.removeEventListener=function(l,u){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[l];if(c){var f=c.indexOf(u);f!==-1&&c.splice(f,1)}},a.removeAllListeners=function(l){l||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[l]=void 0),this._defaultHandlers&&(this._defaultHandlers[l]=void 0)},n.EventEmitter=a}),ace.define("ace/lib/report_error",["require","exports","module"],function(t,n,i){n.reportError=function(o,s){var l=new Error(o);l.data=s,typeof console=="object"&&console.error&&console.error(l),setTimeout(function(){throw l})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(t,n,i){var a={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};n.defaultEnglishMessages=a}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(t,n,i){"no use strict";var a=t("./oop"),o=t("./event_emitter").EventEmitter,s=t("./report_error").reportError,l=t("./default_english_messages").defaultEnglishMessages,u={setOptions:function(v){Object.keys(v).forEach(function(p){this.setOption(p,v[p])},this)},getOptions:function(v){var p={};if(v)Array.isArray(v)||(p=v,v=Object.keys(p));else{var g=this.$options;v=Object.keys(g).filter(function(m){return!g[m].hidden})}return v.forEach(function(m){p[m]=this.getOption(m)},this),p},setOption:function(v,p){if(this["$"+v]!==p){var g=this.$options[v];if(!g)return c('misspelled option "'+v+'"');if(g.forwardTo)return this[g.forwardTo]&&this[g.forwardTo].setOption(v,p);g.handlesSet||(this["$"+v]=p),g&&g.set&&g.set.call(this,p)}},getOption:function(v){var p=this.$options[v];return p?p.forwardTo?this[p.forwardTo]&&this[p.forwardTo].getOption(v):p&&p.get?p.get.call(this):this["$"+v]:c('misspelled option "'+v+'"')}};function c(v){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var f,h,d=function(){function v(){this.$defaultOptions={},f=l,h="dollarSigns"}return v.prototype.defineOptions=function(p,g,m){return p.$options||(this.$defaultOptions[g]=p.$options={}),Object.keys(m).forEach(function(y){var w=m[y];typeof w=="string"&&(w={forwardTo:w}),w.name||(w.name=y),p.$options[w.name]=w,"initialValue"in w&&(p["$"+w.name]=w.initialValue)}),a.implement(p,u),this},v.prototype.resetOptions=function(p){Object.keys(p.$options).forEach(function(g){var m=p.$options[g];"value"in m&&p.setOption(g,m.value)})},v.prototype.setDefaultValue=function(p,g,m){if(!p){for(p in this.$defaultOptions)if(this.$defaultOptions[p][g])break;if(!this.$defaultOptions[p][g])return!1}var y=this.$defaultOptions[p]||(this.$defaultOptions[p]={});y[g]&&(y.forwardTo?this.setDefaultValue(y.forwardTo,g,m):y[g].value=m)},v.prototype.setDefaultValues=function(p,g){Object.keys(g).forEach(function(m){this.setDefaultValue(p,m,g[m])},this)},v.prototype.setMessages=function(p,g){f=p,g&&g.placeholders&&(h=g.placeholders)},v.prototype.nls=function(p,g,m){f[p]||(c("No message found for the key '"+p+"' in the provided messages, trying to find a translation for the default string '"+g+"'."),f[g]||c("No message found for the default string '"+g+"' in the provided messages. Falling back to the default English message."));var y=f[p]||f[g]||g;return m&&(h==="dollarSigns"&&(y=y.replace(/\$(\$|[\d]+)/g,function(w,b){return b=="$"?"$":m[b]})),h==="curlyBrackets"&&(y=y.replace(/\{([^\}]+)\}/g,function(w,b){return m[b]}))),y},v}();d.prototype.warn=c,d.prototype.reportError=s,a.implement(d.prototype,o),n.AppConfig=d}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(t,n,i){i.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(t,n,i){n.isDark=!1,n.cssClass="ace-tm",n.cssText=t("./textmate-css"),n.$id="ace/theme/textmate";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(t,n,i){"no use strict";var a=t("./lib/lang"),o=t("./lib/net"),s=t("./lib/dom"),l=t("./lib/app_config").AppConfig;i.exports=n=new l;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};n.get=function(d){if(!u.hasOwnProperty(d))throw new Error("Unknown config key: "+d);return u[d]},n.set=function(d,v){if(u.hasOwnProperty(d))u[d]=v;else if(this.setDefaultValue("",d,v)==!1)throw new Error("Unknown config key: "+d);d=="useStrictCSP"&&s.useStrictCSP(v)},n.all=function(){return a.copyObject(u)},n.$modes={},n.moduleUrl=function(d,v){if(u.$moduleUrls[d])return u.$moduleUrls[d];var p=d.split("/");v=v||p[p.length-2]||"";var g=v=="snippets"?"/":"-",m=p[p.length-1];if(v=="worker"&&g=="-"){var y=new RegExp("^"+v+"[\\-_]|[\\-_]"+v+"$","g");m=m.replace(y,"")}(!m||m==v)&&p.length>1&&(m=p[p.length-2]);var w=u[v+"Path"];return w==null?w=u.basePath:g=="/"&&(v=g=""),w&&w.slice(-1)!="/"&&(w+="/"),w+v+g+m+this.get("suffix")},n.setModuleUrl=function(d,v){return u.$moduleUrls[d]=v};var c=function(d,v){if(d==="ace/theme/textmate"||d==="./theme/textmate")return v(null,t("./theme/textmate"));if(f)return f(d,v);console.error("loader is not configured")},f;n.setLoader=function(d){f=d},n.dynamicModules=Object.create(null),n.$loading={},n.$loaded={},n.loadModule=function(d,v){var p;if(Array.isArray(d))var g=d[0],m=d[1];else if(typeof d=="string")var m=d;var y=function(w){if(w&&!n.$loading[m])return v&&v(w);if(n.$loading[m]||(n.$loading[m]=[]),n.$loading[m].push(v),!(n.$loading[m].length>1)){var b=function(){c(m,function(x,S){S&&(n.$loaded[m]=S),n._emit("load.module",{name:m,module:S});var _=n.$loading[m];n.$loading[m]=null,_.forEach(function(M){M&&M(S)})})};if(!n.get("packaged"))return b();o.loadScript(n.moduleUrl(m,g),b),h()}};if(n.dynamicModules[m])n.dynamicModules[m]().then(function(w){w.default?y(w.default):y(w)});else{try{p=this.$require(m)}catch{}y(p||n.$loaded[m])}},n.$require=function(d){if(typeof i.require=="function"){var v="require";return i[v](d)}},n.setModuleLoader=function(d,v){n.dynamicModules[d]=v};var h=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};n.version="1.36.0"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(t,n,i){t("./lib/fixoldbrowsers");var a=t("./config");a.setLoader(function(u,c){t([u],function(f){c(null,f)})});var o=function(){return this||typeof window<"u"&&window}();i.exports=function(u){a.init=s,a.$require=t,u.require=t},s(!0);function s(u){if(!(!o||!o.document)){a.set("packaged",u||t.packaged||i.packaged||o.define&&(void 0).packaged);var c={},f="",h=document.currentScript||document._currentScript,d=h&&h.ownerDocument||document;h&&h.src&&(f=h.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var v=d.getElementsByTagName("script"),p=0;p<v.length;p++){var g=v[p],m=g.src||g.getAttribute("src");if(m){for(var y=g.attributes,w=0,b=y.length;w<b;w++){var x=y[w];x.name.indexOf("data-ace-")===0&&(c[l(x.name.replace(/^data-ace-/,""))]=x.value)}var S=m.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(f=S[1])}}f&&(c.base=c.base||f,c.packaged=!0),c.basePath=c.base,c.workerPath=c.workerPath||c.base,c.modePath=c.modePath||c.base,c.themePath=c.themePath||c.base,delete c.base;for(var _ in c)typeof c[_]<"u"&&a.set(_,c[_])}}function l(u){return u.replace(/-(.)/g,function(c,f){return f.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(t,n,i){var a=function(){function o(s,l,u,c){this.start={row:s,column:l},this.end={row:u,column:c}}return o.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},o.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},o.prototype.contains=function(s,l){return this.compare(s,l)==0},o.prototype.compareRange=function(s){var l,u=s.end,c=s.start;return l=this.compare(u.row,u.column),l==1?(l=this.compare(c.row,c.column),l==1?2:l==0?1:0):l==-1?-2:(l=this.compare(c.row,c.column),l==-1?-1:l==1?42:0)},o.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},o.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},o.prototype.intersects=function(s){var l=this.compareRange(s);return l==-1||l==0||l==1},o.prototype.isEnd=function(s,l){return this.end.row==s&&this.end.column==l},o.prototype.isStart=function(s,l){return this.start.row==s&&this.start.column==l},o.prototype.setStart=function(s,l){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=l)},o.prototype.setEnd=function(s,l){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=l)},o.prototype.inside=function(s,l){return this.compare(s,l)==0?!(this.isEnd(s,l)||this.isStart(s,l)):!1},o.prototype.insideStart=function(s,l){return this.compare(s,l)==0?!this.isEnd(s,l):!1},o.prototype.insideEnd=function(s,l){return this.compare(s,l)==0?!this.isStart(s,l):!1},o.prototype.compare=function(s,l){return!this.isMultiLine()&&s===this.start.row?l<this.start.column?-1:l>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?l>=this.start.column?0:-1:this.end.row===s?l<=this.end.column?0:1:0},o.prototype.compareStart=function(s,l){return this.start.row==s&&this.start.column==l?-1:this.compare(s,l)},o.prototype.compareEnd=function(s,l){return this.end.row==s&&this.end.column==l?1:this.compare(s,l)},o.prototype.compareInside=function(s,l){return this.end.row==s&&this.end.column==l?1:this.start.row==s&&this.start.column==l?-1:this.compare(s,l)},o.prototype.clipRows=function(s,l){if(this.end.row>l)var u={row:l+1,column:0};else if(this.end.row<s)var u={row:s,column:0};if(this.start.row>l)var c={row:l+1,column:0};else if(this.start.row<s)var c={row:s,column:0};return o.fromPoints(c||this.start,u||this.end)},o.prototype.extend=function(s,l){var u=this.compare(s,l);if(u==0)return this;if(u==-1)var c={row:s,column:l};else var f={row:s,column:l};return o.fromPoints(c||this.start,f||this.end)},o.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},o.prototype.isMultiLine=function(){return this.start.row!==this.end.row},o.prototype.clone=function(){return o.fromPoints(this.start,this.end)},o.prototype.collapseRows=function(){return this.end.column==0?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},o.prototype.toScreenRange=function(s){var l=s.documentToScreenPosition(this.start),u=s.documentToScreenPosition(this.end);return new o(l.row,l.column,u.row,u.column)},o.prototype.moveBy=function(s,l){this.start.row+=s,this.start.column+=l,this.end.row+=s,this.end.column+=l},o}();a.fromPoints=function(o,s){return new a(o.row,o.column,s.row,s.column)},a.comparePoints=function(o,s){return o.row-s.row||o.column-s.column},n.Range=a}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(t,n,i){for(var a=t("./oop"),o={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},s={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},l=0;l<10;l++)s["Digit"+l]=48+l,s["Numpad"+l]=96+l,o.PRINTABLE_KEYS[48+l]=""+l,o.FUNCTION_KEYS[96+l]="Numpad"+l;for(var l=65;l<91;l++){var u=String.fromCharCode(l+32);s["Key"+u.toUpperCase()]=l,o.PRINTABLE_KEYS[l]=u}for(var l=1;l<13;l++)s["F"+l]=111+l,o.FUNCTION_KEYS[111+l]="F"+l;var c={Shift:16,Control:17,Alt:18,Meta:224};for(var f in c)s[f]=s[f+"Left"]=s[f+"Right"]=c[f];n.$codeToKeyCode=s,o.PRINTABLE_KEYS[173]="-";for(var h in o.FUNCTION_KEYS){var d=o.FUNCTION_KEYS[h].toLowerCase();o[d]=parseInt(h,10)}for(var h in o.PRINTABLE_KEYS){var d=o.PRINTABLE_KEYS[h].toLowerCase();o[d]=parseInt(h,10)}a.mixin(o,o.MODIFIER_KEYS),a.mixin(o,o.PRINTABLE_KEYS),a.mixin(o,o.FUNCTION_KEYS),o.enter=o.return,o.escape=o.esc,o.del=o.delete,function(){for(var v=["cmd","ctrl","alt","shift"],p=Math.pow(2,v.length);p--;)o.KEY_MODS[p]=v.filter(function(g){return p&o.KEY_MODS[g]}).join("-")+"-"}(),o.KEY_MODS[0]="",o.KEY_MODS[-1]="input-",a.mixin(n,o),n.default=n,n.keyCodeToString=function(v){var p=o[v];return typeof p!="string"&&(p=String.fromCharCode(v)),p.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,i){var a=t("./keys"),o=t("./useragent"),s=null,l=0,u;function c(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function f(){return u==null&&c(),u}function h(w,b,x){this.elem=w,this.type=b,this.callback=x}h.prototype.destroy=function(){v(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var d=n.addListener=function(w,b,x,S){w.addEventListener(b,x,f()),S&&S.$toDestroy.push(new h(w,b,x))},v=n.removeListener=function(w,b,x){w.removeEventListener(b,x,f())};n.stopEvent=function(w){return n.stopPropagation(w),n.preventDefault(w),!1},n.stopPropagation=function(w){w.stopPropagation&&w.stopPropagation()},n.preventDefault=function(w){w.preventDefault&&w.preventDefault()},n.getButton=function(w){return w.type=="dblclick"?0:w.type=="contextmenu"||o.isMac&&w.ctrlKey&&!w.altKey&&!w.shiftKey?2:w.button},n.capture=function(w,b,x){var S=w&&w.ownerDocument||document;function _(M){b&&b(M),x&&x(M),v(S,"mousemove",b),v(S,"mouseup",_),v(S,"dragstart",_)}return d(S,"mousemove",b),d(S,"mouseup",_),d(S,"dragstart",_),_},n.addMouseWheelListener=function(w,b,x){d(w,"wheel",function(S){var _=.15,M=S.deltaX||0,A=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=M*_,S.wheelY=A*_;break;case S.DOM_DELTA_LINE:var E=15;S.wheelX=M*E,S.wheelY=A*E;break;case S.DOM_DELTA_PAGE:var T=150;S.wheelX=M*T,S.wheelY=A*T;break}b(S)},x)},n.addMultiMouseDownListener=function(w,b,x,S,_){var M=0,A,E,T,C={2:"dblclick",3:"tripleclick",4:"quadclick"};function k(L){if(n.getButton(L)!==0?M=0:L.detail>1?(M++,M>4&&(M=1)):M=1,o.isIE){var I=Math.abs(L.clientX-A)>5||Math.abs(L.clientY-E)>5;(!T||I)&&(M=1),T&&clearTimeout(T),T=setTimeout(function(){T=null},b[M-1]||600),M==1&&(A=L.clientX,E=L.clientY)}if(L._clicks=M,x[S]("mousedown",L),M>4)M=0;else if(M>1)return x[S](C[M],L)}Array.isArray(w)||(w=[w]),w.forEach(function(L){d(L,"mousedown",k,_)})};function p(w){return 0|(w.ctrlKey?1:0)|(w.altKey?2:0)|(w.shiftKey?4:0)|(w.metaKey?8:0)}n.getModifierString=function(w){return a.KEY_MODS[p(w)]};function g(w,b,x){var S=p(b);if(!x&&b.code&&(x=a.$codeToKeyCode[b.code]||x),!o.isMac&&s){if(b.getModifierState&&(b.getModifierState("OS")||b.getModifierState("Win"))&&(S|=8),s.altGr)if((3&S)!=3)s.altGr=0;else return;if(x===18||x===17){var _=b.location;if(x===17&&_===1)s[x]==1&&(l=b.timeStamp);else if(x===18&&S===3&&_===2){var M=b.timeStamp-l;M<50&&(s.altGr=!0)}}}if(x in a.MODIFIER_KEYS&&(x=-1),!(!S&&x===13&&b.location===3&&(w(b,S,-x),b.defaultPrevented))){if(o.isChromeOS&&S&8){if(w(b,S,x),b.defaultPrevented)return;S&=-9}return!S&&!(x in a.FUNCTION_KEYS)&&!(x in a.PRINTABLE_KEYS)?!1:w(b,S,x)}}n.addCommandKeyListener=function(w,b,x){var S=null;d(w,"keydown",function(_){s[_.keyCode]=(s[_.keyCode]||0)+1;var M=g(b,_,_.keyCode);return S=_.defaultPrevented,M},x),d(w,"keypress",function(_){S&&(_.ctrlKey||_.altKey||_.shiftKey||_.metaKey)&&(n.stopEvent(_),S=null)},x),d(w,"keyup",function(_){s[_.keyCode]=null},x),s||(m(),d(window,"focus",m))};function m(){s=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!o.isOldIE){var y=1;n.nextTick=function(w,b){b=b||window;var x="zero-timeout-message-"+y++,S=function(_){_.data==x&&(n.stopPropagation(_),v(b,"message",S),w())};d(b,"message",S),b.postMessage(x,"*")}}n.$idleBlocked=!1,n.onIdle=function(w,b){return setTimeout(function x(){n.$idleBlocked?setTimeout(x,100):w()},b)},n.$idleBlockId=null,n.blockIdle=function(w){n.$idleBlockId&&clearTimeout(n.$idleBlockId),n.$idleBlocked=!0,n.$idleBlockId=setTimeout(function(){n.$idleBlocked=!1},w||100)},n.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),n.nextFrame?n.nextFrame=n.nextFrame.bind(window):n.nextFrame=function(w){setTimeout(w,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(t,n,i){var a;i.exports={lineMode:!1,pasteCancelled:function(){return a&&a>Date.now()-50?!0:a=!1},cancel:function(){a=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(t,n,i){var a=t("../lib/event"),o=t("../config").nls,s=t("../lib/useragent"),l=t("../lib/dom"),u=t("../lib/lang"),c=t("../clipboard"),f=s.isChrome<18,h=s.isIE,d=s.isChrome>63,v=400,p=t("../lib/keys"),g=p.KEY_MODS,m=s.isIOS,y=m?/\s/:/\n/,w=s.isMobile,b;b=function(x,S){var _=l.createElement("textarea");_.className="ace_text-input",_.setAttribute("wrap","off"),_.setAttribute("autocorrect","off"),_.setAttribute("autocapitalize","off"),_.setAttribute("spellcheck","false"),_.style.opacity="0",x.insertBefore(_,x.firstChild);var M=!1,A=!1,E=!1,T=!1,C="";w||(_.style.fontSize="1px");var k=!1,L=!1,I="",O=0,N=0,D=0,$=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER,B=0;try{var j=document.activeElement===_}catch{}this.setNumberOfExtraLines=function(X){if($=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER,X<0){B=0;return}B=X},this.setAriaOptions=function(X){if(X.activeDescendant?(_.setAttribute("aria-haspopup","true"),_.setAttribute("aria-autocomplete",X.inline?"both":"list"),_.setAttribute("aria-activedescendant",X.activeDescendant)):(_.setAttribute("aria-haspopup","false"),_.setAttribute("aria-autocomplete","both"),_.removeAttribute("aria-activedescendant")),X.role&&_.setAttribute("role",X.role),X.setLabel){_.setAttribute("aria-roledescription",o("text-input.aria-roledescription","editor"));var de="";if(S.$textInputAriaLabel&&(de+="".concat(S.$textInputAriaLabel,", ")),S.session){var xe=S.session.selection.cursor.row;de+=o("text-input.aria-label","Cursor at row $0",[xe+1])}_.setAttribute("aria-label",de)}},this.setAriaOptions({role:"textbox"}),a.addListener(_,"blur",function(X){L||(S.onBlur(X),j=!1)},S),a.addListener(_,"focus",function(X){if(!L){if(j=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(X),s.isEdge?setTimeout(z):z()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),C||d||this.$focusScroll=="browser")return _.focus({preventScroll:!0});var X=_.style.top;_.style.position="fixed",_.style.top="0px";try{var de=_.getBoundingClientRect().top!=0}catch{return}var xe=[];if(de)for(var ke=_.parentElement;ke&&ke.nodeType==1;)xe.push(ke),ke.setAttribute("ace_nocontext","true"),!ke.parentElement&&ke.getRootNode?ke=ke.getRootNode().host:ke=ke.parentElement;_.focus({preventScroll:!0}),de&&xe.forEach(function(Ge){Ge.removeAttribute("ace_nocontext")}),setTimeout(function(){_.style.position="",_.style.top=="0px"&&(_.style.top=X)},0)},this.blur=function(){_.blur()},this.isFocused=function(){return j},S.on("beforeEndOperation",function(){var X=S.curOp,de=X&&X.command&&X.command.name;if(de!="insertstring"){var xe=de&&(X.docChanged||X.selectionChanged);E&&xe&&(I=_.value="",$e()),z()}});var G=function(X,de){for(var xe=de,ke=1;ke<=X-$&&ke<2*B+1;ke++)xe+=S.session.getLine(X-ke).length+1;return xe},z=m?function(X){if(!(!j||M&&!X||T)){X||(X="");var de=`
 ab`+X+`cde fg
`;de!=_.value&&(_.value=I=de);var xe=4,ke=4+(X.length||(S.selection.isEmpty()?0:1));(O!=xe||N!=ke)&&_.setSelectionRange(xe,ke),O=xe,N=ke}}:function(){if(!(E||T)&&!(!j&&!se)){E=!0;var X=0,de=0,xe="";if(S.session){var ke=S.selection,Ge=ke.getRange(),vt=ke.cursor.row;vt===R+1?($=R+1,R=$+2*B):vt===$-1?(R=$-1,$=R-2*B):(vt<$-1||vt>R+1)&&($=vt>B?vt-B:0,R=vt>B?vt+B:2*B);for(var Lt=[],Kt=$;Kt<=R;Kt++)Lt.push(S.session.getLine(Kt));if(xe=Lt.join(`
`),X=G(Ge.start.row,Ge.start.column),de=G(Ge.end.row,Ge.end.column),Ge.start.row<$){var Ct=S.session.getLine($-1);X=Ge.start.row<$-1?0:X,de+=Ct.length+1,xe=Ct+`
`+xe}else if(Ge.end.row>R){var zt=S.session.getLine(R+1);de=Ge.end.row>R+1?zt.length:Ge.end.column,de+=xe.length+1,xe=xe+`
`+zt}else w&&vt>0&&(xe=`
`+xe,de+=1,X+=1);xe.length>v&&(X<v&&de<v?xe=xe.slice(0,v):(xe=`
`,X==de?X=de=0:(X=0,de=1)));var jt=xe+`

`;jt!=I&&(_.value=I=jt,O=N=jt.length)}if(se&&(O=_.selectionStart,N=_.selectionEnd),N!=de||O!=X||_.selectionEnd!=N)try{_.setSelectionRange(X,de),O=X,N=de}catch{}E=!1}};this.resetSelection=z,j&&S.onFocus();var W=function(X){return X.selectionStart===0&&X.selectionEnd>=I.length&&X.value===I&&I&&X.selectionEnd!==N},Q=function(X){E||(M?M=!1:W(_)?(S.selectAll(),z()):w&&_.selectionStart!=O&&z())},ie=null;this.setInputHandler=function(X){ie=X},this.getInputHandler=function(){return ie};var se=!1,ae=function(X,de){if(se&&(se=!1),A)return z(),X&&S.onPaste(X),A=!1,"";for(var xe=_.selectionStart,ke=_.selectionEnd,Ge=O,vt=I.length-N,Lt=X,Kt=X.length-xe,Ct=X.length-ke,zt=0;Ge>0&&I[zt]==X[zt];)zt++,Ge--;for(Lt=Lt.slice(zt),zt=1;vt>0&&I.length-zt>O-1&&I[I.length-zt]==X[X.length-zt];)zt++,vt--;Kt-=zt-1,Ct-=zt-1;var jt=Lt.length-zt+1;if(jt<0&&(Ge=-jt,jt=0),Lt=Lt.slice(0,jt),!de&&!Lt&&!Kt&&!Ge&&!vt&&!Ct)return"";T=!0;var pr=!1;return s.isAndroid&&Lt==". "&&(Lt="  ",pr=!0),Lt&&!Ge&&!vt&&!Kt&&!Ct||k?S.onTextInput(Lt):S.onTextInput(Lt,{extendLeft:Ge,extendRight:vt,restoreStart:Kt,restoreEnd:Ct}),T=!1,I=X,O=xe,N=ke,D=Ct,pr?`
`:Lt},pe=function(X){if(E)return Re();if(X&&X.inputType){if(X.inputType=="historyUndo")return S.execCommand("undo");if(X.inputType=="historyRedo")return S.execCommand("redo")}var de=_.value,xe=ae(de,!0);(de.length>v+100||y.test(xe)||w&&O<1&&O==N)&&z()},De=function(X,de,xe){var ke=X.clipboardData||window.clipboardData;if(!(!ke||f)){var Ge=h||xe?"Text":"text/plain";try{return de?ke.setData(Ge,de)!==!1:ke.getData(Ge)}catch(vt){if(!xe)return De(vt,de,!0)}}},Je=function(X,de){var xe=S.getCopyText();if(!xe)return a.preventDefault(X);De(X,xe)?(m&&(z(xe),M=xe,setTimeout(function(){M=!1},10)),de?S.onCut():S.onCopy(),a.preventDefault(X)):(M=!0,_.value=xe,_.select(),setTimeout(function(){M=!1,z(),de?S.onCut():S.onCopy()}))},ee=function(X){Je(X,!0)},ne=function(X){Je(X,!1)},me=function(X){var de=De(X);c.pasteCancelled()||(typeof de=="string"?(de&&S.onPaste(de,X),s.isIE&&setTimeout(z),a.preventDefault(X)):(_.value="",A=!0))};a.addCommandKeyListener(_,function(X,de,xe){if(!E)return S.onCommandKey(X,de,xe)},S),a.addListener(_,"select",Q,S),a.addListener(_,"input",pe,S),a.addListener(_,"cut",ee,S),a.addListener(_,"copy",ne,S),a.addListener(_,"paste",me,S),(!("oncut"in _)||!("oncopy"in _)||!("onpaste"in _))&&a.addListener(x,"keydown",function(X){if(!(s.isMac&&!X.metaKey||!X.ctrlKey))switch(X.keyCode){case 67:ne(X);break;case 86:me(X);break;case 88:ee(X);break}},S);var Fe=function(X){if(!(E||!S.onCompositionStart||S.$readOnly)&&(E={},!k)){X.data&&(E.useTextareaForIME=!1),setTimeout(Re,0),S._signal("compositionStart"),S.on("mousedown",Ke);var de=S.getSelectionRange();de.end.row=de.start.row,de.end.column=de.start.column,E.markerRange=de,E.selectionStart=O,S.onCompositionStart(E),E.useTextareaForIME?(I=_.value="",O=0,N=0):(_.msGetInputContext&&(E.context=_.msGetInputContext()),_.getInputContext&&(E.context=_.getInputContext()))}},Re=function(){if(!(!E||!S.onCompositionUpdate||S.$readOnly)){if(k)return Ke();if(E.useTextareaForIME)S.onCompositionUpdate(_.value);else{var X=_.value;ae(X),E.markerRange&&(E.context&&(E.markerRange.start.column=E.selectionStart=E.context.compositionStartOffset),E.markerRange.end.column=E.markerRange.start.column+N-E.selectionStart+D)}}},$e=function(X){!S.onCompositionEnd||S.$readOnly||(E=!1,S.onCompositionEnd(),S.off("mousedown",Ke),X&&pe())};function Ke(){L=!0,_.blur(),_.focus(),L=!1}var at=u.delayedCall(Re,50).schedule.bind(null,null);function Me(X){X.keyCode==27&&_.value.length<_.selectionStart&&(E||(I=_.value),O=N=-1,z()),at()}a.addListener(_,"compositionstart",Fe,S),a.addListener(_,"compositionupdate",Re,S),a.addListener(_,"keyup",Me,S),a.addListener(_,"keydown",at,S),a.addListener(_,"compositionend",$e,S),this.getElement=function(){return _},this.setCommandMode=function(X){k=X,_.readOnly=!1},this.setReadOnly=function(X){k||(_.readOnly=X)},this.setCopyWithEmptySelection=function(X){},this.onContextMenu=function(X){se=!0,z(),S._emit("nativecontextmenu",{target:S,domEvent:X}),this.moveToMouse(X,!0)},this.moveToMouse=function(X,de){C||(C=_.style.cssText),_.style.cssText=(de?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(O+N)*S.renderer.characterWidth*.5+"px;";var xe=S.container.getBoundingClientRect(),ke=l.computedStyle(S.container),Ge=xe.top+(parseInt(ke.borderTopWidth)||0),vt=xe.left+(parseInt(xe.borderLeftWidth)||0),Lt=xe.bottom-Ge-_.clientHeight-2,Kt=function(Ct){l.translate(_,Ct.clientX-vt-2,Math.min(Ct.clientY-Ge-2,Lt))};Kt(X),X.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(J),s.isWin&&a.capture(S.container,Kt,F))},this.onContextMenuClose=F;var J;function F(){clearTimeout(J),J=setTimeout(function(){C&&(_.style.cssText=C,C=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var be=function(X){S.textInput.onContextMenu(X),F()};a.addListener(_,"mouseup",be,S),a.addListener(_,"mousedown",function(X){X.preventDefault(),F()},S),a.addListener(S.renderer.scroller,"contextmenu",be,S),a.addListener(_,"contextmenu",be,S),m&&oe(x,S,_);function oe(X,de,xe){var ke=null,Ge=!1;xe.addEventListener("keydown",function(Lt){ke&&clearTimeout(ke),Ge=!0},!0),xe.addEventListener("keyup",function(Lt){ke=setTimeout(function(){Ge=!1},100)},!0);var vt=function(Lt){if(document.activeElement===xe&&!(Ge||E||de.$mouseHandler.isMousePressed)&&!M){var Kt=xe.selectionStart,Ct=xe.selectionEnd,zt=null,jt=0;if(Kt==0?zt=p.up:Kt==1?zt=p.home:Ct>N&&I[Ct]==`
`?zt=p.end:Kt<O&&I[Kt-1]==" "?(zt=p.left,jt=g.option):Kt<O||Kt==O&&N!=O&&Kt==Ct?zt=p.left:Ct>N&&I.slice(0,Ct).split(`
`).length>2?zt=p.down:Ct>N&&I[Ct-1]==" "?(zt=p.right,jt=g.option):(Ct>N||Ct==N&&N!=O&&Kt==Ct)&&(zt=p.right),Kt!==Ct&&(jt|=g.shift),zt){var pr=de.onCommandKey({},jt,zt);if(!pr&&de.commands){zt=p.keyCodeToString(zt);var Ir=de.commands.findKeyCommand(jt,zt);Ir&&de.execCommand(Ir)}O=Kt,N=Ct,z("")}}};document.addEventListener("selectionchange",vt),de.on("destroy",function(){document.removeEventListener("selectionchange",vt)})}this.destroy=function(){_.parentElement&&_.parentElement.removeChild(_)}},n.TextInput=b,n.$setUserAgentForTests=function(x,S){w=x,m=S}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(t,n,i){var a=t("../lib/useragent"),o=0,s=550,l=function(){function f(h){h.$clickSelection=null;var d=h.editor;d.setDefaultHandler("mousedown",this.onMouseDown.bind(h)),d.setDefaultHandler("dblclick",this.onDoubleClick.bind(h)),d.setDefaultHandler("tripleclick",this.onTripleClick.bind(h)),d.setDefaultHandler("quadclick",this.onQuadClick.bind(h)),d.setDefaultHandler("mousewheel",this.onMouseWheel.bind(h));var v=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];v.forEach(function(p){h[p]=this[p]},this),h.selectByLines=this.extendSelectionBy.bind(h,"getLineRange"),h.selectByWords=this.extendSelectionBy.bind(h,"getWordRange")}return f.prototype.onMouseDown=function(h){var d=h.inSelection(),v=h.getDocumentPosition();this.mousedownEvent=h;var p=this.editor,g=h.getButton();if(g!==0){var m=p.getSelectionRange(),y=m.isEmpty();(y||g==1)&&p.selection.moveToPosition(v),g==2&&(p.textInput.onContextMenu(h.domEvent),a.isMozilla||h.preventDefault());return}if(this.mousedownEvent.time=Date.now(),d&&!p.isFocused()&&(p.focus(),this.$focusTimeout&&!this.$clickSelection&&!p.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(h);return}return this.captureMouse(h),this.startSelect(v,h.domEvent._clicks>1),h.preventDefault()},f.prototype.startSelect=function(h,d){h=h||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var v=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?v.selection.selectToPosition(h):d||v.selection.moveToPosition(h),d||this.select(),v.setStyle("ace_selecting"),this.setState("select"))},f.prototype.select=function(){var h,d=this.editor,v=d.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var p=this.$clickSelection.comparePoint(v);if(p==-1)h=this.$clickSelection.end;else if(p==1)h=this.$clickSelection.start;else{var g=c(this.$clickSelection,v);v=g.cursor,h=g.anchor}d.selection.setSelectionAnchor(h.row,h.column)}d.selection.selectToPosition(v),d.renderer.scrollCursorIntoView()},f.prototype.extendSelectionBy=function(h){var d,v=this.editor,p=v.renderer.screenToTextCoordinates(this.x,this.y),g=v.selection[h](p.row,p.column);if(this.$clickSelection){var m=this.$clickSelection.comparePoint(g.start),y=this.$clickSelection.comparePoint(g.end);if(m==-1&&y<=0)d=this.$clickSelection.end,(g.end.row!=p.row||g.end.column!=p.column)&&(p=g.start);else if(y==1&&m>=0)d=this.$clickSelection.start,(g.start.row!=p.row||g.start.column!=p.column)&&(p=g.end);else if(m==-1&&y==1)p=g.end,d=g.start;else{var w=c(this.$clickSelection,p);p=w.cursor,d=w.anchor}v.selection.setSelectionAnchor(d.row,d.column)}v.selection.selectToPosition(p),v.renderer.scrollCursorIntoView()},f.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},f.prototype.focusWait=function(){var h=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),d=Date.now();(h>o||d-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},f.prototype.onDoubleClick=function(h){var d=h.getDocumentPosition(),v=this.editor,p=v.session,g=p.getBracketRange(d);g?(g.isEmpty()&&(g.start.column--,g.end.column++),this.setState("select")):(g=v.selection.getWordRange(d.row,d.column),this.setState("selectByWords")),this.$clickSelection=g,this.select()},f.prototype.onTripleClick=function(h){var d=h.getDocumentPosition(),v=this.editor;this.setState("selectByLines");var p=v.getSelectionRange();p.isMultiLine()&&p.contains(d.row,d.column)?(this.$clickSelection=v.selection.getLineRange(p.start.row),this.$clickSelection.end=v.selection.getLineRange(p.end.row).end):this.$clickSelection=v.selection.getLineRange(d.row),this.select()},f.prototype.onQuadClick=function(h){var d=this.editor;d.selectAll(),this.$clickSelection=d.getSelectionRange(),this.setState("selectAll")},f.prototype.onMouseWheel=function(h){if(!h.getAccelKey()){h.getShiftKey()&&h.wheelY&&!h.wheelX&&(h.wheelX=h.wheelY,h.wheelY=0);var d=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var v=this.$lastScroll,p=h.domEvent.timeStamp,g=p-v.t,m=g?h.wheelX/g:v.vx,y=g?h.wheelY/g:v.vy;g<s&&(m=(m+v.vx)/2,y=(y+v.vy)/2);var w=Math.abs(m/y),b=!1;if(w>=1&&d.renderer.isScrollableBy(h.wheelX*h.speed,0)&&(b=!0),w<=1&&d.renderer.isScrollableBy(0,h.wheelY*h.speed)&&(b=!0),b)v.allowed=p;else if(p-v.allowed<s){var x=Math.abs(m)<=1.5*Math.abs(v.vx)&&Math.abs(y)<=1.5*Math.abs(v.vy);x?(b=!0,v.allowed=p):v.allowed=0}if(v.t=p,v.vx=m,v.vy=y,b)return d.renderer.scrollBy(h.wheelX*h.speed,h.wheelY*h.speed),h.stop()}},f}();l.prototype.selectEnd=l.prototype.selectByLinesEnd,l.prototype.selectAllEnd=l.prototype.selectByLinesEnd,l.prototype.selectByWordsEnd=l.prototype.selectByLinesEnd,n.DefaultHandlers=l;function u(f,h,d,v){return Math.sqrt(Math.pow(d-f,2)+Math.pow(v-h,2))}function c(f,h){if(f.start.row==f.end.row)var d=2*h.column-f.start.column-f.end.column;else if(f.start.row==f.end.row-1&&!f.start.column&&!f.end.column)var d=h.column-4;else var d=2*h.row-f.start.row-f.end.row;return d<0?{cursor:f.start,anchor:f.end}:{cursor:f.end,anchor:f.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(t,n,i){n.preventParentScroll=function(o){o.stopPropagation();var s=o.currentTarget,l=s.scrollHeight>s.clientHeight;l||o.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(t,n,i){var a=this&&this.__extends||function(){var p=function(g,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},p(g,m)};return function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");p(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}(),o=this&&this.__values||function(p){var g=typeof Symbol=="function"&&Symbol.iterator,m=g&&p[g],y=0;if(m)return m.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&y>=p.length&&(p=void 0),{value:p&&p[y++],done:!p}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},s=t("./lib/dom");t("./lib/event");var l=t("./range").Range,u=t("./lib/scroll").preventParentScroll,c="ace_tooltip",f=function(){function p(g){this.isOpen=!1,this.$element=null,this.$parentNode=g}return p.prototype.$init=function(){return this.$element=s.createElement("div"),this.$element.className=c,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},p.prototype.getElement=function(){return this.$element||this.$init()},p.prototype.setText=function(g){this.getElement().textContent=g},p.prototype.setHtml=function(g){this.getElement().innerHTML=g},p.prototype.setPosition=function(g,m){this.getElement().style.left=g+"px",this.getElement().style.top=m+"px"},p.prototype.setClassName=function(g){s.addCssClass(this.getElement(),g)},p.prototype.setTheme=function(g){this.$element.className=c+" "+(g.isDark?"ace_dark ":"")+(g.cssClass||"")},p.prototype.show=function(g,m,y){g!=null&&this.setText(g),m!=null&&y!=null&&this.setPosition(m,y),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},p.prototype.hide=function(g){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=c,this.isOpen=!1)},p.prototype.getHeight=function(){return this.getElement().offsetHeight},p.prototype.getWidth=function(){return this.getElement().offsetWidth},p.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},p}(),h=function(){function p(){this.popups=[]}return p.prototype.addPopup=function(g){this.popups.push(g),this.updatePopups()},p.prototype.removePopup=function(g){var m=this.popups.indexOf(g);m!==-1&&(this.popups.splice(m,1),this.updatePopups())},p.prototype.updatePopups=function(){var g,m,y,w;this.popups.sort(function(C,k){return k.priority-C.priority});var b=[];try{for(var x=o(this.popups),S=x.next();!S.done;S=x.next()){var _=S.value,M=!0;try{for(var A=(y=void 0,o(b)),E=A.next();!E.done;E=A.next()){var T=E.value;if(this.doPopupsOverlap(T,_)){M=!1;break}}}catch(C){y={error:C}}finally{try{E&&!E.done&&(w=A.return)&&w.call(A)}finally{if(y)throw y.error}}M?b.push(_):_.hide()}}catch(C){g={error:C}}finally{try{S&&!S.done&&(m=x.return)&&m.call(x)}finally{if(g)throw g.error}}},p.prototype.doPopupsOverlap=function(g,m){var y=g.getElement().getBoundingClientRect(),w=m.getElement().getBoundingClientRect();return y.left<w.right&&y.right>w.left&&y.top<w.bottom&&y.bottom>w.top},p}(),d=new h;n.popupManager=d,n.Tooltip=f;var v=function(p){a(g,p);function g(m){m===void 0&&(m=document.body);var y=p.call(this,m)||this;y.timeout=void 0,y.lastT=0,y.idleTime=350,y.lastEvent=void 0,y.onMouseOut=y.onMouseOut.bind(y),y.onMouseMove=y.onMouseMove.bind(y),y.waitForHover=y.waitForHover.bind(y),y.hide=y.hide.bind(y);var w=y.getElement();return w.style.whiteSpace="pre-wrap",w.style.pointerEvents="auto",w.addEventListener("mouseout",y.onMouseOut),w.tabIndex=-1,w.addEventListener("blur",(function(){w.contains(document.activeElement)||this.hide()}).bind(y)),w.addEventListener("wheel",u),y}return g.prototype.addToEditor=function(m){m.on("mousemove",this.onMouseMove),m.on("mousedown",this.hide),m.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},g.prototype.removeFromEditor=function(m){m.off("mousemove",this.onMouseMove),m.off("mousedown",this.hide),m.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},g.prototype.onMouseMove=function(m,y){this.lastEvent=m,this.lastT=Date.now();var w=y.$mouseHandler.isMousePressed;if(this.isOpen){var b=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(b.row,b.column)||w||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||w||(this.lastEvent=m,this.timeout=setTimeout(this.waitForHover,this.idleTime))},g.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var m=Date.now()-this.lastT;if(this.idleTime-m>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-m);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},g.prototype.isOutsideOfText=function(m){var y=m.editor,w=m.getDocumentPosition(),b=y.session.getLine(w.row);if(w.column==b.length){var x=y.renderer.pixelToScreenCoordinates(m.clientX,m.clientY),S=y.session.documentToScreenPosition(w.row,w.column);if(S.column!=x.column||S.row!=x.row)return!0}return!1},g.prototype.setDataProvider=function(m){this.$gatherData=m},g.prototype.showForRange=function(m,y,w,b){var x=10;if(!(b&&b!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var S=m.renderer;this.isOpen||(d.addPopup(this),this.$registerCloseEvents(),this.setTheme(S.theme)),this.isOpen=!0,this.addMarker(y,m.session),this.range=l.fromPoints(y.start,y.end);var _=S.textToScreenCoordinates(y.start.row,y.start.column),M=S.scroller.getBoundingClientRect();_.pageX<M.left&&(_.pageX=M.left);var A=this.getElement();A.innerHTML="",A.appendChild(w),A.style.maxHeight="",A.style.display="block";var E=A.clientHeight,T=A.clientWidth,C=window.innerHeight-_.pageY-S.lineHeight,k=!0;_.pageY-E<0&&_.pageY<C&&(k=!1),A.style.maxHeight=(k?_.pageY:C)-x+"px",A.style.top=k?"":_.pageY+S.lineHeight+"px",A.style.bottom=k?window.innerHeight-_.pageY+"px":"",A.style.left=Math.min(_.pageX,window.innerWidth-T-x)+"px"}},g.prototype.addMarker=function(m,y){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=y,this.marker=y&&y.addMarker(m,"ace_highlight-marker","text")},g.prototype.hide=function(m){!m&&document.activeElement==this.getElement()||m&&m.target&&(m.type!="keydown"||m.ctrlKey||m.metaKey)&&this.$element.contains(m.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,d.removePopup(this)))},g.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},g.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},g.prototype.onMouseOut=function(m){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!m.relatedTarget||this.getElement().contains(m.relatedTarget)||m&&m.currentTarget.contains(m.relatedTarget)||m.relatedTarget.classList.contains("ace_content")||this.hide())},g}(f);n.HoverTooltip=v}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(t,n,i){var a=this&&this.__extends||function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),o=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,p=v&&d[v],g=0;if(p)return p.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&g>=d.length&&(d=void 0),{value:d&&d[g++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},s=t("../lib/dom"),l=t("../lib/event"),u=t("../tooltip").Tooltip,c=t("../config").nls;t("../lib/lang");function f(d){var v=d.editor,p=v.renderer.$gutterLayer,g=new h(v);d.editor.setDefaultHandler("guttermousedown",function(S){if(!(!v.isFocused()||S.getButton()!=0)){var _=p.getRegion(S);if(_!="foldWidgets"){var M=S.getDocumentPosition().row,A=v.session.selection;if(S.getShiftKey())A.selectTo(M,0);else{if(S.domEvent.detail==2)return v.selectAll(),S.preventDefault();d.$clickSelection=v.selection.getLineRange(M)}return d.setState("selectByLines"),d.captureMouse(S),S.preventDefault()}}});var m,y;function w(){var S=y.getDocumentPosition().row,_=v.session.getLength();if(S==_){var M=v.renderer.pixelToScreenCoordinates(0,y.y).row,A=y.$pos;if(M>v.session.documentToScreenRow(A.row,A.column))return b()}if(g.showTooltip(S),!!g.isOpen)if(v.on("mousewheel",b),d.$tooltipFollowsMouse)x(y);else{var E=y.getGutterRow(),T=p.$lines.get(E);if(T){var C=T.element.querySelector(".ace_gutter_annotation"),k=C.getBoundingClientRect(),L=g.getElement().style;L.left=k.right+"px",L.top=k.bottom+"px"}else x(y)}}function b(){m&&(m=clearTimeout(m)),g.isOpen&&(g.hideTooltip(),v.off("mousewheel",b))}function x(S){g.setPosition(S.x,S.y)}d.editor.setDefaultHandler("guttermousemove",function(S){var _=S.domEvent.target||S.domEvent.srcElement;if(s.hasCssClass(_,"ace_fold-widget"))return b();g.isOpen&&d.$tooltipFollowsMouse&&x(S),y=S,!m&&(m=setTimeout(function(){m=null,y&&!d.isMousePressed?w():b()},50))}),l.addListener(v.renderer.$gutter,"mouseout",function(S){y=null,!(!g.isOpen||m)&&(m=setTimeout(function(){m=null,b()},50))},v),v.on("changeSession",b),v.on("input",b)}n.GutterHandler=f;var h=function(d){a(v,d);function v(p){var g=d.call(this,p.container)||this;return g.editor=p,g}return v.prototype.setPosition=function(p,g){var m=window.innerWidth||document.documentElement.clientWidth,y=window.innerHeight||document.documentElement.clientHeight,w=this.getWidth(),b=this.getHeight();p+=15,g+=15,p+w>m&&(p-=p+w-m),g+b>y&&(g-=20+b),u.prototype.setPosition.call(this,p,g)},Object.defineProperty(v,"annotationLabels",{get:function(){return{error:{singular:c("gutter-tooltip.aria-label.error.singular","error"),plural:c("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:c("gutter-tooltip.aria-label.security.singular","security finding"),plural:c("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:c("gutter-tooltip.aria-label.warning.singular","warning"),plural:c("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:c("gutter-tooltip.aria-label.info.singular","information message"),plural:c("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:c("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:c("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),v.prototype.showTooltip=function(p){var g,m=this.editor.renderer.$gutterLayer,y=m.$annotations[p],w;y?w={displayText:Array.from(y.displayText),type:Array.from(y.type)}:w={displayText:[],type:[]};var b=m.session.getFoldLine(p);if(b&&m.$showFoldedAnnotations){for(var x={error:[],security:[],warning:[],info:[],hint:[]},S={error:1,security:2,warning:3,info:4,hint:5},_,M=p+1;M<=b.end.row;M++)if(m.$annotations[M])for(var A=0;A<m.$annotations[M].text.length;A++){var E=m.$annotations[M].type[A];x[E].push(m.$annotations[M].text[A]),(!_||S[E]<S[_])&&(_=E)}if(["error","security","warning"].includes(_)){var T="".concat(v.annotationsToSummaryString(x)," in folded code.");w.displayText.push(T),w.type.push(_+"_fold")}}if(w.displayText.length===0)return this.hide();for(var C={error:[],security:[],warning:[],info:[],hint:[]},k=m.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",M=0;M<w.displayText.length;M++){var L=s.createElement("span"),I=s.createElement("span");(g=I.classList).add.apply(g,["ace_".concat(w.type[M]),k]),I.setAttribute("aria-label","".concat(v.annotationLabels[w.type[M].replace("_fold","")].singular)),I.setAttribute("role","img"),I.appendChild(s.createTextNode(" ")),L.appendChild(I),L.appendChild(s.createTextNode(w.displayText[M])),L.appendChild(s.createElement("br")),C[w.type[M].replace("_fold","")].push(L)}var O=this.getElement();s.removeChildren(O),C.error.forEach(function(N){return O.appendChild(N)}),C.security.forEach(function(N){return O.appendChild(N)}),C.warning.forEach(function(N){return O.appendChild(N)}),C.info.forEach(function(N){return O.appendChild(N)}),C.hint.forEach(function(N){return O.appendChild(N)}),O.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},v.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},v.annotationsToSummaryString=function(p){var g,m,y=[],w=["error","security","warning","info","hint"];try{for(var b=o(w),x=b.next();!x.done;x=b.next()){var S=x.value;if(p[S].length){var _=p[S].length===1?v.annotationLabels[S].singular:v.annotationLabels[S].plural;y.push("".concat(p[S].length," ").concat(_))}}}catch(M){g={error:M}}finally{try{x&&!x.done&&(m=b.return)&&m.call(b)}finally{if(g)throw g.error}}return y.join(", ")},v}(u);n.GutterTooltip=h}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,i){var a=t("../lib/event"),o=t("../lib/useragent"),s=function(){function l(u,c){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=c,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return l.prototype.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},l.prototype.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},l.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},l.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},l.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,c=this.editor.session.documentToScreenRow(u,0),f=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return c-f},l.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,c=u.getSelectionRange();if(c.isEmpty())this.$inSelection=!1;else{var f=this.getDocumentPosition();this.$inSelection=c.contains(f.row,f.column)}return this.$inSelection},l.prototype.getButton=function(){return a.getButton(this.domEvent)},l.prototype.getShiftKey=function(){return this.domEvent.shiftKey},l.prototype.getAccelKey=function(){return o.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},l}();n.MouseEvent=s}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,n,i){var a=t("../lib/dom"),o=t("../lib/event"),s=t("../lib/useragent"),l=200,u=200,c=5;function f(d){var v=d.editor,p=a.createElement("div");p.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",p.textContent=" ";var g=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];g.forEach(function(G){d[G]=this[G]},this),v.on("mousedown",this.onMouseDown.bind(d));var m=v.container,y,w,b,x,S,_,M=0,A,E,T,C,k;this.onDragStart=function(G){if(this.cancelDrag||!m.draggable){var z=this;return setTimeout(function(){z.startSelect(),z.captureMouse(G)},0),G.preventDefault()}S=v.getSelectionRange();var W=G.dataTransfer;W.effectAllowed=v.getReadOnly()?"copy":"copyMove",v.container.appendChild(p),W.setDragImage&&W.setDragImage(p,0,0),setTimeout(function(){v.container.removeChild(p)}),W.clearData(),W.setData("Text",v.session.getTextRange()),E=!0,this.setState("drag")},this.onDragEnd=function(G){if(m.draggable=!1,E=!1,this.setState(null),!v.getReadOnly()){var z=G.dataTransfer.dropEffect;!A&&z=="move"&&v.session.remove(v.getSelectionRange()),v.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(G){if(!(v.getReadOnly()||!B(G.dataTransfer)))return w=G.clientX,b=G.clientY,y||N(),M++,G.dataTransfer.dropEffect=A=j(G),o.preventDefault(G)},this.onDragOver=function(G){if(!(v.getReadOnly()||!B(G.dataTransfer)))return w=G.clientX,b=G.clientY,y||(N(),M++),$!==null&&($=null),G.dataTransfer.dropEffect=A=j(G),o.preventDefault(G)},this.onDragLeave=function(G){if(M--,M<=0&&y)return D(),A=null,o.preventDefault(G)},this.onDrop=function(G){if(_){var z=G.dataTransfer;if(E)switch(A){case"move":S.contains(_.row,_.column)?S={start:_,end:_}:S=v.moveText(S,_);break;case"copy":S=v.moveText(S,_,!0);break}else{var W=z.getData("Text");S={start:_,end:v.session.insert(_,W)},v.focus(),A=null}return D(),o.preventDefault(G)}},o.addListener(m,"dragstart",this.onDragStart.bind(d),v),o.addListener(m,"dragend",this.onDragEnd.bind(d),v),o.addListener(m,"dragenter",this.onDragEnter.bind(d),v),o.addListener(m,"dragover",this.onDragOver.bind(d),v),o.addListener(m,"dragleave",this.onDragLeave.bind(d),v),o.addListener(m,"drop",this.onDrop.bind(d),v);function L(G,z){var W=Date.now(),Q=!z||G.row!=z.row,ie=!z||G.column!=z.column;if(!C||Q||ie)v.moveCursorToPosition(G),C=W,k={x:w,y:b};else{var se=h(k.x,k.y,w,b);se>c?C=null:W-C>=u&&(v.renderer.scrollCursorIntoView(),C=null)}}function I(G,z){var W=Date.now(),Q=v.renderer.layerConfig.lineHeight,ie=v.renderer.layerConfig.characterWidth,se=v.renderer.scroller.getBoundingClientRect(),ae={x:{left:w-se.left,right:se.right-w},y:{top:b-se.top,bottom:se.bottom-b}},pe=Math.min(ae.x.left,ae.x.right),De=Math.min(ae.y.top,ae.y.bottom),Je={row:G.row,column:G.column};pe/ie<=2&&(Je.column+=ae.x.left<ae.x.right?-3:2),De/Q<=1&&(Je.row+=ae.y.top<ae.y.bottom?-1:1);var ee=G.row!=Je.row,ne=G.column!=Je.column,me=!z||G.row!=z.row;ee||ne&&!me?T?W-T>=l&&v.renderer.scrollCursorIntoView(Je):T=W:T=null}function O(){var G=_;_=v.renderer.screenToTextCoordinates(w,b),L(_,G),I(_,G)}function N(){S=v.selection.toOrientedRange(),y=v.session.addMarker(S,"ace_selection",v.getSelectionStyle()),v.clearSelection(),v.isFocused()&&v.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),O(),x=setInterval(O,20),M=0,o.addListener(document,"mousemove",R)}function D(){clearInterval(x),v.session.removeMarker(y),y=null,v.selection.fromOrientedRange(S),v.isFocused()&&!E&&v.$resetCursorStyle(),S=null,_=null,M=0,T=null,C=null,o.removeListener(document,"mousemove",R)}var $=null;function R(){$==null&&($=setTimeout(function(){$!=null&&y&&D()},20))}function B(G){var z=G.types;return!z||Array.prototype.some.call(z,function(W){return W=="text/plain"||W=="Text"})}function j(G){var z=["copy","copymove","all","uninitialized"],W=["move","copymove","linkmove","all","uninitialized"],Q=s.isMac?G.altKey:G.ctrlKey,ie="uninitialized";try{ie=G.dataTransfer.effectAllowed.toLowerCase()}catch{}var se="none";return Q&&z.indexOf(ie)>=0?se="copy":W.indexOf(ie)>=0?se="move":z.indexOf(ie)>=0&&(se="copy"),se}}(function(){this.dragWait=function(){var d=Date.now()-this.mousedownEvent.time;d>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var d=this.editor.container;d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(d){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var d=this.editor,v=d.container;v.draggable=!0,d.renderer.$cursorLayer.setBlinking(!1),d.setStyle("ace_dragging");var p=s.isWin?"default":"move";d.renderer.setCursorStyle(p),this.setState("dragReady")},this.onMouseDrag=function(d){var v=this.editor.container;if(s.isIE&&this.state=="dragReady"){var p=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>3&&v.dragDrop()}if(this.state==="dragWait"){var p=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>0&&(v.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(d){if(this.$dragEnabled){this.mousedownEvent=d;var v=this.editor,p=d.inSelection(),g=d.getButton(),m=d.domEvent.detail||1;if(m===1&&g===0&&p){if(d.editor.inMultiSelectMode&&(d.getAccelKey()||d.getShiftKey()))return;this.mousedownEvent.time=Date.now();var y=d.domEvent.target||d.domEvent.srcElement;if("unselectable"in y&&(y.unselectable="on"),v.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var w=v.container;w.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(d,this.onMouseDrag.bind(this)),d.defaultPrevented=!0}}}}).call(f.prototype);function h(d,v,p,g){return Math.sqrt(Math.pow(p-d,2)+Math.pow(g-v,2))}n.DragdropHandler=f}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(t,n,i){var a=t("./mouse_event").MouseEvent,o=t("../lib/event"),s=t("../lib/dom");n.addTouchListeners=function(l,u){var c="scroll",f,h,d,v,p,g,m=0,y,w=0,b=0,x=0,S,_;function M(){var L=window.navigator&&window.navigator.clipboard,I=!1,O=function(){var $=u.getCopyText(),R=u.session.getUndoManager().hasUndo();_.replaceChild(s.buildDom(I?["span",!$&&N("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],$&&N("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],$&&N("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],L&&N("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],R&&N("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],N("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],N("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),_.firstChild)},N=function($){return u.commands.canExecute($,u)},D=function($){var R=$.target.getAttribute("action");if(R=="more"||!I)return I=!I,O();R=="paste"?L.readText().then(function(B){u.execCommand(R,B)}):R&&((R=="cut"||R=="copy")&&(L?L.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(R)),_.firstChild.style.display="none",I=!1,R!="openCommandPalette"&&u.focus()};_=s.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function($){c="menu",$.stopPropagation(),$.preventDefault(),u.textInput.focus()},ontouchend:function($){$.stopPropagation(),$.preventDefault(),D($)},onclick:D},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function A(){if(!u.getOption("enableMobileMenu")){_&&E();return}_||M();var L=u.selection.cursor,I=u.renderer.textToScreenCoordinates(L.row,L.column),O=u.renderer.textToScreenCoordinates(0,0).pageX,N=u.renderer.scrollLeft,D=u.container.getBoundingClientRect();_.style.top=I.pageY-D.top-3+"px",I.pageX-D.left<D.width-70?(_.style.left="",_.style.right="10px"):(_.style.right="",_.style.left=O+N-D.left+"px"),_.style.display="",_.firstChild.style.display="none",u.on("input",E)}function E(L){_&&(_.style.display="none"),u.off("input",E)}function T(){p=null,clearTimeout(p);var L=u.selection.getRange(),I=L.contains(y.row,y.column);(L.isEmpty()||!I)&&(u.selection.moveToPosition(y),u.selection.selectWord()),c="wait",A()}function C(){p=null,clearTimeout(p),u.selection.moveToPosition(y);var L=w>=2?u.selection.getLineRange(y.row):u.session.getBracketRange(y);L&&!L.isEmpty()?u.selection.setRange(L):u.selection.selectWord(),c="wait"}o.addListener(l,"contextmenu",function(L){if(S){var I=u.textInput.getElement();I.focus()}},u),o.addListener(l,"touchstart",function(L){var I=L.touches;if(p||I.length>1){clearTimeout(p),p=null,d=-1,c="zoom";return}S=u.$mouseHandler.isMousePressed=!0;var O=u.renderer.layerConfig.lineHeight,N=u.renderer.layerConfig.lineHeight,D=L.timeStamp;v=D;var $=I[0],R=$.clientX,B=$.clientY;Math.abs(f-R)+Math.abs(h-B)>O&&(d=-1),f=L.clientX=R,h=L.clientY=B,b=x=0;var j=new a(L,u);if(y=j.getDocumentPosition(),D-d<500&&I.length==1&&!m)w++,L.preventDefault(),L.button=0,C();else{w=0;var G=u.selection.cursor,z=u.selection.isEmpty()?G:u.selection.anchor,W=u.renderer.$cursorLayer.getPixelPosition(G,!0),Q=u.renderer.$cursorLayer.getPixelPosition(z,!0),ie=u.renderer.scroller.getBoundingClientRect(),se=u.renderer.layerConfig.offset,ae=u.renderer.scrollLeft,pe=function(ee,ne){return ee=ee/N,ne=ne/O-.75,ee*ee+ne*ne};if(L.clientX<ie.left){c="zoom";return}var De=pe(L.clientX-ie.left-W.left+ae,L.clientY-ie.top-W.top+se),Je=pe(L.clientX-ie.left-Q.left+ae,L.clientY-ie.top-Q.top+se);De<3.5&&Je<3.5&&(c=De>Je?"cursor":"anchor"),Je<3.5?c="anchor":De<3.5?c="cursor":c="scroll",p=setTimeout(T,450)}d=D},u),o.addListener(l,"touchend",function(L){S=u.$mouseHandler.isMousePressed=!1,g&&clearInterval(g),c=="zoom"?(c="",m=0):p?(u.selection.moveToPosition(y),m=0,A()):c=="scroll"?(k(),E()):A(),clearTimeout(p),p=null},u),o.addListener(l,"touchmove",function(L){p&&(clearTimeout(p),p=null);var I=L.touches;if(!(I.length>1||c=="zoom")){var O=I[0],N=f-O.clientX,D=h-O.clientY;if(c=="wait")if(N*N+D*D>4)c="cursor";else return L.preventDefault();f=O.clientX,h=O.clientY,L.clientX=O.clientX,L.clientY=O.clientY;var $=L.timeStamp,R=$-v;if(v=$,c=="scroll"){var B=new a(L,u);B.speed=1,B.wheelX=N,B.wheelY=D,10*Math.abs(N)<Math.abs(D)&&(N=0),10*Math.abs(D)<Math.abs(N)&&(D=0),R!=0&&(b=N/R,x=D/R),u._emit("mousewheel",B),B.propagationStopped||(b=x=0)}else{var j=new a(L,u),G=j.getDocumentPosition();c=="cursor"?u.selection.moveCursorToPosition(G):c=="anchor"&&u.selection.setSelectionAnchor(G.row,G.column),u.renderer.scrollCursorIntoView(G),L.preventDefault()}}},u);function k(){m+=60,g=setInterval(function(){m--<=0&&(clearInterval(g),g=null),Math.abs(b)<.01&&(b=0),Math.abs(x)<.01&&(x=0),m<20&&(b=.9*b),m<20&&(x=.9*x);var L=u.session.getScrollTop();u.renderer.scrollBy(10*b,10*x),L==u.session.getScrollTop()&&(m=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(t,n,i){var a=t("../lib/event"),o=t("../lib/useragent"),s=t("./default_handlers").DefaultHandlers,l=t("./default_gutter_handler").GutterHandler,u=t("./mouse_event").MouseEvent,c=t("./dragdrop_handler").DragdropHandler,f=t("./touch_handler").addTouchListeners,h=t("../config"),d=function(){function v(p){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var g=this;this.editor=p,new s(this),new l(this),new c(this);var m=function(b){var x=!document.hasFocus||!document.hasFocus()||!p.isFocused()&&document.activeElement==(p.textInput&&p.textInput.getElement());x&&window.focus(),p.focus(),setTimeout(function(){p.isFocused()||p.focus()})},y=p.renderer.getMouseEventTarget();a.addListener(y,"click",this.onMouseEvent.bind(this,"click"),p),a.addListener(y,"mousemove",this.onMouseMove.bind(this,"mousemove"),p),a.addMultiMouseDownListener([y,p.renderer.scrollBarV&&p.renderer.scrollBarV.inner,p.renderer.scrollBarH&&p.renderer.scrollBarH.inner,p.textInput&&p.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",p),a.addMouseWheelListener(p.container,this.onMouseWheel.bind(this,"mousewheel"),p),f(p.container,p);var w=p.renderer.$gutter;a.addListener(w,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),p),a.addListener(w,"click",this.onMouseEvent.bind(this,"gutterclick"),p),a.addListener(w,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),p),a.addListener(w,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),p),a.addListener(y,"mousedown",m,p),a.addListener(w,"mousedown",m,p),o.isIE&&p.renderer.scrollBarV&&(a.addListener(p.renderer.scrollBarV.element,"mousedown",m,p),a.addListener(p.renderer.scrollBarH.element,"mousedown",m,p)),p.on("mousemove",function(b){if(!(g.state||g.$dragDelay||!g.$dragEnabled)){var x=p.renderer.screenToTextCoordinates(b.x,b.y),S=p.session.selection.getRange(),_=p.renderer;!S.isEmpty()&&S.insideStart(x.row,x.column)?_.setCursorStyle("default"):_.setCursorStyle("")}},p)}return v.prototype.onMouseEvent=function(p,g){this.editor.session&&this.editor._emit(p,new u(g,this.editor))},v.prototype.onMouseMove=function(p,g){var m=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!m||!m.length||this.editor._emit(p,new u(g,this.editor))},v.prototype.onMouseWheel=function(p,g){var m=new u(g,this.editor);m.speed=this.$scrollSpeed*2,m.wheelX=g.wheelX,m.wheelY=g.wheelY,this.editor._emit(p,m)},v.prototype.setState=function(p){this.state=p},v.prototype.captureMouse=function(p,g){this.x=p.x,this.y=p.y,this.isMousePressed=!0;var m=this.editor,y=this.editor.renderer;y.$isMousePressed=!0;var w=this,b=function(A){if(A){if(o.isWebKit&&!A.which&&w.releaseMouse)return w.releaseMouse();w.x=A.clientX,w.y=A.clientY,g&&g(A),w.mouseEvent=new u(A,w.editor),w.$mouseMoved=!0}},x=function(A){m.off("beforeEndOperation",_),clearInterval(M),m.session&&S(),w[w.state+"End"]&&w[w.state+"End"](A),w.state="",w.isMousePressed=y.$isMousePressed=!1,y.$keepTextAreaAtCursor&&y.$moveTextAreaToCursor(),w.$onCaptureMouseMove=w.releaseMouse=null,A&&w.onMouseEvent("mouseup",A),m.endOperation()},S=function(){w[w.state]&&w[w.state](),w.$mouseMoved=!1};if(o.isOldIE&&p.domEvent.type=="dblclick")return setTimeout(function(){x(p)});var _=function(A){w.releaseMouse&&m.curOp.command.name&&m.curOp.selectionChanged&&(w[w.state+"End"]&&w[w.state+"End"](),w.state="",w.releaseMouse())};m.on("beforeEndOperation",_),m.startOperation({command:{name:"mouse"}}),w.$onCaptureMouseMove=b,w.releaseMouse=a.capture(this.editor.container,b,x);var M=setInterval(S,20)},v.prototype.cancelContextMenu=function(){var p=(function(g){g&&g.domEvent&&g.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",p),g&&g.domEvent&&a.stopEvent(g.domEvent))}).bind(this);setTimeout(p,10),this.editor.on("nativecontextmenu",p)},v.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},v}();d.prototype.releaseMouse=null,h.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:o.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),n.MouseHandler=d}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(t,n,i){var a=t("../lib/dom"),o=function(){function s(l){l.on("click",function(u){var c=u.getDocumentPosition(),f=l.session,h=f.getFoldAt(c.row,c.column,1);h&&(u.getAccelKey()?f.removeFold(h):f.expandFold(h),u.stop());var d=u.domEvent&&u.domEvent.target;d&&a.hasCssClass(d,"ace_inline_button")&&a.hasCssClass(d,"ace_toggle_wrap")&&(f.setOption("wrap",!f.getUseWrapMode()),l.renderer.scrollCursorIntoView())}),l.on("gutterclick",function(u){var c=l.renderer.$gutterLayer.getRegion(u);if(c=="foldWidgets"){var f=u.getDocumentPosition().row,h=l.session;h.foldWidgets&&h.foldWidgets[f]&&l.session.onFoldWidgetClick(f,u),l.isFocused()||l.focus(),u.stop()}}),l.on("gutterdblclick",function(u){var c=l.renderer.$gutterLayer.getRegion(u);if(c=="foldWidgets"){var f=u.getDocumentPosition().row,h=l.session,d=h.getParentFoldRangeData(f,!0),v=d.range||d.firstRange;if(v){f=v.start.row;var p=h.getFoldAt(f,h.getLine(f).length,1);p?h.removeFold(p):(h.addFold("...",v),l.renderer.scrollCursorIntoView({row:v.start.row,column:0}))}u.stop()}})}return s}();n.FoldHandler=o}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,n,i){var a=t("../lib/keys"),o=t("../lib/event"),s=function(){function l(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return l.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},l.prototype.setKeyboardHandler=function(u){var c=this.$handlers;if(c[c.length-1]!=u){for(;c[c.length-1]&&c[c.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(c[c.length-1]);this.addKeyboardHandler(u,1)}},l.prototype.addKeyboardHandler=function(u,c){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var f=this.$handlers.indexOf(u);f!=-1&&this.$handlers.splice(f,1),c==null?this.$handlers.push(u):this.$handlers.splice(c,0,u),f==-1&&u.attach&&u.attach(this.$editor)}},l.prototype.removeKeyboardHandler=function(u){var c=this.$handlers.indexOf(u);return c==-1?!1:(this.$handlers.splice(c,1),u.detach&&u.detach(this.$editor),!0)},l.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},l.prototype.getStatusText=function(){var u=this.$data,c=u.editor;return this.$handlers.map(function(f){return f.getStatusText&&f.getStatusText(c,u)||""}).filter(Boolean).join(" ")},l.prototype.$callKeyboardHandlers=function(u,c,f,h){for(var d,v=!1,p=this.$editor.commands,g=this.$handlers.length;g--&&(d=this.$handlers[g].handleKeyboard(this.$data,u,c,f,h),!(!(!d||!d.command)&&(d.command=="null"?v=!0:v=p.exec(d.command,this.$editor,d.args,h),v&&h&&u!=-1&&d.passEvent!=!0&&d.command.passEvent!=!0&&o.stopEvent(h),v))););return!v&&u==-1&&(d={command:"insertstring"},v=p.exec("insertstring",this.$editor,c)),v&&this.$editor._signal&&this.$editor._signal("keyboardActivity",d),v},l.prototype.onCommandKey=function(u,c,f){var h=a.keyCodeToString(f);return this.$callKeyboardHandlers(c,h,f,u)},l.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},l}();n.KeyBinding=s}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,n,i){var a=0,o=0,s=!1,l=!1,u=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,d=1,v=0,p=1,g=2,m=3,y=4,w=5,b=6,x=7,S=8,_=9,M=10,A=11,E=12,T=13,C=14,k=15,L=16,I=17,O=18,N=[O,O,O,O,O,O,O,O,O,b,w,b,S,w,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,w,w,b,S,y,y,A,A,A,y,y,y,y,y,M,_,M,_,_,g,g,g,g,g,g,g,g,g,g,_,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,y,y,y,y,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,y,y,y,y,O,O,O,O,O,O,w,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,_,y,A,A,A,A,y,y,y,y,v,y,y,O,y,y,A,A,g,g,y,v,y,y,y,g,v,y,y,y,y,y],D=[S,S,S,S,S,S,S,S,S,S,S,O,O,O,v,p,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,S,w,T,C,k,L,I,_,A,A,A,A,A,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,_,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,S];function $(G,z,W,Q){var ie=a?f:c,se=null,ae=null,pe=null,De=0,Je=null,ee=null,ne=-1,me=null,Fe=null,Re=[];if(!Q)for(me=0,Q=[];me<W;me++)Q[me]=j(G[me]);for(o=a,s=!1,l=!1,u=!1,Fe=0;Fe<W;Fe++){if(se=De,Re[Fe]=ae=B(G,Q,Re,Fe),De=ie[se][ae],Je=De&240,De&=15,z[Fe]=pe=ie[De][5],Je>0)if(Je==16){for(me=ne;me<Fe;me++)z[me]=1;ne=-1}else ne=-1;if(ee=ie[De][6],ee)ne==-1&&(ne=Fe);else if(ne>-1){for(me=ne;me<Fe;me++)z[me]=pe;ne=-1}Q[Fe]==w&&(z[Fe]=0),o|=pe}if(u){for(me=0;me<W;me++)if(Q[me]==b){z[me]=a;for(var $e=me-1;$e>=0&&Q[$e]==S;$e--)z[$e]=a}}}function R(G,z,W){if(!(o<G)){if(G==1&&a==d&&!l){W.reverse();return}for(var Q=W.length,ie=0,se,ae,pe,De;ie<Q;){if(z[ie]>=G){for(se=ie+1;se<Q&&z[se]>=G;)se++;for(ae=ie,pe=se-1;ae<pe;ae++,pe--)De=W[ae],W[ae]=W[pe],W[pe]=De;ie=se}ie++}}}function B(G,z,W,Q){var ie=z[Q],se,ae,pe,De;switch(ie){case v:case p:s=!1;case y:case m:return ie;case g:return s?m:g;case x:return s=!0,p;case S:return y;case _:return Q<1||Q+1>=z.length||(se=W[Q-1])!=g&&se!=m||(ae=z[Q+1])!=g&&ae!=m?y:(s&&(ae=m),ae==se?ae:y);case M:return se=Q>0?W[Q-1]:w,se==g&&Q+1<z.length&&z[Q+1]==g?g:y;case A:if(Q>0&&W[Q-1]==g)return g;if(s)return y;for(De=Q+1,pe=z.length;De<pe&&z[De]==A;)De++;return De<pe&&z[De]==g?g:y;case E:for(pe=z.length,De=Q+1;De<pe&&z[De]==E;)De++;if(De<pe){var Je=G[Q],ee=Je>=1425&&Je<=2303||Je==64286;if(se=z[De],ee&&(se==p||se==x))return p}return Q<1||(se=z[Q-1])==w?y:W[Q-1];case w:return s=!1,l=!0,a;case b:return u=!0,y;case T:case C:case L:case I:case k:s=!1;case O:return y}}function j(G){var z=G.charCodeAt(0),W=z>>8;return W==0?z>191?v:N[z]:W==5?/[\u0591-\u05f4]/.test(G)?p:v:W==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(G)?E:/[\u0660-\u0669\u066b-\u066c]/.test(G)?m:z==1642?A:/[\u06f0-\u06f9]/.test(G)?g:x:W==32&&z<=8287?D[z&255]:W==254&&z>=65136?x:y}n.L=v,n.R=p,n.EN=g,n.ON_R=3,n.AN=4,n.R_H=5,n.B=6,n.RLE=7,n.DOT="·",n.doBidiReorder=function(G,z,W){if(G.length<2)return{};var Q=G.split(""),ie=new Array(Q.length),se=new Array(Q.length),ae=[];a=W?d:h,$(Q,ae,Q.length,z);for(var pe=0;pe<ie.length;ie[pe]=pe,pe++);R(2,ae,ie),R(1,ae,ie);for(var pe=0;pe<ie.length-1;pe++)z[pe]===m?ae[pe]=n.AN:ae[pe]===p&&(z[pe]>x&&z[pe]<T||z[pe]===y||z[pe]===O)?ae[pe]=n.ON_R:pe>0&&Q[pe-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(Q[pe])&&(ae[pe-1]=ae[pe]=n.R_H,pe++);Q[Q.length-1]===n.DOT&&(ae[Q.length-1]=n.B),Q[0]==="‫"&&(ae[0]=n.RLE);for(var pe=0;pe<ie.length;pe++)se[pe]=ae[ie[pe]];return{logicalFromVisual:ie,bidiLevels:se}},n.hasBidiCharacters=function(G,z){for(var W=!1,Q=0;Q<G.length;Q++)z[Q]=j(G.charAt(Q)),!W&&(z[Q]==p||z[Q]==x||z[Q]==m)&&(W=!0);return W},n.getVisualFromLogicalIdx=function(G,z){for(var W=0;W<z.logicalFromVisual.length;W++)if(z.logicalFromVisual[W]==G)return W;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(t,n,i){var a=t("./lib/bidiutil"),o=t("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,l=function(){function u(c){this.session=c,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(c.getValue())}return u.prototype.isBidiRow=function(c,f,h){return this.seenBidi?(c!==this.currentRow&&(this.currentRow=c,this.updateRowLine(f,h),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(c){this.seenBidi?this.currentRow=null:c.action=="insert"&&s.test(c.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var c=0,f=this.session.$screenRowCache;if(f.length){var h=this.session.$getRowCacheIndex(f,this.currentRow);h>=0&&(c=this.session.$docRowCache[h])}return c},u.prototype.getSplitIndex=function(){var c=0,f=this.session.$screenRowCache;if(f.length)for(var h,d=this.session.$getRowCacheIndex(f,this.currentRow);this.currentRow-c>0&&(h=this.session.$getRowCacheIndex(f,this.currentRow-c-1),h===d);)d=h,c++;else c=this.currentRow;return c},u.prototype.updateRowLine=function(c,f){c===void 0&&(c=this.getDocumentRow());var h=c===this.session.getLength()-1,d=h?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(c),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var v=this.session.$wrapData[c];v&&(f===void 0&&(f=this.getSplitIndex()),f>0&&v.length?(this.wrapIndent=v.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=f<v.length?this.line.substring(v[f-1],v[f]):this.line.substring(v[v.length-1])):this.line=this.line.substring(0,v[f]),f==v.length&&(this.line+=this.showInvisibles?d:a.DOT))}else this.line+=this.showInvisibles?d:a.DOT;var p=this.session,g=0,m;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(y,w){return y==="	"||p.isFullWidth(y.charCodeAt(0))?(m=y==="	"?p.getScreenTabSize(w+g):2,g+=m-1,o.stringRepeat(a.DOT,m)):y}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var c=[];a.hasBidiCharacters(this.line,c)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,c,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(c){if(this.characterWidth!==c.$characterSize.width){this.fontMetrics=c;var f=this.characterWidth=c.$characterSize.width,h=c.$measureCharWidth("ה");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=f,this.charWidths[a.R]=this.charWidths[a.AN]=h,this.charWidths[a.R_H]=h*.45,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(c){this.showInvisibles=c,this.currentRow=null},u.prototype.setEolChar=function(c){this.EOL=c},u.prototype.setContentWidth=function(c){this.contentWidth=c},u.prototype.isRtlLine=function(c){return this.$isRtl?!0:c!=null?this.session.getLine(c).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(c,f){for(var h=c.getCursorPosition(),d=c.selection.getSelectionAnchor().row;d<=h.row;d++)!f&&c.session.getLine(d).charAt(0)===c.session.$bidiHandler.RLE?c.session.doc.removeInLine(d,0,1):f&&c.session.getLine(d).charAt(0)!==c.session.$bidiHandler.RLE&&c.session.doc.insert({column:0,row:d},c.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(c){c-=this.wrapIndent;var f=this.line.charAt(0)===this.RLE?1:0,h=c>f?this.session.getOverwrite()?c:c-1:f,d=a.getVisualFromLogicalIdx(h,this.bidiMap),v=this.bidiMap.bidiLevels,p=0;!this.session.getOverwrite()&&c<=f&&v[d]%2!==0&&d++;for(var g=0;g<d;g++)p+=this.charWidths[v[g]];return!this.session.getOverwrite()&&c>f&&v[d]%2===0&&(p+=this.charWidths[v[d]]),this.wrapIndent&&(p+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(p+=this.rtlLineOffset),p},u.prototype.getSelections=function(c,f){var h=this.bidiMap,d=h.bidiLevels,v,p=[],g=0,m=Math.min(c,f)-this.wrapIndent,y=Math.max(c,f)-this.wrapIndent,w=!1,b=!1,x=0;this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,_=0;_<d.length;_++)S=h.logicalFromVisual[_],v=d[_],w=S>=m&&S<y,w&&!b?x=g:!w&&b&&p.push({left:x,width:g-x}),g+=this.charWidths[v],b=w;if(w&&_===d.length&&p.push({left:x,width:g-x}),this.isRtlDir)for(var M=0;M<p.length;M++)p[M].left+=this.rtlLineOffset;return p},u.prototype.offsetToCol=function(h){this.isRtlDir&&(h-=this.rtlLineOffset);var f=0,h=Math.max(h,0),d=0,v=0,p=this.bidiMap.bidiLevels,g=this.charWidths[p[v]];for(this.wrapIndent&&(h-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);h>d+g/2;){if(d+=g,v===p.length-1){g=0;break}g=this.charWidths[p[++v]]}return v>0&&p[v-1]%2!==0&&p[v]%2===0?(h<d&&v--,f=this.bidiMap.logicalFromVisual[v]):v>0&&p[v-1]%2===0&&p[v]%2!==0?f=1+(h>d?this.bidiMap.logicalFromVisual[v]:this.bidiMap.logicalFromVisual[v-1]):this.isRtlDir&&v===p.length-1&&g===0&&p[v-1]%2===0||!this.isRtlDir&&v===0&&p[v]%2!==0?f=1+this.bidiMap.logicalFromVisual[v]:(v>0&&p[v-1]%2!==0&&g!==0&&v--,f=this.bidiMap.logicalFromVisual[v]),f===0&&this.isRtlDir&&f++,f+this.wrapIndent},u}();n.BidiHandler=l}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,n,i){var a=t("./lib/oop"),o=t("./lib/lang"),s=t("./lib/event_emitter").EventEmitter,l=t("./range").Range,u=function(){function c(f){this.session=f,this.doc=f.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var h=this;this.cursor.on("change",function(d){h.$cursorChanged=!0,h.$silent||h._emit("changeCursor"),!h.$isEmpty&&!h.$silent&&h._emit("changeSelection"),!h.$keepDesiredColumnOnChange&&d.old.column!=d.value.column&&(h.$desiredColumn=null)}),this.anchor.on("change",function(){h.$anchorChanged=!0,!h.$isEmpty&&!h.$silent&&h._emit("changeSelection")})}return c.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},c.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},c.prototype.getCursor=function(){return this.lead.getPosition()},c.prototype.setAnchor=function(f,h){this.$isEmpty=!1,this.anchor.setPosition(f,h)},c.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},c.prototype.getSelectionLead=function(){return this.lead.getPosition()},c.prototype.isBackwards=function(){var f=this.anchor,h=this.lead;return f.row>h.row||f.row==h.row&&f.column>h.column},c.prototype.getRange=function(){var f=this.anchor,h=this.lead;return this.$isEmpty?l.fromPoints(h,h):this.isBackwards()?l.fromPoints(h,f):l.fromPoints(f,h)},c.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},c.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},c.prototype.setRange=function(f,h){var d=h?f.end:f.start,v=h?f.start:f.end;this.$setSelection(d.row,d.column,v.row,v.column)},c.prototype.$setSelection=function(f,h,d,v){if(!this.$silent){var p=this.$isEmpty,g=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(f,h),this.cursor.setPosition(d,v),this.$isEmpty=!l.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||p!=this.$isEmpty||g)&&this._emit("changeSelection")}},c.prototype.$moveSelection=function(f){var h=this.lead;this.$isEmpty&&this.setSelectionAnchor(h.row,h.column),f.call(this)},c.prototype.selectTo=function(f,h){this.$moveSelection(function(){this.moveCursorTo(f,h)})},c.prototype.selectToPosition=function(f){this.$moveSelection(function(){this.moveCursorToPosition(f)})},c.prototype.moveTo=function(f,h){this.clearSelection(),this.moveCursorTo(f,h)},c.prototype.moveToPosition=function(f){this.clearSelection(),this.moveCursorToPosition(f)},c.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},c.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},c.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},c.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},c.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},c.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},c.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},c.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},c.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},c.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},c.prototype.getWordRange=function(f,h){if(typeof h>"u"){var d=f||this.lead;f=d.row,h=d.column}return this.session.getWordRange(f,h)},c.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},c.prototype.selectAWord=function(){var f=this.getCursor(),h=this.session.getAWordRange(f.row,f.column);this.setSelectionRange(h)},c.prototype.getLineRange=function(f,h){var d=typeof f=="number"?f:this.lead.row,v,p=this.session.getFoldLine(d);return p?(d=p.start.row,v=p.end.row):v=d,h===!0?new l(d,0,v,this.session.getLine(v).length):new l(d,0,v+1,0)},c.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},c.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},c.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},c.prototype.wouldMoveIntoSoftTab=function(f,h,d){var v=f.column,p=f.column+h;return d<0&&(v=f.column-h,p=f.column),this.session.isTabStop(f)&&this.doc.getLine(f.row).slice(v,p).split(" ").length-1==h},c.prototype.moveCursorLeft=function(){var f=this.lead.getPosition(),h;if(h=this.session.getFoldAt(f.row,f.column,-1))this.moveCursorTo(h.start.row,h.start.column);else if(f.column===0)f.row>0&&this.moveCursorTo(f.row-1,this.doc.getLine(f.row-1).length);else{var d=this.session.getTabSize();this.wouldMoveIntoSoftTab(f,d,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-d):this.moveCursorBy(0,-1)}},c.prototype.moveCursorRight=function(){var f=this.lead.getPosition(),h;if(h=this.session.getFoldAt(f.row,f.column,1))this.moveCursorTo(h.end.row,h.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var d=this.session.getTabSize(),f=this.lead;this.wouldMoveIntoSoftTab(f,d,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,d):this.moveCursorBy(0,1)}},c.prototype.moveCursorLineStart=function(){var f=this.lead.row,h=this.lead.column,d=this.session.documentToScreenRow(f,h),v=this.session.screenToDocumentPosition(d,0),p=this.session.getDisplayLine(f,null,v.row,v.column),g=p.match(/^\s*/);g[0].length!=h&&!this.session.$useEmacsStyleLineStart&&(v.column+=g[0].length),this.moveCursorToPosition(v)},c.prototype.moveCursorLineEnd=function(){var f=this.lead,h=this.session.getDocumentLastRowColumnPosition(f.row,f.column);if(this.lead.column==h.column){var d=this.session.getLine(h.row);if(h.column==d.length){var v=d.search(/\s+$/);v>0&&(h.column=v)}}this.moveCursorTo(h.row,h.column)},c.prototype.moveCursorFileEnd=function(){var f=this.doc.getLength()-1,h=this.doc.getLine(f).length;this.moveCursorTo(f,h)},c.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},c.prototype.moveCursorLongWordRight=function(){var f=this.lead.row,h=this.lead.column,d=this.doc.getLine(f),v=d.substring(h);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var p=this.session.getFoldAt(f,h,1);if(p){this.moveCursorTo(p.end.row,p.end.column);return}if(this.session.nonTokenRe.exec(v)&&(h+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,v=d.substring(h)),h>=d.length){this.moveCursorTo(f,d.length),this.moveCursorRight(),f<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(v)&&(h+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,h)},c.prototype.moveCursorLongWordLeft=function(){var f=this.lead.row,h=this.lead.column,d;if(d=this.session.getFoldAt(f,h,-1)){this.moveCursorTo(d.start.row,d.start.column);return}var v=this.session.getFoldStringAt(f,h,-1);v==null&&(v=this.doc.getLine(f).substring(0,h));var p=o.stringReverse(v);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(p)&&(h-=this.session.nonTokenRe.lastIndex,p=p.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),h<=0){this.moveCursorTo(f,0),this.moveCursorLeft(),f>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(p)&&(h-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,h)},c.prototype.$shortWordEndIndex=function(f){var h=0,d,v=/\s/,p=this.session.tokenRe;if(p.lastIndex=0,this.session.tokenRe.exec(f))h=this.session.tokenRe.lastIndex;else{for(;(d=f[h])&&v.test(d);)h++;if(h<1){for(p.lastIndex=0;(d=f[h])&&!p.test(d);)if(p.lastIndex=0,h++,v.test(d))if(h>2){h--;break}else{for(;(d=f[h])&&v.test(d);)h++;if(h>2)break}}}return p.lastIndex=0,h},c.prototype.moveCursorShortWordRight=function(){var f=this.lead.row,h=this.lead.column,d=this.doc.getLine(f),v=d.substring(h),p=this.session.getFoldAt(f,h,1);if(p)return this.moveCursorTo(p.end.row,p.end.column);if(h==d.length){var g=this.doc.getLength();do f++,v=this.doc.getLine(f);while(f<g&&/^\s*$/.test(v));/^\s+/.test(v)||(v=""),h=0}var m=this.$shortWordEndIndex(v);this.moveCursorTo(f,h+m)},c.prototype.moveCursorShortWordLeft=function(){var f=this.lead.row,h=this.lead.column,d;if(d=this.session.getFoldAt(f,h,-1))return this.moveCursorTo(d.start.row,d.start.column);var v=this.session.getLine(f).substring(0,h);if(h===0){do f--,v=this.doc.getLine(f);while(f>0&&/^\s*$/.test(v));h=v.length,/\s+$/.test(v)||(v="")}var p=o.stringReverse(v),g=this.$shortWordEndIndex(p);return this.moveCursorTo(f,h-g)},c.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},c.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},c.prototype.moveCursorBy=function(f,h){var d=this.session.documentToScreenPosition(this.lead.row,this.lead.column),v;if(h===0&&(f!==0&&(this.session.$bidiHandler.isBidiRow(d.row,this.lead.row)?(v=this.session.$bidiHandler.getPosLeft(d.column),d.column=Math.round(v/this.session.$bidiHandler.charWidths[0])):v=d.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?d.column=this.$desiredColumn:this.$desiredColumn=d.column),f!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var p=this.session.lineWidgets[this.lead.row];f<0?f-=p.rowsAbove||0:f>0&&(f+=p.rowCount-(p.rowsAbove||0))}var g=this.session.screenToDocumentPosition(d.row+f,d.column,v);f!==0&&h===0&&g.row===this.lead.row&&(g.column,this.lead.column),this.moveCursorTo(g.row,g.column+h,h===0)},c.prototype.moveCursorToPosition=function(f){this.moveCursorTo(f.row,f.column)},c.prototype.moveCursorTo=function(f,h,d){var v=this.session.getFoldAt(f,h,1);v&&(f=v.start.row,h=v.start.column),this.$keepDesiredColumnOnChange=!0;var p=this.session.getLine(f);/[\uDC00-\uDFFF]/.test(p.charAt(h))&&p.charAt(h-1)&&(this.lead.row==f&&this.lead.column==h+1?h=h-1:h=h+1),this.lead.setPosition(f,h),this.$keepDesiredColumnOnChange=!1,d||(this.$desiredColumn=null)},c.prototype.moveCursorToScreen=function(f,h,d){var v=this.session.screenToDocumentPosition(f,h);this.moveCursorTo(v.row,v.column,d)},c.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},c.prototype.fromOrientedRange=function(f){this.setSelectionRange(f,f.cursor==f.start),this.$desiredColumn=f.desiredColumn||this.$desiredColumn},c.prototype.toOrientedRange=function(f){var h=this.getRange();return f?(f.start.column=h.start.column,f.start.row=h.start.row,f.end.column=h.end.column,f.end.row=h.end.row):f=h,f.cursor=this.isBackwards()?f.start:f.end,f.desiredColumn=this.$desiredColumn,f},c.prototype.getRangeOfMovements=function(f){var h=this.getCursor();try{f(this);var d=this.getCursor();return l.fromPoints(h,d)}catch{return l.fromPoints(h,h)}finally{this.moveCursorToPosition(h)}},c.prototype.toJSON=function(){if(this.rangeCount)var f=this.ranges.map(function(h){var d=h.clone();return d.isBackwards=h.cursor==h.start,d});else{var f=this.getRange();f.isBackwards=this.isBackwards()}return f},c.prototype.fromJSON=function(f){if(f.start==null)if(this.rangeList&&f.length>1){this.toSingleRange(f[0]);for(var h=f.length;h--;){var d=l.fromPoints(f[h].start,f[h].end);f[h].isBackwards&&(d.cursor=d.start),this.addRange(d,!0)}return}else f=f[0];this.rangeList&&this.toSingleRange(f),this.setSelectionRange(f,f.isBackwards)},c.prototype.isEqual=function(f){if((f.length||this.rangeCount)&&f.length!=this.rangeCount)return!1;if(!f.length||!this.ranges)return this.getRange().isEqual(f);for(var h=this.ranges.length;h--;)if(!this.ranges[h].isEqual(f[h]))return!1;return!0},c}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,a.implement(u.prototype,s),n.Selection=u}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(t,n,i){var a=t("./lib/report_error").reportError,o=2e3,s=function(){function l(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var c in this.states){for(var f=this.states[c],h=[],d=0,v=this.matchMappings[c]={defaultToken:"text"},p="g",g=[],m=0;m<f.length;m++){var y=f[m];if(y.defaultToken&&(v.defaultToken=y.defaultToken),y.caseInsensitive&&p.indexOf("i")===-1&&(p+="i"),y.unicode&&p.indexOf("u")===-1&&(p+="u"),y.regex!=null){y.regex instanceof RegExp&&(y.regex=y.regex.toString().slice(1,-1));var w=y.regex,b=new RegExp("(?:("+w+")|(.))").exec("a").length-2;Array.isArray(y.token)?y.token.length==1||b==1?y.token=y.token[0]:b-1!=y.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:y,groupCount:b-1}),y.token=y.token[0]):(y.tokenArray=y.token,y.token=null,y.onMatch=this.$arrayTokens):typeof y.token=="function"&&!y.onMatch&&(b>1?y.onMatch=this.$applyToken:y.onMatch=y.token),b>1&&(/\\\d/.test(y.regex)?w=y.regex.replace(/\\([0-9]+)/g,function(x,S){return"\\"+(parseInt(S,10)+d+1)}):(b=1,w=this.removeCapturingGroups(y.regex)),!y.splitRegex&&typeof y.token!="string"&&g.push(y)),v[d]=m,d+=b,h.push(w),y.onMatch||(y.onMatch=null)}}h.length||(v[0]=0,h.push("$")),g.forEach(function(x){x.splitRegex=this.createSplitterRegexp(x.regex,p)},this),this.regExps[c]=new RegExp("("+h.join(")|(")+")|($)",p)}}return l.prototype.$setMaxTokenCount=function(u){o=u|0},l.prototype.$applyToken=function(u){var c=this.splitRegex.exec(u).slice(1),f=this.token.apply(this,c);if(typeof f=="string")return[{type:f,value:u}];for(var h=[],d=0,v=f.length;d<v;d++)c[d]&&(h[h.length]={type:f[d],value:c[d]});return h},l.prototype.$arrayTokens=function(u){if(!u)return[];var c=this.splitRegex.exec(u);if(!c)return"text";for(var f=[],h=this.tokenArray,d=0,v=h.length;d<v;d++)c[d+1]&&(f[f.length]={type:h[d],value:c[d+1]});return f},l.prototype.removeCapturingGroups=function(u){var c=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(f,h){return h?"(?:":f});return c},l.prototype.createSplitterRegexp=function(u,c){if(u.indexOf("(?=")!=-1){var f=0,h=!1,d={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(v,p,g,m,y,w){return h?h=y!="]":y?h=!0:m?(f==d.stack&&(d.end=w+1,d.stack=-1),f--):g&&(f++,g.length!=1&&(d.stack=f,d.start=w)),v}),d.end!=null&&/^\)*$/.test(u.substr(d.end))&&(u=u.substring(0,d.start)+u.substr(d.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(c||"").replace("g",""))},l.prototype.getLineTokens=function(u,c){if(c&&typeof c!="string"){var f=c.slice(0);c=f[0],c==="#tmp"&&(f.shift(),c=f.shift())}else var f=[];var h=c||"start",d=this.states[h];d||(h="start",d=this.states[h]);var v=this.matchMappings[h],p=this.regExps[h];p.lastIndex=0;for(var g,m=[],y=0,w=0,b={type:null,value:""};g=p.exec(u);){var x=v.defaultToken,S=null,_=g[0],M=p.lastIndex;if(M-_.length>y){var A=u.substring(y,M-_.length);b.type==x?b.value+=A:(b.type&&m.push(b),b={type:x,value:A})}for(var E=0;E<g.length-2;E++)if(g[E+1]!==void 0){S=d[v[E]],S.onMatch?x=S.onMatch(_,h,f,u):x=S.token,S.next&&(typeof S.next=="string"?h=S.next:h=S.next(h,f),d=this.states[h],d||(this.reportError("state doesn't exist",h),h="start",d=this.states[h]),v=this.matchMappings[h],y=M,p=this.regExps[h],p.lastIndex=M),S.consumeLineEnd&&(y=M);break}if(_){if(typeof x=="string")(!S||S.merge!==!1)&&b.type===x?b.value+=_:(b.type&&m.push(b),b={type:x,value:_});else if(x){b.type&&m.push(b),b={type:null,value:""};for(var E=0;E<x.length;E++)m.push(x[E])}}if(y==u.length)break;if(y=M,w++>o){for(w>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:c,line:u});y<u.length;)b.type&&m.push(b),b={value:u.substring(y,y+=500),type:"overflow"};h="start",f=[];break}}return b.type&&m.push(b),f.length>1&&f[0]!==h&&f.unshift("#tmp",h),{tokens:m,state:f.length?f:h}},l}();s.prototype.reportError=a,n.Tokenizer=s}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(t,n,i){var a=t("../lib/deep_copy").deepCopy,o;o=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(u,c){if(!c){for(var f in u)this.$rules[f]=u[f];return}for(var f in u){for(var h=u[f],d=0;d<h.length;d++){var v=h[d];(v.next||v.onMatch)&&(typeof v.next=="string"&&v.next.indexOf(c)!==0&&(v.next=c+v.next),v.nextState&&v.nextState.indexOf(c)!==0&&(v.nextState=c+v.nextState))}this.$rules[c+f]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(u,c,f,h,d){var v=typeof u=="function"?new u().getRules():u;if(h)for(var p=0;p<h.length;p++)h[p]=c+h[p];else{h=[];for(var g in v)h.push(c+g)}if(this.addRules(v,c),f)for(var m=Array.prototype[d?"push":"unshift"],p=0;p<h.length;p++)m.apply(this.$rules[h[p]],a(f));this.$embeds||(this.$embeds=[]),this.$embeds.push(c)},this.getEmbeds=function(){return this.$embeds};var s=function(u,c){return(u!="start"||c.length)&&c.unshift(this.nextState,u),this.nextState},l=function(u,c){return c.shift(),c.shift()||"start"};this.normalizeRules=function(){var u=0,c=this.$rules;function f(h){var d=c[h];d.processed=!0;for(var v=0;v<d.length;v++){var p=d[v],g=null;Array.isArray(p)&&(g=p,p={}),!p.regex&&p.start&&(p.regex=p.start,p.next||(p.next=[]),p.next.push({defaultToken:p.token},{token:p.token+".end",regex:p.end||p.start,next:"pop"}),p.token=p.token+".start",p.push=!0);var m=p.next||p.push;if(m&&Array.isArray(m)){var y=p.stateName;y||(y=p.token,typeof y!="string"&&(y=y[0]||""),c[y]&&(y+=u++)),c[y]=m,p.next=y,f(y)}else m=="pop"&&(p.next=l);if(p.push&&(p.nextState=p.next||p.push,p.next=s,delete p.push),p.rules)for(var w in p.rules)c[w]?c[w].push&&c[w].push.apply(c[w],p.rules[w]):c[w]=p.rules[w];var b=typeof p=="string"?p:p.include;if(b&&(b==="$self"&&(b="start"),Array.isArray(b)?g=b.map(function(S){return c[S]}):g=c[b]),g){var x=[v,1].concat(g);p.noEscape&&(x=x.filter(function(S){return!S.next})),d.splice.apply(d,x),v--}p.keywordMap&&(p.token=this.createKeywordMapper(p.keywordMap,p.defaultToken||"text",p.caseInsensitive),delete p.defaultToken)}}Object.keys(c).forEach(f,this)},this.createKeywordMapper=function(u,c,f,h){var d=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(v){for(var p=u[v],g=p.split(h||"|"),m=g.length;m--;){var y=g[m];this.$keywordList.push(y),f&&(y=y.toLowerCase()),d[y]=v}},this),u=null,f?function(v){return d[v.toLowerCase()]||c}:function(v){return d[v]||c}},this.getKeywords=function(){return this.$keywords}}).call(o.prototype),n.TextHighlightRules=o}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,n,i){var a;a=function(){this.$behaviours={}},(function(){this.add=function(o,s,l){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[o]:this.$behaviours[o]={}}this.$behaviours[o][s]=l},this.addBehaviours=function(o){for(var s in o)for(var l in o[s])this.add(s,l,o[s][l])},this.remove=function(o){this.$behaviours&&this.$behaviours[o]&&delete this.$behaviours[o]},this.inherit=function(o,s){if(typeof o=="function")var l=new o().getBehaviours(s);else var l=o.getBehaviours(s);this.addBehaviours(l)},this.getBehaviours=function(o){if(o){for(var s={},l=0;l<o.length;l++)this.$behaviours[o[l]]&&(s[o[l]]=this.$behaviours[o[l]]);return s}else return this.$behaviours}}).call(a.prototype),n.Behaviour=a}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,n,i){var a=t("./range").Range,o=function(){function s(l,u,c){this.$session=l,this.$row=u,this.$rowTokens=l.getTokens(u);var f=l.getTokenAt(u,c);this.$tokenIndex=f?f.index:-1}return s.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},s.prototype.stepForward=function(){this.$tokenIndex+=1;for(var l;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,l||(l=this.$session.getLength()),this.$row>=l)return this.$row=l-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentTokenRow=function(){return this.$row},s.prototype.getCurrentTokenColumn=function(){var l=this.$rowTokens,u=this.$tokenIndex,c=l[u].start;if(c!==void 0)return c;for(c=0;u>0;)u-=1,c+=l[u].value.length;return c},s.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},s.prototype.getCurrentTokenRange=function(){var l=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new a(this.$row,u,this.$row,u+l.value.length)},s}();n.TokenIterator=o}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,i){var a=t("../../lib/oop"),o=t("../behaviour").Behaviour,s=t("../../token_iterator").TokenIterator,l=t("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],f,h={},d={'"':'"',"'":"'"},v=function(m){var y=-1;if(m.multiSelect&&(y=m.selection.index,h.rangeCount!=m.multiSelect.rangeCount&&(h={rangeCount:m.multiSelect.rangeCount})),h[y])return f=h[y];f=h[y]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(m,y,w,b){var x=m.end.row-m.start.row;return{text:w+y+b,selection:[0,m.start.column+1,x,m.end.column+(x?0:1)]}},g;g=function(m){m=m||{},this.add("braces","insertion",function(y,w,b,x,S){var _=b.getCursorPosition(),M=x.doc.getLine(_.row);if(S=="{"){v(b);var A=b.getSelectionRange(),E=x.doc.getTextRange(A),T=x.getTokenAt(_.row,_.column);if(E!==""&&E!=="{"&&b.getWrapBehavioursEnabled())return p(A,E,"{","}");if(T&&/(?:string)\.quasi|\.xml/.test(T.type)){var C=[/tag\-(?:open|name)/,/attribute\-name/];return C.some(function($){return $.test(T.type)})||/(string)\.quasi/.test(T.type)&&T.value[_.column-T.start-1]!=="$"?void 0:(g.recordAutoInsert(b,x,"}"),{text:"{}",selection:[1,1]})}else if(g.isSaneInsertion(b,x))return/[\]\}\)]/.test(M[_.column])||b.inMultiSelectMode||m.braces?(g.recordAutoInsert(b,x,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(b,x,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){v(b);var k=M.substring(_.column,_.column+1);if(k=="}"){var L=x.$findOpeningBracket("}",{column:_.column+1,row:_.row});if(L!==null&&g.isAutoInsertedClosing(_,M,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){v(b);var I="";g.isMaybeInsertedClosing(_,M)&&(I=l.stringRepeat("}",f.maybeInsertedBrackets),g.clearMaybeInsertedClosing());var k=M.substring(_.column,_.column+1);if(k==="}"){var O=x.findMatchingBracket({row:_.row,column:_.column+1},"}");if(!O)return null;var N=this.$getIndent(x.getLine(O.row))}else if(I)var N=this.$getIndent(M);else{g.clearMaybeInsertedClosing();return}var D=N+x.getTabString();return{text:`
`+D+`
`+N+I,selection:[1,D.length,1,D.length]}}else g.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(y,w,b,x,S){var _=x.doc.getTextRange(S);if(!S.isMultiLine()&&_=="{"){v(b);var M=x.doc.getLine(S.start.row),A=M.substring(S.end.column,S.end.column+1);if(A=="}")return S.end.column++,S;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(y,w,b,x,S){if(S=="("){v(b);var _=b.getSelectionRange(),M=x.doc.getTextRange(_);if(M!==""&&b.getWrapBehavioursEnabled())return p(_,M,"(",")");if(g.isSaneInsertion(b,x))return g.recordAutoInsert(b,x,")"),{text:"()",selection:[1,1]}}else if(S==")"){v(b);var A=b.getCursorPosition(),E=x.doc.getLine(A.row),T=E.substring(A.column,A.column+1);if(T==")"){var C=x.$findOpeningBracket(")",{column:A.column+1,row:A.row});if(C!==null&&g.isAutoInsertedClosing(A,E,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(y,w,b,x,S){var _=x.doc.getTextRange(S);if(!S.isMultiLine()&&_=="("){v(b);var M=x.doc.getLine(S.start.row),A=M.substring(S.start.column+1,S.start.column+2);if(A==")")return S.end.column++,S}}),this.add("brackets","insertion",function(y,w,b,x,S){if(S=="["){v(b);var _=b.getSelectionRange(),M=x.doc.getTextRange(_);if(M!==""&&b.getWrapBehavioursEnabled())return p(_,M,"[","]");if(g.isSaneInsertion(b,x))return g.recordAutoInsert(b,x,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){v(b);var A=b.getCursorPosition(),E=x.doc.getLine(A.row),T=E.substring(A.column,A.column+1);if(T=="]"){var C=x.$findOpeningBracket("]",{column:A.column+1,row:A.row});if(C!==null&&g.isAutoInsertedClosing(A,E,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(y,w,b,x,S){var _=x.doc.getTextRange(S);if(!S.isMultiLine()&&_=="["){v(b);var M=x.doc.getLine(S.start.row),A=M.substring(S.start.column+1,S.start.column+2);if(A=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(y,w,b,x,S){var _=x.$mode.$quotes||d;if(S.length==1&&_[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;v(b);var M=S,A=b.getSelectionRange(),E=x.doc.getTextRange(A);if(E!==""&&(E.length!=1||!_[E])&&b.getWrapBehavioursEnabled())return p(A,E,M,M);if(!E){var T=b.getCursorPosition(),C=x.doc.getLine(T.row),k=C.substring(T.column-1,T.column),L=C.substring(T.column,T.column+1),I=x.getTokenAt(T.row,T.column),O=x.getTokenAt(T.row,T.column+1);if(k=="\\"&&I&&/escape/.test(I.type))return null;var N=I&&/string|escape/.test(I.type),D=!O||/string|escape/.test(O.type),$;if(L==M)$=N!==D,$&&/string\.end/.test(O.type)&&($=!1);else{if(N&&!D||N&&D)return null;var R=x.$mode.tokenRe;R.lastIndex=0;var B=R.test(k);R.lastIndex=0;var j=R.test(L),G=x.$mode.$pairQuotesAfter,z=G&&G[M]&&G[M].test(k);if(!z&&B||j||L&&!/[\s;,.})\]\\]/.test(L))return null;var W=C[T.column-2];if(k==M&&(W==M||R.test(W)))return null;$=!0}return{text:$?M+M:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(y,w,b,x,S){var _=x.$mode.$quotes||d,M=x.doc.getTextRange(S);if(!S.isMultiLine()&&_.hasOwnProperty(M)){v(b);var A=x.doc.getLine(S.start.row),E=A.substring(S.start.column+1,S.start.column+2);if(E==M)return S.end.column++,S}}),m.closeDocComment!==!1&&this.add("doc comment end","insertion",function(y,w,b,x,S){if(y==="doc-start"&&(S===`
`||S===`\r
`)&&b.selection.isEmpty()){var _=b.getCursorPosition();if(_.column===0)return;for(var M=x.doc.getLine(_.row),A=x.doc.getLine(_.row+1),E=x.getTokens(_.row),T=0,C=0;C<E.length;C++){T+=E[C].value.length;var k=E[C];if(T>=_.column){if(T===_.column){if(!/\.doc/.test(k.type))return;if(/\*\//.test(k.value)){var L=E[C+1];if(!L||!/\.doc/.test(L.type))return}}var I=_.column-(T-k.value.length),O=k.value.indexOf("*/"),N=k.value.indexOf("/**",O>-1?O+2:0);if(N!==-1&&I>N&&I<N+3||O!==-1&&N!==-1&&I>=O&&I<=N||!/\.doc/.test(k.type))return;break}}var D=this.$getIndent(M);if(/\s*\*/.test(A))return/^\s*\*/.test(M)?{text:S+D+"* ",selection:[1,2+D.length,1,2+D.length]}:{text:S+D+" * ",selection:[1,3+D.length,1,3+D.length]};if(/\/\*\*/.test(M.substring(0,_.column)))return{text:S+D+" * "+S+" "+D+"*/",selection:[1,4+D.length,1,4+D.length]}}})},g.isSaneInsertion=function(m,y){var w=m.getCursorPosition(),b=new s(y,w.row,w.column);if(!this.$matchTokenType(b.getCurrentToken()||"text",u)){if(/[)}\]]/.test(m.session.getLine(w.row)[w.column]))return!0;var x=new s(y,w.row,w.column+1);if(!this.$matchTokenType(x.getCurrentToken()||"text",u))return!1}return b.stepForward(),b.getCurrentTokenRow()!==w.row||this.$matchTokenType(b.getCurrentToken()||"text",c)},g.$matchTokenType=function(m,y){return y.indexOf(m.type||m)>-1},g.recordAutoInsert=function(m,y,w){var b=m.getCursorPosition(),x=y.doc.getLine(b.row);this.isAutoInsertedClosing(b,x,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=b.row,f.autoInsertedLineEnd=w+x.substr(b.column),f.autoInsertedBrackets++},g.recordMaybeInsert=function(m,y,w){var b=m.getCursorPosition(),x=y.doc.getLine(b.row);this.isMaybeInsertedClosing(b,x)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=b.row,f.maybeInsertedLineStart=x.substr(0,b.column)+w,f.maybeInsertedLineEnd=x.substr(b.column),f.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(m,y,w){return f.autoInsertedBrackets>0&&m.row===f.autoInsertedRow&&w===f.autoInsertedLineEnd[0]&&y.substr(m.column)===f.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(m,y){return f.maybeInsertedBrackets>0&&m.row===f.maybeInsertedRow&&y.substr(m.column)===f.maybeInsertedLineEnd&&y.substr(0,m.column)==f.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},a.inherits(g,o),n.CstyleBehaviour=g}),ace.define("ace/unicode",["require","exports","module"],function(t,n,i){for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,s=[],l=0;l<a.length;l+=2)s.push(o+=a[l]),a[l+1]&&s.push(45,o+=a[l+1]);n.wordChars=String.fromCharCode.apply(null,s)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,n,i){var a=t("../config"),o=t("../tokenizer").Tokenizer,s=t("./text_highlight_rules").TextHighlightRules,l=t("./behaviour/cstyle").CstyleBehaviour,u=t("../unicode"),c=t("../lib/lang"),f=t("../token_iterator").TokenIterator,h=t("../range").Range,d;d=function(){this.HighlightRules=s},(function(){this.$defaultBehaviour=new l,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(v,p,g,m){var y=p.doc,w=!0,b=!0,x=1/0,S=p.getTabSize(),_=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var E=this.lineCommentStart.map(c.escapeRegExp).join("|"),M=this.lineCommentStart[0];else var E=c.escapeRegExp(this.lineCommentStart),M=this.lineCommentStart;E=new RegExp("^(\\s*)(?:"+E+") ?"),_=p.getUseSoftTabs();var k=function(j,G){var z=j.match(E);if(z){var W=z[1].length,Q=z[0].length;!O(j,W,Q)&&z[0][Q-1]==" "&&Q--,y.removeInLine(G,W,Q)}},I=M+" ",C=function(j,G){(!w||/\S/.test(j))&&(O(j,x,x)?y.insertInLine({row:G,column:x},I):y.insertInLine({row:G,column:x},M))},L=function(j,G){return E.test(j)},O=function(j,G,z){for(var W=0;G--&&j.charAt(G)==" ";)W++;if(W%S!=0)return!1;for(var W=0;j.charAt(z++)==" ";)W++;return S>2?W%S!=S-1:W%S==0}}else{if(!this.blockComment)return!1;var M=this.blockComment.start,A=this.blockComment.end,E=new RegExp("^(\\s*)(?:"+c.escapeRegExp(M)+")"),T=new RegExp("(?:"+c.escapeRegExp(A)+")\\s*$"),C=function($,R){L($,R)||(!w||/\S/.test($))&&(y.insertInLine({row:R,column:$.length},A),y.insertInLine({row:R,column:x},M))},k=function($,R){var B;(B=$.match(T))&&y.removeInLine(R,$.length-B[0].length,$.length),(B=$.match(E))&&y.removeInLine(R,B[1].length,B[0].length)},L=function($,R){if(E.test($))return!0;for(var B=p.getTokens(R),j=0;j<B.length;j++)if(B[j].type==="comment")return!0}}function N($){for(var R=g;R<=m;R++)$(y.getLine(R),R)}var D=1/0;N(function($,R){var B=$.search(/\S/);B!==-1?(B<x&&(x=B),b&&!L($,R)&&(b=!1)):D>$.length&&(D=$.length)}),x==1/0&&(x=D,w=!1,b=!1),_&&x%S!=0&&(x=Math.floor(x/S)*S),N(b?k:C)},this.toggleBlockComment=function(v,p,g,m){var y=this.blockComment;if(y){!y.start&&y[0]&&(y=y[0]);var w=new f(p,m.row,m.column),b=w.getCurrentToken();p.selection;var x=p.selection.toOrientedRange(),S,_;if(b&&/comment/.test(b.type)){for(var M,A;b&&/comment/.test(b.type);){var E=b.value.indexOf(y.start);if(E!=-1){var T=w.getCurrentTokenRow(),C=w.getCurrentTokenColumn()+E;M=new h(T,C,T,C+y.start.length);break}b=w.stepBackward()}for(var w=new f(p,m.row,m.column),b=w.getCurrentToken();b&&/comment/.test(b.type);){var E=b.value.indexOf(y.end);if(E!=-1){var T=w.getCurrentTokenRow(),C=w.getCurrentTokenColumn()+E;A=new h(T,C,T,C+y.end.length);break}b=w.stepForward()}A&&p.remove(A),M&&(p.remove(M),S=M.start.row,_=-y.start.length)}else _=y.start.length,S=g.start.row,p.insert(g.end,y.end),p.insert(g.start,y.start);x.start.row==S&&(x.start.column+=_),x.end.row==S&&(x.end.column+=_),p.selection.fromOrientedRange(x)}},this.getNextLineIndent=function(v,p,g){return this.$getIndent(p)},this.checkOutdent=function(v,p,g){return!1},this.autoOutdent=function(v,p,g){},this.$getIndent=function(v){return v.match(/^\s*/)[0]},this.createWorker=function(v){return null},this.createModeDelegates=function(v){this.$embeds=[],this.$modes={};for(var p in v)if(v[p]){var g=v[p],m=g.prototype.$id,y=a.$modes[m];y||(a.$modes[m]=y=new g),a.$modes[p]||(a.$modes[p]=y),this.$embeds.push(p),this.$modes[p]=y}for(var w=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=function(S){(function(_){var M=w[S],A=_[M];_[w[S]]=function(){return this.$delegator(M,arguments,A)}})(x)},x=this,p=0;p<w.length;p++)b(p)},this.$delegator=function(v,p,g){var m=p[0]||"start";if(typeof m!="string"){if(Array.isArray(m[2])){var y=m[2][m[2].length-1],w=this.$modes[y];if(w)return w[v].apply(w,[m[1]].concat([].slice.call(p,1)))}m=m[0]||"start"}for(var b=0;b<this.$embeds.length;b++)if(this.$modes[this.$embeds[b]]){var x=m.split(this.$embeds[b]);if(!x[0]&&x[1]){p[0]=x[1];var w=this.$modes[this.$embeds[b]];return w[v].apply(w,p)}}var S=g.apply(this,p);return g?S:void 0},this.transformAction=function(v,p,g,m,y){if(this.$behaviour){var w=this.$behaviour.getBehaviours();for(var b in w)if(w[b][p]){var x=w[b][p].apply(this,arguments);if(x)return x}}},this.getKeywords=function(v){if(!this.completionKeywords){var p=this.$tokenizer.rules,g=[];for(var m in p)for(var y=p[m],w=0,b=y.length;w<b;w++)if(typeof y[w].token=="string")/keyword|support|storage/.test(y[w].token)&&g.push(y[w].regex);else if(typeof y[w].token=="object"){for(var x=0,S=y[w].token.length;x<S;x++)if(/keyword|support|storage/.test(y[w].token[x])){var m=y[w].regex.match(/\(.+?\)/g)[x];g.push(m.substr(1,m.length-2))}}this.completionKeywords=g}return v?g.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(v,p,g,m){var y=this.$keywordList||this.$createKeywordList();return y.map(function(w){return{name:w,value:w,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(d.prototype),n.Mode=d}),ace.define("ace/apply_delta",["require","exports","module"],function(t,n,i){n.applyDelta=function(a,o,s){var l=o.start.row,u=o.start.column,c=a[l]||"";switch(o.action){case"insert":var f=o.lines;if(f.length===1)a[l]=c.substring(0,u)+o.lines[0]+c.substring(u);else{var h=[l,1].concat(o.lines);a.splice.apply(a,h),a[l]=c.substring(0,u)+a[l],a[l+o.lines.length-1]+=c.substring(u)}break;case"remove":var d=o.end.column,v=o.end.row;l===v?a[l]=c.substring(0,u)+c.substring(d):a.splice(l,v-l+1,c.substring(0,u)+a[v].substring(d));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var a=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,s=function(){function c(f,h,d){this.$onChange=this.onChange.bind(this),this.attach(f),typeof h!="number"?this.setPosition(h.row,h.column):this.setPosition(h,d)}return c.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},c.prototype.getDocument=function(){return this.document},c.prototype.onChange=function(f){if(!(f.start.row==f.end.row&&f.start.row!=this.row)&&!(f.start.row>this.row)){var h=u(f,{row:this.row,column:this.column},this.$insertRight);this.setPosition(h.row,h.column,!0)}},c.prototype.setPosition=function(f,h,d){var v;if(d?v={row:f,column:h}:v=this.$clipPositionToDocument(f,h),!(this.row==v.row&&this.column==v.column)){var p={row:this.row,column:this.column};this.row=v.row,this.column=v.column,this._signal("change",{old:p,value:v})}},c.prototype.detach=function(){this.document.off("change",this.$onChange)},c.prototype.attach=function(f){this.document=f||this.document,this.document.on("change",this.$onChange)},c.prototype.$clipPositionToDocument=function(f,h){var d={};return f>=this.document.getLength()?(d.row=Math.max(0,this.document.getLength()-1),d.column=this.document.getLine(d.row).length):f<0?(d.row=0,d.column=0):(d.row=f,d.column=Math.min(this.document.getLine(d.row).length,Math.max(0,h))),h<0&&(d.column=0),d},c}();s.prototype.$insertRight=!1,a.implement(s.prototype,o);function l(c,f,h){var d=h?c.column<=f.column:c.column<f.column;return c.row<f.row||c.row==f.row&&d}function u(c,f,h){var d=c.action=="insert",v=(d?1:-1)*(c.end.row-c.start.row),p=(d?1:-1)*(c.end.column-c.start.column),g=c.start,m=d?g:c.end;return l(f,g,h)?{row:f.row,column:f.column}:l(m,f,!h)?{row:f.row+v,column:f.column+(f.row==m.row?p:0)}:{row:g.row,column:g.column}}n.Anchor=s}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,n,i){var a=t("./lib/oop"),o=t("./apply_delta").applyDelta,s=t("./lib/event_emitter").EventEmitter,l=t("./range").Range,u=t("./anchor").Anchor,c=function(){function f(h){this.$lines=[""],h.length===0?this.$lines=[""]:Array.isArray(h)?this.insertMergedLines({row:0,column:0},h):this.insert({row:0,column:0},h)}return f.prototype.setValue=function(h){var d=this.getLength()-1;this.remove(new l(0,0,d,this.getLine(d).length)),this.insert({row:0,column:0},h||"")},f.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},f.prototype.createAnchor=function(h,d){return new u(this,h,d)},f.prototype.$detectNewLine=function(h){var d=h.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=d?d[1]:`
`,this._signal("changeNewLineMode")},f.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},f.prototype.setNewLineMode=function(h){this.$newLineMode!==h&&(this.$newLineMode=h,this._signal("changeNewLineMode"))},f.prototype.getNewLineMode=function(){return this.$newLineMode},f.prototype.isNewLine=function(h){return h==`\r
`||h=="\r"||h==`
`},f.prototype.getLine=function(h){return this.$lines[h]||""},f.prototype.getLines=function(h,d){return this.$lines.slice(h,d+1)},f.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},f.prototype.getLength=function(){return this.$lines.length},f.prototype.getTextRange=function(h){return this.getLinesForRange(h).join(this.getNewLineCharacter())},f.prototype.getLinesForRange=function(h){var d;if(h.start.row===h.end.row)d=[this.getLine(h.start.row).substring(h.start.column,h.end.column)];else{d=this.getLines(h.start.row,h.end.row),d[0]=(d[0]||"").substring(h.start.column);var v=d.length-1;h.end.row-h.start.row==v&&(d[v]=d[v].substring(0,h.end.column))}return d},f.prototype.insertLines=function(h,d){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(h,d)},f.prototype.removeLines=function(h,d){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(h,d)},f.prototype.insertNewLine=function(h){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(h,["",""])},f.prototype.insert=function(h,d){return this.getLength()<=1&&this.$detectNewLine(d),this.insertMergedLines(h,this.$split(d))},f.prototype.insertInLine=function(h,d){var v=this.clippedPos(h.row,h.column),p=this.pos(h.row,h.column+d.length);return this.applyDelta({start:v,end:p,action:"insert",lines:[d]},!0),this.clonePos(p)},f.prototype.clippedPos=function(h,d){var v=this.getLength();h===void 0?h=v:h<0?h=0:h>=v&&(h=v-1,d=void 0);var p=this.getLine(h);return d==null&&(d=p.length),d=Math.min(Math.max(d,0),p.length),{row:h,column:d}},f.prototype.clonePos=function(h){return{row:h.row,column:h.column}},f.prototype.pos=function(h,d){return{row:h,column:d}},f.prototype.$clipPosition=function(h){var d=this.getLength();return h.row>=d?(h.row=Math.max(0,d-1),h.column=this.getLine(d-1).length):(h.row=Math.max(0,h.row),h.column=Math.min(Math.max(h.column,0),this.getLine(h.row).length)),h},f.prototype.insertFullLines=function(h,d){h=Math.min(Math.max(h,0),this.getLength());var v=0;h<this.getLength()?(d=d.concat([""]),v=0):(d=[""].concat(d),h--,v=this.$lines[h].length),this.insertMergedLines({row:h,column:v},d)},f.prototype.insertMergedLines=function(h,d){var v=this.clippedPos(h.row,h.column),p={row:v.row+d.length-1,column:(d.length==1?v.column:0)+d[d.length-1].length};return this.applyDelta({start:v,end:p,action:"insert",lines:d}),this.clonePos(p)},f.prototype.remove=function(h){var d=this.clippedPos(h.start.row,h.start.column),v=this.clippedPos(h.end.row,h.end.column);return this.applyDelta({start:d,end:v,action:"remove",lines:this.getLinesForRange({start:d,end:v})}),this.clonePos(d)},f.prototype.removeInLine=function(h,d,v){var p=this.clippedPos(h,d),g=this.clippedPos(h,v);return this.applyDelta({start:p,end:g,action:"remove",lines:this.getLinesForRange({start:p,end:g})},!0),this.clonePos(p)},f.prototype.removeFullLines=function(h,d){h=Math.min(Math.max(0,h),this.getLength()-1),d=Math.min(Math.max(0,d),this.getLength()-1);var v=d==this.getLength()-1&&h>0,p=d<this.getLength()-1,g=v?h-1:h,m=v?this.getLine(g).length:0,y=p?d+1:d,w=p?0:this.getLine(y).length,b=new l(g,m,y,w),x=this.$lines.slice(h,d+1);return this.applyDelta({start:b.start,end:b.end,action:"remove",lines:this.getLinesForRange(b)}),x},f.prototype.removeNewLine=function(h){h<this.getLength()-1&&h>=0&&this.applyDelta({start:this.pos(h,this.getLine(h).length),end:this.pos(h+1,0),action:"remove",lines:["",""]})},f.prototype.replace=function(h,d){if(h instanceof l||(h=l.fromPoints(h.start,h.end)),d.length===0&&h.isEmpty())return h.start;if(d==this.getTextRange(h))return h.end;this.remove(h);var v;return d?v=this.insert(h.start,d):v=h.start,v},f.prototype.applyDeltas=function(h){for(var d=0;d<h.length;d++)this.applyDelta(h[d])},f.prototype.revertDeltas=function(h){for(var d=h.length-1;d>=0;d--)this.revertDelta(h[d])},f.prototype.applyDelta=function(h,d){var v=h.action=="insert";(v?h.lines.length<=1&&!h.lines[0]:!l.comparePoints(h.start,h.end))||(v&&h.lines.length>2e4?this.$splitAndapplyLargeDelta(h,2e4):(o(this.$lines,h,d),this._signal("change",h)))},f.prototype.$safeApplyDelta=function(h){var d=this.$lines.length;(h.action=="remove"&&h.start.row<d&&h.end.row<d||h.action=="insert"&&h.start.row<=d)&&this.applyDelta(h)},f.prototype.$splitAndapplyLargeDelta=function(h,d){for(var v=h.lines,p=v.length-d+1,g=h.start.row,m=h.start.column,y=0,w=0;y<p;y=w){w+=d-1;var b=v.slice(y,w);b.push(""),this.applyDelta({start:this.pos(g+y,m),end:this.pos(g+w,m=0),action:h.action,lines:b},!0)}h.lines=v.slice(y),h.start.row=g+y,h.start.column=m,this.applyDelta(h,!0)},f.prototype.revertDelta=function(h){this.$safeApplyDelta({start:this.clonePos(h.start),end:this.clonePos(h.end),action:h.action=="insert"?"remove":"insert",lines:h.lines.slice()})},f.prototype.indexToPosition=function(h,d){for(var v=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,g=d||0,m=v.length;g<m;g++)if(h-=v[g].length+p,h<0)return{row:g,column:h+v[g].length+p};return{row:m-1,column:h+v[m-1].length+p}},f.prototype.positionToIndex=function(h,d){for(var v=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,g=0,m=Math.min(h.row,v.length),y=d||0;y<m;++y)g+=v[y].length+p;return g+h.column},f.prototype.$split=function(h){return h.split(/\r\n|\r|\n/)},f}();c.prototype.$autoNewLine="",c.prototype.$newLineMode="auto",a.implement(c.prototype,s),n.Document=c}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var a=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,s=function(){function l(u,c){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var f=this;this.$worker=function(){if(f.running){for(var h=new Date,d=f.currentLine,v=-1,p=f.doc,g=d;f.lines[d];)d++;var m=p.getLength(),y=0;for(f.running=!1;d<m;){f.$tokenizeRow(d),v=d;do d++;while(f.lines[d]);if(y++,y%5===0&&new Date-h>20){f.running=setTimeout(f.$worker,20);break}}f.currentLine=d,v==-1&&(v=d),g<=v&&f.fireUpdateEvent(g,v)}}}return l.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},l.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},l.prototype.fireUpdateEvent=function(u,c){var f={first:u,last:c};this._signal("update",{data:f})},l.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},l.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},l.prototype.$updateOnChange=function(u){var c=u.start.row,f=u.end.row-c;if(f===0)this.lines[c]=null;else if(u.action=="remove")this.lines.splice(c,f+1,null),this.states.splice(c,f+1,null);else{var h=Array(f+1);h.unshift(c,1),this.lines.splice.apply(this.lines,h),this.states.splice.apply(this.states,h)}this.currentLine=Math.min(c,this.currentLine,this.doc.getLength()),this.stop()},l.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},l.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},l.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},l.prototype.$tokenizeRow=function(u){var c=this.doc.getLine(u),f=this.states[u-1],h=this.tokenizer.getLineTokens(c,f,u);return this.states[u]+""!=h.state+""?(this.states[u]=h.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=h.tokens},l.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},l}();a.implement(s.prototype,o),n.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(t,n,i){var a=t("./lib/lang"),o=t("./range").Range,s=function(){function l(u,c,f){f===void 0&&(f="text"),this.setRegexp(u),this.clazz=c,this.type=f}return l.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},l.prototype.update=function(u,c,f,h){if(this.regExp)for(var d=h.firstRow,v=h.lastRow,p={},g=d;g<=v;g++){var m=this.cache[g];m==null&&(m=a.getMatchOffsets(f.getLine(g),this.regExp),m.length>this.MAX_RANGES&&(m=m.slice(0,this.MAX_RANGES)),m=m.map(function(x){return new o(g,x.offset,g,x.offset+x.length)}),this.cache[g]=m.length?m:"");for(var y=m.length;y--;){var w=m[y].toScreenRange(f),b=w.toString();p[b]||(p[b]=!0,c.drawSingleLineMarker(u,w,this.clazz,h))}}},l}();s.prototype.MAX_RANGES=500,n.SearchHighlight=s}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(t,n,i){var a=function(){function x(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return x.prototype.addSession=function(S){this.$session=S},x.prototype.add=function(S,_,M){if(!this.$fromUndo&&S!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),_===!1||!this.lastDeltas){this.lastDeltas=[];var A=this.$undoStack.length;A>this.$undoDepth-1&&this.$undoStack.splice(0,A-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),S.id=this.$rev=++this.$maxRev}(S.action=="remove"||S.action=="insert")&&(this.$lastDelta=S),this.lastDeltas.push(S)}},x.prototype.addSelection=function(S,_){this.selections.push({value:S,rev:_||this.$rev})},x.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},x.prototype.markIgnored=function(S,_){_==null&&(_=this.$rev+1);for(var M=this.$undoStack,A=M.length;A--;){var E=M[A][0];if(E.id<=S)break;E.id<_&&(E.ignore=!0)}this.lastDeltas=null},x.prototype.getSelection=function(S,_){for(var M=this.selections,A=M.length;A--;){var E=M[A];if(E.rev<S)return _&&(E=M[A+1]),E}},x.prototype.getRevision=function(){return this.$rev},x.prototype.getDeltas=function(S,_){_==null&&(_=this.$rev+1);for(var M=this.$undoStack,A=null,E=0,T=M.length;T--;){var C=M[T][0];if(C.id<_&&!A&&(A=T+1),C.id<=S){E=T+1;break}}return M.slice(E,A)},x.prototype.getChangedRanges=function(S,_){_==null&&(_=this.$rev+1)},x.prototype.getChangedLines=function(S,_){_==null&&(_=this.$rev+1)},x.prototype.undo=function(S,_){this.lastDeltas=null;var M=this.$undoStack;if(o(M,M.length)){S||(S=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var A=M.pop(),E=null;return A&&(E=S.undoChanges(A,_),this.$redoStack.push(A),this.$syncRev()),this.$fromUndo=!1,E}},x.prototype.redo=function(S,_){if(this.lastDeltas=null,S||(S=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var M=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);b(this.$redoStack,M),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(T){T[0].id=++this.$maxRev},this)}var A=this.$redoStack.pop(),E=null;return A&&(E=S.redoChanges(A,_),this.$undoStack.push(A),this.$syncRev()),this.$fromUndo=!1,E},x.prototype.$syncRev=function(){var S=this.$undoStack,_=S[S.length-1],M=_&&_[0].id||0;this.$redoStackBaseRev=M,this.$rev=M},x.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},x.prototype.canUndo=function(){return this.$undoStack.length>0},x.prototype.canRedo=function(){return this.$redoStack.length>0},x.prototype.bookmark=function(S){S==null&&(S=this.$rev),this.mark=S},x.prototype.isAtBookmark=function(){return this.$rev===this.mark},x.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},x.prototype.fromJSON=function(S){this.reset(),this.$undoStack=S.$undoStack,this.$redoStack=S.$redoStack},x.prototype.$prettyPrint=function(S){return S?f(S):f(this.$undoStack)+`
---
`+f(this.$redoStack)},x}();a.prototype.hasUndo=a.prototype.canUndo,a.prototype.hasRedo=a.prototype.canRedo,a.prototype.isClean=a.prototype.isAtBookmark,a.prototype.markClean=a.prototype.bookmark;function o(x,S){for(var _=S;_--;){var M=x[_];if(M&&!M[0].ignore){for(;_<S-1;){var A=v(x[_],x[_+1]);x[_]=A[0],x[_+1]=A[1],_++}return!0}}}var s=t("./range").Range,l=s.comparePoints;s.comparePoints;function u(x){return{row:x.row,column:x.column}}function c(x){return{start:u(x.start),end:u(x.end),action:x.action,lines:x.lines.slice()}}function f(x){if(x=x||this,Array.isArray(x))return x.map(f).join(`
`);var S="";return x.action?(S=x.action=="insert"?"+":"-",S+="["+x.lines+"]"):x.value&&(Array.isArray(x.value)?S=x.value.map(h).join(`
`):S=h(x.value)),x.start&&(S+=h(x)),(x.id||x.rev)&&(S+="	("+(x.id||x.rev)+")"),S}function h(x){return x.start.row+":"+x.start.column+"=>"+x.end.row+":"+x.end.column}function d(x,S){var _=x.action=="insert",M=S.action=="insert";if(_&&M)if(l(S.start,x.end)>=0)g(S,x,-1);else if(l(S.start,x.start)<=0)g(x,S,1);else return null;else if(_&&!M)if(l(S.start,x.end)>=0)g(S,x,-1);else if(l(S.end,x.start)<=0)g(x,S,-1);else return null;else if(!_&&M)if(l(S.start,x.start)>=0)g(S,x,1);else if(l(S.start,x.start)<=0)g(x,S,1);else return null;else if(!_&&!M)if(l(S.start,x.start)>=0)g(S,x,1);else if(l(S.end,x.start)<=0)g(x,S,-1);else return null;return[S,x]}function v(x,S){for(var _=x.length;_--;)for(var M=0;M<S.length;M++)if(!d(x[_],S[M])){for(;_<x.length;){for(;M--;)d(S[M],x[_]);M=S.length,_++}return[x,S]}return x.selectionBefore=S.selectionBefore=x.selectionAfter=S.selectionAfter=null,[S,x]}function p(x,S){var _=x.action=="insert",M=S.action=="insert";if(_&&M)l(x.start,S.start)<0?g(S,x,1):g(x,S,1);else if(_&&!M)l(x.start,S.end)>=0?g(x,S,-1):(l(x.start,S.start)<=0||g(x,s.fromPoints(S.start,x.start),-1),g(S,x,1));else if(!_&&M)l(S.start,x.end)>=0?g(S,x,-1):(l(S.start,x.start)<=0||g(S,s.fromPoints(x.start,S.start),-1),g(x,S,1));else if(!_&&!M)if(l(S.start,x.end)>=0)g(S,x,-1);else if(l(S.end,x.start)<=0)g(x,S,-1);else{var A,E;return l(x.start,S.start)<0&&(A=x,x=y(x,S.start)),l(x.end,S.end)>0&&(E=y(x,S.end)),m(S.end,x.start,x.end,-1),E&&!A&&(x.lines=E.lines,x.start=E.start,x.end=E.end,E=x),[S,A,E].filter(Boolean)}return[S,x]}function g(x,S,_){m(x.start,S.start,S.end,_),m(x.end,S.start,S.end,_)}function m(x,S,_,M){x.row==(M==1?S:_).row&&(x.column+=M*(_.column-S.column)),x.row+=M*(_.row-S.row)}function y(x,S){var _=x.lines,M=x.end;x.end=u(S);var A=x.end.row-x.start.row,E=_.splice(A,_.length),T=A?S.column:S.column-x.start.column;_.push(E[0].substring(0,T)),E[0]=E[0].substr(T);var C={start:u(S),end:M,lines:E,action:x.action};return C}function w(x,S){S=c(S);for(var _=x.length;_--;){for(var M=x[_],A=0;A<M.length;A++){var E=M[A],T=p(E,S);S=T[0],T.length!=2&&(T[2]?(M.splice(A+1,1,T[1],T[2]),A++):T[1]||(M.splice(A,1),A--))}M.length||x.splice(_,1)}return x}function b(x,S){for(var _=0;_<S.length;_++)for(var M=S[_],A=0;A<M.length;A++)w(x,M[A])}n.UndoManager=a}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,n,i){var a=t("../range").Range,o=function(){function s(l,u){this.foldData=l,Array.isArray(u)?this.folds=u:u=this.folds=[u];var c=u[u.length-1];this.range=new a(u[0].start.row,u[0].start.column,c.end.row,c.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(f){f.setFoldLine(this)},this)}return s.prototype.shiftRow=function(l){this.start.row+=l,this.end.row+=l,this.folds.forEach(function(u){u.start.row+=l,u.end.row+=l})},s.prototype.addFold=function(l){if(l.sameRow){if(l.start.row<this.startRow||l.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(l),this.folds.sort(function(u,c){return-u.range.compareEnd(c.start.row,c.start.column)}),this.range.compareEnd(l.start.row,l.start.column)>0?(this.end.row=l.end.row,this.end.column=l.end.column):this.range.compareStart(l.end.row,l.end.column)<0&&(this.start.row=l.start.row,this.start.column=l.start.column)}else if(l.start.row==this.end.row)this.folds.push(l),this.end.row=l.end.row,this.end.column=l.end.column;else if(l.end.row==this.start.row)this.folds.unshift(l),this.start.row=l.start.row,this.start.column=l.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");l.foldLine=this},s.prototype.containsRow=function(l){return l>=this.start.row&&l<=this.end.row},s.prototype.walk=function(l,u,c){var f=0,h=this.folds,d,v,p,g=!0;u==null&&(u=this.end.row,c=this.end.column);for(var m=0;m<h.length;m++){if(d=h[m],v=d.range.compareStart(u,c),v==-1){l(null,u,c,f,g);return}if(p=l(null,d.start.row,d.start.column,f,g),p=!p&&l(d.placeholder,d.start.row,d.start.column,f),p||v===0)return;g=!d.sameRow,f=d.end.column}l(null,u,c,f,g)},s.prototype.getNextFoldTo=function(l,u){for(var c,f,h=0;h<this.folds.length;h++){if(c=this.folds[h],f=c.range.compareEnd(l,u),f==-1)return{fold:c,kind:"after"};if(f===0)return{fold:c,kind:"inside"}}return null},s.prototype.addRemoveChars=function(l,u,c){var f=this.getNextFoldTo(l,u),h,d;if(f){if(h=f.fold,f.kind=="inside"&&h.start.column!=u&&h.start.row!=l)window.console&&window.console.log(l,u,h);else if(h.start.row==l){d=this.folds;var v=d.indexOf(h);for(v===0&&(this.start.column+=c),v;v<d.length;v++){if(h=d[v],h.start.column+=c,!h.sameRow)return;h.end.column+=c}this.end.column+=c}}},s.prototype.split=function(l,u){var c=this.getNextFoldTo(l,u);if(!c||c.kind=="inside")return null;var f=c.fold,h=this.folds,d=this.foldData,v=h.indexOf(f),p=h[v-1];this.end.row=p.end.row,this.end.column=p.end.column,h=h.splice(v,h.length-v);var g=new s(d,h);return d.splice(d.indexOf(this)+1,0,g),g},s.prototype.merge=function(l){for(var u=l.folds,c=0;c<u.length;c++)this.addFold(u[c]);var f=this.foldData;f.splice(f.indexOf(l),1)},s.prototype.toString=function(){var l=[this.range.toString()+": ["];return this.folds.forEach(function(u){l.push("  "+u.toString())}),l.push("]"),l.join(`
`)},s.prototype.idxToPosition=function(l){for(var u=0,c=0;c<this.folds.length;c++){var f=this.folds[c];if(l-=f.start.column-u,l<0)return{row:f.start.row,column:f.start.column+l};if(l-=f.placeholder.length,l<0)return f.start;u=f.end.column}return{row:this.end.row,column:this.end.column+l}},s}();n.FoldLine=o}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,n,i){var a=t("./range").Range,o=a.comparePoints,s=function(){function l(){this.ranges=[],this.$bias=1}return l.prototype.pointIndex=function(u,c,f){for(var h=this.ranges,d=f||0;d<h.length;d++){var v=h[d],p=o(u,v.end);if(!(p>0)){var g=o(u,v.start);return p===0?c&&g!==0?-d-2:d:g>0||g===0&&!c?d:-d-1}}return-d-1},l.prototype.add=function(u){var c=!u.isEmpty(),f=this.pointIndex(u.start,c);f<0&&(f=-f-1);var h=this.pointIndex(u.end,c,f);return h<0?h=-h-1:h++,this.ranges.splice(f,h-f,u)},l.prototype.addList=function(u){for(var c=[],f=u.length;f--;)c.push.apply(c,this.add(u[f]));return c},l.prototype.substractPoint=function(u){var c=this.pointIndex(u);if(c>=0)return this.ranges.splice(c,1)},l.prototype.merge=function(){var u=[],c=this.ranges;c=c.sort(function(p,g){return o(p.start,g.start)});for(var f=c[0],h,d=1;d<c.length;d++){h=f,f=c[d];var v=o(h.end,f.start);v<0||v==0&&!h.isEmpty()&&!f.isEmpty()||(o(h.end,f.end)<0&&(h.end.row=f.end.row,h.end.column=f.end.column),c.splice(d,1),u.push(f),f=h,d--)}return this.ranges=c,u},l.prototype.contains=function(u,c){return this.pointIndex({row:u,column:c})>=0},l.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},l.prototype.rangeAtPoint=function(u){var c=this.pointIndex(u);if(c>=0)return this.ranges[c]},l.prototype.clipRows=function(u,c){var f=this.ranges;if(f[0].start.row>c||f[f.length-1].start.row<u)return[];var h=this.pointIndex({row:u,column:0});h<0&&(h=-h-1);var d=this.pointIndex({row:c,column:0},h);d<0&&(d=-d-1);for(var v=[],p=h;p<d;p++)v.push(f[p]);return v},l.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},l.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},l.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},l.prototype.$onChange=function(u){for(var c=u.start,f=u.end,h=c.row,d=f.row,v=this.ranges,p=0,g=v.length;p<g;p++){var m=v[p];if(m.end.row>=h)break}if(u.action=="insert")for(var y=d-h,w=-c.column+f.column;p<g;p++){var m=v[p];if(m.start.row>h)break;if(m.start.row==h&&m.start.column>=c.column&&(m.start.column==c.column&&this.$bias<=0||(m.start.column+=w,m.start.row+=y)),m.end.row==h&&m.end.column>=c.column){if(m.end.column==c.column&&this.$bias<0)continue;m.end.column==c.column&&w>0&&p<g-1&&m.end.column>m.start.column&&m.end.column==v[p+1].start.column&&(m.end.column-=w),m.end.column+=w,m.end.row+=y}}else for(var y=h-d,w=c.column-f.column;p<g;p++){var m=v[p];if(m.start.row>d)break;m.end.row<d&&(h<m.end.row||h==m.end.row&&c.column<m.end.column)?(m.end.row=h,m.end.column=c.column):m.end.row==d?m.end.column<=f.column?(y||m.end.column>c.column)&&(m.end.column=c.column,m.end.row=c.row):(m.end.column+=w,m.end.row+=y):m.end.row>d&&(m.end.row+=y),m.start.row<d&&(h<m.start.row||h==m.start.row&&c.column<m.start.column)?(m.start.row=h,m.start.column=c.column):m.start.row==d?m.start.column<=f.column?(y||m.start.column>c.column)&&(m.start.column=c.column,m.start.row=c.row):(m.start.column+=w,m.start.row+=y):m.start.row>d&&(m.start.row+=y)}if(y!=0&&p<g)for(;p<g;p++){var m=v[p];m.start.row+=y,m.end.row+=y}},l}();s.prototype.comparePoints=o,n.RangeList=s}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(t,n,i){var a=this&&this.__extends||function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(p[m]=g[m])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(d,v);function p(){this.constructor=d}d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),o=t("../range_list").RangeList,s=function(h){a(d,h);function d(v,p){var g=h.call(this)||this;return g.foldLine=null,g.placeholder=p,g.range=v,g.start=v.start,g.end=v.end,g.sameRow=v.start.row==v.end.row,g.subFolds=g.ranges=[],g}return d.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},d.prototype.setFoldLine=function(v){this.foldLine=v,this.subFolds.forEach(function(p){p.setFoldLine(v)})},d.prototype.clone=function(){var v=this.range.clone(),p=new d(v,this.placeholder);return this.subFolds.forEach(function(g){p.subFolds.push(g.clone())}),p.collapseChildren=this.collapseChildren,p},d.prototype.addSubFold=function(v){if(!this.range.isEqual(v)){u(v,this.start);for(var w=v.start.row,b=v.start.column,p=0,g=-1;p<this.subFolds.length&&(g=this.subFolds[p].range.compare(w,b),g==1);p++);var m=this.subFolds[p],y=0;if(g==0){if(m.range.containsRange(v))return m.addSubFold(v);y=1}for(var w=v.range.end.row,b=v.range.end.column,x=p,g=-1;x<this.subFolds.length&&(g=this.subFolds[x].range.compare(w,b),g==1);x++);g==0&&x++;for(var S=this.subFolds.splice(p,x-p,v),_=g==0?S.length-1:S.length,M=y;M<_;M++)v.addSubFold(S[M]);return v.setFoldLine(this.foldLine),v}},d.prototype.restoreRange=function(v){return f(v,this.start)},d}(o);function l(h,d){h.row-=d.row,h.row==0&&(h.column-=d.column)}function u(h,d){l(h.start,d),l(h.end,d)}function c(h,d){h.row==0&&(h.column+=d.column),h.row+=d.row}function f(h,d){c(h.start,d),c(h.end,d)}n.Fold=s}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(t,n,i){var a=t("../range").Range,o=t("./fold_line").FoldLine,s=t("./fold").Fold,l=t("../token_iterator").TokenIterator,u=t("../mouse/mouse_event").MouseEvent;function c(){this.getFoldAt=function(f,h,d){var v=this.getFoldLine(f);if(!v)return null;for(var p=v.folds,g=0;g<p.length;g++){var m=p[g].range;if(m.contains(f,h)){if(d==1&&m.isEnd(f,h)&&!m.isEmpty())continue;if(d==-1&&m.isStart(f,h)&&!m.isEmpty())continue;return p[g]}}},this.getFoldsInRange=function(f){var h=f.start,d=f.end,v=this.$foldData,p=[];h.column+=1,d.column-=1;for(var g=0;g<v.length;g++){var m=v[g].range.compareRange(f);if(m!=2){if(m==-2)break;for(var y=v[g].folds,w=0;w<y.length;w++){var b=y[w];if(m=b.range.compareRange(f),m==-2)break;if(m==2)continue;if(m==42)break;p.push(b)}}}return h.column-=1,d.column+=1,p},this.getFoldsInRangeList=function(f){if(Array.isArray(f)){var h=[];f.forEach(function(d){h=h.concat(this.getFoldsInRange(d))},this)}else var h=this.getFoldsInRange(f);return h},this.getAllFolds=function(){for(var f=[],h=this.$foldData,d=0;d<h.length;d++)for(var v=0;v<h[d].folds.length;v++)f.push(h[d].folds[v]);return f},this.getFoldStringAt=function(f,h,d,v){if(v=v||this.getFoldLine(f),!v)return null;for(var p={end:{column:0}},g,m,y=0;y<v.folds.length;y++){m=v.folds[y];var w=m.range.compareEnd(f,h);if(w==-1){g=this.getLine(m.start.row).substring(p.end.column,m.start.column);break}else if(w===0)return null;p=m}return g||(g=this.getLine(m.start.row).substring(p.end.column)),d==-1?g.substring(0,h-p.end.column):d==1?g.substring(h-p.end.column):g},this.getFoldLine=function(f,h){var d=this.$foldData,v=0;for(h&&(v=d.indexOf(h)),v==-1&&(v=0),v;v<d.length;v++){var p=d[v];if(p.start.row<=f&&p.end.row>=f)return p;if(p.end.row>f)return null}return null},this.getNextFoldLine=function(f,h){var d=this.$foldData,v=0;for(h&&(v=d.indexOf(h)),v==-1&&(v=0),v;v<d.length;v++){var p=d[v];if(p.end.row>=f)return p}return null},this.getFoldedRowCount=function(f,h){for(var d=this.$foldData,v=h-f+1,p=0;p<d.length;p++){var g=d[p],m=g.end.row,y=g.start.row;if(m>=h){y<h&&(y>=f?v-=h-y:v=0);break}else m>=f&&(y>=f?v-=m-y:v-=m-f+1)}return v},this.$addFoldLine=function(f){return this.$foldData.push(f),this.$foldData.sort(function(h,d){return h.start.row-d.start.row}),f},this.addFold=function(f,h){var d=this.$foldData,v=!1,p;f instanceof s?p=f:(p=new s(h,f),p.collapseChildren=h.collapseChildren),this.$clipRangeToDocument(p.range);var g=p.start.row,m=p.start.column,y=p.end.row,w=p.end.column,b=this.getFoldAt(g,m,1),x=this.getFoldAt(y,w,-1);if(b&&x==b)return b.addSubFold(p);b&&!b.range.isStart(g,m)&&this.removeFold(b),x&&!x.range.isEnd(y,w)&&this.removeFold(x);var S=this.getFoldsInRange(p.range);S.length>0&&(this.removeFolds(S),p.collapseChildren||S.forEach(function(E){p.addSubFold(E)}));for(var _=0;_<d.length;_++){var M=d[_];if(y==M.start.row){M.addFold(p),v=!0;break}else if(g==M.end.row){if(M.addFold(p),v=!0,!p.sameRow){var A=d[_+1];if(A&&A.start.row==y){M.merge(A);break}}break}else if(y<=M.start.row)break}return v||(M=this.$addFoldLine(new o(this.$foldData,p))),this.$useWrapMode?this.$updateWrapData(M.start.row,M.start.row):this.$updateRowLengthCache(M.start.row,M.start.row),this.$modified=!0,this._signal("changeFold",{data:p,action:"add"}),p},this.addFolds=function(f){f.forEach(function(h){this.addFold(h)},this)},this.removeFold=function(f){var h=f.foldLine,d=h.start.row,v=h.end.row,p=this.$foldData,g=h.folds;if(g.length==1)p.splice(p.indexOf(h),1);else if(h.range.isEnd(f.end.row,f.end.column))g.pop(),h.end.row=g[g.length-1].end.row,h.end.column=g[g.length-1].end.column;else if(h.range.isStart(f.start.row,f.start.column))g.shift(),h.start.row=g[0].start.row,h.start.column=g[0].start.column;else if(f.sameRow)g.splice(g.indexOf(f),1);else{var m=h.split(f.start.row,f.start.column);g=m.folds,g.shift(),m.start.row=g[0].start.row,m.start.column=g[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(d,v):this.$updateRowLengthCache(d,v)),this.$modified=!0,this._signal("changeFold",{data:f,action:"remove"})},this.removeFolds=function(f){for(var h=[],d=0;d<f.length;d++)h.push(f[d]);h.forEach(function(v){this.removeFold(v)},this),this.$modified=!0},this.expandFold=function(f){this.removeFold(f),f.subFolds.forEach(function(h){f.restoreRange(h),this.addFold(h)},this),f.collapseChildren>0&&this.foldAll(f.start.row+1,f.end.row,f.collapseChildren-1),f.subFolds=[]},this.expandFolds=function(f){f.forEach(function(h){this.expandFold(h)},this)},this.unfold=function(f,h){var d,v;if(f==null)d=new a(0,0,this.getLength(),0),h==null&&(h=!0);else if(typeof f=="number")d=new a(f,0,f,this.getLine(f).length);else if("row"in f)d=a.fromPoints(f,f);else{if(Array.isArray(f))return v=[],f.forEach(function(g){v=v.concat(this.unfold(g))},this),v;d=f}v=this.getFoldsInRangeList(d);for(var p=v;v.length==1&&a.comparePoints(v[0].start,d.start)<0&&a.comparePoints(v[0].end,d.end)>0;)this.expandFolds(v),v=this.getFoldsInRangeList(d);if(h!=!1?this.removeFolds(v):this.expandFolds(v),p.length)return p},this.isRowFolded=function(f,h){return!!this.getFoldLine(f,h)},this.getRowFoldEnd=function(f,h){var d=this.getFoldLine(f,h);return d?d.end.row:f},this.getRowFoldStart=function(f,h){var d=this.getFoldLine(f,h);return d?d.start.row:f},this.getFoldDisplayLine=function(f,h,d,v,p){v==null&&(v=f.start.row),p==null&&(p=0),h==null&&(h=f.end.row),d==null&&(d=this.getLine(h).length);var g=this.doc,m="";return f.walk(function(y,w,b,x){if(!(w<v)){if(w==v){if(b<p)return;x=Math.max(p,x)}y!=null?m+=y:m+=g.getLine(w).substring(x,b)}},h,d),m},this.getDisplayLine=function(f,h,d,v){var p=this.getFoldLine(f);if(p)return this.getFoldDisplayLine(p,f,h,d,v);var g;return g=this.doc.getLine(f),g.substring(v||0,h||g.length)},this.$cloneFoldData=function(){var f=[];return f=this.$foldData.map(function(h){var d=h.folds.map(function(v){return v.clone()});return new o(f,d)}),f},this.toggleFold=function(f){var h=this.selection,d=h.getRange(),v,p;if(d.isEmpty()){var g=d.start;if(v=this.getFoldAt(g.row,g.column),v){this.expandFold(v);return}else(p=this.findMatchingBracket(g))?d.comparePoint(p)==1?d.end=p:(d.start=p,d.start.column++,d.end.column--):(p=this.findMatchingBracket({row:g.row,column:g.column+1}))?(d.comparePoint(p)==1?d.end=p:d.start=p,d.start.column++):d=this.getCommentFoldRange(g.row,g.column)||d}else{var m=this.getFoldsInRange(d);if(f&&m.length){this.expandFolds(m);return}else m.length==1&&(v=m[0])}if(v||(v=this.getFoldAt(d.start.row,d.start.column)),v&&v.range.toString()==d.toString()){this.expandFold(v);return}var y="...";if(!d.isMultiLine()){if(y=this.getTextRange(d),y.length<4)return;y=y.trim().substring(0,2)+".."}this.addFold(y,d)},this.getCommentFoldRange=function(f,h,d){var v=new l(this,f,h),p=v.getCurrentToken(),g=p&&p.type;if(p&&/^comment|string/.test(g)){g=g.match(/comment|string/)[0],g=="comment"&&(g+="|doc-start|\\.doc");var m=new RegExp(g),y=new a;if(d!=1){do p=v.stepBackward();while(p&&m.test(p.type));p=v.stepForward()}y.start.row=v.getCurrentTokenRow(),y.start.column=v.getCurrentTokenColumn()+p.value.length,v=new l(this,f,h);var w=this.getState(v.$row);if(d!=-1){var b=-1;do if(p=v.stepForward(),b==-1){var x=this.getState(v.$row);w.toString()!==x.toString()&&(b=v.$row)}else if(v.$row>b)break;while(p&&m.test(p.type));p=v.stepBackward()}else p=v.getCurrentToken();return y.end.row=v.getCurrentTokenRow(),y.end.column=v.getCurrentTokenColumn(),y}},this.foldAll=function(f,h,d,v){d==null&&(d=1e5);var p=this.foldWidgets;if(p){h=h||this.getLength(),f=f||0;for(var g=f;g<h;g++)if(p[g]==null&&(p[g]=this.getFoldWidget(g)),p[g]=="start"&&!(v&&!v(g))){var m=this.getFoldWidgetRange(g);m&&m.isMultiLine()&&m.end.row<=h&&m.start.row>=f&&(g=m.end.row,m.collapseChildren=d,this.addFold("...",m))}}},this.foldToLevel=function(f){for(this.foldAll();f-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var f=this;this.foldAll(null,null,null,function(h){for(var d=f.getTokens(h),v=0;v<d.length;v++){var p=d[v];if(!(p.type=="text"&&/^\s+$/.test(p.value)))return!!/comment/.test(p.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(f){if(!this.$foldStyles[f])throw new Error("invalid fold style: "+f+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=f){this.$foldStyle=f,f=="manual"&&this.unfold();var h=this.$foldMode;this.$setFolding(null),this.$setFolding(h)}},this.$setFolding=function(f){if(this.$foldMode!=f){if(this.$foldMode=f,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!f||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=f.getFoldWidget.bind(f,this,this.$foldStyle),this.getFoldWidgetRange=f.getFoldWidgetRange.bind(f,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(f,h){var d=this.foldWidgets;if(!d||h&&d[f])return{};for(var v=f-1,p;v>=0;){var g=d[v];if(g==null&&(g=d[v]=this.getFoldWidget(v)),g=="start"){var m=this.getFoldWidgetRange(v);if(p||(p=m),m&&m.end.row>=f)break}v--}return{range:v!==-1&&m,firstRange:p}},this.onFoldWidgetClick=function(f,h){h instanceof u&&(h=h.domEvent);var d={children:h.shiftKey,all:h.ctrlKey||h.metaKey,siblings:h.altKey},v=this.$toggleFoldWidget(f,d);if(!v){var p=h.target||h.srcElement;p&&/ace_fold-widget/.test(p.className)&&(p.className+=" ace_invalid")}},this.$toggleFoldWidget=function(f,h){if(this.getFoldWidget){var d=this.getFoldWidget(f),v=this.getLine(f),p=d==="end"?-1:1,g=this.getFoldAt(f,p===-1?0:v.length,p);if(g)return h.children||h.all?this.removeFold(g):this.expandFold(g),g;var m=this.getFoldWidgetRange(f,!0);if(m&&!m.isMultiLine()&&(g=this.getFoldAt(m.start.row,m.start.column,1),g&&m.isEqual(g.range)))return this.removeFold(g),g;if(h.siblings){var y=this.getParentFoldRangeData(f);if(y.range)var w=y.range.start.row+1,b=y.range.end.row;this.foldAll(w,b,h.all?1e4:0)}else h.children?(b=m?m.end.row:this.getLength(),this.foldAll(f+1,b,h.all?1e4:0)):m&&(h.all&&(m.collapseChildren=1e4),this.addFold("...",m));return m}},this.toggleFoldWidget=function(f){var h=this.selection.getCursor().row;h=this.getRowFoldStart(h);var d=this.$toggleFoldWidget(h,{});if(!d){var v=this.getParentFoldRangeData(h,!0);if(d=v.range||v.firstRange,d){h=d.start.row;var p=this.getFoldAt(h,this.getLine(h).length,1);p?this.removeFold(p):this.addFold("...",d)}}},this.updateFoldWidgets=function(f){var h=f.start.row,d=f.end.row-h;if(d===0)this.foldWidgets[h]=null;else if(f.action=="remove")this.foldWidgets.splice(h,d+1,null);else{var v=Array(d+1);v.unshift(h,1),this.foldWidgets.splice.apply(this.foldWidgets,v)}},this.tokenizerUpdateFoldWidgets=function(f){var h=f.data;h.first!=h.last&&this.foldWidgets.length>h.first&&this.foldWidgets.splice(h.first,this.foldWidgets.length)}}n.Folding=c}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,n,i){var a=t("../token_iterator").TokenIterator,o=t("../range").Range;function s(){this.findMatchingBracket=function(l,u){if(l.column==0)return null;var c=u||this.getLine(l.row).charAt(l.column-1);if(c=="")return null;var f=c.match(/([\(\[\{])|([\)\]\}])/);return f?f[1]?this.$findClosingBracket(f[1],l):this.$findOpeningBracket(f[2],l):null},this.getBracketRange=function(l){var u=this.getLine(l.row),c=!0,f,h=u.charAt(l.column-1),d=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(d||(h=u.charAt(l.column),l={row:l.row,column:l.column+1},d=h&&h.match(/([\(\[\{])|([\)\]\}])/),c=!1),!d)return null;if(d[1]){var v=this.$findClosingBracket(d[1],l);if(!v)return null;f=o.fromPoints(l,v),c||(f.end.column++,f.start.column--),f.cursor=f.end}else{var v=this.$findOpeningBracket(d[2],l);if(!v)return null;f=o.fromPoints(v,l),c||(f.start.column++,f.end.column--),f.cursor=f.start}return f},this.getMatchingBracketRanges=function(l,u){var c=this.getLine(l.row),f=/([\(\[\{])|([\)\]\}])/,h=!u&&c.charAt(l.column-1),d=h&&h.match(f);if(d||(h=(u===void 0||u)&&c.charAt(l.column),l={row:l.row,column:l.column+1},d=h&&h.match(f)),!d)return null;var v=new o(l.row,l.column-1,l.row,l.column),p=d[1]?this.$findClosingBracket(d[1],l):this.$findOpeningBracket(d[2],l);if(!p)return[v];var g=new o(p.row,p.column,p.row,p.column+1);return[v,g]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(l,u,c){var f=this.$brackets[l],h=1,d=new a(this,u.row,u.column),v=d.getCurrentToken();if(v||(v=d.stepForward()),!!v){c||(c=new RegExp("(\\.?"+v.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var p=u.column-d.getCurrentTokenColumn()-2,g=v.value;;){for(;p>=0;){var m=g.charAt(p);if(m==f){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:p+d.getCurrentTokenColumn()}}else m==l&&(h+=1);p-=1}do v=d.stepBackward();while(v&&!c.test(v.type));if(v==null)break;g=v.value,p=g.length-1}return null}},this.$findClosingBracket=function(l,u,c){var f=this.$brackets[l],h=1,d=new a(this,u.row,u.column),v=d.getCurrentToken();if(v||(v=d.stepForward()),!!v){c||(c=new RegExp("(\\.?"+v.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var p=u.column-d.getCurrentTokenColumn();;){for(var g=v.value,m=g.length;p<m;){var y=g.charAt(p);if(y==f){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:p+d.getCurrentTokenColumn()}}else y==l&&(h+=1);p+=1}do v=d.stepForward();while(v&&!c.test(v.type));if(v==null)break;p=0}return null}},this.getMatchingTags=function(l){var u=new a(this,l.row,l.column),c=this.$findTagName(u);if(c){var f=u.stepBackward();return f.value==="<"?this.$findClosingTag(u,c):this.$findOpeningTag(u,c)}},this.$findTagName=function(l){var u=l.getCurrentToken(),c=!1,f=!1;if(u&&u.type.indexOf("tag-name")===-1)do f?u=l.stepBackward():u=l.stepForward(),u&&(u.value==="/>"?f=!0:u.type.indexOf("tag-name")!==-1&&(c=!0));while(u&&!c);return u},this.$findClosingTag=function(l,u){var c,f=u.value,h=u.value,d=0,v=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);u=l.stepForward();var p=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length),g=!1;do{if(c=u,c.type.indexOf("tag-close")!==-1&&!g){var m=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);g=!0}if(u=l.stepForward(),u){if(u.value===">"&&!g){var m=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);g=!0}if(u.type.indexOf("tag-name")!==-1){if(f=u.value,h===f){if(c.value==="<")d++;else if(c.value==="</"&&(d--,d<0)){l.stepBackward();var y=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2);u=l.stepForward();var w=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=l.stepForward()),u&&u.value===">")var b=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);else return}}}else if(h===f&&u.value==="/>"&&(d--,d<0))var y=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2),w=y,b=w,m=new o(p.end.row,p.end.column,p.end.row,p.end.column+1)}}while(u&&d>=0);if(v&&m&&y&&b&&p&&w)return{openTag:new o(v.start.row,v.start.column,m.end.row,m.end.column),closeTag:new o(y.start.row,y.start.column,b.end.row,b.end.column),openTagName:p,closeTagName:w}},this.$findOpeningTag=function(l,u){var c=l.getCurrentToken(),f=u.value,h=0,d=l.getCurrentTokenRow(),v=l.getCurrentTokenColumn(),p=v+2,g=new o(d,v,d,p);l.stepForward();var m=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=l.stepForward()),!(!u||u.value!==">")){var y=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);l.stepBackward(),l.stepBackward();do if(u=c,d=l.getCurrentTokenRow(),v=l.getCurrentTokenColumn(),p=v+u.value.length,c=l.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(f===u.value)if(c.value==="<"){if(h++,h>0){var w=new o(d,v,d,p),b=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);do u=l.stepForward();while(u&&u.value!==">");var x=new o(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1)}}else c.value==="</"&&h--}else if(u.value==="/>"){for(var S=0,_=c;_;){if(_.type.indexOf("tag-name")!==-1&&_.value===f){h--;break}else if(_.value==="<")break;_=l.stepBackward(),S++}for(var M=0;M<S;M++)l.stepForward()}}while(c&&h<=0);if(b&&x&&g&&y&&w&&m)return{openTag:new o(b.start.row,b.start.column,x.end.row,x.end.column),closeTag:new o(g.start.row,g.start.column,y.end.row,y.end.column),openTagName:w,closeTagName:m}}}}n.BracketMatch=s}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,n,i){var a=t("./lib/oop"),o=t("./lib/lang"),s=t("./bidihandler").BidiHandler,l=t("./config"),u=t("./lib/event_emitter").EventEmitter,c=t("./selection").Selection,f=t("./mode/text").Mode,h=t("./range").Range,d=t("./document").Document,v=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,g=t("./undomanager").UndoManager,m=function(){function T(C,k){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++T.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new v(new f().getTokenizer(),this);var L=this;this.bgTokenizer.on("update",function(I){L._signal("tokenizerUpdate",I)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof C!="object"||!C.getLine)&&(C=new d(C)),this.setDocument(C),this.selection=new c(this),this.$bidiHandler=new s(this),l.resetOptions(this),this.setMode(k),l._signal("session",this),this.destroyed=!1}return T.prototype.setDocument=function(C){this.doc&&this.doc.off("change",this.$onChange),this.doc=C,C.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},T.prototype.getDocument=function(){return this.doc},T.prototype.$resetRowCache=function(C){if(!C){this.$docRowCache=[],this.$screenRowCache=[];return}var k=this.$docRowCache.length,L=this.$getRowCacheIndex(this.$docRowCache,C)+1;k>L&&(this.$docRowCache.splice(L,k),this.$screenRowCache.splice(L,k))},T.prototype.$getRowCacheIndex=function(C,k){for(var L=0,I=C.length-1;L<=I;){var O=L+I>>1,N=C[O];if(k>N)L=O+1;else if(k<N)I=O-1;else return O}return L-1},T.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},T.prototype.onChangeFold=function(C){var k=C.data;this.$resetRowCache(k.start.row)},T.prototype.onChange=function(C){this.$modified=!0,this.$bidiHandler.onChange(C),this.$resetRowCache(C.start.row);var k=this.$updateInternalDataOnChange(C);!this.$fromUndo&&this.$undoManager&&(k&&k.length&&(this.$undoManager.add({action:"removeFolds",folds:k},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(C,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(C),this._signal("change",C)},T.prototype.setValue=function(C){this.doc.setValue(C),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},T.fromJSON=function(C){typeof C=="string"&&(C=JSON.parse(C));var k=new g;k.$undoStack=C.history.undo,k.$redoStack=C.history.redo,k.mark=C.history.mark,k.$rev=C.history.rev;var L=new T(C.value);return C.folds.forEach(function(I){L.addFold("...",h.fromPoints(I.start,I.end))}),L.setAnnotations(C.annotations),L.setBreakpoints(C.breakpoints),L.setMode(C.mode),L.setScrollLeft(C.scrollLeft),L.setScrollTop(C.scrollTop),L.setUndoManager(k),L.selection.fromJSON(C.selection),L},T.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(C){return C.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},T.prototype.toString=function(){return this.doc.getValue()},T.prototype.getSelection=function(){return this.selection},T.prototype.getState=function(C){return this.bgTokenizer.getState(C)},T.prototype.getTokens=function(C){return this.bgTokenizer.getTokens(C)},T.prototype.getTokenAt=function(C,k){var L=this.bgTokenizer.getTokens(C),I,O=0;if(k==null){var N=L.length-1;O=this.getLine(C).length}else for(var N=0;N<L.length&&(O+=L[N].value.length,!(O>=k));N++);return I=L[N],I?(I.index=N,I.start=O-I.value.length,I):null},T.prototype.setUndoManager=function(C){if(this.$undoManager=C,this.$informUndoManager&&this.$informUndoManager.cancel(),C){var k=this;C.addSession(this),this.$syncInformUndoManager=function(){k.$informUndoManager.cancel(),k.mergeUndoDeltas=!1},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},T.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},T.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},T.prototype.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"	"},T.prototype.setUseSoftTabs=function(C){this.setOption("useSoftTabs",C)},T.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},T.prototype.setTabSize=function(C){this.setOption("tabSize",C)},T.prototype.getTabSize=function(){return this.$tabSize},T.prototype.isTabStop=function(C){return this.$useSoftTabs&&C.column%this.$tabSize===0},T.prototype.setNavigateWithinSoftTabs=function(C){this.setOption("navigateWithinSoftTabs",C)},T.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},T.prototype.setOverwrite=function(C){this.setOption("overwrite",C)},T.prototype.getOverwrite=function(){return this.$overwrite},T.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},T.prototype.addGutterDecoration=function(C,k){this.$decorations[C]||(this.$decorations[C]=""),this.$decorations[C]+=" "+k,this._signal("changeBreakpoint",{})},T.prototype.removeGutterDecoration=function(C,k){this.$decorations[C]=(this.$decorations[C]||"").replace(" "+k,""),this._signal("changeBreakpoint",{})},T.prototype.getBreakpoints=function(){return this.$breakpoints},T.prototype.setBreakpoints=function(C){this.$breakpoints=[];for(var k=0;k<C.length;k++)this.$breakpoints[C[k]]="ace_breakpoint";this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},T.prototype.setBreakpoint=function(C,k){k===void 0&&(k="ace_breakpoint"),k?this.$breakpoints[C]=k:delete this.$breakpoints[C],this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoint=function(C){delete this.$breakpoints[C],this._signal("changeBreakpoint",{})},T.prototype.addMarker=function(C,k,L,I){var O=this.$markerId++,N={range:C,type:L||"line",renderer:typeof L=="function"?L:null,clazz:k,inFront:!!I,id:O};return I?(this.$frontMarkers[O]=N,this._signal("changeFrontMarker")):(this.$backMarkers[O]=N,this._signal("changeBackMarker")),O},T.prototype.addDynamicMarker=function(C,k){if(C.update){var L=this.$markerId++;return C.id=L,C.inFront=!!k,k?(this.$frontMarkers[L]=C,this._signal("changeFrontMarker")):(this.$backMarkers[L]=C,this._signal("changeBackMarker")),C}},T.prototype.removeMarker=function(C){var k=this.$frontMarkers[C]||this.$backMarkers[C];if(k){var L=k.inFront?this.$frontMarkers:this.$backMarkers;delete L[C],this._signal(k.inFront?"changeFrontMarker":"changeBackMarker")}},T.prototype.getMarkers=function(C){return C?this.$frontMarkers:this.$backMarkers},T.prototype.highlight=function(C){if(!this.$searchHighlight){var k=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(k)}this.$searchHighlight.setRegexp(C)},T.prototype.highlightLines=function(C,k,L,I){typeof k!="number"&&(L=k,k=C),L||(L="ace_step");var O=new h(C,0,k,1/0);return O.id=this.addMarker(O,L,"fullLine",I),O},T.prototype.setAnnotations=function(C){this.$annotations=C,this._signal("changeAnnotation",{})},T.prototype.getAnnotations=function(){return this.$annotations||[]},T.prototype.clearAnnotations=function(){this.setAnnotations([])},T.prototype.$detectNewLine=function(C){var k=C.match(/^.*?(\r?\n)/m);k?this.$autoNewLine=k[1]:this.$autoNewLine=`
`},T.prototype.getWordRange=function(C,k){var L=this.getLine(C),I=!1;if(k>0&&(I=!!L.charAt(k-1).match(this.tokenRe)),I||(I=!!L.charAt(k).match(this.tokenRe)),I)var O=this.tokenRe;else if(/^\s+$/.test(L.slice(k-1,k+1)))var O=/\s/;else var O=this.nonTokenRe;var N=k;if(N>0){do N--;while(N>=0&&L.charAt(N).match(O));N++}for(var D=k;D<L.length&&L.charAt(D).match(O);)D++;return new h(C,N,C,D)},T.prototype.getAWordRange=function(C,k){for(var L=this.getWordRange(C,k),I=this.getLine(L.end.row);I.charAt(L.end.column).match(/[ \t]/);)L.end.column+=1;return L},T.prototype.setNewLineMode=function(C){this.doc.setNewLineMode(C)},T.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},T.prototype.setUseWorker=function(C){this.setOption("useWorker",C)},T.prototype.getUseWorker=function(){return this.$useWorker},T.prototype.onReloadTokenizer=function(C){var k=C.data;this.bgTokenizer.start(k.first),this._signal("tokenizerUpdate",C)},T.prototype.setMode=function(C,k){if(C&&typeof C=="object"){if(C.getTokenizer)return this.$onChangeMode(C);var L=C,I=L.path}else I=C||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new f),this.$modes[I]&&!L){this.$onChangeMode(this.$modes[I]),k&&k();return}this.$modeId=I,l.loadModule(["mode",I],(function(O){if(this.$modeId!==I)return k&&k();this.$modes[I]&&!L?this.$onChangeMode(this.$modes[I]):O&&O.Mode&&(O=new O.Mode(L),L||(this.$modes[I]=O,O.$id=I),this.$onChangeMode(O)),k&&k()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},T.prototype.$onChangeMode=function(C,k){if(k||(this.$modeId=C.$id),this.$mode!==C){var L=this.$mode;this.$mode=C,this.$stopWorker(),this.$useWorker&&this.$startWorker();var I=C.getTokenizer();if(I.on!==void 0){var O=this.onReloadTokenizer.bind(this);I.on("update",O)}this.bgTokenizer.setTokenizer(I),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=C.tokenRe,this.nonTokenRe=C.nonTokenRe,k||(C.attachToSession&&C.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(C.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:L,mode:C}))}},T.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},T.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(C){l.warn("Could not load worker",C),this.$worker=null}},T.prototype.getMode=function(){return this.$mode},T.prototype.setScrollTop=function(C){this.$scrollTop===C||isNaN(C)||(this.$scrollTop=C,this._signal("changeScrollTop",C))},T.prototype.getScrollTop=function(){return this.$scrollTop},T.prototype.setScrollLeft=function(C){this.$scrollLeft===C||isNaN(C)||(this.$scrollLeft=C,this._signal("changeScrollLeft",C))},T.prototype.getScrollLeft=function(){return this.$scrollLeft},T.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},T.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var C=0;return this.lineWidgets.forEach(function(k){k&&k.screenWidth>C&&(C=k.screenWidth)}),this.lineWidgetWidth=C},T.prototype.$computeWidth=function(C){if(this.$modified||C){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var k=this.doc.getAllLines(),L=this.$rowLengthCache,I=0,O=0,N=this.$foldData[O],D=N?N.start.row:1/0,$=k.length,R=0;R<$;R++){if(R>D){if(R=N.end.row+1,R>=$)break;N=this.$foldData[O++],D=N?N.start.row:1/0}L[R]==null&&(L[R]=this.$getStringScreenWidth(k[R])[0]),L[R]>I&&(I=L[R])}this.screenWidth=I}},T.prototype.getLine=function(C){return this.doc.getLine(C)},T.prototype.getLines=function(C,k){return this.doc.getLines(C,k)},T.prototype.getLength=function(){return this.doc.getLength()},T.prototype.getTextRange=function(C){return this.doc.getTextRange(C||this.selection.getRange())},T.prototype.insert=function(C,k){return this.doc.insert(C,k)},T.prototype.remove=function(C){return this.doc.remove(C)},T.prototype.removeFullLines=function(C,k){return this.doc.removeFullLines(C,k)},T.prototype.undoChanges=function(C,k){if(C.length){this.$fromUndo=!0;for(var L=C.length-1;L!=-1;L--){var I=C[L];I.action=="insert"||I.action=="remove"?this.doc.revertDelta(I):I.folds&&this.addFolds(I.folds)}!k&&this.$undoSelect&&(C.selectionBefore?this.selection.fromJSON(C.selectionBefore):this.selection.setRange(this.$getUndoSelection(C,!0))),this.$fromUndo=!1}},T.prototype.redoChanges=function(C,k){if(C.length){this.$fromUndo=!0;for(var L=0;L<C.length;L++){var I=C[L];(I.action=="insert"||I.action=="remove")&&this.doc.$safeApplyDelta(I)}!k&&this.$undoSelect&&(C.selectionAfter?this.selection.fromJSON(C.selectionAfter):this.selection.setRange(this.$getUndoSelection(C,!1))),this.$fromUndo=!1}},T.prototype.setUndoSelect=function(C){this.$undoSelect=C},T.prototype.$getUndoSelection=function(C,k){function L($){return k?$.action!=="insert":$.action==="insert"}for(var I,O,N=0;N<C.length;N++){var D=C[N];if(D.start){if(!I){L(D)?I=h.fromPoints(D.start,D.end):I=h.fromPoints(D.start,D.start);continue}L(D)?(O=D.start,I.compare(O.row,O.column)==-1&&I.setStart(O),O=D.end,I.compare(O.row,O.column)==1&&I.setEnd(O)):(O=D.start,I.compare(O.row,O.column)==-1&&(I=h.fromPoints(D.start,D.start)))}}return I},T.prototype.replace=function(C,k){return this.doc.replace(C,k)},T.prototype.moveText=function(C,k,L){var I=this.getTextRange(C),O=this.getFoldsInRange(C),N=h.fromPoints(k,k);if(!L){this.remove(C);var D=C.start.row-C.end.row,$=D?-C.end.column:C.start.column-C.end.column;$&&(N.start.row==C.end.row&&N.start.column>C.end.column&&(N.start.column+=$),N.end.row==C.end.row&&N.end.column>C.end.column&&(N.end.column+=$)),D&&N.start.row>=C.end.row&&(N.start.row+=D,N.end.row+=D)}if(N.end=this.insert(N.start,I),O.length){var R=C.start,B=N.start,D=B.row-R.row,$=B.column-R.column;this.addFolds(O.map(function(z){return z=z.clone(),z.start.row==R.row&&(z.start.column+=$),z.end.row==R.row&&(z.end.column+=$),z.start.row+=D,z.end.row+=D,z}))}return N},T.prototype.indentRows=function(C,k,L){L=L.replace(/\t/g,this.getTabString());for(var I=C;I<=k;I++)this.doc.insertInLine({row:I,column:0},L)},T.prototype.outdentRows=function(C){for(var k=C.collapseRows(),L=new h(0,0,0,0),I=this.getTabSize(),O=k.start.row;O<=k.end.row;++O){var N=this.getLine(O);L.start.row=O,L.end.row=O;for(var D=0;D<I&&N.charAt(D)==" ";++D);D<I&&N.charAt(D)=="	"?(L.start.column=D,L.end.column=D+1):(L.start.column=0,L.end.column=D),this.remove(L)}},T.prototype.$moveLines=function(C,k,L){if(C=this.getRowFoldStart(C),k=this.getRowFoldEnd(k),L<0){var I=this.getRowFoldStart(C+L);if(I<0)return 0;var O=I-C}else if(L>0){var I=this.getRowFoldEnd(k+L);if(I>this.doc.getLength()-1)return 0;var O=I-k}else{C=this.$clipRowToDocument(C),k=this.$clipRowToDocument(k);var O=k-C+1}var N=new h(C,0,k,Number.MAX_VALUE),D=this.getFoldsInRange(N).map(function(R){return R=R.clone(),R.start.row+=O,R.end.row+=O,R}),$=L==0?this.doc.getLines(C,k):this.doc.removeFullLines(C,k);return this.doc.insertFullLines(C+O,$),D.length&&this.addFolds(D),O},T.prototype.moveLinesUp=function(C,k){return this.$moveLines(C,k,-1)},T.prototype.moveLinesDown=function(C,k){return this.$moveLines(C,k,1)},T.prototype.duplicateLines=function(C,k){return this.$moveLines(C,k,0)},T.prototype.$clipRowToDocument=function(C){return Math.max(0,Math.min(C,this.doc.getLength()-1))},T.prototype.$clipColumnToRow=function(C,k){return k<0?0:Math.min(this.doc.getLine(C).length,k)},T.prototype.$clipPositionToDocument=function(C,k){if(k=Math.max(0,k),C<0)C=0,k=0;else{var L=this.doc.getLength();C>=L?(C=L-1,k=this.doc.getLine(L-1).length):k=Math.min(this.doc.getLine(C).length,k)}return{row:C,column:k}},T.prototype.$clipRangeToDocument=function(C){C.start.row<0?(C.start.row=0,C.start.column=0):C.start.column=this.$clipColumnToRow(C.start.row,C.start.column);var k=this.doc.getLength()-1;return C.end.row>k?(C.end.row=k,C.end.column=this.doc.getLine(k).length):C.end.column=this.$clipColumnToRow(C.end.row,C.end.column),C},T.prototype.setUseWrapMode=function(C){if(C!=this.$useWrapMode){if(this.$useWrapMode=C,this.$modified=!0,this.$resetRowCache(0),C){var k=this.getLength();this.$wrapData=Array(k),this.$updateWrapData(0,k-1)}this._signal("changeWrapMode")}},T.prototype.getUseWrapMode=function(){return this.$useWrapMode},T.prototype.setWrapLimitRange=function(C,k){(this.$wrapLimitRange.min!==C||this.$wrapLimitRange.max!==k)&&(this.$wrapLimitRange={min:C,max:k},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},T.prototype.adjustWrapLimit=function(C,k){var L=this.$wrapLimitRange;L.max<0&&(L={min:k,max:k});var I=this.$constrainWrapLimit(C,L.min,L.max);return I!=this.$wrapLimit&&I>1?(this.$wrapLimit=I,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},T.prototype.$constrainWrapLimit=function(C,k,L){return k&&(C=Math.max(k,C)),L&&(C=Math.min(L,C)),C},T.prototype.getWrapLimit=function(){return this.$wrapLimit},T.prototype.setWrapLimit=function(C){this.setWrapLimitRange(C,C)},T.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},T.prototype.$updateInternalDataOnChange=function(C){var k=this.$useWrapMode,L=C.action,I=C.start,O=C.end,N=I.row,D=O.row,$=D-N,R=null;if(this.$updating=!0,$!=0)if(L==="remove"){this[k?"$wrapData":"$rowLengthCache"].splice(N,$);var B=this.$foldData;R=this.getFoldsInRange(C),this.removeFolds(R);var j=this.getFoldLine(O.row),G=0;if(j){j.addRemoveChars(O.row,O.column,I.column-O.column),j.shiftRow(-$);var z=this.getFoldLine(N);z&&z!==j&&(z.merge(j),j=z),G=B.indexOf(j)+1}for(G;G<B.length;G++){var j=B[G];j.start.row>=O.row&&j.shiftRow(-$)}D=N}else{var W=Array($);W.unshift(N,0);var Q=k?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,W);var B=this.$foldData,j=this.getFoldLine(N),G=0;if(j){var ie=j.range.compareInside(I.row,I.column);ie==0?(j=j.split(I.row,I.column),j&&(j.shiftRow($),j.addRemoveChars(D,0,O.column-I.column))):ie==-1&&(j.addRemoveChars(N,0,O.column-I.column),j.shiftRow($)),G=B.indexOf(j)+1}for(G;G<B.length;G++){var j=B[G];j.start.row>=N&&j.shiftRow($)}}else{$=Math.abs(C.start.column-C.end.column),L==="remove"&&(R=this.getFoldsInRange(C),this.removeFolds(R),$=-$);var j=this.getFoldLine(N);j&&j.addRemoveChars(N,I.column,$)}return k&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,k?this.$updateWrapData(N,D):this.$updateRowLengthCache(N,D),R},T.prototype.$updateRowLengthCache=function(C,k){this.$rowLengthCache[C]=null,this.$rowLengthCache[k]=null},T.prototype.$updateWrapData=function(C,k){var L=this.doc.getAllLines(),I=this.getTabSize(),O=this.$wrapData,N=this.$wrapLimit,D,$,R=C;for(k=Math.min(k,L.length-1);R<=k;)$=this.getFoldLine(R,$),$?(D=[],$.walk((function(B,j,G,z){var W;if(B!=null){W=this.$getDisplayTokens(B,D.length),W[0]=b;for(var Q=1;Q<W.length;Q++)W[Q]=x}else W=this.$getDisplayTokens(L[j].substring(z,G),D.length);D=D.concat(W)}).bind(this),$.end.row,L[$.end.row].length+1),O[$.start.row]=this.$computeWrapSplits(D,N,I),R=$.end.row+1):(D=this.$getDisplayTokens(L[R]),O[R]=this.$computeWrapSplits(D,N,I),R++)},T.prototype.$computeWrapSplits=function(C,k,L){if(C.length==0)return[];var I=[],O=C.length,N=0,D=0,$=this.$wrapAsCode,R=this.$indentedSoftWrap,B=k<=Math.max(2*L,8)||R===!1?0:Math.floor(k/2);function j(){var ie=0;if(B===0)return ie;if(R)for(var se=0;se<C.length;se++){var ae=C[se];if(ae==_)ie+=1;else if(ae==M)ie+=L;else{if(ae==A)continue;break}}return $&&R!==!1&&(ie+=L),Math.min(ie,B)}function G(ie){for(var se=ie-N,ae=N;ae<ie;ae++){var pe=C[ae];(pe===12||pe===2)&&(se-=1)}I.length||(z=j(),I.indent=z),D+=se,I.push(D),N=ie}for(var z=0;O-N>k-z;){var W=N+k-z;if(C[W-1]>=_&&C[W]>=_){G(W);continue}if(C[W]==b||C[W]==x){for(W;W!=N-1&&C[W]!=b;W--);if(W>N){G(W);continue}for(W=N+k,W;W<C.length&&C[W]==x;W++);if(W==C.length)break;G(W);continue}for(var Q=Math.max(W-(k-(k>>2)),N-1);W>Q&&C[W]<b;)W--;if($){for(;W>Q&&C[W]<b;)W--;for(;W>Q&&C[W]==S;)W--}else for(;W>Q&&C[W]<_;)W--;if(W>Q){G(++W);continue}W=N+k,C[W]==w&&W--,G(W-z)}return I},T.prototype.$getDisplayTokens=function(C,k){var L=[],I;k=k||0;for(var O=0;O<C.length;O++){var N=C.charCodeAt(O);if(N==9){I=this.getScreenTabSize(L.length+k),L.push(M);for(var D=1;D<I;D++)L.push(A)}else N==32?L.push(_):N>39&&N<48||N>57&&N<64?L.push(S):N>=4352&&E(N)?L.push(y,w):L.push(y)}return L},T.prototype.$getStringScreenWidth=function(C,k,L){if(k==0)return[0,0];k==null&&(k=1/0),L=L||0;var I,O;for(O=0;O<C.length&&(I=C.charCodeAt(O),I==9?L+=this.getScreenTabSize(L):I>=4352&&E(I)?L+=2:L+=1,!(L>k));O++);return[L,O]},T.prototype.getRowLength=function(C){var k=1;return this.lineWidgets&&(k+=this.lineWidgets[C]&&this.lineWidgets[C].rowCount||0),!this.$useWrapMode||!this.$wrapData[C]?k:this.$wrapData[C].length+k},T.prototype.getRowLineCount=function(C){return!this.$useWrapMode||!this.$wrapData[C]?1:this.$wrapData[C].length+1},T.prototype.getRowWrapIndent=function(C){if(this.$useWrapMode){var k=this.screenToDocumentPosition(C,Number.MAX_VALUE),L=this.$wrapData[k.row];return L.length&&L[0]<k.column?L.indent:0}else return 0},T.prototype.getScreenLastRowColumn=function(C){var k=this.screenToDocumentPosition(C,Number.MAX_VALUE);return this.documentToScreenColumn(k.row,k.column)},T.prototype.getDocumentLastRowColumn=function(C,k){var L=this.documentToScreenRow(C,k);return this.getScreenLastRowColumn(L)},T.prototype.getDocumentLastRowColumnPosition=function(C,k){var L=this.documentToScreenRow(C,k);return this.screenToDocumentPosition(L,Number.MAX_VALUE/10)},T.prototype.getRowSplitData=function(C){if(this.$useWrapMode)return this.$wrapData[C]},T.prototype.getScreenTabSize=function(C){return this.$tabSize-(C%this.$tabSize|0)},T.prototype.screenToDocumentRow=function(C,k){return this.screenToDocumentPosition(C,k).row},T.prototype.screenToDocumentColumn=function(C,k){return this.screenToDocumentPosition(C,k).column},T.prototype.screenToDocumentPosition=function(C,k,L){if(C<0)return{row:0,column:0};var I,O=0,N=0,D,$=0,R=0,B=this.$screenRowCache,j=this.$getRowCacheIndex(B,C),G=B.length;if(G&&j>=0)var $=B[j],O=this.$docRowCache[j],z=C>B[G-1];else var z=!G;for(var W=this.getLength()-1,Q=this.getNextFoldLine(O),ie=Q?Q.start.row:1/0;$<=C&&(R=this.getRowLength(O),!($+R>C||O>=W));)$+=R,O++,O>ie&&(O=Q.end.row+1,Q=this.getNextFoldLine(O,Q),ie=Q?Q.start.row:1/0),z&&(this.$docRowCache.push(O),this.$screenRowCache.push($));if(Q&&Q.start.row<=O)I=this.getFoldDisplayLine(Q),O=Q.start.row;else{if($+R<=C||O>W)return{row:W,column:this.getLine(W).length};I=this.getLine(O),Q=null}var se=0,ae=Math.floor(C-$);if(this.$useWrapMode){var pe=this.$wrapData[O];pe&&(D=pe[ae],ae>0&&pe.length&&(se=pe.indent,N=pe[ae-1]||pe[pe.length-1],I=I.substring(N)))}return L!==void 0&&this.$bidiHandler.isBidiRow($+ae,O,ae)&&(k=this.$bidiHandler.offsetToCol(L)),N+=this.$getStringScreenWidth(I,k-se)[1],this.$useWrapMode&&N>=D&&(N=D-1),Q?Q.idxToPosition(N):{row:O,column:N}},T.prototype.documentToScreenPosition=function(C,k){if(typeof k>"u")var L=this.$clipPositionToDocument(C.row,C.column);else L=this.$clipPositionToDocument(C,k);C=L.row,k=L.column;var I=0,O=null,N=null;N=this.getFoldAt(C,k,1),N&&(C=N.start.row,k=N.start.column);var D,$=0,R=this.$docRowCache,B=this.$getRowCacheIndex(R,C),j=R.length;if(j&&B>=0)var $=R[B],I=this.$screenRowCache[B],G=C>R[j-1];else var G=!j;for(var z=this.getNextFoldLine($),W=z?z.start.row:1/0;$<C;){if($>=W){if(D=z.end.row+1,D>C)break;z=this.getNextFoldLine(D,z),W=z?z.start.row:1/0}else D=$+1;I+=this.getRowLength($),$=D,G&&(this.$docRowCache.push($),this.$screenRowCache.push(I))}var Q="";z&&$>=W?(Q=this.getFoldDisplayLine(z,C,k),O=z.start.row):(Q=this.getLine(C).substring(0,k),O=C);var ie=0;if(this.$useWrapMode){var se=this.$wrapData[O];if(se){for(var ae=0;Q.length>=se[ae];)I++,ae++;Q=Q.substring(se[ae-1]||0,Q.length),ie=ae>0?se.indent:0}}return this.lineWidgets&&this.lineWidgets[$]&&this.lineWidgets[$].rowsAbove&&(I+=this.lineWidgets[$].rowsAbove),{row:I,column:ie+this.$getStringScreenWidth(Q)[0]}},T.prototype.documentToScreenColumn=function(C,k){return this.documentToScreenPosition(C,k).column},T.prototype.documentToScreenRow=function(C,k){return this.documentToScreenPosition(C,k).row},T.prototype.getScreenLength=function(){var C=0,k=null;if(this.$useWrapMode)for(var O=this.$wrapData.length,N=0,I=0,k=this.$foldData[I++],D=k?k.start.row:1/0;N<O;){var $=this.$wrapData[N];C+=$?$.length+1:1,N++,N>D&&(N=k.end.row+1,k=this.$foldData[I++],D=k?k.start.row:1/0)}else{C=this.getLength();for(var L=this.$foldData,I=0;I<L.length;I++)k=L[I],C-=k.end.row-k.start.row}return this.lineWidgets&&(C+=this.$getWidgetScreenLength()),C},T.prototype.$setFontMetrics=function(C){this.$enableVarChar&&(this.$getStringScreenWidth=function(k,L,I){if(L===0)return[0,0];L||(L=1/0),I=I||0;var O,N;for(N=0;N<k.length&&(O=k.charAt(N),O==="	"?I+=this.getScreenTabSize(I):I+=C.getCharacterWidth(O),!(I>L));N++);return[I,N]})},T.prototype.getPrecedingCharacter=function(){var C=this.selection.getCursor();if(C.column===0)return C.row===0?"":this.doc.getNewLineCharacter();var k=this.getLine(C.row);return k[C.column-1]},T.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},T}();m.$uid=0,m.prototype.$modes=l.$modes,m.prototype.getValue=m.prototype.toString,m.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},m.prototype.$overwrite=!1,m.prototype.$mode=null,m.prototype.$modeId=null,m.prototype.$scrollTop=0,m.prototype.$scrollLeft=0,m.prototype.$wrapLimit=80,m.prototype.$useWrapMode=!1,m.prototype.$wrapLimitRange={min:null,max:null},m.prototype.lineWidgets=null,m.prototype.isFullWidth=E,a.implement(m.prototype,u);var y=1,w=2,b=3,x=4,S=9,_=10,M=11,A=12;function E(T){return T<4352?!1:T>=4352&&T<=4447||T>=4515&&T<=4519||T>=4602&&T<=4607||T>=9001&&T<=9002||T>=11904&&T<=11929||T>=11931&&T<=12019||T>=12032&&T<=12245||T>=12272&&T<=12283||T>=12288&&T<=12350||T>=12353&&T<=12438||T>=12441&&T<=12543||T>=12549&&T<=12589||T>=12593&&T<=12686||T>=12688&&T<=12730||T>=12736&&T<=12771||T>=12784&&T<=12830||T>=12832&&T<=12871||T>=12880&&T<=13054||T>=13056&&T<=19903||T>=19968&&T<=42124||T>=42128&&T<=42182||T>=43360&&T<=43388||T>=44032&&T<=55203||T>=55216&&T<=55238||T>=55243&&T<=55291||T>=63744&&T<=64255||T>=65040&&T<=65049||T>=65072&&T<=65106||T>=65108&&T<=65126||T>=65128&&T<=65131||T>=65281&&T<=65376||T>=65504&&T<=65510}t("./edit_session/folding").Folding.call(m.prototype),t("./edit_session/bracket_match").BracketMatch.call(m.prototype),l.defineOptions(m.prototype,"session",{wrap:{set:function(T){if(!T||T=="off"?T=!1:T=="free"?T=!0:T=="printMargin"?T=-1:typeof T=="string"&&(T=parseInt(T,10)||!1),this.$wrap!=T)if(this.$wrap=T,!T)this.setUseWrapMode(!1);else{var C=typeof T=="number"?T:null;this.setWrapLimitRange(C,C),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(T){T=T=="auto"?this.$mode.type!="text":T!="text",T!=this.$wrapAsCode&&(this.$wrapAsCode=T,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(T){this.$useWorker=T,this.$stopWorker(),T&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(T){T=parseInt(T),T>0&&this.$tabSize!==T&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=T,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(T){this.setFoldStyle(T)},handlesSet:!0},overwrite:{set:function(T){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(T){this.doc.setNewLineMode(T)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(T){this.setMode(T)},get:function(){return this.$modeId},handlesSet:!0}}),n.EditSession=m}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,n,i){var a=t("./lib/lang"),o=t("./lib/oop"),s=t("./range").Range,l=function(){function c(){this.$options={}}return c.prototype.set=function(f){return o.mixin(this.$options,f),this},c.prototype.getOptions=function(){return a.copyObject(this.$options)},c.prototype.setOptions=function(f){this.$options=f},c.prototype.find=function(f){var h=this.$options,d=this.$matchIterator(f,h);if(!d)return!1;var v=null;return d.forEach(function(p,g,m,y){return v=new s(p,g,m,y),g==y&&h.start&&h.start.start&&h.skipCurrent!=!1&&v.isEqual(h.start)?(v=null,!1):!0}),v},c.prototype.findAll=function(f){var h=this.$options;if(!h.needle)return[];this.$assembleRegExp(h);var d=h.range,v=d?f.getLines(d.start.row,d.end.row):f.doc.getAllLines(),p=[],g=h.re;if(h.$isMultiLine){var m=g.length,y=v.length-m,w;e:for(var b=g.offset||0;b<=y;b++){for(var x=0;x<m;x++)if(v[b+x].search(g[x])==-1)continue e;var S=v[b],_=v[b+m-1],M=S.length-S.match(g[0])[0].length,A=_.match(g[m-1])[0].length;w&&w.end.row===b&&w.end.column>M||(p.push(w=new s(b,M,b+m-1,A)),m>2&&(b=b+m-2))}}else for(var E=0;E<v.length;E++)for(var T=a.getMatchOffsets(v[E],g),x=0;x<T.length;x++){var C=T[x];p.push(new s(E,C.offset,E,C.offset+C.length))}if(d){for(var k=d.start.column,L=d.end.column,E=0,x=p.length-1;E<x&&p[E].start.column<k&&p[E].start.row==0;)E++;for(var I=d.end.row-d.start.row;E<x&&p[x].end.column>L&&p[x].end.row==I;)x--;for(p=p.slice(E,x+1),E=0,x=p.length;E<x;E++)p[E].start.row+=d.start.row,p[E].end.row+=d.start.row}return p},c.prototype.replace=function(f,h){var d=this.$options,v=this.$assembleRegExp(d);if(d.$isMultiLine)return h;if(v){var p=v.exec(f);if(!p||p[0].length!=f.length)return null;if(d.regExp||(h=h.replace(/\$/g,"$$$$")),h=f.replace(v,h),d.preserveCase){h=h.split("");for(var g=Math.min(f.length,f.length);g--;){var m=f[g];m&&m.toLowerCase()!=m?h[g]=h[g].toUpperCase():h[g]=h[g].toLowerCase()}h=h.join("")}return h}},c.prototype.$assembleRegExp=function(f,h){if(f.needle instanceof RegExp)return f.re=f.needle;var d=f.needle;if(!f.needle)return f.re=!1;f.regExp||(d=a.escapeRegExp(d));var v=f.caseSensitive?"gm":"gmi";try{new RegExp(d,"u"),f.$supportsUnicodeFlag=!0,v+="u"}catch{f.$supportsUnicodeFlag=!1}if(f.wholeWord&&(d=u(d,f)),f.$isMultiLine=!h&&/[\n\r]/.test(d),f.$isMultiLine)return f.re=this.$assembleMultilineRegExp(d,v);try{var p=new RegExp(d,v)}catch{p=!1}return f.re=p},c.prototype.$assembleMultilineRegExp=function(f,h){for(var d=f.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),v=[],p=0;p<d.length;p++)try{v.push(new RegExp(d[p],h))}catch{return!1}return v},c.prototype.$matchIterator=function(f,h){var d=this.$assembleRegExp(h);if(!d)return!1;var v=h.backwards==!0,p=h.skipCurrent!=!1,g=d.unicode,m=h.range,y=h.start;y||(y=m?m[v?"end":"start"]:f.selection.getRange()),y.start&&(y=y[p!=v?"end":"start"]);var w=m?m.start.row:0,b=m?m.end.row:f.getLength()-1;if(v)var x=function(M){var A=y.row;if(!_(A,y.column,M)){for(A--;A>=w;A--)if(_(A,Number.MAX_VALUE,M))return;if(h.wrap!=!1){for(A=b,w=y.row;A>=w;A--)if(_(A,Number.MAX_VALUE,M))return}}};else var x=function(A){var E=y.row;if(!_(E,y.column,A)){for(E=E+1;E<=b;E++)if(_(E,0,A))return;if(h.wrap!=!1){for(E=w,b=y.row;E<=b;E++)if(_(E,0,A))return}}};if(h.$isMultiLine)var S=d.length,_=function(M,A,E){var T=v?M-S+1:M;if(!(T<0||T+S>f.getLength())){var C=f.getLine(T),k=C.search(d[0]);if(!(!v&&k<A||k===-1)){for(var L=1;L<S;L++)if(C=f.getLine(T+L),C.search(d[L])==-1)return;var I=C.match(d[S-1])[0].length;if(!(v&&I>A)&&E(T,k,T+S-1,I))return!0}}};else if(v)var _=function(A,E,T){var C=f.getLine(A),k=[],L,I=0;for(d.lastIndex=0;L=d.exec(C);){var O=L[0].length;if(I=L.index,!O){if(I>=C.length)break;d.lastIndex=I+=a.skipEmptyMatch(C,I,g)}if(L.index+O>E)break;k.push(L.index,O)}for(var N=k.length-1;N>=0;N-=2){var D=k[N-1],O=k[N];if(T(A,D,A,D+O))return!0}};else var _=function(A,E,T){var C=f.getLine(A),k,L;for(d.lastIndex=E;L=d.exec(C);){var I=L[0].length;if(k=L.index,T(A,k,A,k+I))return!0;if(!I&&(d.lastIndex=k+=a.skipEmptyMatch(C,k,g),k>=C.length))return!1}};return{forEach:x}},c}();function u(c,f){var h=a.supportsLookbehind();function d(m,y){y===void 0&&(y=!0);var w=h&&f.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return w.test(m)||f.regExp?h&&f.$supportsUnicodeFlag?y?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var v=Array.from(c),p=v[0],g=v[v.length-1];return d(p)+c+d(g,!1)}n.Search=l}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,i){var a=this&&this.__extends||function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(p[m]=g[m])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(d,v);function p(){this.constructor=d}d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),o=t("../lib/keys"),s=t("../lib/useragent"),l=o.KEY_MODS,u=function(){function h(d,v){this.$init(d,v,!1)}return h.prototype.$init=function(d,v,p){this.platform=v||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(d),this.$singleCommand=p},h.prototype.addCommand=function(d){this.commands[d.name]&&this.removeCommand(d),this.commands[d.name]=d,d.bindKey&&this._buildKeyHash(d)},h.prototype.removeCommand=function(d,v){var p=d&&(typeof d=="string"?d:d.name);d=this.commands[p],v||delete this.commands[p];var g=this.commandKeyBinding;for(var m in g){var y=g[m];if(y==d)delete g[m];else if(Array.isArray(y)){var w=y.indexOf(d);w!=-1&&(y.splice(w,1),y.length==1&&(g[m]=y[0]))}}},h.prototype.bindKey=function(d,v,p){if(typeof d=="object"&&d&&(p==null&&(p=d.position),d=d[this.platform]),!!d){if(typeof v=="function")return this.addCommand({exec:v,bindKey:d,name:v.name||d});d.split("|").forEach(function(g){var m="";if(g.indexOf(" ")!=-1){var y=g.split(/\s+/);g=y.pop(),y.forEach(function(x){var S=this.parseKeys(x),_=l[S.hashId]+S.key;m+=(m?" ":"")+_,this._addCommandToBinding(m,"chainKeys")},this),m+=" "}var w=this.parseKeys(g),b=l[w.hashId]+w.key;this._addCommandToBinding(m+b,v,p)},this)}},h.prototype._addCommandToBinding=function(d,v,p){var g=this.commandKeyBinding,m;if(!v)delete g[d];else if(!g[d]||this.$singleCommand)g[d]=v;else{Array.isArray(g[d])?(m=g[d].indexOf(v))!=-1&&g[d].splice(m,1):g[d]=[g[d]],typeof p!="number"&&(p=c(v));var y=g[d];for(m=0;m<y.length;m++){var w=y[m],b=c(w);if(b>p)break}y.splice(m,0,v)}},h.prototype.addCommands=function(d){d&&Object.keys(d).forEach(function(v){var p=d[v];if(p){if(typeof p=="string")return this.bindKey(p,v);typeof p=="function"&&(p={exec:p}),typeof p=="object"&&(p.name||(p.name=v),this.addCommand(p))}},this)},h.prototype.removeCommands=function(d){Object.keys(d).forEach(function(v){this.removeCommand(d[v])},this)},h.prototype.bindKeys=function(d){Object.keys(d).forEach(function(v){this.bindKey(v,d[v])},this)},h.prototype._buildKeyHash=function(d){this.bindKey(d.bindKey,d)},h.prototype.parseKeys=function(d){var v=d.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(b){return b}),p=v.pop(),g=o[p];if(o.FUNCTION_KEYS[g])p=o.FUNCTION_KEYS[g].toLowerCase();else if(v.length){if(v.length==1&&v[0]=="shift")return{key:p.toUpperCase(),hashId:-1}}else return{key:p,hashId:-1};for(var m=0,y=v.length;y--;){var w=o.KEY_MODS[v[y]];if(w==null)return typeof console<"u"&&console.error("invalid modifier "+v[y]+" in "+d),!1;m|=w}return{key:p,hashId:m}},h.prototype.findKeyCommand=function(d,v){var p=l[d]+v;return this.commandKeyBinding[p]},h.prototype.handleKeyboard=function(d,v,p,g){if(!(g<0)){var m=l[v]+p,y=this.commandKeyBinding[m];return d.$keyChain&&(d.$keyChain+=" "+m,y=this.commandKeyBinding[d.$keyChain]||y),y&&(y=="chainKeys"||y[y.length-1]=="chainKeys")?(d.$keyChain=d.$keyChain||m,{command:"null"}):(d.$keyChain&&((!v||v==4)&&p.length==1?d.$keyChain=d.$keyChain.slice(0,-m.length-1):(v==-1||g>0)&&(d.$keyChain="")),{command:y})}},h.prototype.getStatusText=function(d,v){return v.$keyChain||""},h}();function c(h){return typeof h=="object"&&h.bindKey&&h.bindKey.position||(h.isDefault?-100:0)}var f=function(h){a(d,h);function d(v,p){var g=h.call(this,v,p)||this;return g.$singleCommand=!0,g}return d}(u);f.call=function(h,d,v){u.prototype.$init.call(h,d,v,!0)},u.call=function(h,d,v){u.prototype.$init.call(h,d,v,!1)},n.HashHandler=f,n.MultiHashHandler=u}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,n,i){var a=this&&this.__extends||function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(f,h);function d(){this.constructor=f}f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}(),o=t("../lib/oop"),s=t("../keyboard/hash_handler").MultiHashHandler,l=t("../lib/event_emitter").EventEmitter,u=function(c){a(f,c);function f(h,d){var v=c.call(this,d,h)||this;return v.byName=v.commands,v.setDefaultHandler("exec",function(p){return p.args?p.command.exec(p.editor,p.args,p.event,!1):p.command.exec(p.editor,{},p.event,!0)}),v}return f.prototype.exec=function(h,d,v){if(Array.isArray(h)){for(var p=h.length;p--;)if(this.exec(h[p],d,v))return!0;return!1}if(typeof h=="string"&&(h=this.commands[h]),!this.canExecute(h,d))return!1;var g={editor:d,command:h,args:v};return g.returnValue=this._emit("exec",g),this._signal("afterExec",g),g.returnValue!==!1},f.prototype.canExecute=function(h,d){return typeof h=="string"&&(h=this.commands[h]),!(!h||d&&d.$readOnly&&!h.readOnly||this.$checkCommandState!=!1&&h.isAvailable&&!h.isAvailable(d))},f.prototype.toggleRecording=function(h){if(!this.$inReplay)return h&&h._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(d){this.macro.push([d.command,d.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},f.prototype.replay=function(h){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(h);try{this.$inReplay=!0,this.macro.forEach(function(d){typeof d=="string"?this.exec(d,h):this.exec(d[0],h,d[1])},this)}finally{this.$inReplay=!1}}},f.prototype.trimMacro=function(h){return h.map(function(d){return typeof d[0]!="string"&&(d[0]=d[0].name),d[1]||(d=d[0]),d})},f}(s);o.implement(u.prototype,l),n.CommandManager=u}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,n,i){var a=t("../lib/lang"),o=t("../config"),s=t("../range").Range;function l(c,f){return{win:c,mac:f}}n.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:l("Ctrl-,","Command-,"),exec:function(c){o.loadModule("ace/ext/settings_menu",function(f){f.init(c),c.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:l("Alt-E","F4"),exec:function(c){o.loadModule("ace/ext/error_marker",function(f){f.showErrorMarker(c,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:l("Alt-Shift-E","Shift-F4"),exec:function(c){o.loadModule("ace/ext/error_marker",function(f){f.showErrorMarker(c,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:l("Ctrl-A","Command-A"),exec:function(c){c.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:l(null,"Ctrl-L"),exec:function(c){c.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:l("Ctrl-L","Command-L"),exec:function(c,f){typeof f=="number"&&!isNaN(f)&&c.gotoLine(f),c.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:l("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(c){c.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:l("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(c){c.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:l("F2","F2"),exec:function(c){c.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:l("Alt-F2","Alt-F2"),exec:function(c){c.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(c){c.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(c){c.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:l("Alt-0","Command-Option-0"),exec:function(c){c.session.foldAll(),c.session.unfold(c.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:l("Alt-Shift-0","Command-Option-Shift-0"),exec:function(c){c.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:l("Ctrl-K","Command-G"),exec:function(c){c.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:l("Ctrl-Shift-K","Command-Shift-G"),exec:function(c){c.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:l("Alt-K","Ctrl-G"),exec:function(c){c.selection.isEmpty()?c.selection.selectWord():c.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:l("Alt-Shift-K","Ctrl-Shift-G"),exec:function(c){c.selection.isEmpty()?c.selection.selectWord():c.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:l("Ctrl-F","Command-F"),exec:function(c){o.loadModule("ace/ext/searchbox",function(f){f.Search(c)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(c){c.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:l("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(c){c.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:l("Ctrl-Home","Command-Home|Command-Up"),exec:function(c){c.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:l("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(c){c.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:l("Up","Up|Ctrl-P"),exec:function(c,f){c.navigateUp(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:l("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(c){c.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:l("Ctrl-End","Command-End|Command-Down"),exec:function(c){c.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:l("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(c){c.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:l("Down","Down|Ctrl-N"),exec:function(c,f){c.navigateDown(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:l("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(c){c.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:l("Ctrl-Left","Option-Left"),exec:function(c){c.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:l("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(c){c.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:l("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(c){c.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:l("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(c){c.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:l("Left","Left|Ctrl-B"),exec:function(c,f){c.navigateLeft(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:l("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(c){c.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:l("Ctrl-Right","Option-Right"),exec:function(c){c.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:l("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(c){c.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:l("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(c){c.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:l("Shift-Right","Shift-Right"),exec:function(c){c.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:l("Right","Right|Ctrl-F"),exec:function(c,f){c.navigateRight(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(c){c.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:l(null,"Option-PageDown"),exec:function(c){c.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:l("PageDown","PageDown|Ctrl-V"),exec:function(c){c.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(c){c.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:l(null,"Option-PageUp"),exec:function(c){c.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(c){c.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:l("Ctrl-Up",null),exec:function(c){c.renderer.scrollBy(0,-2*c.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:l("Ctrl-Down",null),exec:function(c){c.renderer.scrollBy(0,2*c.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(c){c.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(c){c.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:l("Ctrl-Alt-E","Command-Option-E"),exec:function(c){c.commands.toggleRecording(c)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:l("Ctrl-Shift-E","Command-Shift-E"),exec:function(c){c.commands.replay(c)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:l("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(c){c.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:l("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(c){c.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:l("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(c){c.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:l(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(c){},readOnly:!0},{name:"cut",description:"Cut",exec:function(c){var f=c.$copyWithEmptySelection&&c.selection.isEmpty(),h=f?c.selection.getLineRange():c.selection.getRange();c._emit("cut",h),h.isEmpty()||c.session.remove(h),c.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(c,f){c.$handlePaste(f)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:l("Ctrl-D","Command-D"),exec:function(c){c.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:l("Ctrl-Shift-D","Command-Shift-D"),exec:function(c){c.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:l("Ctrl-Alt-S","Command-Alt-S"),exec:function(c){c.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:l("Ctrl-/","Command-/"),exec:function(c){c.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:l("Ctrl-Shift-/","Command-Shift-/"),exec:function(c){c.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:l("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(c){c.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:l("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(c){c.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:l("Ctrl-H","Command-Option-F"),exec:function(c){o.loadModule("ace/ext/searchbox",function(f){f.Search(c,!0)})}},{name:"undo",description:"Undo",bindKey:l("Ctrl-Z","Command-Z"),exec:function(c){c.undo()}},{name:"redo",description:"Redo",bindKey:l("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(c){c.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:l("Alt-Shift-Up","Command-Option-Up"),exec:function(c){c.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:l("Alt-Up","Option-Up"),exec:function(c){c.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:l("Alt-Shift-Down","Command-Option-Down"),exec:function(c){c.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:l("Alt-Down","Option-Down"),exec:function(c){c.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:l("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(c){c.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:l("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(c){c.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:l("Shift-Delete",null),exec:function(c){if(c.selection.isEmpty())c.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:l("Alt-Backspace","Command-Backspace"),exec:function(c){c.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:l("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(c){c.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:l("Ctrl-Shift-Backspace",null),exec:function(c){var f=c.selection.getRange();f.start.column=0,c.session.remove(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:l("Ctrl-Shift-Delete",null),exec:function(c){var f=c.selection.getRange();f.end.column=Number.MAX_VALUE,c.session.remove(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:l("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(c){c.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:l("Ctrl-Delete","Alt-Delete"),exec:function(c){c.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:l("Shift-Tab","Shift-Tab"),exec:function(c){c.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:l("Tab","Tab"),exec:function(c){c.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:l("Ctrl-[","Ctrl-["),exec:function(c){c.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:l("Ctrl-]","Ctrl-]"),exec:function(c){c.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(c,f){c.insert(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(c,f){c.insert(a.stringRepeat(f.text||"",f.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:l(null,"Ctrl-O"),exec:function(c){c.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:l("Alt-Shift-X","Ctrl-T"),exec:function(c){c.transposeLetters()},multiSelectAction:function(c){c.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:l("Ctrl-U","Ctrl-U"),exec:function(c){c.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:l("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(c){c.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:l(null,null),exec:function(c){c.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:l("Ctrl-Shift-L","Command-Shift-L"),exec:function(c){var f=c.selection.getRange();f.start.column=f.end.column=0,f.end.row++,c.selection.setRange(f,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:l("Ctrl+F3","F3"),exec:function(c){c.openLink()}},{name:"joinlines",description:"Join lines",bindKey:l(null,null),exec:function(c){for(var f=c.selection.isBackwards(),h=f?c.selection.getSelectionLead():c.selection.getSelectionAnchor(),d=f?c.selection.getSelectionAnchor():c.selection.getSelectionLead(),v=c.session.doc.getLine(h.row).length,p=c.session.doc.getTextRange(c.selection.getRange()),g=p.replace(/\n\s*/," ").length,m=c.session.doc.getLine(h.row),y=h.row+1;y<=d.row+1;y++){var w=a.stringTrimLeft(a.stringTrimRight(c.session.doc.getLine(y)));w.length!==0&&(w=" "+w),m+=w}d.row+1<c.session.doc.getLength()-1&&(m+=c.session.doc.getNewLineCharacter()),c.clearSelection(),c.session.doc.replace(new s(h.row,0,d.row+2,0),m),g>0?(c.selection.moveCursorTo(h.row,h.column),c.selection.selectTo(h.row,h.column+g)):(v=c.session.doc.getLine(h.row).length>v?v+1:v,c.selection.moveCursorTo(h.row,v))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:l(null,null),exec:function(c){var f=c.session.doc.getLength()-1,h=c.session.doc.getLine(f).length,d=c.selection.rangeList.ranges,v=[];d.length<1&&(d=[c.selection.getRange()]);for(var p=0;p<d.length;p++)p==d.length-1&&(d[p].end.row===f&&d[p].end.column===h||v.push(new s(d[p].end.row,d[p].end.column,f,h))),p===0?d[p].start.row===0&&d[p].start.column===0||v.push(new s(0,0,d[p].start.row,d[p].start.column)):v.push(new s(d[p-1].end.row,d[p-1].end.column,d[p].start.row,d[p].start.column));c.exitMultiSelectMode(),c.clearSelection();for(var p=0;p<v.length;p++)c.selection.addRange(v[p],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(c){c.selection.clearSelection(),c.navigateLineEnd(),c.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(c){c.selection.clearSelection();var f=c.getCursorPosition();c.selection.moveTo(f.row-1,Number.MAX_VALUE),c.insert(`
`),f.row===0&&c.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(c){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),c.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:l("F1","F1"),exec:function(c){c.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:l(null,null),exec:function(c){c.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)n.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(c){c.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(t,n,i){var a=t("./lib/dom"),o=function(){function s(l){this.session=l,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return s.prototype.getRowLength=function(l){var u;return this.lineWidgets?u=this.lineWidgets[l]&&this.lineWidgets[l].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[l]?1+u:this.$wrapData[l].length+1+u},s.prototype.$getWidgetScreenLength=function(){var l=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(l+=u.rowCount)}),l},s.prototype.$onChangeEditor=function(l){this.attach(l.editor)},s.prototype.attach=function(l){l&&l.widgetManager&&l.widgetManager!=this&&l.widgetManager.detach(),this.editor!=l&&(this.detach(),this.editor=l,l&&(l.widgetManager=this,l.renderer.on("beforeRender",this.measureWidgets),l.renderer.on("afterRender",this.renderWidgets)))},s.prototype.detach=function(l){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var c=this.session.lineWidgets;c&&c.forEach(function(f){f&&f.el&&f.el.parentNode&&(f._inDocument=!1,f.el.parentNode.removeChild(f.el))})}},s.prototype.updateOnFold=function(l,u){var c=u.lineWidgets;if(!(!c||!l.action)){for(var f=l.data,h=f.start.row,d=f.end.row,v=l.action=="add",p=h+1;p<d;p++)c[p]&&(c[p].hidden=v);c[d]&&(v?c[h]?c[d].hidden=v:c[h]=c[d]:(c[h]==c[d]&&(c[h]=void 0),c[d].hidden=v))}},s.prototype.updateOnChange=function(l){var u=this.session.lineWidgets;if(u){var c=l.start.row,f=l.end.row-c;if(f!==0)if(l.action=="remove"){var h=u.splice(c+1,f);!u[c]&&h[h.length-1]&&(u[c]=h.pop()),h.forEach(function(v){v&&this.removeLineWidget(v)},this),this.$updateRows()}else{var d=new Array(f);u[c]&&u[c].column!=null&&l.start.column>u[c].column&&c++,d.unshift(c,0),u.splice.apply(u,d),this.$updateRows()}}},s.prototype.$updateRows=function(){var l=this.session.lineWidgets;if(l){var u=!0;l.forEach(function(c,f){if(c)for(u=!1,c.row=f;c.$oldWidget;)c.$oldWidget.row=f,c=c.$oldWidget}),u&&(this.session.lineWidgets=null)}},s.prototype.$registerLineWidget=function(l){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[l.row];return u&&(l.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[l.row]=l,l},s.prototype.addLineWidget=function(l){if(this.$registerLineWidget(l),l.session=this.session,!this.editor)return l;var u=this.editor.renderer;l.html&&!l.el&&(l.el=a.createElement("div"),l.el.innerHTML=l.html),l.text&&!l.el&&(l.el=a.createElement("div"),l.el.textContent=l.text),l.el&&(a.addCssClass(l.el,"ace_lineWidgetContainer"),l.className&&a.addCssClass(l.el,l.className),l.el.style.position="absolute",l.el.style.zIndex="5",u.container.appendChild(l.el),l._inDocument=!0,l.coverGutter||(l.el.style.zIndex="3"),l.pixelHeight==null&&(l.pixelHeight=l.el.offsetHeight)),l.rowCount==null&&(l.rowCount=l.pixelHeight/u.layerConfig.lineHeight);var c=this.session.getFoldAt(l.row,0);if(l.$fold=c,c){var f=this.session.lineWidgets;l.row==c.end.row&&!f[c.start.row]?f[c.start.row]=l:l.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(l),l},s.prototype.removeLineWidget=function(l){if(l._inDocument=!1,l.session=null,l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el),l.editor&&l.editor.destroy)try{l.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[l.row];if(u==l)this.session.lineWidgets[l.row]=l.$oldWidget,l.$oldWidget&&this.onWidgetChanged(l.$oldWidget);else for(;u;){if(u.$oldWidget==l){u.$oldWidget=l.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows()},s.prototype.getWidgetsAtRow=function(l){for(var u=this.session.lineWidgets,c=u&&u[l],f=[];c;)f.push(c),c=c.$oldWidget;return f},s.prototype.onWidgetChanged=function(l){this.session._changedWidgets.push(l),this.editor&&this.editor.renderer.updateFull()},s.prototype.measureWidgets=function(l,u){var c=this.session._changedWidgets,f=u.layerConfig;if(!(!c||!c.length)){for(var h=1/0,d=0;d<c.length;d++){var v=c[d];if(!(!v||!v.el)&&v.session==this.session){if(!v._inDocument){if(this.session.lineWidgets[v.row]!=v)continue;v._inDocument=!0,u.container.appendChild(v.el)}v.h=v.el.offsetHeight,v.fixedWidth||(v.w=v.el.offsetWidth,v.screenWidth=Math.ceil(v.w/f.characterWidth));var p=v.h/f.lineHeight;v.coverLine&&(p-=this.session.getRowLineCount(v.row),p<0&&(p=0)),v.rowCount!=p&&(v.rowCount=p,v.row<h&&(h=v.row))}}h!=1/0&&(this.session._emit("changeFold",{data:{start:{row:h}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},s.prototype.renderWidgets=function(l,u){var c=u.layerConfig,f=this.session.lineWidgets;if(f){for(var h=Math.min(this.firstRow,c.firstRow),d=Math.max(this.lastRow,c.lastRow,f.length);h>0&&!f[h];)h--;this.firstRow=c.firstRow,this.lastRow=c.lastRow,u.$cursorLayer.config=c;for(var v=h;v<=d;v++){var p=f[v];if(!(!p||!p.el)){if(p.hidden){p.el.style.top=-100-(p.pixelHeight||0)+"px";continue}p._inDocument||(p._inDocument=!0,u.container.appendChild(p.el));var g=u.$cursorLayer.getPixelPosition({row:v,column:0},!0).top;p.coverLine||(g+=c.lineHeight*this.session.getRowLineCount(p.row)),p.el.style.top=g-c.offset+"px";var m=p.coverGutter?0:u.gutterWidth;p.fixedWidth||(m-=u.scrollLeft),p.el.style.left=m+"px",p.fullWidth&&p.screenWidth&&(p.el.style.minWidth=c.width+2*c.padding+"px"),p.fixedWidth?p.el.style.right=u.scrollBar.getWidth()+"px":p.el.style.right=""}}}},s}();n.LineWidgets=o}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(t,n,i){var a=t("../lib/keys"),o=t("../mouse/default_gutter_handler").GutterTooltip,s=function(){function u(c){this.editor=c,this.gutterLayer=c.renderer.$gutterLayer,this.element=c.renderer.$gutter,this.lines=c.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new o(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(c){if(this.annotationTooltip.isOpen){c.preventDefault(),c.keyCode===a.escape&&this.annotationTooltip.hideTooltip();return}if(c.target===this.element){if(c.keyCode!=a.enter)return;c.preventDefault();var f=this.editor.getCursorPosition().row;this.editor.isRowVisible(f)||this.editor.scrollToLine(f,!0,!0),setTimeout((function(){var h=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),d=this.$findNearestFoldWidget(h),v=this.$findNearestAnnotation(h);if(!(d===null&&v===null)){if(d===null&&v!==null){this.activeRowIndex=v,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(d!==null&&v===null){this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(v-h)<Math.abs(d-h)){this.activeRowIndex=v,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(c),setTimeout((function(){this.editor._signal("gutterkeydown",new l(c,this))}).bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(c){if(c.keyCode===a.tab){c.preventDefault();return}if(c.keyCode===a.escape){c.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(c.keyCode===a.up){switch(c.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(c.keyCode===a.down){switch(c.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(c.keyCode===a.left){c.preventDefault(),this.$switchLane("annotation");return}if(c.keyCode===a.right){c.preventDefault(),this.$switchLane("fold");return}if(c.keyCode===a.enter||c.keyCode===a.space){switch(c.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var f=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),c),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==f&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(f),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var h=this.lines.cells[this.activeRowIndex].element.childNodes[2],d=h.getBoundingClientRect(),v=this.annotationTooltip.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(c){var f=this.editor.isRowFullyVisible(this.$rowIndexToRow(c)),h=this.$getFoldWidget(c).style.display!=="none";return f&&h},u.prototype.$isAnnotationVisible=function(c){var f=this.editor.isRowFullyVisible(this.$rowIndexToRow(c)),h=this.$getAnnotation(c).style.display!=="none";return f&&h},u.prototype.$getFoldWidget=function(c){var f=this.lines.get(c),h=f.element;return h.childNodes[1]},u.prototype.$getAnnotation=function(c){var f=this.lines.get(c),h=f.element;return h.childNodes[2]},u.prototype.$findNearestFoldWidget=function(c){if(this.$isFoldWidgetVisible(c))return c;for(var f=0;c-f>0||c+f<this.lines.getLength()-1;){if(f++,c-f>=0&&this.$isFoldWidgetVisible(c-f))return c-f;if(c+f<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(c+f))return c+f}return null},u.prototype.$findNearestAnnotation=function(c){if(this.$isAnnotationVisible(c))return c;for(var f=0;c-f>0||c+f<this.lines.getLength()-1;){if(f++,c-f>=0&&this.$isAnnotationVisible(c-f))return c-f;if(c+f<=this.lines.getLength()-1&&this.$isAnnotationVisible(c+f))return c+f}return null},u.prototype.$focusFoldWidget=function(c){if(c!=null){var f=this.$getFoldWidget(c);f.classList.add(this.editor.renderer.keyboardFocusClassName),f.focus()}},u.prototype.$focusAnnotation=function(c){if(c!=null){var f=this.$getAnnotation(c);f.classList.add(this.editor.renderer.keyboardFocusClassName),f.focus()}},u.prototype.$blurFoldWidget=function(c){var f=this.$getFoldWidget(c);f.classList.remove(this.editor.renderer.keyboardFocusClassName),f.blur()},u.prototype.$blurAnnotation=function(c){var f=this.$getAnnotation(c);f.classList.remove(this.editor.renderer.keyboardFocusClassName),f.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var c=this.activeRowIndex;c>0;)if(c--,this.$isFoldWidgetVisible(c)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=c,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var c=this.activeRowIndex;c<this.lines.getLength()-1;)if(c++,this.$isFoldWidgetVisible(c)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=c,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var c=this.activeRowIndex;c>0;)if(c--,this.$isAnnotationVisible(c)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=c,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var c=this.activeRowIndex;c<this.lines.getLength()-1;)if(c++,this.$isAnnotationVisible(c)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=c,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$switchLane=function(c){switch(c){case"annotation":if(this.activeLane==="annotation")break;var f=this.$findNearestAnnotation(this.activeRowIndex);if(f==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=f,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var h=this.$findNearestFoldWidget(this.activeRowIndex);if(h==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(c){var f=this.lines.get(c);return f?f.row:null},u.prototype.$rowToRowIndex=function(c){for(var f=0;f<this.lines.getLength();f++){var h=this.lines.get(f);if(h.row==c)return f}return null},u}();n.GutterKeyboardHandler=s;var l=function(){function u(c,f){this.gutterKeyboardHandler=f,this.domEvent=c}return u.prototype.getKey=function(){return a.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();n.GutterKeyboardEvent=l}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(t,n,i){var a=this&&this.__values||function(k){var L=typeof Symbol=="function"&&Symbol.iterator,I=L&&k[L],O=0;if(I)return I.call(k);if(k&&typeof k.length=="number")return{next:function(){return k&&O>=k.length&&(k=void 0),{value:k&&k[O++],done:!k}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")},o=t("./lib/oop"),s=t("./lib/dom"),l=t("./lib/lang"),u=t("./lib/useragent"),c=t("./keyboard/textinput").TextInput,f=t("./mouse/mouse_handler").MouseHandler,h=t("./mouse/fold_handler").FoldHandler,d=t("./keyboard/keybinding").KeyBinding,v=t("./edit_session").EditSession,p=t("./search").Search,g=t("./range").Range,m=t("./lib/event_emitter").EventEmitter,y=t("./commands/command_manager").CommandManager,w=t("./commands/default_commands").commands,b=t("./config"),x=t("./token_iterator").TokenIterator,S=t("./line_widgets").LineWidgets,_=t("./keyboard/gutter_handler").GutterKeyboardHandler,M=t("./config").nls,A=t("./clipboard"),E=t("./lib/keys"),T=function(){function k(L,I,O){this.session,this.$toDestroy=[];var N=L.getContainerElement();this.container=N,this.renderer=L,this.id="editor"+ ++k.$uid,this.commands=new y(u.isMac?"mac":"win",w),typeof document=="object"&&(this.textInput=new c(L.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new f(this),new h(this)),this.keyBinding=new d(this),this.$search=new p().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(D,$){$._$emitInputEvent.schedule(31)}),this.setSession(I||O&&O.session||new v("")),b.resetOptions(this),O&&this.setOptions(O),b._signal("editor",this)}return k.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=l.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},k.prototype.startOperation=function(L){if(this.curOp){if(!L||this.curOp.command)return;this.prevOp=this.curOp}L||(this.previousCommand=null,L={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:L.command||{},args:L.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},k.prototype.endOperation=function(L){if(this.curOp&&this.session){if(L&&L.returnValue===!1||!this.session)return this.curOp=null;if(L==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var I=this.curOp.command,O=I&&I.scrollIntoView;if(O){switch(O){case"center-animate":O="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var N=this.selection.getRange(),D=this.renderer.layerConfig;(N.start.row>=D.lastRow||N.end.row<=D.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}O=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var $=this.selection.toJSON();this.curOp.selectionAfter=$,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection($),this.prevOp=this.curOp,this.curOp=null}},k.prototype.$historyTracker=function(L){if(this.$mergeUndoDeltas){var I=this.prevOp,O=this.$mergeableCommands,N=I.command&&L.command.name==I.command.name;if(L.command.name=="insertstring"){var D=L.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),N=N&&this.mergeNextCommand&&(!/\s/.test(D)||/\s/.test(I.args)),this.mergeNextCommand=!0}else N=N&&O.indexOf(L.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(N=!1),N?this.session.mergeUndoDeltas=!0:O.indexOf(L.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},k.prototype.setKeyboardHandler=function(L,I){if(L&&typeof L=="string"&&L!="ace"){this.$keybindingId=L;var O=this;b.loadModule(["keybinding",L],function(N){O.$keybindingId==L&&O.keyBinding.setKeyboardHandler(N&&N.handler),I&&I()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(L),I&&I()},k.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},k.prototype.setSession=function(L){if(this.session!=L){this.curOp&&this.endOperation(),this.curOp={};var I=this.session;if(I){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var O=this.session.getSelection();O.off("changeCursor",this.$onCursorChange),O.off("changeSelection",this.$onSelectionChange)}this.session=L,L?(this.$onDocumentChange=this.onDocumentChange.bind(this),L.on("change",this.$onDocumentChange),this.renderer.setSession(L),this.$onChangeMode=this.onChangeMode.bind(this),L.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),L.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),L.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),L.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),L.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),L.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=L.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(L)),this._signal("changeSession",{session:L,oldSession:I}),this.curOp=null,I&&I._signal("changeEditor",{oldEditor:this}),L&&L._signal("changeEditor",{editor:this}),L&&!L.destroyed&&L.bgTokenizer.scheduleStart()}},k.prototype.getSession=function(){return this.session},k.prototype.setValue=function(L,I){return this.session.doc.setValue(L),I?I==1?this.navigateFileEnd():I==-1&&this.navigateFileStart():this.selectAll(),L},k.prototype.getValue=function(){return this.session.getValue()},k.prototype.getSelection=function(){return this.selection},k.prototype.resize=function(L){this.renderer.onResize(L)},k.prototype.setTheme=function(L,I){this.renderer.setTheme(L,I)},k.prototype.getTheme=function(){return this.renderer.getTheme()},k.prototype.setStyle=function(L){this.renderer.setStyle(L)},k.prototype.unsetStyle=function(L){this.renderer.unsetStyle(L)},k.prototype.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},k.prototype.setFontSize=function(L){this.setOption("fontSize",L)},k.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var L=this;this.$highlightPending=!0,setTimeout(function(){L.$highlightPending=!1;var I=L.session;if(!(!I||I.destroyed)){I.$bracketHighlight&&(I.$bracketHighlight.markerIds.forEach(function(z){I.removeMarker(z)}),I.$bracketHighlight=null);var O=L.getCursorPosition(),N=L.getKeyboardHandler(),D=N&&N.$getDirectionForHighlight&&N.$getDirectionForHighlight(L),$=I.getMatchingBracketRanges(O,D);if(!$){var R=new x(I,O.row,O.column),B=R.getCurrentToken();if(B&&/\b(?:tag-open|tag-name)/.test(B.type)){var j=I.getMatchingTags(O);j&&($=[j.openTagName.isEmpty()?j.openTag:j.openTagName,j.closeTagName.isEmpty()?j.closeTag:j.closeTagName])}}if(!$&&I.$mode.getMatching&&($=I.$mode.getMatching(L.session)),!$){L.getHighlightIndentGuides()&&L.renderer.$textLayer.$highlightIndentGuide();return}var G="ace_bracket";Array.isArray($)?$.length==1&&(G="ace_error_bracket"):$=[$],$.length==2&&(g.comparePoints($[0].end,$[1].start)==0?$=[g.fromPoints($[0].start,$[1].end)]:g.comparePoints($[0].start,$[1].end)==0&&($=[g.fromPoints($[1].start,$[0].end)])),I.$bracketHighlight={ranges:$,markerIds:$.map(function(z){return I.addMarker(z,G,"text")})},L.getHighlightIndentGuides()&&L.renderer.$textLayer.$highlightIndentGuide()}},50)}},k.prototype.focus=function(){this.textInput.focus()},k.prototype.isFocused=function(){return this.textInput.isFocused()},k.prototype.blur=function(){this.textInput.blur()},k.prototype.onFocus=function(L){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",L))},k.prototype.onBlur=function(L){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",L))},k.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},k.prototype.onDocumentChange=function(L){var I=this.session.$useWrapMode,O=L.start.row==L.end.row?L.end.row:1/0;this.renderer.updateLines(L.start.row,O,I),this._signal("change",L),this.$cursorChange()},k.prototype.onTokenizerUpdate=function(L){var I=L.data;this.renderer.updateLines(I.first,I.last)},k.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},k.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},k.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},k.prototype.$updateHighlightActiveLine=function(){var L=this.getSession(),I;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(I=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(I=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(I=!1)),L.$highlightLineMarker&&!I)L.removeMarker(L.$highlightLineMarker.id),L.$highlightLineMarker=null;else if(!L.$highlightLineMarker&&I){var O=new g(I.row,I.column,I.row,1/0);O.id=L.addMarker(O,"ace_active-line","screenLine"),L.$highlightLineMarker=O}else I&&(L.$highlightLineMarker.start.row=I.row,L.$highlightLineMarker.end.row=I.row,L.$highlightLineMarker.start.column=I.column,L._signal("changeBackMarker"))},k.prototype.onSelectionChange=function(L){var I=this.session;if(I.$selectionMarker&&I.removeMarker(I.$selectionMarker),I.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var O=this.selection.getRange(),N=this.getSelectionStyle();I.$selectionMarker=I.addMarker(O,"ace_selection",N)}var D=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(D),this._signal("changeSelection")},k.prototype.$getSelectionHighLightRegexp=function(){var L=this.session,I=this.getSelectionRange();if(!(I.isEmpty()||I.isMultiLine())){var O=I.start.column,N=I.end.column,D=L.getLine(I.start.row),$=D.substring(O,N);if(!($.length>5e3||!/[\w\d]/.test($))){var R=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:$}),B=D.substring(O-1,N+1);if(R.test(B))return R}}},k.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},k.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},k.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},k.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},k.prototype.onChangeMode=function(L){this.renderer.updateText(),this._emit("changeMode",L)},k.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},k.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},k.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},k.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},k.prototype.getCopyText=function(){var L=this.getSelectedText(),I=this.session.doc.getNewLineCharacter(),O=!1;if(!L&&this.$copyWithEmptySelection){O=!0;for(var N=this.selection.getAllRanges(),D=0;D<N.length;D++){var $=N[D];D&&N[D-1].start.row==$.start.row||(L+=this.session.getLine($.start.row)+I)}}var R={text:L};return this._signal("copy",R),A.lineMode=O?R.text:!1,R.text},k.prototype.onCopy=function(){this.commands.exec("copy",this)},k.prototype.onCut=function(){this.commands.exec("cut",this)},k.prototype.onPaste=function(L,I){var O={text:L,event:I};this.commands.exec("paste",this,O)},k.prototype.$handlePaste=function(L){typeof L=="string"&&(L={text:L}),this._signal("paste",L);var I=L.text,O=I===A.lineMode,N=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)O?N.insert({row:this.selection.lead.row,column:0},I):this.insert(I);else if(O)this.selection.rangeList.ranges.forEach(function(G){N.insert({row:G.start.row,column:0},I)});else{var D=I.split(/\r\n|\r|\n/),$=this.selection.rangeList.ranges,R=D.length==2&&(!D[0]||!D[1]);if(D.length!=$.length||R)return this.commands.exec("insertstring",this,I);for(var B=$.length;B--;){var j=$[B];j.isEmpty()||N.remove(j),N.insert(j.start,D[B])}}},k.prototype.execCommand=function(L,I){return this.commands.exec(L,this,I)},k.prototype.insert=function(L,I){var O=this.session,N=O.getMode(),D=this.getCursorPosition();if(this.getBehavioursEnabled()&&!I){var $=N.transformAction(O.getState(D.row),"insertion",this,O,L);$&&(L!==$.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),L=$.text)}if(L=="	"&&(L=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&L.indexOf(`
`)==-1){var R=g.fromPoints(D,D);R.end.column+=L.length,this.session.remove(R)}}else{var R=this.getSelectionRange();D=this.session.remove(R),this.clearSelection()}if(L==`
`||L==`\r
`){var z=O.getLine(D.row);if(D.column>z.search(/\S|$/)){var B=z.substr(D.column).search(/\S|$/);O.doc.removeInLine(D.row,D.column,D.column+B)}}this.clearSelection();var j=D.column,G=O.getState(D.row),z=O.getLine(D.row),W=N.checkOutdent(G,z,L);if(O.insert(D,L),$&&$.selection&&($.selection.length==2?this.selection.setSelectionRange(new g(D.row,j+$.selection[0],D.row,j+$.selection[1])):this.selection.setSelectionRange(new g(D.row+$.selection[0],$.selection[1],D.row+$.selection[2],$.selection[3]))),this.$enableAutoIndent){if(O.getDocument().isNewLine(L)){var Q=N.getNextLineIndent(G,z.slice(0,D.column),O.getTabString());O.insert({row:D.row+1,column:0},Q)}W&&N.autoOutdent(G,O,D.row)}},k.prototype.autoIndent=function(){for(var L=this.session,I=L.getMode(),O=this.selection.isEmpty()?[new g(0,0,L.doc.getLength()-1,0)]:this.selection.getAllRanges(),N="",D="",$="",R=L.getTabString(),B=0;B<O.length;B++)for(var j=O[B].start.row,G=O[B].end.row,z=j;z<=G;z++){z>0&&(N=L.getState(z-1),D=L.getLine(z-1),$=I.getNextLineIndent(N,D,R));var W=L.getLine(z),Q=I.$getIndent(W);if($!==Q){if(Q.length>0){var ie=new g(z,0,z,Q.length);L.remove(ie)}$.length>0&&L.insert({row:z,column:0},$)}I.autoOutdent(N,L,z)}},k.prototype.onTextInput=function(L,I){if(!I)return this.keyBinding.onTextInput(L);this.startOperation({command:{name:"insertstring"}});var O=this.applyComposition.bind(this,L,I);this.selection.rangeCount?this.forEachSelection(O):O(),this.endOperation()},k.prototype.applyComposition=function(L,I){if(I.extendLeft||I.extendRight){var O=this.selection.getRange();O.start.column-=I.extendLeft,O.end.column+=I.extendRight,O.start.column<0&&(O.start.row--,O.start.column+=this.session.getLine(O.start.row).length+1),this.selection.setRange(O),!L&&!O.isEmpty()&&this.remove()}if((L||!this.selection.isEmpty())&&this.insert(L,!0),I.restoreStart||I.restoreEnd){var O=this.selection.getRange();O.start.column-=I.restoreStart,O.end.column-=I.restoreEnd,this.selection.setRange(O)}},k.prototype.onCommandKey=function(L,I,O){return this.keyBinding.onCommandKey(L,I,O)},k.prototype.setOverwrite=function(L){this.session.setOverwrite(L)},k.prototype.getOverwrite=function(){return this.session.getOverwrite()},k.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},k.prototype.setScrollSpeed=function(L){this.setOption("scrollSpeed",L)},k.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},k.prototype.setDragDelay=function(L){this.setOption("dragDelay",L)},k.prototype.getDragDelay=function(){return this.getOption("dragDelay")},k.prototype.setSelectionStyle=function(L){this.setOption("selectionStyle",L)},k.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},k.prototype.setHighlightActiveLine=function(L){this.setOption("highlightActiveLine",L)},k.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},k.prototype.setHighlightGutterLine=function(L){this.setOption("highlightGutterLine",L)},k.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},k.prototype.setHighlightSelectedWord=function(L){this.setOption("highlightSelectedWord",L)},k.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},k.prototype.setAnimatedScroll=function(L){this.renderer.setAnimatedScroll(L)},k.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},k.prototype.setShowInvisibles=function(L){this.renderer.setShowInvisibles(L)},k.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},k.prototype.setDisplayIndentGuides=function(L){this.renderer.setDisplayIndentGuides(L)},k.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},k.prototype.setHighlightIndentGuides=function(L){this.renderer.setHighlightIndentGuides(L)},k.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},k.prototype.setShowPrintMargin=function(L){this.renderer.setShowPrintMargin(L)},k.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},k.prototype.setPrintMarginColumn=function(L){this.renderer.setPrintMarginColumn(L)},k.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},k.prototype.setReadOnly=function(L){this.setOption("readOnly",L)},k.prototype.getReadOnly=function(){return this.getOption("readOnly")},k.prototype.setBehavioursEnabled=function(L){this.setOption("behavioursEnabled",L)},k.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},k.prototype.setWrapBehavioursEnabled=function(L){this.setOption("wrapBehavioursEnabled",L)},k.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},k.prototype.setShowFoldWidgets=function(L){this.setOption("showFoldWidgets",L)},k.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},k.prototype.setFadeFoldWidgets=function(L){this.setOption("fadeFoldWidgets",L)},k.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},k.prototype.remove=function(L){this.selection.isEmpty()&&(L=="left"?this.selection.selectLeft():this.selection.selectRight());var I=this.getSelectionRange();if(this.getBehavioursEnabled()){var O=this.session,N=O.getState(I.start.row),D=O.getMode().transformAction(N,"deletion",this,O,I);if(I.end.column===0){var $=O.getTextRange(I);if($[$.length-1]==`
`){var R=O.getLine(I.end.row);/^\s+$/.test(R)&&(I.end.column=R.length)}}D&&(I=D)}this.session.remove(I),this.clearSelection()},k.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var L=this.getSelectionRange();L.start.column==L.end.column&&L.start.row==L.end.row&&(L.end.column=0,L.end.row++),this.session.remove(L),this.clearSelection()},k.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var L=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(L)},k.prototype.setGhostText=function(L,I){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(L,I)},k.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},k.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var L=this.getCursorPosition(),I=L.column;if(I!==0){var O=this.session.getLine(L.row),N,D;I<O.length?(N=O.charAt(I)+O.charAt(I-1),D=new g(L.row,I-1,L.row,I+1)):(N=O.charAt(I-1)+O.charAt(I-2),D=new g(L.row,I-2,L.row,I)),this.session.replace(D,N),this.session.selection.moveToPosition(D.end)}}},k.prototype.toLowerCase=function(){var L=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),O=this.session.getTextRange(I);this.session.replace(I,O.toLowerCase()),this.selection.setSelectionRange(L)},k.prototype.toUpperCase=function(){var L=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),O=this.session.getTextRange(I);this.session.replace(I,O.toUpperCase()),this.selection.setSelectionRange(L)},k.prototype.indent=function(){var L=this.session,I=this.getSelectionRange();if(I.start.row<I.end.row){var O=this.$getSelectedRows();L.indentRows(O.first,O.last,"	");return}else if(I.start.column<I.end.column){var N=L.getTextRange(I);if(!/^\s+$/.test(N)){var O=this.$getSelectedRows();L.indentRows(O.first,O.last,"	");return}}var D=L.getLine(I.start.row),$=I.start,R=L.getTabSize(),B=L.documentToScreenColumn($.row,$.column);if(this.session.getUseSoftTabs())var j=R-B%R,G=l.stringRepeat(" ",j);else{for(var j=B%R;D[I.start.column-1]==" "&&j;)I.start.column--,j--;this.selection.setSelectionRange(I),G="	"}return this.insert(G)},k.prototype.blockIndent=function(){var L=this.$getSelectedRows();this.session.indentRows(L.first,L.last,"	")},k.prototype.blockOutdent=function(){var L=this.session.getSelection();this.session.outdentRows(L.getRange())},k.prototype.sortLines=function(){for(var L=this.$getSelectedRows(),I=this.session,O=[],N=L.first;N<=L.last;N++)O.push(I.getLine(N));O.sort(function(R,B){return R.toLowerCase()<B.toLowerCase()?-1:R.toLowerCase()>B.toLowerCase()?1:0});for(var D=new g(0,0,0,0),N=L.first;N<=L.last;N++){var $=I.getLine(N);D.start.row=N,D.end.row=N,D.end.column=$.length,I.replace(D,O[N-L.first])}},k.prototype.toggleCommentLines=function(){var L=this.session.getState(this.getCursorPosition().row),I=this.$getSelectedRows();this.session.getMode().toggleCommentLines(L,this.session,I.first,I.last)},k.prototype.toggleBlockComment=function(){var L=this.getCursorPosition(),I=this.session.getState(L.row),O=this.getSelectionRange();this.session.getMode().toggleBlockComment(I,this.session,O,L)},k.prototype.getNumberAt=function(L,I){var O=/[\-]?[0-9]+(?:\.[0-9]+)?/g;O.lastIndex=0;for(var N=this.session.getLine(L);O.lastIndex<I;){var D=O.exec(N);if(D.index<=I&&D.index+D[0].length>=I){var $={value:D[0],start:D.index,end:D.index+D[0].length};return $}}return null},k.prototype.modifyNumber=function(L){var I=this.selection.getCursor().row,O=this.selection.getCursor().column,N=new g(I,O-1,I,O),D=this.session.getTextRange(N);if(!isNaN(parseFloat(D))&&isFinite(D)){var $=this.getNumberAt(I,O);if($){var R=$.value.indexOf(".")>=0?$.start+$.value.indexOf(".")+1:$.end,B=$.start+$.value.length-R,j=parseFloat($.value);j*=Math.pow(10,B),R!==$.end&&O<R?L*=Math.pow(10,$.end-O-1):L*=Math.pow(10,$.end-O),j+=L,j/=Math.pow(10,B);var G=j.toFixed(B),z=new g(I,$.start,I,$.end);this.session.replace(z,G),this.moveCursorTo(I,Math.max($.start+1,O+G.length-$.value.length))}}else this.toggleWord()},k.prototype.toggleWord=function(){var L=this.selection.getCursor().row,I=this.selection.getCursor().column;this.selection.selectWord();var O=this.getSelectedText(),N=this.selection.getWordRange().start.column,D=O.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),$=I-N-1;$<0&&($=0);var R=0,B=0,j=this;O.match(/[A-Za-z0-9_]+/)&&D.forEach(function(De,Je){B=R+De.length,$>=R&&$<=B&&(O=De,j.selection.clearSelection(),j.moveCursorTo(L,R+N),j.selection.selectTo(L,B+N)),R=B});for(var G=this.$toggleWordPairs,z,W=0;W<G.length;W++)for(var Q=G[W],ie=0;ie<=1;ie++){var se=+!ie,ae=O.match(new RegExp("^\\s?_?("+l.escapeRegExp(Q[ie])+")\\s?$","i"));if(ae){var pe=O.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(ae[1])+")($|\\s)","g"));pe&&(z=O.replace(new RegExp(l.escapeRegExp(Q[ie]),"i"),function(De){var Je=Q[se];return De.toUpperCase()==De?Je=Je.toUpperCase():De.charAt(0).toUpperCase()==De.charAt(0)&&(Je=Je.substr(0,0)+Q[se].charAt(0).toUpperCase()+Je.substr(1)),Je}),this.insert(z),z="")}}},k.prototype.findLinkAt=function(L,I){var O,N,D=this.session.getLine(L),$=D.split(/((?:https?|ftp):\/\/[\S]+)/),R=I;R<0&&(R=0);var B=0,j=0,G;try{for(var z=a($),W=z.next();!W.done;W=z.next()){var Q=W.value;if(j=B+Q.length,R>=B&&R<=j&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){G=Q.replace(/[\s:.,'";}\]]+$/,"");break}B=j}}catch(ie){O={error:ie}}finally{try{W&&!W.done&&(N=z.return)&&N.call(z)}finally{if(O)throw O.error}}return G},k.prototype.openLink=function(){var L=this.selection.getCursor(),I=this.findLinkAt(L.row,L.column);return I&&window.open(I,"_blank"),I!=null},k.prototype.removeLines=function(){var L=this.$getSelectedRows();this.session.removeFullLines(L.first,L.last),this.clearSelection()},k.prototype.duplicateSelection=function(){var L=this.selection,I=this.session,O=L.getRange(),N=L.isBackwards();if(O.isEmpty()){var D=O.start.row;I.duplicateLines(D,D)}else{var $=N?O.start:O.end,R=I.insert($,I.getTextRange(O));O.start=$,O.end=R,L.setSelectionRange(O,N)}},k.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},k.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},k.prototype.moveText=function(L,I,O){return this.session.moveText(L,I,O)},k.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},k.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},k.prototype.$moveLines=function(L,I){var O,N,D=this.selection;if(!D.inMultiSelectMode||this.inVirtualSelectionMode){var $=D.toOrientedRange();O=this.$getSelectedRows($),N=this.session.$moveLines(O.first,O.last,I?0:L),I&&L==-1&&(N=0),$.moveBy(N,0),D.fromOrientedRange($)}else{var R=D.rangeList.ranges;D.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var B=0,j=0,G=R.length,z=0;z<G;z++){var W=z;R[z].moveBy(B,0),O=this.$getSelectedRows(R[z]);for(var Q=O.first,ie=O.last;++z<G;){j&&R[z].moveBy(j,0);var se=this.$getSelectedRows(R[z]);if(I&&se.first!=ie)break;if(!I&&se.first>ie+1)break;ie=se.last}for(z--,B=this.session.$moveLines(Q,ie,I?0:L),I&&L==-1&&(W=z+1);W<=z;)R[W].moveBy(B,0),W++;I||(B=0),j+=B}D.fromOrientedRange(D.ranges[0]),D.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},k.prototype.$getSelectedRows=function(L){return L=(L||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(L.start.row),last:this.session.getRowFoldEnd(L.end.row)}},k.prototype.onCompositionStart=function(L){this.renderer.showComposition(L)},k.prototype.onCompositionUpdate=function(L){this.renderer.setCompositionText(L)},k.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},k.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},k.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},k.prototype.isRowVisible=function(L){return L>=this.getFirstVisibleRow()&&L<=this.getLastVisibleRow()},k.prototype.isRowFullyVisible=function(L){return L>=this.renderer.getFirstFullyVisibleRow()&&L<=this.renderer.getLastFullyVisibleRow()},k.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},k.prototype.$moveByPage=function(L,I){var O=this.renderer,N=this.renderer.layerConfig,D=L*Math.floor(N.height/N.lineHeight);I===!0?this.selection.$moveSelection(function(){this.moveCursorBy(D,0)}):I===!1&&(this.selection.moveCursorBy(D,0),this.selection.clearSelection());var $=O.scrollTop;O.scrollBy(0,D*N.lineHeight),I!=null&&O.scrollCursorIntoView(null,.5),O.animateScrolling($)},k.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},k.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},k.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},k.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},k.prototype.scrollPageDown=function(){this.$moveByPage(1)},k.prototype.scrollPageUp=function(){this.$moveByPage(-1)},k.prototype.scrollToRow=function(L){this.renderer.scrollToRow(L)},k.prototype.scrollToLine=function(L,I,O,N){this.renderer.scrollToLine(L,I,O,N)},k.prototype.centerSelection=function(){var L=this.getSelectionRange(),I={row:Math.floor(L.start.row+(L.end.row-L.start.row)/2),column:Math.floor(L.start.column+(L.end.column-L.start.column)/2)};this.renderer.alignCursor(I,.5)},k.prototype.getCursorPosition=function(){return this.selection.getCursor()},k.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},k.prototype.getSelectionRange=function(){return this.selection.getRange()},k.prototype.selectAll=function(){this.selection.selectAll()},k.prototype.clearSelection=function(){this.selection.clearSelection()},k.prototype.moveCursorTo=function(L,I){this.selection.moveCursorTo(L,I)},k.prototype.moveCursorToPosition=function(L){this.selection.moveCursorToPosition(L)},k.prototype.jumpToMatching=function(L,I){var O=this.getCursorPosition(),N=new x(this.session,O.row,O.column),D=N.getCurrentToken(),$=0;D&&D.type.indexOf("tag-name")!==-1&&(D=N.stepBackward());var R=D||N.stepForward();if(R){var B,j=!1,G={},z=O.column-R.start,W,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(R.value.match(/[{}()\[\]]/g)){for(;z<R.value.length&&!j;z++)if(Q[R.value[z]])switch(W=Q[R.value[z]]+"."+R.type.replace("rparen","lparen"),isNaN(G[W])&&(G[W]=0),R.value[z]){case"(":case"[":case"{":G[W]++;break;case")":case"]":case"}":G[W]--,G[W]===-1&&(B="bracket",j=!0);break}}else R.type.indexOf("tag-name")!==-1&&(isNaN(G[R.value])&&(G[R.value]=0),D.value==="<"&&$>1?G[R.value]++:D.value==="</"&&G[R.value]--,G[R.value]===-1&&(B="tag",j=!0));j||(D=R,$++,R=N.stepForward(),z=0)}while(R&&!j);if(B){var ie,se;if(B==="bracket")ie=this.session.getBracketRange(O),ie||(ie=new g(N.getCurrentTokenRow(),N.getCurrentTokenColumn()+z-1,N.getCurrentTokenRow(),N.getCurrentTokenColumn()+z-1),se=ie.start,(I||se.row===O.row&&Math.abs(se.column-O.column)<2)&&(ie=this.session.getBracketRange(se)));else if(B==="tag"){if(!R||R.type.indexOf("tag-name")===-1)return;if(ie=new g(N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2,N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2),ie.compare(O.row,O.column)===0){var ae=this.session.getMatchingTags(O);ae&&(ae.openTag.contains(O.row,O.column)?(ie=ae.closeTag,se=ie.start):(ie=ae.openTag,ae.closeTag.start.row===O.row&&ae.closeTag.start.column===O.column?se=ie.end:se=ie.start))}se=se||ie.start}se=ie&&ie.cursor||se,se&&(L?ie&&I?this.selection.setRange(ie):ie&&ie.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(se.row,se.column):this.selection.moveTo(se.row,se.column))}}},k.prototype.gotoLine=function(L,I,O){this.selection.clearSelection(),this.session.unfold({row:L-1,column:I||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(L-1,I||0),this.isRowFullyVisible(L-1)||this.scrollToLine(L-1,!0,O)},k.prototype.navigateTo=function(L,I){this.selection.moveTo(L,I)},k.prototype.navigateUp=function(L){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(-L||-1,0)},k.prototype.navigateDown=function(L){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(L||1,0)},k.prototype.navigateLeft=function(L){if(this.selection.isEmpty())for(L=L||1;L--;)this.selection.moveCursorLeft();else{var I=this.getSelectionRange().start;this.moveCursorToPosition(I)}this.clearSelection()},k.prototype.navigateRight=function(L){if(this.selection.isEmpty())for(L=L||1;L--;)this.selection.moveCursorRight();else{var I=this.getSelectionRange().end;this.moveCursorToPosition(I)}this.clearSelection()},k.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},k.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},k.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},k.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},k.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},k.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},k.prototype.replace=function(L,I){I&&this.$search.set(I);var O=this.$search.find(this.session),N=0;return O&&(this.$tryReplace(O,L)&&(N=1),this.selection.setSelectionRange(O),this.renderer.scrollSelectionIntoView(O.start,O.end)),N},k.prototype.replaceAll=function(L,I){I&&this.$search.set(I);var O=this.$search.findAll(this.session),N=0;if(!O.length)return N;var D=this.getSelectionRange();this.selection.moveTo(0,0);for(var $=O.length-1;$>=0;--$)this.$tryReplace(O[$],L)&&N++;return this.selection.setSelectionRange(D),N},k.prototype.$tryReplace=function(L,I){var O=this.session.getTextRange(L);return I=this.$search.replace(O,I),I!==null?(L.end=this.session.replace(L,I),L):null},k.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},k.prototype.find=function(L,I,O){I||(I={}),typeof L=="string"||L instanceof RegExp?I.needle=L:typeof L=="object"&&o.mixin(I,L);var N=this.selection.getRange();I.needle==null&&(L=this.session.getTextRange(N)||this.$search.$options.needle,L||(N=this.session.getWordRange(N.start.row,N.start.column),L=this.session.getTextRange(N)),this.$search.set({needle:L})),this.$search.set(I),I.start||this.$search.set({start:N});var D=this.$search.find(this.session);if(I.preventScroll)return D;if(D)return this.revealRange(D,O),D;I.backwards?N.start=N.end:N.end=N.start,this.selection.setRange(N)},k.prototype.findNext=function(L,I){this.find({skipCurrent:!0,backwards:!1},L,I)},k.prototype.findPrevious=function(L,I){this.find(L,{skipCurrent:!0,backwards:!0},I)},k.prototype.revealRange=function(L,I){this.session.unfold(L),this.selection.setSelectionRange(L);var O=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(L.start,L.end,.5),I!==!1&&this.renderer.animateScrolling(O)},k.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},k.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},k.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(L){L.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},k.prototype.setAutoScrollEditorIntoView=function(L){if(L){var I,O=this,N=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var D=this.$scrollAnchor;D.style.cssText="position:absolute",this.container.insertBefore(D,this.container.firstChild);var $=this.on("changeSelection",function(){N=!0}),R=this.renderer.on("beforeRender",function(){N&&(I=O.renderer.container.getBoundingClientRect())}),B=this.renderer.on("afterRender",function(){if(N&&I&&(O.isFocused()||O.searchBox&&O.searchBox.isFocused())){var j=O.renderer,G=j.$cursorLayer.$pixelPos,z=j.layerConfig,W=G.top-z.offset;G.top>=0&&W+I.top<0?N=!0:G.top<z.height&&G.top+I.top+z.lineHeight>window.innerHeight?N=!1:N=null,N!=null&&(D.style.top=W+"px",D.style.left=G.left+"px",D.style.height=z.lineHeight+"px",D.scrollIntoView(N)),N=I=null}});this.setAutoScrollEditorIntoView=function(j){j||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",$),this.renderer.off("afterRender",B),this.renderer.off("beforeRender",R))}}},k.prototype.$resetCursorStyle=function(){var L=this.$cursorStyle||"ace",I=this.renderer.$cursorLayer;I&&(I.setSmoothBlinking(/smooth/.test(L)),I.isBlinking=!this.$readOnly&&L!="wide",s.setCssClass(I.element,"ace_slim-cursors",/slim/.test(L)))},k.prototype.prompt=function(L,I,O){var N=this;b.loadModule("ace/ext/prompt",function(D){D.prompt(N,L,I,O)})},k}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],o.implement(T.prototype,m),b.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(k){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:k})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(k){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(k){this.textInput.setReadOnly(k),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(k){this.textInput.setCopyWithEmptySelection(k)},initialValue:!1},cursorStyle:{set:function(k){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(k){this.setAutoScrollEditorIntoView(k)}},keyboardHandler:{set:function(k){this.setKeyboardHandler(k)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(k){this.session.setValue(k)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(k){this.setSession(k)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(k){this.renderer.$gutterLayer.setShowLineNumbers(k),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),k&&this.$relativeLineNumbers?C.attach(this):C.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(k){this.$showLineNumbers&&k?C.attach(this):C.detach(this)}},placeholder:{set:function(k){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var L=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(L&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!L&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var I=s.createElement("div");I.className="ace_placeholder",I.textContent=this.$placeholder||"",this.renderer.placeholderNode=I,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!L&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(k){var L={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(N){N.blur(),N.renderer.scroller.focus()},readOnly:!0},I=function(N){if(N.target==this.renderer.scroller&&N.keyCode===E.enter){N.preventDefault();var D=this.getCursorPosition().row;this.isRowVisible(D)||this.scrollToLine(D,!0,!0),this.focus()}},O;k?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",M("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",M("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",I.bind(this)),this.commands.addCommand(L),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",M("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",M("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),O||(O=new _(this)),O.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",I.bind(this)),this.commands.removeCommand(L),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),O&&O.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(k){this.$textInputAriaLabel=k},initialValue:""},enableMobileMenu:{set:function(k){this.$enableMobileMenu=k},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var C={getText:function(k,L){return(Math.abs(k.selection.lead.row-L)||L+1+(L<9?"·":""))+""},getWidth:function(k,L,I){return Math.max(L.toString().length,(I.lastRow+1).toString().length,2)*I.characterWidth},update:function(k,L){L.renderer.$loop.schedule(L.renderer.CHANGE_GUTTER)},attach:function(k){k.renderer.$gutterLayer.$renderer=this,k.on("changeSelection",this.update),this.update(null,k)},detach:function(k){k.renderer.$gutterLayer.$renderer==this&&(k.renderer.$gutterLayer.$renderer=null),k.off("changeSelection",this.update),this.update(null,k)}};n.Editor=T}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(t,n,i){var a=t("../lib/dom"),o=function(){function s(l,u){this.element=l,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return s.prototype.moveContainer=function(l){a.translate(this.element,0,-(l.firstRowScreen*l.lineHeight%this.canvasHeight)-l.offset*this.$offsetCoefficient)},s.prototype.pageChanged=function(l,u){return Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},s.prototype.computeLineTop=function(l,u,c){var f=u.firstRowScreen*u.lineHeight,h=Math.floor(f/this.canvasHeight),d=c.documentToScreenRow(l,0)*u.lineHeight;return d-h*this.canvasHeight},s.prototype.computeLineHeight=function(l,u,c){return u.lineHeight*c.getRowLineCount(l)},s.prototype.getLength=function(){return this.cells.length},s.prototype.get=function(l){return this.cells[l]},s.prototype.shift=function(){this.$cacheCell(this.cells.shift())},s.prototype.pop=function(){this.$cacheCell(this.cells.pop())},s.prototype.push=function(l){if(Array.isArray(l)){this.cells.push.apply(this.cells,l);for(var u=a.createFragment(this.element),c=0;c<l.length;c++)u.appendChild(l[c].element);this.element.appendChild(u)}else this.cells.push(l),this.element.appendChild(l.element)},s.prototype.unshift=function(l){if(Array.isArray(l)){this.cells.unshift.apply(this.cells,l);for(var u=a.createFragment(this.element),c=0;c<l.length;c++)u.appendChild(l[c].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(l),this.element.insertAdjacentElement("afterbegin",l.element)},s.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},s.prototype.$cacheCell=function(l){l&&(l.element.remove(),this.cellCache.push(l))},s.prototype.createCell=function(l,u,c,f){var h=this.cellCache.pop();if(!h){var d=a.createElement("div");f&&f(d),this.element.appendChild(d),h={element:d,text:"",row:l}}return h.row=l,h},s}();n.Lines=o}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(t,n,i){var a=t("../lib/dom"),o=t("../lib/oop"),s=t("../lib/lang"),l=t("../lib/event_emitter").EventEmitter,u=t("./lines").Lines,c=t("../config").nls,f=function(){function d(v){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",v.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return d.prototype.setSession=function(v){this.session&&this.session.off("change",this.$updateAnnotations),this.session=v,v&&v.on("change",this.$updateAnnotations)},d.prototype.addGutterDecoration=function(v,p){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(v,p)},d.prototype.removeGutterDecoration=function(v,p){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(v,p)},d.prototype.setAnnotations=function(v){this.$annotations=[];for(var p=0;p<v.length;p++){var g=v[p],m=g.row,y=this.$annotations[m];y||(y=this.$annotations[m]={text:[],type:[],displayText:[]});var w=g.text,b=g.text,x=g.type;w=w?s.escapeHTML(w):g.html||"",b=b||g.html||"",y.text.indexOf(w)===-1&&(y.text.push(w),y.type.push(x),y.displayText.push(b));var S=g.className;S?y.className=S:x==="error"?y.className=" ace_error":x==="security"&&!/\bace_error\b/.test(y.className)?y.className=" ace_security":x==="warning"&&!/\bace_(error|security)\b/.test(y.className)?y.className=" ace_warning":x==="info"&&!y.className?y.className=" ace_info":x==="hint"&&!y.className&&(y.className=" ace_hint")}},d.prototype.$updateAnnotations=function(v){if(this.$annotations.length){var p=v.start.row,g=v.end.row-p;if(g!==0)if(v.action=="remove")this.$annotations.splice(p,g+1,null);else{var m=new Array(g+1);m.unshift(p,1),this.$annotations.splice.apply(this.$annotations,m)}}},d.prototype.update=function(v){this.config=v;var p=this.session,g=v.firstRow,m=Math.min(v.lastRow+v.gutterOffset,p.getLength()-1);this.oldLastRow=m,this.config=v,this.$lines.moveContainer(v),this.$updateCursorRow();for(var y=p.getNextFoldLine(g),w=y?y.start.row:1/0,b=null,x=-1,S=g;;){if(S>w&&(S=y.end.row+1,y=p.getNextFoldLine(S,y),w=y?y.start.row:1/0),S>m){for(;this.$lines.getLength()>x+1;)this.$lines.pop();break}b=this.$lines.get(++x),b?b.row=S:(b=this.$lines.createCell(S,v,this.session,h),this.$lines.push(b)),this.$renderCell(b,v,y,S),S++}this._signal("afterRender"),this.$updateGutterWidth(v)},d.prototype.$updateGutterWidth=function(v){var p=this.session,g=p.gutterRenderer||this.$renderer,m=p.$firstLineNumber,y=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||p.$useWrapMode)&&(y=p.getLength()+m-1);var w=g?g.getWidth(p,y,v):y.toString().length*v.characterWidth,b=this.$padding||this.$computePadding();w+=b.left+b.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",w))},d.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var v=this.session.selection.getCursor();this.$cursorRow!==v.row&&(this.$cursorRow=v.row)}},d.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var v=this.session.selection.cursor.row;if(this.$cursorRow=v,!(this.$cursorCell&&this.$cursorCell.row==v)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var p=this.$lines.cells;this.$cursorCell=null;for(var g=0;g<p.length;g++){var m=p[g];if(m.row>=this.$cursorRow){if(m.row>this.$cursorRow){var y=this.session.getFoldLine(this.$cursorRow);if(g>0&&y&&y.start.row==p[g-1].row)m=p[g-1];else break}m.element.className="ace_gutter-active-line "+m.element.className,this.$cursorCell=m;break}}}}},d.prototype.scrollLines=function(v){var p=this.config;if(this.config=v,this.$updateCursorRow(),this.$lines.pageChanged(p,v))return this.update(v);this.$lines.moveContainer(v);var g=Math.min(v.lastRow+v.gutterOffset,this.session.getLength()-1),m=this.oldLastRow;if(this.oldLastRow=g,!p||m<v.firstRow)return this.update(v);if(g<p.firstRow)return this.update(v);if(p.firstRow<v.firstRow)for(var y=this.session.getFoldedRowCount(p.firstRow,v.firstRow-1);y>0;y--)this.$lines.shift();if(m>g)for(var y=this.session.getFoldedRowCount(g+1,m);y>0;y--)this.$lines.pop();v.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLines(v,v.firstRow,p.firstRow-1)),g>m&&this.$lines.push(this.$renderLines(v,m+1,g)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(v)},d.prototype.$renderLines=function(v,p,g){for(var m=[],y=p,w=this.session.getNextFoldLine(y),b=w?w.start.row:1/0;y>b&&(y=w.end.row+1,w=this.session.getNextFoldLine(y,w),b=w?w.start.row:1/0),!(y>g);){var x=this.$lines.createCell(y,v,this.session,h);this.$renderCell(x,v,w,y),m.push(x),y++}return m},d.prototype.$renderCell=function(v,p,g,m){var y=v.element,w=this.session,b=y.childNodes[0],x=y.childNodes[1],S=y.childNodes[2],_=S.firstChild,M=w.$firstLineNumber,A=w.$breakpoints,E=w.$decorations,T=w.gutterRenderer||this.$renderer,C=this.$showFoldWidgets&&w.foldWidgets,k=g?g.start.row:Number.MAX_VALUE,L=p.lineHeight+"px",I=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",O=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",N=(T?T.getText(w,m):m+M).toString();if(this.$highlightGutterLine&&(m==this.$cursorRow||g&&m<this.$cursorRow&&m>=k&&this.$cursorRow<=g.end.row)&&(I+="ace_gutter-active-line ",this.$cursorCell!=v&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=v)),A[m]&&(I+=A[m]),E[m]&&(I+=E[m]),this.$annotations[m]&&m!==k&&(I+=this.$annotations[m].className),C){var D=C[m];D==null&&(D=C[m]=w.getFoldWidget(m))}if(D){var $="ace_fold-widget ace_"+D,R=D=="start"&&m==k&&m<g.end.row;if(R){$+=" ace_closed";for(var B="",j=!1,G=m+1;G<=g.end.row;G++)if(this.$annotations[G]){if(this.$annotations[G].className===" ace_error"){j=!0,B=" ace_error_fold";break}this.$annotations[G].className===" ace_security"?(j=!0,B=" ace_security_fold"):this.$annotations[G].className===" ace_warning"&&B!==" ace_security_fold"&&(j=!0,B=" ace_warning_fold")}I+=B}else $+=" ace_open";x.className!=$&&(x.className=$),a.setStyle(x.style,"height",L),a.setStyle(x.style,"display","inline-block"),x.setAttribute("role","button"),x.setAttribute("tabindex","-1");var z=w.getFoldWidgetRange(m);z?x.setAttribute("aria-label",c("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[z.start.row+1,z.end.row+1])):g?x.setAttribute("aria-label",c("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[g.start.row+1,g.end.row+1])):x.setAttribute("aria-label",c("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[m+1])),R?(x.setAttribute("aria-expanded","false"),x.setAttribute("title",c("gutter.code-folding.closed.title","Unfold code"))):(x.setAttribute("aria-expanded","true"),x.setAttribute("title",c("gutter.code-folding.open.title","Fold code")))}else x&&(a.setStyle(x.style,"display","none"),x.setAttribute("tabindex","0"),x.removeAttribute("role"),x.removeAttribute("aria-label"));if(j&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",_.className=O,_.className+=B,a.setStyle(_.style,"height",L),a.setStyle(S.style,"display","block"),a.setStyle(S.style,"height",L);var W;switch(B){case" ace_error_fold":W=c("gutter.annotation.aria-label.error","Error, read annotations row $0",[N]);break;case" ace_security_fold":W=c("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[N]);break;case" ace_warning_fold":W=c("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[N]);break}S.setAttribute("aria-label",W),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[m]){S.className="ace_gutter_annotation",_.className=O,this.$useSvgGutterIcons?_.className+=this.$annotations[m].className:y.classList.add(this.$annotations[m].className.replace(" ","")),a.setStyle(_.style,"height",L),a.setStyle(S.style,"display","block"),a.setStyle(S.style,"height",L);var W;switch(this.$annotations[m].className){case" ace_error":W=c("gutter.annotation.aria-label.error","Error, read annotations row $0",[N]);break;case" ace_security":W=c("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[N]);break;case" ace_warning":W=c("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[N]);break;case" ace_info":W=c("gutter.annotation.aria-label.info","Info, read annotations row $0",[N]);break;case" ace_hint":W=c("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[N]);break}S.setAttribute("aria-label",W),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else a.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return N!==b.data&&(b.data=N),y.className!=I&&(y.className=I),a.setStyle(v.element.style,"height",this.$lines.computeLineHeight(m,p,w)+"px"),a.setStyle(v.element.style,"top",this.$lines.computeLineTop(m,p,w)+"px"),v.text=N,S.style.display==="none"&&x.style.display==="none"?v.element.setAttribute("aria-hidden",!0):v.element.setAttribute("aria-hidden",!1),v},d.prototype.setHighlightGutterLine=function(v){this.$highlightGutterLine=v},d.prototype.setShowLineNumbers=function(v){this.$renderer=!v&&{getWidth:function(){return 0},getText:function(){return""}}},d.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},d.prototype.setShowFoldWidgets=function(v){v?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=v,this.$padding=null},d.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},d.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var v=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(v.borderLeftWidth)||0)+(parseInt(v.paddingLeft)||0)+1,this.$padding.right=(parseInt(v.borderRightWidth)||0)+(parseInt(v.paddingRight)||0),this.$padding},d.prototype.getRegion=function(v){var p=this.$padding||this.$computePadding(),g=this.element.getBoundingClientRect();if(v.x<p.left+g.left)return"markers";if(this.$showFoldWidgets&&v.x>g.right-p.right)return"foldWidgets"},d}();f.prototype.$fixedWidth=!1,f.prototype.$highlightGutterLine=!0,f.prototype.$renderer="",f.prototype.$showLineNumbers=!0,f.prototype.$showFoldWidgets=!0,o.implement(f.prototype,l);function h(d){var v=document.createTextNode("");d.appendChild(v);var p=a.createElement("span");d.appendChild(p);var g=a.createElement("span");d.appendChild(g);var m=a.createElement("span");return g.appendChild(m),d}n.Gutter=f}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,n,i){var a=t("../range").Range,o=t("../lib/dom"),s=function(){function u(c){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",c.appendChild(this.element)}return u.prototype.setPadding=function(c){this.$padding=c},u.prototype.setSession=function(c){this.session=c},u.prototype.setMarkers=function(c){this.markers=c},u.prototype.elt=function(c,f){var h=this.i!=-1&&this.element.childNodes[this.i];h?this.i++:(h=document.createElement("div"),this.element.appendChild(h),this.i=-1),h.style.cssText=f,h.className=c},u.prototype.update=function(c){if(c){this.config=c,this.i=0;var f;for(var h in this.markers){var d=this.markers[h];if(!d.range){d.update(f,this,this.session,c);continue}var v=d.range.clipRows(c.firstRow,c.lastRow);if(!v.isEmpty())if(v=v.toScreenRange(this.session),d.renderer){var p=this.$getTop(v.start.row,c),g=this.$padding+v.start.column*c.characterWidth;d.renderer(f,v,g,p,c)}else d.type=="fullLine"?this.drawFullLineMarker(f,v,d.clazz,c):d.type=="screenLine"?this.drawScreenLineMarker(f,v,d.clazz,c):v.isMultiLine()?d.type=="text"?this.drawTextMarker(f,v,d.clazz,c):this.drawMultiLineMarker(f,v,d.clazz,c):this.drawSingleLineMarker(f,v,d.clazz+" ace_start ace_br15",c)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(c,f){return(c-f.firstRowScreen)*f.lineHeight},u.prototype.drawTextMarker=function(c,f,h,d,v){for(var p=this.session,g=f.start.row,m=f.end.row,y=g,w=0,b=0,x=p.getScreenLastRowColumn(y),S=new a(y,f.start.column,y,b);y<=m;y++)S.start.row=S.end.row=y,S.start.column=y==g?f.start.column:p.getRowWrapIndent(y),S.end.column=x,w=b,b=x,x=y+1<m?p.getScreenLastRowColumn(y+1):y==m?0:f.end.column,this.drawSingleLineMarker(c,S,h+(y==g?" ace_start":"")+" ace_br"+l(y==g||y==g+1&&f.start.column,w<b,b>x,y==m),d,y==m?0:1,v)},u.prototype.drawMultiLineMarker=function(c,f,h,d,v){var p=this.$padding,g=d.lineHeight,m=this.$getTop(f.start.row,d),y=p+f.start.column*d.characterWidth;if(v=v||"",this.session.$bidiHandler.isBidiRow(f.start.row)){var w=f.clone();w.end.row=w.start.row,w.end.column=this.session.getLine(w.start.row).length,this.drawBidiSingleLineMarker(c,w,h+" ace_br1 ace_start",d,null,v)}else this.elt(h+" ace_br1 ace_start","height:"+g+"px;right:0;top:"+m+"px;left:"+y+"px;"+(v||""));if(this.session.$bidiHandler.isBidiRow(f.end.row)){var w=f.clone();w.start.row=w.end.row,w.start.column=0,this.drawBidiSingleLineMarker(c,w,h+" ace_br12",d,null,v)}else{m=this.$getTop(f.end.row,d);var b=f.end.column*d.characterWidth;this.elt(h+" ace_br12","height:"+g+"px;width:"+b+"px;top:"+m+"px;left:"+p+"px;"+(v||""))}if(g=(f.end.row-f.start.row-1)*d.lineHeight,!(g<=0)){m=this.$getTop(f.start.row+1,d);var x=(f.start.column?1:0)|(f.end.column?0:8);this.elt(h+(x?" ace_br"+x:""),"height:"+g+"px;right:0;top:"+m+"px;left:"+p+"px;"+(v||""))}},u.prototype.drawSingleLineMarker=function(c,f,h,d,v,p){if(this.session.$bidiHandler.isBidiRow(f.start.row))return this.drawBidiSingleLineMarker(c,f,h,d,v,p);var g=d.lineHeight,m=(f.end.column+(v||0)-f.start.column)*d.characterWidth,y=this.$getTop(f.start.row,d),w=this.$padding+f.start.column*d.characterWidth;this.elt(h,"height:"+g+"px;width:"+m+"px;top:"+y+"px;left:"+w+"px;"+(p||""))},u.prototype.drawBidiSingleLineMarker=function(c,f,h,d,v,p){var g=d.lineHeight,m=this.$getTop(f.start.row,d),y=this.$padding,w=this.session.$bidiHandler.getSelections(f.start.column,f.end.column);w.forEach(function(b){this.elt(h,"height:"+g+"px;width:"+(b.width+(v||0))+"px;top:"+m+"px;left:"+(y+b.left)+"px;"+(p||""))},this)},u.prototype.drawFullLineMarker=function(c,f,h,d,v){var p=this.$getTop(f.start.row,d),g=d.lineHeight;f.start.row!=f.end.row&&(g+=this.$getTop(f.end.row,d)-p),this.elt(h,"height:"+g+"px;top:"+p+"px;left:0;right:0;"+(v||""))},u.prototype.drawScreenLineMarker=function(c,f,h,d,v){var p=this.$getTop(f.start.row,d),g=d.lineHeight;this.elt(h,"height:"+g+"px;top:"+p+"px;left:0;right:0;"+(v||""))},u}();s.prototype.$padding=0;function l(u,c,f,h){return(u?1:0)|(c?2:0)|(f?4:0)|(h?8:0)}n.Marker=s}),ace.define("ace/layer/text_util",["require","exports","module"],function(t,n,i){var a=new Set(["text","rparen","lparen"]);n.isTextToken=function(o){return a.has(o)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(t,n,i){var a=t("../lib/oop"),o=t("../lib/dom"),s=t("../lib/lang"),l=t("./lines").Lines,u=t("../lib/event_emitter").EventEmitter,c=t("../config").nls,f=t("./text_util").isTextToken,h=function(){function d(v){this.dom=o,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",v.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new l(this.element)}return d.prototype.$updateEolChar=function(){var v=this.session.doc,p=v.getNewLineCharacter()==`
`&&v.getNewLineMode()!="windows",g=p?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=g)return this.EOL_CHAR=g,!0},d.prototype.setPadding=function(v){this.$padding=v,this.element.style.margin="0 "+v+"px"},d.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},d.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},d.prototype.$setFontMetrics=function(v){this.$fontMetrics=v,this.$fontMetrics.on("changeCharacterSize",(function(p){this._signal("changeCharacterSize",p)}).bind(this)),this.$pollSizeChanges()},d.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},d.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},d.prototype.setSession=function(v){this.session=v,v&&this.$computeTabString()},d.prototype.setShowInvisibles=function(v){return this.showInvisibles==v?!1:(this.showInvisibles=v,typeof v=="string"?(this.showSpaces=/tab/i.test(v),this.showTabs=/space/i.test(v),this.showEOL=/eol/i.test(v)):this.showSpaces=this.showTabs=this.showEOL=v,this.$computeTabString(),!0)},d.prototype.setDisplayIndentGuides=function(v){return this.displayIndentGuides==v?!1:(this.displayIndentGuides=v,this.$computeTabString(),!0)},d.prototype.setHighlightIndentGuides=function(v){return this.$highlightIndentGuides===v?!1:(this.$highlightIndentGuides=v,v)},d.prototype.$computeTabString=function(){var v=this.session.getTabSize();this.tabSize=v;for(var p=this.$tabStrings=[0],g=1;g<v+1;g++)if(this.showTabs){var m=this.dom.createElement("span");m.className="ace_invisible ace_invisible_tab",m.textContent=s.stringRepeat(this.TAB_CHAR,g),p.push(m)}else p.push(this.dom.createTextNode(s.stringRepeat(" ",g),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var y="ace_indent-guide",w=this.showSpaces?" ace_invisible ace_invisible_space":"",b=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),x=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):b,m=this.dom.createElement("span");m.className=y+w,m.textContent=b,this.$tabStrings[" "]=m;var m=this.dom.createElement("span");m.className=y+x,m.textContent=S,this.$tabStrings["	"]=m}},d.prototype.updateLines=function(v,p,g){if(this.config.lastRow!=v.lastRow||this.config.firstRow!=v.firstRow)return this.update(v);this.config=v;for(var m=Math.max(p,v.firstRow),y=Math.min(g,v.lastRow),w=this.element.childNodes,b=0,S=v.firstRow;S<m;S++){var _=this.session.getFoldLine(S);if(_)if(_.containsRow(m)){m=_.start.row;break}else S=_.end.row;b++}for(var x=!1,S=m,_=this.session.getNextFoldLine(S),M=_?_.start.row:1/0;S>M&&(S=_.end.row+1,_=this.session.getNextFoldLine(S,_),M=_?_.start.row:1/0),!(S>y);){var A=w[b++];if(A){this.dom.removeChildren(A),this.$renderLine(A,S,S==M?_:!1),x&&(A.style.top=this.$lines.computeLineTop(S,v,this.session)+"px");var E=v.lineHeight*this.session.getRowLength(S)+"px";A.style.height!=E&&(x=!0,A.style.height=E)}S++}if(x)for(;b<this.$lines.cells.length;){var T=this.$lines.cells[b++];T.element.style.top=this.$lines.computeLineTop(T.row,v,this.session)+"px"}},d.prototype.scrollLines=function(v){var p=this.config;if(this.config=v,this.$lines.pageChanged(p,v))return this.update(v);this.$lines.moveContainer(v);var g=v.lastRow,m=p?p.lastRow:-1;if(!p||m<v.firstRow)return this.update(v);if(g<p.firstRow)return this.update(v);if(!p||p.lastRow<v.firstRow)return this.update(v);if(v.lastRow<p.firstRow)return this.update(v);if(p.firstRow<v.firstRow)for(var y=this.session.getFoldedRowCount(p.firstRow,v.firstRow-1);y>0;y--)this.$lines.shift();if(p.lastRow>v.lastRow)for(var y=this.session.getFoldedRowCount(v.lastRow+1,p.lastRow);y>0;y--)this.$lines.pop();v.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLinesFragment(v,v.firstRow,p.firstRow-1)),v.lastRow>p.lastRow&&this.$lines.push(this.$renderLinesFragment(v,p.lastRow+1,v.lastRow)),this.$highlightIndentGuide()},d.prototype.$renderLinesFragment=function(v,p,g){for(var m=[],y=p,w=this.session.getNextFoldLine(y),b=w?w.start.row:1/0;y>b&&(y=w.end.row+1,w=this.session.getNextFoldLine(y,w),b=w?w.start.row:1/0),!(y>g);){var x=this.$lines.createCell(y,v,this.session),S=x.element;this.dom.removeChildren(S),o.setStyle(S.style,"height",this.$lines.computeLineHeight(y,v,this.session)+"px"),o.setStyle(S.style,"top",this.$lines.computeLineTop(y,v,this.session)+"px"),this.$renderLine(S,y,y==b?w:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",m.push(x),y++}return m},d.prototype.update=function(v){this.$lines.moveContainer(v),this.config=v;for(var p=v.firstRow,g=v.lastRow,m=this.$lines;m.getLength();)m.pop();m.push(this.$renderLinesFragment(v,p,g))},d.prototype.$renderToken=function(v,p,g,m){for(var y=this,w=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,b=this.dom.createFragment(this.element),x,S=0;x=w.exec(m);){var _=x[1],M=x[2],A=x[3],E=x[4],T=x[5];if(!(!y.showSpaces&&M)){var C=S!=x.index?m.slice(S,x.index):"";if(S=x.index+x[0].length,C&&b.appendChild(this.dom.createTextNode(C,this.element)),_){var k=y.session.getScreenTabSize(p+x.index);b.appendChild(y.$tabStrings[k].cloneNode(!0)),p+=k-1}else if(M)if(y.showSpaces){var L=this.dom.createElement("span");L.className="ace_invisible ace_invisible_space",L.textContent=s.stringRepeat(y.SPACE_CHAR,M.length),b.appendChild(L)}else b.appendChild(this.dom.createTextNode(M,this.element));else if(A){var L=this.dom.createElement("span");L.className="ace_invisible ace_invisible_space ace_invalid",L.textContent=s.stringRepeat(y.SPACE_CHAR,A.length),b.appendChild(L)}else if(E){p+=1;var L=this.dom.createElement("span");L.style.width=y.config.characterWidth*2+"px",L.className=y.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",L.textContent=y.showSpaces?y.SPACE_CHAR:E,b.appendChild(L)}else if(T){p+=1;var L=this.dom.createElement("span");L.style.width=y.config.characterWidth*2+"px",L.className="ace_cjk",L.textContent=T,b.appendChild(L)}}}if(b.appendChild(this.dom.createTextNode(S?m.slice(S):m,this.element)),f(g.type))v.appendChild(b);else{var I="ace_"+g.type.replace(/\./g," ace_"),L=this.dom.createElement("span");g.type=="fold"&&(L.style.width=g.value.length*this.config.characterWidth+"px",L.setAttribute("title",c("inline-fold.closed.title","Unfold code"))),L.className=I,L.appendChild(b),v.appendChild(L)}return p+m.length},d.prototype.renderIndentGuide=function(v,p,g){var m=p.search(this.$indentGuideRe);if(m<=0||m>=g)return p;if(p[0]==" "){m-=m%this.tabSize;for(var y=m/this.tabSize,w=0;w<y;w++)v.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(m)}else if(p[0]=="	"){for(var w=0;w<m;w++)v.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(m)}return this.$highlightIndentGuide(),p},d.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var v=this.session.doc.$lines;if(v){var p=this.session.selection.getCursor(),g=/^\s*/.exec(this.session.doc.getLine(p.row))[0].length,m=Math.floor(g/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:m,start:p.row};var y=this.session.$bracketHighlight;if(y){for(var w=this.session.$bracketHighlight.ranges,b=0;b<w.length;b++)if(p.row!==w[b].start.row){this.$highlightIndentGuideMarker.end=w[b].start.row,p.row>w[b].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&v[p.row]!==""&&p.column===v[p.row].length){this.$highlightIndentGuideMarker.dir=1;for(var b=p.row+1;b<v.length;b++){var x=v[b],S=/^\s*/.exec(x)[0].length;if(x!==""&&(this.$highlightIndentGuideMarker.end=b,S<=g))break}}this.$renderHighlightIndentGuide()}}},d.prototype.$clearActiveIndentGuide=function(){for(var v=this.$lines.cells,p=0;p<v.length;p++){var g=v[p],m=g.element.childNodes;if(m.length>0){for(var y=0;y<m.length;y++)if(m[y].classList&&m[y].classList.contains("ace_indent-guide-active")){m[y].classList.remove("ace_indent-guide-active");break}}}},d.prototype.$setIndentGuideActive=function(v,p){var g=this.session.doc.getLine(v.row);if(g!==""){var m=v.element.childNodes;if(m){var y=m[p-1];y&&y.classList&&y.classList.contains("ace_indent-guide")&&y.classList.add("ace_indent-guide-active")}}},d.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var v=this.$lines.cells;this.$clearActiveIndentGuide();var p=this.$highlightIndentGuideMarker.indentLevel;if(p!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var g=0;g<v.length;g++){var m=v[g];if(this.$highlightIndentGuideMarker.end&&m.row>=this.$highlightIndentGuideMarker.start+1){if(m.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(m,p)}}else for(var g=v.length-1;g>=0;g--){var m=v[g];if(this.$highlightIndentGuideMarker.end&&m.row<this.$highlightIndentGuideMarker.start){if(m.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(m,p)}}}},d.prototype.$createLineElement=function(v){var p=this.dom.createElement("div");return p.className="ace_line",p.style.height=this.config.lineHeight+"px",p},d.prototype.$renderWrappedLine=function(v,p,g){var m=0,y=0,w=g[0],b=0,x=this.$createLineElement();v.appendChild(x);for(var S=0;S<p.length;S++){var _=p[S],M=_.value;if(S==0&&this.displayIndentGuides){if(m=M.length,M=this.renderIndentGuide(x,M,w),!M)continue;m-=M.length}if(m+M.length<w)b=this.$renderToken(x,b,_,M),m+=M.length;else{for(;m+M.length>=w;)b=this.$renderToken(x,b,_,M.substring(0,w-m)),M=M.substring(w-m),m=w,x=this.$createLineElement(),v.appendChild(x),x.appendChild(this.dom.createTextNode(s.stringRepeat(" ",g.indent),this.element)),y++,b=0,w=g[y]||Number.MAX_VALUE;M.length!=0&&(m+=M.length,b=this.$renderToken(x,b,_,M))}}g[g.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(x,b,null,"",!0)},d.prototype.$renderSimpleLine=function(v,p){for(var g=0,m=0;m<p.length;m++){var y=p[m],w=y.value;if(!(m==0&&this.displayIndentGuides&&(w=this.renderIndentGuide(v,w),!w))){if(g+w.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(v,g,y,w);g=this.$renderToken(v,g,y,w)}}},d.prototype.$renderOverflowMessage=function(v,p,g,m,y){g&&this.$renderToken(v,p,g,m.slice(0,this.MAX_LINE_LENGTH-p));var w=this.dom.createElement("span");w.className="ace_inline_button ace_keyword ace_toggle_wrap",w.textContent=y?"<hide>":"<click to see more...>",v.appendChild(w)},d.prototype.$renderLine=function(v,p,g){if(!g&&g!=!1&&(g=this.session.getFoldLine(p)),g)var m=this.$getFoldLineTokens(p,g);else var m=this.session.getTokens(p);var y=v;if(m.length){var w=this.session.getRowSplitData(p);if(w&&w.length){this.$renderWrappedLine(v,m,w);var y=v.lastChild}else{var y=v;this.$useLineGroups()&&(y=this.$createLineElement(),v.appendChild(y)),this.$renderSimpleLine(y,m)}}else this.$useLineGroups()&&(y=this.$createLineElement(),v.appendChild(y));if(this.showEOL&&y){g&&(p=g.end.row);var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_eol",b.textContent=p==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,y.appendChild(b)}},d.prototype.$getFoldLineTokens=function(v,p){var g=this.session,m=[];function y(b,x,S){for(var _=0,M=0;M+b[_].value.length<x;)if(M+=b[_].value.length,_++,_==b.length)return;if(M!=x){var A=b[_].value.substring(x-M);A.length>S-x&&(A=A.substring(0,S-x)),m.push({type:b[_].type,value:A}),M=x+A.length,_+=1}for(;M<S&&_<b.length;){var A=b[_].value;A.length+M>S?m.push({type:b[_].type,value:A.substring(0,S-M)}):m.push(b[_]),M+=A.length,_+=1}}var w=g.getTokens(v);return p.walk(function(b,x,S,_,M){b!=null?m.push({type:"fold",value:b}):(M&&(w=g.getTokens(x)),w.length&&y(w,_,S))},p.end.row,this.session.getLine(p.end.row).length),m},d.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},d}();h.prototype.EOF_CHAR="¶",h.prototype.EOL_CHAR_LF="¬",h.prototype.EOL_CHAR_CRLF="¤",h.prototype.EOL_CHAR=h.prototype.EOL_CHAR_LF,h.prototype.TAB_CHAR="—",h.prototype.SPACE_CHAR="·",h.prototype.$padding=0,h.prototype.MAX_LINE_LENGTH=1e4,h.prototype.showInvisibles=!1,h.prototype.showSpaces=!1,h.prototype.showTabs=!1,h.prototype.showEOL=!1,h.prototype.displayIndentGuides=!0,h.prototype.$highlightIndentGuides=!0,h.prototype.$tabStrings=[],h.prototype.destroy={},h.prototype.onChangeTabSize=h.prototype.$computeTabString,a.implement(h.prototype,u),n.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,n,i){var a=t("../lib/dom"),o=function(){function s(l){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",l.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return s.prototype.$updateOpacity=function(l){for(var u=this.cursors,c=u.length;c--;)a.setStyle(u[c].style,"opacity",l?"":"0")},s.prototype.$startCssAnimation=function(){for(var l=this.cursors,u=l.length;u--;)l[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&a.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},s.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,a.removeCssClass(this.element,"ace_animate-blinking")},s.prototype.setPadding=function(l){this.$padding=l},s.prototype.setSession=function(l){this.session=l},s.prototype.setBlinking=function(l){l!=this.isBlinking&&(this.isBlinking=l,this.restartTimer())},s.prototype.setBlinkInterval=function(l){l!=this.blinkInterval&&(this.blinkInterval=l,this.restartTimer())},s.prototype.setSmoothBlinking=function(l){l!=this.smoothBlinking&&(this.smoothBlinking=l,a.setCssClass(this.element,"ace_smooth-blinking",l),this.$updateCursors(!0),this.restartTimer())},s.prototype.addCursor=function(){var l=a.createElement("div");return l.className="ace_cursor",this.element.appendChild(l),this.cursors.push(l),l},s.prototype.removeCursor=function(){if(this.cursors.length>1){var l=this.cursors.pop();return l.parentNode.removeChild(l),l}},s.prototype.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.restartTimer=function(){var l=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,a.removeCssClass(this.element,"ace_smooth-blinking")),l(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&a.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=(function(){this.timeoutId=setTimeout(function(){l(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){l(!0),u()},this.blinkInterval),u()}},s.prototype.getPixelPosition=function(l,u){if(!this.config||!this.session)return{left:0,top:0};l||(l=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(l),f=this.$padding+(this.session.$bidiHandler.isBidiRow(c.row,l.row)?this.session.$bidiHandler.getPosLeft(c.column):c.column*this.config.characterWidth),h=(c.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:f,top:h}},s.prototype.isCursorInView=function(l,u){return l.top>=0&&l.top<u.maxHeight},s.prototype.update=function(l){this.config=l;var u=this.session.$selectionMarkers,c=0,f=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var c=0,h=u.length;c<h;c++){var d=this.getPixelPosition(u[c].cursor,!0);if(!((d.top>l.height+l.offset||d.top<0)&&c>1)){var v=this.cursors[f++]||this.addCursor(),p=v.style;this.drawCursor?this.drawCursor(v,d,l,u[c],this.session):this.isCursorInView(d,l)?(a.setStyle(p,"display","block"),a.translate(v,d.left,d.top),a.setStyle(p,"width",Math.round(l.characterWidth)+"px"),a.setStyle(p,"height",l.lineHeight+"px")):a.setStyle(p,"display","none")}}for(;this.cursors.length>f;)this.removeCursor();var g=this.session.getOverwrite();this.$setOverwrite(g),this.$pixelPos=d,this.restartTimer()},s.prototype.$setOverwrite=function(l){l!=this.overwrite&&(this.overwrite=l,l?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},s.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},s}();o.prototype.$padding=0,o.prototype.drawCursor=null,n.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,n,i){var a=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(m[w]=y[w])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(p,g);function m(){this.constructor=p}p.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),o=t("./lib/oop"),s=t("./lib/dom"),l=t("./lib/event"),u=t("./lib/event_emitter").EventEmitter,c=32768,f=function(){function v(p,g){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+g,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)}return v.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},v}();o.implement(f.prototype,u);var h=function(v){a(p,v);function p(g,m){var y=v.call(this,g,"-v")||this;return y.scrollTop=0,y.scrollHeight=0,m.$scrollbarWidth=y.width=s.scrollbarWidth(g.ownerDocument),y.inner.style.width=y.element.style.width=(y.width||15)+5+"px",y.$minWidth=0,y}return p.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var g=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-g)/(this.coeff-g)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(g){this.element.style.height=g+"px"},p.prototype.setScrollHeight=function(g){this.scrollHeight=g,g>c?(this.coeff=c/g,g=c):this.coeff!=1&&(this.coeff=1),this.inner.style.height=g+"px"},p.prototype.setScrollTop=function(g){this.scrollTop!=g&&(this.skipEvent=!0,this.scrollTop=g,this.element.scrollTop=g*this.coeff)},p}(f);h.prototype.setInnerHeight=h.prototype.setScrollHeight;var d=function(v){a(p,v);function p(g,m){var y=v.call(this,g,"-h")||this;return y.scrollLeft=0,y.height=m.$scrollbarWidth,y.inner.style.height=y.element.style.height=(y.height||15)+5+"px",y}return p.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.setWidth=function(g){this.element.style.width=g+"px"},p.prototype.setInnerWidth=function(g){this.inner.style.width=g+"px"},p.prototype.setScrollWidth=function(g){this.inner.style.width=g+"px"},p.prototype.setScrollLeft=function(g){this.scrollLeft!=g&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=g)},p}(f);n.ScrollBar=h,n.ScrollBarV=h,n.ScrollBarH=d,n.VScrollBar=h,n.HScrollBar=d}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,n,i){var a=this&&this.__extends||function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),o=t("./lib/oop"),s=t("./lib/dom"),l=t("./lib/event"),u=t("./lib/event_emitter").EventEmitter;s.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var c=function(){function d(v,p){this.element=s.createElement("div"),this.element.className="ace_sb"+p,this.inner=s.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,v.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return d.prototype.setVisible=function(v){this.element.style.display=v?"":"none",this.isVisible=v,this.coeff=1},d}();o.implement(c.prototype,u);var f=function(d){a(v,d);function v(p,g){var m=d.call(this,p,"-v")||this;return m.scrollTop=0,m.scrollHeight=0,m.parent=p,m.width=m.VScrollWidth,m.renderer=g,m.inner.style.width=m.element.style.width=(m.width||15)+"px",m.$minWidth=0,m}return v.prototype.onMouseDown=function(p,g){if(p==="mousedown"&&!(l.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var m=this,y=g.clientY,w=function(E){y=E.clientY},b=function(){clearInterval(M)},x=g.clientY,S=this.thumbTop,_=function(){if(y!==void 0){var E=m.scrollTopFromThumbTop(S+y-x);E!==m.scrollTop&&m._emit("scroll",{data:E})}};l.capture(this.inner,w,b);var M=setInterval(_,20);return l.preventDefault(g)}var A=g.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(A)}),l.preventDefault(g)}},v.prototype.getHeight=function(){return this.height},v.prototype.scrollTopFromThumbTop=function(p){var g=p*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return g=g>>0,g<0?g=0:g>this.pageHeight-this.viewHeight&&(g=this.pageHeight-this.viewHeight),g},v.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},v.prototype.setHeight=function(p){this.height=Math.max(0,p),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},v.prototype.setScrollHeight=function(p,g){this.pageHeight===p&&!g||(this.pageHeight=p,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},v.prototype.setScrollTop=function(p){this.scrollTop=p,p<0&&(p=0),this.thumbTop=p*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},v}(c);f.prototype.setInnerHeight=f.prototype.setScrollHeight;var h=function(d){a(v,d);function v(p,g){var m=d.call(this,p,"-h")||this;return m.scrollLeft=0,m.scrollWidth=0,m.height=m.HScrollHeight,m.inner.style.height=m.element.style.height=(m.height||12)+"px",m.renderer=g,m}return v.prototype.onMouseDown=function(p,g){if(p==="mousedown"&&!(l.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var m=this,y=g.clientX,w=function(E){y=E.clientX},b=function(){clearInterval(M)},x=g.clientX,S=this.thumbLeft,_=function(){if(y!==void 0){var E=m.scrollLeftFromThumbLeft(S+y-x);E!==m.scrollLeft&&m._emit("scroll",{data:E})}};l.capture(this.inner,w,b);var M=setInterval(_,20);return l.preventDefault(g)}var A=g.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(A)}),l.preventDefault(g)}},v.prototype.getHeight=function(){return this.isVisible?this.height:0},v.prototype.scrollLeftFromThumbLeft=function(p){var g=p*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return g=g>>0,g<0?g=0:g>this.pageWidth-this.viewWidth&&(g=this.pageWidth-this.viewWidth),g},v.prototype.setWidth=function(p){this.width=Math.max(0,p),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},v.prototype.setScrollWidth=function(p,g){this.pageWidth===p&&!g||(this.pageWidth=p,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},v.prototype.setScrollLeft=function(p){this.scrollLeft=p,p<0&&(p=0),this.thumbLeft=p*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},v}(c);h.prototype.setInnerWidth=h.prototype.setScrollWidth,n.ScrollBar=f,n.ScrollBarV=f,n.ScrollBarH=h,n.VScrollBar=f,n.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,n,i){var a=t("./lib/event"),o=function(){function s(l,u){this.onRender=l,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var c=this;this._flush=function(f){c.pending=!1;var h=c.changes;if(h&&(a.blockIdle(100),c.changes=0,c.onRender(h)),c.changes){if(c.$recursionLimit--<0)return;c.schedule()}else c.$recursionLimit=2}}return s.prototype.schedule=function(l){this.changes=this.changes|l,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},s.prototype.clear=function(l){var u=this.changes;return this.changes=0,u},s}();n.RenderLoop=o}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(t,n,i){var a=t("../lib/oop"),o=t("../lib/dom"),s=t("../lib/lang"),l=t("../lib/event"),u=t("../lib/useragent"),c=t("../lib/event_emitter").EventEmitter,f=512,h=typeof ResizeObserver=="function",d=200,v=function(){function p(g){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),g.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",f),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()}return p.prototype.$setMeasureNodeStyles=function(g,m){g.width=g.height="auto",g.left=g.top="0px",g.visibility="hidden",g.position="absolute",g.whiteSpace="pre",u.isIE<8?g["font-family"]="inherit":g.font="inherit",g.overflow=m?"hidden":"visible"},p.prototype.checkForSizeChanges=function(g){if(g===void 0&&(g=this.$measureSizes()),g&&(this.$characterSize.width!==g.width||this.$characterSize.height!==g.height)){this.$measureNode.style.fontWeight="bold";var m=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=g,this.charSizes=Object.create(null),this.allowBoldFonts=m&&m.width===g.width&&m.height===g.height,this._emit("changeCharacterSize",{data:g})}},p.prototype.$addObserver=function(){var g=this;this.$observer=new window.ResizeObserver(function(m){g.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},p.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var g=this;return this.$pollSizeChangesTimer=l.onIdle(function m(){g.checkForSizeChanges(),l.onIdle(m,500)},500)},p.prototype.setPolling=function(g){g?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},p.prototype.$measureSizes=function(g){var m={height:(g||this.$measureNode).clientHeight,width:(g||this.$measureNode).clientWidth/f};return m.width===0||m.height===0?null:m},p.prototype.$measureCharWidth=function(g){this.$main.textContent=s.stringRepeat(g,f);var m=this.$main.getBoundingClientRect();return m.width/f},p.prototype.getCharacterWidth=function(g){var m=this.charSizes[g];return m===void 0&&(m=this.charSizes[g]=this.$measureCharWidth(g)/this.$characterSize.width),m},p.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},p.prototype.$getZoom=function(g){return!g||!g.parentElement?1:(Number(window.getComputedStyle(g).zoom)||1)*this.$getZoom(g.parentElement)},p.prototype.$initTransformMeasureNodes=function(){var g=function(m,y){return["div",{style:"position: absolute;top:"+m+"px;left:"+y+"px;"}]};this.els=o.buildDom([g(0,0),g(d,0),g(0,d),g(d,d)],this.el)},p.prototype.transformCoordinates=function(g,m){if(g){var y=this.$getZoom(this.el);g=S(1/y,g)}function w(R,B,j){var G=R[1]*B[0]-R[0]*B[1];return[(-B[1]*j[0]+B[0]*j[1])/G,(+R[1]*j[0]-R[0]*j[1])/G]}function b(R,B){return[R[0]-B[0],R[1]-B[1]]}function x(R,B){return[R[0]+B[0],R[1]+B[1]]}function S(R,B){return[R*B[0],R*B[1]]}this.els||this.$initTransformMeasureNodes();function _(R){var B=R.getBoundingClientRect();return[B.left,B.top]}var M=_(this.els[0]),A=_(this.els[1]),E=_(this.els[2]),T=_(this.els[3]),C=w(b(T,A),b(T,E),b(x(A,E),x(T,M))),k=S(1+C[0],b(A,M)),L=S(1+C[1],b(E,M));if(m){var I=m,O=C[0]*I[0]/d+C[1]*I[1]/d+1,N=x(S(I[0],k),S(I[1],L));return x(S(1/O/d,N),M)}var D=b(g,M),$=w(b(k,S(C[0],D)),b(L,S(C[1],D)),D);return S(d,$)},p}();v.prototype.$characterSize={width:0,height:0},a.implement(v.prototype,c),n.FontMetrics=v}),ace.define("ace/css/editor-css",["require","exports","module"],function(t,n,i){i.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "↩";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var a=t("../lib/dom"),o=t("../lib/oop"),s=t("../lib/event_emitter").EventEmitter,l=function(){function u(c,f){this.canvas=a.createElement("canvas"),this.renderer=f,this.pixelRatio=1,this.maxHeight=f.layerConfig.maxHeight,this.lineHeight=f.layerConfig.lineHeight,this.canvasHeight=c.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=c.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},c.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(c){var f=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(c){this.maxHeight=c.maxHeight,this.lineHeight=c.lineHeight,this.canvasHeight=c.height;var h=(c.lastRow+1)*this.lineHeight;h<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var d=this.canvas.getContext("2d");function v(T,C){return T.priority<C.priority?-1:T.priority>C.priority?1:0}var p=this.renderer.session.$annotations;if(d.clearRect(0,0,this.canvas.width,this.canvas.height),p){var g={info:1,warning:2,error:3};p.forEach(function(T){T.priority=g[T.type]||null}),p=p.sort(v);for(var m=this.renderer.session.$foldData,y=0;y<p.length;y++){var w=p[y].row,b=this.compensateFoldRows(w,m),x=Math.round((w-b)*this.lineHeight*this.heightRatio),S=Math.round((w-b)*this.lineHeight*this.heightRatio),_=Math.round(((w-b)*this.lineHeight+this.lineHeight)*this.heightRatio),M=_-S;if(M<this.minDecorationHeight){var A=(S+_)/2|0;A<this.halfMinDecorationHeight?A=this.halfMinDecorationHeight:A+this.halfMinDecorationHeight>this.canvasHeight&&(A=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(A-this.halfMinDecorationHeight),_=Math.round(A+this.halfMinDecorationHeight)}d.fillStyle=f[p[y].type]||null,d.fillRect(0,x,this.canvasWidth,_-S)}}var E=this.renderer.session.selection.getCursor();if(E){var b=this.compensateFoldRows(E.row,m),x=Math.round((E.row-b)*this.lineHeight*this.heightRatio);d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(0,x,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(c,f){var h=0;if(f&&f.length>0)for(var d=0;d<f.length;d++)c>f[d].start.row&&c<f[d].end.row?h+=c-f[d].start.row:c>=f[d].end.row&&(h+=f[d].end.row-f[d].start.row);return h},u}();o.implement(l.prototype,s),n.Decorator=l}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(t,n,i){var a=t("./lib/oop"),o=t("./lib/dom"),s=t("./lib/lang"),l=t("./config"),u=t("./layer/gutter").Gutter,c=t("./layer/marker").Marker,f=t("./layer/text").Text,h=t("./layer/cursor").Cursor,d=t("./scrollbar").HScrollBar,v=t("./scrollbar").VScrollBar,p=t("./scrollbar_custom").HScrollBar,g=t("./scrollbar_custom").VScrollBar,m=t("./renderloop").RenderLoop,y=t("./layer/font_metrics").FontMetrics,w=t("./lib/event_emitter").EventEmitter,b=t("./css/editor-css"),x=t("./layer/decorators").Decorator,S=t("./lib/useragent"),_=t("./layer/text_util").isTextToken;o.importCssString(b,"ace_editor.css",!1);var M=function(){function A(E,T){var C=this;this.container=E||o.createElement("div"),o.addCssClass(this.container,"ace_editor"),o.HI_DPI&&o.addCssClass(this.container,"ace_hidpi"),this.setTheme(T),l.get("useStrictCSP")==null&&l.set("useStrictCSP",!1),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new c(this.content);var k=this.$textLayer=new f(this.content);this.canvas=k.element,this.$markerFront=new c(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new v(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.on("scroll",function(L){C.$scrollAnimation||C.session.setScrollTop(L.data-C.scrollMargin.top)}),this.scrollBarH.on("scroll",function(L){C.$scrollAnimation||C.session.setScrollLeft(L.data-C.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new y(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(L){C.updateCharacterSize(),C.onResize(!0,C.gutterWidth,C.$size.width,C.$size.height),C._signal("changeCharacterSize",L)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new m(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),l.resetOptions(this),l._signal("renderer",this)}return A.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),o.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},A.prototype.setSession=function(E){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=E,E&&this.scrollMargin.top&&E.getScrollTop()<=0&&E.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(E),this.$markerBack.setSession(E),this.$markerFront.setSession(E),this.$gutterLayer.setSession(E),this.$textLayer.setSession(E),E&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},A.prototype.updateLines=function(E,T,C){if(T===void 0&&(T=1/0),this.$changedLines?(this.$changedLines.firstRow>E&&(this.$changedLines.firstRow=E),this.$changedLines.lastRow<T&&(this.$changedLines.lastRow=T)):this.$changedLines={firstRow:E,lastRow:T},this.$changedLines.lastRow<this.layerConfig.firstRow)if(C)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},A.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},A.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},A.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},A.prototype.updateFull=function(E){E?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},A.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},A.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},A.prototype.onResize=function(E,T,C,k){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=E?1:0;var L=this.container;k||(k=L.clientHeight||L.scrollHeight),!k&&this.$maxLines&&this.lineHeight>1&&(!L.style.height||L.style.height=="0px")&&(L.style.height="1px",k=L.clientHeight||L.scrollHeight),C||(C=L.clientWidth||L.scrollWidth);var I=this.$updateCachedSize(E,T,C,k);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!C&&!k)return this.resizing=0;E&&(this.$gutterLayer.$padding=null),E?this.$renderChanges(I|this.$changes,!0):this.$loop.schedule(I|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},A.prototype.$updateCachedSize=function(E,T,C,k){k-=this.$extraHeight||0;var L=0,I=this.$size,O={width:I.width,height:I.height,scrollerHeight:I.scrollerHeight,scrollerWidth:I.scrollerWidth};if(k&&(E||I.height!=k)&&(I.height=k,L|=this.CHANGE_SIZE,I.scrollerHeight=I.height,this.$horizScroll&&(I.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(I.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",L=L|this.CHANGE_SCROLL),C&&(E||I.width!=C)){L|=this.CHANGE_SIZE,I.width=C,T==null&&(T=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=T,o.setStyle(this.scrollBarH.element.style,"left",T+"px"),o.setStyle(this.scroller.style,"left",T+this.margin.left+"px"),I.scrollerWidth=Math.max(0,C-T-this.scrollBarV.getWidth()-this.margin.h),o.setStyle(this.$gutter.style,"left",this.margin.left+"px");var N=this.scrollBarV.getWidth()+"px";o.setStyle(this.scrollBarH.element.style,"right",N),o.setStyle(this.scroller.style,"right",N),o.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(I.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||E)&&(L|=this.CHANGE_FULL)}return I.$dirty=!C||!k,L&&this._signal("resize",O),L},A.prototype.onGutterResize=function(E){var T=this.$showGutter?E:0;T!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,T,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},A.prototype.adjustWrapLimit=function(){var E=this.$size.scrollerWidth-this.$padding*2,T=Math.floor(E/this.characterWidth);return this.session.adjustWrapLimit(T,this.$showPrintMargin&&this.$printMarginColumn)},A.prototype.setAnimatedScroll=function(E){this.setOption("animatedScroll",E)},A.prototype.getAnimatedScroll=function(){return this.$animatedScroll},A.prototype.setShowInvisibles=function(E){this.setOption("showInvisibles",E),this.session.$bidiHandler.setShowInvisibles(E)},A.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},A.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},A.prototype.setDisplayIndentGuides=function(E){this.setOption("displayIndentGuides",E)},A.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},A.prototype.setHighlightIndentGuides=function(E){this.setOption("highlightIndentGuides",E)},A.prototype.setShowPrintMargin=function(E){this.setOption("showPrintMargin",E)},A.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},A.prototype.setPrintMarginColumn=function(E){this.setOption("printMarginColumn",E)},A.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},A.prototype.getShowGutter=function(){return this.getOption("showGutter")},A.prototype.setShowGutter=function(E){return this.setOption("showGutter",E)},A.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},A.prototype.setFadeFoldWidgets=function(E){this.setOption("fadeFoldWidgets",E)},A.prototype.setHighlightGutterLine=function(E){this.setOption("highlightGutterLine",E)},A.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},A.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var E=o.createElement("div");E.className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",E.appendChild(this.$printMarginEl),this.content.insertBefore(E,this.content.firstChild)}var T=this.$printMarginEl.style;T.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",T.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},A.prototype.getContainerElement=function(){return this.container},A.prototype.getMouseEventTarget=function(){return this.scroller},A.prototype.getTextAreaContainer=function(){return this.container},A.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var E=this.textarea.style,T=this.$composition;if(!this.$keepTextAreaAtCursor&&!T){o.translate(this.textarea,-100,0);return}var C=this.$cursorLayer.$pixelPos;if(C){T&&T.markerRange&&(C=this.$cursorLayer.getPixelPosition(T.markerRange.start,!0));var k=this.layerConfig,L=C.top,I=C.left;L-=k.offset;var O=T&&T.useTextareaForIME||S.isMobile?this.lineHeight:1;if(L<0||L>k.height-O){o.translate(this.textarea,0,0);return}var N=1,D=this.$size.height-O;if(!T)L+=this.lineHeight;else if(T.useTextareaForIME){var $=this.textarea.value;N=this.characterWidth*this.session.$getStringScreenWidth($)[0]}else L+=this.lineHeight+2;I-=this.scrollLeft,I>this.$size.scrollerWidth-N&&(I=this.$size.scrollerWidth-N),I+=this.gutterWidth+this.margin.left,o.setStyle(E,"height",O+"px"),o.setStyle(E,"width",N+"px"),o.translate(this.textarea,Math.min(I,this.$size.scrollerWidth-N),Math.min(L,D))}}},A.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},A.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},A.prototype.getLastFullyVisibleRow=function(){var E=this.layerConfig,T=E.lastRow,C=this.session.documentToScreenRow(T,0)*E.lineHeight;return C-this.session.getScrollTop()>E.height-E.lineHeight?T-1:T},A.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},A.prototype.setPadding=function(E){this.$padding=E,this.$textLayer.setPadding(E),this.$cursorLayer.setPadding(E),this.$markerFront.setPadding(E),this.$markerBack.setPadding(E),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},A.prototype.setScrollMargin=function(E,T,C,k){var L=this.scrollMargin;L.top=E|0,L.bottom=T|0,L.right=k|0,L.left=C|0,L.v=L.top+L.bottom,L.h=L.left+L.right,L.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-L.top),this.updateFull()},A.prototype.setMargin=function(E,T,C,k){var L=this.margin;L.top=E|0,L.bottom=T|0,L.right=k|0,L.left=C|0,L.v=L.top+L.bottom,L.h=L.left+L.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},A.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},A.prototype.setHScrollBarAlwaysVisible=function(E){this.setOption("hScrollBarAlwaysVisible",E)},A.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},A.prototype.setVScrollBarAlwaysVisible=function(E){this.setOption("vScrollBarAlwaysVisible",E)},A.prototype.$updateScrollBarV=function(){var E=this.layerConfig.maxHeight,T=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(E-=(T-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>E-T&&(E=this.scrollTop+T,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(E+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},A.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},A.prototype.freeze=function(){this.$frozen=!0},A.prototype.unfreeze=function(){this.$frozen=!1},A.prototype.$renderChanges=function(E,T){if(this.$changes&&(E|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!E&&!T){this.$changes|=E;return}if(this.$size.$dirty)return this.$changes|=E,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",E),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var C=this.layerConfig;if(E&this.CHANGE_FULL||E&this.CHANGE_SIZE||E&this.CHANGE_TEXT||E&this.CHANGE_LINES||E&this.CHANGE_SCROLL||E&this.CHANGE_H_SCROLL){if(E|=this.$computeLayerConfig()|this.$loop.clear(),C.firstRow!=this.layerConfig.firstRow&&C.firstRowScreen==this.layerConfig.firstRowScreen){var k=this.scrollTop+(C.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;k>0&&(this.scrollTop=k,E=E|this.CHANGE_SCROLL,E|=this.$computeLayerConfig()|this.$loop.clear())}C=this.layerConfig,this.$updateScrollBarV(),E&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),o.translate(this.content,-this.scrollLeft,-C.offset);var L=C.width+2*this.$padding+"px",I=C.minHeight+"px";o.setStyle(this.content.style,"width",L),o.setStyle(this.content.style,"height",I)}if(E&this.CHANGE_H_SCROLL&&(o.translate(this.content,-this.scrollLeft,-C.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),E&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",E);return}if(E&this.CHANGE_SCROLL){this.$changedLines=null,E&this.CHANGE_TEXT||E&this.CHANGE_LINES?this.$textLayer.update(C):this.$textLayer.scrollLines(C),this.$showGutter&&(E&this.CHANGE_GUTTER||E&this.CHANGE_LINES?this.$gutterLayer.update(C):this.$gutterLayer.scrollLines(C)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",E);return}E&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):E&this.CHANGE_LINES?((this.$updateLines()||E&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):E&this.CHANGE_TEXT||E&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):E&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)),E&this.CHANGE_CURSOR&&(this.$cursorLayer.update(C),this.$moveTextAreaToCursor()),E&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(C),E&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(C),this._signal("afterRender",E)},A.prototype.$autosize=function(){var E=this.session.getScreenLength()*this.lineHeight,T=this.$maxLines*this.lineHeight,C=Math.min(T,Math.max((this.$minLines||1)*this.lineHeight,E))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(C+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&C>this.$maxPixelHeight&&(C=this.$maxPixelHeight);var k=C<=2*this.lineHeight,L=!k&&E>T;if(C!=this.desiredHeight||this.$size.height!=this.desiredHeight||L!=this.$vScroll){L!=this.$vScroll&&(this.$vScroll=L,this.scrollBarV.setVisible(L));var I=this.container.clientWidth;this.container.style.height=C+"px",this.$updateCachedSize(!0,this.$gutterWidth,I,C),this.desiredHeight=C,this._signal("autosize")}},A.prototype.$computeLayerConfig=function(){var E=this.session,T=this.$size,C=T.height<=2*this.lineHeight,k=this.session.getScreenLength(),L=k*this.lineHeight,I=this.$getLongestLine(),O=!C&&(this.$hScrollBarAlwaysVisible||T.scrollerWidth-I-2*this.$padding<0),N=this.$horizScroll!==O;N&&(this.$horizScroll=O,this.scrollBarH.setVisible(O));var D=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var $=T.scrollerHeight+this.lineHeight,R=!this.$maxLines&&this.$scrollPastEnd?(T.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;L+=R;var B=this.scrollMargin;this.session.setScrollTop(Math.max(-B.top,Math.min(this.scrollTop,L-T.scrollerHeight+B.bottom))),this.session.setScrollLeft(Math.max(-B.left,Math.min(this.scrollLeft,I+2*this.$padding-T.scrollerWidth+B.right)));var j=!C&&(this.$vScrollBarAlwaysVisible||T.scrollerHeight-L+R<0||this.scrollTop>B.top),G=D!==j;G&&(this.$vScroll=j,this.scrollBarV.setVisible(j));var z=this.scrollTop%this.lineHeight,W=Math.ceil($/this.lineHeight)-1,Q=Math.max(0,Math.round((this.scrollTop-z)/this.lineHeight)),ie=Q+W,se,ae,pe=this.lineHeight;Q=E.screenToDocumentRow(Q,0);var De=E.getFoldLine(Q);De&&(Q=De.start.row),se=E.documentToScreenRow(Q,0),ae=E.getRowLength(Q)*pe,ie=Math.min(E.screenToDocumentRow(ie,0),E.getLength()-1),$=T.scrollerHeight+E.getRowLength(ie)*pe+ae,z=this.scrollTop-se*pe;var Je=0;return(this.layerConfig.width!=I||N)&&(Je=this.CHANGE_H_SCROLL),(N||G)&&(Je|=this.$updateCachedSize(!0,this.gutterWidth,T.width,T.height),this._signal("scrollbarVisibilityChanged"),G&&(I=this.$getLongestLine())),this.layerConfig={width:I,padding:this.$padding,firstRow:Q,firstRowScreen:se,lastRow:ie,lineHeight:pe,characterWidth:this.characterWidth,minHeight:$,maxHeight:L,offset:z,gutterOffset:pe?Math.max(0,Math.ceil((z+T.height-T.scrollerHeight)/pe)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(I-this.$padding),Je},A.prototype.$updateLines=function(){if(this.$changedLines){var E=this.$changedLines.firstRow,T=this.$changedLines.lastRow;this.$changedLines=null;var C=this.layerConfig;if(!(E>C.lastRow+1)&&!(T<C.firstRow)){if(T===1/0){this.$showGutter&&this.$gutterLayer.update(C),this.$textLayer.update(C);return}return this.$textLayer.updateLines(C,E,T),!0}}},A.prototype.$getLongestLine=function(){var E=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(E+=1),this.$textLayer&&E>this.$textLayer.MAX_LINE_LENGTH&&(E=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(E*this.characterWidth))},A.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},A.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},A.prototype.addGutterDecoration=function(E,T){this.$gutterLayer.addGutterDecoration(E,T)},A.prototype.removeGutterDecoration=function(E,T){this.$gutterLayer.removeGutterDecoration(E,T)},A.prototype.updateBreakpoints=function(E){this._rows=E,this.$loop.schedule(this.CHANGE_GUTTER)},A.prototype.setAnnotations=function(E){this.$gutterLayer.setAnnotations(E),this.$loop.schedule(this.CHANGE_GUTTER)},A.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},A.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},A.prototype.showCursor=function(){this.$cursorLayer.showCursor()},A.prototype.scrollSelectionIntoView=function(E,T,C){this.scrollCursorIntoView(E,C),this.scrollCursorIntoView(T,C)},A.prototype.scrollCursorIntoView=function(E,T,C){if(this.$size.scrollerHeight!==0){var k=this.$cursorLayer.getPixelPosition(E),L=k.left,I=k.top,O=C&&C.top||0,N=C&&C.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var D=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;D+O>I?(T&&D+O>I+this.lineHeight&&(I-=T*this.$size.scrollerHeight),I===0&&(I=-this.scrollMargin.top),this.session.setScrollTop(I)):D+this.$size.scrollerHeight-N<I+this.lineHeight&&(T&&D+this.$size.scrollerHeight-N<I-this.lineHeight&&(I+=T*this.$size.scrollerHeight),this.session.setScrollTop(I+this.lineHeight+N-this.$size.scrollerHeight));var $=this.scrollLeft,R=2*this.layerConfig.characterWidth;L-R<$?(L-=R,L<this.$padding+R&&(L=-this.scrollMargin.left),this.session.setScrollLeft(L)):(L+=R,$+this.$size.scrollerWidth<L+this.characterWidth?this.session.setScrollLeft(Math.round(L+this.characterWidth-this.$size.scrollerWidth)):$<=this.$padding&&L-$<this.characterWidth&&this.session.setScrollLeft(0))}},A.prototype.getScrollTop=function(){return this.session.getScrollTop()},A.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},A.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},A.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},A.prototype.scrollToRow=function(E){this.session.setScrollTop(E*this.lineHeight)},A.prototype.alignCursor=function(E,T){typeof E=="number"&&(E={row:E,column:0});var C=this.$cursorLayer.getPixelPosition(E),k=this.$size.scrollerHeight-this.lineHeight,L=C.top-k*(T||0);return this.session.setScrollTop(L),L},A.prototype.$calcSteps=function(E,T){var C=0,k=this.STEPS,L=[],I=function(O,N,D){return D*(Math.pow(O-1,3)+1)+N};for(C=0;C<k;++C)L.push(I(C/this.STEPS,E,T-E));return L},A.prototype.scrollToLine=function(E,T,C,k){var L=this.$cursorLayer.getPixelPosition({row:E,column:0}),I=L.top;T&&(I-=this.$size.scrollerHeight/2);var O=this.scrollTop;this.session.setScrollTop(I),C!==!1&&this.animateScrolling(O,k)},A.prototype.animateScrolling=function(E,T){var C=this.scrollTop;if(!this.$animatedScroll)return;var k=this;if(E==C)return;if(this.$scrollAnimation){var L=this.$scrollAnimation.steps;if(L.length&&(E=L[0],E==C))return}var I=k.$calcSteps(E,C);this.$scrollAnimation={from:E,to:C,steps:I},clearInterval(this.$timer),k.session.setScrollTop(I.shift()),k.session.$scrollTop=C;function O(){k.$timer=clearInterval(k.$timer),k.$scrollAnimation=null,k.$stopAnimation=!1,T&&T()}this.$timer=setInterval(function(){if(k.$stopAnimation){O();return}if(!k.session)return clearInterval(k.$timer);I.length?(k.session.setScrollTop(I.shift()),k.session.$scrollTop=C):C!=null?(k.session.$scrollTop=-1,k.session.setScrollTop(C),C=null):O()},10)},A.prototype.scrollToY=function(E){this.scrollTop!==E&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=E)},A.prototype.scrollToX=function(E){this.scrollLeft!==E&&(this.scrollLeft=E),this.$loop.schedule(this.CHANGE_H_SCROLL)},A.prototype.scrollTo=function(E,T){this.session.setScrollTop(T),this.session.setScrollLeft(E)},A.prototype.scrollBy=function(E,T){T&&this.session.setScrollTop(this.session.getScrollTop()+T),E&&this.session.setScrollLeft(this.session.getScrollLeft()+E)},A.prototype.isScrollableBy=function(E,T){if(T<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||T>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||E<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||E>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},A.prototype.pixelToScreenCoordinates=function(E,T){var C;if(this.$hasCssTransforms){C={top:0,left:0};var k=this.$fontMetrics.transformCoordinates([E,T]);E=k[1]-this.gutterWidth-this.margin.left,T=k[0]}else C=this.scroller.getBoundingClientRect();var L=E+this.scrollLeft-C.left-this.$padding,I=L/this.characterWidth,O=Math.floor((T+this.scrollTop-C.top)/this.lineHeight),N=this.$blockCursor?Math.floor(I):Math.round(I);return{row:O,column:N,side:I-N>0?1:-1,offsetX:L}},A.prototype.screenToTextCoordinates=function(E,T){var C;if(this.$hasCssTransforms){C={top:0,left:0};var k=this.$fontMetrics.transformCoordinates([E,T]);E=k[1]-this.gutterWidth-this.margin.left,T=k[0]}else C=this.scroller.getBoundingClientRect();var L=E+this.scrollLeft-C.left-this.$padding,I=L/this.characterWidth,O=this.$blockCursor?Math.floor(I):Math.round(I),N=Math.floor((T+this.scrollTop-C.top)/this.lineHeight);return this.session.screenToDocumentPosition(N,Math.max(O,0),L)},A.prototype.textToScreenCoordinates=function(E,T){var C=this.scroller.getBoundingClientRect(),k=this.session.documentToScreenPosition(E,T),L=this.$padding+(this.session.$bidiHandler.isBidiRow(k.row,E)?this.session.$bidiHandler.getPosLeft(k.column):Math.round(k.column*this.characterWidth)),I=k.row*this.lineHeight;return{pageX:C.left+L-this.scrollLeft,pageY:C.top+I-this.scrollTop}},A.prototype.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},A.prototype.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},A.prototype.showComposition=function(E){this.$composition=E,E.cssText||(E.cssText=this.textarea.style.cssText),E.useTextareaForIME==null&&(E.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):E.markerId=this.session.addMarker(E.markerRange,"ace_composition_marker","text")},A.prototype.setCompositionText=function(E){var T=this.session.selection.cursor;this.addToken(E,"composition_placeholder",T.row,T.column),this.$moveTextAreaToCursor()},A.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),o.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var E=this.session.selection.cursor;this.removeExtraToken(E.row,E.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},A.prototype.setGhostText=function(E,T){var C=this.session.selection.cursor,k=T||{row:C.row,column:C.column};this.removeGhostText();var L=this.$calculateWrappedTextChunks(E,k);this.addToken(L[0].text,"ghost_text",k.row,k.column),this.$ghostText={text:E,position:{row:k.row,column:k.column}};var I=o.createElement("div");if(L.length>1){var O=this.hideTokensAfterPosition(k.row,k.column),N;L.slice(1).forEach(function(G){var z=o.createElement("div"),W=o.createElement("span");W.className="ace_ghost_text",G.wrapped&&(z.className="ghost_text_line_wrapped"),G.text.length===0&&(G.text=" "),W.appendChild(o.createTextNode(G.text)),z.appendChild(W),I.appendChild(z),N=z}),O.forEach(function(G){var z=o.createElement("span");_(G.type)||(z.className="ace_"+G.type.replace(/\./g," ace_")),z.appendChild(o.createTextNode(G.value)),N.appendChild(z)}),this.$ghostTextWidget={el:I,row:k.row,column:k.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var D=this.$cursorLayer.getPixelPosition(k,!0),$=this.container,R=$.getBoundingClientRect().height,B=L.length*this.lineHeight,j=B<R-D.top;if(j)return;B<R?this.scrollBy(0,(L.length-1)*this.lineHeight):this.scrollToRow(k.row)}},A.prototype.$calculateWrappedTextChunks=function(E,T){var C=this.$size.scrollerWidth-this.$padding*2,k=Math.floor(C/this.characterWidth)-2;k=k<=0?60:k;for(var L=E.split(/\r?\n/),I=[],O=0;O<L.length;O++){var N=this.session.$getDisplayTokens(L[O],T.column),D=this.session.$computeWrapSplits(N,k,this.session.$tabSize);if(D.length>0){var $=0;D.push(L[O].length);for(var R=0;R<D.length;R++){var B=L[O].slice($,D[R]);I.push({text:B,wrapped:!0}),$=D[R]}}else I.push({text:L[O],wrapped:!1})}return I},A.prototype.removeGhostText=function(){if(this.$ghostText){var E=this.$ghostText.position;this.removeExtraToken(E.row,E.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},A.prototype.addToken=function(E,T,C,k){var L=this.session;L.bgTokenizer.lines[C]=null;var I={type:T,value:E},O=L.getTokens(C);if(k==null||!O.length)O.push(I);else for(var N=0,D=0;D<O.length;D++){var $=O[D];if(N+=$.value.length,k<=N){var R=$.value.length-(N-k),B=$.value.slice(0,R),j=$.value.slice(R);O.splice(D,1,{type:$.type,value:B},I,{type:$.type,value:j});break}}this.updateLines(C,C)},A.prototype.hideTokensAfterPosition=function(E,T){for(var C=this.session.getTokens(E),k=0,L=!1,I=[],O=0;O<C.length;O++){var N=C[O];if(k+=N.value.length,N.type!=="ghost_text"){if(L){I.push({type:N.type,value:N.value}),N.type="hidden_token";continue}k===T&&(L=!0)}}return this.updateLines(E,E),I},A.prototype.removeExtraToken=function(E,T){this.session.bgTokenizer.lines[E]=null,this.updateLines(E,E)},A.prototype.setTheme=function(E,T){var C=this;if(this.$themeId=E,C._dispatchEvent("themeChange",{theme:E}),!E||typeof E=="string"){var k=E||this.$options.theme.initialValue;l.loadModule(["theme",k],L)}else L(E);function L(I){if(C.$themeId!=E)return T&&T();if(!I||!I.cssClass)throw new Error("couldn't load module "+E+" or it didn't call define");I.$id&&(C.$themeId=I.$id),o.importCssString(I.cssText,I.cssClass,C.container),C.theme&&o.removeCssClass(C.container,C.theme.cssClass);var O="padding"in I?I.padding:"padding"in(C.theme||{})?4:C.$padding;C.$padding&&O!=C.$padding&&C.setPadding(O),C.$theme=I.cssClass,C.theme=I,o.addCssClass(C.container,I.cssClass),o.setCssClass(C.container,"ace_dark",I.isDark),C.$size&&(C.$size.width=0,C.$updateSizeAsync()),C._dispatchEvent("themeLoaded",{theme:I}),T&&T(),S.isSafari&&C.scroller&&(C.scroller.style.background="red",C.scroller.style.background="")}},A.prototype.getTheme=function(){return this.$themeId},A.prototype.setStyle=function(E,T){o.setCssClass(this.container,E,T!==!1)},A.prototype.unsetStyle=function(E){o.removeCssClass(this.container,E)},A.prototype.setCursorStyle=function(E){o.setStyle(this.scroller.style,"cursor",E)},A.prototype.setMouseCursor=function(E){o.setStyle(this.scroller.style,"cursor",E)},A.prototype.attachToShadowRoot=function(){o.importCssString(b,"ace_editor.css",this.container)},A.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},A.prototype.$updateCustomScrollbar=function(E){var T=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,E===!0?(this.scrollBarV=new g(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(C){T.$scrollAnimation||T.session.setScrollTop(C.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){T.$scrollAnimation||T.session.setScrollLeft(C.data-T.scrollMargin.left)}),this.$scrollDecorator=new x(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new v(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.addEventListener("scroll",function(C){T.$scrollAnimation||T.session.setScrollTop(C.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){T.$scrollAnimation||T.session.setScrollLeft(C.data-T.scrollMargin.left)}))},A.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var E=this;this.$resizeTimer=s.delayedCall(function(){E.destroyed||E.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(T){var C=T[0].contentRect.width,k=T[0].contentRect.height;Math.abs(E.$size.width-C)>1||Math.abs(E.$size.height-k)>1?E.$resizeTimer.delay():E.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},A}();M.prototype.CHANGE_CURSOR=1,M.prototype.CHANGE_MARKER=2,M.prototype.CHANGE_GUTTER=4,M.prototype.CHANGE_SCROLL=8,M.prototype.CHANGE_LINES=16,M.prototype.CHANGE_TEXT=32,M.prototype.CHANGE_SIZE=64,M.prototype.CHANGE_MARKER_BACK=128,M.prototype.CHANGE_MARKER_FRONT=256,M.prototype.CHANGE_FULL=512,M.prototype.CHANGE_H_SCROLL=1024,M.prototype.$changes=0,M.prototype.$padding=null,M.prototype.$frozen=!1,M.prototype.STEPS=8,a.implement(M.prototype,w),l.defineOptions(M.prototype,"renderer",{useResizeObserver:{set:function(A){!A&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):A&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(A){this.$textLayer.setShowInvisibles(A)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(A){typeof A=="number"&&(this.$printMarginColumn=A),this.$showPrintMargin=!!A,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(A){this.$gutter.style.display=A?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(A){this.$gutterLayer.$useSvgGutterIcons=A},initialValue:!1},showFoldedAnnotations:{set:function(A){this.$gutterLayer.$showFoldedAnnotations=A},initialValue:!1},fadeFoldWidgets:{set:function(A){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",A)},initialValue:!1},showFoldWidgets:{set:function(A){this.$gutterLayer.setShowFoldWidgets(A),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(A){this.$textLayer.setDisplayIndentGuides(A)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(A){this.$textLayer.setHighlightIndentGuides(A)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(A){this.$gutterLayer.setHighlightGutterLine(A),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(A){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(A){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(A){typeof A=="number"&&(A=A+"px"),this.container.style.fontSize=A,this.updateFontSize()},initialValue:12},fontFamily:{set:function(A){this.container.style.fontFamily=A,this.updateFontSize()}},maxLines:{set:function(A){this.updateFull()}},minLines:{set:function(A){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(A){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(A){A=+A||0,this.$scrollPastEnd!=A&&(this.$scrollPastEnd=A,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(A){this.$gutterLayer.$fixedWidth=!!A,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(A){this.$updateCustomScrollbar(A)},initialValue:!1},theme:{set:function(A){this.setTheme(A)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),n.VirtualRenderer=M}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,n,i){var a=t("../lib/oop"),o=t("../lib/net"),s=t("../lib/event_emitter").EventEmitter,l=t("../config");function u(d){var v="importScripts('"+o.qualifyURL(d)+"');";try{return new Blob([v],{type:"application/javascript"})}catch{var p=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,g=new p;return g.append(v),g.getBlob("application/javascript")}}function c(d){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(l.get("loadWorkerFromBlob")){var v=u(d),p=window.URL||window.webkitURL,g=p.createObjectURL(v);return new Worker(g)}return new Worker(d)}var f=function(d){d.postMessage||(d=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=d,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,s),this.$createWorkerFromOldConfig=function(d,v,p,g,m){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),l.get("packaged")||!t.toUrl)g=g||l.moduleUrl(v,"worker");else{var y=this.$normalizePath;g=g||y(t.toUrl("ace/worker/worker.js",null,"_"));var w={};d.forEach(function(b){w[b]=y(t.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=c(g),m&&this.send("importScripts",m),this.$worker.postMessage({init:!0,tlns:w,module:v,classname:p}),this.$worker},this.onMessage=function(d){var v=d.data;switch(v.type){case"event":this._signal(v.name,{data:v.data});break;case"call":var p=this.callbacks[v.id];p&&(p(v.data),delete this.callbacks[v.id]);break;case"error":this.reportError(v.data);break;case"log":window.console&&console.log&&console.log.apply(console,v.data);break}},this.reportError=function(d){window.console&&console.error&&console.error(d)},this.$normalizePath=function(d){return o.qualifyURL(d)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(d){d.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(d,v){this.$worker.postMessage({command:d,args:v})},this.call=function(d,v,p){if(p){var g=this.callbackId++;this.callbacks[g]=p,v.push(g)}this.send(d,v)},this.emit=function(d,v){try{v.data&&v.data.err&&(v.data.err={message:v.data.err.message,stack:v.data.err.stack,code:v.data.err.code}),this.$worker&&this.$worker.postMessage({event:d,data:{data:v.data}})}catch(p){console.error(p.stack)}},this.attachToDocument=function(d){this.$doc&&this.terminate(),this.$doc=d,this.call("setValue",[d.getValue()]),d.on("change",this.changeListener,!0)},this.changeListener=function(d){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),d.action=="insert"?this.deltaQueue.push(d.start,d.lines):this.deltaQueue.push(d.start,d.end)},this.$sendDeltaQueue=function(){var d=this.deltaQueue;d&&(this.deltaQueue=null,d.length>50&&d.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:d}))}}).call(f.prototype);var h=function(d,v,p){var g=null,m=!1,y=Object.create(s),w=[],b=new f({messageBuffer:w,terminate:function(){},postMessage:function(S){w.push(S),g&&(m?setTimeout(x):x())}});b.setEmitSync=function(S){m=S};var x=function(){var S=w.shift();S.command?g[S.command].apply(g,S.args):S.event&&y._signal(S.event,S.data)};return y.postMessage=function(S){b.onMessage({data:S})},y.callback=function(S,_){this.postMessage({type:"call",id:_,data:S})},y.emit=function(S,_){this.postMessage({type:"event",name:S,data:_})},l.loadModule(["worker",v],function(S){for(g=new S[p](y);w.length;)x()}),b};n.UIWorkerClient=h,n.WorkerClient=f,n.createWorker=c}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,n,i){var a=t("./range").Range,o=t("./lib/event_emitter").EventEmitter,s=t("./lib/oop"),l=function(){function u(c,f,h,d,v,p){var g=this;this.length=f,this.session=c,this.doc=c.getDocument(),this.mainClass=v,this.othersClass=p,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=h;var m=c.getUndoManager().$undoStack||c.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=m.length,this.setup(),c.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var c=this,f=this.doc,h=this.session;this.selectionBefore=h.selection.toJSON(),h.selection.inMultiSelectMode&&h.selection.toSingleRange(),this.pos=f.createAnchor(this.$pos.row,this.$pos.column);var d=this.pos;d.$insertRight=!0,d.detach(),d.markerId=h.addMarker(new a(d.row,d.column,d.row,d.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(v){var p=f.createAnchor(v.row,v.column);p.$insertRight=!0,p.detach(),c.others.push(p)}),h.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var c=this.session,f=this;this.othersActive=!0,this.others.forEach(function(h){h.markerId=c.addMarker(new a(h.row,h.column,h.row,h.column+f.length),f.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var c=0;c<this.others.length;c++)this.session.removeMarker(this.others[c].markerId)}},u.prototype.onUpdate=function(c){if(this.$updating)return this.updateAnchors(c);var f=c;if(f.start.row===f.end.row&&f.start.row===this.pos.row){this.$updating=!0;var h=c.action==="insert"?f.end.column-f.start.column:f.start.column-f.end.column,d=f.start.column>=this.pos.column&&f.start.column<=this.pos.column+this.length+1,v=f.start.column-this.pos.column;if(this.updateAnchors(c),d&&(this.length+=h),d&&!this.session.$fromUndo){if(c.action==="insert")for(var p=this.others.length-1;p>=0;p--){var g=this.others[p],m={row:g.row,column:g.column+v};this.doc.insertMergedLines(m,c.lines)}else if(c.action==="remove")for(var p=this.others.length-1;p>=0;p--){var g=this.others[p],m={row:g.row,column:g.column+v};this.doc.remove(new a(m.row,m.column,m.row,m.column-h))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(c){this.pos.onChange(c);for(var f=this.others.length;f--;)this.others[f].onChange(c);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var c=this,f=this.session,h=function(v,p){f.removeMarker(v.markerId),v.markerId=f.addMarker(new a(v.row,v.column,v.row,v.column+c.length),p,null,!1)};h(this.pos,this.mainClass);for(var d=this.others.length;d--;)h(this.others[d],this.othersClass)}},u.prototype.onCursorChange=function(c){if(!(this.$updating||!this.session)){var f=this.session.selection.getCursor();f.row===this.pos.row&&f.column>=this.pos.column&&f.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",c)):(this.hideOtherMarkers(),this._emit("cursorLeave",c))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var c=this.session.getUndoManager(),f=(c.$undoStack||c.$undostack).length-this.$undoStackDepth,h=0;h<f;h++)c.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();s.implement(l.prototype,o),n.PlaceHolder=l}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,i){var a=t("../lib/event"),o=t("../lib/useragent");function s(u,c){return u.row==c.row&&u.column==c.column}function l(u){var c=u.domEvent,f=c.altKey,h=c.shiftKey,d=c.ctrlKey,v=u.getAccelKey(),p=u.getButton();if(d&&o.isMac&&(p=c.button),u.editor.inMultiSelectMode&&p==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!d&&!f&&!v){p===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(p===0){var g=u.editor,m=g.selection,y=g.inMultiSelectMode,w=u.getDocumentPosition(),b=m.getCursor(),x=u.inSelection()||m.isEmpty()&&s(w,b),S=u.x,_=u.y,M=function(B){S=B.clientX,_=B.clientY},A=g.session,E=g.renderer.pixelToScreenCoordinates(S,_),T=E,C;if(g.$mouseHandler.$enableJumpToDef)d&&f||v&&f?C=h?"block":"add":f&&g.$blockSelectEnabled&&(C="block");else if(v&&!f){if(C="add",!y&&h)return}else f&&g.$blockSelectEnabled&&(C="block");if(C&&o.isMac&&c.ctrlKey&&g.$mouseHandler.cancelContextMenu(),C=="add"){if(!y&&x)return;if(!y){var k=m.toOrientedRange();g.addSelectionMarker(k)}var L=m.rangeList.rangeAtPoint(w);g.inVirtualSelectionMode=!0,h&&(L=null,k=m.ranges[0]||k,g.removeSelectionMarker(k)),g.once("mouseup",function(){var B=m.toOrientedRange();L&&B.isEmpty()&&s(L.cursor,B.cursor)?m.substractPoint(B.cursor):(h?m.substractPoint(k.cursor):k&&(g.removeSelectionMarker(k),m.addRange(k)),m.addRange(B)),g.inVirtualSelectionMode=!1})}else if(C=="block"){u.stop(),g.inVirtualSelectionMode=!0;var I,O=[],N=function(){var B=g.renderer.pixelToScreenCoordinates(S,_),j=A.screenToDocumentPosition(B.row,B.column,B.offsetX);s(T,B)&&s(j,m.lead)||(T=B,g.selection.moveToPosition(j),g.renderer.scrollCursorIntoView(),g.removeSelectionMarkers(O),O=m.rectangularRangeBlock(T,E),g.$mouseHandler.$clickSelection&&O.length==1&&O[0].isEmpty()&&(O[0]=g.$mouseHandler.$clickSelection.clone()),O.forEach(g.addSelectionMarker,g),g.updateSelectionMarkers())};y&&!v?m.toSingleRange():!y&&v&&(I=m.toOrientedRange(),g.addSelectionMarker(I)),h?E=A.documentToScreenPosition(m.lead):m.moveToPosition(w),T={row:-1,column:-1};var D=function(B){N(),clearInterval(R),g.removeSelectionMarkers(O),O.length||(O=[m.toOrientedRange()]),I&&(g.removeSelectionMarker(I),m.toSingleRange(I));for(var j=0;j<O.length;j++)m.addRange(O[j]);g.inVirtualSelectionMode=!1,g.$mouseHandler.$clickSelection=null},$=N;a.capture(g.container,M,D);var R=setInterval(function(){$()},20);return u.preventDefault()}}}n.onMouseDown=l}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,n,i){n.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(o){o.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(o){o.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(o){o.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(o){o.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(o){o.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(o){o.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(o){o.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(o){o.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(o){o.multiSelect.rangeCount>1?o.multiSelect.joinSelections():o.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(o){o.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(o){o.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(o){o.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],n.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(o){o.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(o){return o&&o.inMultiSelectMode}}];var a=t("../keyboard/hash_handler").HashHandler;n.keyboardHandler=new a(n.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,n,i){var a=t("./range_list").RangeList,o=t("./range").Range,s=t("./selection").Selection,l=t("./mouse/multi_select_handler").onMouseDown,u=t("./lib/event"),c=t("./lib/lang"),f=t("./commands/multi_select_commands");n.commands=f.defaultCommands.concat(f.multiSelectCommands);var h=t("./search").Search,d=new h;function v(b,x,S){return d.$options.wrap=!0,d.$options.needle=x,d.$options.backwards=S==-1,d.find(b)}var p=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(b,x){if(b){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(b),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),x||this.fromOrientedRange(b);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}b.cursor||(b.cursor=b.end);var _=this.rangeList.add(b);return this.$onAddRange(b),_.length&&this.$onRemoveRange(_),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),x||this.fromOrientedRange(b)}},this.toSingleRange=function(b){b=b||this.ranges[0];var x=this.rangeList.removeAll();x.length&&this.$onRemoveRange(x),b&&this.fromOrientedRange(b)},this.substractPoint=function(b){var x=this.rangeList.substractPoint(b);if(x)return this.$onRemoveRange(x),x[0]},this.mergeOverlappingRanges=function(){var b=this.rangeList.merge();b.length&&this.$onRemoveRange(b)},this.$onAddRange=function(b){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(b),this._signal("addRange",{range:b})},this.$onRemoveRange=function(b){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var x=this.rangeList.ranges.pop();b.push(x),this.rangeCount=0}for(var S=b.length;S--;){var _=this.ranges.indexOf(b[S]);this.ranges.splice(_,1)}this._signal("removeRange",{ranges:b}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),x=x||this.ranges[0],x&&!x.isEqual(this.getRange())&&this.fromOrientedRange(x)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var b=this.ranges.length?this.ranges:[this.getRange()],x=[],S=0;S<b.length;S++){var _=b[S],M=_.start.row,A=_.end.row;if(M===A)x.push(_.clone());else{for(x.push(new o(M,_.start.column,M,this.session.getLine(M).length));++M<A;)x.push(this.getLineRange(M,!0));x.push(new o(A,0,A,_.end.column))}S==0&&!this.isBackwards()&&(x=x.reverse())}this.toSingleRange();for(var S=x.length;S--;)this.addRange(x[S])},this.joinSelections=function(){var b=this.rangeList.ranges,x=b[b.length-1],S=o.fromPoints(b[0].start,x.end);this.toSingleRange(),this.setSelectionRange(S,x.cursor==x.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var b=this.rangeList.ranges,x=b[b.length-1],S=o.fromPoints(b[0].start,x.end);this.toSingleRange(),this.setSelectionRange(S,x.cursor==x.start)}else{var _=this.session.documentToScreenPosition(this.cursor),M=this.session.documentToScreenPosition(this.anchor),A=this.rectangularRangeBlock(_,M);A.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(b,x,S){var _=[],M=b.column<x.column;if(M)var A=b.column,E=x.column,T=b.offsetX,C=x.offsetX;else var A=x.column,E=b.column,T=x.offsetX,C=b.offsetX;var k=b.row<x.row;if(k)var L=b.row,I=x.row;else var L=x.row,I=b.row;A<0&&(A=0),L<0&&(L=0),L==I&&(S=!0);for(var O,N=L;N<=I;N++){var D=o.fromPoints(this.session.screenToDocumentPosition(N,A,T),this.session.screenToDocumentPosition(N,E,C));if(D.isEmpty()){if(O&&m(D.end,O))break;O=D.end}D.cursor=M?D.start:D.end,_.push(D)}if(k&&_.reverse(),!S){for(var $=_.length-1;_[$].isEmpty()&&$>0;)$--;if($>0)for(var R=0;_[R].isEmpty();)R++;for(var B=$;B>=R;B--)_[B].isEmpty()&&_.splice(B,1)}return _}}).call(s.prototype);var g=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(b){b.cursor||(b.cursor=b.end);var x=this.getSelectionStyle();return b.marker=this.session.addMarker(b,"ace_selection",x),this.session.$selectionMarkers.push(b),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,b},this.removeSelectionMarker=function(b){if(b.marker){this.session.removeMarker(b.marker);var x=this.session.$selectionMarkers.indexOf(b);x!=-1&&this.session.$selectionMarkers.splice(x,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(b){for(var x=this.session.$selectionMarkers,S=b.length;S--;){var _=b[S];if(_.marker){this.session.removeMarker(_.marker);var M=x.indexOf(_);M!=-1&&x.splice(M,1)}}this.session.selectionMarkerCount=x.length},this.$onAddRange=function(b){this.addSelectionMarker(b.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(b){this.removeSelectionMarkers(b.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(b){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(b){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(b){var x=b.command,S=b.editor;if(S.multiSelect){if(x.multiSelectAction)x.multiSelectAction=="forEach"?_=S.forEachSelection(x,b.args):x.multiSelectAction=="forEachLine"?_=S.forEachSelection(x,b.args,!0):x.multiSelectAction=="single"?(S.exitMultiSelectMode(),_=x.exec(S,b.args||{})):_=x.multiSelectAction(S,b.args||{});else{var _=x.exec(S,b.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return _}},this.forEachSelection=function(b,x,S){if(!this.inVirtualSelectionMode){var _=S&&S.keepOrder,M=S==!0||S&&S.$byLines,A=this.session,E=this.selection,T=E.rangeList,C=(_?E:T).ranges,k;if(!C.length)return b.exec?b.exec(this,x||{}):b(this,x||{});var L=E._eventRegistry;E._eventRegistry={};var I=new s(A);this.inVirtualSelectionMode=!0;for(var O=C.length;O--;){if(M)for(;O>0&&C[O].start.row==C[O-1].end.row;)O--;I.fromOrientedRange(C[O]),I.index=O,this.selection=A.selection=I;var N=b.exec?b.exec(this,x||{}):b(this,x||{});!k&&N!==void 0&&(k=N),I.toOrientedRange(C[O])}I.detach(),this.selection=A.selection=E,this.inVirtualSelectionMode=!1,E._eventRegistry=L,E.mergeOverlappingRanges(),E.ranges[0]&&E.fromOrientedRange(E.ranges[0]);var D=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),D&&D.from==D.to&&this.renderer.animateScrolling(D.from),k}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var b="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var x=this.multiSelect.rangeList.ranges,S=[],_=0;_<x.length;_++)S.push(this.session.getTextRange(x[_]));var M=this.session.getDocument().getNewLineCharacter();b=S.join(M),b.length==(S.length-1)*M.length&&(b="")}else this.selection.isEmpty()||(b=this.session.getTextRange(this.getSelectionRange()));return b},this.$checkMultiselectChange=function(b,x){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&x==this.multiSelect.anchor)return;var _=x==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;_.row!=x.row||this.session.$clipPositionToDocument(_.row,_.column).column!=x.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(b,x,S){if(x=x||{},x.needle=b||x.needle,x.needle==null){var _=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();x.needle=this.session.getTextRange(_)}this.$search.set(x);var M=this.$search.findAll(this.session);if(!M.length)return 0;var A=this.multiSelect;S||A.toSingleRange(M[0]);for(var E=M.length;E--;)A.addRange(M[E],!0);return _&&A.rangeList.rangeAtPoint(_.start)&&A.addRange(_,!0),M.length},this.selectMoreLines=function(b,x){var S=this.selection.toOrientedRange(),_=S.cursor==S.end,M=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(M.column=this.selection.$desiredColumn);var A=this.session.screenToDocumentPosition(M.row+b,M.column);if(S.isEmpty())var T=A;else var E=this.session.documentToScreenPosition(_?S.end:S.start),T=this.session.screenToDocumentPosition(E.row+b,E.column);if(_){var C=o.fromPoints(A,T);C.cursor=C.start}else{var C=o.fromPoints(T,A);C.cursor=C.end}if(C.desiredColumn=M.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(x)var k=S.cursor;this.selection.addRange(C),k&&this.selection.substractPoint(k)},this.transposeSelections=function(b){for(var x=this.session,S=x.multiSelect,_=S.ranges,M=_.length;M--;){var A=_[M];if(A.isEmpty()){var E=x.getWordRange(A.start.row,A.start.column);A.start.row=E.start.row,A.start.column=E.start.column,A.end.row=E.end.row,A.end.column=E.end.column}}S.mergeOverlappingRanges();for(var T=[],M=_.length;M--;){var A=_[M];T.unshift(x.getTextRange(A))}b<0?T.unshift(T.pop()):T.push(T.shift());for(var M=_.length;M--;){var A=_[M],C=A.clone();x.replace(A,T[M]),A.start.row=C.start.row,A.start.column=C.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(b,x,S){var _=this.session,M=_.multiSelect,A=M.toOrientedRange();if(!(A.isEmpty()&&(A=_.getWordRange(A.start.row,A.start.column),A.cursor=b==-1?A.start:A.end,this.multiSelect.addRange(A),S))){var E=_.getTextRange(A),T=v(_,E,b);T&&(T.cursor=b==-1?T.start:T.end,this.session.unfold(T),this.multiSelect.addRange(T),this.renderer.scrollCursorIntoView(null,.5)),x&&this.multiSelect.substractPoint(A.cursor)}},this.alignCursors=function(){var b=this.session,x=b.multiSelect,S=x.ranges,_=-1,M=S.filter(function($){if($.cursor.row==_)return!0;_=$.cursor.row});if(!S.length||M.length==S.length-1){var A=this.selection.getRange(),E=A.start.row,T=A.end.row,C=E==T;if(C){var k=this.session.getLength(),L;do L=this.session.getLine(T);while(/[=:]/.test(L)&&++T<k);do L=this.session.getLine(E);while(/[=:]/.test(L)&&--E>0);E<0&&(E=0),T>=k&&(T=k-1)}var I=this.session.removeFullLines(E,T);I=this.$reAlignText(I,C),this.session.insert({row:E,column:0},I.join(`
`)+`
`),C||(A.start.column=0,A.end.column=I[I.length-1].length),this.selection.setRange(A)}else{M.forEach(function($){x.substractPoint($.cursor)});var O=0,N=1/0,D=S.map(function($){var R=$.cursor,B=b.getLine(R.row),j=B.substr(R.column).search(/\S/g);return j==-1&&(j=0),R.column>O&&(O=R.column),j<N&&(N=j),j});S.forEach(function($,R){var B=$.cursor,j=O-B.column,G=D[R]-N;j>G?b.insert(B,c.stringRepeat(" ",j-G)):b.remove(new o(B.row,B.column,B.row,B.column-j+G)),$.start.column=$.end.column=O,$.start.row=$.end.row=B.row,$.cursor=$.end}),x.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(b,x){var S=!0,_=!0,M,A,E;return b.map(function(I){var O=I.match(/(\s*)(.*?)(\s*)([=:].*)/);return O?M==null?(M=O[1].length,A=O[2].length,E=O[3].length,O):(M+A+E!=O[1].length+O[2].length+O[3].length&&(_=!1),M!=O[1].length&&(S=!1),M>O[1].length&&(M=O[1].length),A<O[2].length&&(A=O[2].length),E>O[3].length&&(E=O[3].length),O):[I]}).map(x?C:S?_?k:C:L);function T(I){return c.stringRepeat(" ",I)}function C(I){return I[2]?T(M)+I[2]+T(A-I[2].length+E)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]}function k(I){return I[2]?T(M+A-I[2].length)+I[2]+T(E)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]}function L(I){return I[2]?T(M)+I[2]+T(E)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]}}}).call(g.prototype);function m(b,x){return b.row==x.row&&b.column==x.column}n.onSessionChange=function(b){var x=b.session;x&&!x.multiSelect&&(x.$selectionMarkers=[],x.selection.$initRangeList(),x.multiSelect=x.selection),this.multiSelect=x&&x.multiSelect;var S=b.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),x&&(x.multiSelect.on("addRange",this.$onAddRange),x.multiSelect.on("removeRange",this.$onRemoveRange),x.multiSelect.on("multiSelect",this.$onMultiSelect),x.multiSelect.on("singleSelect",this.$onSingleSelect),x.multiSelect.lead.on("change",this.$checkMultiselectChange),x.multiSelect.anchor.on("change",this.$checkMultiselectChange)),x&&this.inMultiSelectMode!=x.selection.inMultiSelectMode&&(x.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function y(b){b.$multiselectOnSessionChange||(b.$onAddRange=b.$onAddRange.bind(b),b.$onRemoveRange=b.$onRemoveRange.bind(b),b.$onMultiSelect=b.$onMultiSelect.bind(b),b.$onSingleSelect=b.$onSingleSelect.bind(b),b.$multiselectOnSessionChange=n.onSessionChange.bind(b),b.$checkMultiselectChange=b.$checkMultiselectChange.bind(b),b.$multiselectOnSessionChange(b),b.on("changeSession",b.$multiselectOnSessionChange),b.on("mousedown",l),b.commands.addCommands(f.defaultCommands),w(b))}function w(b){if(!b.textInput)return;var x=b.textInput.getElement(),S=!1;u.addListener(x,"keydown",function(M){var A=M.keyCode==18&&!(M.ctrlKey||M.shiftKey||M.metaKey);b.$blockSelectEnabled&&A?S||(b.renderer.setMouseCursor("crosshair"),S=!0):S&&_()},b),u.addListener(x,"keyup",_,b),u.addListener(x,"blur",_,b);function _(M){S&&(b.renderer.setMouseCursor(""),S=!1)}}n.MultiSelect=y,t("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(b){y(this),b?this.on("mousedown",l):this.off("mousedown",l)},value:!0},enableBlockSelect:{set:function(b){this.$blockSelectEnabled=b},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,n,i){var a=t("../../range").Range,o=n.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(s,l,u){var c=s.getLine(u);return this.foldingStartMarker.test(c)?"start":l=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(c)?"end":""},this.getFoldWidgetRange=function(s,l,u){return null},this.indentationBlock=function(s,l,u){var c=/\S/,f=s.getLine(l),h=f.search(c);if(h!=-1){for(var d=u||f.length,v=s.getLength(),p=l,g=l;++l<v;){var m=s.getLine(l).search(c);if(m!=-1){if(m<=h){var y=s.getTokenAt(l,0);if(!y||y.type!=="string")break}g=l}}if(g>p){var w=s.getLine(g).length;return new a(p,d,g,w)}}},this.openingBracketBlock=function(s,l,u,c,f){var h={row:u,column:c+1},d=s.$findClosingBracket(l,h,f);if(d){var v=s.foldWidgets[d.row];return v==null&&(v=s.getFoldWidget(d.row)),v=="start"&&d.row>h.row&&(d.row--,d.column=s.getLine(d.row).length),a.fromPoints(h,d)}},this.closingBracketBlock=function(s,l,u,c,f){var h={row:u,column:c},d=s.$findOpeningBracket(l,h);if(d)return d.column++,h.column--,a.fromPoints(d,h)}}).call(o.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(t,n,i){var a=t("../line_widgets").LineWidgets,o=t("../lib/dom"),s=t("../range").Range,l=t("../config").nls;function u(f,h,d){for(var v=0,p=f.length-1;v<=p;){var g=v+p>>1,m=d(h,f[g]);if(m>0)v=g+1;else if(m<0)p=g-1;else return g}return-(v+1)}function c(f,h,d){var v=f.getAnnotations().sort(s.comparePoints);if(v.length){var p=u(v,{row:h,column:-1},s.comparePoints);p<0&&(p=-p-1),p>=v.length?p=d>0?0:v.length-1:p===0&&d<0&&(p=v.length-1);var g=v[p];if(!(!g||!d)){if(g.row===h){do g=v[p+=d];while(g&&g.row===h);if(!g)return v.slice()}var m=[];h=g.row;do m[d<0?"unshift":"push"](g),g=v[p+=d];while(g&&g.row==h);return m.length&&m}}}n.showErrorMarker=function(f,h){var d=f.session;d.widgetManager||(d.widgetManager=new a(d),d.widgetManager.attach(f));var v=f.getCursorPosition(),p=v.row,g=d.widgetManager.getWidgetsAtRow(p).filter(function(A){return A.type=="errorMarker"})[0];g?g.destroy():p-=h;var m=c(d,p,h),y;if(m){var w=m[0];v.column=(w.pos&&typeof w.column!="number"?w.pos.sc:w.column)||0,v.row=w.row,y=f.renderer.$gutterLayer.$annotations[v.row]}else{if(g)return;y={displayText:[l("error-marker.good-state","Looks good!")],className:"ace_ok"}}f.session.unfold(v.row),f.selection.moveToPosition(v);var b={row:v.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},x=b.el.appendChild(o.createElement("div")),S=b.el.appendChild(o.createElement("div"));S.className="error_widget_arrow "+y.className;var _=f.renderer.$cursorLayer.getPixelPosition(v).left;S.style.left=_+f.renderer.gutterWidth-5+"px",b.el.className="error_widget_wrapper",x.className="error_widget "+y.className,y.displayText.forEach(function(A,E){x.appendChild(o.createTextNode(A)),E<y.displayText.length-1&&x.appendChild(o.createElement("br"))}),x.appendChild(o.createElement("div"));var M=function(A,E,T){if(E===0&&(T==="esc"||T==="return"))return b.destroy(),{command:"null"}};b.destroy=function(){f.$mouseHandler.isMousePressed||(f.keyBinding.removeKeyboardHandler(M),d.widgetManager.removeLineWidget(b),f.off("changeSelection",b.destroy),f.off("changeSession",b.destroy),f.off("mouseup",b.destroy),f.off("change",b.destroy))},f.keyBinding.addKeyboardHandler(M),f.on("changeSelection",b.destroy),f.on("changeSession",b.destroy),f.on("mouseup",b.destroy),f.on("change",b.destroy),f.session.widgetManager.addLineWidget(b),b.el.onmousedown=f.focus.bind(f),f.renderer.scrollCursorIntoView(null,.5,{bottom:b.el.offsetHeight})},o.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(t,n,i){t("./loader_build")(n);var a=t("./lib/dom"),o=t("./range").Range,s=t("./editor").Editor,l=t("./edit_session").EditSession,u=t("./undomanager").UndoManager,c=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),n.config=t("./config"),n.edit=function(f,h){if(typeof f=="string"){var d=f;if(f=document.getElementById(d),!f)throw new Error("ace.edit can't find div #"+d)}if(f&&f.env&&f.env.editor instanceof s)return f.env.editor;var v="";if(f&&/input|textarea/i.test(f.tagName)){var p=f;v=p.value,f=a.createElement("pre"),p.parentNode.replaceChild(f,p)}else f&&(v=f.textContent,f.innerHTML="");var g=n.createEditSession(v),m=new s(new c(f),g,h),y={document:g,editor:m,onResize:m.resize.bind(m,null)};return p&&(y.textarea=p),m.on("destroy",function(){y.editor.container.env=null}),m.container.env=m.env=y,m},n.createEditSession=function(f,h){var d=new l(f,h);return d.setUndoManager(new u),d},n.Range=o,n.Editor=s,n.EditSession=l,n.UndoManager=u,n.VirtualRenderer=c,n.version=n.config.version}),function(){ace.require(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define);var n=function(){return this}();!n&&typeof window<"u"&&(n=window),!n&&typeof self<"u"&&(n=self),n.ace||(n.ace=t);for(var i in t)t.hasOwnProperty(i)&&(n.ace[i]=t[i]);n.ace.default=n.ace,r&&(r.exports=n.ace)})}()})(kj);var U5e=kj.exports;const eR=co(U5e);var W5e={exports:{}};(function(r,e){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(t,n,i){var a=t("./lib/dom"),o=t("./lib/oop"),s=t("./lib/event_emitter").EventEmitter,l=t("./lib/lang"),u=t("./range").Range,c=t("./range_list").RangeList,f=t("./keyboard/hash_handler").HashHandler,h=t("./tokenizer").Tokenizer,d=t("./clipboard"),v={CURRENT_WORD:function(S){return S.session.getTextRange(S.session.getWordRange())},SELECTION:function(S,_,M){var A=S.session.getTextRange();return M?A.replace(/\n\r?([ \t]*\S)/g,`
`+M+"$1"):A},CURRENT_LINE:function(S){return S.session.getLine(S.getCursorPosition().row)},PREV_LINE:function(S){return S.session.getLine(S.getCursorPosition().row-1)},LINE_INDEX:function(S){return S.getCursorPosition().row},LINE_NUMBER:function(S){return S.getCursorPosition().row+1},SOFT_TABS:function(S){return S.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(S){return S.session.getTabSize()},CLIPBOARD:function(S){return d.getText&&d.getText()},FILENAME:function(S){return/[^/\\]*$/.exec(this.FILEPATH(S))[0]},FILENAME_BASE:function(S){return/[^/\\]*$/.exec(this.FILEPATH(S))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(S){return this.FILEPATH(S).replace(/[^/\\]*$/,"")},FILEPATH:function(S){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(S){var _=S.session.$mode||{};return _.blockComment&&_.blockComment.start||""},BLOCK_COMMENT_END:function(S){var _=S.session.$mode||{};return _.blockComment&&_.blockComment.end||""},LINE_COMMENT:function(S){var _=S.session.$mode||{};return _.lineCommentStart||""},CURRENT_YEAR:p.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:p.bind(null,{year:"2-digit"}),CURRENT_MONTH:p.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:p.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:p.bind(null,{month:"short"}),CURRENT_DATE:p.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:p.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:p.bind(null,{weekday:"short"}),CURRENT_HOUR:p.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:p.bind(null,{minute:"2-digit"}),CURRENT_SECOND:p.bind(null,{second:"2-digit"})};v.SELECTED_TEXT=v.SELECTION;function p(S){var _=new Date().toLocaleString("en-us",S);return _.length==1?"0"+_:_}var g=function(){function S(){this.snippetMap={},this.snippetNameMap={},this.variables=v}return S.prototype.getTokenizer=function(){return S.$tokenizer||this.createTokenizer()},S.prototype.createTokenizer=function(){function _(E){return E=E.substr(1),/^\d+$/.test(E)?[{tabstopId:parseInt(E,10)}]:[{text:E}]}function M(E){return"(?:[^\\\\"+E+"]|\\\\.)"}var A={regex:"/("+M("/")+"+)/",onMatch:function(E,T,C){var k=C[0];return k.fmtString=!0,k.guard=E.slice(1,-1),k.flag="",""},next:"formatString"};return S.$tokenizer=new h({start:[{regex:/\\./,onMatch:function(E,T,C){var k=E[1];return(k=="}"&&C.length||"`$\\".indexOf(k)!=-1)&&(E=k),[E]}},{regex:/}/,onMatch:function(E,T,C){return[C.length?C.shift():E]}},{regex:/\$(?:\d+|\w+)/,onMatch:_},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(E,T,C){var k=_(E.substr(1));return C.unshift(k[0]),k},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+M("\\|")+"*\\|",onMatch:function(E,T,C){var k=E.slice(1,-1).replace(/\\[,|\\]|,/g,function(L){return L.length==2?L[1]:"\0"}).split("\0").map(function(L){return{value:L}});return C[0].choices=k,[k[0]]},next:"start"},A,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(E,T,C){return C.length&&C[0].expectElse?(C[0].expectElse=!1,C[0].ifEnd={elseEnd:C[0]},[C[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(E,T,C){var k=E[1];return k=="}"&&C.length||"`$\\".indexOf(k)!=-1?E=k:k=="n"?E=`
`:k=="t"?E="	":"ulULE".indexOf(k)!=-1&&(E={changeCase:k,local:k>"a"}),[E]}},{regex:"/\\w*}",onMatch:function(E,T,C){var k=C.shift();return k&&(k.flag=E.slice(1,-1)),this.next=k&&k.tabstopId?"start":"",[k||E]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(E,T,C){return[{text:E.slice(1)}]}},{regex:/\${\w+/,onMatch:function(E,T,C){var k={text:E.slice(2)};return C.unshift(k),[k]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(E,T,C){var k=C.shift();return this.next=k&&k.tabstopId?"start":"",[k||E]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(E,T,C){var k=C[0];return k.formatFunction=E.slice(2,-1),[C.shift()]},next:"formatString"},A,{regex:/:[\?\-+]?/,onMatch:function(E,T,C){E[1]=="+"&&(C[0].ifEnd=C[0]),E[1]=="?"&&(C[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),S.$tokenizer},S.prototype.tokenizeTmSnippet=function(_,M){return this.getTokenizer().getLineTokens(_,M).tokens.map(function(A){return A.value||A})},S.prototype.getVariableValue=function(_,M,A){if(/^\d+$/.test(M))return(this.variables.__||{})[M]||"";if(/^[A-Z]\d+$/.test(M))return(this.variables[M[0]+"__"]||{})[M.substr(1)]||"";if(M=M.replace(/^TM_/,""),!this.variables.hasOwnProperty(M))return"";var E=this.variables[M];return typeof E=="function"&&(E=this.variables[M](_,M,A)),E??""},S.prototype.tmStrFormat=function(_,M,A){if(!M.fmt)return _;var E=M.flag||"",T=M.guard;T=new RegExp(T,E.replace(/[^gim]/g,""));var C=typeof M.fmt=="string"?this.tokenizeTmSnippet(M.fmt,"formatString"):M.fmt,k=this,L=_.replace(T,function(){var I=k.variables.__;k.variables.__=[].slice.call(arguments);for(var O=k.resolveVariables(C,A),N="E",D=0;D<O.length;D++){var $=O[D];if(typeof $=="object")if(O[D]="",$.changeCase&&$.local){var R=O[D+1];R&&typeof R=="string"&&($.changeCase=="u"?O[D]=R[0].toUpperCase():O[D]=R[0].toLowerCase(),O[D+1]=R.substr(1))}else $.changeCase&&(N=$.changeCase);else N=="U"?O[D]=$.toUpperCase():N=="L"&&(O[D]=$.toLowerCase())}return k.variables.__=I,O.join("")});return L},S.prototype.tmFormatFunction=function(_,M,A){return M.formatFunction=="upcase"?_.toUpperCase():M.formatFunction=="downcase"?_.toLowerCase():_},S.prototype.resolveVariables=function(_,M){for(var A=[],E="",T=!0,C=0;C<_.length;C++){var k=_[C];if(typeof k=="string"){A.push(k),k==`
`?(T=!0,E=""):T&&(E=/^\t*/.exec(k)[0],T=/\S/.test(k));continue}if(k){if(T=!1,k.fmtString){var L=_.indexOf(k,C+1);L==-1&&(L=_.length),k.fmt=_.slice(C+1,L),C=L}if(k.text){var I=this.getVariableValue(M,k.text,E)+"";k.fmtString&&(I=this.tmStrFormat(I,k,M)),k.formatFunction&&(I=this.tmFormatFunction(I,k,M)),I&&!k.ifEnd?(A.push(I),O(k)):!I&&k.ifEnd&&O(k.ifEnd)}else k.elseEnd?O(k.elseEnd):(k.tabstopId!=null||k.changeCase!=null)&&A.push(k)}}function O(N){var D=_.indexOf(N,C+1);D!=-1&&(C=D)}return A},S.prototype.getDisplayTextForSnippet=function(_,M){var A=m.call(this,_,M);return A.text},S.prototype.insertSnippetForSelection=function(_,M,A){A===void 0&&(A={});var E=m.call(this,_,M,A),T=_.getSelectionRange(),C=_.session.replace(T,E.text),k=new y(_),L=_.inVirtualSelectionMode&&_.selection.index;k.addTabstops(E.tabstops,T.start,C,L)},S.prototype.insertSnippet=function(_,M,A){A===void 0&&(A={});var E=this;if(_.inVirtualSelectionMode)return E.insertSnippetForSelection(_,M,A);_.forEachSelection(function(){E.insertSnippetForSelection(_,M,A)},null,{keepOrder:!0}),_.tabstopManager&&_.tabstopManager.tabNext()},S.prototype.$getScope=function(_){var M=_.session.$mode.$id||"";if(M=M.split("/").pop(),M==="html"||M==="php"){M==="php"&&!_.session.$mode.inlinePhp&&(M="html");var A=_.getCursorPosition(),E=_.session.getState(A.row);typeof E=="object"&&(E=E[0]),E.substring&&(E.substring(0,3)=="js-"?M="javascript":E.substring(0,4)=="css-"?M="css":E.substring(0,4)=="php-"&&(M="php"))}return M},S.prototype.getActiveScopes=function(_){var M=this.$getScope(_),A=[M],E=this.snippetMap;return E[M]&&E[M].includeScopes&&A.push.apply(A,E[M].includeScopes),A.push("_"),A},S.prototype.expandWithTab=function(_,M){var A=this,E=_.forEachSelection(function(){return A.expandSnippetForSelection(_,M)},null,{keepOrder:!0});return E&&_.tabstopManager&&_.tabstopManager.tabNext(),E},S.prototype.expandSnippetForSelection=function(_,M){var A=_.getCursorPosition(),E=_.session.getLine(A.row),T=E.substring(0,A.column),C=E.substr(A.column),k=this.snippetMap,L;return this.getActiveScopes(_).some(function(I){var O=k[I];return O&&(L=this.findMatchingSnippet(O,T,C)),!!L},this),L?(M&&M.dryRun||(_.session.doc.removeInLine(A.row,A.column-L.replaceBefore.length,A.column+L.replaceAfter.length),this.variables.M__=L.matchBefore,this.variables.T__=L.matchAfter,this.insertSnippetForSelection(_,L.content),this.variables.M__=this.variables.T__=null),!0):!1},S.prototype.findMatchingSnippet=function(_,M,A){for(var E=_.length;E--;){var T=_[E];if(!(T.startRe&&!T.startRe.test(M))&&!(T.endRe&&!T.endRe.test(A))&&!(!T.startRe&&!T.endRe))return T.matchBefore=T.startRe?T.startRe.exec(M):[""],T.matchAfter=T.endRe?T.endRe.exec(A):[""],T.replaceBefore=T.triggerRe?T.triggerRe.exec(M)[0]:"",T.replaceAfter=T.endTriggerRe?T.endTriggerRe.exec(A)[0]:"",T}},S.prototype.register=function(_,M){var A=this.snippetMap,E=this.snippetNameMap,T=this;_||(_=[]);function C(I){return I&&!/^\^?\(.*\)\$?$|^\\b$/.test(I)&&(I="(?:"+I+")"),I||""}function k(I,O,N){return I=C(I),O=C(O),I=O+I,I&&I[I.length-1]!="$"&&(I=I+"$"),new RegExp(I)}function L(I){I.scope||(I.scope=M||"_"),M=I.scope,A[M]||(A[M]=[],E[M]={});var O=E[M];if(I.name){var N=O[I.name];N&&T.unregister(N),O[I.name]=I}A[M].push(I),I.prefix&&(I.tabTrigger=I.prefix),!I.content&&I.body&&(I.content=Array.isArray(I.body)?I.body.join(`
`):I.body),I.tabTrigger&&!I.trigger&&(!I.guard&&/^\w/.test(I.tabTrigger)&&(I.guard="\\b"),I.trigger=l.escapeRegExp(I.tabTrigger)),!(!I.trigger&&!I.guard&&!I.endTrigger&&!I.endGuard)&&(I.startRe=k(I.trigger,I.guard),I.triggerRe=new RegExp(I.trigger),I.endRe=k(I.endTrigger,I.endGuard),I.endTriggerRe=new RegExp(I.endTrigger))}Array.isArray(_)?_.forEach(L):Object.keys(_).forEach(function(I){L(_[I])}),this._signal("registerSnippets",{scope:M})},S.prototype.unregister=function(_,M){var A=this.snippetMap,E=this.snippetNameMap;function T(C){var k=E[C.scope||M];if(k&&k[C.name]){delete k[C.name];var L=A[C.scope||M],I=L&&L.indexOf(C);I>=0&&L.splice(I,1)}}_.content?T(_):Array.isArray(_)&&_.forEach(T)},S.prototype.parseSnippetFile=function(_){_=_.replace(/\r/g,"");for(var M=[],A={},E=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,T;T=E.exec(_);){if(T[1])try{A=JSON.parse(T[1]),M.push(A)}catch{}if(T[4])A.content=T[4].replace(/^\t/gm,""),M.push(A),A={};else{var C=T[2],k=T[3];if(C=="regex"){var L=/\/((?:[^\/\\]|\\.)*)|$/g;A.guard=L.exec(k)[1],A.trigger=L.exec(k)[1],A.endTrigger=L.exec(k)[1],A.endGuard=L.exec(k)[1]}else C=="snippet"?(A.tabTrigger=k.match(/^\S*/)[0],A.name||(A.name=k)):C&&(A[C]=k)}}return M},S.prototype.getSnippetByName=function(_,M){var A=this.snippetNameMap,E;return this.getActiveScopes(M).some(function(T){var C=A[T];return C&&(E=C[_]),!!E},this),E},S}();o.implement(g.prototype,s);var m=function(S,_,M){M===void 0&&(M={});var A=S.getCursorPosition(),E=S.session.getLine(A.row),T=S.session.getTabString(),C=E.match(/^\s*/)[0];A.column<C.length&&(C=C.slice(0,A.column)),_=_.replace(/\r/g,"");var k=this.tokenizeTmSnippet(_);k=this.resolveVariables(k,S),k=k.map(function(Q){return Q==`
`&&!M.excludeExtraIndent?Q+C:typeof Q=="string"?Q.replace(/\t/g,T):Q});var L=[];k.forEach(function(Q,ie){if(typeof Q=="object"){var se=Q.tabstopId,ae=L[se];if(ae||(ae=L[se]=[],ae.index=se,ae.value="",ae.parents={}),ae.indexOf(Q)===-1){Q.choices&&!ae.choices&&(ae.choices=Q.choices),ae.push(Q);var pe=k.indexOf(Q,ie+1);if(pe!==-1){var De=k.slice(ie+1,pe),Je=De.some(function(ee){return typeof ee=="object"});Je&&!ae.value?ae.value=De:De.length&&(!ae.value||typeof ae.value!="string")&&(ae.value=De.join(""))}}}}),L.forEach(function(Q){Q.length=0});var I={};function O(Q){for(var ie=[],se=0;se<Q.length;se++){var ae=Q[se];if(typeof ae=="object"){if(I[ae.tabstopId])continue;var pe=Q.lastIndexOf(ae,se-1);ae=ie[pe]||{tabstopId:ae.tabstopId}}ie[se]=ae}return ie}for(var N=0;N<k.length;N++){var D=k[N];if(typeof D=="object"){var $=D.tabstopId,R=L[$],B=k.indexOf(D,N+1);if(I[$]){I[$]===D&&(delete I[$],Object.keys(I).forEach(function(Q){R.parents[Q]=!0}));continue}I[$]=D;var j=R.value;typeof j!="string"?j=O(j):D.fmt&&(j=this.tmStrFormat(j,D,S)),k.splice.apply(k,[N+1,Math.max(0,B-N)].concat(j,D)),R.indexOf(D)===-1&&R.push(D)}}var G=0,z=0,W="";return k.forEach(function(Q){if(typeof Q=="string"){var ie=Q.split(`
`);ie.length>1?(z=ie[ie.length-1].length,G+=ie.length-1):z+=Q.length,W+=Q}else Q&&(Q.start?Q.end={row:G,column:z}:Q.start={row:G,column:z})}),{text:W,tabstops:L,tokens:k}},y=function(){function S(_){if(this.index=0,this.ranges=[],this.tabstops=[],_.tabstopManager)return _.tabstopManager;_.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=l.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(_)}return S.prototype.attach=function(_){this.$openTabstops=null,this.selectedTabstop=null,this.editor=_,this.session=_.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},S.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},S.prototype.onChange=function(_){for(var M=_.action[0]=="r",A=this.selectedTabstop||{},E=A.parents||{},T=this.tabstops.slice(),C=0;C<T.length;C++){var k=T[C],L=k==A||E[k.index];if(k.rangeList.$bias=L?0:1,_.action=="remove"&&k!==A){var I=k.parents&&k.parents[A.index],O=k.rangeList.pointIndex(_.start,I);O=O<0?-O-1:O+1;var N=k.rangeList.pointIndex(_.end,I);N=N<0?-N-1:N-1;for(var D=k.rangeList.ranges.slice(O,N),$=0;$<D.length;$++)this.removeRange(D[$])}k.rangeList.$onChange(_)}var R=this.session;!this.$inChange&&M&&R.getLength()==1&&!R.getValue()&&this.detach()},S.prototype.updateLinkedFields=function(){var _=this.selectedTabstop;if(!(!_||!_.hasLinkedRanges||!_.firstNonLinked)){this.$inChange=!0;for(var M=this.session,A=M.getTextRange(_.firstNonLinked),E=0;E<_.length;E++){var T=_[E];if(T.linked){var C=T.original,k=n.snippetManager.tmStrFormat(A,C,this.editor);M.replace(T,k)}}this.$inChange=!1}},S.prototype.onAfterExec=function(_){_.command&&!_.command.readOnly&&this.updateLinkedFields()},S.prototype.onChangeSelection=function(){if(this.editor){for(var _=this.editor.selection.lead,M=this.editor.selection.anchor,A=this.editor.selection.isEmpty(),E=0;E<this.ranges.length;E++)if(!this.ranges[E].linked){var T=this.ranges[E].contains(_.row,_.column),C=A||this.ranges[E].contains(M.row,M.column);if(T&&C)return}this.detach()}},S.prototype.onChangeSession=function(){this.detach()},S.prototype.tabNext=function(_){var M=this.tabstops.length,A=this.index+(_||1);A=Math.min(Math.max(A,1),M),A==M&&(A=0),this.selectTabstop(A),this.updateTabstopMarkers(),A===0&&this.detach()},S.prototype.selectTabstop=function(_){this.$openTabstops=null;var M=this.tabstops[this.index];if(M&&this.addTabstopMarkers(M),this.index=_,M=this.tabstops[this.index],!(!M||!M.length)){this.selectedTabstop=M;var A=M.firstNonLinked||M;if(M.choices&&(A.cursor=A.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(A);else{var E=this.editor.multiSelect;E.toSingleRange(A);for(var T=0;T<M.length;T++)M.hasLinkedRanges&&M[T].linked||E.addRange(M[T].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},S.prototype.addTabstops=function(_,M,A){var E=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!_[0]){var T=u.fromPoints(A,A);b(T.start,M),b(T.end,M),_[0]=[T],_[0].index=0}var C=this.index,k=[C+1,0],L=this.ranges,I=this.snippetId=(this.snippetId||0)+1;_.forEach(function(O,N){var D=this.$openTabstops[N]||O;D.snippetId=I;for(var $=0;$<O.length;$++){var R=O[$],B=u.fromPoints(R.start,R.end||R.start);w(B.start,M),w(B.end,M),B.original=R,B.tabstop=D,L.push(B),D!=O?D.unshift(B):D[$]=B,R.fmtString||D.firstNonLinked&&E?(B.linked=!0,D.hasLinkedRanges=!0):D.firstNonLinked||(D.firstNonLinked=B)}D.firstNonLinked||(D.hasLinkedRanges=!1),D===O&&(k.push(D),this.$openTabstops[N]=D),this.addTabstopMarkers(D),D.rangeList=D.rangeList||new c,D.rangeList.$bias=0,D.rangeList.addList(D)},this),k.length>2&&(this.tabstops.length&&k.push(k.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,k))},S.prototype.addTabstopMarkers=function(_){var M=this.session;_.forEach(function(A){A.markerId||(A.markerId=M.addMarker(A,"ace_snippet-marker","text"))})},S.prototype.removeTabstopMarkers=function(_){var M=this.session;_.forEach(function(A){M.removeMarker(A.markerId),A.markerId=null})},S.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var _=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&_--,this.tabstops.forEach(function(M){M.snippetId===_?this.addTabstopMarkers(M):this.removeTabstopMarkers(M)},this)}},S.prototype.removeRange=function(_){var M=_.tabstop.indexOf(_);M!=-1&&_.tabstop.splice(M,1),M=this.ranges.indexOf(_),M!=-1&&this.ranges.splice(M,1),M=_.tabstop.rangeList.ranges.indexOf(_),M!=-1&&_.tabstop.splice(M,1),this.session.removeMarker(_.markerId),_.tabstop.length||(M=this.tabstops.indexOf(_.tabstop),M!=-1&&this.tabstops.splice(M,1),this.tabstops.length||this.detach())},S}();y.prototype.keyboardHandler=new f,y.prototype.keyboardHandler.bindKeys({Tab:function(S){n.snippetManager&&n.snippetManager.expandWithTab(S)||(S.tabstopManager.tabNext(1),S.renderer.scrollCursorIntoView())},"Shift-Tab":function(S){S.tabstopManager.tabNext(-1),S.renderer.scrollCursorIntoView()},Esc:function(S){S.tabstopManager.detach()}});var w=function(S,_){S.row==0&&(S.column+=_.column),S.row+=_.row},b=function(S,_){S.row==_.row&&(S.column-=_.column),S.row-=_.row};a.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),n.snippetManager=new g;var x=t("./editor").Editor;(function(){this.insertSnippet=function(S,_){return n.snippetManager.insertSnippet(this,S,_)},this.expandSnippet=function(S){return n.snippetManager.expandWithTab(this,S)}}).call(x.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(t,n,i){var a=t("../virtual_renderer").VirtualRenderer,o=t("../editor").Editor,s=t("../range").Range,l=t("../lib/event"),u=t("../lib/lang"),c=t("../lib/dom"),f=t("../config").nls,h=t("./../lib/useragent"),d=function(w){return"suggest-aria-id:".concat(w)},v=h.isSafari?"menu":"listbox",p=h.isSafari?"menuitem":"option",g=h.isSafari?"aria-current":"aria-selected",m=function(w){var b=new a(w);b.$maxLines=4;var x=new o(b);return x.setHighlightActiveLine(!1),x.setShowPrintMargin(!1),x.renderer.setShowGutter(!1),x.renderer.setHighlightGutterLine(!1),x.$mouseHandler.$focusTimeout=0,x.$highlightTagPending=!0,x},y=function(){function w(b){var x=c.createElement("div"),S=m(x);b&&b.appendChild(x),x.style.display="none",S.renderer.content.style.cursor="default",S.renderer.setStyle("ace_autocomplete"),S.renderer.$textLayer.element.setAttribute("role",v),S.renderer.$textLayer.element.setAttribute("aria-roledescription",f("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),S.renderer.$textLayer.element.setAttribute("aria-label",f("autocomplete.popup.aria-label","Autocomplete suggestions")),S.renderer.textarea.setAttribute("aria-hidden","true"),S.setOption("displayIndentGuides",!1),S.setOption("dragDelay",150);var _=function(){};S.focus=_,S.$isFocused=!0,S.renderer.$cursorLayer.restartTimer=_,S.renderer.$cursorLayer.element.style.opacity="0",S.renderer.$maxLines=8,S.renderer.$keepTextAreaAtCursor=!1,S.setHighlightActiveLine(!1),S.session.highlight(""),S.session.$searchHighlight.clazz="ace_highlight-marker",S.on("mousedown",function(L){var I=L.getDocumentPosition();S.selection.moveToPosition(I),E.start.row=E.end.row=I.row,L.stop()});var M,A=new s(-1,0,-1,1/0),E=new s(-1,0,-1,1/0);E.id=S.session.addMarker(E,"ace_active-line","fullLine"),S.setSelectOnHover=function(L){L?A.id&&(S.session.removeMarker(A.id),A.id=null):A.id=S.session.addMarker(A,"ace_line-hover","fullLine")},S.setSelectOnHover(!1),S.on("mousemove",function(L){if(!M){M=L;return}if(!(M.x==L.x&&M.y==L.y)){M=L,M.scrollTop=S.renderer.scrollTop,S.isMouseOver=!0;var I=M.getDocumentPosition().row;A.start.row!=I&&(A.id||S.setRow(I),C(I))}}),S.renderer.on("beforeRender",function(){if(M&&A.start.row!=-1){M.$pos=null;var L=M.getDocumentPosition().row;A.id||S.setRow(L),C(L,!0)}}),S.renderer.on("afterRender",function(){var L=S.getRow(),I=S.renderer.$textLayer,O=I.element.childNodes[L-I.config.firstRow],N=document.activeElement;if(O!==S.selectedNode&&S.selectedNode&&(c.removeCssClass(S.selectedNode,"ace_selected"),N.removeAttribute("aria-activedescendant"),S.selectedNode.removeAttribute(g),S.selectedNode.removeAttribute("id")),S.selectedNode=O,O){c.addCssClass(O,"ace_selected");var D=d(L);O.id=D,I.element.setAttribute("aria-activedescendant",D),N.setAttribute("aria-activedescendant",D),O.setAttribute("role",p),O.setAttribute("aria-roledescription",f("autocomplete.popup.item.aria-roledescription","item")),O.setAttribute("aria-label",S.getData(L).caption||S.getData(L).value),O.setAttribute("aria-setsize",S.data.length),O.setAttribute("aria-posinset",L+1),O.setAttribute("aria-describedby","doc-tooltip"),O.setAttribute(g,"true")}});var T=function(){C(-1)},C=function(L,I){L!==A.start.row&&(A.start.row=A.end.row=L,I||S.session._emit("changeBackMarker"),S._emit("changeHoverMarker"))};S.getHoveredRow=function(){return A.start.row},l.addListener(S.container,"mouseout",function(){S.isMouseOver=!1,T()}),S.on("hide",T),S.on("changeSelection",T),S.session.doc.getLength=function(){return S.data.length},S.session.doc.getLine=function(L){var I=S.data[L];return typeof I=="string"?I:I&&I.value||""};var k=S.session.bgTokenizer;return k.$tokenizeRow=function(L){var I=S.data[L],O=[];if(!I)return O;typeof I=="string"&&(I={value:I});var N=I.caption||I.value||I.name;function D(Q,ie){Q&&O.push({type:(I.className||"")+(ie||""),value:Q})}for(var $=N.toLowerCase(),R=(S.filterText||"").toLowerCase(),B=0,j=0,G=0;G<=R.length;G++)if(G!=j&&(I.matchMask&1<<G||G==R.length)){var z=R.slice(j,G);j=G;var W=$.indexOf(z,B);if(W==-1)continue;D(N.slice(B,W),""),B=W+z.length,D(N.slice(W,B),"completion-highlight")}return D(N.slice(B,N.length),""),O.push({type:"completion-spacer",value:" "}),I.meta&&O.push({type:"completion-meta",value:I.meta}),I.message&&O.push({type:"completion-message",value:I.message}),O},k.$updateOnChange=_,k.start=_,S.session.$computeWidth=function(){return this.screenWidth=0},S.isOpen=!1,S.isTopdown=!1,S.autoSelect=!0,S.filterText="",S.isMouseOver=!1,S.data=[],S.setData=function(L,I){S.filterText=I||"",S.setValue(u.stringRepeat(`
`,L.length),-1),S.data=L||[],S.setRow(0)},S.getData=function(L){return S.data[L]},S.getRow=function(){return E.start.row},S.setRow=function(L){L=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,L)),E.start.row!=L&&(S.selection.clearSelection(),E.start.row=E.end.row=L||0,S.session._emit("changeBackMarker"),S.moveCursorTo(L||0,0),S.isOpen&&S._signal("select"))},S.on("changeSelection",function(){S.isOpen&&S.setRow(S.selection.lead.row),S.renderer.scrollCursorIntoView()}),S.hide=function(){this.container.style.display="none",S.anchorPos=null,S.anchor=null,S.isOpen&&(S.isOpen=!1,this._signal("hide"))},S.tryShow=function(L,I,O,N){if(!N&&S.isOpen&&S.anchorPos&&S.anchor&&S.anchorPos.top===L.top&&S.anchorPos.left===L.left&&S.anchor===O)return!0;var D=this.container,$=window.innerHeight,R=window.innerWidth,B=this.renderer,j=B.$maxLines*I*1.4,G={top:0,bottom:0,left:0},z=$-L.top-3*this.$borderSize-I,W=L.top-3*this.$borderSize;O||(W<=z||z>=j?O="bottom":O="top"),O==="top"?(G.bottom=L.top-this.$borderSize,G.top=G.bottom-j):O==="bottom"&&(G.top=L.top+I+this.$borderSize,G.bottom=G.top+j);var Q=G.top>=0&&G.bottom<=$;if(!N&&!Q)return!1;Q?B.$maxPixelHeight=null:O==="top"?B.$maxPixelHeight=W:B.$maxPixelHeight=z,O==="top"?(D.style.top="",D.style.bottom=$-G.bottom+"px",S.isTopdown=!1):(D.style.top=G.top+"px",D.style.bottom="",S.isTopdown=!0),D.style.display="";var ie=L.left;return ie+D.offsetWidth>R&&(ie=R-D.offsetWidth),D.style.left=ie+"px",D.style.right="",S.isOpen||(S.isOpen=!0,this._signal("show"),M=null),S.anchorPos=L,S.anchor=O,!0},S.show=function(L,I,O){this.tryShow(L,I,O?"bottom":void 0,!0)},S.goTo=function(L){var I=this.getRow(),O=this.session.getLength()-1;switch(L){case"up":I=I<=0?O:I-1;break;case"down":I=I>=O?-1:I+1;break;case"start":I=0;break;case"end":I=O;break}this.setRow(I)},S.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},S.$imageSize=0,S.$borderSize=1,S}return w}();c.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),n.AcePopup=y,n.$singleLineEditor=m,n.getAriaId=d}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(t,n,i){var a=function(){function o(s){this.editor=s,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return o.prototype.setScreenReaderContent=function(s){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",(function(){var u=this.popup.getRow(),c=this.popup.renderer.$textLayer,f=c.element.childNodes[u-c.config.firstRow];if(f){for(var h="doc-tooltip ",d=0;d<this._lines.length;d++)h+="ace-inline-screenreader-line-".concat(d," ");f.setAttribute("aria-describedby",h)}}).bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=s.split(/\r\n|\r|\n/);var l=this.createCodeBlock();this.screenReaderDiv.appendChild(l)},o.prototype.destroy=function(){this.screenReaderDiv.remove()},o.prototype.createCodeBlock=function(){var s=document.createElement("pre");s.setAttribute("id","ace-inline-screenreader");for(var l=0;l<this._lines.length;l++){var u=document.createElement("code");u.setAttribute("id","ace-inline-screenreader-line-".concat(l));var c=document.createTextNode(this._lines[l]);u.appendChild(c),s.appendChild(u)}return s},o}();n.AceInlineScreenReader=a}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(t,n,i){var a=t("../snippets").snippetManager,o=t("./inline_screenreader").AceInlineScreenReader,s=function(){function l(){this.editor=null}return l.prototype.show=function(u,c,f){if(f=f||"",u&&this.editor&&this.editor!==u&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!u||!c)return!1;this.inlineScreenReader||(this.inlineScreenReader=new o(u));var h=c.snippet?a.getDisplayTextForSnippet(u,c.snippet):c.value;return c.hideInlinePreview||!h||!h.startsWith(f)?!1:(this.editor=u,this.inlineScreenReader.setScreenReaderContent(h),h=h.slice(f.length),h===""?u.removeGhostText():u.setGhostText(h),!0)},l.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},l.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},l.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},l}();n.AceInline=s}),ace.define("ace/autocomplete/util",["require","exports","module"],function(t,n,i){n.parForEach=function(o,s,l){var u=0,c=o.length;c===0&&l();for(var f=0;f<c;f++)s(o[f],function(h,d){u++,u===c&&l(h,d)})};var a=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;n.retrievePrecedingIdentifier=function(o,s,l){l=l||a;for(var u=[],c=s-1;c>=0&&l.test(o[c]);c--)u.push(o[c]);return u.reverse().join("")},n.retrieveFollowingIdentifier=function(o,s,l){l=l||a;for(var u=[],c=s;c<o.length&&l.test(o[c]);c++)u.push(o[c]);return u},n.getCompletionPrefix=function(o){var s=o.getCursorPosition(),l=o.session.getLine(s.row),u;return o.completers.forEach((function(c){c.identifierRegexps&&c.identifierRegexps.forEach((function(f){!u&&f&&(u=this.retrievePrecedingIdentifier(l,s.column,f))}).bind(this))}).bind(this)),u||this.retrievePrecedingIdentifier(l,s.column)},n.triggerAutocomplete=function(o,l){var l=l??o.session.getPrecedingCharacter();return o.completers.some(function(u){if(u.triggerCharacters&&Array.isArray(u.triggerCharacters))return u.triggerCharacters.includes(l)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(t,n,i){var a=t("./keyboard/hash_handler").HashHandler,o=t("./autocomplete/popup").AcePopup,s=t("./autocomplete/inline").AceInline,l=t("./autocomplete/popup").getAriaId,u=t("./autocomplete/util"),c=t("./lib/lang"),f=t("./lib/dom"),h=t("./snippets").snippetManager,d=t("./config"),v=t("./lib/event"),p=t("./lib/scroll").preventParentScroll,g=function(b,x){x.completer&&x.completer.destroy()},m=function(){function b(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new a,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=c.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=c.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=c.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=c.delayedCall((function(){this.stickySelection=!0}).bind(this),this.stickySelectionDelay),this.$firstOpenTimer=c.delayedCall((function(){var x=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!x||this.editor.completers.length===0||(this.completions=new w(b.completionsForLoading),this.openPopup(this.editor,x.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}).bind(this),this.stickySelectionDelay)}return Object.defineProperty(b,"completionsForLoading",{get:function(){return[{caption:d.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),b.prototype.$init=function(){return this.popup=new o(this.parentNode||document.body||document.documentElement),this.popup.on("click",(function(x){this.insertMatch(),x.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),v.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},b.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new s,this.inlineRenderer},b.prototype.getPopup=function(){return this.popup||this.$init()},b.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},b.prototype.$seen=function(x){!this.hasSeen.has(x)&&x&&x.completer&&x.completer.onSeen&&typeof x.completer.onSeen=="function"&&(x.completer.onSeen(this.editor,x),this.hasSeen.add(x))},b.prototype.$onPopupChange=function(x){if(this.inlineRenderer&&this.inlineEnabled){var S=x?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(S),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},b.prototype.$updateGhostText=function(x){var S=this.base.row,_=this.base.column,M=this.editor.getCursorPosition().column,A=this.editor.session.getLine(S).slice(_,M);this.inlineRenderer.show(this.editor,x,A)?this.$seen(x):this.inlineRenderer.hide()},b.prototype.$onPopupRender=function(){var x=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var S=this.popup.getFirstVisibleRow();S<=this.popup.getLastVisibleRow();S++){var _=this.popup.getData(S);_&&(!x||_.hideInlinePreview)&&this.$seen(_)}},b.prototype.$onPopupShow=function(x){this.$onPopupChange(x),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},b.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var x=this.editor.container.parentNode,S=[];x;)S.push(x),x.addEventListener("scroll",this.onLayoutChange,{passive:!0}),x=x.parentNode;this.$elements=S}},b.prototype.unObserveLayoutChanges=function(){var x=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(S){S.removeEventListener("scroll",x.onLayoutChange,{passive:!0})}),this.$elements=null},b.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},b.prototype.$updatePopupPosition=function(){var x=this.editor,S=x.renderer,_=S.layerConfig.lineHeight,M=S.$cursorLayer.getPixelPosition(this.base,!0);M.left-=this.popup.getTextLeftOffset();var A=x.container.getBoundingClientRect();M.top+=A.top-S.layerConfig.offset,M.left+=A.left-x.renderer.scrollLeft,M.left+=S.gutterWidth;var E={top:M.top,left:M.left};S.$ghostText&&S.$ghostTextWidget&&this.base.row===S.$ghostText.position.row&&(E.top+=S.$ghostTextWidget.el.offsetHeight);var T=x.container.getBoundingClientRect().bottom-_,C=T<E.top?{top:T,left:E.left}:E;this.popup.tryShow(C,_,"bottom")||this.popup.tryShow(M,_,"top")||this.popup.show(M,_)},b.prototype.openPopup=function(x,S,_){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var M=this.popup.getRow(),A=this.popup.data[M];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:l(this.popup.getRow()),inline:this.inlineEnabled}),x.keyBinding.addKeyboardHandler(this.keyboardHandler);var E;this.stickySelection&&(E=this.popup.data.indexOf(A)),(!E||E===-1)&&(E=0),this.popup.setRow(this.autoSelect?E:-1),E===M&&A!==this.completions.filtered[E]&&this.$onPopupChange();var T=this.inlineRenderer&&this.inlineEnabled;if(E===M&&T){var C=this.popup.getData(this.popup.getRow());this.$updateGhostText(C)}_||(this.popup.setTheme(x.getTheme()),this.popup.setFontSize(x.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},b.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},b.prototype.changeListener=function(x){var S=this.editor.selection.lead;(S.row!=this.base.row||S.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},b.prototype.blurListener=function(x){var S=document.activeElement,_=this.editor.textInput.getElement(),M=x.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(x.relatedTarget),A=this.popup&&this.popup.container;S!=_&&S.parentNode!=A&&!M&&S!=this.tooltipNode&&x.relatedTarget!=_&&this.detach()},b.prototype.mousedownListener=function(x){this.detach()},b.prototype.mousewheelListener=function(x){this.popup&&!this.popup.isMouseOver&&this.detach()},b.prototype.mouseOutListener=function(x){this.popup.isOpen&&this.$updatePopupPosition()},b.prototype.goTo=function(x){this.popup.goTo(x)},b.prototype.insertMatch=function(x,S){if(x||(x=this.popup.getData(this.popup.getRow())),!x)return!1;if(x.value==="")return this.detach();var _=this.completions,M=this.getCompletionProvider().insertMatch(this.editor,x,_.filterText,S);return this.completions==_&&this.detach(),M},b.prototype.showPopup=function(x,S){this.editor&&this.detach(),this.activated=!0,this.editor=x,x.completer!=this&&(x.completer&&x.completer.detach(),x.completer=this),x.on("changeSelection",this.changeListener),x.on("blur",this.blurListener),x.on("mousedown",this.mousedownListener),x.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,S)},b.prototype.getCompletionProvider=function(x){return this.completionProvider||(this.completionProvider=new y(x)),this.completionProvider},b.prototype.gatherCompletions=function(x,S){return this.getCompletionProvider().gatherCompletions(x,S)},b.prototype.updateCompletions=function(x,S){if(x&&this.base&&this.completions){var M=this.editor.getCursorPosition(),A=this.editor.session.getTextRange({start:this.base,end:M});if(A==this.completions.filterText)return;if(this.completions.setFilter(A),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==A&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,A,x);return}if(S&&S.matches){var M=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(M.row,M.column),this.base.$insertRight=!0,this.completions=new w(S.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",x)}var _=this.editor.getSession(),M=this.editor.getCursorPosition(),A=u.getCompletionPrefix(this.editor);this.base=_.doc.createAnchor(M.row,M.column-A.length),this.base.$insertRight=!0;var E={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:A,pos:M}).provideCompletions(this.editor,E,(function(T,C,k){var L=C.filtered,I=u.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),k){if(!L.length){var O=!this.autoShown&&this.emptyMessage;if(typeof O=="function"&&(O=this.emptyMessage(I)),O){var N=[{caption:O,value:""}];this.completions=new w(N),this.openPopup(this.editor,I,x),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(L.length==1&&L[0].value==I&&!L[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&L.length==1)return this.insertMatch(L[0])}this.completions=!k&&this.showLoadingState?new w(b.completionsForLoading.concat(L),C.filterText):C,this.openPopup(this.editor,I,x),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!k)}).bind(this)),this.showLoadingState&&!this.autoShown&&!(this.popup&&this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},b.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},b.prototype.updateDocTooltip=function(){var x=this.popup,S=this.completions.filtered,_=S&&(S[x.getHoveredRow()]||S[x.getRow()]),M=null;if(!_||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var A=this.editor.completers.length,E=0;E<A;E++){var T=this.editor.completers[E];if(T.getDocTooltip&&_.completerId===T.id){M=T.getDocTooltip(_);break}}if(!M&&typeof _!="string"&&(M=_),typeof M=="string"&&(M={docText:M}),!M||!(M.docHTML||M.docText))return this.hideDocTooltip();this.showDocTooltip(M)},b.prototype.showDocTooltip=function(x){this.tooltipNode||(this.tooltipNode=f.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",p));var S=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(S.isDark?"ace_dark ":"")+(S.cssClass||"");var _=this.tooltipNode;x.docHTML?_.innerHTML=x.docHTML:x.docText&&(_.textContent=x.docText),_.parentNode||this.popup.container.appendChild(this.tooltipNode);var M=this.popup,A=M.container.getBoundingClientRect();_.style.top=M.container.style.top,_.style.bottom=M.container.style.bottom,_.style.display="block",window.innerWidth-A.right<320?A.left<320?M.isTopdown?(_.style.top=A.bottom+"px",_.style.left=A.left+"px",_.style.right="",_.style.bottom=""):(_.style.top=M.container.offsetTop-_.offsetHeight+"px",_.style.left=A.left+"px",_.style.right="",_.style.bottom=""):(_.style.right=window.innerWidth-A.left+"px",_.style.left=""):(_.style.left=A.right+1+"px",_.style.right="")},b.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var x=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==x&&this.editor.focus(),this.tooltipNode=null,x.parentNode&&x.parentNode.removeChild(x)}},b.prototype.onTooltipClick=function(x){for(var S=x.target;S&&S!=this.tooltipNode;){if(S.nodeName=="A"&&S.href){S.rel="noreferrer",S.target="_blank";break}S=S.parentNode}},b.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var x=this.popup.container;x&&x.parentNode&&x.parentNode.removeChild(x)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",g),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},b}();m.prototype.commands={Up:function(b){b.completer.goTo("up")},Down:function(b){b.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(b){b.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(b){b.completer.goTo("end")},Esc:function(b){b.completer.detach()},Return:function(b){return b.completer.insertMatch()},"Shift-Return":function(b){b.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(b){var x=b.completer.insertMatch();if(!x&&!b.tabstopManager)b.completer.goTo("down");else return x},Backspace:function(b){b.execCommand("backspace");var x=u.getCompletionPrefix(b);!x&&b.completer&&b.completer.detach()},PageUp:function(b){b.completer.popup.gotoPageUp()},PageDown:function(b){b.completer.popup.gotoPageDown()}},m.for=function(b){return b.completer instanceof m||(b.completer&&(b.completer.destroy(),b.completer=null),d.get("sharedPopups")?(m.$sharedInstance||(m.$sharedInstance=new m),b.completer=m.$sharedInstance):(b.completer=new m,b.once("destroy",g))),b.completer},m.startCommand={name:"startAutocomplete",exec:function(b,x){var S=m.for(b);S.autoInsert=!1,S.autoSelect=!0,S.autoShown=!1,S.showPopup(b,x),S.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var y=function(){function b(x){this.initialPosition=x,this.active=!0}return b.prototype.insertByIndex=function(x,S,_){return!this.completions||!this.completions.filtered?!1:this.insertMatch(x,this.completions.filtered[S],_)},b.prototype.insertMatch=function(x,S,_){if(!S)return!1;if(x.startOperation({command:{name:"insertMatch"}}),S.completer&&S.completer.insertMatch)S.completer.insertMatch(x,S);else{if(!this.completions)return!1;var M=this.completions.filterText.length,A=0;if(S.range&&S.range.start.row===S.range.end.row&&(M-=this.initialPosition.prefix.length,M+=this.initialPosition.pos.column-S.range.start.column,A+=S.range.end.column-this.initialPosition.pos.column),M||A){var E;x.selection.getAllRanges?E=x.selection.getAllRanges():E=[x.getSelectionRange()];for(var T=0,C;C=E[T];T++)C.start.column-=M,C.end.column+=A,x.session.remove(C)}S.snippet?h.insertSnippet(x,S.snippet):this.$insertString(x,S),S.completer&&S.completer.onInsert&&typeof S.completer.onInsert=="function"&&S.completer.onInsert(x,S),S.command&&S.command==="startAutocomplete"&&x.execCommand(S.command)}return x.endOperation(),!0},b.prototype.$insertString=function(x,S){var _=S.value||S;x.execCommand("insertstring",_)},b.prototype.gatherCompletions=function(x,S){var _=x.getSession(),M=x.getCursorPosition(),A=u.getCompletionPrefix(x),E=[];this.completers=x.completers;var T=x.completers.length;return x.completers.forEach(function(C,k){C.getCompletions(x,_,M,A,function(L,I){C.hideInlinePreview&&(I=I.map(function(O){return Object.assign(O,{hideInlinePreview:C.hideInlinePreview})})),!L&&I&&(E=E.concat(I)),S(null,{prefix:u.getCompletionPrefix(x),matches:E,finished:--T===0})})}),!0},b.prototype.provideCompletions=function(x,S,_){var M=(function(C){var k=C.prefix,L=C.matches;this.completions=new w(L),S.exactMatch&&(this.completions.exactMatch=!0),S.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(k),(C.finished||this.completions.filtered.length)&&_(null,this.completions,C.finished)}).bind(this),A=!0,E=null;if(this.gatherCompletions(x,(function(C,k){if(this.active){C&&(_(C,[],!0),this.detach());var L=k.prefix;if(L.indexOf(k.prefix)===0){if(A){E=k;return}M(k)}}}).bind(this)),A=!1,E){var T=E;E=null,M(T)}},b.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(x){typeof x.cancel=="function"&&x.cancel()})},b}(),w=function(){function b(x,S){this.all=x,this.filtered=x,this.filterText=S||"",this.exactMatch=!1,this.ignoreCaption=!1}return b.prototype.setFilter=function(x){if(x.length>this.filterText&&x.lastIndexOf(this.filterText,0)===0)var S=this.filtered;else var S=this.all;this.filterText=x,S=this.filterCompletions(S,this.filterText),S=S.sort(function(M,A){return A.exactMatch-M.exactMatch||A.$score-M.$score||(M.caption||M.value).localeCompare(A.caption||A.value)});var _=null;S=S.filter(function(M){var A=M.snippet||M.caption||M.value;return A===_?!1:(_=A,!0)}),this.filtered=S},b.prototype.filterCompletions=function(x,S){var _=[],M=S.toUpperCase(),A=S.toLowerCase();e:for(var E=0,T;T=x[E];E++){var C=!this.ignoreCaption&&T.caption||T.value||T.snippet;if(C){var k=-1,L=0,I=0,O,N;if(this.exactMatch){if(S!==C.substr(0,S.length))continue e}else{var D=C.toLowerCase().indexOf(A);if(D>-1)I=D;else for(var $=0;$<S.length;$++){var R=C.indexOf(A[$],k+1),B=C.indexOf(M[$],k+1);if(O=R>=0&&(B<0||R<B)?R:B,O<0)continue e;N=O-k-1,N>0&&(k===-1&&(I+=10),I+=N,L=L|1<<$),k=O}}T.matchMask=L,T.exactMatch=I?0:1,T.$score=(T.score||0)-I,_.push(T)}}return _},b}();n.Autocomplete=m,n.CompletionProvider=y,n.FilteredList=w}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(t,n,i){var a=t("../range").Range,o=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function s(u,c){var f=u.getTextRange(a.fromPoints({row:0,column:0},c));return f.split(o).length-1}function l(u,c){var f=s(u,c),h=u.getValue().split(o),d=Object.create(null),v=h[f];return h.forEach(function(p,g){if(!(!p||p===v)){var m=Math.abs(f-g),y=h.length-m;d[p]?d[p]=Math.max(y,d[p]):d[p]=y}}),d}n.getCompletions=function(u,c,f,h,d){var v=l(c,f),p=Object.keys(v);d(null,p.map(function(g){return{caption:g,value:g,score:v[g],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(t,n,i){var a=t("../snippets").snippetManager,o=t("../autocomplete").Autocomplete,s=t("../config"),l=t("../lib/lang"),u=t("../autocomplete/util"),c=t("../autocomplete/text_completer"),f={getCompletions:function(M,A,E,T,C){if(A.$mode.completer)return A.$mode.completer.getCompletions(M,A,E,T,C);var k=M.session.getState(E.row),L=A.$mode.getCompletions(k,A,E,T);L=L.map(function(I){return I.completerId=f.id,I}),C(null,L)},id:"keywordCompleter"},h=function(M){var A={};return M.replace(/\${(\d+)(:(.*?))?}/g,function(E,T,C,k){return A[T]=k||""}).replace(/\$(\d+?)/g,function(E,T){return A[T]})},d={getCompletions:function(M,A,E,T,C){var k=[],L=A.getTokenAt(E.row,E.column);L&&L.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?k.push("html-tag"):k=a.getActiveScopes(M);var I=a.snippetMap,O=[];k.forEach(function(N){for(var D=I[N]||[],$=D.length;$--;){var R=D[$],B=R.name||R.tabTrigger;B&&O.push({caption:B,snippet:R.content,meta:R.tabTrigger&&!R.name?R.tabTrigger+"⇥ ":"snippet",completerId:d.id})}},this),C(null,O)},getDocTooltip:function(M){M.snippet&&!M.docHTML&&(M.docHTML=["<b>",l.escapeHTML(M.caption),"</b>","<hr></hr>",l.escapeHTML(h(M.snippet))].join(""))},id:"snippetCompleter"},v=[d,c,f];n.setCompleters=function(M){v.length=0,M&&v.push.apply(v,M)},n.addCompleter=function(M){v.push(M)},n.textCompleter=c,n.keyWordCompleter=f,n.snippetCompleter=d;var p={name:"expandSnippet",exec:function(M){return a.expandWithTab(M)},bindKey:"Tab"},g=function(M,A){m(A.session.$mode)},m=function(M){typeof M=="string"&&(M=s.$modes[M]),M&&(a.files||(a.files={}),y(M.$id,M.snippetFileId),M.modes&&M.modes.forEach(m))},y=function(M,A){!A||!M||a.files[M]||(a.files[M]={},s.loadModule(A,function(E){E&&(a.files[M]=E,!E.snippets&&E.snippetText&&(E.snippets=a.parseSnippetFile(E.snippetText)),a.register(E.snippets||[],E.scope),E.includeScopes&&(a.snippetMap[E.scope].includeScopes=E.includeScopes,E.includeScopes.forEach(function(T){m("ace/mode/"+T)})))}))},w=function(M){var A=M.editor,E=A.completer&&A.completer.activated;if(M.command.name==="backspace")E&&!u.getCompletionPrefix(A)&&A.completer.detach();else if(M.command.name==="insertstring"&&!E){b=M;var T=M.editor.$liveAutocompletionDelay;T?x.delay(T):S(M)}},b,x=l.delayedCall(function(){S(b)},0),S=function(M){var A=M.editor,E=u.getCompletionPrefix(A),T=M.args,C=u.triggerAutocomplete(A,T);if(E&&E.length>=A.$liveAutocompletionThreshold||C){var k=o.for(A);k.autoShown=!0,k.showPopup(A)}},_=t("../editor").Editor;t("../config").defineOptions(_.prototype,"editor",{enableBasicAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:v),this.commands.addCommand(o.startCommand)):this.commands.removeCommand(o.startCommand)},value:!1},enableLiveAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:v),this.commands.on("afterExec",w)):this.commands.off("afterExec",w)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(M){M?(this.commands.addCommand(p),this.on("changeMode",g),g(null,this)):(this.commands.removeCommand(p),this.off("changeMode",g))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(t){r&&(r.exports=t)})}()})(W5e);const H5e=_t({__name:"jsonEdit",props:{type:{type:String,default:"json"},modelValue:{type:String,default:""},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{expose:e,emit:t}){const n=ut(null),i=ut(null),a=t,o=Le({get(){return s.modelValue??""},set(d){a("update:modelValue",d)}}),s=r;a3(()=>{var d,v;n.value&&(s.type?(d=n.value)==null||d.session.setMode("ace/mode/"+s.type):(v=n.value)==null||v.session.setMode("ace/mode/json"))});const l=()=>{i.value&&(eR.config.set("basePath","https://ks3-cn-beijing.ksyun.com/vform2021/ace-mini"),n.value&&n.value.destroy(),n.value=eR.edit(i.value,{fontSize:14,tabSize:2,readOnly:!!s.readonly,highlightActiveLine:!0,wrap:"free",value:s.modelValue,theme:"ace/theme/tomorrow_night_eighties"}),n.value.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),n.value.on("change",()=>{var d;o.value=((d=n.value)==null?void 0:d.getValue())||""}))};return e({getEditorAnnotations:()=>{var d,v;return n.value&&((v=(d=n.value.getSession().getAnnotations())==null?void 0:d.filter(p=>p.type==="error"))==null?void 0:v.length)===0},getValue:()=>o.value,validate:()=>new Promise((d,v)=>{var p,g;n.value&&((g=(p=n.value.getSession().getAnnotations())==null?void 0:p.filter(m=>m.type==="error"))==null?void 0:g.length)===0?d(!0):v(!1)}),setValue:d=>{var v;(v=n.value)==null||v.setValue(d)}}),rn(()=>{l()}),(d,v)=>(We(),Mt("div",null,[bt("div",{ref_key:"ace_dom",ref:i,class:"ace"},null,512)]))}}),iC=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},V5e=iC(H5e,[["__scopeId","data-v-6820d296"]]),Y5e={class:"h-full"},X5e=_t({__name:"aside",props:{xmlData:{}},emits:["update:xmlData"],setup(r,{expose:e,emit:t}){const n=r,i=t,a=Le({get(){return n.xmlData},set(l){i("update:xmlData",l)}}),o=ut({}),s=ut(null);return rn(()=>{o.value={height:"calc(100vh - 96px)",width:"100%"}}),e({jsonEditRef:s}),(l,u)=>(We(),Mt("div",null,[bt("div",Y5e,[St(V5e,{ref_key:"jsonEditRef",ref:s,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c),type:"xml",class:"json-edit",style:ln(o.value)},null,8,["modelValue","style"])])]))}}),K5e={class:"flex items-center px-[10px] leading-8 gap-4"},q5e={class:"flex items-center gap-2 text-sm"},Z5e=bt("span",null,"字段级血缘关系",-1),Q5e=_t({__name:"topbar",props:{fieldChecked:{type:Boolean},wholeChecked:{type:Boolean},keyword:{}},emits:["update:fieldChecked","update:wholeChecked","update:keyword"],setup(r,{emit:e}){const t=r,n=e,i=Le({get(){return t.fieldChecked},set(a){n("update:fieldChecked",a)}});return(a,o)=>{const s=$ne;return We(),Mt("div",null,[bt("div",K5e,[bt("div",q5e,[Z5e,St(s,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=l=>i.value=l),size:"small"},null,8,["modelValue"])])])])}}}),J5e=r=>{if(!r)return;const e=r.getZoom(),t=r.get("canvas"),n=t.getPointByClient(t.get("width")/2,t.get("height")/2),i=t.get("pixelRatio")||1,a=1+.05*5;if(!(a*e>5))return r.zoom(a,{x:n.x/i,y:n.y/i}),{text:`${Math.round(a*e*100)}%`,ratio:a*e}},e4e=r=>{if(!r)return;const e=r.getZoom(),t=r.get("canvas"),n=t.getPointByClient(t.get("width")/2,t.get("height")/2),i=t.get("pixelRatio")||1,a=1-.05*5;if(!(a*e<.3))return r.zoom(a,{x:n.x/i,y:n.y/i}),{text:`${Math.round(a*e*100)}%`,ratio:a*e}},t4e=r=>{if(!r)return;const e=r.getZoom();return r.zoom(1/e),r.fitCenter(),{text:"100%",ratio:1}},r4e=r=>{if(!r)return;r.getNodes().length>0&&r.fitView([20,20]);const t=r.getZoom();return{text:`${Math.round(t*100)}%`,ratio:t}},n4e=r=>{r&&r.layout()},i4e=r=>{r&&r.downloadFullImage("血缘图","image/png",{padding:[30,15,15,15]})},a4e=r=>{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.msRequestFullscreen&&r.msRequestFullscreen()},o4e=()=>{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},tR=(r,e)=>{!r||!e||(r.data(e),r.render(),r.fitView())},s4e=(r,e)=>{r&&r.setTextWaterMarker(e)},l4e=(r,e)=>{if(!r)return;const t=r.findAll("edge",n=>n.getStates().length!==0&&n.getStates()[0].startsWith("highlight"));t&&t.forEach(n=>r.setItemState(n,`highlight-${e}`,!0))},ux=(r,e,t)=>{if(!r)return;const n=r.getNodes();n&&n.forEach(i=>{i.getModel().level===e&&r.setItemState(i,`fill-${t}`,!0)})},rR=(r,e,t,n)=>{r&&e.forEach(function(i){r.setItemState(i,`highlight-${t}`,!0),i.toFront();const a=i.getModel().sourceAnchor;r.setItemState(i.getSource(),n+"-"+a,!0)})},nR=(r,e,t,n)=>{r&&e.forEach(function(i){r.setItemState(i,`highlight-${t}`,!0),i.toFront();const a=i.getModel().targetAnchor;r.setItemState(i.getTarget(),n+"-"+a,!0)})},u4e={class:"flex flex-col justify-center gap-4"},c4e=_t({__name:"toolbar",props:{graph:{}},setup(r){const e=r,t=ut(!1),n=d=>{t.value=d},i=[{key:"zoomOut",name:St(Z3,null,null),description:"放大",action:()=>{a()}},{key:"zoomIn",name:St(tQ,null,null),description:"缩小",action:()=>{o()}},{key:"autoZoom",name:St(VZ,null,null),description:"自适应",action:()=>{s()}},{key:"realZoom",name:St(WZ,null,null),description:"视图居中",action:()=>{l()}},{key:"clearCanvas",name:St(XZ,null,null),description:"恢复布局",action:()=>{u()}},{key:"downloadImage",name:St(FZ,null,null),description:"下载图片",action:()=>{c()}},t.value?{key:"fullscreenExitOutlined",name:St(Ek,null,null),description:"退出全屏",action:()=>{n(!t.value),h()}}:{key:"fullscreenOutlined",name:St(Ek,null,null),description:"全屏查看",action:()=>{n(!t.value),f()}}],a=()=>{J5e(e.graph)},o=()=>{e4e(e.graph)},s=()=>{r4e(e.graph)},l=()=>{t4e(e.graph)},u=()=>{n4e(e.graph)},c=()=>{i4e(e.graph)},f=()=>{a4e(e.graph)},h=()=>{o4e()};return(d,v)=>{const p=dn,g=om,m=BE;return We(),Mt("div",null,[bt("div",u4e,[(We(),Mt(wn,null,K_(i,y=>St(m,{effect:"light",content:y.description,placement:"left",key:y.key},{default:Nt(()=>[St(g,{type:"info",text:"",onClick:y.action,class:"!m-0 !h-[50px] w-[40px] flex"},{default:Nt(()=>[St(p,{class:"m-auto"},{default:Nt(()=>[(We(),or(_i(y.name)))]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1032,["content"])),64))])])}}}),f4e={class:"g6-component-topbar"},h4e=_t({__name:"main",props:{layout:{},waterMaker:{},highlight:{},sourceColor:{},midColor:{},endColor:{},lineageData:{},nodeSize:{}},emits:["update:nodeSize"],setup(r,{emit:e}){const t=e,n=Le({get(){return i.nodeSize??0},set(w){t("update:nodeSize",w)}}),i=r,a=ut(null),o=ut(null),s=ut(null),l=ut(null),u=ut(null),c=ut(null),f=ut(!0),h=ut(!0),d=ut(""),v=(w,b,x,S)=>{const _=b.getModel(),M=b.getEdges(),A=[];C_(M,_,x,A);const E=[];A_(M,_,x,E),g(w),w.setItemState(b,S+"-"+x,!0),rR(w,A,i.highlight,S),nR(w,E,i.highlight,S)},p=(w,b,x)=>{const S=b.getSource(),_=S.getModel(),M=S.getInEdges(),A=b.getModel().sourceAnchor,E=[];E.push(b),C_(M,_,A,E);const T=b.getTarget(),C=T.getModel(),k=T.getOutEdges(),L=b.getModel().targetAnchor,I=[];I.push(b),A_(k,C,L,I),g(w),rR(w,E,i.highlight,x),nR(w,I,i.highlight,x)},g=w=>{w&&(w.setAutoPaint(!1),w.getNodes().forEach(function(b){w.clearItemStates(b)}),w.getEdges().forEach(function(b){w.clearItemStates(b)}),w.paint(),w.setAutoPaint(!0))},m=w=>{w.off("node:click").on("node:click",b=>{const{item:x,target:S}=b,_=S.get("name");_&&(f.value?v(w,x,_,"highlight"):v(w,x,_,"tableHighlight"))}),w.off("edge:click").on("edge:click",b=>{const{item:x}=b;f.value?p(w,x,"highlight"):p(w,x,"tableHighlight")}),w.off("canvas:click").on("canvas:click",b=>{g(w)})},y=()=>{var w;if(!s.value){const b=new Vu.Minimap,x=new Vu.ToolBar({getContent:()=>o.value||""}),S=new Vu.Grid,_=a.value,M=document.documentElement.clientWidth-(((w=document.querySelector("#aside"))==null?void 0:w.clientWidth)||0),A=document.documentElement.clientHeight,E=M,T=window.outerHeight-181||A;s.value=new Vu.Graph({container:_||"",width:E,height:T,plugins:[S,b,x],fitView:!0,modes:{default:["drag-canvas","zoom-canvas","drag-node"]},layout:{type:"dagre",rankdir:"LR",align:"UL",controlPoints:!0,nodesep:100,ranksep:100,begin:[1e3,1e3]},defaultNode:{type:"dice-er-box",color:"#096DD9",boxStyle:{stroke:"#096DD9",lineWidth:6,radius:4},style:{fill:"#096DD9"},labelCfg:{style:{fill:"#ffffff",fontSize:20}}},defaultEdge:{type:"dice-er-edge",style:{stroke:"#6C6B6B",lineWidth:2,endArrow:!0}}})}};return qt(()=>i.layout,w=>{s.value&&Ln(()=>{var M;const b=document.documentElement.clientWidth-(((M=document.querySelector("#aside"))==null?void 0:M.clientWidth)||0),x=document.documentElement.clientHeight,S=window.outerHeight-181||x,_=b;s.value.changeSize(_,S),s.value.fitView()})}),qt(()=>i.lineageData,w=>{if(f.value=!0,h.value=!0,w){u.value=w.withProcessData,c.value=w.noProcessData;const b=JD(w.withProcessData.data);n.value=b.nodes.length,tR(s.value,b)}},{immediate:!0,deep:!0}),qt(()=>i.waterMaker,w=>{w&&s4e(s.value,w||"")}),qt(()=>i.highlight,w=>{w&&l4e(s.value,w)}),qt(()=>i.sourceColor,w=>{w&&ux(s.value,0,w)}),qt(()=>i.midColor,w=>{w&&ux(s.value,1,w)}),qt(()=>i.endColor,w=>{w&&ux(s.value,2,w)}),qt(()=>f.value,w=>{if(!u.value)return;let b;w?h.value&&(b=JD(u.value.data)):h.value&&(b=I5e(u.value.data)),n.value=b.nodes.length,tR(s.value,b)}),qt(()=>s.value,w=>{if(w){const b=s.value;i.waterMaker&&b.setTextWaterMarker(i.waterMaker),m(b)}}),rn(()=>{y()}),(w,b)=>(We(),Mt("div",null,[bt("div",{ref_key:"wrapperRef",ref:a,class:"relative"},[bt("div",f4e,[St(Q5e,{ref_key:"topBarRef",ref:l,fieldChecked:f.value,"onUpdate:fieldChecked":b[0]||(b[0]=x=>f.value=x),wholeChecked:h.value,"onUpdate:wholeChecked":b[1]||(b[1]=x=>h.value=x),keyword:d.value,"onUpdate:keyword":b[2]||(b[2]=x=>d.value=x)},null,8,["fieldChecked","wholeChecked","keyword"])]),bt("div",{class:"g6-component-toolbar",ref_key:"toolbarRef",ref:o},[St(c4e,{graph:s.value},null,8,["graph"])],512)],512)]))}}),d4e=iC(h4e,[["__scopeId","data-v-778873ee"]]),v4e={class:"flex flex-col w-full h-full"},p4e={class:"flex flex-auto"},g4e=_t({__name:"index",setup(r){const e=ut("#FF0000"),t=ut(""),n=ut(),i=ut(""),a=ut(0),o=ut("asdie+main"),s=ut("#91c050"),l=ut("#d26b58"),u=ut("#419a60"),c=ut(null),f=ut(null),h=(b,x)=>{n.value=b,i.value=x,c.value.jsonEditRef.setValue(x)},d=()=>{if(c.value.jsonEditRef.getEditorAnnotations()){const{tableData:x,midTableData:S,endTableData:_,relationData:M}=k_(i.value);n.value={withProcessData:{data:T_({tableData:[...x,...S,..._],relationData:M})}}}else alert("请检查xml格式")},v=async()=>{const x=await(await fetch("/blood-vue3-g6/demo.xml")).text();i.value=x,c.value.jsonEditRef.setValue(x);const{tableData:S,midTableData:_,endTableData:M,relationData:A}=k_(i.value);n.value={withProcessData:{data:T_({tableData:[...S,..._,...M],relationData:A})}}},p=Le(()=>["asdie+main","asdie"].includes(o.value)),g=Le(()=>["asdie+main","main"].includes(o.value)),m=Le(()=>o.value==="asdie"?"w-screen":"w-[400px]"),y=()=>{const b=JSON.parse(__());e.value=b.highlight,t.value=b.waterMaker,o.value=b.layout,s.value=b.sourceColor,l.value=b.midColor,u.value=b.endColor},w=()=>{const b=JSON.stringify({highlight:e.value,waterMaker:t.value,layout:o.value,sourceColor:s.value,midColor:l.value,endColor:u.value});A5e(b)};return rn(()=>{window.addEventListener("beforeunload",w),v(),__()?y():w()}),cy(()=>{window.removeEventListener("beforeunload",w)}),(b,x)=>{const S=r7;return We(),Mt("div",v4e,[St(j5e,{id:"header",highlight:e.value,"onUpdate:highlight":x[0]||(x[0]=_=>e.value=_),waterMaker:t.value,"onUpdate:waterMaker":x[1]||(x[1]=_=>t.value=_),layout:o.value,"onUpdate:layout":x[2]||(x[2]=_=>o.value=_),sourceColor:s.value,"onUpdate:sourceColor":x[3]||(x[3]=_=>s.value=_),midColor:l.value,"onUpdate:midColor":x[4]||(x[4]=_=>l.value=_),endColor:u.value,"onUpdate:endColor":x[5]||(x[5]=_=>u.value=_),onUpload:h,onRender:d,class:"flex-none"},null,8,["highlight","waterMaker","layout","sourceColor","midColor","endColor"]),bt("div",p4e,[$s(St(X5e,{id:"aside",class:dt(["flex-none h-full",m.value]),xmlData:i.value,"onUpdate:xmlData":x[6]||(x[6]=_=>i.value=_),ref_key:"asideRef",ref:c},null,8,["class","xmlData"]),[[Qd,p.value]]),$s(St(d4e,{ref_key:"mainRef",ref:f,class:"flex-1",layout:o.value,highlight:e.value,waterMaker:t.value,lineageData:n.value,sourceColor:s.value,midColor:l.value,endColor:u.value,nodeSize:a.value,"onUpdate:nodeSize":x[7]||(x[7]=_=>a.value=_)},null,8,["layout","highlight","waterMaker","lineageData","sourceColor","midColor","endColor","nodeSize"]),[[Qd,g.value]])]),St(S,{nodeSize:a.value,class:"flex-none"},null,8,["nodeSize"])])}}}),m4e=iC(g4e,[["__scopeId","data-v-1e561040"]]),y4e=_t({__name:"App",setup(r){return(e,t)=>(We(),Mt("div",null,[St(m4e)]))}});qV(y4e).mount("#app")});export default b4e();
